--- START OF FILE index.tsx ---
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';

const rootElement = document.getElementById('root');
if (!rootElement) {
  throw new Error("Could not find root element to mount to");
}

const root = ReactDOM.createRoot(rootElement);
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
--- END OF FILE index.tsx ---

--- START OF FILE App.tsx ---
import React, { useState, useEffect, useMemo, useRef, lazy, Suspense } from 'react';
import { Screen } from './types';
import Sidebar from './components/Sidebar';
import { useKanban } from './services/useKanban';
import { useInventory } from './services/useInventory';
import { useProviders } from './services/useProviders';
import { useProduction } from './features/baking/useProduction';
import { useCategories } from './services/useCategories';
import { useRecipeLog } from './services/useRecipeLog';
import { useAudioAlerts } from './services/useAudioAlerts';
import Icon from './components/Icon';
import { useUsers } from './services/useUsers';

// --- Code Splitting ---
const BreadProductionScreen = lazy(() => import('./features/baking/BreadProductionScreen'));
const OperationsScreen = lazy(() => import('./features/operations/OperationsScreen'));
const InventoryScreen = lazy(() => import('./features/inventory/InventoryScreen'));
const SettingsScreen = lazy(() => import('./features/settings/SettingsScreen'));

type TimeStatus = 'due' | 'imminent' | 'normal';

const calculateTimeDifference = (taskTime: string) => {
    const now = new Date();
    const [hours, minutes] = taskTime.split(':').map(Number);
    const taskDateTime = new Date();
    taskDateTime.setHours(hours, minutes, 0, 0);
    return Math.round((taskDateTime.getTime() - now.getTime()) / 1000 / 60);
};

const LoadingFallback = () => (
    <div className="w-full h-full flex items-center justify-center">
        <Icon name="refresh-cw" className="animate-spin text-blue-500" size={48} />
    </div>
);


const App: React.FC = () => {
    const [activeScreen, setActiveScreen] = useState<Screen>(Screen.Baking);
    const [isMobileSidebarOpen, setIsMobileSidebarOpen] = useState(false);

    // Centralized Hooks
    const productionHook = useProduction();
    const kanbanHook = useKanban();
    const inventoryHook = useInventory();
    const providersHook = useProviders();
    const categoriesHook = useCategories();
    const recipeLogHook = useRecipeLog();
    const usersHook = useUsers();
    const { playAlert } = useAudioAlerts();
    
    const { processes } = productionHook;
    const { tasks } = kanbanHook;
    const { items } = inventoryHook;
    
    // Time-aware logic for tasks
    const [timeAwareTasks, setTimeAwareTasks] = useState<Record<string, { diff: number; status: TimeStatus }>>({});

    const todayStr = useMemo(() => {
         const today = new Date();
         today.setMinutes(today.getMinutes() - today.getTimezoneOffset());
         return today.toISOString().split('T')[0];
    }, []);

    useEffect(() => {
        const checkTasksTime = () => {
            const newTimeAwareTasks: Record<string, { diff: number; status: TimeStatus }> = {};
            tasks.forEach(task => {
                if (task.date === todayStr && task.status !== 'done') {
                    const diff = calculateTimeDifference(task.time);
                    let status: TimeStatus = 'normal';
                     // This status is for Kanban card pulsing, not the same as critical logic
                    if (diff <= 0) {
                        status = 'due';
                    } else if (diff <= 15) { 
                        status = 'imminent';
                    }
                    newTimeAwareTasks[task.id] = { diff, status };
                }
            });
            setTimeAwareTasks(newTimeAwareTasks);
        };

        checkTasksTime();
        const interval = setInterval(checkTasksTime, 10000);
        return () => clearInterval(interval);
    }, [tasks, todayStr]);

    // Memoized derived state for alerts
    const criticalAndUpcomingTasks = useMemo(() => {
        const CRITICAL_WINDOW_START_MINS = 30;
        const CRITICAL_WINDOW_END_MINS = -15;

        return tasks
            .filter(t => t.date === todayStr && t.isCritical && t.status !== 'done' && timeAwareTasks[t.id])
            .map(t => ({ task: t, diff: timeAwareTasks[t.id].diff }))
            .filter(({ diff }) => diff <= CRITICAL_WINDOW_START_MINS && diff >= CRITICAL_WINDOW_END_MINS)
            .sort((a, b) => a.diff - b.diff);
    }, [tasks, timeAwareTasks, todayStr]);

    // Audio Alert Logic for Kanban tasks
    const playedAlerts = useRef(new Set<string>());

    useEffect(() => {
        const currentCriticalIds = new Set(criticalAndUpcomingTasks.map(t => `task-${t.task.id}`));
        currentCriticalIds.forEach(id => {
            if (!playedAlerts.current.has(id)) {
                playAlert();
                playedAlerts.current.add(id);
            }
        });
        // Clean up alerts for tasks that are no longer critical
        playedAlerts.current.forEach(id => {
            if (id.startsWith('task-') && !currentCriticalIds.has(id)) {
                playedAlerts.current.delete(id);
            }
        });
    }, [criticalAndUpcomingTasks, playAlert]);


    const sidebarCriticalTasks = useMemo(() => {
        return criticalAndUpcomingTasks.slice(0, 3);
    }, [criticalAndUpcomingTasks]);

    const inProgressTasks = useMemo(() => {
        return tasks.filter(t => t.status === 'inprogress');
    }, [tasks]);


    const shoppingListItems = useMemo(() => {
        return items.filter(item => item.currentStock <= item.minStock);
    }, [items]);

    const renderScreen = () => {
        switch (activeScreen) {
            case Screen.Baking:
                return <BreadProductionScreen productionHook={productionHook} recipeLogHook={recipeLogHook} />;
            case Screen.Operations:
                return <OperationsScreen kanbanHook={kanbanHook} criticalTasks={criticalAndUpcomingTasks} users={usersHook.users} />;
            case Screen.Inventory:
                return <InventoryScreen 
                            inventoryHook={inventoryHook} 
                            providers={providersHook.providers}
                            categories={categoriesHook.categories} 
                       />;
            case Screen.Settings:
                return <SettingsScreen 
                            providersHook={providersHook}
                            categoriesHook={categoriesHook}
                            recipeLogHook={recipeLogHook}
                            usersHook={usersHook}
                       />;
            default:
                return <BreadProductionScreen productionHook={productionHook} recipeLogHook={recipeLogHook} />;
        }
    };

    const getTitle = () => {
        switch (activeScreen) {
            case Screen.Baking:
                return 'Producción de Pan';
            case Screen.Operations:
                return 'Operaciones';
            case Screen.Inventory:
                return 'Inventario';
            case Screen.Settings:
                return 'Configuración';
            default:
                return 'Cafestesia';
        }
    };
    
    return (
        <div className="w-full min-h-screen md:p-4 flex items-center justify-center bg-gray-100 text-gray-800">
            <div className="app-container w-full h-screen max-w-5xl bg-white md:rounded-xl shadow-lg overflow-hidden relative border border-gray-200">
                
                {isMobileSidebarOpen && (
                    <div
                        className="md:hidden fixed inset-0 bg-black/60 z-40"
                        onClick={() => setIsMobileSidebarOpen(false)}
                        aria-hidden="true"
                    ></div>
                )}
                
                <div className="grid md:grid-cols-[240px_1fr] h-full">
                    <Sidebar 
                        activeScreen={activeScreen} 
                        setActiveScreen={setActiveScreen}
                        processes={processes}
                        urgentTasks={sidebarCriticalTasks}
                        shoppingListItems={shoppingListItems}
                        inProgressTasks={inProgressTasks}
                        isOpen={isMobileSidebarOpen}
                        onClose={() => setIsMobileSidebarOpen(false)}
                    />

                    <main className="main-content flex flex-col overflow-y-auto h-full">
                         <header className="main-content-header p-4 md:p-6 border-b border-gray-200 flex justify-between items-center flex-shrink-0">
                            <button className="md:hidden p-2 -ml-2 text-gray-600 hover:text-blue-600" onClick={() => setIsMobileSidebarOpen(true)}>
                                <Icon name="menu" size={24} />
                            </button>
                            <h2 className="text-xl md:text-3xl font-bold text-blue-600">{getTitle()}</h2>
                            <div className="md:hidden w-8"></div> {/* Spacer to center title on mobile */}
                        </header>
                        <div className="flex-grow relative">
                            <div className="absolute inset-0 overflow-y-auto relative">
                               <Suspense fallback={<LoadingFallback />}>
                                   {renderScreen()}
                               </Suspense>
                            </div>
                        </div>
                    </main>
                </div>

            </div>
        </div>
    );
};

export default App;
--- END OF FILE App.tsx ---

--- START OF FILE tsconfig.node.json ---
{
  "compilerOptions": {
    "composite": true,
    "skipLibCheck": true,
    "module": "ESNext",
    "moduleResolution": "bundler",
    "allowSyntheticDefaultImports": true,
    "strict": true
  },
  "include": ["vite.config.ts"]
}
--- END OF FILE tsconfig.node.json ---

--- START OF FILE index.html ---
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Gestor de Operaciones - Cafestesia</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Simple scrollbar styling */
      ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #555;
      }
      body {
        font-family: 'Roboto', sans-serif;
        overscroll-behavior: none;
      }
      @keyframes pulse-border-yellow {
        0%, 100% { box-shadow: 0 0 0 0 rgba(234, 179, 8, 0.7); }
        50% { box-shadow: 0 0 0 4px rgba(234, 179, 8, 0); }
      }
      .animate-pulse-yellow {
        border-color: #eab308;
        animation: pulse-border-yellow 2s infinite;
      }
      @keyframes pulse-border-red {
        0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
        50% { box-shadow: 0 0 0 4px rgba(239, 68, 68, 0); }
      }
      .animate-pulse-red {
        border-color: #ef4444;
        animation: pulse-border-red 1.5s infinite;
      }
      /* Weekday Selector Animations */
      @keyframes slide-out-left { from { transform: translateX(0); opacity: 1; } to { transform: translateX(-100%); opacity: 0; } }
      @keyframes slide-in-from-right { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
      @keyframes slide-out-right { from { transform: translateX(0); opacity: 1; } to { transform: translateX(100%); opacity: 0; } }
      @keyframes slide-in-from-left { from { transform: translateX(-100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

      .slide-out-left { animation: slide-out-left 0.2s ease-in forwards; }
      .slide-in-from-right { animation: slide-in-from-right 0.2s ease-out forwards; }
      .slide-out-right { animation: slide-out-right 0.2s ease-in forwards; }
      .slide-in-from-left { animation: slide-in-from-left 0.2s ease-out forwards; }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "firebase/": "https://aistudiocdn.com/firebase@^12.5.0/",
    "vite": "https://aistudiocdn.com/vite@^7.1.12",
    "@vitejs/plugin-react": "https://aistudiocdn.com/@vitejs/plugin-react@^5.1.0",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.28.0"
  }
}
</script>
</head>
<body class="bg-gray-100">
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
</body>
</html>
--- END OF FILE index.html ---

--- START OF FILE dist/index.html ---
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Gestor de Operaciones - Cafestesia</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Simple scrollbar styling */
      ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #555;
      }
      body {
        font-family: 'Roboto', sans-serif;
        overscroll-behavior: none;
      }
      @keyframes pulse-border-yellow {
        0%, 100% { box-shadow: 0 0 0 0 rgba(234, 179, 8, 0.7); }
        50% { box-shadow: 0 0 0 4px rgba(234, 179, 8, 0); }
      }
      .animate-pulse-yellow {
        border-color: #eab308;
        animation: pulse-border-yellow 2s infinite;
      }
      @keyframes pulse-border-red {
        0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
        50% { box-shadow: 0 0 0 4px rgba(239, 68, 68, 0); }
      }
      .animate-pulse-red {
        border-color: #ef4444;
        animation: pulse-border-red 1.5s infinite;
      }
      /* Weekday Selector Animations */
      @keyframes slide-out-left { from { transform: translateX(0); opacity: 1; } to { transform: translateX(-100%); opacity: 0; } }
      @keyframes slide-in-from-right { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
      @keyframes slide-out-right { from { transform: translateX(0); opacity: 1; } to { transform: translateX(100%); opacity: 0; } }
      @keyframes slide-in-from-left { from { transform: translateX(-100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

      .slide-out-left { animation: slide-out-left 0.2s ease-in forwards; }
      .slide-in-from-right { animation: slide-in-from-right 0.2s ease-out forwards; }
      .slide-out-right { animation: slide-out-right 0.2s ease-in forwards; }
      .slide-in-from-left { animation: slide-in-from-left 0.2s ease-out forwards; }
    </style>

<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "firebase/": "https://aistudiocdn.com/firebase@^12.5.0/",
    "vite": "https://aistudiocdn.com/vite@^7.1.12",
    "@vitejs/plugin-react": "https://aistudiocdn.com/@vitejs/plugin-react@^5.1.0",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.28.0"
  }
}
</script>
  <script type="module" crossorigin src="/assets/index-BZJ7RoO2.js"></script>
</head>
<body class="bg-gray-100">
    <div id="root"></div>
</body>
</html>
--- END OF FILE dist/index.html ---

--- START OF FILE features/settings/ProviderFormModal.tsx ---
import React, { useState, useEffect, FormEvent } from 'react';
import { Provider } from '../../types';
import Modal from '../../components/Modal';

interface ProviderFormModalProps {
    isOpen: boolean;
    onClose: () => void;
    onSave: (provider: Omit<Provider, 'id'> | Provider) => void;
    onDelete: (providerId: string) => void;
    provider: Provider | null;
}

const ProviderFormModal: React.FC<ProviderFormModalProps> = ({ isOpen, onClose, onSave, onDelete, provider }) => {
    const [name, setName] = useState('');
    
    useEffect(() => {
        if (isOpen) {
            setName(provider?.name || '');
        }
    }, [isOpen, provider]);

    const handleSubmit = (e: FormEvent) => {
        e.preventDefault();
        if (!name.trim()) return;

        const providerData = { name: name.trim() };
        if (provider) {
            onSave({ ...providerData, id: provider.id });
        } else {
            onSave(providerData);
        }
        onClose();
    };

    const handleDelete = () => {
        if (provider && window.confirm(`¿Estás seguro de que quieres eliminar al proveedor "${provider.name}"?`)) {
            onDelete(provider.id);
            onClose();
        }
    };
    
    return (
        <Modal isOpen={isOpen} onClose={onClose} title={provider ? "Editar Proveedor" : "Añadir Proveedor"}>
            <form onSubmit={handleSubmit} className="flex flex-col gap-4">
                <div>
                    <label className="block text-sm font-medium text-gray-600 mb-1">Nombre del Proveedor</label>
                    <input 
                        type="text" 
                        value={name} 
                        onChange={e => setName(e.target.value)} 
                        required 
                        autoFocus
                        className="w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                </div>
                
                <div className="flex justify-between items-center mt-4">
                    <div>
                        {provider && (
                            <button type="button" onClick={handleDelete} className="py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700">Eliminar</button>
                        )}
                    </div>
                    <div className="flex gap-4">
                        <button type="button" onClick={onClose} className="py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300">Cancelar</button>
                        <button type="submit" className="py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700">Guardar</button>
                    </div>
                </div>
            </form>
        </Modal>
    );
};

export default ProviderFormModal;
--- END OF FILE features/settings/ProviderFormModal.tsx ---

--- START OF FILE features/settings/SettingsScreen.tsx ---
import React, { useState } from 'react';
import { Provider, Category, Recipe, User } from '../../types';
import { useProviders } from '../../services/useProviders';
import { useCategories } from '../../services/useCategories';
import { useRecipeLog } from '../../services/useRecipeLog';
import Icon from '../../components/Icon';
import ProviderFormModal from './ProviderFormModal';
import CategoryFormModal from './CategoryFormModal';
import { RECIPES } from '../../constants';
import RecipeLogModal from './RecipeLogModal';
import { useUsers } from '../../services/useUsers';
import UserFormModal from './UserFormModal';

interface SettingsScreenProps {
    providersHook: ReturnType<typeof useProviders>;
    categoriesHook: ReturnType<typeof useCategories>;
    recipeLogHook: ReturnType<typeof useRecipeLog>;
    usersHook: ReturnType<typeof useUsers>;
}

type SettingsTab = 'production' | 'inventory' | 'operations';

const SettingsScreen: React.FC<SettingsScreenProps> = ({ providersHook, categoriesHook, recipeLogHook, usersHook }) => {
    const [activeTab, setActiveTab] = useState<SettingsTab>('operations');

    // Provider state
    const { providers, addProvider, updateProvider, deleteProvider } = providersHook;
    const [isProviderModalOpen, setIsProviderModalOpen] = useState(false);
    const [editingProvider, setEditingProvider] = useState<Provider | null>(null);

    // Category state
    const { categories, addCategory, updateCategory, deleteCategory } = categoriesHook;
    const [isCategoryModalOpen, setIsCategoryModalOpen] = useState(false);
    const [editingCategory, setEditingCategory] = useState<Category | null>(null);

    // Recipe Log state
    const { feedbackLog } = recipeLogHook;
    const [selectedRecipe, setSelectedRecipe] = useState<Recipe | null>(null);

    // User state
    const { users, addUser, updateUser, deleteUser } = usersHook;
    const [isUserModalOpen, setIsUserModalOpen] = useState(false);
    const [editingUser, setEditingUser] = useState<User | null>(null);


    const handleEditProvider = (provider: Provider) => {
        setEditingProvider(provider);
        setIsProviderModalOpen(true);
    };

    const handleAddNewProvider = () => {
        setEditingProvider(null);
        setIsProviderModalOpen(true);
    };

    const handleProviderSave = (providerData: Omit<Provider, 'id'> | Provider) => {
        if ('id' in providerData) {
            updateProvider(providerData);
        } else {
            addProvider(providerData);
        }
    };

     const handleEditCategory = (category: Category) => {
        setEditingCategory(category);
        setIsCategoryModalOpen(true);
    };

    const handleAddNewCategory = () => {
        setEditingCategory(null);
        setIsCategoryModalOpen(true);
    };
    
    const handleCategorySave = (categoryData: Omit<Category, 'id'> | Category) => {
        if ('id' in categoryData) {
            updateCategory(categoryData);
        } else {
            addCategory(categoryData);
        }
    };

    const handleEditUser = (user: User) => {
        setEditingUser(user);
        setIsUserModalOpen(true);
    };

    const handleAddNewUser = () => {
        setEditingUser(null);
        setIsUserModalOpen(true);
    };

    const handleUserSave = (userData: Omit<User, 'id'> | User) => {
        if ('id' in userData) {
            updateUser(userData);
        } else {
            addUser(userData);
        }
    };

    const TabButton: React.FC<{ tab: SettingsTab, label: string, icon: 'cake-slice' | 'archive' | 'clipboard-kanban' }> = ({ tab, label, icon }) => (
        <button
            onClick={() => setActiveTab(tab)}
            className={`flex items-center gap-2 py-3 px-4 text-sm md:text-base font-bold border-b-4 transition-colors ${activeTab === tab ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-800'}`}
        >
            <Icon name={icon} size={18} />
            {label}
        </button>
    );

    return (
        <div className="p-4 md:p-6 bg-gray-50 h-full overflow-y-auto">
            <div className="max-w-4xl mx-auto">
                <div className="border-b border-gray-200">
                    <div className="flex gap-4">
                        <TabButton tab="production" label="Producción" icon="cake-slice" />
                        <TabButton tab="inventory" label="Inventario" icon="archive" />
                        <TabButton tab="operations" label="Operaciones" icon="clipboard-kanban" />
                    </div>
                </div>

                <div className="mt-6">
                    {activeTab === 'production' && (
                        <section>
                            <h2 className="text-xl font-bold text-blue-700 mb-4">Bitácora de Recetas</h2>
                            <div className="bg-white rounded-lg border border-gray-200 shadow-sm">
                                <ul className="divide-y divide-gray-200">
                                    {Object.values(RECIPES).map(recipe => (
                                        <li key={recipe.id} className="p-4 flex justify-between items-center">
                                            <span className="font-medium text-gray-800">{recipe.name}</span>
                                            <button 
                                                onClick={() => setSelectedRecipe(recipe)}
                                                className="text-sm text-blue-600 hover:underline font-semibold"
                                            >
                                                Ver Historial
                                            </button>
                                        </li>
                                    ))}
                                </ul>
                            </div>
                        </section>
                    )}

                    {activeTab === 'inventory' && (
                        <div className="space-y-8">
                             <section>
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-xl font-bold text-blue-700">Proveedores de Inventario</h2>
                                    <button onClick={handleAddNewProvider} className="flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm">
                                        <Icon name="plus-circle" size={16} />
                                        Añadir Proveedor
                                    </button>
                                </div>
                                <div className="bg-white rounded-lg border border-gray-200 shadow-sm">
                                    <ul className="divide-y divide-gray-200">
                                        {providers.length > 0 ? providers.map(provider => (
                                            <li key={provider.id} className="p-4 flex justify-between items-center">
                                                <span className="font-medium text-gray-800">{provider.name}</span>
                                                <button 
                                                    onClick={() => handleEditProvider(provider)}
                                                    className="text-sm text-blue-600 hover:underline font-semibold"
                                                >
                                                    Editar
                                                </button>
                                            </li>
                                        )) : (
                                            <li className="p-4 text-center text-gray-500">No hay proveedores. ¡Añade el primero!</li>
                                        )}
                                    </ul>
                                </div>
                            </section>

                            <section>
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-xl font-bold text-blue-700">Categorías de Inventario</h2>
                                    <button onClick={handleAddNewCategory} className="flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm">
                                        <Icon name="plus-circle" size={16} />
                                        Añadir Categoría
                                    </button>
                                </div>
                                <div className="bg-white rounded-lg border border-gray-200 shadow-sm">
                                    <ul className="divide-y divide-gray-200">
                                        {categories.length > 0 ? categories.map(category => (
                                            <li key={category.id} className="p-4 flex justify-between items-center">
                                                <span className="font-medium text-gray-800">{category.name}</span>
                                                <button 
                                                    onClick={() => handleEditCategory(category)}
                                                    className="text-sm text-blue-600 hover:underline font-semibold"
                                                >
                                                    Editar
                                                </button>
                                            </li>
                                        )) : (
                                            <li className="p-4 text-center text-gray-500">No hay categorías. ¡Añade la primera!</li>
                                        )}
                                    </ul>
                                </div>
                            </section>
                        </div>
                    )}
                    
                    {activeTab === 'operations' && (
                        <section>
                            <div className="flex justify-between items-center mb-4">
                                <h2 className="text-xl font-bold text-blue-700">Gestión de Usuarios</h2>
                                <button onClick={handleAddNewUser} className="flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm">
                                    <Icon name="plus-circle" size={16} />
                                    Añadir Usuario
                                </button>
                            </div>
                            <div className="bg-white rounded-lg border border-gray-200 shadow-sm">
                                <ul className="divide-y divide-gray-200">
                                    {users.length > 0 ? users.map(user => (
                                        <li key={user.id} className="p-4 flex justify-between items-center">
                                            <div className="flex items-center gap-3">
                                                <div className="w-6 h-6 rounded-full border-2 border-white shadow-sm" style={{ backgroundColor: user.color }}></div>
                                                <span className="font-medium text-gray-800">{user.name}</span>
                                            </div>
                                            <button 
                                                onClick={() => handleEditUser(user)}
                                                className="text-sm text-blue-600 hover:underline font-semibold"
                                            >
                                                Editar
                                            </button>
                                        </li>
                                    )) : (
                                        <li className="p-4 text-center text-gray-500">No hay usuarios. ¡Añade el primero!</li>
                                    )}
                                </ul>
                            </div>
                        </section>
                    )}
                </div>
            </div>

             <ProviderFormModal
                isOpen={isProviderModalOpen}
                onClose={() => setIsProviderModalOpen(false)}
                onSave={handleProviderSave}
                onDelete={deleteProvider}
                provider={editingProvider}
            />
            <CategoryFormModal
                isOpen={isCategoryModalOpen}
                onClose={() => setIsCategoryModalOpen(false)}
                onSave={handleCategorySave}
                onDelete={deleteCategory}
                category={editingCategory}
            />
            <UserFormModal
                isOpen={isUserModalOpen}
                onClose={() => setIsUserModalOpen(false)}
                onSave={handleUserSave}
                onDelete={deleteUser}
                user={editingUser}
            />
            {selectedRecipe && (
                <RecipeLogModal
                    isOpen={!!selectedRecipe}
                    onClose={() => setSelectedRecipe(null)}
                    recipe={selectedRecipe}
                    feedbackLog={feedbackLog.filter(f => f.recipeId === selectedRecipe.id)}
                />
            )}
        </div>
    );
};

export default SettingsScreen;
--- END OF FILE features/settings/SettingsScreen.tsx ---

--- START OF FILE features/settings/CategoryFormModal.tsx ---
import React, { useState, useEffect, FormEvent } from 'react';
import { Category } from '../../types';
import Modal from '../../components/Modal';

interface CategoryFormModalProps {
    isOpen: boolean;
    onClose: () => void;
    onSave: (category: Omit<Category, 'id'> | Category) => void;
    onDelete: (categoryId: string) => void;
    category: Category | null;
}

const CategoryFormModal: React.FC<CategoryFormModalProps> = ({ isOpen, onClose, onSave, onDelete, category }) => {
    const [name, setName] = useState('');
    
    useEffect(() => {
        if (isOpen) {
            setName(category?.name || '');
        }
    }, [isOpen, category]);

    const handleSubmit = (e: FormEvent) => {
        e.preventDefault();
        if (!name.trim()) return;

        const categoryData = { name: name.trim() };
        if (category) {
            onSave({ ...categoryData, id: category.id });
        } else {
            onSave(categoryData);
        }
        onClose();
    };

    const handleDelete = () => {
        if (category && window.confirm(`¿Estás seguro de que quieres eliminar la categoría "${category.name}"?`)) {
            onDelete(category.id);
            onClose();
        }
    };
    
    return (
        <Modal isOpen={isOpen} onClose={onClose} title={category ? "Editar Categoría" : "Añadir Categoría"}>
            <form onSubmit={handleSubmit} className="flex flex-col gap-4">
                <div>
                    <label className="block text-sm font-medium text-gray-600 mb-1">Nombre de la Categoría</label>
                    <input 
                        type="text" 
                        value={name} 
                        onChange={e => setName(e.target.value)} 
                        required 
                        autoFocus
                        className="w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                </div>
                
                <div className="flex justify-between items-center mt-4">
                    <div>
                        {category && (
                            <button type="button" onClick={handleDelete} className="py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700">Eliminar</button>
                        )}
                    </div>
                    <div className="flex gap-4">
                        <button type="button" onClick={onClose} className="py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300">Cancelar</button>
                        <button type="submit" className="py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700">Guardar</button>
                    </div>
                </div>
            </form>
        </Modal>
    );
};

export default CategoryFormModal;
--- END OF FILE features/settings/CategoryFormModal.tsx ---

--- START OF FILE features/settings/UserFormModal.tsx ---
import React, { useState, useEffect, FormEvent } from 'react';
import { User } from '../../types';
import Modal from '../../components/Modal';

interface UserFormModalProps {
    isOpen: boolean;
    onClose: () => void;
    onSave: (user: Omit<User, 'id'> | User) => void;
    onDelete: (userId: string) => void;
    user: User | null;
}

const UserFormModal: React.FC<UserFormModalProps> = ({ isOpen, onClose, onSave, onDelete, user }) => {
    const [name, setName] = useState('');
    const [color, setColor] = useState('#CCCCCC');
    
    useEffect(() => {
        if (isOpen) {
            setName(user?.name || '');
            setColor(user?.color || '#CCCCCC');
        }
    }, [isOpen, user]);

    const handleSubmit = (e: FormEvent) => {
        e.preventDefault();
        if (!name.trim()) return;

        const userData = { name: name.trim(), color };
        if (user) {
            onSave({ ...userData, id: user.id });
        } else {
            onSave(userData);
        }
        onClose();
    };

    const handleDelete = () => {
        if (user && window.confirm(`¿Estás seguro de que quieres eliminar a "${user.name}"? Esto no se puede deshacer.`)) {
            onDelete(user.id);
            onClose();
        }
    };
    
    return (
        <Modal isOpen={isOpen} onClose={onClose} title={user ? "Editar Usuario" : "Añadir Usuario"}>
            <form onSubmit={handleSubmit} className="flex flex-col gap-4">
                <div>
                    <label className="block text-sm font-medium text-gray-600 mb-1">Nombre del Usuario</label>
                    <input 
                        type="text" 
                        value={name} 
                        onChange={e => setName(e.target.value)} 
                        required 
                        autoFocus
                        className="w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                </div>
                <div>
                    <label className="block text-sm font-medium text-gray-600 mb-1">Color de Etiqueta</label>
                    <div className="flex items-center gap-3">
                         <input 
                            type="color" 
                            value={color} 
                            onChange={e => setColor(e.target.value)} 
                            className="w-12 h-10 p-1 border border-gray-300 rounded-md cursor-pointer"
                        />
                        <input 
                            type="text" 
                            value={color}
                            onChange={e => setColor(e.target.value)}
                            className="w-full p-2 border border-gray-300 rounded-md bg-gray-50 font-mono focus:outline-none focus:ring-2 focus:ring-blue-500"
                        />
                    </div>
                </div>
                
                <div className="flex justify-between items-center mt-4">
                    <div>
                        {user && (
                            <button type="button" onClick={handleDelete} className="py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700">Eliminar</button>
                        )}
                    </div>
                    <div className="flex gap-4">
                        <button type="button" onClick={onClose} className="py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300">Cancelar</button>
                        <button type="submit" className="py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700">Guardar</button>
                    </div>
                </div>
            </form>
        </Modal>
    );
};

export default UserFormModal;
--- END OF FILE features/settings/UserFormModal.tsx ---

--- START OF FILE features/settings/RecipeLogModal.tsx ---
import React from 'react';
import { Recipe, RecipeFeedback } from '../../types';
import Modal from '../../components/Modal';
import Icon from '../../components/Icon';

interface RecipeLogModalProps {
    isOpen: boolean;
    onClose: () => void;
    recipe: Recipe;
    feedbackLog: RecipeFeedback[];
}

const StarDisplay: React.FC<{ rating: number }> = ({ rating }) => (
    <div className="flex">
        {[...Array(5)].map((_, i) => (
            <Icon 
                key={i} 
                name="star" 
                size={16} 
                className={i < rating ? 'text-yellow-400 fill-current' : 'text-gray-300'} 
            />
        ))}
    </div>
);

const RecipeLogModal: React.FC<RecipeLogModalProps> = ({ isOpen, onClose, recipe, feedbackLog }) => {
    const sortedLog = [...feedbackLog].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());

    return (
        <Modal isOpen={isOpen} onClose={onClose} title={`Bitácora de: ${recipe.name}`}>
            <div className="max-h-[60vh] overflow-y-auto pr-2">
                {sortedLog.length > 0 ? (
                    <div className="space-y-4">
                        {sortedLog.map(log => (
                            <div key={log.id} className="p-4 bg-gray-50 rounded-lg border border-gray-200">
                                <div className="flex justify-between items-center mb-2">
                                    <span className="font-semibold text-gray-700">{new Date(log.date).toLocaleString('es-ES', { dateStyle: 'long', timeStyle: 'short' })}</span>
                                    <StarDisplay rating={log.rating} />
                                </div>
                                <p className="text-gray-600 whitespace-pre-wrap">{log.notes || "Sin notas."}</p>
                            </div>
                        ))}
                    </div>
                ) : (
                    <p className="text-center text-gray-500 py-8">No hay feedback registrado para esta receta todavía.</p>
                )}
            </div>
            <div className="flex justify-end mt-6">
                <button onClick={onClose} className="py-2 px-6 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300">Cerrar</button>
            </div>
        </Modal>
    );
};

export default RecipeLogModal;
--- END OF FILE features/settings/RecipeLogModal.tsx ---

--- START OF FILE features/baking/FeedbackModal.tsx ---
import React, { useState } from 'react';
import Modal from '../../components/Modal';
import Icon from '../../components/Icon';

interface FeedbackModalProps {
    isOpen: boolean;
    processName: string;
    onSave: (rating: number, notes: string) => void;
    onSkip: () => void;
}

const StarRating: React.FC<{ rating: number; setRating: (rating: number) => void }> = ({ rating, setRating }) => {
    return (
        <div className="flex justify-center gap-2">
            {[1, 2, 3, 4, 5].map((star) => (
                <button
                    type="button"
                    key={star}
                    onClick={() => setRating(star)}
                    onMouseEnter={() => {}}
                    onMouseLeave={() => {}}
                    className="transition-transform transform hover:scale-125"
                >
                    <Icon 
                        name="star" 
                        size={40} 
                        className={`cursor-pointer ${star <= rating ? 'text-yellow-400 fill-current' : 'text-gray-300'}`}
                    />
                </button>
            ))}
        </div>
    );
};

const FeedbackModal: React.FC<FeedbackModalProps> = ({ isOpen, processName, onSave, onSkip }) => {
    const [rating, setRating] = useState(3);
    const [notes, setNotes] = useState('');

    const handleSave = () => {
        onSave(rating, notes);
    };

    return (
        <Modal isOpen={isOpen} onClose={onSkip} title={`Feedback para: ${processName}`}>
            <div className="flex flex-col gap-6">
                <div className="text-center">
                    <label className="block text-sm font-medium text-gray-600 mb-2">¿Qué tal salió el resultado?</label>
                    <StarRating rating={rating} setRating={setRating} />
                </div>
                <div>
                    <label htmlFor="feedback-notes" className="block text-sm font-medium text-gray-600 mb-1">Notas (Opcional)</label>
                    <textarea
                        id="feedback-notes"
                        value={notes}
                        onChange={(e) => setNotes(e.target.value)}
                        rows={4}
                        placeholder="Ej: El color fue perfecto, pero la próxima vez intentaré con 1 minuto menos..."
                        className="w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                </div>
                <div className="flex justify-between items-center mt-4">
                    <button type="button" onClick={onSkip} className="py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300">
                        Omitir
                    </button>
                    <button type="button" onClick={handleSave} className="py-2 px-6 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700">
                        Guardar
                    </button>
                </div>
            </div>
        </Modal>
    );
};

export default FeedbackModal;
--- END OF FILE features/baking/FeedbackModal.tsx ---

--- START OF FILE features/baking/RecipeSelectionModal.tsx ---
import React from 'react';
import Modal from '../../components/Modal';
import { RECIPES } from '../../constants';
import Icon from '../../components/Icon';

interface RecipeSelectionModalProps {
    isOpen: boolean;
    onClose: () => void;
    onSelectRecipe: (recipeId: string) => void;
    onSelectHeating: (duration: number, name: string) => void;
}

const RecipeSelectionModal: React.FC<RecipeSelectionModalProps> = ({ isOpen, onClose, onSelectRecipe, onSelectHeating }) => {
    
    const handleRecipeSelect = (recipeId: string) => {
        onSelectRecipe(recipeId);
        onClose();
    };

    const handleHeatingSelect = (duration: number, name: string) => {
        onSelectHeating(duration, name);
        onClose();
    }

    return (
        <Modal isOpen={isOpen} onClose={onClose} title="Iniciar un Nuevo Proceso">
            <div className="flex flex-col gap-6">
                <div>
                    <h3 className="font-bold text-lg text-blue-700 mb-2">Recetas de Horneado</h3>
                    <div className="flex flex-col gap-3">
                        {Object.values(RECIPES).map(recipe => (
                            <button 
                                key={recipe.id}
                                onClick={() => handleRecipeSelect(recipe.id)}
                                className="w-full p-4 bg-gray-100 text-gray-800 font-bold rounded-lg border border-gray-200 hover:bg-gray-200 hover:border-gray-300 transition-colors text-left"
                            >
                                Hornear {recipe.name}
                            </button>
                        ))}
                    </div>
                </div>
                <div>
                    <h3 className="font-bold text-lg text-blue-700 mb-2">Procesos de Calentamiento</h3>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                         <button 
                            onClick={() => handleHeatingSelect(15 * 60, "Precalentar (15 min)")}
                            className="w-full p-4 flex items-center justify-center gap-2 bg-gray-100 text-gray-800 font-bold rounded-lg border border-gray-200 hover:bg-gray-200 hover:border-gray-300 transition-colors"
                        >
                            <Icon name="thermometer-snowflake" size={20} /> Precalentar
                        </button>
                         <button 
                            onClick={() => handleHeatingSelect(7 * 60, "Recalentar (7 min)")}
                            className="w-full p-4 flex items-center justify-center gap-2 bg-gray-100 text-gray-800 font-bold rounded-lg border border-gray-200 hover:bg-gray-200 hover:border-gray-300 transition-colors"
                        >
                           <Icon name="thermometer-sun" size={20} /> Recalentar
                        </button>
                    </div>
                </div>
            </div>
        </Modal>
    );
};

export default RecipeSelectionModal;
--- END OF FILE features/baking/RecipeSelectionModal.tsx ---

--- START OF FILE features/baking/useProductionAlerts.ts ---
import { useRef, useCallback, useState, useEffect } from 'react';
import { START_SOUND_BASE64, WARNING_SOUND_BASE64, ALARM_SOUND_BASE64, SUCCESS_SOUND_BASE64 } from '../../assets/production-sounds';

const SOUND_MUTED_KEY = 'productionSoundMuted';

type SoundName = 'start' | 'warning' | 'alarm' | 'success';
type AudioState = 'loading' | 'ready' | 'error';

const sounds: Record<SoundName, string> = {
    start: START_SOUND_BASE64,
    warning: WARNING_SOUND_BASE64,
    alarm: ALARM_SOUND_BASE64,
    success: SUCCESS_SOUND_BASE64,
};

export const useProductionAlerts = () => {
    const audioContextRef = useRef<AudioContext | null>(null);
    const audioBuffersRef = useRef<Partial<Record<SoundName, AudioBuffer>>>({});
    const alarmSourceRef = useRef<AudioBufferSourceNode | null>(null);
    const isUnlockedRef = useRef(false);

    const [audioState, setAudioState] = useState<AudioState>('loading');

    const [isSoundMuted, setIsSoundMuted] = useState<boolean>(() => {
        try {
            return localStorage.getItem(SOUND_MUTED_KEY) === 'true';
        } catch { 
            return false; 
        }
    });

    useEffect(() => {
        localStorage.setItem(SOUND_MUTED_KEY, String(isSoundMuted));
    }, [isSoundMuted]);

    // This effect loads and decodes audio files.
    useEffect(() => {
        let isMounted = true;
        setAudioState('loading');
        
        const initializeAudio = async () => {
            let decodingContext: AudioContext | null = null;
            try {
                decodingContext = new (window.AudioContext || (window as any).webkitAudioContext)();
            } catch (error) {
                console.error("Web Audio API is not supported in this browser.", error);
                if (isMounted) setAudioState('error');
                return;
            }

            try {
                const promises = (Object.keys(sounds) as SoundName[]).map(async name => {
                    if (audioBuffersRef.current[name]) return;
                    const response = await fetch(sounds[name]);
                    const arrayBuffer = await response.arrayBuffer();
                    const audioBuffer = await decodingContext!.decodeAudioData(arrayBuffer);
                    if (isMounted) {
                        audioBuffersRef.current[name] = audioBuffer;
                    }
                });
                await Promise.all(promises);
                if (isMounted) {
                    setAudioState('ready');
                }
            } catch (error) {
                console.error("Error loading or decoding audio files:", error);
                if (isMounted) {
                    setAudioState('error');
                }
            } finally {
                if (decodingContext) {
                    decodingContext.close();
                }
            }
        };

        initializeAudio();
        
        return () => { isMounted = false; };
    }, []);

    const unlockAudio = useCallback(() => {
        if (isUnlockedRef.current) return;
        
        if (!audioContextRef.current) {
            try {
                audioContextRef.current = new (window.AudioContext || (window as any).webkitAudioContext)();
            } catch (error) {
                console.error("Could not create AudioContext:", error);
                setAudioState('error');
                return;
            }
        }
        
        const context = audioContextRef.current;
        if (context.state === 'suspended') {
            context.resume().then(() => {
                isUnlockedRef.current = true;
            });
        } else {
            isUnlockedRef.current = true;
        }
    }, []);


    const playSound = useCallback((name: SoundName, loop = false) => {
        if (isSoundMuted || audioState !== 'ready' || !audioContextRef.current) {
            return;
        }
        
        const context = audioContextRef.current;
        const buffer = audioBuffersRef.current[name];
        
        if (!buffer) return;

        // If the context is still suspended, it means unlockAudio hasn't been successfully called yet.
        // We don't play to avoid errors. The unlock needs to happen first.
        if (context.state === 'suspended') {
            return;
        }

        const source = context.createBufferSource();
        source.buffer = buffer;
        source.connect(context.destination);
        source.loop = loop;
        source.start(0);

        if (loop) {
             if (alarmSourceRef.current) {
                try { alarmSourceRef.current.stop(); } catch (e) {}
             }
            alarmSourceRef.current = source;
        }

    }, [isSoundMuted, audioState]);

    const stopAlarmLoop = useCallback(() => {
        if (alarmSourceRef.current) {
            try {
                alarmSourceRef.current.stop();
            } catch (e) { /* Ignore errors if already stopped */ }
            alarmSourceRef.current = null;
        }
    }, []);

    const toggleSoundMute = useCallback(() => {
        unlockAudio();
        setIsSoundMuted(prev => {
            const nextMuted = !prev;
            if (nextMuted) {
                 stopAlarmLoop();
            }
            return nextMuted;
        });
    }, [stopAlarmLoop, unlockAudio]);

    return {
        isSoundMuted,
        toggleSoundMute,
        audioState,
        unlockAudio,
        playStart: () => playSound('start'),
        playWarning: () => playSound('warning'),
        playAlarmLoop: () => playSound('alarm', true),
        stopAlarmLoop,
        playSuccess: () => playSound('success'),
    };
};
--- END OF FILE features/baking/useProductionAlerts.ts ---

--- START OF FILE features/baking/BreadProductionScreen.tsx ---
import React, { useState } from 'react';
import { useProduction } from './useProduction';
import Icon from '../../components/Icon';
import RecipeSelectionModal from './RecipeSelectionModal';
import ProcessCard from './ProcessCard';
import { useRecipeLog } from '../../services/useRecipeLog';
import { ProductionProcess } from '../../types';
import FeedbackModal from './FeedbackModal';

interface BreadProductionScreenProps {
    productionHook: ReturnType<typeof useProduction>;
    recipeLogHook: ReturnType<typeof useRecipeLog>;
}

const BreadProductionScreen: React.FC<BreadProductionScreenProps> = ({ productionHook, recipeLogHook }) => {
    const [isSelectionModalOpen, setSelectionModalOpen] = useState(false);
    const [processForFeedback, setProcessForFeedback] = useState<ProductionProcess | null>(null);

    const { processes, startBakingProcess, startHeatingProcess, advanceProcess, togglePauseProcess, cancelProcess, isSoundMuted, toggleSoundMute, isAudioReady } = productionHook;
    const { addFeedback } = recipeLogHook;

    const handleAcknowledgeFinish = (process: ProductionProcess) => {
        if (process.type === 'baking' && process.recipeId) {
            setProcessForFeedback(process);
        } else {
            // For non-baking processes like heating, just clear them
            cancelProcess(process.id);
        }
    };

    const handleFeedbackSave = (rating: number, notes: string) => {
        if (processForFeedback && processForFeedback.recipeId) {
            addFeedback({
                recipeId: processForFeedback.recipeId,
                rating,
                notes
            });
            cancelProcess(processForFeedback.id);
        }
        setProcessForFeedback(null);
    };

    const handleFeedbackSkip = () => {
        if (processForFeedback) {
            cancelProcess(processForFeedback.id);
        }
        setProcessForFeedback(null);
    };
    
    const activeProcesses = processes.filter(p => p.state !== 'finished');
    const finishedProcesses = processes.filter(p => p.state === 'finished');

    return (
        <div className="p-4 md:p-6 h-full flex flex-col">
            <div className="flex justify-between items-center mb-6 flex-shrink-0">
                <div className="flex items-center gap-4">
                    <h2 className="text-xl font-bold text-blue-700">Procesos Activos</h2>
                    <button
                        onClick={toggleSoundMute}
                        title={isSoundMuted ? "Activar Sonidos" : "Silenciar Sonidos"}
                        className="p-2 text-gray-500 hover:text-blue-600 hover:bg-gray-100 rounded-full transition-colors"
                    >
                        <Icon name={isSoundMuted ? "volume-x" : "volume-2"} size={20} />
                    </button>
                </div>
                <button 
                    onClick={() => setSelectionModalOpen(true)}
                    className="flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm"
                >
                    <Icon name="plus-circle" size={16} />
                    Iniciar Proceso
                </button>
            </div>

            <div className="flex-grow overflow-y-auto">
                {activeProcesses.length > 0 ? (
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        {activeProcesses.map(process => (
                            <ProcessCard 
                                key={process.id} 
                                process={process}
                                onAdvance={advanceProcess}
                                onTogglePause={togglePauseProcess}
                                onCancel={cancelProcess}
                                onAcknowledgeFinish={() => {}} // This is handled by the finished list
                                isAudioReady={isAudioReady}
                            />
                        ))}
                    </div>
                ) : (
                    <div className="text-center py-16 text-gray-500">
                        <p>No hay procesos activos en este momento.</p>
                        <p>Haz clic en "Iniciar Proceso" para comenzar.</p>
                    </div>
                )}

                {finishedProcesses.length > 0 && (
                    <div className="mt-8">
                        <h3 className="text-lg font-bold text-gray-600">Finalizados Recientemente</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4">
                            {finishedProcesses.map(process => (
                                <ProcessCard 
                                    key={process.id} 
                                    process={process}
                                    onAdvance={advanceProcess}
                                    onTogglePause={() => {}}
                                    onCancel={cancelProcess}
                                    onAcknowledgeFinish={() => handleAcknowledgeFinish(process)}
                                    isAudioReady={isAudioReady}
                                />
                            ))}
                        </div>
                    </div>
                )}
            </div>

            <RecipeSelectionModal 
                isOpen={isSelectionModalOpen}
                onClose={() => setSelectionModalOpen(false)}
                onSelectRecipe={startBakingProcess}
                onSelectHeating={startHeatingProcess}
            />
            {processForFeedback && (
                <FeedbackModal
                    isOpen={!!processForFeedback}
                    processName={processForFeedback.name}
                    onSave={handleFeedbackSave}
                    onSkip={handleFeedbackSkip}
                />
            )}
        </div>
    );
};

export default BreadProductionScreen;
--- END OF FILE features/baking/BreadProductionScreen.tsx ---

--- START OF FILE features/baking/useBakingAssistant.ts ---

--- END OF FILE features/baking/useBakingAssistant.ts ---

--- START OF FILE features/baking/BakingAssistantScreen.tsx ---

--- END OF FILE features/baking/BakingAssistantScreen.tsx ---

--- START OF FILE features/baking/ProcessCard.tsx ---
import React, { useState } from 'react';
import { ProductionProcess, RecipeStep } from '../../types';
import Icon from '../../components/Icon';

interface ProcessCardProps {
    process: ProductionProcess;
    onAdvance: (processId: string) => void;
    onTogglePause: (processId: string) => void;
    onCancel: (processId: string) => void;
    onAcknowledgeFinish: (process: ProductionProcess) => void;
    isAudioReady: boolean; // New prop
}

const formatTime = (seconds: number) => {
    if (isNaN(seconds) || seconds < 0) seconds = 0;
    const m = Math.floor(seconds / 60);
    const s = seconds % 60;
    return `${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
};

const StepItem: React.FC<{ step: RecipeStep, isCompleted: boolean, isCurrent: boolean }> = ({ step, isCompleted, isCurrent }) => {
    let stateStyles = 'text-gray-500';
    if (isCurrent) stateStyles = 'font-bold text-blue-700';
    if (isCompleted) stateStyles = 'text-gray-400 line-through';

    return (
        <div className="flex items-start gap-3 py-2">
            <div className="flex-shrink-0 mt-1">
                {isCompleted ? <Icon name="check-circle" size={16} className="text-green-500" /> : <div className={`w-4 h-4 rounded-full border-2 ${isCurrent ? 'border-blue-500 bg-blue-100' : 'border-gray-300'}`}></div>}
            </div>
            <p className={`text-sm ${stateStyles}`}>{step.instruction}</p>
        </div>
    );
};


const ProcessCard: React.FC<ProcessCardProps> = ({ process, onAdvance, onTogglePause, onCancel, onAcknowledgeFinish, isAudioReady }) => {
    const { state, name, steps, currentStepIndex, totalTimeLeft, stepTimeLeft } = process;
    const [isConfirmingCancel, setIsConfirmingCancel] = useState(false);

    const getBorderColor = () => {
        switch (state) {
            case 'running': return 'border-green-500';
            case 'alarm': return 'border-red-500 animate-pulse-red';
            case 'finished': return 'border-blue-500';
            case 'paused': return 'border-gray-300';
            default: return 'border-gray-300';
        }
    };

    const getHeaderColor = () => {
         switch (state) {
            case 'running': return 'bg-green-100 text-green-800';
            case 'alarm': return 'bg-red-100 text-red-800';
            case 'finished': return 'bg-blue-100 text-blue-800';
            case 'paused': return 'bg-gray-100 text-gray-800';
            default: return 'bg-gray-100';
        }
    }
    
    const renderAction = () => {
        switch (state) {
            case 'paused':
                return (
                    <button 
                        onClick={() => onTogglePause(process.id)} 
                        disabled={!isAudioReady}
                        className="w-full bg-green-500 text-white font-bold py-3 rounded-lg hover:bg-green-600 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"
                    >
                        {isAudioReady ? 'INICIAR' : 'Cargando audio...'}
                    </button>
                );
            case 'running':
                return <button onClick={() => onTogglePause(process.id)} className="w-full bg-yellow-500 text-white font-bold py-3 rounded-lg hover:bg-yellow-600 transition-colors">PAUSAR</button>;
            case 'alarm':
                 return <button onClick={() => onAdvance(process.id)} className="w-full bg-blue-500 text-white font-bold py-3 rounded-lg hover:bg-blue-600 transition-colors animate-pulse">SIGUIENTE PASO</button>;
            case 'finished':
                 return <button onClick={() => onAcknowledgeFinish(process)} className="w-full bg-gray-500 text-white font-bold py-3 rounded-lg hover:bg-gray-600 transition-colors">LIMPIAR</button>;
        }
    };
    
    if (isConfirmingCancel) {
        return (
            <div className={`flex flex-col bg-white rounded-lg border-2 border-red-400 shadow-lg p-4 justify-center items-center text-center`}>
                <h4 className="font-bold text-lg mb-2 text-gray-800">¿Estás seguro?</h4>
                <p className="text-sm text-gray-600 mb-4">Se perderá todo el progreso de este proceso.</p>
                <div className="flex gap-4 w-full">
                    <button onClick={() => setIsConfirmingCancel(false)} className="flex-1 py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300">No, volver</button>
                    <button onClick={() => onCancel(process.id)} className="flex-1 py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700">Sí, cancelar</button>
                </div>
            </div>
        );
    }

    return (
        <div className={`flex flex-col bg-white rounded-lg border-2 shadow-sm ${getBorderColor()}`}>
            <header className={`p-3 rounded-t-md`}>
                <h3 className={`font-bold text-lg ${getHeaderColor().split(' ')[1]}`}>{name}</h3>
            </header>
            
            <div className="p-4 flex-grow flex flex-col justify-between">
                <div className="timers flex justify-around text-center mb-4">
                    <div>
                        <span className="text-xs text-gray-500 uppercase font-bold">Total Restante</span>
                        <p className="text-3xl font-bold">{formatTime(totalTimeLeft)}</p>
                    </div>
                    <div>
                        <span className="text-xs text-gray-500 uppercase font-bold">Paso Actual</span>
                        <p className="text-3xl font-bold">{formatTime(stepTimeLeft)}</p>
                    </div>
                </div>

                <div className="steps-list mb-4 p-3 bg-gray-50 rounded-lg max-h-40 overflow-y-auto border border-gray-200">
                    {steps.map((step, index) => (
                        <StepItem 
                            key={index}
                            step={step}
                            isCompleted={index < currentStepIndex}
                            isCurrent={index === currentStepIndex && state !== 'finished'}
                        />
                    ))}
                     {state === 'finished' && (
                        <div className="flex items-start gap-3 py-2 text-green-700 font-bold">
                            <Icon name="check-circle" size={16} className="mt-1" />
                            <p className="text-sm">¡Proceso completado!</p>
                        </div>
                    )}
                </div>
                
                <div className="action-buttons space-y-2">
                    {renderAction()}
                    {state !== 'finished' && (
                        <button 
                            onClick={() => setIsConfirmingCancel(true)}
                            className="w-full text-center text-xs text-gray-500 hover:text-red-600 font-semibold py-1 transition-colors"
                        >
                            Cancelar Proceso
                        </button>
                    )}
                </div>
            </div>
        </div>
    );
};

export default ProcessCard;
--- END OF FILE features/baking/ProcessCard.tsx ---

--- START OF FILE features/baking/RecipeSelectionScreen.tsx ---

--- END OF FILE features/baking/RecipeSelectionScreen.tsx ---

--- START OF FILE features/baking/useHeating.ts ---

--- END OF FILE features/baking/useHeating.ts ---

--- START OF FILE features/baking/HeatingTimerScreen.tsx ---

--- END OF FILE features/baking/HeatingTimerScreen.tsx ---

--- START OF FILE features/baking/useProduction.ts ---
import { useState, useEffect, useCallback, useRef } from 'react';
// Fix: Imported RecipeStep from types.ts and separated RECIPES import.
import { ProductionProcess, RecipeStep } from '../../types';
import { RECIPES } from '../../constants';
import { useProductionAlerts } from './useProductionAlerts';

const PRODUCTION_STATE_KEY = 'productionState_v2';

const loadState = (): ProductionProcess[] => {
    try {
        const savedStateJSON = localStorage.getItem(PRODUCTION_STATE_KEY);
        if (savedStateJSON) {
            const loadedProcesses: ProductionProcess[] = JSON.parse(savedStateJSON);
            return loadedProcesses.map(p => ({...p, recipe: p.recipeId ? RECIPES[p.recipeId] : undefined }));
        }
    } catch (error) {
        console.error("Error loading production state:", error);
    }
    return [];
};

const saveState = (state: ProductionProcess[]) => {
    try {
        // Don't save the full recipe object, just the ID, to keep localStorage light.
        const stateToSave = state.map(({ recipe, ...rest }) => rest);
        localStorage.setItem(PRODUCTION_STATE_KEY, JSON.stringify(stateToSave));
    } catch (error) {
        console.error("Error saving production state:", error);
    }
};

export const useProduction = () => {
    const [processes, setProcesses] = useState<ProductionProcess[]>(loadState);
    const timerRef = useRef<number | null>(null);

    const { 
        isSoundMuted, 
        toggleSoundMute,
        playStart, 
        playWarning, 
        playAlarmLoop, 
        stopAlarmLoop, 
        playSuccess,
        unlockAudio,
        audioState
    } = useProductionAlerts();

    const isAudioReady = audioState === 'ready';
    
    const playedWarningsRef = useRef(new Set<string>());
    const prevProcessesRef = useRef<ProductionProcess[]>([]);

    const stopTimer = useCallback(() => {
        if (timerRef.current) {
            clearInterval(timerRef.current);
            timerRef.current = null;
        }
    }, []);

    // Effect to detect state transitions for alarms
    useEffect(() => {
        const prevProcesses = prevProcessesRef.current;
        processes.forEach(p => {
            const prevP = prevProcesses.find(prev => prev.id === p.id);
            if (prevP && prevP.state !== 'alarm' && p.state === 'alarm') {
                playAlarmLoop();
            }
        });
        prevProcessesRef.current = processes;
    }, [processes, playAlarmLoop]);


    const tick = useCallback(() => {
        setProcesses(prevProcesses => {
            const now = Date.now();
            let hasChanged = false;

            const updatedProcesses = prevProcesses.map(p => {
                if (p.state !== 'running') return p;
                
                hasChanged = true;
                const elapsedSeconds = Math.round((now - p.lastTickTimestamp) / 1000);
                
                const newStepTimeLeft = Math.max(0, p.stepTimeLeft - elapsedSeconds);
                const newTotalTimeLeft = Math.max(0, p.totalTimeLeft - elapsedSeconds);

                // --- 30-Second Warning Logic ---
                const warningKey = `${p.id}-${p.currentStepIndex}`;
                if (newStepTimeLeft > 29 && newStepTimeLeft <= 30 && !playedWarningsRef.current.has(warningKey)) {
                    playWarning();
                    playedWarningsRef.current.add(warningKey);
                }
                
                if (newStepTimeLeft === 0) {
                    // Step finished, go into alarm
                    return {
                        ...p,
                        stepTimeLeft: 0,
                        totalTimeLeft: newTotalTimeLeft,
                        state: 'alarm' as const,
                        lastTickTimestamp: now,
                    };
                }
                
                return {
                    ...p,
                    stepTimeLeft: newStepTimeLeft,
                    totalTimeLeft: newTotalTimeLeft,
                    lastTickTimestamp: now,
                };
            });
            
            if (hasChanged) return updatedProcesses;
            return prevProcesses;
        });
    }, [playWarning]);

    const startTimer = useCallback(() => {
        stopTimer();
        timerRef.current = window.setInterval(tick, 1000);
    }, [stopTimer, tick]);

     // Recalculate time on load
    useEffect(() => {
        setProcesses(prevProcesses => {
            const now = Date.now();
            return prevProcesses.map(p => {
                 if (p.state !== 'running') return p;
                 
                 const elapsedSeconds = Math.round((now - p.lastTickTimestamp) / 1000);
                 const newStepTimeLeft = Math.max(0, p.stepTimeLeft - elapsedSeconds);
                 const newTotalTimeLeft = Math.max(0, p.totalTimeLeft - elapsedSeconds);

                 if(newStepTimeLeft === 0) {
                     return { ...p, state: 'alarm' as const, stepTimeLeft: 0, totalTimeLeft: newTotalTimeLeft };
                 }
                 return { ...p, stepTimeLeft: newStepTimeLeft, totalTimeLeft: newTotalTimeLeft, lastTickTimestamp: now };
            });
        });
    }, []);

    useEffect(() => {
        saveState(processes);
        const isAnyProcessRunning = processes.some(p => p.state === 'running');
        if (isAnyProcessRunning) {
            startTimer();
        } else {
            stopTimer();
        }
        return stopTimer;
    }, [processes, startTimer, stopTimer]);

    const startBakingProcess = useCallback((recipeId: string) => {
        const recipe = RECIPES[recipeId];
        if (!recipe) return;
        
        const newProcess: ProductionProcess = {
            id: `baking-${Date.now()}`,
            name: recipe.name,
            recipeId,
            recipe,
            type: 'baking',
            state: 'paused',
            currentStepIndex: 0,
            steps: recipe.steps,
            totalTime: recipe.totalDuration,
            totalTimeLeft: recipe.totalDuration,
            stepTimeLeft: recipe.steps[0].duration,
            lastTickTimestamp: Date.now(),
        };
        setProcesses(prev => [...prev, newProcess]);
    }, []);

    const startHeatingProcess = useCallback((duration: number, name: string) => {
        const heatingSteps: RecipeStep[] = [{ instruction: name, duration, isPauseStep: false }];
        const newProcess: ProductionProcess = {
             id: `heating-${Date.now()}`,
             name: name,
             type: 'heating',
             state: 'paused',
             currentStepIndex: 0,
             steps: heatingSteps,
             totalTime: duration,
             totalTimeLeft: duration,
             stepTimeLeft: duration,
             lastTickTimestamp: Date.now(),
        };
        setProcesses(prev => [...prev, newProcess]);
    }, []);

    const advanceProcess = useCallback((processId: string) => {
        stopAlarmLoop();
        setProcesses(prev => prev.map(p => {
            if (p.id !== processId) return p;

            if (p.state === 'finished') { // Acknowledging a finished process
                return { ...p, state: 'paused' }; // Becomes a static finished card
            }
            
            // Acknowledging an alarm
            if (p.currentStepIndex < p.steps.length - 1) {
                const nextStepIndex = p.currentStepIndex + 1;
                const nextStep = p.steps[nextStepIndex];
                return {
                    ...p,
                    state: 'paused' as const,
                    currentStepIndex: nextStepIndex,
                    stepTimeLeft: nextStep.duration,
                    lastTickTimestamp: Date.now(),
                };
            } else { // Last step finished
                playSuccess();
                return {
                    ...p,
                    state: 'finished' as const,
                    stepTimeLeft: 0,
                    lastTickTimestamp: Date.now(),
                };
            }
        }));
    }, [stopAlarmLoop, playSuccess]);
    
    const togglePauseProcess = useCallback((processId: string) => {
        unlockAudio(); // Unlock on the first actual user interaction.
        setProcesses(prev => prev.map(p => {
            if (p.id !== processId || p.state === 'alarm' || p.state === 'finished') return p;
            
            const isFirstStart = p.state === 'paused' && p.totalTimeLeft === p.totalTime;

            if (p.state === 'running') {
                return { ...p, state: 'paused' as const };
            } else { // paused
                if(isFirstStart) {
                    playStart();
                }
                return { ...p, state: 'running' as const, lastTickTimestamp: Date.now() };
            }
        }));
    }, [playStart, unlockAudio]);

    const cancelProcess = useCallback((processId: string) => {
        stopAlarmLoop();
        setProcesses(prev => prev.filter(p => p.id !== processId));
    }, [stopAlarmLoop]);

    return { processes, startBakingProcess, startHeatingProcess, advanceProcess, togglePauseProcess, cancelProcess, isSoundMuted, toggleSoundMute, isAudioReady };
};
--- END OF FILE features/baking/useProduction.ts ---

--- START OF FILE features/operations/DailyAgendaView.tsx ---
import React, { useState, useEffect, useMemo } from 'react';
import { KanbanTask, TaskStatus, User } from '../../types';
import { TIMELINE_START_HOUR, TIMELINE_END_HOUR } from '../../constants';
import AgendaTaskCard from './AgendaTaskCard';
import SubTaskOverlay from './SubTaskOverlay';

interface DailyAgendaViewProps {
    tasks: KanbanTask[];
    onUpdateStatus: (taskId: string, newStatus: TaskStatus) => void;
    onEditTask: (task: KanbanTask) => void;
    onUpdateTask: (updatedTask: KanbanTask) => void;
    users: User[];
}

const EXPANDED_HOUR_HEIGHT_PX = 120; // Height for hours with tasks
const COMPRESSED_HOUR_HEIGHT_PX = 30; // Height for empty hours

interface TaskLayout {
    task: KanbanTask;
    top: number;
    height: number;
    left: number;
    width: number;
    zIndex: number;
}

const DailyAgendaView: React.FC<DailyAgendaViewProps> = ({ tasks, onUpdateStatus, onEditTask, onUpdateTask, users }) => {
    const [now, setNow] = useState(new Date());
    const [taskForSubtasks, setTaskForSubtasks] = useState<KanbanTask | null>(null);

    const userColorMap = useMemo(() => {
        return users.reduce((acc, user) => {
            acc[user.name] = user.color;
            return acc;
        }, {} as Record<string, string>);
    }, [users]);

    useEffect(() => {
        const timer = setInterval(() => setNow(new Date()), 60000);
        return () => clearInterval(timer);
    }, []);

    // This effect synchronizes the currently open subtask overlay with the main tasks list.
    // When a subtask is updated, the `tasks` prop changes, and this effect finds the
    // corresponding updated task to refresh the overlay's view instantly.
    useEffect(() => {
        if (taskForSubtasks) {
            const updatedTask = tasks.find(t => t.id === taskForSubtasks.id);
            if (updatedTask) {
                setTaskForSubtasks(updatedTask);
            } else {
                // If the task is no longer in the list (e.g., deleted), close the overlay.
                setTaskForSubtasks(null);
            }
        }
    }, [tasks, taskForSubtasks]);

    const tasksByHour = useMemo(() => {
        const byHour: Record<number, boolean> = {};
        tasks.forEach(task => {
            const hour = parseInt(task.time.split(':')[0], 10);
            byHour[hour] = true;
        });
        return byHour;
    }, [tasks]);

    const hourLayouts = useMemo(() => {
        let currentTop = 0;
        const layouts: { hour: number; top: number; height: number }[] = [];
        for (let hour = TIMELINE_START_HOUR; hour <= TIMELINE_END_HOUR; hour++) {
            const hasTasks = !!tasksByHour[hour];
            const height = hasTasks ? EXPANDED_HOUR_HEIGHT_PX : COMPRESSED_HOUR_HEIGHT_PX;
            layouts.push({ hour, top: currentTop, height });
            currentTop += height;
        }
        return layouts;
    }, [tasksByHour]);

    const totalHeight = hourLayouts.length > 0 ? hourLayouts[hourLayouts.length - 1].top + hourLayouts[hourLayouts.length - 1].height : 0;

    const timeToPosition = (time: string): number => {
        const [hours, minutes] = time.split(':').map(Number);
        const hourLayout = hourLayouts.find(l => l.hour === hours);
        if (!hourLayout) return 0; // Fallback for times outside range

        const minuteOffset = (minutes / 60) * hourLayout.height;
        return hourLayout.top + minuteOffset;
    };
    
    const taskLayouts = useMemo(() => {
        const sortedTasks = [...tasks].sort((a, b) => a.time.localeCompare(b.time) || b.duration - a.duration);
        const layouts: TaskLayout[] = [];

        for (const task of sortedTasks) {
            const top = timeToPosition(task.time);
            const taskStart = new Date(`${task.date}T${task.time}`).getTime();
            const taskEnd = taskStart + task.duration * 60000;
            const hourLayout = hourLayouts.find(l => l.hour === parseInt(task.time.split(':')[0], 10));
            const hourHeight = hourLayout ? hourLayout.height : EXPANDED_HOUR_HEIGHT_PX;
            const height = (task.duration / 60) * hourHeight;
            
            const collidingTasks: TaskLayout[] = [];
            for (const placedLayout of layouts) {
                const placedStart = new Date(`${placedLayout.task.date}T${placedLayout.task.time}`).getTime();
                const placedEnd = placedStart + placedLayout.task.duration * 60000;

                if (taskStart < placedEnd && taskEnd > placedStart) {
                    collidingTasks.push(placedLayout);
                }
            }
            
            let col = 0;
            while (collidingTasks.some(l => l.left === col)) {
                col++;
            }
            
            layouts.push({ task, top, height, left: col, width: 1, zIndex: col });
        }
        
        // Post-process to adjust width and left based on collisions
         return layouts.map((layout, _, allLayouts) => {
            const { task } = layout;
            const taskStart = new Date(`${task.date}T${task.time}`).getTime();
            const taskEnd = taskStart + task.duration * 60000;

            const concurrentTasks = allLayouts.filter(otherLayout => {
                const otherStart = new Date(`${otherLayout.task.date}T${otherLayout.task.time}`).getTime();
                const otherEnd = otherStart + otherLayout.task.duration * 60000;
                return taskStart < otherEnd && taskEnd > otherStart;
            });
            
            const cols = new Set(concurrentTasks.map(l => l.left));
            const numCols = cols.size;
            
            let myColIndex = 0;
            const sortedCols = Array.from(cols).sort((a, b) => a - b);
            myColIndex = sortedCols.indexOf(layout.left);

            return {
                ...layout,
                width: 100 / numCols,
                left: (myColIndex / numCols) * 100,
            };
        });

    }, [tasks, hourLayouts]);


    const currentTimePosition = timeToPosition(`${now.getHours()}:${now.getMinutes()}`);
    
    return (
        <div className="p-4 md:p-6 h-full relative">
            <div className="relative z-10" style={{ height: `${totalHeight}px` }}>
                {/* Hour markers */}
                {hourLayouts.map(({ hour, top, height }) => (
                    <div key={hour} className="absolute w-full" style={{ top: `${top}px`, height: `${height}px` }}>
                        <span className="absolute -top-3 left-0 text-sm font-semibold text-gray-400 w-16 text-right pr-4">
                            {hour}:00
                        </span>
                        <div className="h-px bg-gray-200 ml-16"></div>
                    </div>
                ))}
                
                {/* Current time indicator */}
                {currentTimePosition >= 0 && currentTimePosition <= totalHeight && (
                     <div className="absolute left-16 right-0 h-0.5 bg-red-500 z-20" style={{ top: `${currentTimePosition}px` }}>
                        <div className="absolute -left-1.5 -top-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white"></div>
                    </div>
                )}
               
                {/* Task Cards */}
                <div className="absolute top-0 bottom-0 left-16 right-0">
                   {taskLayouts.map(({ task, top, height, left, width, zIndex }) => (
                       <AgendaTaskCard 
                           key={task.id}
                           task={task}
                           onUpdateStatus={onUpdateStatus}
                           onEdit={onEditTask}
                           onViewSubtasks={() => setTaskForSubtasks(task)}
                           userColor={userColorMap[task.employee] || '#9ca3af'}
                           style={{
                               top: `${top}px`,
                               height: `${Math.max(height - 4, 80)}px`,
                               left: `${left}%`,
                               width: `calc(${width}% - 4px)`,
                               zIndex: zIndex,
                           }}
                       />
                   ))}
                </div>
            </div>
            {taskForSubtasks && (
                <SubTaskOverlay
                    task={taskForSubtasks}
                    onClose={() => setTaskForSubtasks(null)}
                    onUpdateTask={onUpdateTask}
                />
            )}
        </div>
    );
};

export default DailyAgendaView;
--- END OF FILE features/operations/DailyAgendaView.tsx ---

--- START OF FILE features/operations/OperationsScreen.tsx ---
import React, { useState, useMemo } from 'react';
import { KanbanTask, User } from '../../types';
import TaskFormModal, { TaskSubmitPayload } from './TaskFormModal';
import { useKanban } from '../../services/useKanban';
import Icon from '../../components/Icon';
import WeekdaySelector from './WeekdaySelector';
import DailyAgendaView from './DailyAgendaView';
import CriticalTasksBar from './CriticalTasksBar';

interface OperationsScreenProps {
    kanbanHook: ReturnType<typeof useKanban>;
    criticalTasks: { task: KanbanTask; diff: number }[];
    users: User[];
}

const OperationsScreen: React.FC<OperationsScreenProps> = ({ kanbanHook, criticalTasks, users }) => {
    const { tasks, addTask, addMultipleTasks, updateTask, updateTaskStatus, deleteTask } = kanbanHook;
    const [selectedDate, setSelectedDate] = useState(new Date());
    const [isModalOpen, setIsModalOpen] = useState(false);
    const [editingTask, setEditingTask] = useState<KanbanTask | null>(null);
    const [employeeFilter, setEmployeeFilter] = useState<string>('All');

    const handleEdit = (task: KanbanTask) => {
        setEditingTask(task);
        setIsModalOpen(true);
    };

    const handleCloseModal = () => {
        setIsModalOpen(false);
        setEditingTask(null);
    };

    const handleSaveTask = (formData: TaskSubmitPayload, existingTaskId?: string) => {
        const { recurrence, selectedDays, recurrenceWeeks, ...commonData } = formData;
    
        if (existingTaskId) {
            // EDITING - Recurrence options are disabled in the modal, so we only update the single task.
            const originalTask = tasks.find(t => t.id === existingTaskId);
            if (!originalTask) return;
    
            const updatedTaskData: KanbanTask = {
                ...originalTask,
                ...commonData,
                id: existingTaskId,
            };
            updateTask(updatedTaskData);
    
        } else {
            // ADDING NEW
            const referenceDate = new Date(commonData.date);
            referenceDate.setMinutes(referenceDate.getMinutes() + referenceDate.getTimezoneOffset());

            if (recurrence === 'weekly' && selectedDays && selectedDays.length > 0) {
                const numWeeks = parseInt(recurrenceWeeks || '4', 10);
                const tasksToCreate: Omit<KanbanTask, 'id' | 'status'>[] = [];
                
                // Find the start of the reference week (Monday)
                const startOfWeek = new Date(referenceDate);
                const dayOfWeek = referenceDate.getDay(); // Sunday: 0, Monday: 1, etc.
                const diff = referenceDate.getDate() - dayOfWeek + (dayOfWeek === 0 ? -6 : 1);
                startOfWeek.setDate(diff);

                // Iterate for the selected number of weeks
                for (let week = 0; week < numWeeks; week++) {
                    const currentWeekStart = new Date(startOfWeek);
                    currentWeekStart.setDate(startOfWeek.getDate() + week * 7);

                    selectedDays.forEach(dayIndexStr => {
                        const dayIndex = parseInt(dayIndexStr, 10);
                        const taskDate = new Date(currentWeekStart);
                        
                        // dayIndex from form: Sunday: 0, Monday: 1, ... Saturday: 6
                        // We calculated week start as Monday, so adjust accordingly.
                        if (dayIndex === 0) { // Sunday
                            taskDate.setDate(currentWeekStart.getDate() + 6);
                        } else { // Monday-Saturday
                            taskDate.setDate(currentWeekStart.getDate() + (dayIndex - 1));
                        }
                        
                        // Apply timezone offset to each created date
                        taskDate.setMinutes(taskDate.getMinutes() - taskDate.getTimezoneOffset());
                        
                        tasksToCreate.push({
                            ...commonData,
                            date: taskDate.toISOString().split('T')[0],
                        });
                    });
                }
                addMultipleTasks(tasksToCreate);
            } else {
                addTask(commonData);
            }
        }
    };

    const selectedDateStr = useMemo(() => {
        const d = new Date(selectedDate);
        d.setMinutes(d.getMinutes() - d.getTimezoneOffset());
        return d.toISOString().split('T')[0];
    }, [selectedDate]);

    const dailyTasks = useMemo(() => {
        return tasks.filter(task => {
            const isSameDay = task.date === selectedDateStr;
            const matchesEmployee = employeeFilter === 'All' || task.employee === employeeFilter;
            return isSameDay && matchesEmployee;
        });
    }, [tasks, selectedDateStr, employeeFilter]);
    
    return (
        <div className="flex flex-col h-full bg-gray-50">
            {criticalTasks.length > 0 && <CriticalTasksBar tasksWithDiff={criticalTasks} />}

            <div className="operations-header flex flex-col p-4 border-b border-gray-200 gap-4 flex-shrink-0">
                <div className="flex flex-col md:flex-row justify-between items-center w-full gap-4">
                     <WeekdaySelector selectedDate={selectedDate} setSelectedDate={setSelectedDate} />
                     <div className="flex gap-2 w-full md:w-auto">
                        <button onClick={() => setIsModalOpen(true)} className="flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm w-full justify-center">
                            <Icon name="plus-circle" size={16} />
                            Añadir Tarea
                        </button>
                    </div>
                </div>
                <div className="flex items-center gap-2 bg-gray-200 rounded-lg p-1 w-full overflow-x-auto">
                    <button 
                        onClick={() => setEmployeeFilter('All')}
                        className={`px-3 py-1 text-sm font-bold rounded-md transition-colors ${employeeFilter === 'All' ? 'bg-white shadow-sm' : 'bg-transparent text-gray-600'}`}
                    >
                        Todos
                    </button>
                    {users.map(user => (
                         <button 
                            key={user.id}
                            onClick={() => setEmployeeFilter(user.name)}
                            className={`px-3 py-1 text-sm font-bold rounded-md transition-colors ${employeeFilter === user.name ? 'bg-white shadow-sm' : 'bg-transparent text-gray-600'}`}
                        >
                            {user.name}
                        </button>
                    ))}
                </div>
            </div>
            
            <div className="flex-grow overflow-auto relative">
                <DailyAgendaView 
                    tasks={dailyTasks} 
                    onEditTask={handleEdit} 
                    onUpdateStatus={updateTaskStatus}
                    onUpdateTask={updateTask}
                    users={users}
                />
            </div>

            <TaskFormModal 
                isOpen={isModalOpen} 
                onClose={handleCloseModal} 
                onSave={handleSaveTask}
                onDelete={deleteTask}
                task={editingTask}
                selectedDate={selectedDateStr}
                users={users}
            />
        </div>
    );
};

export default OperationsScreen;
--- END OF FILE features/operations/OperationsScreen.tsx ---

--- START OF FILE features/operations/KanbanCard.tsx ---
import React from 'react';
import { KanbanTask } from '../../types';
import Icon from '../../components/Icon';

type TimeStatus = 'due' | 'imminent' | 'normal';

interface KanbanCardProps {
    task: KanbanTask;
    onDragStart: (taskId: string) => void;
    onCardClick: () => void;
    timeStatus: TimeStatus;
    onEdit: (task: KanbanTask) => void;
    userColor: string; // Dynamic color prop
}

const KanbanCard: React.FC<KanbanCardProps> = ({ task, onDragStart, onCardClick, timeStatus, onEdit, userColor }) => {
    
    const handleDragStart = (e: React.DragEvent<HTMLDivElement>) => {
        onDragStart(task.id);
        e.dataTransfer.setData('text/plain', task.id);
    };

    const getBorderClass = () => {
        if (task.status !== 'todo') return 'border-gray-200';
        switch (timeStatus) {
            case 'due':
                return 'animate-pulse-red';
            case 'imminent':
                return 'animate-pulse-yellow';
            default:
                return 'border-gray-200';
        }
    };

    return (
        <div
            draggable
            onDragStart={handleDragStart}
            onClick={onCardClick}
            className={`bg-white rounded-lg p-4 cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-shadow border-2 relative ${getBorderClass()}`}
        >
            <div className="flex flex-col gap-2 pr-6">
                <span className="text-xs text-gray-500 font-semibold">{task.time}</span>
                <span className="font-medium">{task.text}</span>
                <div className="flex flex-wrap gap-2 items-center mt-2">
                    <span 
                        className="text-xs font-bold text-white px-2 py-0.5 rounded-full"
                        style={{ backgroundColor: userColor }}
                    >
                        {task.employee}
                    </span>
                    {task.isCritical && (
                        <span className="flex items-center gap-1 text-xs font-semibold text-red-600">
                            <Icon name="alert-triangle" size={14} /> Crítico
                        </span>
                    )}
                    {task.zone && (
                        <span className="flex items-center gap-1 text-xs font-semibold text-blue-600">
                           <Icon name="map-pin" size={14} /> {task.zone}
                        </span>
                    )}
                </div>
            </div>
            <button
                onClick={(e) => {
                    e.stopPropagation();
                    onEdit(task);
                }}
                className="absolute top-2 right-2 p-1 text-gray-400 hover:text-blue-600 transition-colors rounded-full hover:bg-gray-100"
                title="Editar Tarea"
            >
                <Icon name="pencil" size={16} />
            </button>
        </div>
    );
};

export default KanbanCard;
--- END OF FILE features/operations/KanbanCard.tsx ---

--- START OF FILE features/operations/CriticalTasksBar.tsx ---
import React from 'react';
import { KanbanTask } from '../../types';
import Icon from '../../components/Icon';

interface CriticalTasksBarProps {
    tasksWithDiff: { task: KanbanTask; diff: number }[];
}

const formatRelativeTime = (diff: number) => {
    if (diff > 0) return `en ${diff} min`;
    if (diff === 0) return `¡Ahora!`;
    return `hace ${Math.abs(diff)} min`;
};

const CriticalTasksBar: React.FC<CriticalTasksBarProps> = ({ tasksWithDiff }) => {
    return (
        <div className="bg-yellow-100 border-b-2 border-yellow-300 p-3 flex-shrink-0">
            <div className="flex items-center gap-3 mb-2">
                <Icon name="alert-triangle" className="text-yellow-600" size={20} />
                <h3 className="font-bold text-yellow-800 text-base">Tareas Críticas Próximas</h3>
            </div>
            <div className="flex gap-4 overflow-x-auto pb-2">
                {tasksWithDiff.map(({ task, diff }) => (
                    <div key={task.id} className="bg-white/70 p-2 rounded-lg border border-yellow-300 flex-shrink-0 w-60">
                        <p className="font-bold text-sm text-gray-800 truncate">{task.text}</p>
                        <p className={`text-xs font-semibold ${diff <=0 ? 'text-red-600 animate-pulse' : 'text-blue-600'}`}>
                            {task.time} ({formatRelativeTime(diff)})
                        </p>
                    </div>
                ))}
            </div>
        </div>
    );
};

export default CriticalTasksBar;
--- END OF FILE features/operations/CriticalTasksBar.tsx ---

--- START OF FILE features/operations/TaskFormModal.tsx ---
import React, { useState, FormEvent, useEffect, KeyboardEvent } from 'react';
import { KanbanTask, Shift, Subtask, User } from '../../types';
import Modal from '../../components/Modal';
import { TASK_DURATIONS, OPERATIONS_PIN } from '../../constants';
import Icon from '../../components/Icon';

export type TaskSubmitPayload = Omit<KanbanTask, 'id' | 'status'> & {
    recurrence: 'once' | 'weekly';
    selectedDays?: string[];
    recurrenceWeeks?: string;
};

interface TaskFormModalProps {
    isOpen: boolean;
    onClose: () => void;
    onSave: (payload: TaskSubmitPayload, existingTaskId?: string) => void;
    onDelete: (taskId: string) => void;
    task: KanbanTask | null;
    selectedDate: string;
    users: User[];
}

const daysOfWeek = [
    { label: 'L', value: '1' }, { label: 'M', value: '2' }, { label: 'M', value: '3' },
    { label: 'J', value: '4' }, { label: 'V', value: '5' }, { label: 'S', value: '6' },
    { label: 'D', value: '0' },
];

const TaskFormModal: React.FC<TaskFormModalProps> = ({ isOpen, onClose, onSave, onDelete, task, selectedDate, users }) => {
    const [text, setText] = useState('');
    const [employee, setEmployee] = useState<string>('');
    const [hour, setHour] = useState('08');
    const [minute, setMinute] = useState('00');
    const [period, setPeriod] = useState<'AM' | 'PM'>('AM');
    const [duration, setDuration] = useState('30');
    const [shift, setShift] = useState<Shift>('pre-apertura');
    const [zone, setZone] = useState('');
    const [isCritical, setIsCritical] = useState(false);
    const [recurrence, setRecurrence] = useState<'once' | 'weekly'>('once');
    const [selectedDays, setSelectedDays] = useState<string[]>([]);
    const [recurrenceWeeks, setRecurrenceWeeks] = useState('4');
    const [subtasks, setSubtasks] = useState<Subtask[]>([]);
    const [newSubtaskText, setNewSubtaskText] = useState('');
    
    // State for delete confirmation
    const [isConfirmingDelete, setIsConfirmingDelete] = useState(false);
    const [pinInput, setPinInput] = useState('');
    const [pinError, setPinError] = useState('');

    useEffect(() => {
        if (isOpen) {
            const defaultEmployee = users.length > 0 ? users[0].name : '';

            setText(task?.text || '');
            setEmployee(task?.employee || defaultEmployee);
            
            const taskTime = task?.time || '08:00';
            const [h, m] = taskTime.split(':').map(Number);
            
            const newPeriod = h >= 12 ? 'PM' : 'AM';
            let displayHour = h % 12;
            if (displayHour === 0) displayHour = 12;

            setHour(String(displayHour).padStart(2, '0'));
            setMinute(String(m).padStart(2, '0'));
            setPeriod(newPeriod);

            setDuration(String(task?.duration || '30'));
            setShift(task?.shift || 'pre-apertura');
            setZone(task?.zone || '');
            setIsCritical(task?.isCritical || false);
            setRecurrence('once');
            setSelectedDays([]);
            setRecurrenceWeeks('4');
            setSubtasks(task?.subtasks || []);
            setNewSubtaskText('');
            
            // Reset delete confirmation state
            setIsConfirmingDelete(false);
            setPinInput('');
            setPinError('');
        }
    }, [isOpen, task, users]);

    const handleDayToggle = (dayValue: string) => {
        setSelectedDays(prev =>
            prev.includes(dayValue)
                ? prev.filter(d => d !== dayValue)
                : [...prev, dayValue]
        );
    };
    
    const handleAddSubtask = () => {
        if (newSubtaskText.trim() === '') return;
        const newSubtask: Subtask = {
            id: `sub-${Date.now()}`,
            text: newSubtaskText.trim(),
            isCompleted: false,
        };
        setSubtasks([...subtasks, newSubtask]);
        setNewSubtaskText('');
    };

    const handleSubtaskKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {
        if (e.key === 'Enter') {
            e.preventDefault();
            handleAddSubtask();
        }
    };

    const handleDeleteSubtask = (subtaskId: string) => {
        setSubtasks(subtasks.filter(st => st.id !== subtaskId));
    };


    const handleSubmit = (e: FormEvent) => {
        e.preventDefault();
        if (!text) {
            alert('Por favor completa el nombre de la tarea.');
            return;
        }
        
        if (recurrence === 'weekly' && selectedDays.length === 0) {
            alert('Por favor selecciona al menos un día para la tarea recurrente.');
            return;
        }

        let h24 = parseInt(hour, 10);
        if (period === 'PM' && h24 !== 12) {
            h24 += 12;
        } else if (period === 'AM' && h24 === 12) {
            h24 = 0; // Midnight case
        }
        const finalTime = `${String(h24).padStart(2, '0')}:${minute}`;
        
        const payload: TaskSubmitPayload = {
            text,
            employee,
            time: finalTime,
            duration: parseInt(duration, 10),
            shift,
            zone,
            isCritical,
            date: task?.date || selectedDate,
            recurrence,
            selectedDays,
            recurrenceWeeks,
            subtasks,
        };
        
        onSave(payload, task?.id);
        onClose();
    };
    
    const handleConfirmDelete = () => {
        if (pinInput === OPERATIONS_PIN) {
            if (task) {
                onDelete(task.id);
            }
            onClose();
        } else {
            setPinError('PIN incorrecto. Inténtalo de nuevo.');
            setPinInput('');
        }
    };

    const isEditing = !!task;

    return (
        <Modal isOpen={isOpen} onClose={onClose} title={task ? "Editar Tarea" : "Añadir Nueva Tarea"}>
            <div className="relative">
                <form onSubmit={handleSubmit} className="flex flex-col gap-4 max-h-[80vh] overflow-y-auto pr-2">
                    <div className="form-group">
                        <label className="text-sm font-medium text-gray-600">Nombre de la Tarea</label>
                        <input type="text" value={text} onChange={e => setText(e.target.value)} required className="w-full p-2 border border-gray-300 rounded-md bg-gray-50" />
                    </div>

                    <fieldset disabled={isEditing}>
                        <div className="form-group">
                            <label className="text-sm font-medium text-gray-600 mb-2 block">Repetición</label>
                            <div className="flex gap-2 bg-gray-200 rounded-lg p-1">
                                <button type="button" onClick={() => setRecurrence('once')} className={`flex-1 p-2 rounded-md text-sm font-bold transition-colors ${recurrence === 'once' ? 'bg-white shadow-sm' : ''}`}>Una vez</button>
                                <button type="button" onClick={() => setRecurrence('weekly')} className={`flex-1 p-2 rounded-md text-sm font-bold transition-colors ${recurrence === 'weekly' ? 'bg-white shadow-sm' : ''}`}>Semanalmente</button>
                            </div>
                             {isEditing && <p className="text-xs text-gray-500 mt-1">La repetición no se puede cambiar en una tarea existente.</p>}
                        </div>
                        {recurrence === 'weekly' && (
                            <div className="flex flex-col gap-4 mt-4">
                                <div className="form-group">
                                    <label className="text-sm font-medium text-gray-600 mb-2 block">Días de la semana</label>
                                    <div className="flex justify-between gap-1">
                                        {daysOfWeek.map(({label, value}) => (
                                            <button
                                                type="button"
                                                key={value}
                                                onClick={() => handleDayToggle(value)}
                                                className={`w-9 h-9 flex items-center justify-center font-bold rounded-full border-2 transition-colors ${selectedDays.includes(value) ? 'bg-blue-600 text-white border-blue-600' : 'bg-gray-100 border-gray-300'}`}
                                            >
                                                {label}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                                <div className="form-group">
                                    <label className="text-sm font-medium text-gray-600">Repetir durante</label>
                                    <select value={recurrenceWeeks} onChange={e => setRecurrenceWeeks(e.target.value)} className="w-full p-2 border border-gray-300 rounded-md bg-gray-50">
                                        <option value="4">4 semanas</option>
                                        <option value="8">8 semanas</option>
                                        <option value="12">12 semanas</option>
                                    </select>
                                </div>
                            </div>
                        )}
                    </fieldset>
                    
                    <div className="grid grid-cols-2 gap-4">
                         <div className="form-group">
                            <label className="text-sm font-medium text-gray-600">Empleado</label>
                            <select value={employee} onChange={e => setEmployee(e.target.value)} className="w-full p-2 border border-gray-300 rounded-md bg-gray-50">
                                {users.map(user => (
                                    <option key={user.id} value={user.name}>{user.name}</option>
                                ))}
                            </select>
                        </div>
                         <div className="form-group">
                            <label className="text-sm font-medium text-gray-600">Turno</label>
                            <select value={shift} onChange={e => setShift(e.target.value as Shift)} className="w-full p-2 border border-gray-300 rounded-md bg-gray-50">
                                <option value="matutino">Matutino</option><option value="pre-apertura">Pre Apertura</option><option value="cierre">Cierre</option><option value="default">Otro</option>
                            </select>
                        </div>
                    </div>
                    <div className="grid grid-cols-2 gap-4">
                        <div className="form-group">
                            <label className="text-sm font-medium text-gray-600">Hora</label>
                            <div className="flex gap-1">
                                <select value={hour} onChange={e => setHour(e.target.value)} className="w-full p-2 border border-gray-300 rounded-md bg-gray-50">
                                    {Array.from({ length: 12 }, (_, i) => i + 1).map(h => (
                                        <option key={h} value={String(h).padStart(2, '0')}>{String(h).padStart(2, '0')}</option>
                                    ))}
                                </select>
                                <select value={minute} onChange={e => setMinute(e.target.value)} className="w-full p-2 border border-gray-300 rounded-md bg-gray-50">
                                     {Array.from({ length: 60 }, (_, i) => i).map(m => (
                                        <option key={m} value={String(m).padStart(2, '0')}>{String(m).padStart(2, '0')}</option>
                                    ))}
                                </select>
                                 <select value={period} onChange={e => setPeriod(e.target.value as 'AM' | 'PM')} className="w-full p-2 border border-gray-300 rounded-md bg-gray-50">
                                    <option>AM</option><option>PM</option>
                                </select>
                            </div>
                        </div>
                         <div className="form-group">
                            <label className="text-sm font-medium text-gray-600">Duración</label>
                            <select value={duration} onChange={e => setDuration(e.target.value)} required className="w-full p-2 border border-gray-300 rounded-md bg-gray-50">
                               {TASK_DURATIONS.map(d => <option key={d.value} value={d.value}>{d.label}</option>)}
                            </select>
                        </div>
                    </div>
                     <div className="form-group">
                        <label className="text-sm font-medium text-gray-600">Zona (Opcional)</label>
                        <input type="text" value={zone} onChange={e => setZone(e.target.value)} className="w-full p-2 border border-gray-300 rounded-md bg-gray-50" />
                    </div>

                    <div className="form-group mt-2">
                        <label className="text-sm font-medium text-gray-600 mb-2 block">Subtareas</label>
                        <div className="bg-gray-100 p-3 rounded-lg">
                            {subtasks.length > 0 && (
                                <ul className="space-y-2 mb-3">
                                    {subtasks.map(st => (
                                        <li key={st.id} className="flex items-center justify-between bg-white p-2 rounded">
                                            <span className="text-sm text-gray-700">{st.text}</span>
                                            <button type="button" onClick={() => handleDeleteSubtask(st.id)} className="p-1 text-gray-400 hover:text-red-600">
                                                <Icon name="trash-2" size={16} />
                                            </button>
                                        </li>
                                    ))}
                                </ul>
                            )}
                            <div className="flex gap-2">
                                <input
                                    type="text"
                                    value={newSubtaskText}
                                    onChange={e => setNewSubtaskText(e.target.value)}
                                    onKeyDown={handleSubtaskKeyDown}
                                    placeholder="Añadir una subtarea..."
                                    className="w-full p-2 border border-gray-300 rounded-md bg-white text-sm"
                                />
                                <button type="button" onClick={handleAddSubtask} className="py-2 px-4 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 text-sm">Añadir</button>
                            </div>
                        </div>
                    </div>


                    <div className="flex items-center gap-2 mt-2">
                        <input type="checkbox" id="task-critical" checked={isCritical} onChange={e => setIsCritical(e.target.checked)} className="w-4 h-4" />
                        <label htmlFor="task-critical" className="text-sm font-medium text-gray-600">Es una tarea crítica</label>
                    </div>
                    <div className="flex justify-between items-center mt-4 pt-4 border-t sticky bottom-0 bg-white">
                        <div>
                           {task && (
                               <button type="button" onClick={() => setIsConfirmingDelete(true)} className="py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700">
                                   Eliminar Tarea
                               </button>
                           )}
                        </div>
                        <div className="flex gap-4">
                            <button type="button" onClick={onClose} className="py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300">Cancelar</button>
                            <button type="submit" className="py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700">Guardar Cambios</button>
                        </div>
                    </div>
                </form>

                {isConfirmingDelete && (
                    <div className="absolute inset-0 bg-white/80 backdrop-blur-sm flex justify-center items-center z-10">
                        <div className="bg-white p-6 rounded-lg shadow-lg border border-gray-200 w-full max-w-sm text-center">
                            <h4 className="font-bold text-lg text-gray-800">Confirmar Eliminación</h4>
                            <p className="text-sm text-gray-600 mt-2 mb-4">Para confirmar, introduce el PIN de operaciones. Esta acción no se puede deshacer.</p>
                            <input
                                type="password"
                                value={pinInput}
                                onChange={e => { setPinInput(e.target.value); setPinError(''); }}
                                placeholder="PIN de Seguridad"
                                autoFocus
                                className="w-full p-2 border border-gray-300 rounded-md text-center"
                            />
                            {pinError && <p className="text-xs text-red-600 mt-1">{pinError}</p>}
                            <div className="flex gap-4 mt-4">
                                <button onClick={() => setIsConfirmingDelete(false)} className="flex-1 py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300">
                                    Cancelar
                                </button>
                                <button onClick={handleConfirmDelete} className="flex-1 py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700">
                                    Confirmar
                                </button>
                            </div>
                        </div>
                    </div>
                )}
            </div>
        </Modal>
    );
};

export default TaskFormModal;
--- END OF FILE features/operations/TaskFormModal.tsx ---

--- START OF FILE features/operations/AIAssistantModal.tsx ---

--- END OF FILE features/operations/AIAssistantModal.tsx ---

--- START OF FILE features/operations/AgendaTaskCard.tsx ---
import React from 'react';
import { KanbanTask, TaskStatus } from '../../types';
import Icon from '../../components/Icon';

interface AgendaTaskCardProps {
    task: KanbanTask;
    onUpdateStatus: (taskId: string, newStatus: TaskStatus) => void;
    onEdit: (task: KanbanTask) => void;
    onViewSubtasks: () => void;
    style: React.CSSProperties;
    userColor: string;
}

const getStatusStyles = (status: TaskStatus) => {
    switch (status) {
        case 'inprogress':
            return 'opacity-100 animate-pulse-yellow';
        case 'done':
            return 'opacity-50';
        case 'todo':
        default:
            return 'opacity-100';
    }
};

const AgendaTaskCard: React.FC<AgendaTaskCardProps> = ({ task, onUpdateStatus, onEdit, onViewSubtasks, style, userColor }) => {
    const statusStyles = getStatusStyles(task.status);
    
    const handleStatusChange = (e: React.MouseEvent) => {
        e.stopPropagation(); // Prevent opening subtask view
        if (task.status === 'todo') {
            onUpdateStatus(task.id, 'inprogress');
        } else if (task.status === 'inprogress') {
            onUpdateStatus(task.id, 'done');
        } else if (task.status === 'done') {
            onUpdateStatus(task.id, 'todo');
        }
    };

    const startTime = new Date(`${task.date}T${task.time}`);
    const endTime = new Date(startTime.getTime() + task.duration * 60000); // 60000 ms in a minute
    const formattedEndTime = endTime.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit', hourCycle: 'h23' });

    const totalSubtasks = task.subtasks?.length || 0;
    const completedSubtasks = task.subtasks?.filter(st => st.isCompleted).length || 0;

    const cardStyle: React.CSSProperties = {
        ...style,
        borderWidth: '2px',
        borderColor: task.status === 'inprogress' ? userColor : 'transparent',
        backgroundColor: '#f9fafb' // neutral bg-gray-50
    };

    const textStyle = {
        color: '#374151' // neutral text-gray-700 for readability
    };

    return (
        <div
            style={cardStyle}
            onClick={onViewSubtasks}
            className={`absolute rounded-lg p-2 flex gap-2 transition-all duration-300 cursor-pointer ${statusStyles}`}
        >
            <div className="flex-shrink-0 w-1 h-full rounded-full" style={{ backgroundColor: userColor }}></div>
            <div className="flex-grow flex flex-col min-w-0 min-h-0">
                <div className="flex-grow overflow-hidden">
                    <p className={`font-bold text-sm break-words ${task.status === 'done' ? 'line-through' : ''}`} style={textStyle}>{task.text}</p>
                    <p className={`text-xs ${task.status === 'done' ? 'line-through' : ''}`} style={textStyle}>
                        {task.time} - {formattedEndTime} ({task.duration} min)
                    </p>
                </div>
                <div className="flex items-center justify-between mt-1 flex-shrink-0">
                    <span className="text-xs font-bold px-2 py-0.5 rounded-full bg-white/60" style={textStyle}>{task.employee}</span>
                     
                    <div className="flex items-center gap-2" style={textStyle}>
                        {totalSubtasks > 0 && (
                            <div className="flex items-center gap-1 text-xs font-semibold">
                                <Icon name="list" size={14} />
                                <span>{completedSubtasks}/{totalSubtasks}</span>
                            </div>
                        )}
                        <button
                            onClick={(e) => { e.stopPropagation(); onEdit(task); }}
                            className="p-1 rounded-full hover:bg-black/10 transition-colors"
                            title="Editar Tarea"
                        >
                            <Icon name="pencil" size={14} />
                        </button>
                    </div>
                </div>
            </div>
             <div className="flex-shrink-0">
                <button onClick={handleStatusChange} className="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all"
                    style={{
                        borderColor: task.status === 'done' ? '#4ade80' : '#9ca3af',
                        backgroundColor: task.status === 'done' ? '#4ade80' : 'white',
                    }}
                >
                    {task.status === 'inprogress' && <div className="w-2.5 h-2.5 bg-yellow-500 rounded-full"></div>}
                    {task.status === 'done' && <Icon name="check" size={16} className="text-white" />}
                </button>
            </div>
        </div>
    );
};

export default AgendaTaskCard;
--- END OF FILE features/operations/AgendaTaskCard.tsx ---

--- START OF FILE features/operations/Timeline.tsx ---
import React, { useState, useEffect, useMemo } from 'react';
import { KanbanTask, User } from '../../types';
import { TIMELINE_START_HOUR, TIMELINE_END_HOUR } from '../../constants';

interface TimelineProps {
    tasks: KanbanTask[];
    users: User[];
}

const HOUR_HEIGHT_PX = 60; // 60px per hour

const timeToPosition = (time: string): number => {
    const [hours, minutes] = time.split(':').map(Number);
    const hoursFromStart = hours - TIMELINE_START_HOUR;
    return (hoursFromStart * HOUR_HEIGHT_PX) + (minutes / 60 * HOUR_HEIGHT_PX);
};

const Timeline: React.FC<TimelineProps> = ({ tasks, users }) => {
    const [now, setNow] = useState(new Date());

    const userColorMap = useMemo(() => {
        return users.reduce((acc, user) => {
            acc[user.name] = user.color;
            return acc;
        }, {} as Record<string, string>);
    }, [users]);

    useEffect(() => {
        const timer = setInterval(() => setNow(new Date()), 60000); // Update every minute
        return () => clearInterval(timer);
    }, []);

    const hours = Array.from({ length: TIMELINE_END_HOUR - TIMELINE_START_HOUR + 1 }, (_, i) => TIMELINE_START_HOUR + i);

    const currentTimePosition = timeToPosition(`${now.getHours()}:${now.getMinutes()}`);

    return (
        <div className="hidden md:block w-32 flex-shrink-0 bg-gray-100 rounded-lg p-2 relative overflow-y-auto">
            <div className="relative" style={{ height: `${(TIMELINE_END_HOUR - TIMELINE_START_HOUR + 1) * HOUR_HEIGHT_PX}px` }}>
                {/* Hour markers and lines */}
                {hours.map(hour => (
                    <div key={hour} className="relative" style={{ height: `${HOUR_HEIGHT_PX}px` }}>
                        <span className="absolute -top-2 left-0 text-xs font-semibold text-gray-500">{hour % 12 === 0 ? 12 : hour % 12}{hour < 12 ? 'am' : 'pm'}</span>
                        <div className="absolute top-0 left-8 w-px h-full bg-gray-300"></div>
                    </div>
                ))}
                
                {/* Current time indicator */}
                {currentTimePosition >= 0 && currentTimePosition <= (hours.length * HOUR_HEIGHT_PX) && (
                     <div className="absolute left-6 right-0 h-px bg-red-500 z-20" style={{ top: `${currentTimePosition}px` }}>
                        <div className="absolute -left-2 -top-1 w-2 h-2 bg-red-500 rounded-full"></div>
                    </div>
                )}
               
                {/* Task dots */}
                {tasks.map(task => (
                    <div key={task.id} className="absolute left-8 transform -translate-x-1/2 z-10 group" style={{ top: `${timeToPosition(task.time)}px` }}>
                        <div 
                            className="w-3 h-3 rounded-full border-2 border-white"
                            style={{ backgroundColor: userColorMap[task.employee] || '#9ca3af' }}
                        ></div>
                        <div className="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-48 p-2 bg-gray-800 text-white text-xs rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-30">
                            <p className="font-bold">{task.time} - {task.employee}</p>
                            <p>{task.text}</p>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    );
};

export default Timeline;
--- END OF FILE features/operations/Timeline.tsx ---

--- START OF FILE features/operations/KanbanColumn.tsx ---
import React, { useMemo } from 'react';
import { KanbanTask, TaskStatus, User } from '../../types';
import KanbanCard from './KanbanCard';
import Icon from '../../components/Icon';

type TimeStatus = 'due' | 'imminent' | 'normal';

interface KanbanColumnProps {
    title: string;
    icon: 'list' | 'play-circle' | 'check-circle';
    status: TaskStatus;
    tasks: KanbanTask[];
    onDrop: (status: TaskStatus) => void;
    onDragStart: (taskId: string) => void;
    updateTaskStatus: (taskId: string, newStatus: TaskStatus) => void;
    timeAwareTasks: Record<string, { diff: number; status: TimeStatus }>;
    onEdit: (task: KanbanTask) => void;
    users: User[];
}

const KanbanColumn: React.FC<KanbanColumnProps> = ({ title, icon, status, tasks, onDrop, onDragStart, updateTaskStatus, timeAwareTasks, onEdit, users }) => {
    
    const userColorMap = useMemo(() => {
        return users.reduce((acc, user) => {
            acc[user.name] = user.color;
            return acc;
        }, {} as Record<string, string>);
    }, [users]);

    const handleDragOver = (e: React.DragEvent<HTMLDivElement>) => {
        e.preventDefault();
    };

    const handleDrop = (e: React.DragEvent<HTMLDivElement>) => {
        e.preventDefault();
        onDrop(status);
    };

    let lastShift = '';

    return (
        <div 
            className="bg-gray-100 rounded-lg p-4 flex flex-col h-full min-h-[300px]"
            onDragOver={handleDragOver}
            onDrop={handleDrop}
        >
            <h3 className="flex items-center gap-2 font-bold text-lg mb-4 pb-4 border-b-4 border-gray-200 flex-shrink-0">
                <Icon name={icon} size={20} />
                {title}
            </h3>
            <div className="flex-grow flex flex-col gap-4 overflow-y-auto pr-2 -mr-2">
                 {tasks.map(task => {
                    const showShiftHeader = task.status === 'todo' && task.shift !== lastShift;
                    if (showShiftHeader) {
                        lastShift = task.shift;
                    }
                    const timeStatus = timeAwareTasks[task.id]?.status ?? 'normal';
                    const userColor = userColorMap[task.employee] || '#9ca3af';

                    return (
                        <React.Fragment key={task.id}>
                            {showShiftHeader && (
                                <h4 className="font-bold text-blue-600 mt-2 pb-1 border-b border-dashed border-gray-300 capitalize">
                                    Turno {task.shift.replace('-', ' ')}
                                </h4>
                            )}
                            <KanbanCard 
                                task={task} 
                                onDragStart={onDragStart}
                                timeStatus={timeStatus}
                                onCardClick={() => {
                                    const nextStatus: TaskStatus = task.status === 'todo' ? 'inprogress' : task.status === 'inprogress' ? 'done' : 'todo';
                                    updateTaskStatus(task.id, nextStatus);
                                }}
                                onEdit={onEdit}
                                userColor={userColor}
                            />
                        </React.Fragment>
                    );
                 })}
            </div>
        </div>
    );
};

export default KanbanColumn;
--- END OF FILE features/operations/KanbanColumn.tsx ---

--- START OF FILE features/operations/WeekdaySelector.tsx ---
import React, { useState, useEffect, useRef } from 'react';
import Icon from '../../components/Icon';

interface WeekdaySelectorProps {
    selectedDate: Date;
    setSelectedDate: (date: Date) => void;
}

const WeekdaySelector: React.FC<WeekdaySelectorProps> = ({ selectedDate, setSelectedDate }) => {
    const [displayDate, setDisplayDate] = useState(selectedDate);
    const [animationClass, setAnimationClass] = useState('');
    const touchStartX = useRef(0);

    // This is key for the calendar picker to work. When a date is picked,
    // it updates the parent's `selectedDate`, and this effect snaps our
    // view to that week.
    useEffect(() => {
        setDisplayDate(selectedDate);
    }, [selectedDate]);

    // This effect handles the slide animation and date logic for week changes.
    useEffect(() => {
        if (animationClass.startsWith('slide-out')) {
            const direction = animationClass.includes('left') ? 'next' : 'prev';
            const timer = setTimeout(() => {
                // Calculate the new date for the week to display
                const newDisplayDate = new Date(displayDate);
                newDisplayDate.setDate(newDisplayDate.getDate() + (direction === 'prev' ? -7 : 7));
                setDisplayDate(newDisplayDate);

                // THE FIX: Also update the parent's selected date to keep the agenda in sync.
                // We'll select the same day of the week in the new week.
                const newSelectedDate = new Date(selectedDate);
                newSelectedDate.setDate(newSelectedDate.getDate() + (direction === 'prev' ? -7 : 7));
                setSelectedDate(newSelectedDate);

                // Trigger the slide-in animation for the new week
                setAnimationClass(direction === 'next' ? 'slide-in-from-right' : 'slide-in-from-left');
            }, 200); // Must match CSS animation duration
            return () => clearTimeout(timer);
        } else if (animationClass.startsWith('slide-in')) {
            // Clean up the animation class after it completes
            const timer = setTimeout(() => {
                setAnimationClass('');
            }, 200);
            return () => clearTimeout(timer);
        }
    }, [animationClass, displayDate, selectedDate, setSelectedDate]);


    const changeWeek = (direction: 'prev' | 'next') => {
        if (animationClass) return; // Prevent new animations while one is running
        setAnimationClass(direction === 'next' ? 'slide-out-left' : 'slide-out-right');
    };

    const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {
        const dateStr = e.target.value;
        if (dateStr) {
            const newDate = new Date(dateStr);
            newDate.setMinutes(newDate.getMinutes() + newDate.getTimezoneOffset());
            setSelectedDate(newDate);
        }
    };

    const handleTouchStart = (e: React.TouchEvent<HTMLDivElement>) => {
        touchStartX.current = e.targetTouches[0].clientX;
    };

    const handleTouchEnd = (e: React.TouchEvent<HTMLDivElement>) => {
        const touchEndX = e.changedTouches[0].clientX;
        const threshold = 50; // Min swipe distance
        const swipeDistance = touchStartX.current - touchEndX;

        if (swipeDistance > threshold) {
            changeWeek('next');
        } else if (swipeDistance < -threshold) {
            changeWeek('prev');
        }
    };

    const today = new Date();
    today.setHours(0, 0, 0, 0);

    const startOfWeek = new Date(displayDate);
    const dayOfWeek = displayDate.getDay();
    const diff = displayDate.getDate() - dayOfWeek + (dayOfWeek === 0 ? -6 : 1);
    startOfWeek.setDate(diff);
    startOfWeek.setHours(0, 0, 0, 0);

    const weekDays: Date[] = [];
    for (let i = 0; i < 7; i++) {
        const day = new Date(startOfWeek);
        day.setDate(startOfWeek.getDate() + i);
        weekDays.push(day);
    }

    const isSameDay = (d1: Date, d2: Date) => {
        return d1.getFullYear() === d2.getFullYear() &&
               d1.getMonth() === d2.getMonth() &&
               d1.getDate() === d2.getDate();
    };

    const monthName = displayDate.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' });

    return (
        <div className="w-full">
            <div className="flex justify-between items-center mb-2 px-2">
                <button onClick={() => changeWeek('prev')} className="p-2 text-gray-500 hover:text-blue-600 rounded-full hover:bg-gray-100 transition-colors">
                    <Icon name="chevron-left" size={20} />
                </button>
                <div className="flex items-center gap-2">
                    <h4 className="font-bold text-gray-700 capitalize text-sm">{monthName}</h4>
                    <div 
                        className="relative w-9 h-9 flex items-center justify-center text-gray-500 hover:text-blue-600 rounded-full hover:bg-gray-100 transition-colors cursor-pointer" 
                        title="Seleccionar fecha"
                    >
                        <Icon name="calendar" size={18} />
                        <input
                            type="date"
                            onChange={handleDateChange}
                            className="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                            aria-label="Seleccionar fecha"
                        />
                    </div>
                </div>
                <button onClick={() => changeWeek('next')} className="p-2 text-gray-500 hover:text-blue-600 rounded-full hover:bg-gray-100 transition-colors">
                    <Icon name="chevron-right" size={20} />
                </button>
            </div>
            <div className="p-1 bg-gray-200 rounded-lg overflow-hidden relative touch-pan-y">
                 <div
                    className={`flex justify-between items-center gap-1 md:gap-2 ${animationClass}`}
                    onTouchStart={handleTouchStart}
                    onTouchEnd={handleTouchEnd}
                >
                    {weekDays.map(day => {
                        const isSelected = isSameDay(day, selectedDate);
                        const isToday = isSameDay(day, today);
                        
                        return (
                            <button
                                key={day.toISOString()}
                                onClick={() => setSelectedDate(day)}
                                className={`px-1 py-1 md:px-2 md:py-2 rounded-md transition-all duration-200 text-center flex-1`}
                            >
                                <div className={`${isSelected ? 'bg-white shadow-sm rounded-md' : ''} py-1`}>
                                    <span className={`text-xs uppercase font-bold ${isSelected ? 'text-blue-600' : 'text-gray-500'}`}>
                                        {day.toLocaleDateString('es-ES', { weekday: 'short' }).replace('.', '')}
                                    </span>
                                    <p className={`font-bold text-lg ${isToday ? 'text-blue-600' : (isSelected ? 'text-gray-800' : 'text-gray-600')}`}>
                                        {day.getDate()}
                                    </p>
                                </div>
                            </button>
                        );
                    })}
                </div>
            </div>
        </div>
    );
};

export default WeekdaySelector;
--- END OF FILE features/operations/WeekdaySelector.tsx ---

--- START OF FILE features/operations/SubTaskOverlay.tsx ---
import React, { useState, KeyboardEvent } from 'react';
import { KanbanTask, Subtask } from '../../types';
import Icon from '../../components/Icon';

interface SubtaskOverlayProps {
    task: KanbanTask;
    onClose: () => void;
    onUpdateTask: (updatedTask: KanbanTask) => void;
}

const SubTaskOverlay: React.FC<SubtaskOverlayProps> = ({ task, onClose, onUpdateTask }) => {
    const [newSubtaskText, setNewSubtaskText] = useState('');

    const handleSubtaskToggle = (subtaskId: string) => {
        const updatedSubtasks = (task.subtasks || []).map(st =>
            st.id === subtaskId ? { ...st, isCompleted: !st.isCompleted } : st
        );
        onUpdateTask({ ...task, subtasks: updatedSubtasks });
    };

    const handleAddSubtask = () => {
        if (newSubtaskText.trim() === '') return;
        const newSubtask: Subtask = {
            id: `sub-${Date.now()}`,
            text: newSubtaskText.trim(),
            isCompleted: false,
        };
        const updatedSubtasks = [...(task.subtasks || []), newSubtask];
        onUpdateTask({ ...task, subtasks: updatedSubtasks });
        setNewSubtaskText('');
    };

    const handleDeleteSubtask = (subtaskId: string) => {
        const updatedSubtasks = (task.subtasks || []).filter(st => st.id !== subtaskId);
        onUpdateTask({ ...task, subtasks: updatedSubtasks });
    };

    const handleKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {
        if (e.key === 'Enter') {
            e.preventDefault();
            handleAddSubtask();
        }
    };

    const completedCount = task.subtasks?.filter(st => st.isCompleted).length || 0;
    const totalCount = task.subtasks?.length || 0;
    const progress = totalCount > 0 ? (completedCount / totalCount) * 100 : 0;

    return (
        <div
            className="absolute inset-0 bg-gray-900/40 z-50 flex justify-center items-center p-4"
            onClick={onClose}
        >
            <div
                className="bg-white rounded-xl shadow-2xl w-full max-w-md flex flex-col"
                onClick={(e) => e.stopPropagation()}
            >
                <header className="p-4 border-b">
                    <h3 className="font-bold text-lg text-blue-700">{task.text}</h3>
                    <p className="text-sm text-gray-500">{task.time} - {task.employee}</p>
                </header>

                <div className="p-4 flex-grow overflow-y-auto max-h-[50vh]">
                    {totalCount > 0 && (
                        <div className="mb-4">
                            <div className="flex justify-between items-center text-sm mb-1">
                                <span className="font-semibold text-gray-600">Progreso</span>
                                <span>{completedCount} / {totalCount}</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2.5">
                                <div className="bg-blue-600 h-2.5 rounded-full" style={{ width: `${progress}%` }}></div>
                            </div>
                        </div>
                    )}

                    <div className="space-y-2">
                        {(task.subtasks || []).map(subtask => (
                            <div key={subtask.id} className="flex items-center gap-3 p-2 bg-gray-50 rounded-md group">
                                <input
                                    type="checkbox"
                                    checked={subtask.isCompleted}
                                    onChange={() => handleSubtaskToggle(subtask.id)}
                                    className="w-5 h-5 rounded text-blue-600 focus:ring-blue-500 flex-shrink-0"
                                />
                                <span className={`flex-grow text-gray-800 ${subtask.isCompleted ? 'line-through text-gray-400' : ''}`}>
                                    {subtask.text}
                                </span>
                                <button
                                    onClick={() => handleDeleteSubtask(subtask.id)}
                                    className="p-1 text-gray-400 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity"
                                >
                                    <Icon name="trash-2" size={16} />
                                </button>
                            </div>
                        ))}
                    </div>

                    {totalCount === 0 && (
                        <p className="text-center text-gray-500 py-6">No hay subtareas. ¡Añade la primera!</p>
                    )}
                </div>

                <div className="p-4 border-t bg-gray-50 rounded-b-xl">
                    <div className="flex gap-2">
                        <input
                            type="text"
                            value={newSubtaskText}
                            onChange={(e) => setNewSubtaskText(e.target.value)}
                            onKeyDown={handleKeyDown}
                            placeholder="Añadir nueva subtarea..."
                            className="w-full p-2 border border-gray-300 rounded-md bg-white text-sm focus:ring-2 focus:ring-blue-500"
                        />
                        <button onClick={handleAddSubtask} className="py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 text-sm">Añadir</button>
                    </div>
                </div>
            </div>
        </div>
    );
};

export default SubTaskOverlay;
--- END OF FILE features/operations/SubTaskOverlay.tsx ---

--- START OF FILE features/inventory/ShoppingList.tsx ---
import React, { useState } from 'react';
import { InventoryItem, Provider } from '../../types';
import Icon from '../../components/Icon';
import StockUpdateModal from './StockUpdateModal';
import { useInventory } from '../../services/useInventory';

interface ShoppingListProps {
    items: InventoryItem[];
    onRecordStockChange: ReturnType<typeof useInventory>['recordStockChange'];
    providers: Provider[];
}

const ShoppingList: React.FC<ShoppingListProps> = ({ items, onRecordStockChange, providers }) => {
    const [stockModalItem, setStockModalItem] = useState<InventoryItem | null>(null);
    const itemsToBuy = items.filter(item => item.currentStock <= item.minStock);

    if (itemsToBuy.length === 0) {
        return <p className="text-center text-gray-500 mt-8">¡Todo en orden! No hay nada en la lista de compras.</p>;
    }

    // FIX: Explicitly type the accumulator ('acc') in the reduce function to resolve the "Untyped function calls may not accept type arguments" error.
    const itemsByProvider = itemsToBuy.reduce((acc: Record<string, InventoryItem[]>, item) => {
        const provider = item.providerPreferido || 'Sin Proveedor';
        if (!acc[provider]) acc[provider] = [];
        acc[provider].push(item);
        return acc;
    }, {});

    const sortedProviders = Object.keys(itemsByProvider).sort((a, b) => {
        if (a === 'Sin Proveedor') return 1;
        if (b === 'Sin Proveedor') return -1;
        return a.localeCompare(b);
    });

    return (
        <div className="space-y-6">
            {sortedProviders.map(providerName => (
                <div key={providerName}>
                    <h3 className="text-lg font-bold text-blue-700 pb-2 border-b border-gray-300 mb-4 flex items-center gap-2">
                        <Icon name="store" size={20} />
                        {providerName}
                    </h3>
                    <div className="space-y-3">
                        {itemsByProvider[providerName].map(item => (
                            <div key={item.id} className="p-4 bg-red-50 border border-red-300 rounded-lg flex flex-col md:flex-row justify-between md:items-center gap-3">
                                <div>
                                    <p className="font-bold">{item.name}</p>
                                    <p className="text-sm text-red-700 font-semibold">
                                        Quedan: {item.currentStock} {item.unit} (Mín: {item.minStock} {item.unit})
                                    </p>
                                </div>
                                <button
                                    onClick={() => setStockModalItem(item)}
                                    className="flex-shrink-0 flex items-center justify-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm self-start md:self-center"
                                >
                                    <Icon name="plus-circle" size={16} />
                                    Registrar Compra
                                </button>
                            </div>
                        ))}
                    </div>
                </div>
            ))}

            {stockModalItem && (
                <StockUpdateModal
                    isOpen={!!stockModalItem}
                    onClose={() => setStockModalItem(null)}
                    item={stockModalItem}
                    isAdding={true}
                    onUpdate={onRecordStockChange}
                    providers={providers}
                />
            )}
        </div>
    );
};

export default ShoppingList;
--- END OF FILE features/inventory/ShoppingList.tsx ---

--- START OF FILE features/inventory/ProductFormModal.tsx ---
import React, { useState, useEffect, FormEvent } from 'react';
import { InventoryItem, Provider, Category } from '../../types';
import Modal from '../../components/Modal';
import { INVENTORY_UNITS } from '../../constants';

interface ProductFormModalProps {
    isOpen: boolean;
    onClose: () => void;
    onSave: (item: Omit<InventoryItem, 'id' | 'purchaseHistory'> | InventoryItem) => void;
    onDelete: (itemId: string) => void;
    item: InventoryItem | null;
    providers: Provider[];
    categories: Category[];
}

const ProductFormModal: React.FC<ProductFormModalProps> = ({ isOpen, onClose, onSave, onDelete, item, providers, categories }) => {
    const [name, setName] = useState('');
    const [category, setCategory] = useState('');
    const [provider, setProvider] = useState('');
    const [stock, setStock] = useState('0');
    const [unit, setUnit] = useState(INVENTORY_UNITS[0]);
    const [minStock, setMinStock] = useState('0');
    const [error, setError] = useState('');

    useEffect(() => {
        if (isOpen) {
            setName(item?.name || '');
            setCategory(item?.category || (categories.length > 0 ? categories[0].name : ''));
            setProvider(item?.providerPreferido || '');
            setStock(String(item?.currentStock || 0));
            setUnit(item?.unit || INVENTORY_UNITS[0]);
            setMinStock(String(item?.minStock || 0));
            setError('');
        }
    }, [isOpen, item, categories]);

    const handleSubmit = (e: FormEvent) => {
        e.preventDefault();
        setError('');
        
        const stockNum = parseFloat(stock);
        const minStockNum = parseFloat(minStock);

        if (!name.trim()) { setError('El nombre es obligatorio.'); return; }
        if (!unit.trim()) { setError('La unidad es obligatoria.'); return; }
        if (isNaN(stockNum) || stockNum < 0) { setError('Stock debe ser un número positivo.'); return; }
        if (isNaN(minStockNum) || minStockNum < 0) { setError('Nivel mínimo debe ser un número positivo.'); return; }

        if (item) {
            const updatedItem: InventoryItem = {
                ...item,
                name: name.trim(),
                category: category.trim() || 'Sin Categoría',
                providerPreferido: provider.trim(),
                currentStock: stockNum,
                unit: unit.trim(),
                minStock: minStockNum,
            };
            onSave(updatedItem);
        } else {
            const newItemData: Omit<InventoryItem, 'id' | 'purchaseHistory'> = {
                name: name.trim(),
                category: category.trim() || 'Sin Categoría',
                providerPreferido: provider.trim(),
                currentStock: stockNum,
                unit: unit.trim(),
                minStock: minStockNum,
            };
            onSave(newItemData);
        }
        onClose();
    };

    const handleDelete = () => {
        if (item && window.confirm(`¿Estás seguro de que quieres eliminar "${item.name}"?`)) {
            onDelete(item.id);
            onClose();
        }
    };
    
    return (
        <Modal isOpen={isOpen} onClose={onClose} title={item ? "Editar Producto" : "Añadir Producto"}>
            <form onSubmit={handleSubmit} className="flex flex-col gap-4">
                <FormGroup label="Nombre del Producto">
                    <input type="text" value={name} onChange={e => setName(e.target.value)} required />
                </FormGroup>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                     <FormGroup label="Categoría">
                        <select value={category} onChange={e => setCategory(e.target.value)}>
                             <option value="">Sin Categoría</option>
                            {categories.map(c => (
                                <option key={c.id} value={c.name}>{c.name}</option>
                            ))}
                        </select>
                     </FormGroup>
                     <FormGroup label="Proveedor Preferido">
                        <select value={provider} onChange={e => setProvider(e.target.value)}>
                            <option value="">Sin Proveedor</option>
                            {providers.map(p => (
                                <option key={p.id} value={p.name}>{p.name}</option>
                            ))}
                        </select>
                     </FormGroup>
                </div>
                 <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <FormGroup label="Stock Actual"><input type="number" value={stock} onChange={e => setStock(e.target.value)} step="any" min="0" required /></FormGroup>
                    <FormGroup label="Unidad">
                        <select value={unit} onChange={e => setUnit(e.target.value)} required>
                            {INVENTORY_UNITS.map(u => (
                                <option key={u} value={u}>{u}</option>
                            ))}
                        </select>
                    </FormGroup>
                </div>
                <FormGroup label="Nivel Mínimo (para Alertas)">
                    <input type="number" value={minStock} onChange={e => setMinStock(e.target.value)} step="any" min="0" required />
                </FormGroup>

                {error && <p className="text-sm text-red-600 text-center">{error}</p>}
                
                <div className="flex justify-between items-center mt-4">
                    <div>
                        {item && (
                            <button type="button" onClick={handleDelete} className="py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700">Eliminar</button>
                        )}
                    </div>
                    <div className="flex gap-4">
                        <button type="button" onClick={onClose} className="py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300">Cancelar</button>
                        <button type="submit" className="py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700">Guardar</button>
                    </div>
                </div>
            </form>
        </Modal>
    );
};

const FormGroup: React.FC<{label: string, children: React.ReactElement<{ className?: string }>}> = ({label, children}) => (
    <div>
        <label className="block text-sm font-medium text-gray-600 mb-1">{label}</label>
        {React.cloneElement(children, { className: "w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500" })}
    </div>
);


export default ProductFormModal;
--- END OF FILE features/inventory/ProductFormModal.tsx ---

--- START OF FILE features/inventory/InventoryScreen.tsx ---
import React, { useState, useMemo } from 'react';
import Icon from '../../components/Icon';
import { useInventory } from '../../services/useInventory';
import InventoryList from './InventoryList';
import ShoppingList from './ShoppingList';
import ProductFormModal from './ProductFormModal';
import { InventoryItem, Provider, Category } from '../../types';

type InventoryView = 'general' | 'shopping-list';

interface InventoryScreenProps {
    inventoryHook: ReturnType<typeof useInventory>;
    providers: Provider[];
    categories: Category[];
}

const InventoryScreen: React.FC<InventoryScreenProps> = ({ inventoryHook, providers, categories }) => {
    const { items, addItem, updateItem, deleteItem, recordStockChange } = inventoryHook;
    const [activeView, setActiveView] = useState<InventoryView>('general');
    const [search, setSearch] = useState('');
    const [isFormOpen, setIsFormOpen] = useState(false);
    const [editingItem, setEditingItem] = useState<InventoryItem | null>(null);

    const handleEdit = (item: InventoryItem) => {
        setEditingItem(item);
        setIsFormOpen(true);
    };

    const handleAddNew = () => {
        setEditingItem(null);
        setIsFormOpen(true);
    };
    
    const handleCloseForm = () => {
        setIsFormOpen(false);
        setEditingItem(null);
    }

    const handleSaveItem = (itemData: Omit<InventoryItem, 'id' | 'purchaseHistory'> | InventoryItem) => {
        if ('id' in itemData) {
            updateItem(itemData);
        } else {
            addItem(itemData);
        }
    };

    const filteredItems = useMemo(() => items.filter(item =>
        item.name.toLowerCase().includes(search.toLowerCase())
    ), [items, search]);

    const TabButton: React.FC<{ view: InventoryView, label: string, icon: 'boxes' | 'shopping-cart' }> = ({ view, label, icon }) => (
        <button
            onClick={() => setActiveView(view)}
            className={`flex items-center gap-2 py-2 px-4 text-sm md:text-base font-bold border-b-4 transition-colors ${activeView === view ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-800'}`}
        >
            <Icon name={icon} size={18} />
            {label}
        </button>
    );

    return (
        <div className="flex flex-col h-full bg-gray-50">
            <div className="operations-header flex flex-col md:flex-row md:flex-wrap justify-between items-center p-4 border-b border-gray-200 gap-4 flex-shrink-0">
                <div className="operations-actions">
                    <button onClick={handleAddNew} className="flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm">
                        <Icon name="plus-circle" size={16} />
                        Añadir Producto
                    </button>
                </div>
                <div className="inventory-tabs flex gap-4">
                    <TabButton view="general" label="Inventario General" icon="boxes" />
                    <TabButton view="shopping-list" label="Lista de Compras" icon="shopping-cart" />
                </div>
            </div>

            <div className="search-bar-container p-4 flex-shrink-0">
                <input
                    type="search"
                    value={search}
                    onChange={e => setSearch(e.target.value)}
                    placeholder="Buscar producto..."
                    className="w-full p-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
            </div>
            
            <div className="flex-grow overflow-y-auto px-4 pb-4">
                {activeView === 'general' ? (
                    <InventoryList 
                        items={filteredItems} 
                        onEdit={handleEdit} 
                        onRecordStockChange={recordStockChange}
                        providers={providers}
                    />
                ) : (
                    <ShoppingList 
                        items={filteredItems} 
                        onRecordStockChange={recordStockChange}
                        providers={providers}
                    />
                )}
            </div>

            <ProductFormModal
                isOpen={isFormOpen}
                onClose={handleCloseForm}
                onSave={handleSaveItem}
                onDelete={deleteItem}
                item={editingItem}
                providers={providers}
                categories={categories}
            />
        </div>
    );
};

export default InventoryScreen;
--- END OF FILE features/inventory/InventoryScreen.tsx ---

--- START OF FILE features/inventory/PriceHistoryModal.tsx ---
import React, { useMemo } from 'react';
import { InventoryItem } from '../../types';
import Modal from '../../components/Modal';

interface PriceHistoryModalProps {
    isOpen: boolean;
    onClose: () => void;
    item: InventoryItem;
}

const PriceHistoryModal: React.FC<PriceHistoryModalProps> = ({ isOpen, onClose, item }) => {

    const sortedHistory = useMemo(() => {
        if (!item.purchaseHistory) return [];
        return [...item.purchaseHistory].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());
    }, [item.purchaseHistory]);

    const bestPrice = useMemo(() => {
        if (!sortedHistory || sortedHistory.length === 0) return null;
        return sortedHistory.reduce((min, p) => {
            const unitPrice = p.totalPrice / p.quantity;
            return unitPrice < min ? unitPrice : min;
        }, Infinity);
    }, [sortedHistory]);

    return (
        <Modal isOpen={isOpen} onClose={onClose} title={`Historial de Precios: ${item.name}`}>
            <div className="max-h-[60vh] overflow-y-auto">
                {bestPrice && bestPrice !== Infinity && (
                    <div className="p-3 mb-4 bg-green-100 border border-green-300 rounded-lg text-center">
                        <p className="font-bold text-green-800">
                            Mejor Precio Histórico: ${bestPrice.toFixed(2)} / {item.unit}
                        </p>
                    </div>
                )}
                {sortedHistory.length > 0 ? (
                    <table className="w-full text-sm text-left">
                        <thead className="bg-gray-100">
                            <tr>
                                <th className="p-2">Fecha</th>
                                <th className="p-2">Proveedor</th>
                                <th className="p-2">Cant.</th>
                                <th className="p-2">Total</th>
                                <th className="p-2">Unitario</th>
                            </tr>
                        </thead>
                        <tbody>
                            {sortedHistory.map(p => {
                                const unitPrice = p.totalPrice / p.quantity;
                                const isBestPrice = unitPrice.toFixed(2) === bestPrice?.toFixed(2);
                                return (
                                    <tr key={p.id} className={`border-b ${isBestPrice ? 'bg-green-50' : ''}`}>
                                        <td className="p-2">{new Date(p.date).toLocaleDateString()}</td>
                                        <td className="p-2">{p.providerName}</td>
                                        <td className="p-2">{p.quantity} {item.unit}</td>
                                        <td className="p-2">${p.totalPrice.toFixed(2)}</td>
                                        <td className={`p-2 font-bold ${isBestPrice ? 'text-green-700' : ''}`}>
                                            ${unitPrice.toFixed(2)}
                                        </td>
                                    </tr>
                                )
                            })}
                        </tbody>
                    </table>
                ) : (
                    <p className="text-center text-gray-500 py-8">No hay historial de compras para este producto.</p>
                )}
            </div>
             <div className="flex justify-end mt-6">
                <button onClick={onClose} className="py-2 px-6 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300">Cerrar</button>
            </div>
        </Modal>
    );
};

export default PriceHistoryModal;
--- END OF FILE features/inventory/PriceHistoryModal.tsx ---

--- START OF FILE features/inventory/StockUpdateModal.tsx ---
import React, { useState, FormEvent, useEffect } from 'react';
import { InventoryItem, Provider } from '../../types';
import Modal from '../../components/Modal';

interface StockUpdateModalProps {
    isOpen: boolean;
    onClose: () => void;
    onUpdate: (details: { itemId: string; change: number; purchaseDetails?: { totalPrice: number; providerName: string; } }) => void;
    item: InventoryItem;
    isAdding: boolean;
    providers: Provider[];
}

const StockUpdateModal: React.FC<StockUpdateModalProps> = ({ isOpen, onClose, onUpdate, item, isAdding, providers }) => {
    const [amount, setAmount] = useState('');
    const [totalPrice, setTotalPrice] = useState('');
    const [providerName, setProviderName] = useState('');
    const [error, setError] = useState('');
    const actionText = isAdding ? 'Añadir' : 'Usar';

    useEffect(() => {
        if (isOpen) {
            setAmount('');
            setTotalPrice('');
            setProviderName(item.providerPreferido || (providers.length > 0 ? providers[0].name : ''));
            setError('');
        }
    }, [isOpen, item, providers]);


    // FIX: Refactored handleSubmit to build the payload and call onUpdate within conditional branches.
    // This avoids the error "Property 'purchaseDetails' does not exist on type 'unknown'" by not mutating the payload object after creation.
    const handleSubmit = (e: FormEvent) => {
        e.preventDefault();
        setError('');
        const amountNum = parseFloat(amount);

        if (isNaN(amountNum) || amountNum <= 0) {
            setError('Introduce una cantidad válida mayor que 0.');
            return;
        }

        if (isAdding) {
            const priceNum = parseFloat(totalPrice);
            if (isNaN(priceNum) || priceNum < 0) {
                setError('Introduce un precio total válido.');
                return;
            }
            onUpdate({
                itemId: item.id,
                change: amountNum,
                purchaseDetails: {
                    totalPrice: priceNum,
                    providerName: providerName,
                }
            });
        } else {
            onUpdate({
                itemId: item.id,
                change: -amountNum,
            });
        }
        onClose();
    };

    return (
        <Modal isOpen={isOpen} onClose={onClose} title={`${actionText} Stock`}>
            <form onSubmit={handleSubmit} className="flex flex-col gap-4">
                <div>
                    <p>Producto: <span className="font-bold">{item.name}</span></p>
                    <p>Stock Actual: {item.currentStock} {item.unit}</p>
                </div>
                
                <FormGroup label={`Cantidad a ${actionText.toLowerCase()}`}>
                    <input type="number" value={amount} onChange={e => setAmount(e.target.value)} step="any" min="0.01" required autoFocus />
                </FormGroup>

                {isAdding && (
                    <>
                       <FormGroup label="Precio Total de la Compra ($)">
                            <input type="number" value={totalPrice} onChange={e => setTotalPrice(e.target.value)} step="any" min="0" required />
                       </FormGroup>
                       <FormGroup label="Proveedor">
                            <select value={providerName} onChange={e => setProviderName(e.target.value)} required>
                                {providers.map(p => (
                                    <option key={p.id} value={p.name}>{p.name}</option>
                                ))}
                                <option value="Otro">Otro</option>
                            </select>
                       </FormGroup>
                    </>
                )}

                {error && <p className="text-sm text-red-600 text-center">{error}</p>}

                <div className="flex justify-end gap-4 mt-4">
                    <button type="button" onClick={onClose} className="py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300">Cancelar</button>
                    <button type="submit" className="py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700">{actionText}</button>
                </div>
            </form>
        </Modal>
    );
};

const FormGroup: React.FC<{label: string, children: React.ReactElement<{ className?: string }>}> = ({label, children}) => (
    <div>
        <label className="block text-sm font-medium text-gray-600 mb-1">{label}</label>
        {React.cloneElement(children, { className: "w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500" })}
    </div>
);

export default StockUpdateModal;
--- END OF FILE features/inventory/StockUpdateModal.tsx ---

--- START OF FILE features/inventory/InventoryList.tsx ---
import React, { useState } from 'react';
import { InventoryItem, Provider } from '../../types';
import { useInventory } from '../../services/useInventory';
import StockUpdateModal from './StockUpdateModal';
import InventoryItemCard from './InventoryItemCard';
import PriceHistoryModal from './PriceHistoryModal';

interface InventoryListProps {
    items: InventoryItem[];
    onEdit: (item: InventoryItem) => void;
    onRecordStockChange: ReturnType<typeof useInventory>['recordStockChange'];
    providers: Provider[];
}

const InventoryList: React.FC<InventoryListProps> = ({ items, onEdit, onRecordStockChange, providers }) => {
    const [stockModal, setStockModal] = useState<{item: InventoryItem, isAdding: boolean} | null>(null);
    const [historyModalItem, setHistoryModalItem] = useState<InventoryItem | null>(null);

    if (items.length === 0) {
        return <p className="text-center text-gray-500 mt-8">No se encontraron productos.</p>;
    }

    // FIX: Explicitly type the accumulator ('acc') in the reduce function to resolve the "Untyped function calls may not accept type arguments" error.
    const categories = items.reduce((acc: Record<string, InventoryItem[]>, item) => {
        const category = item.category || 'Sin Categoría';
        if (!acc[category]) acc[category] = [];
        acc[category].push(item);
        return acc;
    }, {});
    
    const sortedCategories = Object.keys(categories).sort();

    return (
        <div className="space-y-6">
            {sortedCategories.map(categoryName => (
                <div key={categoryName}>
                    <h3 className="text-lg font-bold text-blue-700 pb-2 border-b border-gray-300 mb-4">
                        {categoryName}
                    </h3>
                    <div className="space-y-3">
                        {categories[categoryName].map(item => (
                            <InventoryItemCard 
                                key={item.id} 
                                item={item} 
                                onEdit={onEdit} 
                                onAddStock={() => setStockModal({item, isAdding: true})}
                                onUseStock={() => setStockModal({item, isAdding: false})}
                                onViewHistory={() => setHistoryModalItem(item)}
                            />
                        ))}
                    </div>
                </div>
            ))}
            {stockModal && (
                 <StockUpdateModal
                    isOpen={!!stockModal}
                    onClose={() => setStockModal(null)}
                    item={stockModal.item}
                    isAdding={stockModal.isAdding}
                    onUpdate={onRecordStockChange}
                    providers={providers}
                />
            )}
            {historyModalItem && (
                <PriceHistoryModal
                    isOpen={!!historyModalItem}
                    onClose={() => setHistoryModalItem(null)}
                    item={historyModalItem}
                />
            )}
        </div>
    );
};

export default InventoryList;
--- END OF FILE features/inventory/InventoryList.tsx ---

--- START OF FILE features/inventory/InventoryItemCard.tsx ---
import React from 'react';
import { InventoryItem } from '../../types';
import Icon from '../../components/Icon';

interface InventoryItemCardProps {
    item: InventoryItem;
    onEdit: (item: InventoryItem) => void;
    onAddStock: () => void;
    onUseStock: () => void;
    onViewHistory: () => void;
}

const IconButton: React.FC<{icon: 'plus' | 'minus' | 'pencil' | 'bar-chart-2', onClick: () => void, colorClass: string, title: string}> = ({icon, onClick, colorClass, title}) => (
     <button 
        title={title}
        onClick={onClick} 
        className={`w-10 h-10 flex items-center justify-center bg-gray-100 border border-gray-200 rounded-full transition-colors ${colorClass}`}
    >
        <Icon name={icon} size={20} />
    </button>
);


const InventoryItemCard: React.FC<InventoryItemCardProps> = ({ item, onEdit, onAddStock, onUseStock, onViewHistory }) => {
    const isLowStock = item.currentStock <= item.minStock;

    const lastPurchase = item.purchaseHistory && item.purchaseHistory.length > 0
        ? item.purchaseHistory[item.purchaseHistory.length - 1]
        : null;

    const lastUnitPrice = lastPurchase ? (lastPurchase.totalPrice / lastPurchase.quantity).toFixed(2) : null;

    return (
        <div className={`p-4 bg-white rounded-lg border flex flex-col md:flex-row md:items-center justify-between gap-4 ${isLowStock ? 'border-red-300 bg-red-50' : 'border-gray-200'}`}>
            <div className="flex-grow">
                <p className="font-bold text-lg">{item.name}</p>
                <div className="flex flex-wrap items-baseline gap-x-4 gap-y-1 text-sm">
                    <p>Stock: <span className="font-semibold">{item.currentStock.toFixed(2)}</span> {item.unit}</p>
                    <p className="text-gray-500">(Mín: {item.minStock} {item.unit})</p>
                    {lastUnitPrice && (
                        <p className="text-gray-500 font-semibold">
                            Último Precio: ${lastUnitPrice} / {item.unit}
                        </p>
                    )}
                </div>
            </div>
            <div className="flex items-center gap-2 flex-shrink-0 justify-end">
                <IconButton icon="plus" onClick={onAddStock} colorClass="hover:bg-green-100 hover:text-green-600" title="Añadir Stock" />
                <IconButton icon="minus" onClick={onUseStock} colorClass="hover:bg-red-100 hover:text-red-600" title="Usar Stock" />
                <IconButton icon="bar-chart-2" onClick={onViewHistory} colorClass="hover:bg-yellow-100 hover:text-yellow-600" title="Historial de Precios"/>
                <IconButton icon="pencil" onClick={() => onEdit(item)} colorClass="hover:bg-blue-100 hover:text-blue-600" title="Editar Producto"/>
            </div>
        </div>
    );
};

export default InventoryItemCard;
--- END OF FILE features/inventory/InventoryItemCard.tsx ---

--- START OF FILE metadata.json ---
{
  "name": "Cafestesia Operations Manager",
  "description": "An integrated operations manager for a cafe, featuring a real-time baking assistant, a Kanban board for tasks, and a comprehensive inventory management system. Built with React and TypeScript.",
  "requestFramePermissions": []
}
--- END OF FILE metadata.json ---

--- START OF FILE types.ts ---
// Fix: Defined RecipeStep interface here as it was not exported from constants.
export interface RecipeStep {
    duration: number;
    instruction: string;
    isPauseStep?: boolean;
}

export enum Screen {
    Baking = 'baking-menu',
    BakingRecipeSelection = 'baking-recipe-selection',
    BakingProcess = 'baking-process',
    HeatingTimer = 'heating-timer',
    Operations = 'operations',
    Inventory = 'inventory',
    Settings = 'settings',
}

export interface Recipe {
    id: string;
    name: string;
    pluralName: string;
    setupInstruction: string;
    totalDuration: number;
    steps: RecipeStep[];
}

export type ProductionProcessState = 'paused' | 'running' | 'alarm' | 'finished';

export interface ProductionProcess {
    id: string;
    name: string;
    
    // Fix: Added missing properties to support different process types and recipe linking.
    type: 'baking' | 'heating';
    recipeId?: string;
    recipe?: Recipe;

    state: ProductionProcessState;
    
    currentStepIndex: number;
    steps: RecipeStep[];

    totalTime: number; // Initial total duration in seconds
    totalTimeLeft: number; 
    stepTimeLeft: number;

    lastTickTimestamp: number; // For offline calculation
}

export interface User {
    id: string;
    name: string;
    color: string;
}

export type Shift = 'matutino' | 'pre-apertura' | 'cierre' | 'default';

export type TaskStatus = 'todo' | 'inprogress' | 'done';

export interface Subtask {
    id: string;
    text: string;
    isCompleted: boolean;
}

export interface KanbanTask {
    id: string;
    text: string;
    employee: string;
    shift: Shift;
    time: string; // "HH:mm"
    date: string; // "YYYY-MM-DD"
    duration: number; // in minutes
    isCritical: boolean;
    zone: string;
    status: TaskStatus;
    subtasks?: Subtask[];
}

export interface PurchaseRecord {
    id: string;
    date: string; // ISO string format
    quantity: number;
    totalPrice: number;
    providerName: string;
}

export interface InventoryItem {
    id: string;
    name: string;
    category: string;
    currentStock: number;
    unit: string;
    minStock: number;
    providerPreferido: string;
    purchaseHistory: PurchaseRecord[];
}

export interface Provider {
    id: string;
    name: string;
}

export interface Category {
    id: string;
    name: string;
}

export interface RecipeFeedback {
    id: string;
    recipeId: string;
    date: string; // ISO string format
    rating: number; // 1-5
    notes: string;
}
--- END OF FILE types.ts ---

--- START OF FILE components/Icon.tsx ---
import React from 'react';

// A selection of icons used in the app. Add more as needed.
// To get the path data, find the icon on lucide.dev, click "Copy SVG", and extract the <path> or other shape data.
const ICONS: Record<string, React.ReactNode> = {
  'alert-triangle': <><path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" /><path d="M12 9v4" /><path d="M12 17h.01" /></>,
  'archive': <><rect width="20" height="5" x="2" y="3" rx="1" /><path d="M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8" /><path d="M10 12h4" /></>,
  'bar-chart-2': <><line x1="18" y1="20" x2="18" y2="10" /><line x1="12" y1="20" x2="12" y2="4" /><line x1="6" y1="20" x2="6" y2="14" /></>,
  'bell': <><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9" /><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0" /></>,
  'boxes': <><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z" /><path d="m3.3 7 8.7 5 8.7-5" /><path d="M12 22V12" /></>,
  'calendar': <><rect width="18" height="18" x="3" y="4" rx="2" ry="2" /><line x1="16" y1="2" x2="16" y2="6" /><line x1="8" y1="2" x2="8" y2="6" /><line x1="3" y1="10" x2="21" y2="10" /></>,
  'cake-slice': <path d="M11.84 10.51 16.2 6.15a2.42 2.42 0 0 1 3.42 0 2.42 2.42 0 0 1 0 3.42l-4.36 4.36" />,
  'check': <path d="M20 6 9 17l-5-5" />,
  'check-circle': <><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" /><path d="m9 11 3 3L22 4" /></>,
  'chevron-left': <path d="m15 18-6-6 6-6" />,
  'chevron-right': <path d="m9 18 6-6-6-6" />,
  'clipboard-kanban': <><rect width="8" height="4" x="8" y="2" rx="1" ry="1" /><rect width="18" height="18" x="3" y="4" rx="2" ry="2" /><path d="M12 14h.01" /><path d="M16 14h.01" /><path d="M8 14h.01" /></>,
  'list': <><line x1="8" x2="21" y1="6" y2="6" /><line x1="8" x2="21" y1="12" y2="12" /><line x1="8" x2="21" y1="18" y2="18" /><line x1="3" x2="3.01" y1="6" y2="6" /><line x1="3" x2="3.01" y1="12" y2="12" /><line x1="3" x2="3.01" y1="18" y2="18" /></>,
  'map-pin': <><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" /><circle cx="12" cy="10" r="3" /></>,
  'menu': <><path d="M4 6h16M4 12h16M4 18h16"/></>,
  'minus': <path d="M5 12h14" />,
  'pencil': <><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z" /><path d="m15 5 4 4" /></>,
  'play-circle': <><circle cx="12" cy="12" r="10" /><polygon points="10 8 16 12 10 16 10 8" /></>,
  'plus': <><path d="M5 12h14" /><path d="M12 5v14" /></>,
  'plus-circle': <><circle cx="12" cy="12" r="10" /><path d="M8 12h8" /><path d="M12 8v8" /></>,
  'refresh-cw': <><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" /><path d="M21 3v5h-5" /><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" /><path d="M3 21v-5h5" /></>,
  'rotate-ccw': <><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" /><path d="M3 3v5h5" /></>,
  'settings': <><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0 2l.15.08a2 2 0 0 0 .73-2.73l.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></>,
  'shopping-cart': <><circle cx="8" cy="21" r="1" /><circle cx="19" cy="21" r="1" /><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.15" /></>,
  'star': <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />,
  'store': <><path d="m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7" /><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" /><path d="M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4" /><path d="M2 7h20" /><path d="M22 7v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7" /></>,
  'thermometer': <><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z" /></>,
  'thermometer-snowflake': <><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z" /><path d="M22 12h-3" /><path d="M2 20v-3" /><path d="M20 4v3" /><path d="m22 7-3 3" /><path d="M2 13l3 3" /><path d="M5 4l-3 3" /></>,
  'thermometer-sun': <><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z" /><path d="M4 11H2" /><path d="M10 11H8" /><path d="M22 11h-2" /><path d="M16 11h-2" /><path d="M19 8a3 3 0 0 0-6 0" /><path d="M19.3 4.7a3 3 0 0 0-4.25-4.25" /></>,
  'trash-2': <><path d="M3 6h18" /><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" /><path d="M10 11v6" /><path d="M14 11v6" /></>,
  'volume-2': <><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" /><path d="M15.54 8.46a5 5 0 0 1 0 7.07" /><path d="M19.07 4.93a10 10 0 0 1 0 14.14" /></>,
  'volume-x': <><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" /><line x1="22" x2="16" y1="9" y2="15" /><line x1="16" x2="22" y1="9" y2="15" /></>,
  // FIX: Wrapped multiple path elements in a React Fragment (<>...</>) to create a single valid JSX element.
  'x': <><path d="M18 6 6 18" /><path d="m6 6 12 12" /></>,
};

interface IconProps {
    name: keyof typeof ICONS;
    className?: string;
    size?: number;
}

const Icon: React.FC<IconProps> = ({ name, className = '', size = 24 }) => {
    return (
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width={size}
            height={size}
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
        >
            {ICONS[name]}
        </svg>
    );
};

export default Icon;
--- END OF FILE components/Icon.tsx ---

--- START OF FILE components/SwipeButton.tsx ---

import React, { useState, useRef, MouseEvent, TouchEvent } from 'react';
import Icon from './Icon';

interface SwipeButtonProps {
    onSwipe: () => void;
    text: string;
    icon: 'chevron-right' | 'rotate-ccw' | 'x';
    variant?: 'success' | 'danger';
    pulse?: boolean;
}

const SwipeButton: React.FC<SwipeButtonProps> = ({ onSwipe, text, icon, variant = 'success', pulse = false }) => {
    const [isDragging, setIsDragging] = useState(false);
    const [startX, setStartX] = useState(0);
    const [diff, setDiff] = useState(0);
    const containerRef = useRef<HTMLDivElement>(null);
    const handleRef = useRef<HTMLDivElement>(null);

    const handleDragStart = (clientX: number) => {
        setIsDragging(true);
        setStartX(clientX);
        if (handleRef.current) {
            handleRef.current.style.transition = 'none';
        }
    };

    const handleDragMove = (clientX: number) => {
        if (!isDragging || !containerRef.current || !handleRef.current) return;
        let currentDiff = clientX - startX;
        const maxDiff = containerRef.current.offsetWidth - handleRef.current.offsetWidth - 10;
        currentDiff = Math.max(0, Math.min(currentDiff, maxDiff));
        setDiff(currentDiff);
    };

    const handleDragEnd = () => {
        if (!isDragging || !containerRef.current) {
            setDiff(0);
            return;
        };

        const threshold = containerRef.current.offsetWidth * 0.7;
        if (diff > threshold) {
            onSwipe();
        }

        setIsDragging(false);
        setDiff(0);
        if (handleRef.current) {
            handleRef.current.style.transition = 'transform 0.3s ease';
        }
    };

    // Mouse Events
    const onMouseDown = (e: MouseEvent<HTMLDivElement>) => handleDragStart(e.clientX);
    const onMouseMove = (e: MouseEvent<HTMLDivElement>) => handleDragMove(e.clientX);
    const onMouseUp = () => handleDragEnd();
    const onMouseLeave = () => handleDragEnd();
    
    // Touch Events
    const onTouchStart = (e: TouchEvent<HTMLDivElement>) => handleDragStart(e.touches[0].clientX);
    const onTouchMove = (e: TouchEvent<HTMLDivElement>) => handleDragMove(e.touches[0].clientX);
    const onTouchEnd = () => handleDragEnd();
    
    const handleStyle = { transform: `translateX(${diff}px)` };

    return (
        <div
            ref={containerRef}
            className={`relative w-full h-[70px] bg-gray-100 rounded-full p-1.5 user-select-none overflow-hidden border border-gray-200 ${pulse ? 'animate-pulse' : ''}`}
            onMouseMove={onMouseMove}
            onMouseUp={onMouseUp}
            onMouseLeave={onMouseLeave}
            onTouchMove={onTouchMove}
            onTouchEnd={onTouchEnd}
        >
            <div
                ref={handleRef}
                className={`absolute top-1.5 left-1.5 w-[58px] h-[58px] rounded-full flex items-center justify-center cursor-grab z-10 ${variant === 'success' ? 'bg-green-500' : 'bg-red-500'}`}
                style={handleStyle}
                onMouseDown={onMouseDown}
                onTouchStart={onTouchStart}
            >
                <Icon name={icon} className="text-white" size={36} />
            </div>
            <span className="absolute inset-0 flex items-center justify-center text-gray-500 text-sm md:text-base font-bold uppercase tracking-wider z-0">
                {text}
            </span>
        </div>
    );
};

export default SwipeButton;

--- END OF FILE components/SwipeButton.tsx ---

--- START OF FILE components/BottomNav.tsx ---

import React from 'react';
import { Screen } from '../types';
import Icon from './Icon';

interface BottomNavProps {
    activeScreen: Screen;
    setActiveScreen: (screen: Screen) => void;
    isBakingRelatedScreen: (screen: Screen) => boolean;
    urgentTasksCount: number;
    shoppingListCount: number;
    inProgressTasksCount: number;
}

const NavButton: React.FC<{ isActive: boolean; onClick: () => void; hasNotification: boolean; children: React.ReactNode; }> = ({ isActive, onClick, hasNotification, children }) => (
    <button onClick={onClick} className="relative flex flex-col items-center justify-center gap-1 p-2 h-full flex-grow text-xs font-bold transition-colors duration-200"
    >
        <div className={`transition-colors ${isActive ? 'text-blue-600' : 'text-gray-500'}`}>
            {children}
        </div>
        {hasNotification && <span className="absolute top-2 right-4 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white"></span>}
    </button>
);


const BottomNav: React.FC<BottomNavProps> = ({ activeScreen, setActiveScreen, isBakingRelatedScreen, urgentTasksCount, shoppingListCount, inProgressTasksCount }) => {
    
    return (
        <nav className="md:hidden fixed bottom-0 left-0 right-0 h-20 bg-white border-t border-gray-200 flex justify-around items-center z-50">
            <NavButton
                isActive={isBakingRelatedScreen(activeScreen)}
                onClick={() => setActiveScreen(Screen.Baking)}
                hasNotification={false} // Baking has its own prominent UI, no dot needed
            >
                <Icon name="cake-slice" size={24} />
                <span>Pan</span>
            </NavButton>
            <NavButton
                isActive={activeScreen === Screen.Operations}
                onClick={() => setActiveScreen(Screen.Operations)}
                hasNotification={urgentTasksCount > 0 || inProgressTasksCount > 0}
            >
                <Icon name="clipboard-kanban" size={24} />
                <span>Operaciones</span>
            </NavButton>
            <NavButton
                isActive={activeScreen === Screen.Inventory}
                onClick={() => setActiveScreen(Screen.Inventory)}
                hasNotification={shoppingListCount > 0}
            >
                <Icon name="archive" size={24} />
                <span>Inventario</span>
            </NavButton>
            <NavButton
                isActive={activeScreen === Screen.Settings}
                onClick={() => setActiveScreen(Screen.Settings)}
                hasNotification={false}
            >
                <Icon name="settings" size={24} />
                <span>Ajustes</span>
            </NavButton>
        </nav>
    );
};

export default BottomNav;

--- END OF FILE components/BottomNav.tsx ---

--- START OF FILE components/Sidebar.tsx ---
import React from 'react';
import { Screen, KanbanTask, InventoryItem, ProductionProcess } from '../types';
import Icon from './Icon';

interface SidebarProps {
    activeScreen: Screen;
    setActiveScreen: (screen: Screen) => void;
    processes: ProductionProcess[];
    urgentTasks: { task: KanbanTask; diff: number }[];
    shoppingListItems: InventoryItem[];
    inProgressTasks: KanbanTask[];
    isOpen: boolean;
    onClose: () => void;
}

const Sidebar: React.FC<SidebarProps> = ({ activeScreen, setActiveScreen, processes, urgentTasks, shoppingListItems, inProgressTasks, isOpen, onClose }) => {

    const handleNavClick = (screen: Screen) => {
        setActiveScreen(screen);
        onClose();
    };
    
    const NavButton: React.FC<{ active: boolean, onClick: () => void, children: React.ReactNode }> = ({ active, onClick, children }) => {
        const base = "w-full flex items-center gap-4 p-4 rounded-lg font-bold text-left cursor-pointer transition-all duration-200";
        const classes = active ? `${base} bg-blue-600 text-white` : `${base} text-gray-500 hover:bg-gray-100 hover:text-gray-900`;
        return <button onClick={onClick} className={classes}>{children}</button>;
    };

    const AlertWidget: React.FC<{ title: string; children: React.ReactNode; onClick: () => void; isAlarm?: boolean; }> = ({ title, children, onClick, isAlarm }) => (
        <div className="mb-4">
            <h3 className={`text-xs uppercase font-bold mb-2 px-2 ${isAlarm ? 'text-red-600 animate-pulse' : 'text-blue-600'}`}>{title}</h3>
            <button
                onClick={onClick}
                className={`w-full text-left p-3 rounded-lg transition-colors border ${isAlarm ? 'bg-red-50 border-red-400 hover:bg-red-100' : 'bg-gray-100 border-gray-200 hover:bg-gray-200'}`}
            >
                {children}
            </button>
        </div>
    );

    const activeProcesses = processes.filter(p => p.state !== 'finished');
    const isBakingRelated = activeScreen === Screen.Baking;

    const sidebarClasses = `
        sidebar-nav flex flex-col bg-white p-4 border-r border-gray-200 overflow-y-auto 
        fixed inset-y-0 left-0 z-50 w-64 transform transition-transform duration-300 ease-in-out 
        md:relative md:w-auto md:translate-x-0
        ${isOpen ? 'translate-x-0' : '-translate-x-full'}
    `;

    return (
        <nav className={sidebarClasses}>
            <header className="sidebar-header text-center mb-6 pt-4 flex-shrink-0">
                <h1 className="text-2xl font-bold text-blue-600">Cafestesia</h1>
                <span className="text-sm text-gray-500">Gestor v2.1 (React)</span>
            </header>

            <div className="flex-grow">
                {activeProcesses.map(process => {
                     const isAlarm = process.state === 'alarm';
                     return (
                        <AlertWidget
                            key={process.id}
                            title={isAlarm ? '¡Acción Requerida!' : 'En Producción'}
                            onClick={() => handleNavClick(Screen.Baking)}
                            isAlarm={isAlarm}
                        >
                            <div className="flex items-center gap-3 font-bold text-sm text-gray-800">
                                <Icon name={isAlarm ? 'bell' : 'cake-slice'} className={isAlarm ? 'text-red-500' : 'text-green-600'} size={20} />
                                <span>{process.name}</span>
                            </div>
                        </AlertWidget>
                    )
                })}

                {inProgressTasks.length > 0 && (
                    <AlertWidget title="Tareas en Progreso" onClick={() => handleNavClick(Screen.Operations)}>
                        <div className="flex items-center gap-3 font-bold text-sm text-gray-800">
                            <Icon name="play-circle" className="text-yellow-600" size={20} />
                            <span>{inProgressTasks.length} tarea{inProgressTasks.length > 1 ? 's' : ''} activa{inProgressTasks.length > 1 ? 's' : ''}</span>
                        </div>
                    </AlertWidget>
                )}


                {urgentTasks.length > 0 && (
                     <AlertWidget title="Operaciones Urgentes" onClick={() => handleNavClick(Screen.Operations)}>
                        {urgentTasks.map(({ task, diff }) => (
                            <div key={task.id} className="text-sm mb-2 last:mb-0">
                                <p className="font-bold text-gray-800">{task.text}</p>
                                <p className={`text-xs font-semibold ${diff <= 0 ? 'text-red-600 animate-pulse' : 'text-blue-600'}`}>
                                    {task.time} {diff <= 0 ? '(¡AHORA!)' : `(en ${diff} min)`}
                                </p>
                            </div>
                        ))}
                    </AlertWidget>
                )}

                {shoppingListItems.length > 0 && (
                    <AlertWidget title="Inventario Crítico" onClick={() => handleNavClick(Screen.Inventory)}>
                        <div className="flex items-center gap-3 font-bold text-sm text-gray-800">
                           <Icon name="shopping-cart" className="text-red-500" size={20} />
                           <span>{shoppingListItems.length} producto{shoppingListItems.length > 1 ? 's' : ''} en la lista de compras</span>
                        </div>
                    </AlertWidget>
                )}
            </div>

            <div className="nav-buttons flex flex-col gap-2 mt-auto flex-shrink-0">
                <NavButton active={isBakingRelated} onClick={() => handleNavClick(Screen.Baking)}>
                    <Icon name="cake-slice" size={20} />
                    <span>Producción de Pan</span>
                </NavButton>
                <NavButton active={activeScreen === Screen.Operations} onClick={() => handleNavClick(Screen.Operations)}>
                    <Icon name="clipboard-kanban" size={20} />
                    <span>Operaciones</span>
                </NavButton>
                <NavButton active={activeScreen === Screen.Inventory} onClick={() => handleNavClick(Screen.Inventory)}>
                    <Icon name="archive" size={20} />
                    <span>Inventario</span>
                </NavButton>
                <NavButton active={activeScreen === Screen.Settings} onClick={() => handleNavClick(Screen.Settings)}>
                    <Icon name="settings" size={20} />
                    <span>Configuración</span>
                </NavButton>
            </div>
        </nav>
    );
};

export default Sidebar;
--- END OF FILE components/Sidebar.tsx ---

--- START OF FILE components/Modal.tsx ---
import React from 'react';

interface ModalProps {
    isOpen: boolean;
    onClose: () => void;
    title: string;
    children: React.ReactNode;
}

const Modal: React.FC<ModalProps> = ({ isOpen, onClose, title, children }) => {
    if (!isOpen) return null;

    return (
        <div 
            className="fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 animate-fadeIn"
            onClick={onClose}
        >
            <div 
                className="bg-white rounded-xl shadow-2xl w-full max-w-lg"
                onClick={(e) => e.stopPropagation()}
            >
                <div className="p-6 border-b border-gray-200">
                    <h3 className="text-xl font-bold text-blue-600">{title}</h3>
                </div>
                <div className="p-6">
                    {children}
                </div>
            </div>
        </div>
    );
};

export default Modal;
--- END OF FILE components/Modal.tsx ---

--- START OF FILE package-lock.json ---
{
  "name": "cafestesia-operations-manager",
  "version": "0.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "cafestesia-operations-manager",
      "version": "0.0.0",
      "dependencies": {
        "firebase": "^10.12.2",
        "react": "^18.2.0",
        "react-dom": "^18.2.0"
      },
      "devDependencies": {
        "@types/react": "^18.2.66",
        "@types/react-dom": "^18.2.22",
        "@typescript-eslint/eslint-plugin": "^7.2.0",
        "@typescript-eslint/parser": "^7.2.0",
        "@vitejs/plugin-react": "^4.2.1",
        "eslint": "^8.57.0",
        "eslint-plugin-react-hooks": "^4.6.0",
        "eslint-plugin-react-refresh": "^0.4.6",
        "typescript": "^5.2.2",
        "vite": "^5.2.0"
      }
    },
    "node_modules/@babel/code-frame": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.27.1.tgz",
      "integrity": "sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-validator-identifier": "^7.27.1",
        "js-tokens": "^4.0.0",
        "picocolors": "^1.1.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/compat-data": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.28.5.tgz",
      "integrity": "sha512-6uFXyCayocRbqhZOB+6XcuZbkMNimwfVGFji8CTZnCzOHVGvDqzvitu1re2AU5LROliz7eQPhB8CpAMvnx9EjA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/core": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.28.5.tgz",
      "integrity": "sha512-e7jT4DxYvIDLk1ZHmU/m/mB19rex9sv0c2ftBtjSBv+kVM/902eh0fINUzD7UwLLNR+jU585GxUJ8/EBfAM5fw==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-module-transforms": "^7.28.3",
        "@babel/helpers": "^7.28.4",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/traverse": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/remapping": "^2.3.5",
        "convert-source-map": "^2.0.0",
        "debug": "^4.1.0",
        "gensync": "^1.0.0-beta.2",
        "json5": "^2.2.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/babel"
      }
    },
    "node_modules/@babel/core/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/@babel/generator": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.28.5.tgz",
      "integrity": "sha512-3EwLFhZ38J4VyIP6WNtt2kUdW9dokXA9Cr4IVIFHuCpZ3H8/YFOl5JjZHisrn1fATPBmKKqXzDFvh9fUwHz6CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/gen-mapping": "^0.3.12",
        "@jridgewell/trace-mapping": "^0.3.28",
        "jsesc": "^3.0.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.27.2.tgz",
      "integrity": "sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.27.2",
        "@babel/helper-validator-option": "^7.27.1",
        "browserslist": "^4.24.0",
        "lru-cache": "^5.1.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/@babel/helper-globals": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-imports": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.27.1.tgz",
      "integrity": "sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-transforms": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.3.tgz",
      "integrity": "sha512-gytXUbs8k2sXS9PnQptz5o0QnpLL51SwASIORY6XaBKF88nsOT0Zw9szLqlSGQDP/4TljBAD5y98p2U1fqkdsw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1",
        "@babel/traverse": "^7.28.3"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-plugin-utils": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-plugin-utils/-/helper-plugin-utils-7.27.1.tgz",
      "integrity": "sha512-1gn1Up5YXka3YYAHGKpbideQ5Yjf1tDa9qYcgysz+cNCXukyLl6DjPXhD3VRwSb8c0J9tA4b2+rHEZtc6R0tlw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.28.5.tgz",
      "integrity": "sha512-qSs4ifwzKJSV39ucNjsvc6WVHs6b7S03sOh2OcHF9UHfVPqWWALUsNUVzhSBiItjRZoLHx7nIarVjqKVusUZ1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-option": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helpers": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.4.tgz",
      "integrity": "sha512-HFN59MmQXGHVyYadKLVumYsA9dBFun/ldYxipEjzA4196jpLZd8UjEEBLkbEkvfYreDqJhZxYAWFPtrfhNpj4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.28.5.tgz",
      "integrity": "sha512-KKBU1VGYR7ORr3At5HAtUQ+TV3SzRCXmA/8OdDZiLDBIZxVyzXuztPjfLd3BV1PRAQGCMWWSHYhL0F8d5uHBDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.5"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-self": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-self/-/plugin-transform-react-jsx-self-7.27.1.tgz",
      "integrity": "sha512-6UzkCs+ejGdZ5mFFC/OCUrv028ab2fp1znZmCZjAOBKiBK2jXD1O+BPSfX8X2qjJ75fZBMSnQn3Rq2mrBJK2mw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-source": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-source/-/plugin-transform-react-jsx-source-7.27.1.tgz",
      "integrity": "sha512-zbwoTsBruTeKB9hSq73ha66iFeJHuaFkUbwvqElnygoNbj/jHRsSeokowZFN3CZ64IvEqcmmkVe89OPXc7ldAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/template": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.27.2.tgz",
      "integrity": "sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/parser": "^7.27.2",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.28.5.tgz",
      "integrity": "sha512-TCCj4t55U90khlYkVV/0TfkJkAkUg3jZFA3Neb7unZT8CPok7iiRfaX0F+WnqWqt7OxhOn0uBKXCw4lbL8W0aQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-globals": "^7.28.0",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.5",
        "debug": "^4.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.28.5.tgz",
      "integrity": "sha512-qQ5m48eI/MFLQ5PxQj4PFaprjyCTLI37ElWMmNs0K8Lk3dVeOdNpB3ks8jc7yM5CDmVC73eMVk/trk3fgmrUpA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.28.5"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@esbuild/aix-ppc64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.21.5.tgz",
      "integrity": "sha512-1SDgH6ZSPTlggy1yI6+Dbkiz8xzpHJEVAlF/AM1tHPLsf5STom9rwtjE4hKAF20FfXXNTFqEYXyJNWh1GiZedQ==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "aix"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/android-arm": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.21.5.tgz",
      "integrity": "sha512-vCPvzSjpPHEi1siZdlvAlsPxXl7WbOVUBBAowWug4rJHb68Ox8KualB+1ocNvT5fjv6wpkX6o/iEpbDrf68zcg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/android-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.21.5.tgz",
      "integrity": "sha512-c0uX9VAUBQ7dTDCjq+wdyGLowMdtR/GoC2U5IYk/7D1H1JYC0qseD7+11iMP2mRLN9RcCMRcjC4YMclCzGwS/A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/android-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.21.5.tgz",
      "integrity": "sha512-D7aPRUUNHRBwHxzxRvp856rjUHRFW1SdQATKXH2hqA0kAZb1hKmi02OpYRacl0TxIGz/ZmXWlbZgjwWYaCakTA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/darwin-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.21.5.tgz",
      "integrity": "sha512-DwqXqZyuk5AiWWf3UfLiRDJ5EDd49zg6O9wclZ7kUMv2WRFr4HKjXp/5t8JZ11QbQfUS6/cRCKGwYhtNAY88kQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/darwin-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.21.5.tgz",
      "integrity": "sha512-se/JjF8NlmKVG4kNIuyWMV/22ZaerB+qaSi5MdrXtd6R08kvs2qCN4C09miupktDitvh8jRFflwGFBQcxZRjbw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/freebsd-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.21.5.tgz",
      "integrity": "sha512-5JcRxxRDUJLX8JXp/wcBCy3pENnCgBR9bN6JsY4OmhfUtIHe3ZW0mawA7+RDAcMLrMIZaf03NlQiX9DGyB8h4g==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/freebsd-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.21.5.tgz",
      "integrity": "sha512-J95kNBj1zkbMXtHVH29bBriQygMXqoVQOQYA+ISs0/2l3T9/kj42ow2mpqerRBxDJnmkUDCaQT/dfNXWX/ZZCQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-arm": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.21.5.tgz",
      "integrity": "sha512-bPb5AHZtbeNGjCKVZ9UGqGwo8EUu4cLq68E95A53KlxAPRmUyYv2D6F0uUI65XisGOL1hBP5mTronbgo+0bFcA==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.21.5.tgz",
      "integrity": "sha512-ibKvmyYzKsBeX8d8I7MH/TMfWDXBF3db4qM6sy+7re0YXya+K1cem3on9XgdT2EQGMu4hQyZhan7TeQ8XkGp4Q==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-ia32": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.21.5.tgz",
      "integrity": "sha512-YvjXDqLRqPDl2dvRODYmmhz4rPeVKYvppfGYKSNGdyZkA01046pLWyRKKI3ax8fbJoK5QbxblURkwK/MWY18Tg==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-loong64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.21.5.tgz",
      "integrity": "sha512-uHf1BmMG8qEvzdrzAqg2SIG/02+4/DHB6a9Kbya0XDvwDEKCoC8ZRWI5JJvNdUjtciBGFQ5PuBlpEOXQj+JQSg==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-mips64el": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.21.5.tgz",
      "integrity": "sha512-IajOmO+KJK23bj52dFSNCMsz1QP1DqM6cwLUv3W1QwyxkyIWecfafnI555fvSGqEKwjMXVLokcV5ygHW5b3Jbg==",
      "cpu": [
        "mips64el"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-ppc64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.21.5.tgz",
      "integrity": "sha512-1hHV/Z4OEfMwpLO8rp7CvlhBDnjsC3CttJXIhBi+5Aj5r+MBvy4egg7wCbe//hSsT+RvDAG7s81tAvpL2XAE4w==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-riscv64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.21.5.tgz",
      "integrity": "sha512-2HdXDMd9GMgTGrPWnJzP2ALSokE/0O5HhTUvWIbD3YdjME8JwvSCnNGBnTThKGEB91OZhzrJ4qIIxk/SBmyDDA==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-s390x": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.21.5.tgz",
      "integrity": "sha512-zus5sxzqBJD3eXxwvjN1yQkRepANgxE9lgOW2qLnmr8ikMTphkjgXu1HR01K4FJg8h1kEEDAqDcZQtbrRnB41A==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.21.5.tgz",
      "integrity": "sha512-1rYdTpyv03iycF1+BhzrzQJCdOuAOtaqHTWJZCWvijKD2N5Xu0TtVC8/+1faWqcP9iBCWOmjmhoH94dH82BxPQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/netbsd-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.21.5.tgz",
      "integrity": "sha512-Woi2MXzXjMULccIwMnLciyZH4nCIMpWQAs049KEeMvOcNADVxo0UBIQPfSmxB3CWKedngg7sWZdLvLczpe0tLg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/openbsd-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.21.5.tgz",
      "integrity": "sha512-HLNNw99xsvx12lFBUwoT8EVCsSvRNDVxNpjZ7bPn947b8gJPzeHWyNVhFsaerc0n3TsbOINvRP2byTZ5LKezow==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/sunos-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.21.5.tgz",
      "integrity": "sha512-6+gjmFpfy0BHU5Tpptkuh8+uw3mnrvgs+dSPQXQOv3ekbordwnzTVEb4qnIvQcYXq6gzkyTnoZ9dZG+D4garKg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "sunos"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/win32-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.21.5.tgz",
      "integrity": "sha512-Z0gOTd75VvXqyq7nsl93zwahcTROgqvuAcYDUr+vOv8uHhNSKROyU961kgtCD1e95IqPKSQKH7tBTslnS3tA8A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/win32-ia32": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.21.5.tgz",
      "integrity": "sha512-SWXFF1CL2RVNMaVs+BBClwtfZSvDgtL//G/smwAc5oVK/UPu2Gu9tIaRgFmYFFKrmg3SyAjSrElf0TiJ1v8fYA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/win32-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.21.5.tgz",
      "integrity": "sha512-tQd/1efJuzPC6rCFwEvLtci/xNFcTZknmXs98FYDfGE4wP9ClFV98nyKrzJKVPMhdDnjzLhdUyMX4PsQAPjwIw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.9.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.9.0.tgz",
      "integrity": "sha512-ayVFHdtZ+hsq1t2Dy24wCmGXGe4q9Gu3smhLYALJrr473ZH27MsnSL+LKUlimp4BWJqMDMLmPpx/Q9R3OAlL4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eslint-visitor-keys": "^3.4.3"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.12.2",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.2.tgz",
      "integrity": "sha512-EriSTlt5OC9/7SXkRSCAhfSxxoSUgBm33OH+IkwbdpgoqsSsUg7y3uh+IICI/Qg4BBWr3U2i39RpmycbxMq4ew==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "2.1.4",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-2.1.4.tgz",
      "integrity": "sha512-269Z39MS6wVJtsoUl10L60WdkhJVdPG24Q4eZTH3nnF6lpvSShEK3wQjDX9JRWAUPvPh7COouPpU9IrqaZFvtQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^9.6.0",
        "globals": "^13.19.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.0",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/@eslint/js": {
      "version": "8.57.1",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-8.57.1.tgz",
      "integrity": "sha512-d9zaMRSTIKDLhctzH12MtXvJKSSUhaHcjV+2Z+GK+EEY7XKpP5yR4x+N3TAcHTcu963nIr+TMcCb4DBCYX1z6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      }
    },
    "node_modules/@firebase/analytics": {
      "version": "0.10.8",
      "resolved": "https://registry.npmjs.org/@firebase/analytics/-/analytics-0.10.8.tgz",
      "integrity": "sha512-CVnHcS4iRJPqtIDc411+UmFldk0ShSK3OB+D0bKD8Ck5Vro6dbK5+APZpkuWpbfdL359DIQUnAaMLE+zs/PVyA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/installations": "0.6.9",
        "@firebase/logger": "0.4.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/analytics-compat": {
      "version": "0.2.14",
      "resolved": "https://registry.npmjs.org/@firebase/analytics-compat/-/analytics-compat-0.2.14.tgz",
      "integrity": "sha512-unRVY6SvRqfNFIAA/kwl4vK+lvQAL2HVcgu9zTrUtTyYDmtIt/lOuHJynBMYEgLnKm39YKBDhtqdapP2e++ASw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/analytics": "0.10.8",
        "@firebase/analytics-types": "0.8.2",
        "@firebase/component": "0.6.9",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/analytics-types": {
      "version": "0.8.2",
      "resolved": "https://registry.npmjs.org/@firebase/analytics-types/-/analytics-types-0.8.2.tgz",
      "integrity": "sha512-EnzNNLh+9/sJsimsA/FGqzakmrAUKLeJvjRHlg8df1f97NLUlFidk9600y0ZgWOp3CAxn6Hjtk+08tixlUOWyw==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/app": {
      "version": "0.10.13",
      "resolved": "https://registry.npmjs.org/@firebase/app/-/app-0.10.13.tgz",
      "integrity": "sha512-OZiDAEK/lDB6xy/XzYAyJJkaDqmQ+BCtOEPLqFvxWKUz5JbBmej7IiiRHdtiIOD/twW7O5AxVsfaaGA/V1bNsA==",
      "license": "Apache-2.0",
      "peer": true,
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/logger": "0.4.2",
        "@firebase/util": "1.10.0",
        "idb": "7.1.1",
        "tslib": "^2.1.0"
      }
    },
    "node_modules/@firebase/app-check": {
      "version": "0.8.8",
      "resolved": "https://registry.npmjs.org/@firebase/app-check/-/app-check-0.8.8.tgz",
      "integrity": "sha512-O49RGF1xj7k6BuhxGpHmqOW5hqBIAEbt2q6POW0lIywx7emYtzPDeQI+ryQpC4zbKX646SoVZ711TN1DBLNSOQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/logger": "0.4.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/app-check-compat": {
      "version": "0.3.15",
      "resolved": "https://registry.npmjs.org/@firebase/app-check-compat/-/app-check-compat-0.3.15.tgz",
      "integrity": "sha512-zFIvIFFNqDXpOT2huorz9cwf56VT3oJYRFjSFYdSbGYEJYEaXjLJbfC79lx/zjx4Fh+yuN8pry3TtvwaevrGbg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-check": "0.8.8",
        "@firebase/app-check-types": "0.5.2",
        "@firebase/component": "0.6.9",
        "@firebase/logger": "0.4.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/app-check-interop-types": {
      "version": "0.3.2",
      "resolved": "https://registry.npmjs.org/@firebase/app-check-interop-types/-/app-check-interop-types-0.3.2.tgz",
      "integrity": "sha512-LMs47Vinv2HBMZi49C09dJxp0QT5LwDzFaVGf/+ITHe3BlIhUiLNttkATSXplc89A2lAaeTqjgqVkiRfUGyQiQ==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/app-check-types": {
      "version": "0.5.2",
      "resolved": "https://registry.npmjs.org/@firebase/app-check-types/-/app-check-types-0.5.2.tgz",
      "integrity": "sha512-FSOEzTzL5bLUbD2co3Zut46iyPWML6xc4x+78TeaXMSuJap5QObfb+rVvZJtla3asN4RwU7elaQaduP+HFizDA==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/app-compat": {
      "version": "0.2.43",
      "resolved": "https://registry.npmjs.org/@firebase/app-compat/-/app-compat-0.2.43.tgz",
      "integrity": "sha512-HM96ZyIblXjAC7TzE8wIk2QhHlSvksYkQ4Ukh1GmEenzkucSNUmUX4QvoKrqeWsLEQ8hdcojABeCV8ybVyZmeg==",
      "license": "Apache-2.0",
      "peer": true,
      "dependencies": {
        "@firebase/app": "0.10.13",
        "@firebase/component": "0.6.9",
        "@firebase/logger": "0.4.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      }
    },
    "node_modules/@firebase/app-types": {
      "version": "0.9.2",
      "resolved": "https://registry.npmjs.org/@firebase/app-types/-/app-types-0.9.2.tgz",
      "integrity": "sha512-oMEZ1TDlBz479lmABwWsWjzHwheQKiAgnuKxE0pz0IXCVx7/rtlkx1fQ6GfgK24WCrxDKMplZrT50Kh04iMbXQ==",
      "license": "Apache-2.0",
      "peer": true
    },
    "node_modules/@firebase/auth-compat": {
      "version": "0.5.14",
      "resolved": "https://registry.npmjs.org/@firebase/auth-compat/-/auth-compat-0.5.14.tgz",
      "integrity": "sha512-2eczCSqBl1KUPJacZlFpQayvpilg3dxXLy9cSMTKtQMTQSmondUtPI47P3ikH3bQAXhzKLOE+qVxJ3/IRtu9pw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/auth": "1.7.9",
        "@firebase/auth-types": "0.12.2",
        "@firebase/component": "0.6.9",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0",
        "undici": "6.19.7"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/auth-compat/node_modules/@firebase/auth": {
      "version": "1.7.9",
      "resolved": "https://registry.npmjs.org/@firebase/auth/-/auth-1.7.9.tgz",
      "integrity": "sha512-yLD5095kVgDw965jepMyUrIgDklD6qH/BZNHeKOgvu7pchOKNjVM+zQoOVYJIKWMWOWBq8IRNVU6NXzBbozaJg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/logger": "0.4.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0",
        "undici": "6.19.7"
      },
      "peerDependencies": {
        "@firebase/app": "0.x",
        "@react-native-async-storage/async-storage": "^1.18.1"
      },
      "peerDependenciesMeta": {
        "@react-native-async-storage/async-storage": {
          "optional": true
        }
      }
    },
    "node_modules/@firebase/auth-interop-types": {
      "version": "0.2.3",
      "resolved": "https://registry.npmjs.org/@firebase/auth-interop-types/-/auth-interop-types-0.2.3.tgz",
      "integrity": "sha512-Fc9wuJGgxoxQeavybiuwgyi+0rssr76b+nHpj+eGhXFYAdudMWyfBHvFL/I5fEHniUM/UQdFzi9VXJK2iZF7FQ==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/auth-types": {
      "version": "0.12.2",
      "resolved": "https://registry.npmjs.org/@firebase/auth-types/-/auth-types-0.12.2.tgz",
      "integrity": "sha512-qsEBaRMoGvHO10unlDJhaKSuPn4pyoTtlQuP1ghZfzB6rNQPuhp/N/DcFZxm9i4v0SogjCbf9reWupwIvfmH6w==",
      "license": "Apache-2.0",
      "peerDependencies": {
        "@firebase/app-types": "0.x",
        "@firebase/util": "1.x"
      }
    },
    "node_modules/@firebase/component": {
      "version": "0.6.9",
      "resolved": "https://registry.npmjs.org/@firebase/component/-/component-0.6.9.tgz",
      "integrity": "sha512-gm8EUEJE/fEac86AvHn8Z/QW8BvR56TBw3hMW0O838J/1mThYQXAIQBgUv75EqlCZfdawpWLrKt1uXvp9ciK3Q==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      }
    },
    "node_modules/@firebase/data-connect": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/@firebase/data-connect/-/data-connect-0.1.0.tgz",
      "integrity": "sha512-vSe5s8dY13ilhLnfY0eYRmQsdTbH7PUFZtBbqU6JVX/j8Qp9A6G5gG6//ulbX9/1JFOF1IWNOne9c8S/DOCJaQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/auth-interop-types": "0.2.3",
        "@firebase/component": "0.6.9",
        "@firebase/logger": "0.4.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/database": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/@firebase/database/-/database-1.0.8.tgz",
      "integrity": "sha512-dzXALZeBI1U5TXt6619cv0+tgEhJiwlUtQ55WNZY7vGAjv7Q1QioV969iYwt1AQQ0ovHnEW0YW9TiBfefLvErg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-check-interop-types": "0.3.2",
        "@firebase/auth-interop-types": "0.2.3",
        "@firebase/component": "0.6.9",
        "@firebase/logger": "0.4.2",
        "@firebase/util": "1.10.0",
        "faye-websocket": "0.11.4",
        "tslib": "^2.1.0"
      }
    },
    "node_modules/@firebase/database-compat": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/@firebase/database-compat/-/database-compat-1.0.8.tgz",
      "integrity": "sha512-OpeWZoPE3sGIRPBKYnW9wLad25RaWbGyk7fFQe4xnJQKRzlynWeFBSRRAoLE2Old01WXwskUiucNqUUVlFsceg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/database": "1.0.8",
        "@firebase/database-types": "1.0.5",
        "@firebase/logger": "0.4.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      }
    },
    "node_modules/@firebase/database-types": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/@firebase/database-types/-/database-types-1.0.5.tgz",
      "integrity": "sha512-fTlqCNwFYyq/C6W7AJ5OCuq5CeZuBEsEwptnVxlNPkWCo5cTTyukzAHRSO/jaQcItz33FfYrrFk1SJofcu2AaQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-types": "0.9.2",
        "@firebase/util": "1.10.0"
      }
    },
    "node_modules/@firebase/firestore": {
      "version": "4.7.3",
      "resolved": "https://registry.npmjs.org/@firebase/firestore/-/firestore-4.7.3.tgz",
      "integrity": "sha512-NwVU+JPZ/3bhvNSJMCSzfcBZZg8SUGyzZ2T0EW3/bkUeefCyzMISSt/TTIfEHc8cdyXGlMqfGe3/62u9s74UEg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/logger": "0.4.2",
        "@firebase/util": "1.10.0",
        "@firebase/webchannel-wrapper": "1.0.1",
        "@grpc/grpc-js": "~1.9.0",
        "@grpc/proto-loader": "^0.7.8",
        "tslib": "^2.1.0",
        "undici": "6.19.7"
      },
      "engines": {
        "node": ">=10.10.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/firestore-compat": {
      "version": "0.3.38",
      "resolved": "https://registry.npmjs.org/@firebase/firestore-compat/-/firestore-compat-0.3.38.tgz",
      "integrity": "sha512-GoS0bIMMkjpLni6StSwRJarpu2+S5m346Na7gr9YZ/BZ/W3/8iHGNr9PxC+f0rNZXqS4fGRn88pICjrZEgbkqQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/firestore": "4.7.3",
        "@firebase/firestore-types": "3.0.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/firestore-types": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/@firebase/firestore-types/-/firestore-types-3.0.2.tgz",
      "integrity": "sha512-wp1A+t5rI2Qc/2q7r2ZpjUXkRVPtGMd6zCLsiWurjsQpqPgFin3AhNibKcIzoF2rnToNa/XYtyWXuifjOOwDgg==",
      "license": "Apache-2.0",
      "peerDependencies": {
        "@firebase/app-types": "0.x",
        "@firebase/util": "1.x"
      }
    },
    "node_modules/@firebase/functions": {
      "version": "0.11.8",
      "resolved": "https://registry.npmjs.org/@firebase/functions/-/functions-0.11.8.tgz",
      "integrity": "sha512-Lo2rTPDn96naFIlSZKVd1yvRRqqqwiJk7cf9TZhUerwnPKgBzXy+aHE22ry+6EjCaQusUoNai6mU6p+G8QZT1g==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-check-interop-types": "0.3.2",
        "@firebase/auth-interop-types": "0.2.3",
        "@firebase/component": "0.6.9",
        "@firebase/messaging-interop-types": "0.2.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0",
        "undici": "6.19.7"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/functions-compat": {
      "version": "0.3.14",
      "resolved": "https://registry.npmjs.org/@firebase/functions-compat/-/functions-compat-0.3.14.tgz",
      "integrity": "sha512-dZ0PKOKQFnOlMfcim39XzaXonSuPPAVuzpqA4ONTIdyaJK/OnBaIEVs/+BH4faa1a2tLeR+Jy15PKqDRQoNIJw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/functions": "0.11.8",
        "@firebase/functions-types": "0.6.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/functions-types": {
      "version": "0.6.2",
      "resolved": "https://registry.npmjs.org/@firebase/functions-types/-/functions-types-0.6.2.tgz",
      "integrity": "sha512-0KiJ9lZ28nS2iJJvimpY4nNccV21rkQyor5Iheu/nq8aKXJqtJdeSlZDspjPSBBiHRzo7/GMUttegnsEITqR+w==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/installations": {
      "version": "0.6.9",
      "resolved": "https://registry.npmjs.org/@firebase/installations/-/installations-0.6.9.tgz",
      "integrity": "sha512-hlT7AwCiKghOX3XizLxXOsTFiFCQnp/oj86zp1UxwDGmyzsyoxtX+UIZyVyH/oBF5+XtblFG9KZzZQ/h+dpy+Q==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/util": "1.10.0",
        "idb": "7.1.1",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/installations-compat": {
      "version": "0.2.9",
      "resolved": "https://registry.npmjs.org/@firebase/installations-compat/-/installations-compat-0.2.9.tgz",
      "integrity": "sha512-2lfdc6kPXR7WaL4FCQSQUhXcPbI7ol3wF+vkgtU25r77OxPf8F/VmswQ7sgIkBBWtymn5ZF20TIKtnOj9rjb6w==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/installations": "0.6.9",
        "@firebase/installations-types": "0.5.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/installations-types": {
      "version": "0.5.2",
      "resolved": "https://registry.npmjs.org/@firebase/installations-types/-/installations-types-0.5.2.tgz",
      "integrity": "sha512-que84TqGRZJpJKHBlF2pkvc1YcXrtEDOVGiDjovP/a3s6W4nlbohGXEsBJo0JCeeg/UG9A+DEZVDUV9GpklUzA==",
      "license": "Apache-2.0",
      "peerDependencies": {
        "@firebase/app-types": "0.x"
      }
    },
    "node_modules/@firebase/logger": {
      "version": "0.4.2",
      "resolved": "https://registry.npmjs.org/@firebase/logger/-/logger-0.4.2.tgz",
      "integrity": "sha512-Q1VuA5M1Gjqrwom6I6NUU4lQXdo9IAQieXlujeHZWvRt1b7qQ0KwBaNAjgxG27jgF9/mUwsNmO8ptBCGVYhB0A==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.1.0"
      }
    },
    "node_modules/@firebase/messaging": {
      "version": "0.12.12",
      "resolved": "https://registry.npmjs.org/@firebase/messaging/-/messaging-0.12.12.tgz",
      "integrity": "sha512-6q0pbzYBJhZEtUoQx7hnPhZvAbuMNuBXKQXOx2YlWhSrlv9N1m0ZzlNpBbu/ItTzrwNKTibdYzUyaaxdWLg+4w==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/installations": "0.6.9",
        "@firebase/messaging-interop-types": "0.2.2",
        "@firebase/util": "1.10.0",
        "idb": "7.1.1",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/messaging-compat": {
      "version": "0.2.12",
      "resolved": "https://registry.npmjs.org/@firebase/messaging-compat/-/messaging-compat-0.2.12.tgz",
      "integrity": "sha512-pKsiUVZrbmRgdImYqhBNZlkKJbqjlPkVdQRZGRbkTyX4OSGKR0F/oJeCt1a8jEg5UnBp4fdVwSWSp4DuCovvEQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/messaging": "0.12.12",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/messaging-interop-types": {
      "version": "0.2.2",
      "resolved": "https://registry.npmjs.org/@firebase/messaging-interop-types/-/messaging-interop-types-0.2.2.tgz",
      "integrity": "sha512-l68HXbuD2PPzDUOFb3aG+nZj5KA3INcPwlocwLZOzPp9rFM9yeuI9YLl6DQfguTX5eAGxO0doTR+rDLDvQb5tA==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/performance": {
      "version": "0.6.9",
      "resolved": "https://registry.npmjs.org/@firebase/performance/-/performance-0.6.9.tgz",
      "integrity": "sha512-PnVaak5sqfz5ivhua+HserxTJHtCar/7zM0flCX6NkzBNzJzyzlH4Hs94h2Il0LQB99roBqoE5QT1JqWqcLJHQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/installations": "0.6.9",
        "@firebase/logger": "0.4.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/performance-compat": {
      "version": "0.2.9",
      "resolved": "https://registry.npmjs.org/@firebase/performance-compat/-/performance-compat-0.2.9.tgz",
      "integrity": "sha512-dNl95IUnpsu3fAfYBZDCVhXNkASE0uo4HYaEPd2/PKscfTvsgqFAOxfAXzBEDOnynDWiaGUnb5M1O00JQ+3FXA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/logger": "0.4.2",
        "@firebase/performance": "0.6.9",
        "@firebase/performance-types": "0.2.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/performance-types": {
      "version": "0.2.2",
      "resolved": "https://registry.npmjs.org/@firebase/performance-types/-/performance-types-0.2.2.tgz",
      "integrity": "sha512-gVq0/lAClVH5STrIdKnHnCo2UcPLjJlDUoEB/tB4KM+hAeHUxWKnpT0nemUPvxZ5nbdY/pybeyMe8Cs29gEcHA==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/remote-config": {
      "version": "0.4.9",
      "resolved": "https://registry.npmjs.org/@firebase/remote-config/-/remote-config-0.4.9.tgz",
      "integrity": "sha512-EO1NLCWSPMHdDSRGwZ73kxEEcTopAxX1naqLJFNApp4hO8WfKfmEpmjxmP5TrrnypjIf2tUkYaKsfbEA7+AMmA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/installations": "0.6.9",
        "@firebase/logger": "0.4.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/remote-config-compat": {
      "version": "0.2.9",
      "resolved": "https://registry.npmjs.org/@firebase/remote-config-compat/-/remote-config-compat-0.2.9.tgz",
      "integrity": "sha512-AxzGpWfWFYejH2twxfdOJt5Cfh/ATHONegTd/a0p5flEzsD5JsxXgfkFToop+mypEL3gNwawxrxlZddmDoNxyA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/logger": "0.4.2",
        "@firebase/remote-config": "0.4.9",
        "@firebase/remote-config-types": "0.3.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/remote-config-types": {
      "version": "0.3.2",
      "resolved": "https://registry.npmjs.org/@firebase/remote-config-types/-/remote-config-types-0.3.2.tgz",
      "integrity": "sha512-0BC4+Ud7y2aPTyhXJTMTFfrGGLqdYXrUB9sJVAB8NiqJswDTc4/2qrE/yfUbnQJhbSi6ZaTTBKyG3n1nplssaA==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/storage": {
      "version": "0.13.2",
      "resolved": "https://registry.npmjs.org/@firebase/storage/-/storage-0.13.2.tgz",
      "integrity": "sha512-fxuJnHshbhVwuJ4FuISLu+/76Aby2sh+44ztjF2ppoe0TELIDxPW6/r1KGlWYt//AD0IodDYYA8ZTN89q8YqUw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0",
        "undici": "6.19.7"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/storage-compat": {
      "version": "0.3.12",
      "resolved": "https://registry.npmjs.org/@firebase/storage-compat/-/storage-compat-0.3.12.tgz",
      "integrity": "sha512-hA4VWKyGU5bWOll+uwzzhEMMYGu9PlKQc1w4DWxB3aIErWYzonrZjF0icqNQZbwKNIdh8SHjZlFeB2w6OSsjfg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/storage": "0.13.2",
        "@firebase/storage-types": "0.8.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/storage-types": {
      "version": "0.8.2",
      "resolved": "https://registry.npmjs.org/@firebase/storage-types/-/storage-types-0.8.2.tgz",
      "integrity": "sha512-0vWu99rdey0g53lA7IShoA2Lol1jfnPovzLDUBuon65K7uKG9G+L5uO05brD9pMw+l4HRFw23ah3GwTGpEav6g==",
      "license": "Apache-2.0",
      "peerDependencies": {
        "@firebase/app-types": "0.x",
        "@firebase/util": "1.x"
      }
    },
    "node_modules/@firebase/util": {
      "version": "1.10.0",
      "resolved": "https://registry.npmjs.org/@firebase/util/-/util-1.10.0.tgz",
      "integrity": "sha512-xKtx4A668icQqoANRxyDLBLz51TAbDP9KRfpbKGxiCAW346d0BeJe5vN6/hKxxmWwnZ0mautyv39JxviwwQMOQ==",
      "license": "Apache-2.0",
      "peer": true,
      "dependencies": {
        "tslib": "^2.1.0"
      }
    },
    "node_modules/@firebase/vertexai-preview": {
      "version": "0.0.4",
      "resolved": "https://registry.npmjs.org/@firebase/vertexai-preview/-/vertexai-preview-0.0.4.tgz",
      "integrity": "sha512-EBSqyu9eg8frQlVU9/HjKtHN7odqbh9MtAcVz3WwHj4gLCLOoN9F/o+oxlq3CxvFrd3CNTZwu6d2mZtVlEInng==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-check-interop-types": "0.3.2",
        "@firebase/component": "0.6.9",
        "@firebase/logger": "0.4.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x",
        "@firebase/app-types": "0.x"
      }
    },
    "node_modules/@firebase/webchannel-wrapper": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@firebase/webchannel-wrapper/-/webchannel-wrapper-1.0.1.tgz",
      "integrity": "sha512-jmEnr/pk0yVkA7mIlHNnxCi+wWzOFUg0WyIotgkKAb2u1J7fAeDBcVNSTjTihbAYNusCLQdW5s9IJ5qwnEufcQ==",
      "license": "Apache-2.0"
    },
    "node_modules/@grpc/grpc-js": {
      "version": "1.9.15",
      "resolved": "https://registry.npmjs.org/@grpc/grpc-js/-/grpc-js-1.9.15.tgz",
      "integrity": "sha512-nqE7Hc0AzI+euzUwDAy0aY5hCp10r734gMGRdU+qOPX0XSceI2ULrcXB5U2xSc5VkWwalCj4M7GzCAygZl2KoQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@grpc/proto-loader": "^0.7.8",
        "@types/node": ">=12.12.47"
      },
      "engines": {
        "node": "^8.13.0 || >=10.10.0"
      }
    },
    "node_modules/@grpc/proto-loader": {
      "version": "0.7.15",
      "resolved": "https://registry.npmjs.org/@grpc/proto-loader/-/proto-loader-0.7.15.tgz",
      "integrity": "sha512-tMXdRCfYVixjuFK+Hk0Q1s38gV9zDiDJfWL3h1rv4Qc39oILCu1TRTDt7+fGUI8K4G1Fj125Hx/ru3azECWTyQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "lodash.camelcase": "^4.3.0",
        "long": "^5.0.0",
        "protobufjs": "^7.2.5",
        "yargs": "^17.7.2"
      },
      "bin": {
        "proto-loader-gen-types": "build/bin/proto-loader-gen-types.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/@humanwhocodes/config-array": {
      "version": "0.13.0",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/config-array/-/config-array-0.13.0.tgz",
      "integrity": "sha512-DZLEEqFWQFiyK6h5YIeynKx7JlvCYWL0cImfSRXZ9l4Sg2efkFGTuFf6vzXjK1cq6IYkU+Eg/JizXw+TD2vRNw==",
      "deprecated": "Use @eslint/config-array instead",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@humanwhocodes/object-schema": "^2.0.3",
        "debug": "^4.3.1",
        "minimatch": "^3.0.5"
      },
      "engines": {
        "node": ">=10.10.0"
      }
    },
    "node_modules/@humanwhocodes/config-array/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/@humanwhocodes/config-array/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/object-schema": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/object-schema/-/object-schema-2.0.3.tgz",
      "integrity": "sha512-93zYdMES/c1D69yZiKDBj0V24vqNzB/koF26KPaagAfd3P/4gUlh3Dys5ogAK+Exi9QyzlD8x/08Zt7wIKcDcA==",
      "deprecated": "Use @eslint/object-schema instead",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.13",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/remapping": {
      "version": "2.3.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.31",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@nodelib/fs.scandir": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "2.0.5",
        "run-parallel": "^1.1.9"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.stat": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.walk": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.scandir": "2.1.5",
        "fastq": "^1.6.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@protobufjs/aspromise": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/aspromise/-/aspromise-1.1.2.tgz",
      "integrity": "sha512-j+gKExEuLmKwvz3OgROXtrJ2UG2x8Ch2YZUxahh+s1F2HZ+wAceUNLkvy6zKCPVRkU++ZWQrdxsUeQXmcg4uoQ==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/base64": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/base64/-/base64-1.1.2.tgz",
      "integrity": "sha512-AZkcAA5vnN/v4PDqKyMR5lx7hZttPDgClv83E//FMNhR2TMcLUhfRUBHCmSl0oi9zMgDDqRUJkSxO3wm85+XLg==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/codegen": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/@protobufjs/codegen/-/codegen-2.0.4.tgz",
      "integrity": "sha512-YyFaikqM5sH0ziFZCN3xDC7zeGaB/d0IUb9CATugHWbd1FRFwWwt4ld4OYMPWu5a3Xe01mGAULCdqhMlPl29Jg==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/eventemitter": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/eventemitter/-/eventemitter-1.1.0.tgz",
      "integrity": "sha512-j9ednRT81vYJ9OfVuXG6ERSTdEL1xVsNgqpkxMsbIabzSo3goCjDIveeGv5d03om39ML71RdmrGNjG5SReBP/Q==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/fetch": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/fetch/-/fetch-1.1.0.tgz",
      "integrity": "sha512-lljVXpqXebpsijW71PZaCYeIcE5on1w5DlQy5WH6GLbFryLUrBD4932W/E2BSpfRJWseIL4v/KPgBFxDOIdKpQ==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "@protobufjs/aspromise": "^1.1.1",
        "@protobufjs/inquire": "^1.1.0"
      }
    },
    "node_modules/@protobufjs/float": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/float/-/float-1.0.2.tgz",
      "integrity": "sha512-Ddb+kVXlXst9d+R9PfTIxh1EdNkgoRe5tOX6t01f1lYWOvJnSPDBlG241QLzcyPdoNTsblLUdujGSE4RzrTZGQ==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/inquire": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/inquire/-/inquire-1.1.0.tgz",
      "integrity": "sha512-kdSefcPdruJiFMVSbn801t4vFK7KB/5gd2fYvrxhuJYg8ILrmn9SKSX2tZdV6V+ksulWqS7aXjBcRXl3wHoD9Q==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/path": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/path/-/path-1.1.2.tgz",
      "integrity": "sha512-6JOcJ5Tm08dOHAbdR3GrvP+yUUfkjG5ePsHYczMFLq3ZmMkAD98cDgcT2iA1lJ9NVwFd4tH/iSSoe44YWkltEA==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/pool": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/pool/-/pool-1.1.0.tgz",
      "integrity": "sha512-0kELaGSIDBKvcgS4zkjz1PeddatrjYcmMWOlAuAPwAeccUrPHdUqo/J6LiymHHEiJT5NrF1UVwxY14f+fy4WQw==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/utf8": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/utf8/-/utf8-1.1.0.tgz",
      "integrity": "sha512-Vvn3zZrhQZkkBE8LSuW3em98c0FwgO4nxzv6OdSxPKJIEKY2bGbHn+mhGIPerzI4twdxaP8/0+06HBpwf345Lw==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@rolldown/pluginutils": {
      "version": "1.0.0-beta.27",
      "resolved": "https://registry.npmjs.org/@rolldown/pluginutils/-/pluginutils-1.0.0-beta.27.tgz",
      "integrity": "sha512-+d0F4MKMCbeVUJwG96uQ4SgAznZNSq93I3V+9NHA4OpvqG8mRCpGdKmK8l/dl02h2CCDHwW2FqilnTyDcAnqjA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@rollup/rollup-android-arm-eabi": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.52.5.tgz",
      "integrity": "sha512-8c1vW4ocv3UOMp9K+gToY5zL2XiiVw3k7f1ksf4yO1FlDFQ1C2u72iACFnSOceJFsWskc2WZNqeRhFRPzv+wtQ==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-android-arm64": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.52.5.tgz",
      "integrity": "sha512-mQGfsIEFcu21mvqkEKKu2dYmtuSZOBMmAl5CFlPGLY94Vlcm+zWApK7F/eocsNzp8tKmbeBP8yXyAbx0XHsFNA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-darwin-arm64": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.52.5.tgz",
      "integrity": "sha512-takF3CR71mCAGA+v794QUZ0b6ZSrgJkArC+gUiG6LB6TQty9T0Mqh3m2ImRBOxS2IeYBo4lKWIieSvnEk2OQWA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-darwin-x64": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.52.5.tgz",
      "integrity": "sha512-W901Pla8Ya95WpxDn//VF9K9u2JbocwV/v75TE0YIHNTbhqUTv9w4VuQ9MaWlNOkkEfFwkdNhXgcLqPSmHy0fA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-arm64": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.52.5.tgz",
      "integrity": "sha512-QofO7i7JycsYOWxe0GFqhLmF6l1TqBswJMvICnRUjqCx8b47MTo46W8AoeQwiokAx3zVryVnxtBMcGcnX12LvA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-x64": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.52.5.tgz",
      "integrity": "sha512-jr21b/99ew8ujZubPo9skbrItHEIE50WdV86cdSoRkKtmWa+DDr6fu2c/xyRT0F/WazZpam6kk7IHBerSL7LDQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-gnueabihf": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.52.5.tgz",
      "integrity": "sha512-PsNAbcyv9CcecAUagQefwX8fQn9LQ4nZkpDboBOttmyffnInRy8R8dSg6hxxl2Re5QhHBf6FYIDhIj5v982ATQ==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-musleabihf": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.52.5.tgz",
      "integrity": "sha512-Fw4tysRutyQc/wwkmcyoqFtJhh0u31K+Q6jYjeicsGJJ7bbEq8LwPWV/w0cnzOqR2m694/Af6hpFayLJZkG2VQ==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-gnu": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.52.5.tgz",
      "integrity": "sha512-a+3wVnAYdQClOTlyapKmyI6BLPAFYs0JM8HRpgYZQO02rMR09ZcV9LbQB+NL6sljzG38869YqThrRnfPMCDtZg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-musl": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.52.5.tgz",
      "integrity": "sha512-AvttBOMwO9Pcuuf7m9PkC1PUIKsfaAJ4AYhy944qeTJgQOqJYJ9oVl2nYgY7Rk0mkbsuOpCAYSs6wLYB2Xiw0Q==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-loong64-gnu": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loong64-gnu/-/rollup-linux-loong64-gnu-4.52.5.tgz",
      "integrity": "sha512-DkDk8pmXQV2wVrF6oq5tONK6UHLz/XcEVow4JTTerdeV1uqPeHxwcg7aFsfnSm9L+OO8WJsWotKM2JJPMWrQtA==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-ppc64-gnu": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-ppc64-gnu/-/rollup-linux-ppc64-gnu-4.52.5.tgz",
      "integrity": "sha512-W/b9ZN/U9+hPQVvlGwjzi+Wy4xdoH2I8EjaCkMvzpI7wJUs8sWJ03Rq96jRnHkSrcHTpQe8h5Tg3ZzUPGauvAw==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-gnu": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.52.5.tgz",
      "integrity": "sha512-sjQLr9BW7R/ZiXnQiWPkErNfLMkkWIoCz7YMn27HldKsADEKa5WYdobaa1hmN6slu9oWQbB6/jFpJ+P2IkVrmw==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-musl": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.52.5.tgz",
      "integrity": "sha512-hq3jU/kGyjXWTvAh2awn8oHroCbrPm8JqM7RUpKjalIRWWXE01CQOf/tUNWNHjmbMHg/hmNCwc/Pz3k1T/j/Lg==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-s390x-gnu": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.52.5.tgz",
      "integrity": "sha512-gn8kHOrku8D4NGHMK1Y7NA7INQTRdVOntt1OCYypZPRt6skGbddska44K8iocdpxHTMMNui5oH4elPH4QOLrFQ==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-gnu": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.52.5.tgz",
      "integrity": "sha512-hXGLYpdhiNElzN770+H2nlx+jRog8TyynpTVzdlc6bndktjKWyZyiCsuDAlpd+j+W+WNqfcyAWz9HxxIGfZm1Q==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-musl": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.52.5.tgz",
      "integrity": "sha512-arCGIcuNKjBoKAXD+y7XomR9gY6Mw7HnFBv5Rw7wQRvwYLR7gBAgV7Mb2QTyjXfTveBNFAtPt46/36vV9STLNg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-openharmony-arm64": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-openharmony-arm64/-/rollup-openharmony-arm64-4.52.5.tgz",
      "integrity": "sha512-QoFqB6+/9Rly/RiPjaomPLmR/13cgkIGfA40LHly9zcH1S0bN2HVFYk3a1eAyHQyjs3ZJYlXvIGtcCs5tko9Cw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openharmony"
      ]
    },
    "node_modules/@rollup/rollup-win32-arm64-msvc": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.52.5.tgz",
      "integrity": "sha512-w0cDWVR6MlTstla1cIfOGyl8+qb93FlAVutcor14Gf5Md5ap5ySfQ7R9S/NjNaMLSFdUnKGEasmVnu3lCMqB7w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-ia32-msvc": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.52.5.tgz",
      "integrity": "sha512-Aufdpzp7DpOTULJCuvzqcItSGDH73pF3ko/f+ckJhxQyHtp67rHw3HMNxoIdDMUITJESNE6a8uh4Lo4SLouOUg==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-gnu": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-gnu/-/rollup-win32-x64-gnu-4.52.5.tgz",
      "integrity": "sha512-UGBUGPFp1vkj6p8wCRraqNhqwX/4kNQPS57BCFc8wYh0g94iVIW33wJtQAx3G7vrjjNtRaxiMUylM0ktp/TRSQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-msvc": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.52.5.tgz",
      "integrity": "sha512-TAcgQh2sSkykPRWLrdyy2AiceMckNf5loITqXxFI5VuQjS5tSuw3WlwdN8qv8vzjLAUTvYaH/mVjSFpbkFbpTg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@types/babel__core": {
      "version": "7.20.5",
      "resolved": "https://registry.npmjs.org/@types/babel__core/-/babel__core-7.20.5.tgz",
      "integrity": "sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.20.7",
        "@babel/types": "^7.20.7",
        "@types/babel__generator": "*",
        "@types/babel__template": "*",
        "@types/babel__traverse": "*"
      }
    },
    "node_modules/@types/babel__generator": {
      "version": "7.27.0",
      "resolved": "https://registry.npmjs.org/@types/babel__generator/-/babel__generator-7.27.0.tgz",
      "integrity": "sha512-ufFd2Xi92OAVPYsy+P4n7/U7e68fex0+Ee8gSG9KX7eo084CWiQ4sdxktvdl0bOPupXtVJPY19zk6EwWqUQ8lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__template": {
      "version": "7.4.4",
      "resolved": "https://registry.npmjs.org/@types/babel__template/-/babel__template-7.4.4.tgz",
      "integrity": "sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.1.0",
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__traverse": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@types/babel__traverse/-/babel__traverse-7.28.0.tgz",
      "integrity": "sha512-8PvcXf70gTDZBgt9ptxJ8elBeBjcLOAcOtoO/mPJjtji1+CdGbHgm77om1GrsPxsiE+uXIpNSK64UYaIwQXd4Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.2"
      }
    },
    "node_modules/@types/estree": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
      "integrity": "sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/node": {
      "version": "24.9.2",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-24.9.2.tgz",
      "integrity": "sha512-uWN8YqxXxqFMX2RqGOrumsKeti4LlmIMIyV0lgut4jx7KQBcBiW6vkDtIBvHnHIquwNfJhk8v2OtmO8zXWHfPA==",
      "license": "MIT",
      "dependencies": {
        "undici-types": "~7.16.0"
      }
    },
    "node_modules/@types/prop-types": {
      "version": "15.7.15",
      "resolved": "https://registry.npmjs.org/@types/prop-types/-/prop-types-15.7.15.tgz",
      "integrity": "sha512-F6bEyamV9jKGAFBEmlQnesRPGOQqS2+Uwi0Em15xenOxHaf2hv6L8YCVn3rPdPJOiJfPiCnLIRyvwVaqMY3MIw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/react": {
      "version": "18.3.26",
      "resolved": "https://registry.npmjs.org/@types/react/-/react-18.3.26.tgz",
      "integrity": "sha512-RFA/bURkcKzx/X9oumPG9Vp3D3JUgus/d0b67KB0t5S/raciymilkOa66olh78MUI92QLbEJevO7rvqU/kjwKA==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "@types/prop-types": "*",
        "csstype": "^3.0.2"
      }
    },
    "node_modules/@types/react-dom": {
      "version": "18.3.7",
      "resolved": "https://registry.npmjs.org/@types/react-dom/-/react-dom-18.3.7.tgz",
      "integrity": "sha512-MEe3UeoENYVFXzoXEWsvcpg6ZvlrFNlOQ7EOsvhI3CfAXwzPfO8Qwuxd40nepsYKqyyVQnTdEfv68q91yLcKrQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "^18.0.0"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin": {
      "version": "7.18.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/eslint-plugin/-/eslint-plugin-7.18.0.tgz",
      "integrity": "sha512-94EQTWZ40mzBc42ATNIBimBEDltSJ9RQHCC8vc/PDbxi4k8dVwUAv4o98dk50M1zB+JGFxp43FP7f8+FP8R6Sw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/regexpp": "^4.10.0",
        "@typescript-eslint/scope-manager": "7.18.0",
        "@typescript-eslint/type-utils": "7.18.0",
        "@typescript-eslint/utils": "7.18.0",
        "@typescript-eslint/visitor-keys": "7.18.0",
        "graphemer": "^1.4.0",
        "ignore": "^5.3.1",
        "natural-compare": "^1.4.0",
        "ts-api-utils": "^1.3.0"
      },
      "engines": {
        "node": "^18.18.0 || >=20.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "@typescript-eslint/parser": "^7.0.0",
        "eslint": "^8.56.0"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/parser": {
      "version": "7.18.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/parser/-/parser-7.18.0.tgz",
      "integrity": "sha512-4Z+L8I2OqhZV8qA132M4wNL30ypZGYOQVBfMgxDH/K5UX0PNqTu1c6za9ST5r9+tavvHiTWmBnKzpCJ/GlVFtg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "peer": true,
      "dependencies": {
        "@typescript-eslint/scope-manager": "7.18.0",
        "@typescript-eslint/types": "7.18.0",
        "@typescript-eslint/typescript-estree": "7.18.0",
        "@typescript-eslint/visitor-keys": "7.18.0",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^18.18.0 || >=20.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.56.0"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/scope-manager": {
      "version": "7.18.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-7.18.0.tgz",
      "integrity": "sha512-jjhdIE/FPF2B7Z1uzc6i3oWKbGcHb87Qw7AWj6jmEqNOfDFbJWtjt/XfwCpvNkpGWlcJaog5vTR+VV8+w9JflA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "7.18.0",
        "@typescript-eslint/visitor-keys": "7.18.0"
      },
      "engines": {
        "node": "^18.18.0 || >=20.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/type-utils": {
      "version": "7.18.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/type-utils/-/type-utils-7.18.0.tgz",
      "integrity": "sha512-XL0FJXuCLaDuX2sYqZUUSOJ2sG5/i1AAze+axqmLnSkNEVMVYLF+cbwlB2w8D1tinFuSikHmFta+P+HOofrLeA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/typescript-estree": "7.18.0",
        "@typescript-eslint/utils": "7.18.0",
        "debug": "^4.3.4",
        "ts-api-utils": "^1.3.0"
      },
      "engines": {
        "node": "^18.18.0 || >=20.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.56.0"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/types": {
      "version": "7.18.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-7.18.0.tgz",
      "integrity": "sha512-iZqi+Ds1y4EDYUtlOOC+aUmxnE9xS/yCigkjA7XpTKV6nCBd3Hp/PRGGmdwnfkV2ThMyYldP1wRpm/id99spTQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || >=20.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree": {
      "version": "7.18.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-7.18.0.tgz",
      "integrity": "sha512-aP1v/BSPnnyhMHts8cf1qQ6Q1IFwwRvAQGRvBFkWlo3/lH29OXA3Pts+c10nxRxIBrDnoMqzhgdwVe5f2D6OzA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "@typescript-eslint/types": "7.18.0",
        "@typescript-eslint/visitor-keys": "7.18.0",
        "debug": "^4.3.4",
        "globby": "^11.1.0",
        "is-glob": "^4.0.3",
        "minimatch": "^9.0.4",
        "semver": "^7.6.0",
        "ts-api-utils": "^1.3.0"
      },
      "engines": {
        "node": "^18.18.0 || >=20.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/utils": {
      "version": "7.18.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/utils/-/utils-7.18.0.tgz",
      "integrity": "sha512-kK0/rNa2j74XuHVcoCZxdFBMF+aq/vH83CXAOHieC+2Gis4mF8jJXT5eAfyD3K0sAxtPuwxaIOIOvhwzVDt/kw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.4.0",
        "@typescript-eslint/scope-manager": "7.18.0",
        "@typescript-eslint/types": "7.18.0",
        "@typescript-eslint/typescript-estree": "7.18.0"
      },
      "engines": {
        "node": "^18.18.0 || >=20.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.56.0"
      }
    },
    "node_modules/@typescript-eslint/visitor-keys": {
      "version": "7.18.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-7.18.0.tgz",
      "integrity": "sha512-cDF0/Gf81QpY3xYyJKDV14Zwdmid5+uuENhjH2EqFaF0ni+yAyq/LzMaIJdhNJXZI7uLzwIlA+V7oWoyn6Curg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "7.18.0",
        "eslint-visitor-keys": "^3.4.3"
      },
      "engines": {
        "node": "^18.18.0 || >=20.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@ungap/structured-clone": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/@ungap/structured-clone/-/structured-clone-1.3.0.tgz",
      "integrity": "sha512-WmoN8qaIAo7WTYWbAZuG8PYEhn5fkz7dZrqTBZ7dtt//lL2Gwms1IcnQ5yHqjDfX8Ft5j4YzDM23f87zBfDe9g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/@vitejs/plugin-react": {
      "version": "4.7.0",
      "resolved": "https://registry.npmjs.org/@vitejs/plugin-react/-/plugin-react-4.7.0.tgz",
      "integrity": "sha512-gUu9hwfWvvEDBBmgtAowQCojwZmJ5mcLn3aufeCsitijs3+f2NsrPtlAWIR6OPiqljl96GVCUbLe0HyqIpVaoA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.28.0",
        "@babel/plugin-transform-react-jsx-self": "^7.27.1",
        "@babel/plugin-transform-react-jsx-source": "^7.27.1",
        "@rolldown/pluginutils": "1.0.0-beta.27",
        "@types/babel__core": "^7.20.5",
        "react-refresh": "^0.17.0"
      },
      "engines": {
        "node": "^14.18.0 || >=16.0.0"
      },
      "peerDependencies": {
        "vite": "^4.2.0 || ^5.0.0 || ^6.0.0 || ^7.0.0"
      }
    },
    "node_modules/acorn": {
      "version": "8.15.0",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.15.0.tgz",
      "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "license": "MIT",
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true,
      "license": "Python-2.0"
    },
    "node_modules/array-union": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/array-union/-/array-union-2.1.0.tgz",
      "integrity": "sha512-HGyxoOTYUyCM6stUe6EJgnd4EoewAI7zMdfqO+kGjnlZmBDz/cR5pf8r/cR4Wq60sL/p0IkcjUEEPwS3GFrIyw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/baseline-browser-mapping": {
      "version": "2.8.22",
      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.8.22.tgz",
      "integrity": "sha512-/tk9kky/d8T8CTXIQYASLyhAxR5VwL3zct1oAoVTaOUHwrmsGnfbRwNdEq+vOl2BN8i3PcDdP0o4Q+jjKQoFbQ==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "baseline-browser-mapping": "dist/cli.js"
      }
    },
    "node_modules/brace-expansion": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.2.tgz",
      "integrity": "sha512-Jt0vHyM+jmUBqojB7E1NIYadt0vI0Qxjxd2TErW94wDz+E2LAm5vKMXXwg6ZZBTHPuUlDgQHKXvjGBdfcF1ZDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/braces": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.3.tgz",
      "integrity": "sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fill-range": "^7.1.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/browserslist": {
      "version": "4.27.0",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.27.0.tgz",
      "integrity": "sha512-AXVQwdhot1eqLihwasPElhX2tAZiBjWdJ9i/Zcj2S6QYIjkx62OKSfnobkriB81C3l4w0rVy3Nt4jaTBltYEpw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "baseline-browser-mapping": "^2.8.19",
        "caniuse-lite": "^1.0.30001751",
        "electron-to-chromium": "^1.5.238",
        "node-releases": "^2.0.26",
        "update-browserslist-db": "^1.1.4"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001752",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001752.tgz",
      "integrity": "sha512-vKUk7beoukxE47P5gcVNKkDRzXdVofotshHwfR9vmpeFKxmI5PBpgOMC18LUJUA/DvJ70Y7RveasIBraqsyO/g==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/cliui": {
      "version": "8.0.1",
      "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
      "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
      "license": "ISC",
      "dependencies": {
        "string-width": "^4.2.0",
        "strip-ansi": "^6.0.1",
        "wrap-ansi": "^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "license": "MIT",
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "license": "MIT"
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/convert-source-map": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/csstype": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.1.3.tgz",
      "integrity": "sha512-M1uQkMl8rQK/szD0LNhtqxIPLpimGm8sOBwU7lLnCpSbTyY3yeU1Vc7l4KT5zT4s/yOxHH5O7tIuuLOCnLADRw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/dir-glob": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/dir-glob/-/dir-glob-3.0.1.tgz",
      "integrity": "sha512-WkrWp9GR4KXfKGYzOLmTuGVi1UWFfws377n9cc55/tb6DuqyF6pcQ5AbiHEshaDpY9v6oaSr2XCDidGmMwdzIA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-type": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/doctrine": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/doctrine/-/doctrine-3.0.0.tgz",
      "integrity": "sha512-yS+Q5i3hBf7GBkd4KG8a7eBNNWNGLTaEwwYWUijIYM7zrlYDM0BFXHjjPWlWZ1Rg7UaddZeIDmi9jF3HmqiQ2w==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "esutils": "^2.0.2"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.244",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.244.tgz",
      "integrity": "sha512-OszpBN7xZX4vWMPJwB9illkN/znA8M36GQqQxi6MNy9axWxhOfJyZZJtSLQCpEFLHP2xK33BiWx9aIuIEXVCcw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
      "license": "MIT"
    },
    "node_modules/esbuild": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.21.5.tgz",
      "integrity": "sha512-mg3OPMV4hXywwpoDxu3Qda5xCKQi+vCTZq8S9J/EpkhB2HzKXq4SNFZE3+NK93JYxc8VMSep+lOUSC/RVKaBqw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "bin": {
        "esbuild": "bin/esbuild"
      },
      "engines": {
        "node": ">=12"
      },
      "optionalDependencies": {
        "@esbuild/aix-ppc64": "0.21.5",
        "@esbuild/android-arm": "0.21.5",
        "@esbuild/android-arm64": "0.21.5",
        "@esbuild/android-x64": "0.21.5",
        "@esbuild/darwin-arm64": "0.21.5",
        "@esbuild/darwin-x64": "0.21.5",
        "@esbuild/freebsd-arm64": "0.21.5",
        "@esbuild/freebsd-x64": "0.21.5",
        "@esbuild/linux-arm": "0.21.5",
        "@esbuild/linux-arm64": "0.21.5",
        "@esbuild/linux-ia32": "0.21.5",
        "@esbuild/linux-loong64": "0.21.5",
        "@esbuild/linux-mips64el": "0.21.5",
        "@esbuild/linux-ppc64": "0.21.5",
        "@esbuild/linux-riscv64": "0.21.5",
        "@esbuild/linux-s390x": "0.21.5",
        "@esbuild/linux-x64": "0.21.5",
        "@esbuild/netbsd-x64": "0.21.5",
        "@esbuild/openbsd-x64": "0.21.5",
        "@esbuild/sunos-x64": "0.21.5",
        "@esbuild/win32-arm64": "0.21.5",
        "@esbuild/win32-ia32": "0.21.5",
        "@esbuild/win32-x64": "0.21.5"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint": {
      "version": "8.57.1",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-8.57.1.tgz",
      "integrity": "sha512-ypowyDxpVSYpkXr9WPv2PAZCtNip1Mv5KTW0SCurXv/9iOpcrH9PaqUElksqEB6pChqHGDRCFTyrZlGhnLNGiA==",
      "deprecated": "This version is no longer supported. Please see https://eslint.org/version-support for other options.",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.2.0",
        "@eslint-community/regexpp": "^4.6.1",
        "@eslint/eslintrc": "^2.1.4",
        "@eslint/js": "8.57.1",
        "@humanwhocodes/config-array": "^0.13.0",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@nodelib/fs.walk": "^1.2.8",
        "@ungap/structured-clone": "^1.2.0",
        "ajv": "^6.12.4",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.2",
        "debug": "^4.3.2",
        "doctrine": "^3.0.0",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^7.2.2",
        "eslint-visitor-keys": "^3.4.3",
        "espree": "^9.6.1",
        "esquery": "^1.4.2",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^6.0.1",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "globals": "^13.19.0",
        "graphemer": "^1.4.0",
        "ignore": "^5.2.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "is-path-inside": "^3.0.3",
        "js-yaml": "^4.1.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "levn": "^0.4.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.3",
        "strip-ansi": "^6.0.1",
        "text-table": "^0.2.0"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-plugin-react-hooks": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-hooks/-/eslint-plugin-react-hooks-4.6.2.tgz",
      "integrity": "sha512-QzliNJq4GinDBcD8gPB5v0wh6g8q3SUi6EFF0x8N/BL9PoVs0atuGc47ozMRyOWAKdwaZ5OnbOEa3WR+dSGKuQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "eslint": "^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0"
      }
    },
    "node_modules/eslint-plugin-react-refresh": {
      "version": "0.4.24",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-refresh/-/eslint-plugin-react-refresh-0.4.24.tgz",
      "integrity": "sha512-nLHIW7TEq3aLrEYWpVaJ1dRgFR+wLDPN8e8FpYAql/bMV2oBEfC37K0gLEGgv9fy66juNShSMV8OkTqzltcG/w==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "eslint": ">=8.40"
      }
    },
    "node_modules/eslint-scope": {
      "version": "7.2.2",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-7.2.2.tgz",
      "integrity": "sha512-dOt21O7lTMhDM+X9mB4GX+DZrZtCUJPL/wlcTqxyrx5IvO0IYtILdtrQGQp+8n5S0gwSVmOf9NQrjMOgfQZlIg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/eslint/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/espree": {
      "version": "9.6.1",
      "resolved": "https://registry.npmjs.org/espree/-/espree-9.6.1.tgz",
      "integrity": "sha512-oruZaFkjorTpF32kDSI5/75ViwGeZginGGy2NoOSg3Q9bnwlnmDm4HLnkl0RE3n+njDXR037aY1+x58Z/zFdwQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "acorn": "^8.9.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^3.4.1"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esquery": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.6.0.tgz",
      "integrity": "sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-glob": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.3.3.tgz",
      "integrity": "sha512-7MptL8U0cqcFdzIzwOTHoilX9x5BrNqye7Z/LuC7kCMRio1EMSyqRK3BEAUD7sXRq4iT4AzTVuZdhgQ2TCvYLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "^2.0.2",
        "@nodelib/fs.walk": "^1.2.3",
        "glob-parent": "^5.1.2",
        "merge2": "^1.3.0",
        "micromatch": "^4.0.8"
      },
      "engines": {
        "node": ">=8.6.0"
      }
    },
    "node_modules/fast-glob/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fastq": {
      "version": "1.19.1",
      "resolved": "https://registry.npmjs.org/fastq/-/fastq-1.19.1.tgz",
      "integrity": "sha512-GwLTyxkCXjXbxqIhTsMI2Nui8huMPtnxg7krajPJAjnEG/iiOS7i+zCtWGZR9G0NBKbXKh6X9m9UIsYX/N6vvQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "reusify": "^1.0.4"
      }
    },
    "node_modules/faye-websocket": {
      "version": "0.11.4",
      "resolved": "https://registry.npmjs.org/faye-websocket/-/faye-websocket-0.11.4.tgz",
      "integrity": "sha512-CzbClwlXAuiRQAlUyfqPgvPoNKTckTPGfwZV4ZdAhVcP2lh9KUxJg2b5GkE7XbjKQ3YJnQ9z6D9ntLAlB+tP8g==",
      "license": "Apache-2.0",
      "dependencies": {
        "websocket-driver": ">=0.5.1"
      },
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/file-entry-cache": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-6.0.1.tgz",
      "integrity": "sha512-7Gps/XWymbLk2QLYK4NzpMOrYjMhdIxXuIvy2QBsLE6ljuodKvdkWs/cpyJJ3CVIVpH0Oi1Hvg1ovbMzLdFBBg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flat-cache": "^3.0.4"
      },
      "engines": {
        "node": "^10.12.0 || >=12.0.0"
      }
    },
    "node_modules/fill-range": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.1.1.tgz",
      "integrity": "sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "to-regex-range": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/firebase": {
      "version": "10.14.1",
      "resolved": "https://registry.npmjs.org/firebase/-/firebase-10.14.1.tgz",
      "integrity": "sha512-0KZxU+Ela9rUCULqFsUUOYYkjh7OM1EWdIfG6///MtXd0t2/uUIf0iNV5i0KariMhRQ5jve/OY985nrAXFaZeQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/analytics": "0.10.8",
        "@firebase/analytics-compat": "0.2.14",
        "@firebase/app": "0.10.13",
        "@firebase/app-check": "0.8.8",
        "@firebase/app-check-compat": "0.3.15",
        "@firebase/app-compat": "0.2.43",
        "@firebase/app-types": "0.9.2",
        "@firebase/auth": "1.7.9",
        "@firebase/auth-compat": "0.5.14",
        "@firebase/data-connect": "0.1.0",
        "@firebase/database": "1.0.8",
        "@firebase/database-compat": "1.0.8",
        "@firebase/firestore": "4.7.3",
        "@firebase/firestore-compat": "0.3.38",
        "@firebase/functions": "0.11.8",
        "@firebase/functions-compat": "0.3.14",
        "@firebase/installations": "0.6.9",
        "@firebase/installations-compat": "0.2.9",
        "@firebase/messaging": "0.12.12",
        "@firebase/messaging-compat": "0.2.12",
        "@firebase/performance": "0.6.9",
        "@firebase/performance-compat": "0.2.9",
        "@firebase/remote-config": "0.4.9",
        "@firebase/remote-config-compat": "0.2.9",
        "@firebase/storage": "0.13.2",
        "@firebase/storage-compat": "0.3.12",
        "@firebase/util": "1.10.0",
        "@firebase/vertexai-preview": "0.0.4"
      }
    },
    "node_modules/firebase/node_modules/@firebase/auth": {
      "version": "1.7.9",
      "resolved": "https://registry.npmjs.org/@firebase/auth/-/auth-1.7.9.tgz",
      "integrity": "sha512-yLD5095kVgDw965jepMyUrIgDklD6qH/BZNHeKOgvu7pchOKNjVM+zQoOVYJIKWMWOWBq8IRNVU6NXzBbozaJg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.9",
        "@firebase/logger": "0.4.2",
        "@firebase/util": "1.10.0",
        "tslib": "^2.1.0",
        "undici": "6.19.7"
      },
      "peerDependencies": {
        "@firebase/app": "0.x",
        "@react-native-async-storage/async-storage": "^1.18.1"
      },
      "peerDependenciesMeta": {
        "@react-native-async-storage/async-storage": {
          "optional": true
        }
      }
    },
    "node_modules/flat-cache": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-3.2.0.tgz",
      "integrity": "sha512-CYcENa+FtcUKLmhhqyctpclsq7QF38pKjZHsGNiSQF5r4FtoKDWabFDl3hzaEQMvT1LHEysw5twgLvpYYb4vbw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flatted": "^3.2.9",
        "keyv": "^4.5.3",
        "rimraf": "^3.0.2"
      },
      "engines": {
        "node": "^10.12.0 || >=12.0.0"
      }
    },
    "node_modules/flatted": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.3.tgz",
      "integrity": "sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/fs.realpath": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/fs.realpath/-/fs.realpath-1.0.0.tgz",
      "integrity": "sha512-OO0pH2lK6a0hZnAdau5ItzHPI6pUlvI7jMVnxUQRtw4owF2wk8lOSabtGDCTP4Ggrg2MbGnWO9X8K1t4+fGMDw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/gensync": {
      "version": "1.0.0-beta.2",
      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/get-caller-file": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/get-caller-file/-/get-caller-file-2.0.5.tgz",
      "integrity": "sha512-DyFP3BM/3YHTQOCUL/w0OZHR0lpKeGrxotcHWcqNEdnltqFwXVfhEBQ94eIo34AfQpo0rGki4cyIiftY06h2Fg==",
      "license": "ISC",
      "engines": {
        "node": "6.* || 8.* || >= 10.*"
      }
    },
    "node_modules/glob": {
      "version": "7.2.3",
      "resolved": "https://registry.npmjs.org/glob/-/glob-7.2.3.tgz",
      "integrity": "sha512-nFR0zLpU2YCaRxwoCJvL6UvCH2JFyFVIvwTLsIf21AuHlMskA1hhTdk+LlYJtOlYt9v6dvszD2BGRqBL+iQK9Q==",
      "deprecated": "Glob versions prior to v9 are no longer supported",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "fs.realpath": "^1.0.0",
        "inflight": "^1.0.4",
        "inherits": "2",
        "minimatch": "^3.1.1",
        "once": "^1.3.0",
        "path-is-absolute": "^1.0.0"
      },
      "engines": {
        "node": "*"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/glob/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/glob/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/globals": {
      "version": "13.24.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-13.24.0.tgz",
      "integrity": "sha512-AhO5QUcj8llrbG09iWhPU2B204J1xnPeL8kQmVorSsy+Sjj1sk8gIyh6cUocGmH4L0UuhAJy+hJMRA4mgA4mFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "type-fest": "^0.20.2"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/globby": {
      "version": "11.1.0",
      "resolved": "https://registry.npmjs.org/globby/-/globby-11.1.0.tgz",
      "integrity": "sha512-jhIXaOzy1sb8IyocaruWSn1TjmnBVs8Ayhcy83rmxNJ8q2uWKCAj3CnJY+KpGSXCueAPc0i05kVvVKtP1t9S3g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-union": "^2.1.0",
        "dir-glob": "^3.0.1",
        "fast-glob": "^3.2.9",
        "ignore": "^5.2.0",
        "merge2": "^1.4.1",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/graphemer": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/graphemer/-/graphemer-1.4.0.tgz",
      "integrity": "sha512-EtKwoO6kxCL9WO5xipiHTZlSzBm7WLT627TqC/uVRd0HKmq8NXyebnNYxDoBi7wt8eTWrUrKXCOVaFq9x1kgag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/http-parser-js": {
      "version": "0.5.10",
      "resolved": "https://registry.npmjs.org/http-parser-js/-/http-parser-js-0.5.10.tgz",
      "integrity": "sha512-Pysuw9XpUq5dVc/2SMHpuTY01RFl8fttgcyunjL7eEMhGM3cI4eOmiCycJDVCo/7O7ClfQD3SaI6ftDzqOXYMA==",
      "license": "MIT"
    },
    "node_modules/idb": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/idb/-/idb-7.1.1.tgz",
      "integrity": "sha512-gchesWBzyvGHRO9W8tzUWFDycow5gwjvFKfyV9FF32Y7F50yZMp7mP+T2mJIWFx49zicqyC4uefHM17o6xKIVQ==",
      "license": "ISC"
    },
    "node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/import-fresh": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
      "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/inflight": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/inflight/-/inflight-1.0.6.tgz",
      "integrity": "sha512-k92I/b08q4wvFscXCLvqfsHCrjrF7yiXsQuIVvVE7N82W3+aqpzuUdBbfhWcy/FZR3/4IgflMgKLOsvPDrGCJA==",
      "deprecated": "This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "once": "^1.3.0",
        "wrappy": "1"
      }
    },
    "node_modules/inherits": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
      "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-fullwidth-code-point": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-number": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
      "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/is-path-inside": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/is-path-inside/-/is-path-inside-3.0.3.tgz",
      "integrity": "sha512-Fd4gABb+ycGAmKou8eMftCupSir5lRxqf4aD/vd0cD2qc4HL07OjCeuHMr8Ro4CoMaeCKDB0/ECBOVWjTwUvPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "license": "MIT"
    },
    "node_modules/js-yaml": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
      "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/jsesc": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jsesc": "bin/jsesc"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json5": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/keyv": {
      "version": "4.5.4",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
      "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lodash.camelcase": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/lodash.camelcase/-/lodash.camelcase-4.3.0.tgz",
      "integrity": "sha512-TwuEnCnxbc3rAvhf/LbG7tJUDzhqXyFnv3dtzLOPgCG/hODL7WFnsbwktkD7yUV0RrreP/l1PALq/YSg6VvjlA==",
      "license": "MIT"
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/long": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/long/-/long-5.3.2.tgz",
      "integrity": "sha512-mNAgZ1GmyNhD7AuqnTG3/VQ26o760+ZYBPKjPvugO8+nLbYfX6TVpJPseBvopbdY+qpZ/lKUnmEc1LeZYS3QAA==",
      "license": "Apache-2.0"
    },
    "node_modules/loose-envify": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/loose-envify/-/loose-envify-1.4.0.tgz",
      "integrity": "sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==",
      "license": "MIT",
      "dependencies": {
        "js-tokens": "^3.0.0 || ^4.0.0"
      },
      "bin": {
        "loose-envify": "cli.js"
      }
    },
    "node_modules/lru-cache": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^3.0.2"
      }
    },
    "node_modules/merge2": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/merge2/-/merge2-1.4.1.tgz",
      "integrity": "sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/micromatch": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.8.tgz",
      "integrity": "sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "braces": "^3.0.3",
        "picomatch": "^2.3.1"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/minimatch": {
      "version": "9.0.5",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-9.0.5.tgz",
      "integrity": "sha512-G6T0ZX48xgozx7587koeX9Ys2NYy6Gmv//P89sEte9V9whIapMNF4idKxnW2QtCcLiTWlb/wfCabAtAFWhhBow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/node-releases": {
      "version": "2.0.27",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.27.tgz",
      "integrity": "sha512-nmh3lCkYZ3grZvqcCH+fjmQ7X+H0OeZgP40OierEaAptX4XofMh5kwNbWh7lBduUzCcV/8kZ+NDLCwm2iorIlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/once": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
      "integrity": "sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "wrappy": "1"
      }
    },
    "node_modules/optionator": {
      "version": "0.9.4",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
      "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-is-absolute": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/path-is-absolute/-/path-is-absolute-1.0.1.tgz",
      "integrity": "sha512-AVbw3UJ2e9bq64vSaS9Am0fje1Pa8pbGqTTsmXfaIiMpnr5DlDhfJOuLj9Sf95ZPVDAUerDfEk88MPmPe7UCQg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-type": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-type/-/path-type-4.0.0.tgz",
      "integrity": "sha512-gDKb8aZMDeD/tZWs9P6+q0J9Mwkdl6xMV8TjnGP3qJVJ06bdMgkbBlLU8IdfOsIsFz2BW1rNVT3XuNEl8zPAvw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/protobufjs": {
      "version": "7.5.4",
      "resolved": "https://registry.npmjs.org/protobufjs/-/protobufjs-7.5.4.tgz",
      "integrity": "sha512-CvexbZtbov6jW2eXAvLukXjXUW1TzFaivC46BpWc/3BpcCysb5Vffu+B3XHMm8lVEuy2Mm4XGex8hBSg1yapPg==",
      "hasInstallScript": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@protobufjs/aspromise": "^1.1.2",
        "@protobufjs/base64": "^1.1.2",
        "@protobufjs/codegen": "^2.0.4",
        "@protobufjs/eventemitter": "^1.1.0",
        "@protobufjs/fetch": "^1.1.0",
        "@protobufjs/float": "^1.0.2",
        "@protobufjs/inquire": "^1.1.0",
        "@protobufjs/path": "^1.1.2",
        "@protobufjs/pool": "^1.1.0",
        "@protobufjs/utf8": "^1.1.0",
        "@types/node": ">=13.7.0",
        "long": "^5.0.0"
      },
      "engines": {
        "node": ">=12.0.0"
      }
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/queue-microtask": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/queue-microtask/-/queue-microtask-1.2.3.tgz",
      "integrity": "sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/react": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react/-/react-18.3.1.tgz",
      "integrity": "sha512-wS+hAgJShR0KhEvPJArfuPVN1+Hz1t0Y6n5jLrGQbkb4urgPE/0Rve+1kMB1v/oWgHgm4WIcV+i7F2pTVj+2iQ==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "loose-envify": "^1.1.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-dom": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-18.3.1.tgz",
      "integrity": "sha512-5m4nQKp+rZRb09LNH59GM4BxTh9251/ylbKIbpe7TpGxfJ+9kv6BLkLBXIjjspbgbnIBNqlI23tRnTWT0snUIw==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0",
        "scheduler": "^0.23.2"
      },
      "peerDependencies": {
        "react": "^18.3.1"
      }
    },
    "node_modules/react-refresh": {
      "version": "0.17.0",
      "resolved": "https://registry.npmjs.org/react-refresh/-/react-refresh-0.17.0.tgz",
      "integrity": "sha512-z6F7K9bV85EfseRCp2bzrpyQ0Gkw1uLoCel9XBVWPg/TjRj94SkJzUTGfOa4bs7iJvBWtQG0Wq7wnI0syw3EBQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/require-directory": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/require-directory/-/require-directory-2.1.1.tgz",
      "integrity": "sha512-fGxEI7+wsG9xrvdjsrlmL22OMTTiHRwAMroiEeMgq8gzoLC/PQr7RsRDSTLUg/bZAZtF+TVIkHc6/4RIKrui+Q==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/reusify": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.1.0.tgz",
      "integrity": "sha512-g6QUff04oZpHs0eG5p83rFLhHeV00ug/Yf9nZM6fLeUrPguBTkTQOdpAWWspMh55TZfVQDPaN3NQJfbVRAxdIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "iojs": ">=1.0.0",
        "node": ">=0.10.0"
      }
    },
    "node_modules/rimraf": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/rimraf/-/rimraf-3.0.2.tgz",
      "integrity": "sha512-JZkJMZkAGFFPP2YqXZXPbMlMBgsxzE8ILs4lMIX/2o0L9UBw9O/Y3o6wFw/i9YLapcUJWwqbi3kdxIPdC62TIA==",
      "deprecated": "Rimraf versions prior to v4 are no longer supported",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "glob": "^7.1.3"
      },
      "bin": {
        "rimraf": "bin.js"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/rollup": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-4.52.5.tgz",
      "integrity": "sha512-3GuObel8h7Kqdjt0gxkEzaifHTqLVW56Y/bjN7PSQtkKr0w3V/QYSdt6QWYtd7A1xUtYQigtdUfgj1RvWVtorw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "1.0.8"
      },
      "bin": {
        "rollup": "dist/bin/rollup"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=8.0.0"
      },
      "optionalDependencies": {
        "@rollup/rollup-android-arm-eabi": "4.52.5",
        "@rollup/rollup-android-arm64": "4.52.5",
        "@rollup/rollup-darwin-arm64": "4.52.5",
        "@rollup/rollup-darwin-x64": "4.52.5",
        "@rollup/rollup-freebsd-arm64": "4.52.5",
        "@rollup/rollup-freebsd-x64": "4.52.5",
        "@rollup/rollup-linux-arm-gnueabihf": "4.52.5",
        "@rollup/rollup-linux-arm-musleabihf": "4.52.5",
        "@rollup/rollup-linux-arm64-gnu": "4.52.5",
        "@rollup/rollup-linux-arm64-musl": "4.52.5",
        "@rollup/rollup-linux-loong64-gnu": "4.52.5",
        "@rollup/rollup-linux-ppc64-gnu": "4.52.5",
        "@rollup/rollup-linux-riscv64-gnu": "4.52.5",
        "@rollup/rollup-linux-riscv64-musl": "4.52.5",
        "@rollup/rollup-linux-s390x-gnu": "4.52.5",
        "@rollup/rollup-linux-x64-gnu": "4.52.5",
        "@rollup/rollup-linux-x64-musl": "4.52.5",
        "@rollup/rollup-openharmony-arm64": "4.52.5",
        "@rollup/rollup-win32-arm64-msvc": "4.52.5",
        "@rollup/rollup-win32-ia32-msvc": "4.52.5",
        "@rollup/rollup-win32-x64-gnu": "4.52.5",
        "@rollup/rollup-win32-x64-msvc": "4.52.5",
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/run-parallel": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
      "integrity": "sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "queue-microtask": "^1.2.2"
      }
    },
    "node_modules/safe-buffer": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
      "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/scheduler": {
      "version": "0.23.2",
      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.23.2.tgz",
      "integrity": "sha512-UOShsPwz7NrMUqhR6t0hWjFduvOzbtv7toDH1/hIrfRNIDBnnBWd0CwJTGvTpngVlmwGCdP9/Zl/tVrDqcuYzQ==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0"
      }
    },
    "node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/slash": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/slash/-/slash-3.0.0.tgz",
      "integrity": "sha512-g9Q1haeby36OSStwb4ntCGGGaKsaVSjQ68fBxoQcutl5fS1vuY18H3wSt3jFyFtrkx+Kz0V1G85A4MyAdDMi2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/string-width": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "license": "MIT",
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/text-table": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/text-table/-/text-table-0.2.0.tgz",
      "integrity": "sha512-N+8UisAXDGk8PFXP4HAzVR9nbfmVJ3zYLAWiTIoqC5v5isinhr+r5uaO8+7r3BMfuNIufIsA7RdpVgacC2cSpw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/to-regex-range": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
      "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-number": "^7.0.0"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/ts-api-utils": {
      "version": "1.4.3",
      "resolved": "https://registry.npmjs.org/ts-api-utils/-/ts-api-utils-1.4.3.tgz",
      "integrity": "sha512-i3eMG77UTMD0hZhgRS562pv83RC6ukSAC2GMNWc+9dieh/+jDM5u5YG+NHX6VNDRHQcHwmsTHctP9LhbC3WxVw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=16"
      },
      "peerDependencies": {
        "typescript": ">=4.2.0"
      }
    },
    "node_modules/tslib": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.8.1.tgz",
      "integrity": "sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==",
      "license": "0BSD"
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/type-fest": {
      "version": "0.20.2",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.20.2.tgz",
      "integrity": "sha512-Ne+eE4r0/iWnpAxD852z3A+N0Bt5RN//NjJwRd2VFHEmrywxf5vsZlh4R6lixl6B+wz/8d+maTSAkN1FIkI3LQ==",
      "dev": true,
      "license": "(MIT OR CC0-1.0)",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/typescript": {
      "version": "5.9.3",
      "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.9.3.tgz",
      "integrity": "sha512-jl1vZzPDinLr9eUt3J/t7V6FgNEw9QjvBPdysz9KfQDD41fQrC2Y4vKQdiaUpFT4bXlb1RHhLpp8wtm6M5TgSw==",
      "dev": true,
      "license": "Apache-2.0",
      "peer": true,
      "bin": {
        "tsc": "bin/tsc",
        "tsserver": "bin/tsserver"
      },
      "engines": {
        "node": ">=14.17"
      }
    },
    "node_modules/undici": {
      "version": "6.19.7",
      "resolved": "https://registry.npmjs.org/undici/-/undici-6.19.7.tgz",
      "integrity": "sha512-HR3W/bMGPSr90i8AAp2C4DM3wChFdJPLrWYpIS++LxS8K+W535qftjt+4MyjNYHeWabMj1nvtmLIi7l++iq91A==",
      "license": "MIT",
      "engines": {
        "node": ">=18.17"
      }
    },
    "node_modules/undici-types": {
      "version": "7.16.0",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-7.16.0.tgz",
      "integrity": "sha512-Zz+aZWSj8LE6zoxD+xrjh4VfkIG8Ya6LvYkZqtUQGJPZjYl53ypCaUwWqo7eI0x66KBGeRo+mlBEkMSeSZ38Nw==",
      "license": "MIT"
    },
    "node_modules/update-browserslist-db": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.1.4.tgz",
      "integrity": "sha512-q0SPT4xyU84saUX+tomz1WLkxUbuaJnR1xWt17M7fJtEJigJeWUNGUqrauFXsHnqev9y9JTRGwk13tFBuKby4A==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/vite": {
      "version": "5.4.21",
      "resolved": "https://registry.npmjs.org/vite/-/vite-5.4.21.tgz",
      "integrity": "sha512-o5a9xKjbtuhY6Bi5S3+HvbRERmouabWbyUcpXXUA1u+GNUKoROi9byOJ8M0nHbHYHkYICiMlqxkg1KkYmm25Sw==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "esbuild": "^0.21.3",
        "postcss": "^8.4.43",
        "rollup": "^4.20.0"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^18.0.0 || >=20.0.0"
      },
      "funding": {
        "url": "https://github.com/vitejs/vite?sponsor=1"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      },
      "peerDependencies": {
        "@types/node": "^18.0.0 || >=20.0.0",
        "less": "*",
        "lightningcss": "^1.21.0",
        "sass": "*",
        "sass-embedded": "*",
        "stylus": "*",
        "sugarss": "*",
        "terser": "^5.4.0"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "lightningcss": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "sass-embedded": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        }
      }
    },
    "node_modules/websocket-driver": {
      "version": "0.7.4",
      "resolved": "https://registry.npmjs.org/websocket-driver/-/websocket-driver-0.7.4.tgz",
      "integrity": "sha512-b17KeDIQVjvb0ssuSDF2cYXSg2iztliJ4B9WdsuB6J952qCPKmnVq4DyW5motImXHDC1cBT/1UezrJVsKw5zjg==",
      "license": "Apache-2.0",
      "dependencies": {
        "http-parser-js": ">=0.5.1",
        "safe-buffer": ">=5.1.0",
        "websocket-extensions": ">=0.1.1"
      },
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/websocket-extensions": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/websocket-extensions/-/websocket-extensions-0.1.4.tgz",
      "integrity": "sha512-OqedPIGOfsDlo31UNwYbCFMSaO9m9G/0faIHj5/dZFDMFqPTcx6UwqyOy3COEaEOg/9VsGIpdqn62W5KhoKSpg==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
      "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/wrap-ansi": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/wrappy": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
      "integrity": "sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/y18n": {
      "version": "5.0.8",
      "resolved": "https://registry.npmjs.org/y18n/-/y18n-5.0.8.tgz",
      "integrity": "sha512-0pfFzegeDWJHJIAmTLRP2DwHjdF5s7jo9tuztdQxAhINCdvS+3nGINqPd00AphqJR/0LhANUS6/+7SCb98YOfA==",
      "license": "ISC",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/yallist": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/yargs": {
      "version": "17.7.2",
      "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.2.tgz",
      "integrity": "sha512-7dSzzRQ++CKnNI/krKnYRV7JKKPUXMEh61soaHKg9mrWEhzFWhFnxPxGl+69cD1Ou63C13NUPCnmIcrvqCuM6w==",
      "license": "MIT",
      "dependencies": {
        "cliui": "^8.0.1",
        "escalade": "^3.1.1",
        "get-caller-file": "^2.0.5",
        "require-directory": "^2.1.1",
        "string-width": "^4.2.3",
        "y18n": "^5.0.5",
        "yargs-parser": "^21.1.1"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yargs-parser": {
      "version": "21.1.1",
      "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
      "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
      "license": "ISC",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    }
  }
}

--- END OF FILE package-lock.json ---

--- START OF FILE package.json ---
{
  "name": "cafestesia-operations-manager",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    "preview": "vite preview"
  },
  "dependencies": {
    "firebase": "^10.12.2",
    "react": "^18.2.0",
    "react-dom": "^18.2.0"
  },
  "devDependencies": {
    "@types/react": "^18.2.66",
    "@types/react-dom": "^18.2.22",
    "@typescript-eslint/eslint-plugin": "^7.2.0",
    "@typescript-eslint/parser": "^7.2.0",
    "@vitejs/plugin-react": "^4.2.1",
    "eslint": "^8.57.0",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-react-refresh": "^0.4.6",
    "typescript": "^5.2.2",
    "vite": "^5.2.0"
  }
}
--- END OF FILE package.json ---

--- START OF FILE constants.tsx ---
import { Recipe, KanbanTask, InventoryItem } from './types';

export const RECIPES: Record<string, Recipe> = {
    roles: {
        id: 'roles',
        name: 'Roles de Canela',
        pluralName: 'Roles de Canela listos',
        setupInstruction: 'Configura el horno a 230°C y programa 16 minutos.',
        totalDuration: 14 * 60,
        steps: [
            { duration: 2 * 60, instruction: 'Coloca los roles en los niveles 1 y 3. Deja que el calor eleve el producto sin presionar INICIO.', isPauseStep: true },
            { duration: 6 * 60, instruction: 'Baja la temperatura a 210°C y comienza el horneado.' },
            { duration: 4 * 60, instruction: 'Gira las charolas 180 grados.' },
            { duration: 2 * 60, instruction: 'Agrega 20 ml de leche y gira cada rol 1/3 de vuelta en sentido contrario del reloj.' },
            { duration: 2 * 60, instruction: 'Vuelve a girar cada rol 1/3 de vuelta para finalizar.' }
        ]
    },
    ciabattas: {
        id: 'ciabattas',
        name: 'Ciabattas',
        pluralName: 'Ciabattas listas',
        setupInstruction: 'Configura el horno a 230°C y programa 30 minutos.',
        totalDuration: 28 * 60,
        steps: [
            { duration: 2 * 60, instruction: 'Coloca las charolas (niveles 1 y 3) y pulveriza agua 12 veces. Deja que el calor eleve el producto sin presionar INICIO.', isPauseStep: true },
            { duration: 8 * 60, instruction: 'Baja la temperatura a 210°C y comienza el horneado.' },
            { duration: 8 * 60, instruction: 'Gira las charolas 180 grados y vuelve a pulverizar agua 12 veces.' },
            { duration: 6 * 60, instruction: 'Intercambia las charolas de nivel y da vuelta a cada pieza 180 grados.' },
            { duration: 6 * 60, instruction: 'Gira las charolas 180 grados por última vez.' }
        ]
    },
    croissants: {
        id: 'croissants',
        name: 'Croissants',
        pluralName: 'Croissants listos',
        setupInstruction: 'Configura el horno a 230°C y programa 21 minutos.',
        totalDuration: 21 * 60,
        steps: [
            { duration: 3 * 60, instruction: 'Coloca las charolas en los niveles 1 y 3. Pulveriza agua 12 veces.' },
            { duration: 6 * 60, instruction: 'Baja la temperatura a 200°C y continua horneando. (Nota: Si horneas solo 1 charola, baja a 180°C)' },
            { duration: 5 * 60, instruction: 'Gira las charolas 180 grados.' },
            { duration: 5 * 60, instruction: 'Intercambia las charolas de nivel y gíralas 180 grados.' },
            { duration: 2 * 60, instruction: 'Gira las charolas 180 grados por última vez.' }
        ]
    }
};

const today = new Date();
const todayStr = today.toISOString().split('T')[0];

export const INITIAL_TASKS: Omit<KanbanTask, 'id'>[] = [
    // Today's tasks
    { text: 'Roles: Descongelar en refrigeración', employee: 'Ali', shift: 'matutino', date: todayStr, time: '08:00', duration: 30, isCritical: true, zone: 'Panadería', status: 'todo' },
    { text: 'Checar ingredientes diarios y comprarlos', employee: 'Ali', shift: 'pre-apertura', date: todayStr, time: '15:00', duration: 60, isCritical: true, zone: 'Cocina', status: 'todo' },
    { text: 'Hornear Roles', employee: 'Claudia', shift: 'pre-apertura', date: todayStr, time: '16:00', duration: 45, isCritical: true, zone: 'Panadería', status: 'todo' },
    { text: 'Hornear Croissants', employee: 'Claudia', shift: 'pre-apertura', date: todayStr, time: '16:30', duration: 45, isCritical: true, zone: 'Panadería', status: 'todo' }, // Overlap for demo
    { text: 'Corte de caja', employee: 'Fer', shift: 'cierre', date: todayStr, time: '21:50', duration: 20, isCritical: true, zone: 'Admin', status: 'todo' },
    // A couple more for today
    { text: 'Limpiar barra y area de barismo', employee: 'Claudia', shift: 'pre-apertura', date: todayStr, time: '17:00', duration: 30, isCritical: true, zone: 'Barra', status: 'todo' },
    { text: 'Hacer masa para ciabatta (día siguiente)', employee: 'Fer', shift: 'cierre', date: todayStr, time: '21:40', duration: 20, isCritical: true, zone: 'Panadería', status: 'todo' },
];

export const MOCK_INVENTORY_ITEMS: Omit<InventoryItem, 'id'>[] = [
    { name: 'Harina de Trigo', category: 'Secos', currentStock: 50, unit: 'kg', minStock: 10, providerPreferido: 'Proveedor A', purchaseHistory: [] },
    { name: 'Levadura Fresca', category: 'Refrigerados', currentStock: 1, unit: 'kg', minStock: 0.5, providerPreferido: 'Proveedor B', purchaseHistory: [] },
    { name: 'Mantequilla sin Sal', category: 'Refrigerados', currentStock: 5, unit: 'kg', minStock: 2, providerPreferido: 'Proveedor A', purchaseHistory: [] },
    { name: 'Chocolate Amargo 70%', category: 'Secos', currentStock: 3, unit: 'kg', minStock: 1, providerPreferido: 'Proveedor C', purchaseHistory: [] },
    { name: 'Leche Entera', category: 'Lácteos', currentStock: 8, unit: 'lt', minStock: 4, providerPreferido: 'Supermercado', purchaseHistory: [] },
    { name: 'Café en Grano', category: 'Bebidas', currentStock: 10, unit: 'kg', minStock: 5, providerPreferido: 'Tostador Local', purchaseHistory: [] },
    { name: 'Azúcar Morena', category: 'Secos', currentStock: 15, unit: 'kg', minStock: 5, providerPreferido: 'Proveedor A', purchaseHistory: [] },
    { name: 'Canela en Polvo', category: 'Secos', currentStock: 0.4, unit: 'kg', minStock: 0.5, providerPreferido: 'Proveedor C', purchaseHistory: [] },
];

export const INVENTORY_UNITS = ['kg', 'lt', 'pz', 'g', 'ml', 'unidad(es)'];

export const TIMELINE_START_HOUR = 8;
export const TIMELINE_END_HOUR = 22;

export const TASK_DURATIONS = [
    { value: 5, label: '5 min' },
    { value: 10, label: '10 min' },
    { value: 15, label: '15 min' },
    { value: 30, label: '30 min' },
    { value: 60, label: '1 hora' },
    { value: 120, label: '2 horas' },
];

export const OPERATIONS_PIN = '1234';

--- END OF FILE constants.tsx ---

--- START OF FILE tsconfig.json ---
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true
  },
  "include": ["."],
  "exclude": ["vite.config.ts"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
--- END OF FILE tsconfig.json ---

--- START OF FILE firebase.json ---
{
  "hosting": {
    "public": "dist",
    "ignore": [
      "firebase.json",
      ".firebaserc",
      "**/.*",
      "**/node_modules/**",
      "src/",
      "*.ts",
      "*.tsx",
      "*.json",
      "*.md",
      "vite.config.ts"
    ],
    "rewrites": [
      {
        "source": "**",
        "destination": "/index.html"
      }
    ]
  }
}
--- END OF FILE firebase.json ---

--- START OF FILE vite.config.ts ---
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
})
--- END OF FILE vite.config.ts ---

--- START OF FILE assets/production-sounds.ts ---
// Production Alert Sounds in Base64 format.
// This keeps the app self-contained without needing external asset files.

// A short, positive "chime" sound for starting a process.
export const START_SOUND_BASE64 = 'data:audio/wav;base64,UklGRlgEAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQEAABk/2//aP9w/3X/eP+A/4P/hv+K/43/kv+b/5//ov+p/63/rv+w/7L/tP+3/7f/tv+z/7D/r/+t/6n/pP+g/53/l/+T/4v/iP+D/3//df9x/2n/Y/9f/13/Wv9Z/1n/Wv9c/1//Yv9m/2v/c/96/4H/h/+L/5D/mv+h/6n/sP+1/7n/vP/A/8L/xP/G/8j/yf/K/8r/yP/F/8H/uv+z/6f/n/+W/4n/f/9t/2T/Wv9V/1P/U/9T/1X/W/9h/2n/d/9//4j/l/+f/6b/r/+z/7f/vP/C/8f/zP/Q/9L/0//S/9H/zv/J/8T/v/+1/6r/n/+R/4b/ev9r/2P/V/9R/0//S/9M/03/T/9U/1r/Y/9r/3j/gf+J/5L/oP+p/7H/uP/A/8T/yv/P/9P/1v/Y/9j/1//T/8//yP/C/7z/tP+p/6D/kv+H/3n/av9j/1f/Uf9O/0z/TP9N/0//VP9b/2T/b/96/4L/i/+T/5//p/+t/7T/vP/C/8j/z//U/9f/2v/c/9z/2//W/9P/zP/I/8L/vP+0/6r/oP+S/4b/ef9s/2P/Vv9R/0//S/9L/0v/TP9Q/1T/Wv9j/2v/d/9+/4L/i/+S/5v/o/+p/6//sv+2/7r/v/+9/7z/u/+2/7H/qf+g/5n/kv+J/4H/d/9s/2T/Wf9W/1T/Uv9T/1T/Vf9Z/1//Yv9n/2v/cv95/3//hP+I/4r/jP+P/5D/kv+U/5X/lf+U/5D/j/+N/4r/if+F/4D/e/9z/2v/Z/9i/1//W/9Z/1f/Vf9V/1X/Vv9Y/1r/Xf9f/2L/Zv9r/3L/d/96/3//gv+F/4n/iv+N/4//kP+T/5X/mf+a/5v/m/+Z/5T/kP+O/4v/iP+F/4D/eP9x/2n/Y/9g/1//W/9Z/1j/V/9W/1b/V/9X/1j/Wv9d/2D/Y/9m/2n/c/91/3n/f/+C/4X/if+L/43/j/+Q/5L/lP+W/5j/mf+b/5z/n/+g/6H/oP+e/5r/lv+S/47/jf+K/4f/gf98/3X/c/9r/2b/Yv9f/17/W/9Z/1j/V/9V/1X/Vf9W/1j/W/9f/2P/aP9t/3H/df96/3//gv+E/4f/iP+K/4z/jv+P/5H/kv+U/5X/lv+Y/5n/mv+c/5//oP+h/6L/ov+i/6H/n/+d/5r/lf+R/47/jP+K/4f/gf99/3b/cf9p/2X/Yf9e/1v/Wf9Y/1f/Vf9V/1X/Vv9Y/1v/X/9h/2T/aP9u/3H/d/97/3//g/+E/4b/iP+J/4r/jP+O/5D/kv+U/5X/lv+Y/5n/mv+b/5z/nv+f/6D/of+i/6P/pP+k/6T/ov+g/53/m/+U/4//jf+K/4f/gP98/3b/c/9q/2b/Yf9f/13/Wv9Y/1f/VP9T/1L/Uv9T/1T/Vf9Y/1s='

// A quick double-beep to warn the user something is imminent.
export const WARNING_SOUND_BASE64 = 'data:audio/wav;base64,UklGRmAEAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YSAEAAC9/73/v/+9/8D/wf/D/8T/xv/I/8n/y//L/8r/x//D/7//uv+5/7v/uv+7/7z/vP+9/77/wP/B/8P/xP/G/8j/yf/L/8z/zf/M/8r/x//D/7//uv+2/7L/sf+v/63/q/+o/6f/pP+k/6T/p/+n/6n/qv+u/7D/s/+3/7f/sv+w/6v/qP+j/57/mv+U/5D/j/+O/4//kP+T/5X/mf+a/5v/n/+h/6P/pP+m/6f/qP+n/6X/ov+e/5n/kv+P/4v/iP+G/4T/hP+G/4f/iP+K/4z/j/+R/5P/lf+Z/5v/nv+g/6L/pf+m/6f/qf+p/6f/pv+k/6H/nv+a/5T/kP+N/4n/hv+C/3//f/+A/4L/hP+G/4j/iv+M/47/kP+T/5X/mP+Z/5r/mv+Z/5f/lP+R/47/jP+J/4L/fP91/2//bf9w/3L/df96/3//gf+E/4f/iP+K/4//kf+V/5n/mv+c/57/nv+c/5n/lf+R/47/jf+K/4f/gP97/3X/cv9s/2n/a/9u/3D/c/92/3f/d/9x/2r/Z/9i/2H/Y/9l/2j/b/9y/3b/eP98/3//g/+D/4T/hP+C/37/d/9s/2b/Yf9f/13/Xf9f/2D/Yv9m/2r/c/94/3v/fv+A/4L/hP+G/4b/hP+C/3//d/9t/2f/Yv9f/17/Xf9e/1//Yf9j/2b/af9u/3H/d/96/3v/e/94/3L/af9l/2D/Xv9b/1j/V/9X/1f/V/9Z/1v/Xv9g/2T/aP9u/3L/d/95/3n/d/9x/2n/Zv9i/1//Xf9b/1j/Vv9V/1T/Uv9S/1L/U/9V/1f/Wf9c/1//Yv9n/2r/b/9y/3f/d/9w/2f/Yf9d/1r/V/9U/0//T/9O/07/T/9U/1b/Wf9b/1//Yv9k/2f/aP9o/2f/Y/9d/1r/Vv9T/07/S/9J/0j/R/9G/0b/Rv9H/0n/TP9P/1T/Wf9c/1//Yf9j/2X/Zv9l/2L/Xv9b/1f/U/9P/0z/Sv9I/0X/Q/9A/z//Ov85/zn/Of88/z//Qv9G/0r/T/9W/1//Yv9l/2f/aP9o/2b/Yv9d/1r/Vv9U/0//TP9K/0f/Q/8//zn/M/8u/yn/J/8j/yH/IP8h/yL/J/8s/zL/O/9C/0f/TP9U/1f/WP9Y/1f/U/9N/0j/Qv88/zL/KP8g/yv/PP9J/1f/dQB1/7X/uv+9/8H/xP/H/8n/y//N/9D/0P/N/8r/x//E/8D/vf+5/7b/tP+0/7T/tP+1/7X/tf+1/7X/tf+0/7D/qv+m/5//mv+U/5D/j/+N/4z/jP+O/4//kP+T/5X/mf+a/5v/nP+e/5//of+j/6X/pv+n/6f/pf+j/5//mv+U/4//jP+J/4P/fP94/3b/cv9w/2//c/93/3n/fv+C/4b/iP+K/4z/jv+Q/5L/lP+W/5j/mf+a/5v/nP+b/5f/kv+P/4v/iP+F/4D/ev90/2v/Z/9j/2D/Yv9k/2f/av9v/3H/d/96/3//g/+E/4b/iP+J/4v/jP+O/5D/kv+T/5D/j/+M/4n/h/+C/3//e/92/3D/av9n/2P/YP9f/1//YP9j/2X/aP9s/3D/d/96/3//gf+E/4b/iP+J/4r/jP+O/5D/kv+T/5H/jv+L/4j/hf+A/3r/cv9p/2X/Y/9g/1//YP9i/2X/aP9t/3H/df96/3//gf+E/4b/iP+J/4r/jP+O/4//j/+M/4n/h/+B/3z/df9x/2n/Zf9j/2D/YP9j/2X/aP9t/3H/df96/3//gf+D/4T/hf+G/4b/hf+E/4L/f/96/3b/cf9p/2b/Y/9g/2D/Y/9l/2f/a/9v/3H/df96/3//gP+B/4L/gv+C/4L/gf+A/3z/ef92/3H/av9n/2T/Yv9h/2L/ZP9n/2r/b/9x/3X/ef98/3//gP+B/4L/gv+A/3z/ef91/2//a/9p/2X/Y/9h/2D/YP9j/2X/aP9t/3H/d/96/3z/f/9//33/ef91/2//a/9p/2b/Y/9h/2D/YP9j/2X/aP9s/2//cP9x/3L/cf9w/2v/aP9l/2L/Yf9f/1//YP9j/2X/aP9t/3H/df96/3//gP+B/4L/gv+A/33/eP90/2z/aP9m/2L/Yf9h/2L/ZP9n/2r/bv9w/3L/df95/3v/fP9+/3v/df9x/2n/Zv9i/1//Xv9d/13/Xf9e/1//Yf9j/2X/aP9s/27/bv9s/2n/Zv9k/2L/Yf9g/2D/Yv9k/2b/aP9s/3D/cv91/3b/cv9v/2n/Zv9k/2L/Yf9f/17/Xf9d/13/Xv9f/2D/Yv9k/2b/aP9s/23/bf9r/2f/Y/9f/1v/V/9W/1b/Vv9W/1f/Wf9b/1//Yv9l/2j/b/9x/3X/d/9z/2v/Z/9i/1//W/9Z/1f/Vf9V/1X/Vf9W/1j/Wv9d/2D/Y/9m/2n/bf9v/23/av9o/2X/Yv9f/1v/WP9W/1T/Uv9S/1L/U/9V/1f/Wf9b/1//Yf9j/2X/aP9p/2n/Zv9k/1//Wv9V/1D/TP9L/0n/R/9G/0b/Rv9H/0n/TP9P/1T/Wf9b/1//Yf9i/2L/Yf9f/1v/Vv9R/07/S/9I/0X/Qf8+/zv/Of85/zn/O/8//0L/Rv9K/0//Vf9Y/1v/Xf9d/1v/V/9T/07/S/9G/0H/Ov8y/yj/Iv8e/xr/Fv8U/xT/FP8V/xb/Gv8e/yL/KP8y/zr/Qf9G/0v/Tv9T/1T/Uf9O/0n/Q/88/zD/J/8e/xX/D/8L/wn/Cf8J/wv/D/8V/x7/J/8w/zz/Q/9J/04='

// An insistent, looping alarm sound.
export const ALARM_SOUND_BASE64 = 'data:audio/wav;base64,UklGRmAEAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YSAEAAC9/73/v/+9/8D/wf/D/8T/xv/I/8n/y//L/8r/x//D/7//uv+5/7v/uv+7/7z/vP+9/77/wP/B/8P/xP/G/8j/yf/L/8z/zf/M/8r/x//D/7//uv+2/7L/sf+v/63/q/+o/6f/pP+k/6T/pP+n/6n/qv+u/7D/s/+3/7f/sv+w/6v/qP+j/57/mv+U/5D/j/+O/4//kP+T/5X/mf+a/5v/n/+h/6P/pP+m/6f/qP+n/6X/ov+e/5n/kv+P/4v/iP+G/4T/hP+G/4f/iP+K/4z/j/+R/5P/lf+Z/5v/nv+g/6L/pf+m/6f/qf+p/6f/pv+k/6H/nv+a/5T/kP+N/4n/hv+C/3//f/+A/4L/hP+G/4j/iv+M/47/kP+T/5X/mP+Z/5r/mv+Z/5f/lP+R/47/jP+J/4L/fP91/2//bf9w/3L/df96/3//gf+E/4f/iP+K/4//kf+V/5n/mv+c/57/nv+c/5n/lf+R/47/jf+K/4f/gP97/3X/cv9s/2n/a/9u/3D/c/92/3f/d/9x/2r/Z/9i/2H/Y/9l/2j/b/9y/3b/eP98/3//g/+D/4T/hP+C/37/d/9s/2b/Yf9f/13/Xf9f/2D/Yv9m/2r/c/94/3v/fv+A/4L/hP+G/4b/hP+C/3//d/9t/2f/Yv9f/17/Xf9e/1//Yf9j/2b/af9u/3H/d/96/3v/e/94/3L/af9l/2D/Xv9b/1j/V/9X/1f/V/9Z/1v/Xv9g/2T/aP9u/3L/d/95/3n/d/9x/2n/Zv9i/1//Xf9b/1j/Vv9V/1T/Uv9S/1L/U/9V/1f/Wf9c/1//Yv9n/2r/b/9y/3f/d/9w/2f/Yf9d/1r/V/9U/0//T/9O/07/T/9U/1b/Wf9b/1//Yv9k/2f/aP9o/2f/Y/9d/1r/Vv9T/07/S/9J/0j/R/9G/0b/Rv9H/0n/TP9P/1T/Wf9c/1//Yf9j/2X/Zv9l/2L/Xv9b/1f/U/9P/0z/Sv9I/0X/Q/9A/z//Ov85/zn/Of88/z//Qv9G/0r/T/9W/1//Yv9l/2f/aP9o/2b/Yv9d/1r/Vv9U/0//TP9K/0f/Q/8//zn/M/8u/yn/J/8j/yH/IP8h/yL/J/8s/zL/O/9C/0f/TP9U/1f/WP9Y/1f/U/9N/0j/Qv88/zL/KP8g/yv/PP9J/1f/dQB1/7X/uv+9/8H/xP/H/8n/y//N/9D/0P/N/8r/x//E/8D/vf+5/7b/tP+0/7T/tP+1/7X/tf+1/7X/tf+0/7D/qv+m/5//mv+U/5D/j/+N/4z/jP+O/4//kP+T/5X/mf+a/5v/nP+e/5//of+j/6X/pv+n/6f/pf+j/5//mv+U/4//jP+J/4P/fP94/3b/cv9w/2//c/93/3n/fv+C/4b/iP+K/4z/jv+Q/5L/lP+W/5j/mf+a/5v/nP+b/5f/kv+P/4v/iP+F/4D/ev90/2v/Z/9j/2D/Yv9k/2f/av9v/3H/d/96/3//g/+E/4b/iP+J/4v/jP+O/5D/kv+T/5D/j/+M/4n/h/+C/3//e/92/3D/av9n/2P/YP9f/1//YP9j/2X/aP9s/3D/d/96/3//gf+E/4b/iP+J/4r/jP+O/5D/kv+T/5H/jv+L/4j/hf+A/3r/cv9p/2X/Y/9g/1//YP9i/2X/aP9t/3H/df96/3//gf+E/4b/iP+J/4r/jP+O/4//j/+M/4n/h/+B/3z/df9x/2n/Zf9j/2D/YP9j/2X/aP9t/3H/df96/3//gf+D/4T/hf+G/4b/hf+E/4L/f/96/3b/cf9p/2b/Y/9g/2D/Y/9l/2f/a/9v/3H/df96/3//gP+B/4L/gv+C/4L/gf+A/3z/ef92/3H/av9n/2T/Yv9h/2L/ZP9n/2r/b/9x/3X/ef98/3//gP+B/4L/gv+A/3z/ef91/2//a/9p/2X/Y/9h/2D/YP9j/2X/aP9t/3H/d/96/3z/f/9//33/ef91/2//a/9p/2b/Y/9h/2D/YP9j/2X/aP9s/2//cP9x/3L/cf9w/2v/aP9l/2L/Yf9f/1//YP9j/2X/aP9t/3H/df96/3//gP+B/4L/gv+A/33/eP90/2z/aP9m/2L/Yf9h/2L/ZP9n/2r/bv9w/3L/df95/3v/fP9+/3v/df9x/2n/Zv9i/1//Xv9d/13/Xf9e/1//Yf9j/2X/aP9s/27/bv9s/2n/Zv9k/2L/Yf9g/2D/Yv9k/2b/aP9s/3D/cv91/3b/cv9v/2n/Zv9k/2L/Yf9f/17/Xf9d/13/Xv9f/2D/Yv9k/2b/aP9s/23/bf9r/2f/Y/9f/1v/V/9W/1b/Vv9W/1f/Wf9b/1//Yv9l/2j/b/9x/3X/d/9z/2v/Z/9i/1//W/9Z/1f/Vf9V/1X/Vf9W/1j/Wv9d/2D/Y/9m/2n/bf9v/23/av9o/2X/Yv9f/1v/WP9W/1T/Uv9S/1L/U/9V/1f/Wf9b/1//Yf9j/2X/aP9p/2n/Zv9k/1//Wv9V/1D/TP9L/0n/R/9G/0b/Rv9H/0n/TP9P/1T/Wf9b/1//Yf9i/2L/Yf9f/1v/Vv9R/07/S/9I/0X/Qf8+/zv/Of85/zn/O/8//0L/Rv9K/0//Vf9Y/1v/Xf9d/1v/V/9T/07/S/9G/0H/Ov8y/yj/Iv8e/xr/Fv8U/xT/FP8V/xb/Gv8e/yL/KP8y/zr/Qf9G/0v/Tv9T/1T/Uf9O/0n/Q/88/zD/J/8e/xX/D/8L/wn/Cf8J/wv/D/8V/x7/J/8w/zz/Q/9J/04='

// A pleasant, melodic sound to signify successful completion.
export const SUCCESS_SOUND_BASE64 = 'data:audio/wav;base64,UklGRqgBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YYABAAC2/7n/wf/G/8z/1f/c/+D/5v/t//v/FwAnADgASgBYAGYAcgB8AIgAkgCeAKQAqgCuALQAugDAAMYA1ADfAOwBCAEmATMBQwFLAVMBXwFwAXgBigGbAcoB3gHyAgsCGgIuAkYCTgJWAl4CYgJnAm4CcwJ9Ao0CoAKqAsUC1ALmAvEDEgMgAyIDNAM+A0sDWANhA24DhAOOA5kDpwOxA7wDxwPQA94D/AQMBREFGgUrBTYFVwVeBW0FfQWMBZkFqgW8BcAF2AXuBhgGJgY0BkIGVwZsBn0GkgaqBrIGvgjECfUKFApsCnwKwgLhAu0DCQMbAysDRANVA2ADawOBBAgEGQQzBUMFWQVtBYIFlgWuBcwF2AYCBhMGMAZGBl0GcQeDB5gHvgjVCf8KbgrBCw0LJgswCz0LXgt/DBEMVwx5DI4MrAzBDNsO7xAFEbwS+hQIFGQU8xXfF0cYwRnlG5gd/h8IIAghGiMoI5wj8CQcJqon5SjVKlgr2iwILVouVC+UMMwwzDDeMP0x/zLfM/A02jX2N3E4zjneO3E9kj7TQCpBfUJEQtJFo0ZPR5NKK0uTTTdQN1AbUTdSO1M9VDhWNFdAWEhZSFoMXQxfEGQYZRhsGXEcgRyTHQMeFx9NIBYfdiC2ImUjhyTDJ5Uo/SkXLCst/C/NMUQ09DXcOJU6yD5mQHpCl0eWTCxPQVVuWXVfT2V/bYFyf3Xge4t+kH+sgLCAt4S9hbuIgomAioyNkJGSk5WWl5mbnZ6fo6Slpqeoqausrq+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19vf4+fr7/P3+/w=='

--- END OF FILE assets/production-sounds.ts ---

--- START OF FILE assets/notification.ts ---
// A simple, royalty-free notification sound ("Ting") in Base64 format.
// This keeps the app self-contained without needing external asset files.
export const NOTIFICATION_SOUND_BASE64 = 'data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU';
--- END OF FILE assets/notification.ts ---

--- START OF FILE services/useAudioAlerts.ts ---
import { useRef, useCallback } from 'react';
import { NOTIFICATION_SOUND_BASE64 } from '../assets/notification';

export const useAudioAlerts = () => {
    // useRef ensures the Audio object is created only once.
    const audioRef = useRef<HTMLAudioElement | null>(null);

    const initializeAudio = useCallback(() => {
        if (!audioRef.current) {
            audioRef.current = new Audio(NOTIFICATION_SOUND_BASE64);
        }
    }, []);

    const playAlert = useCallback(() => {
        // Initialize on first play attempt to comply with browser autoplay policies
        initializeAudio();

        if (audioRef.current) {
            // Reset time to play again if it's already playing
            audioRef.current.currentTime = 0;
            audioRef.current.play().catch(error => {
                // Autoplay was prevented. This is common before any user interaction.
                // We can log this, but typically we don't need to show an error to the user.
                console.warn("Audio playback failed:", error);
            });
        }
    }, [initializeAudio]);

    return { playAlert };
};
--- END OF FILE services/useAudioAlerts.ts ---

--- START OF FILE services/firebase.ts ---
import { initializeApp } from 'firebase/app';
import { getFirestore } from 'firebase/firestore';

const firebaseConfig = {
  apiKey: "AIzaSyB6-Z_XRfCHWQ3ujGzkj4ck1WtI9gX6O_k",
  authDomain: "cafestesiaapp.firebaseapp.com",
  projectId: "cafestesiaapp",
  storageBucket: "cafestesiaapp.firebasestorage.app",
  messagingSenderId: "639191492553",
  appId: "1:639191492553:web:dc6ce00f5622dc686faa18",
  measurementId: "G-Z52JP10C1R"
};


// Initialize Firebase
const app = initializeApp(firebaseConfig);

// Get a reference to the database service using the v9 modular API
export const db = getFirestore(app);
--- END OF FILE services/firebase.ts ---

--- START OF FILE services/useCategories.ts ---
import { useState, useEffect } from 'react';
import { Category } from '../types';
import { db } from './firebase';
import { 
    collection, 
    query, 
    orderBy, 
    onSnapshot, 
    writeBatch, 
    doc, 
    addDoc, 
    updateDoc, 
    deleteDoc 
} from 'firebase/firestore';

const categoriesCollectionRef = collection(db, 'categories');

const MOCK_CATEGORIES: Omit<Category, 'id'>[] = [
    { name: 'Secos' },
    { name: 'Refrigerados' },
    { name: 'Lácteos' },
    { name: 'Bebidas' },
    { name: 'Carnes' },
    { name: 'Frutas y Verduras' },
];

const seedInitialData = async () => {
    console.log("Seeding initial categories to Firestore...");
    const batch = writeBatch(db);
    MOCK_CATEGORIES.forEach(category => {
        const newDocRef = doc(categoriesCollectionRef);
        batch.set(newDocRef, category);
    });
    await batch.commit();
    console.log("Initial categories seeded.");
};

export const useCategories = () => {
    const [categories, setCategories] = useState<Category[]>([]);

    useEffect(() => {
        const q = query(categoriesCollectionRef, orderBy("name"));
        const unsubscribe = onSnapshot(q, (snapshot) => {
            if (snapshot.empty && MOCK_CATEGORIES.length > 0) {
                seedInitialData();
                return;
            }
            const categoriesData = snapshot.docs.map(doc => ({
                id: doc.id,
                ...doc.data()
            } as Category));
            setCategories(categoriesData);
        }, (error) => {
            console.error("Error fetching categories:", error);
        });

        return () => unsubscribe();
    }, []);

    const addCategory = async (categoryData: Omit<Category, 'id'>) => {
        try {
            await addDoc(categoriesCollectionRef, categoryData);
        } catch (error) {
            console.error("Error adding category:", error);
        }
    };

    const updateCategory = async (categoryData: Category) => {
        const { id, ...data } = categoryData;
        const categoryRef = doc(db, 'categories', id);
        try {
            await updateDoc(categoryRef, data);
        } catch (error) {
            console.error("Error updating category:", error);
        }
    };

    const deleteCategory = async (categoryId: string) => {
        const categoryRef = doc(db, 'categories', categoryId);
        try {
            await deleteDoc(categoryRef);
        } catch (error) {
            console.error("Error deleting category:", error);
        }
    };

    return { categories, addCategory, updateCategory, deleteCategory };
};
--- END OF FILE services/useCategories.ts ---

--- START OF FILE services/useGemini.ts ---

--- END OF FILE services/useGemini.ts ---

--- START OF FILE services/useRecipeLog.ts ---
import { useState, useEffect } from 'react';
import { RecipeFeedback } from '../types';
import { db } from './firebase';
import { 
    collection, 
    query, 
    orderBy, 
    onSnapshot, 
    addDoc 
} from 'firebase/firestore';

const recipeFeedbackCollectionRef = collection(db, 'recipeFeedback');

export const useRecipeLog = () => {
    const [feedbackLog, setFeedbackLog] = useState<RecipeFeedback[]>([]);

    useEffect(() => {
        const q = query(recipeFeedbackCollectionRef, orderBy("date", "desc"));
        const unsubscribe = onSnapshot(q, (snapshot) => {
            const feedbackData = snapshot.docs.map(doc => ({
                id: doc.id,
                ...doc.data()
            } as RecipeFeedback));
            setFeedbackLog(feedbackData);
        }, (error) => {
            console.error("Error fetching recipe feedback:", error);
        });
        
        return () => unsubscribe();
    }, []);

    const addFeedback = async (feedbackData: Omit<RecipeFeedback, 'id' | 'date'>) => {
        try {
            await addDoc(recipeFeedbackCollectionRef, {
                ...feedbackData,
                date: new Date().toISOString(),
            });
        } catch (error) {
            console.error("Error adding feedback:", error);
        }
    };

    return { feedbackLog, addFeedback };
};
--- END OF FILE services/useRecipeLog.ts ---

--- START OF FILE services/useUsers.ts ---
import { useState, useEffect } from 'react';
import { User } from '../types';
import { db } from './firebase';
import { 
    collection, 
    query, 
    orderBy, 
    onSnapshot, 
    writeBatch, 
    doc, 
    addDoc, 
    updateDoc, 
    deleteDoc 
} from 'firebase/firestore';

const usersCollectionRef = collection(db, 'users');

const MOCK_USERS: Omit<User, 'id'>[] = [
    { name: 'Ali', color: '#ec4899' },     // pink-500
    { name: 'Fer', color: '#8b5cf6' },     // purple-500
    { name: 'Claudia', color: '#14b8a6' }, // teal-500
    { name: 'Admin', color: '#f59e0b' },   // amber-500
];

const seedInitialData = async () => {
    console.log("Seeding initial users to Firestore...");
    const batch = writeBatch(db);
    MOCK_USERS.forEach(user => {
        const newDocRef = doc(usersCollectionRef);
        batch.set(newDocRef, user);
    });
    await batch.commit();
    console.log("Initial users seeded.");
};

export const useUsers = () => {
    const [users, setUsers] = useState<User[]>([]);

    useEffect(() => {
        const q = query(usersCollectionRef, orderBy("name"));
        const unsubscribe = onSnapshot(q, (snapshot) => {
            if (snapshot.empty && MOCK_USERS.length > 0) {
                seedInitialData();
                return;
            }
            const usersData = snapshot.docs.map(doc => ({
                id: doc.id,
                ...doc.data()
            } as User));
            setUsers(usersData);
        }, (error) => {
            console.error("Error fetching users:", error);
        });

        return () => unsubscribe();
    }, []);

    const addUser = async (userData: Omit<User, 'id'>) => {
        try {
            await addDoc(usersCollectionRef, userData);
        } catch (error) {
            console.error("Error adding user:", error);
        }
    };

    const updateUser = async (userData: User) => {
        const { id, ...data } = userData;
        const userRef = doc(db, 'users', id);
        try {
            await updateDoc(userRef, data);
        } catch (error) {
            console.error("Error updating user:", error);
        }
    };

    const deleteUser = async (userId: string) => {
        const userRef = doc(db, 'users', userId);
        try {
            await deleteDoc(userRef);
        } catch (error) {
            console.error("Error deleting user:", error);
        }
    };

    return { users, addUser, updateUser, deleteUser };
};
--- END OF FILE services/useUsers.ts ---

--- START OF FILE services/useProviders.ts ---
import { useState, useEffect } from 'react';
import { Provider } from '../types';
import { db } from './firebase';
import { 
    collection, 
    query, 
    orderBy, 
    onSnapshot, 
    writeBatch, 
    doc, 
    addDoc, 
    updateDoc, 
    deleteDoc 
} from 'firebase/firestore';

const providersCollectionRef = collection(db, 'providers');

const MOCK_PROVIDERS: Omit<Provider, 'id'>[] = [
    { name: 'Proveedor A' },
    { name: 'Proveedor B' },
    { name: 'Proveedor C' },
    { name: 'Supermercado' },
    { name: 'Tostador Local' },
];

const seedInitialData = async () => {
    console.log("Seeding initial providers to Firestore...");
    const batch = writeBatch(db);
    MOCK_PROVIDERS.forEach(provider => {
        const newDocRef = doc(providersCollectionRef);
        batch.set(newDocRef, provider);
    });
    await batch.commit();
    console.log("Initial providers seeded.");
};

export const useProviders = () => {
    const [providers, setProviders] = useState<Provider[]>([]);

    useEffect(() => {
        const q = query(providersCollectionRef, orderBy("name"));
        const unsubscribe = onSnapshot(q, (snapshot) => {
            if (snapshot.empty && MOCK_PROVIDERS.length > 0) {
                seedInitialData();
                return;
            }
            const providersData = snapshot.docs.map(doc => ({
                id: doc.id,
                ...doc.data()
            } as Provider));
            setProviders(providersData);
        }, (error) => {
            console.error("Error fetching providers:", error);
        });

        return () => unsubscribe();
    }, []);

    const addProvider = async (providerData: Omit<Provider, 'id'>) => {
        try {
            await addDoc(providersCollectionRef, providerData);
        } catch (error) {
            console.error("Error adding provider:", error);
        }
    };

    const updateProvider = async (providerData: Provider) => {
        const { id, ...data } = providerData;
        const providerRef = doc(db, 'providers', id);
        try {
            await updateDoc(providerRef, data);
        } catch (error) {
            console.error("Error updating provider:", error);
        }
    };

    const deleteProvider = async (providerId: string) => {
        const providerRef = doc(db, 'providers', providerId);
        try {
            await deleteDoc(providerRef);
        } catch (error) {
            console.error("Error deleting provider:", error);
        }
    };

    return { providers, addProvider, updateProvider, deleteProvider };
};
--- END OF FILE services/useProviders.ts ---

--- START OF FILE services/useInventory.ts ---
import { useState, useEffect } from 'react';
import { InventoryItem, PurchaseRecord } from '../types';
import { MOCK_INVENTORY_ITEMS } from '../constants';
import { db } from './firebase';
import { 
    collection, 
    query, 
    orderBy, 
    onSnapshot, 
    writeBatch, 
    doc, 
    addDoc, 
    updateDoc, 
    deleteDoc, 
    increment, 
    arrayUnion 
} from 'firebase/firestore';

const inventoryCollectionRef = collection(db, 'inventory');

interface StockChangeDetails {
    itemId: string;
    change: number;
    purchaseDetails?: {
        totalPrice: number;
        providerName: string;
    }
}

const seedInitialData = async () => {
    console.log("Seeding initial inventory to Firestore...");
    const batch = writeBatch(db);
    MOCK_INVENTORY_ITEMS.forEach(item => {
        const newDocRef = doc(inventoryCollectionRef);
        batch.set(newDocRef, { ...item, purchaseHistory: [] });
    });
    await batch.commit();
    console.log("Initial inventory seeded.");
};

export const useInventory = () => {
    const [items, setItems] = useState<InventoryItem[]>([]);

    useEffect(() => {
        const q = query(inventoryCollectionRef, orderBy("name"));

        const unsubscribe = onSnapshot(q, (snapshot) => {
             if (snapshot.empty && MOCK_INVENTORY_ITEMS.length > 0) {
                seedInitialData();
                return;
            }
            const inventoryData = snapshot.docs.map(doc => ({
                id: doc.id,
                ...doc.data(),
            } as InventoryItem));
            setItems(inventoryData);
        }, (error) => {
            console.error("Error fetching inventory items:", error);
        });

        return () => unsubscribe();
    }, []);

    const addItem = async (itemData: Omit<InventoryItem, 'id' | 'purchaseHistory'>) => {
        try {
            await addDoc(inventoryCollectionRef, { ...itemData, purchaseHistory: [] });
        } catch (error) {
            console.error("Error adding inventory item:", error);
        }
    };

    const updateItem = async (itemData: InventoryItem) => {
        const { id, ...data } = itemData;
        const itemRef = doc(db, 'inventory', id);
        try {
            await updateDoc(itemRef, data);
        } catch (error) {
            console.error("Error updating item:", error);
        }
    };

    const deleteItem = async (itemId: string) => {
        const itemRef = doc(db, 'inventory', itemId);
        try {
            await deleteDoc(itemRef);
        } catch (error) {
            console.error("Error deleting item:", error);
        }
    };

    const recordStockChange = async ({ itemId, change, purchaseDetails }: StockChangeDetails) => {
        const itemRef = doc(db, 'inventory', itemId);
        try {
            const updatePayload: { [key: string]: any } = {
                currentStock: increment(change)
            };

            if (purchaseDetails && change > 0) {
                const newPurchase: PurchaseRecord = {
                    id: `pur-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`,
                    date: new Date().toISOString(),
                    quantity: change,
                    totalPrice: purchaseDetails.totalPrice,
                    providerName: purchaseDetails.providerName,
                };
                updatePayload.purchaseHistory = arrayUnion(newPurchase);
            }
            
            await updateDoc(itemRef, updatePayload);

        } catch (error) {
            console.error("Error recording stock change:", error);
        }
    };

    return { items, addItem, updateItem, deleteItem, recordStockChange };
};
--- END OF FILE services/useInventory.ts ---

--- START OF FILE services/useKanban.ts ---
import { useState, useEffect } from 'react';
import { KanbanTask, TaskStatus } from '../types';
import { INITIAL_TASKS } from '../constants';
import { db } from './firebase';
import { 
    collection, 
    query, 
    orderBy, 
    onSnapshot, 
    writeBatch, 
    doc, 
    updateDoc, 
    addDoc, 
    deleteDoc 
} from 'firebase/firestore';

const tasksCollectionRef = collection(db, 'tasks');

const seedInitialData = async () => {
    console.log("Seeding initial tasks to Firestore...");
    const batch = writeBatch(db);
    INITIAL_TASKS.forEach(task => {
        const newDocRef = doc(tasksCollectionRef); // Create a new doc with a generated ID
        batch.set(newDocRef, task);
    });
    await batch.commit();
    console.log("Initial tasks seeded.");
};

export const useKanban = () => {
    const [tasks, setTasks] = useState<KanbanTask[]>([]);

    useEffect(() => {
        const q = query(tasksCollectionRef, orderBy("date"), orderBy("time"));
        
        const unsubscribe = onSnapshot(q, (snapshot) => {
            // Seed data if the collection is empty on first load
            if (snapshot.empty && INITIAL_TASKS.length > 0) {
                seedInitialData();
                return; // The snapshot will re-fire once data is added
            }

            const tasksData = snapshot.docs.map(doc => ({
                id: doc.id,
                ...doc.data(),
            } as KanbanTask));
            setTasks(tasksData);
        }, (error) => {
            console.error("Error fetching Kanban tasks:", error);
        });

        return () => unsubscribe();
    }, []);

    const updateTaskStatus = async (taskId: string, newStatus: TaskStatus) => {
        const taskRef = doc(db, 'tasks', taskId);
        try {
            await updateDoc(taskRef, { status: newStatus });
        } catch (error) {
            console.error("Error updating task status:", error);
        }
    };

    const addTask = async (taskData: Omit<KanbanTask, 'id' | 'status'>) => {
        try {
            await addDoc(tasksCollectionRef, { ...taskData, status: 'todo' });
        } catch (error) {
            console.error("Error adding task:", error);
        }
    };
    
    const addMultipleTasks = async (tasksData: Omit<KanbanTask, 'id' | 'status'>[]) => {
        try {
            const batch = writeBatch(db);
            tasksData.forEach(taskData => {
                const docRef = doc(tasksCollectionRef);
                batch.set(docRef, { ...taskData, status: 'todo' });
            });
            await batch.commit();
        } catch (error) {
            console.error("Error adding multiple tasks:", error);
        }
    };

    const updateTask = async (updatedTask: KanbanTask) => {
        const { id, ...taskData } = updatedTask;
        const taskRef = doc(db, 'tasks', id);
        try {
            await updateDoc(taskRef, taskData);
        } catch (error) {
            console.error("Error updating task:", error);
        }
    };

    const deleteTask = async (taskId: string) => {
        const taskRef = doc(db, 'tasks', taskId);
        try {
            await deleteDoc(taskRef);
        } catch (error) {
            console.error("Error deleting task:", error);
        }
    };

    return { tasks, updateTaskStatus, addTask, addMultipleTasks, updateTask, deleteTask };
};
--- END OF FILE services/useKanban.ts ---

