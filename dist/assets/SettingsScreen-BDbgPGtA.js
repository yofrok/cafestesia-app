import{r as d,j as e,I as h,R as z}from"./index-BeXU68QM.js";import{M as j}from"./Modal-Dn4WetBp.js";const F=({isOpen:l,onClose:r,onSave:n,onDelete:i,provider:t})=>{const[a,o]=d.useState("");d.useEffect(()=>{l&&o((t==null?void 0:t.name)||"")},[l,t]);const x=c=>{if(c.preventDefault(),!a.trim())return;const m={name:a.trim()};n(t?{...m,id:t.id}:m),r()},u=()=>{t&&window.confirm(`¿Estás seguro de que quieres eliminar al proveedor "${t.name}"?`)&&(i(t.id),r())};return e.jsx(j,{isOpen:l,onClose:r,title:t?"Editar Proveedor":"Añadir Proveedor",children:e.jsxs("form",{onSubmit:x,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre del Proveedor"}),e.jsx("input",{type:"text",value:a,onChange:c=>o(c.target.value),required:!0,autoFocus:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("div",{children:t&&e.jsx("button",{type:"button",onClick:u,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Eliminar"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:r,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})]})})},$=({isOpen:l,onClose:r,onSave:n,onDelete:i,category:t})=>{const[a,o]=d.useState("");d.useEffect(()=>{l&&o((t==null?void 0:t.name)||"")},[l,t]);const x=c=>{if(c.preventDefault(),!a.trim())return;const m={name:a.trim()};n(t?{...m,id:t.id}:m),r()},u=()=>{t&&window.confirm(`¿Estás seguro de que quieres eliminar la categoría "${t.name}"?`)&&(i(t.id),r())};return e.jsx(j,{isOpen:l,onClose:r,title:t?"Editar Categoría":"Añadir Categoría",children:e.jsxs("form",{onSubmit:x,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre de la Categoría"}),e.jsx("input",{type:"text",value:a,onChange:c=>o(c.target.value),required:!0,autoFocus:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("div",{children:t&&e.jsx("button",{type:"button",onClick:u,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Eliminar"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:r,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})]})})},B=({rating:l})=>e.jsx("div",{className:"flex",children:[...Array(5)].map((r,n)=>e.jsx(h,{name:"star",size:16,className:n<l?"text-yellow-400 fill-current":"text-gray-300"},n))}),G=({isOpen:l,onClose:r,recipe:n,feedbackLog:i})=>{const t=[...i].sort((a,o)=>new Date(o.date).getTime()-new Date(a.date).getTime());return e.jsxs(j,{isOpen:l,onClose:r,title:`Bitácora de: ${n.name}`,children:[e.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:t.length>0?e.jsx("div",{className:"space-y-4",children:t.map(a=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:new Date(a.date).toLocaleString("es-ES",{dateStyle:"long",timeStyle:"short"})}),e.jsx(B,{rating:a.rating})]}),e.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:a.notes||"Sin notas."})]},a.id))}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay feedback registrado para esta receta todavía."})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:r,className:"py-2 px-6 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cerrar"})})]})},_=({providersHook:l,categoriesHook:r,recipeLogHook:n})=>{const[i,t]=d.useState("production"),{providers:a,addProvider:o,updateProvider:x,deleteProvider:u}=l,[c,m]=d.useState(!1),[w,p]=d.useState(null),{categories:y,addCategory:C,updateCategory:S,deleteCategory:E}=r,[P,g]=d.useState(!1),[k,v]=d.useState(null),{feedbackLog:A}=n,[b,N]=d.useState(null),I=s=>{p(s),m(!0)},M=()=>{p(null),m(!0)},D=s=>{"id"in s?x(s):o(s)},q=s=>{v(s),g(!0)},R=()=>{v(null),g(!0)},L=s=>{"id"in s?S(s):C(s)},f=({tab:s,label:O,icon:T})=>e.jsxs("button",{onClick:()=>t(s),className:`flex items-center gap-2 py-3 px-4 text-sm md:text-base font-bold border-b-4 transition-colors ${i===s?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-800"}`,children:[e.jsx(h,{name:T,size:18}),O]});return e.jsxs("div",{className:"p-4 md:p-6 bg-gray-50 h-full overflow-y-auto",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(f,{tab:"production",label:"Producción",icon:"cake-slice"}),e.jsx(f,{tab:"inventory",label:"Inventario",icon:"archive"}),e.jsx(f,{tab:"operations",label:"Operaciones",icon:"clipboard-kanban"})]})}),e.jsxs("div",{className:"mt-6",children:[i==="production"&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-4",children:"Bitácora de Recetas"}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:Object.values(z).map(s=>e.jsxs("li",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:s.name}),e.jsx("button",{onClick:()=>N(s),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Ver Historial"})]},s.id))})})]}),i==="inventory"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700",children:"Proveedores de Inventario"}),e.jsxs("button",{onClick:M,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(h,{name:"plus-circle",size:16}),"Añadir Proveedor"]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:a.length>0?a.map(s=>e.jsxs("li",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:s.name}),e.jsx("button",{onClick:()=>I(s),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Editar"})]},s.id)):e.jsx("li",{className:"p-4 text-center text-gray-500",children:"No hay proveedores. ¡Añade el primero!"})})})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700",children:"Categorías de Inventario"}),e.jsxs("button",{onClick:R,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(h,{name:"plus-circle",size:16}),"Añadir Categoría"]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:y.length>0?y.map(s=>e.jsxs("li",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:s.name}),e.jsx("button",{onClick:()=>q(s),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Editar"})]},s.id)):e.jsx("li",{className:"p-4 text-center text-gray-500",children:"No hay categorías. ¡Añade la primera!"})})})]})]}),i==="operations"&&e.jsxs("div",{className:"text-center py-16 text-gray-500 bg-white rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("p",{className:"font-bold",children:"Próximamente"}),e.jsx("p",{children:"Aquí encontrarás las configuraciones para las operaciones diarias."})]})]})]}),e.jsx(F,{isOpen:c,onClose:()=>m(!1),onSave:D,onDelete:u,provider:w}),e.jsx($,{isOpen:P,onClose:()=>g(!1),onSave:L,onDelete:E,category:k}),b&&e.jsx(G,{isOpen:!!b,onClose:()=>N(null),recipe:b,feedbackLog:A.filter(s=>s.recipeId===b.id)})]})};export{_ as default};
