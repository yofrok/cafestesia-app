import{r as s,j as e,I as y}from"./index-Ba-L6XfD.js";import{M as E}from"./Modal-CT2Q9ouJ.js";const P=({onSwipe:f,text:j,icon:x="chevron-right",className:c="bg-gray-100 border-gray-300",disabled:d=!1})=>{const[t,u]=s.useState(!1),[m,r]=s.useState(0),[a,h]=s.useState(!1),o=s.useRef(null),l=s.useRef(null);s.useEffect(()=>{d&&(r(0),u(!1))},[d]);const b=()=>{d||a||u(!0)},n=g=>{if(!t||!o.current||!l.current)return;const p=o.current.getBoundingClientRect(),v=l.current.offsetWidth,k=p.width-v-8;let N=g-p.left-v/2;N=Math.max(0,Math.min(N,k)),r(N)},i=()=>{if(!t||!o.current||!l.current)return;const p=o.current.getBoundingClientRect().width-l.current.offsetWidth-8,v=p*.9;m>=v?(r(p),h(!0),f(),setTimeout(()=>{h(!1),r(0)},1e3)):r(0),u(!1)},w=()=>b(),R=g=>t&&n(g.clientX),S=()=>i(),D=()=>t&&i(),M=()=>b(),z=g=>t&&n(g.touches[0].clientX),C=()=>i();return e.jsxs("div",{className:`relative h-14 rounded-full overflow-hidden select-none shadow-inner border ${d?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${c}`,ref:o,onMouseMove:R,onMouseUp:S,onMouseLeave:D,onTouchMove:z,onTouchEnd:C,children:[e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center z-0",children:[e.jsx("span",{className:`text-sm font-bold uppercase tracking-widest transition-opacity duration-300 ${t?"opacity-50":"text-gray-500"}`,children:a?"¡Completado!":j}),!a&&!t&&e.jsx("div",{className:"absolute right-4 animate-pulse text-gray-400",children:e.jsx(y,{name:"chevron-right",size:20})})]}),e.jsx("div",{ref:l,className:`absolute top-1 bottom-1 left-1 w-12 rounded-full flex items-center justify-center z-10 shadow-md border border-gray-100 transition-transform duration-100 ease-out ${a?"bg-green-500":"bg-white"}`,style:{transform:`translateX(${m}px)`,transition:t?"none":"transform 0.3s ease-out"},onMouseDown:w,onTouchStart:M,children:e.jsx(y,{name:a?"check":x,className:a?"text-white":"text-blue-600",size:24})}),e.jsx("div",{className:"absolute top-0 bottom-0 left-0 bg-green-500/20 z-0 transition-all duration-100 ease-out",style:{width:`${m+24}px`}})]})},q=({isOpen:f,onClose:j,process:x,users:c,onConfirm:d})=>{var b;const t=((b=x.recipe)==null?void 0:b.outputQuantity)||1,[u,m]=s.useState(String(t)),[r,a]=s.useState(""),[h,o]=s.useState("");s.useEffect(()=>{f&&(m(String(t)),a(c.length>0?c[0].name:""),o(""))},[f,t,c]);const l=n=>{n.preventDefault();const i=parseFloat(u);if(isNaN(i)||i<0){o("Por favor ingresa una cantidad válida.");return}if(!r){o("Debes seleccionar quién realizó la producción.");return}d(x,i,r)};return e.jsx(E,{isOpen:f,onClose:j,title:"Finalizar y Firmar Producción",children:e.jsxs("form",{onSubmit:l,className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-bold text-blue-900 text-lg",children:x.name}),e.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Registra el resultado final para el historial y el inventario."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Cantidad Producida Real"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:u,onChange:n=>m(n.target.value),className:"flex-1 p-3 border border-gray-300 rounded-lg text-lg font-bold text-center focus:ring-2 focus:ring-blue-500 focus:outline-none",step:"any"}),e.jsx("span",{className:"font-bold text-gray-500 bg-gray-100 px-3 py-3 rounded-lg border border-gray-200",children:"Unidades"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Si hubo merma durante el horneado, ingresa solo lo que salió bien."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Responsable (Firma Digital)"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{name:"check-circle",className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("select",{value:r,onChange:n=>a(n.target.value),className:"w-full p-3 pl-10 border border-gray-300 rounded-lg bg-white font-medium focus:ring-2 focus:ring-blue-500 focus:outline-none appearance-none",children:c.map(n=>e.jsx("option",{value:n.name,children:n.name},n.id))})]})]}),h&&e.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg text-sm font-medium flex items-center gap-2",children:[e.jsx(y,{name:"alert-triangle",size:16}),h]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:j,className:"flex-1 py-3 bg-gray-100 text-gray-700 font-bold rounded-lg hover:bg-gray-200 transition-colors",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"flex-1 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors shadow-md flex justify-center items-center gap-2",children:[e.jsx(y,{name:"archive",size:20}),"Registrar"]})]})]})})};export{q as P,P as S};
