const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BreadProductionScreen-FgNtOgaE.js","assets/Modal-DnuRkEv0.js","assets/OperationsScreen-C5g1rruT.js","assets/InventoryScreen-DetKpyGd.js","assets/SettingsScreen-TlRtfuin.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function h0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mm={exports:{}},Ha={},Om={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qs=Symbol.for("react.element"),f0=Symbol.for("react.portal"),d0=Symbol.for("react.fragment"),p0=Symbol.for("react.strict_mode"),m0=Symbol.for("react.profiler"),g0=Symbol.for("react.provider"),y0=Symbol.for("react.context"),v0=Symbol.for("react.forward_ref"),_0=Symbol.for("react.suspense"),E0=Symbol.for("react.memo"),w0=Symbol.for("react.lazy"),Id=Symbol.iterator;function T0(t){return t===null||typeof t!="object"?null:(t=Id&&t[Id]||t["@@iterator"],typeof t=="function"?t:null)}var Fm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jm=Object.assign,Um={};function gi(t,e,n){this.props=t,this.context=e,this.refs=Um,this.updater=n||Fm}gi.prototype.isReactComponent={};gi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bm(){}bm.prototype=gi.prototype;function qc(t,e,n){this.props=t,this.context=e,this.refs=Um,this.updater=n||Fm}var Qc=qc.prototype=new bm;Qc.constructor=qc;jm(Qc,gi.prototype);Qc.isPureReactComponent=!0;var Ad=Array.isArray,zm=Object.prototype.hasOwnProperty,Kc={current:null},Bm={key:!0,ref:!0,__self:!0,__source:!0};function $m(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)zm.call(e,r)&&!Bm.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:qs,type:t,key:s,ref:a,props:i,_owner:Kc.current}}function I0(t,e){return{$$typeof:qs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gc(t){return typeof t=="object"&&t!==null&&t.$$typeof===qs}function A0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sd=/\/+/g;function Ql(t,e){return typeof t=="object"&&t!==null&&t.key!=null?A0(""+t.key):e.toString(36)}function qo(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case qs:case f0:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Ql(a,0):r,Ad(i)?(n="",t!=null&&(n=t.replace(Sd,"$&/")+"/"),qo(i,e,n,"",function(h){return h})):i!=null&&(Gc(i)&&(i=I0(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Sd,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Ad(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Ql(s,l);a+=qo(s,e,n,u,i)}else if(u=T0(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Ql(s,l++),a+=qo(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function So(t,e,n){if(t==null)return t;var r=[],i=0;return qo(t,r,"","",function(s){return e.call(n,s,i++)}),r}function S0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ot={current:null},Qo={transition:null},P0={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:Qo,ReactCurrentOwner:Kc};function Wm(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:So,forEach:function(t,e,n){So(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return So(t,function(){e++}),e},toArray:function(t){return So(t,function(e){return e})||[]},only:function(t){if(!Gc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Component=gi;J.Fragment=d0;J.Profiler=m0;J.PureComponent=qc;J.StrictMode=p0;J.Suspense=_0;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P0;J.act=Wm;J.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=jm({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Kc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)zm.call(e,u)&&!Bm.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:qs,type:t.type,key:i,ref:s,props:r,_owner:a}};J.createContext=function(t){return t={$$typeof:y0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:g0,_context:t},t.Consumer=t};J.createElement=$m;J.createFactory=function(t){var e=$m.bind(null,t);return e.type=t,e};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:v0,render:t}};J.isValidElement=Gc;J.lazy=function(t){return{$$typeof:w0,_payload:{_status:-1,_result:t},_init:S0}};J.memo=function(t,e){return{$$typeof:E0,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=Qo.transition;Qo.transition={};try{t()}finally{Qo.transition=e}};J.unstable_act=Wm;J.useCallback=function(t,e){return ot.current.useCallback(t,e)};J.useContext=function(t){return ot.current.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t){return ot.current.useDeferredValue(t)};J.useEffect=function(t,e){return ot.current.useEffect(t,e)};J.useId=function(){return ot.current.useId()};J.useImperativeHandle=function(t,e,n){return ot.current.useImperativeHandle(t,e,n)};J.useInsertionEffect=function(t,e){return ot.current.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return ot.current.useLayoutEffect(t,e)};J.useMemo=function(t,e){return ot.current.useMemo(t,e)};J.useReducer=function(t,e,n){return ot.current.useReducer(t,e,n)};J.useRef=function(t){return ot.current.useRef(t)};J.useState=function(t){return ot.current.useState(t)};J.useSyncExternalStore=function(t,e,n){return ot.current.useSyncExternalStore(t,e,n)};J.useTransition=function(){return ot.current.useTransition()};J.version="18.3.1";Om.exports=J;var H=Om.exports;const C0=h0(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0=H,k0=Symbol.for("react.element"),x0=Symbol.for("react.fragment"),V0=Object.prototype.hasOwnProperty,D0=R0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N0={key:!0,ref:!0,__self:!0,__source:!0};function Hm(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)V0.call(e,r)&&!N0.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:k0,type:t,key:s,ref:a,props:i,_owner:D0.current}}Ha.Fragment=x0;Ha.jsx=Hm;Ha.jsxs=Hm;Mm.exports=Ha;var S=Mm.exports,Ru={},qm={exports:{}},Tt={},Qm={exports:{}},Km={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,K){var X=z.length;z.push(K);e:for(;0<X;){var ge=X-1>>>1,ae=z[ge];if(0<i(ae,K))z[ge]=K,z[X]=ae,X=ge;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var K=z[0],X=z.pop();if(X!==K){z[0]=X;e:for(var ge=0,ae=z.length,Ae=ae>>>1;ge<Ae;){var Yt=2*(ge+1)-1,Xt=z[Yt],Jt=Yt+1,Zt=z[Jt];if(0>i(Xt,X))Jt<ae&&0>i(Zt,Xt)?(z[ge]=Zt,z[Jt]=X,ge=Jt):(z[ge]=Xt,z[Yt]=X,ge=Yt);else if(Jt<ae&&0>i(Zt,X))z[ge]=Zt,z[Jt]=X,ge=Jt;else break e}}return K}function i(z,K){var X=z.sortIndex-K.sortIndex;return X!==0?X:z.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,v=3,P=!1,R=!1,V=!1,N=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(z){for(var K=n(h);K!==null;){if(K.callback===null)r(h);else if(K.startTime<=z)r(h),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(h)}}function L(z){if(V=!1,C(z),!R)if(n(u)!==null)R=!0,xi(b);else{var K=n(h);K!==null&&Gt(L,K.startTime-z)}}function b(z,K){R=!1,V&&(V=!1,A(m),m=-1),P=!0;var X=v;try{for(C(K),g=n(u);g!==null&&(!(g.expirationTime>K)||z&&!I());){var ge=g.callback;if(typeof ge=="function"){g.callback=null,v=g.priorityLevel;var ae=ge(g.expirationTime<=K);K=t.unstable_now(),typeof ae=="function"?g.callback=ae:g===n(u)&&r(u),C(K)}else r(u);g=n(u)}if(g!==null)var Ae=!0;else{var Yt=n(h);Yt!==null&&Gt(L,Yt.startTime-K),Ae=!1}return Ae}finally{g=null,v=X,P=!1}}var U=!1,_=null,m=-1,y=5,E=-1;function I(){return!(t.unstable_now()-E<y)}function k(){if(_!==null){var z=t.unstable_now();E=z;var K=!0;try{K=_(!0,z)}finally{K?T():(U=!1,_=null)}}else U=!1}var T;if(typeof w=="function")T=function(){w(k)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,bt=xe.port2;xe.port1.onmessage=k,T=function(){bt.postMessage(null)}}else T=function(){N(k,0)};function xi(z){_=z,U||(U=!0,T())}function Gt(z,K){m=N(function(){z(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){R||P||(R=!0,xi(b))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var X=v;v=K;try{return z()}finally{v=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=v;v=z;try{return K()}finally{v=X}},t.unstable_scheduleCallback=function(z,K,X){var ge=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ge+X:ge):X=ge,z){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=X+ae,z={id:d++,callback:K,priorityLevel:z,startTime:X,expirationTime:ae,sortIndex:-1},X>ge?(z.sortIndex=X,e(h,z),n(u)===null&&z===n(h)&&(V?(A(m),m=-1):V=!0,Gt(L,X-ge))):(z.sortIndex=ae,e(u,z),R||P||(R=!0,xi(b))),z},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(z){var K=v;return function(){var X=v;v=K;try{return z.apply(this,arguments)}finally{v=X}}}})(Km);Qm.exports=Km;var L0=Qm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0=H,wt=L0;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gm=new Set,Es={};function Tr(t,e){ti(t,e),ti(t+"Capture",e)}function ti(t,e){for(Es[t]=e,t=0;t<e.length;t++)Gm.add(e[t])}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ku=Object.prototype.hasOwnProperty,O0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pd={},Cd={};function F0(t){return ku.call(Cd,t)?!0:ku.call(Pd,t)?!1:O0.test(t)?Cd[t]=!0:(Pd[t]=!0,!1)}function j0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function U0(t,e,n,r){if(e===null||typeof e>"u"||j0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function at(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new at(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];We[e]=new at(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new at(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new at(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new at(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new at(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new at(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new at(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new at(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yc=/[\-:]([a-z])/g;function Xc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yc,Xc);We[e]=new at(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yc,Xc);We[e]=new at(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yc,Xc);We[e]=new at(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new at(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new at(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jc(t,e,n,r){var i=We.hasOwnProperty(e)?We[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(U0(e,n,i,r)&&(n=null),r||i===null?F0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var yn=M0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Po=Symbol.for("react.element"),Mr=Symbol.for("react.portal"),Or=Symbol.for("react.fragment"),Zc=Symbol.for("react.strict_mode"),xu=Symbol.for("react.profiler"),Ym=Symbol.for("react.provider"),Xm=Symbol.for("react.context"),eh=Symbol.for("react.forward_ref"),Vu=Symbol.for("react.suspense"),Du=Symbol.for("react.suspense_list"),th=Symbol.for("react.memo"),Tn=Symbol.for("react.lazy"),Jm=Symbol.for("react.offscreen"),Rd=Symbol.iterator;function Wi(t){return t===null||typeof t!="object"?null:(t=Rd&&t[Rd]||t["@@iterator"],typeof t=="function"?t:null)}var _e=Object.assign,Kl;function Zi(t){if(Kl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kl=e&&e[1]||""}return`
`+Kl+t}var Gl=!1;function Yl(t,e){if(!t||Gl)return"";Gl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{Gl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zi(t):""}function b0(t){switch(t.tag){case 5:return Zi(t.type);case 16:return Zi("Lazy");case 13:return Zi("Suspense");case 19:return Zi("SuspenseList");case 0:case 2:case 15:return t=Yl(t.type,!1),t;case 11:return t=Yl(t.type.render,!1),t;case 1:return t=Yl(t.type,!0),t;default:return""}}function Nu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Or:return"Fragment";case Mr:return"Portal";case xu:return"Profiler";case Zc:return"StrictMode";case Vu:return"Suspense";case Du:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Xm:return(t.displayName||"Context")+".Consumer";case Ym:return(t._context.displayName||"Context")+".Provider";case eh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case th:return e=t.displayName||null,e!==null?e:Nu(t.type)||"Memo";case Tn:e=t._payload,t=t._init;try{return Nu(t(e))}catch{}}return null}function z0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nu(e);case 8:return e===Zc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function B0(t){var e=Zm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Co(t){t._valueTracker||(t._valueTracker=B0(t))}function eg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Zm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ca(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lu(t,e){var n=e.checked;return _e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tg(t,e){e=e.checked,e!=null&&Jc(t,"checked",e,!1)}function Mu(t,e){tg(t,e);var n=bn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ou(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ou(t,e.type,bn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ou(t,e,n){(e!=="number"||ca(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var es=Array.isArray;function Qr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Fu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return _e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(es(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bn(n)}}function ng(t,e){var n=bn(e.value),r=bn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ju(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ro,ig=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ro=Ro||document.createElement("div"),Ro.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ro.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ws(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var as={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$0=["Webkit","ms","Moz","O"];Object.keys(as).forEach(function(t){$0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),as[e]=as[t]})});function sg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||as.hasOwnProperty(t)&&as[t]?(""+e).trim():e+"px"}function og(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=sg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var W0=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uu(t,e){if(e){if(W0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function bu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zu=null;function nh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bu=null,Kr=null,Gr=null;function Nd(t){if(t=Gs(t)){if(typeof Bu!="function")throw Error(F(280));var e=t.stateNode;e&&(e=Ya(e),Bu(t.stateNode,t.type,e))}}function ag(t){Kr?Gr?Gr.push(t):Gr=[t]:Kr=t}function lg(){if(Kr){var t=Kr,e=Gr;if(Gr=Kr=null,Nd(t),e)for(t=0;t<e.length;t++)Nd(e[t])}}function ug(t,e){return t(e)}function cg(){}var Xl=!1;function hg(t,e,n){if(Xl)return t(e,n);Xl=!0;try{return ug(t,e,n)}finally{Xl=!1,(Kr!==null||Gr!==null)&&(cg(),lg())}}function Ts(t,e){var n=t.stateNode;if(n===null)return null;var r=Ya(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var $u=!1;if(cn)try{var Hi={};Object.defineProperty(Hi,"passive",{get:function(){$u=!0}}),window.addEventListener("test",Hi,Hi),window.removeEventListener("test",Hi,Hi)}catch{$u=!1}function H0(t,e,n,r,i,s,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(d){this.onError(d)}}var ls=!1,ha=null,fa=!1,Wu=null,q0={onError:function(t){ls=!0,ha=t}};function Q0(t,e,n,r,i,s,a,l,u){ls=!1,ha=null,H0.apply(q0,arguments)}function K0(t,e,n,r,i,s,a,l,u){if(Q0.apply(this,arguments),ls){if(ls){var h=ha;ls=!1,ha=null}else throw Error(F(198));fa||(fa=!0,Wu=h)}}function Ir(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ld(t){if(Ir(t)!==t)throw Error(F(188))}function G0(t){var e=t.alternate;if(!e){if(e=Ir(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ld(i),t;if(s===r)return Ld(i),e;s=s.sibling}throw Error(F(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function dg(t){return t=G0(t),t!==null?pg(t):null}function pg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pg(t);if(e!==null)return e;t=t.sibling}return null}var mg=wt.unstable_scheduleCallback,Md=wt.unstable_cancelCallback,Y0=wt.unstable_shouldYield,X0=wt.unstable_requestPaint,Pe=wt.unstable_now,J0=wt.unstable_getCurrentPriorityLevel,rh=wt.unstable_ImmediatePriority,gg=wt.unstable_UserBlockingPriority,da=wt.unstable_NormalPriority,Z0=wt.unstable_LowPriority,yg=wt.unstable_IdlePriority,qa=null,Wt=null;function eE(t){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(qa,t,void 0,(t.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:rE,tE=Math.log,nE=Math.LN2;function rE(t){return t>>>=0,t===0?32:31-(tE(t)/nE|0)|0}var ko=64,xo=4194304;function ts(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=ts(l):(s&=a,s!==0&&(r=ts(s)))}else a=n&~i,a!==0?r=ts(a):s!==0&&(r=ts(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ot(e),i=1<<n,r|=t[n],e&=~i;return r}function iE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Ot(s),l=1<<a,u=i[a];u===-1?(!(l&n)||l&r)&&(i[a]=iE(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Hu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vg(){var t=ko;return ko<<=1,!(ko&4194240)&&(ko=64),t}function Jl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ot(e),t[e]=n}function oE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ot(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ih(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ot(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var se=0;function _g(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Eg,sh,wg,Tg,Ig,qu=!1,Vo=[],kn=null,xn=null,Vn=null,Is=new Map,As=new Map,An=[],aE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Od(t,e){switch(t){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":Is.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":As.delete(e.pointerId)}}function qi(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Gs(e),e!==null&&sh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function lE(t,e,n,r,i){switch(e){case"focusin":return kn=qi(kn,t,e,n,r,i),!0;case"dragenter":return xn=qi(xn,t,e,n,r,i),!0;case"mouseover":return Vn=qi(Vn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Is.set(s,qi(Is.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,As.set(s,qi(As.get(s)||null,t,e,n,r,i)),!0}return!1}function Ag(t){var e=rr(t.target);if(e!==null){var n=Ir(e);if(n!==null){if(e=n.tag,e===13){if(e=fg(n),e!==null){t.blockedOn=e,Ig(t.priority,function(){wg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ko(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zu=r,n.target.dispatchEvent(r),zu=null}else return e=Gs(n),e!==null&&sh(e),t.blockedOn=n,!1;e.shift()}return!0}function Fd(t,e,n){Ko(t)&&n.delete(e)}function uE(){qu=!1,kn!==null&&Ko(kn)&&(kn=null),xn!==null&&Ko(xn)&&(xn=null),Vn!==null&&Ko(Vn)&&(Vn=null),Is.forEach(Fd),As.forEach(Fd)}function Qi(t,e){t.blockedOn===e&&(t.blockedOn=null,qu||(qu=!0,wt.unstable_scheduleCallback(wt.unstable_NormalPriority,uE)))}function Ss(t){function e(i){return Qi(i,t)}if(0<Vo.length){Qi(Vo[0],t);for(var n=1;n<Vo.length;n++){var r=Vo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kn!==null&&Qi(kn,t),xn!==null&&Qi(xn,t),Vn!==null&&Qi(Vn,t),Is.forEach(e),As.forEach(e),n=0;n<An.length;n++)r=An[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<An.length&&(n=An[0],n.blockedOn===null);)Ag(n),n.blockedOn===null&&An.shift()}var Yr=yn.ReactCurrentBatchConfig,ma=!0;function cE(t,e,n,r){var i=se,s=Yr.transition;Yr.transition=null;try{se=1,oh(t,e,n,r)}finally{se=i,Yr.transition=s}}function hE(t,e,n,r){var i=se,s=Yr.transition;Yr.transition=null;try{se=4,oh(t,e,n,r)}finally{se=i,Yr.transition=s}}function oh(t,e,n,r){if(ma){var i=Qu(t,e,n,r);if(i===null)lu(t,e,r,ga,n),Od(t,r);else if(lE(i,t,e,n,r))r.stopPropagation();else if(Od(t,r),e&4&&-1<aE.indexOf(t)){for(;i!==null;){var s=Gs(i);if(s!==null&&Eg(s),s=Qu(t,e,n,r),s===null&&lu(t,e,r,ga,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else lu(t,e,r,null,n)}}var ga=null;function Qu(t,e,n,r){if(ga=null,t=nh(r),t=rr(t),t!==null)if(e=Ir(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ga=t,null}function Sg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J0()){case rh:return 1;case gg:return 4;case da:case Z0:return 16;case yg:return 536870912;default:return 16}default:return 16}}var Pn=null,ah=null,Go=null;function Pg(){if(Go)return Go;var t,e=ah,n=e.length,r,i="value"in Pn?Pn.value:Pn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Go=i.slice(t,1<r?1-r:void 0)}function Yo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Do(){return!0}function jd(){return!1}function It(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Do:jd,this.isPropagationStopped=jd,this}return _e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Do)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Do)},persist:function(){},isPersistent:Do}),e}var yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lh=It(yi),Ks=_e({},yi,{view:0,detail:0}),fE=It(Ks),Zl,eu,Ki,Qa=_e({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ki&&(Ki&&t.type==="mousemove"?(Zl=t.screenX-Ki.screenX,eu=t.screenY-Ki.screenY):eu=Zl=0,Ki=t),Zl)},movementY:function(t){return"movementY"in t?t.movementY:eu}}),Ud=It(Qa),dE=_e({},Qa,{dataTransfer:0}),pE=It(dE),mE=_e({},Ks,{relatedTarget:0}),tu=It(mE),gE=_e({},yi,{animationName:0,elapsedTime:0,pseudoElement:0}),yE=It(gE),vE=_e({},yi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_E=It(vE),EE=_e({},yi,{data:0}),bd=It(EE),wE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=IE[t])?!!e[t]:!1}function uh(){return AE}var SE=_e({},Ks,{key:function(t){if(t.key){var e=wE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uh,charCode:function(t){return t.type==="keypress"?Yo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),PE=It(SE),CE=_e({},Qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zd=It(CE),RE=_e({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uh}),kE=It(RE),xE=_e({},yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),VE=It(xE),DE=_e({},Qa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),NE=It(DE),LE=[9,13,27,32],ch=cn&&"CompositionEvent"in window,us=null;cn&&"documentMode"in document&&(us=document.documentMode);var ME=cn&&"TextEvent"in window&&!us,Cg=cn&&(!ch||us&&8<us&&11>=us),Bd=" ",$d=!1;function Rg(t,e){switch(t){case"keyup":return LE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fr=!1;function OE(t,e){switch(t){case"compositionend":return kg(e);case"keypress":return e.which!==32?null:($d=!0,Bd);case"textInput":return t=e.data,t===Bd&&$d?null:t;default:return null}}function FE(t,e){if(Fr)return t==="compositionend"||!ch&&Rg(t,e)?(t=Pg(),Go=ah=Pn=null,Fr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Cg&&e.locale!=="ko"?null:e.data;default:return null}}var jE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jE[t.type]:e==="textarea"}function xg(t,e,n,r){ag(r),e=ya(e,"onChange"),0<e.length&&(n=new lh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var cs=null,Ps=null;function UE(t){zg(t,0)}function Ka(t){var e=br(t);if(eg(e))return t}function bE(t,e){if(t==="change")return e}var Vg=!1;if(cn){var nu;if(cn){var ru="oninput"in document;if(!ru){var Hd=document.createElement("div");Hd.setAttribute("oninput","return;"),ru=typeof Hd.oninput=="function"}nu=ru}else nu=!1;Vg=nu&&(!document.documentMode||9<document.documentMode)}function qd(){cs&&(cs.detachEvent("onpropertychange",Dg),Ps=cs=null)}function Dg(t){if(t.propertyName==="value"&&Ka(Ps)){var e=[];xg(e,Ps,t,nh(t)),hg(UE,e)}}function zE(t,e,n){t==="focusin"?(qd(),cs=e,Ps=n,cs.attachEvent("onpropertychange",Dg)):t==="focusout"&&qd()}function BE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ka(Ps)}function $E(t,e){if(t==="click")return Ka(e)}function WE(t,e){if(t==="input"||t==="change")return Ka(e)}function HE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jt=typeof Object.is=="function"?Object.is:HE;function Cs(t,e){if(jt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ku.call(e,i)||!jt(t[i],e[i]))return!1}return!0}function Qd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kd(t,e){var n=Qd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qd(n)}}function Ng(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ng(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Lg(){for(var t=window,e=ca();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ca(t.document)}return e}function hh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qE(t){var e=Lg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ng(n.ownerDocument.documentElement,n)){if(r!==null&&hh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Kd(n,s);var a=Kd(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var QE=cn&&"documentMode"in document&&11>=document.documentMode,jr=null,Ku=null,hs=null,Gu=!1;function Gd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gu||jr==null||jr!==ca(r)||(r=jr,"selectionStart"in r&&hh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hs&&Cs(hs,r)||(hs=r,r=ya(Ku,"onSelect"),0<r.length&&(e=new lh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jr)))}function No(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ur={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionend:No("Transition","TransitionEnd")},iu={},Mg={};cn&&(Mg=document.createElement("div").style,"AnimationEvent"in window||(delete Ur.animationend.animation,delete Ur.animationiteration.animation,delete Ur.animationstart.animation),"TransitionEvent"in window||delete Ur.transitionend.transition);function Ga(t){if(iu[t])return iu[t];if(!Ur[t])return t;var e=Ur[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Mg)return iu[t]=e[n];return t}var Og=Ga("animationend"),Fg=Ga("animationiteration"),jg=Ga("animationstart"),Ug=Ga("transitionend"),bg=new Map,Yd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hn(t,e){bg.set(t,e),Tr(e,[t])}for(var su=0;su<Yd.length;su++){var ou=Yd[su],KE=ou.toLowerCase(),GE=ou[0].toUpperCase()+ou.slice(1);Hn(KE,"on"+GE)}Hn(Og,"onAnimationEnd");Hn(Fg,"onAnimationIteration");Hn(jg,"onAnimationStart");Hn("dblclick","onDoubleClick");Hn("focusin","onFocus");Hn("focusout","onBlur");Hn(Ug,"onTransitionEnd");ti("onMouseEnter",["mouseout","mouseover"]);ti("onMouseLeave",["mouseout","mouseover"]);ti("onPointerEnter",["pointerout","pointerover"]);ti("onPointerLeave",["pointerout","pointerover"]);Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ns));function Xd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,K0(r,e,void 0,t),t.currentTarget=null}function zg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Xd(i,l,h),s=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Xd(i,l,h),s=u}}}if(fa)throw t=Wu,fa=!1,Wu=null,t}function he(t,e){var n=e[ec];n===void 0&&(n=e[ec]=new Set);var r=t+"__bubble";n.has(r)||(Bg(e,t,2,!1),n.add(r))}function au(t,e,n){var r=0;e&&(r|=4),Bg(n,t,r,e)}var Lo="_reactListening"+Math.random().toString(36).slice(2);function Rs(t){if(!t[Lo]){t[Lo]=!0,Gm.forEach(function(n){n!=="selectionchange"&&(YE.has(n)||au(n,!1,t),au(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lo]||(e[Lo]=!0,au("selectionchange",!1,e))}}function Bg(t,e,n,r){switch(Sg(e)){case 1:var i=cE;break;case 4:i=hE;break;default:i=oh}n=i.bind(null,e,n,t),i=void 0,!$u||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function lu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;l!==null;){if(a=rr(l),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}l=l.parentNode}}r=r.return}hg(function(){var h=s,d=nh(n),g=[];e:{var v=bg.get(t);if(v!==void 0){var P=lh,R=t;switch(t){case"keypress":if(Yo(n)===0)break e;case"keydown":case"keyup":P=PE;break;case"focusin":R="focus",P=tu;break;case"focusout":R="blur",P=tu;break;case"beforeblur":case"afterblur":P=tu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=Ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=pE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=kE;break;case Og:case Fg:case jg:P=yE;break;case Ug:P=VE;break;case"scroll":P=fE;break;case"wheel":P=NE;break;case"copy":case"cut":case"paste":P=_E;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=zd}var V=(e&4)!==0,N=!V&&t==="scroll",A=V?v!==null?v+"Capture":null:v;V=[];for(var w=h,C;w!==null;){C=w;var L=C.stateNode;if(C.tag===5&&L!==null&&(C=L,A!==null&&(L=Ts(w,A),L!=null&&V.push(ks(w,L,C)))),N)break;w=w.return}0<V.length&&(v=new P(v,R,null,n,d),g.push({event:v,listeners:V}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",P=t==="mouseout"||t==="pointerout",v&&n!==zu&&(R=n.relatedTarget||n.fromElement)&&(rr(R)||R[hn]))break e;if((P||v)&&(v=d.window===d?d:(v=d.ownerDocument)?v.defaultView||v.parentWindow:window,P?(R=n.relatedTarget||n.toElement,P=h,R=R?rr(R):null,R!==null&&(N=Ir(R),R!==N||R.tag!==5&&R.tag!==6)&&(R=null)):(P=null,R=h),P!==R)){if(V=Ud,L="onMouseLeave",A="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(V=zd,L="onPointerLeave",A="onPointerEnter",w="pointer"),N=P==null?v:br(P),C=R==null?v:br(R),v=new V(L,w+"leave",P,n,d),v.target=N,v.relatedTarget=C,L=null,rr(d)===h&&(V=new V(A,w+"enter",R,n,d),V.target=C,V.relatedTarget=N,L=V),N=L,P&&R)t:{for(V=P,A=R,w=0,C=V;C;C=Vr(C))w++;for(C=0,L=A;L;L=Vr(L))C++;for(;0<w-C;)V=Vr(V),w--;for(;0<C-w;)A=Vr(A),C--;for(;w--;){if(V===A||A!==null&&V===A.alternate)break t;V=Vr(V),A=Vr(A)}V=null}else V=null;P!==null&&Jd(g,v,P,V,!1),R!==null&&N!==null&&Jd(g,N,R,V,!0)}}e:{if(v=h?br(h):window,P=v.nodeName&&v.nodeName.toLowerCase(),P==="select"||P==="input"&&v.type==="file")var b=bE;else if(Wd(v))if(Vg)b=WE;else{b=BE;var U=zE}else(P=v.nodeName)&&P.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(b=$E);if(b&&(b=b(t,h))){xg(g,b,n,d);break e}U&&U(t,v,h),t==="focusout"&&(U=v._wrapperState)&&U.controlled&&v.type==="number"&&Ou(v,"number",v.value)}switch(U=h?br(h):window,t){case"focusin":(Wd(U)||U.contentEditable==="true")&&(jr=U,Ku=h,hs=null);break;case"focusout":hs=Ku=jr=null;break;case"mousedown":Gu=!0;break;case"contextmenu":case"mouseup":case"dragend":Gu=!1,Gd(g,n,d);break;case"selectionchange":if(QE)break;case"keydown":case"keyup":Gd(g,n,d)}var _;if(ch)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Fr?Rg(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(Cg&&n.locale!=="ko"&&(Fr||m!=="onCompositionStart"?m==="onCompositionEnd"&&Fr&&(_=Pg()):(Pn=d,ah="value"in Pn?Pn.value:Pn.textContent,Fr=!0)),U=ya(h,m),0<U.length&&(m=new bd(m,t,null,n,d),g.push({event:m,listeners:U}),_?m.data=_:(_=kg(n),_!==null&&(m.data=_)))),(_=ME?OE(t,n):FE(t,n))&&(h=ya(h,"onBeforeInput"),0<h.length&&(d=new bd("onBeforeInput","beforeinput",null,n,d),g.push({event:d,listeners:h}),d.data=_))}zg(g,e)})}function ks(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ya(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ts(t,n),s!=null&&r.unshift(ks(t,s,i)),s=Ts(t,e),s!=null&&r.push(ks(t,s,i))),t=t.return}return r}function Vr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jd(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Ts(n,s),u!=null&&a.unshift(ks(n,u,l))):i||(u=Ts(n,s),u!=null&&a.push(ks(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var XE=/\r\n?/g,JE=/\u0000|\uFFFD/g;function Zd(t){return(typeof t=="string"?t:""+t).replace(XE,`
`).replace(JE,"")}function Mo(t,e,n){if(e=Zd(e),Zd(t)!==e&&n)throw Error(F(425))}function va(){}var Yu=null,Xu=null;function Ju(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zu=typeof setTimeout=="function"?setTimeout:void 0,ZE=typeof clearTimeout=="function"?clearTimeout:void 0,ep=typeof Promise=="function"?Promise:void 0,ew=typeof queueMicrotask=="function"?queueMicrotask:typeof ep<"u"?function(t){return ep.resolve(null).then(t).catch(tw)}:Zu;function tw(t){setTimeout(function(){throw t})}function uu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ss(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ss(e)}function Dn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vi=Math.random().toString(36).slice(2),$t="__reactFiber$"+vi,xs="__reactProps$"+vi,hn="__reactContainer$"+vi,ec="__reactEvents$"+vi,nw="__reactListeners$"+vi,rw="__reactHandles$"+vi;function rr(t){var e=t[$t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hn]||n[$t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=tp(t);t!==null;){if(n=t[$t])return n;t=tp(t)}return e}t=n,n=t.parentNode}return null}function Gs(t){return t=t[$t]||t[hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function br(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function Ya(t){return t[xs]||null}var tc=[],zr=-1;function qn(t){return{current:t}}function de(t){0>zr||(t.current=tc[zr],tc[zr]=null,zr--)}function ue(t,e){zr++,tc[zr]=t.current,t.current=e}var zn={},tt=qn(zn),ht=qn(!1),hr=zn;function ni(t,e){var n=t.type.contextTypes;if(!n)return zn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ft(t){return t=t.childContextTypes,t!=null}function _a(){de(ht),de(tt)}function np(t,e,n){if(tt.current!==zn)throw Error(F(168));ue(tt,e),ue(ht,n)}function $g(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(F(108,z0(t)||"Unknown",i));return _e({},n,r)}function Ea(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zn,hr=tt.current,ue(tt,t),ue(ht,ht.current),!0}function rp(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=$g(t,e,hr),r.__reactInternalMemoizedMergedChildContext=t,de(ht),de(tt),ue(tt,t)):de(ht),ue(ht,n)}var sn=null,Xa=!1,cu=!1;function Wg(t){sn===null?sn=[t]:sn.push(t)}function iw(t){Xa=!0,Wg(t)}function Qn(){if(!cu&&sn!==null){cu=!0;var t=0,e=se;try{var n=sn;for(se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}sn=null,Xa=!1}catch(i){throw sn!==null&&(sn=sn.slice(t+1)),mg(rh,Qn),i}finally{se=e,cu=!1}}return null}var Br=[],$r=0,wa=null,Ta=0,At=[],St=0,fr=null,on=1,an="";function er(t,e){Br[$r++]=Ta,Br[$r++]=wa,wa=t,Ta=e}function Hg(t,e,n){At[St++]=on,At[St++]=an,At[St++]=fr,fr=t;var r=on;t=an;var i=32-Ot(r)-1;r&=~(1<<i),n+=1;var s=32-Ot(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,on=1<<32-Ot(e)+i|n<<i|r,an=s+t}else on=1<<s|n<<i|r,an=t}function fh(t){t.return!==null&&(er(t,1),Hg(t,1,0))}function dh(t){for(;t===wa;)wa=Br[--$r],Br[$r]=null,Ta=Br[--$r],Br[$r]=null;for(;t===fr;)fr=At[--St],At[St]=null,an=At[--St],At[St]=null,on=At[--St],At[St]=null}var Et=null,vt=null,pe=!1,Mt=null;function qg(t,e){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ip(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Et=t,vt=Dn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Et=t,vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fr!==null?{id:on,overflow:an}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Et=t,vt=null,!0):!1;default:return!1}}function nc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rc(t){if(pe){var e=vt;if(e){var n=e;if(!ip(t,e)){if(nc(t))throw Error(F(418));e=Dn(n.nextSibling);var r=Et;e&&ip(t,e)?qg(r,n):(t.flags=t.flags&-4097|2,pe=!1,Et=t)}}else{if(nc(t))throw Error(F(418));t.flags=t.flags&-4097|2,pe=!1,Et=t}}}function sp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Et=t}function Oo(t){if(t!==Et)return!1;if(!pe)return sp(t),pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ju(t.type,t.memoizedProps)),e&&(e=vt)){if(nc(t))throw Qg(),Error(F(418));for(;e;)qg(t,e),e=Dn(e.nextSibling)}if(sp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vt=Dn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vt=null}}else vt=Et?Dn(t.stateNode.nextSibling):null;return!0}function Qg(){for(var t=vt;t;)t=Dn(t.nextSibling)}function ri(){vt=Et=null,pe=!1}function ph(t){Mt===null?Mt=[t]:Mt.push(t)}var sw=yn.ReactCurrentBatchConfig;function Gi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Fo(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function op(t){var e=t._init;return e(t._payload)}function Kg(t){function e(A,w){if(t){var C=A.deletions;C===null?(A.deletions=[w],A.flags|=16):C.push(w)}}function n(A,w){if(!t)return null;for(;w!==null;)e(A,w),w=w.sibling;return null}function r(A,w){for(A=new Map;w!==null;)w.key!==null?A.set(w.key,w):A.set(w.index,w),w=w.sibling;return A}function i(A,w){return A=On(A,w),A.index=0,A.sibling=null,A}function s(A,w,C){return A.index=C,t?(C=A.alternate,C!==null?(C=C.index,C<w?(A.flags|=2,w):C):(A.flags|=2,w)):(A.flags|=1048576,w)}function a(A){return t&&A.alternate===null&&(A.flags|=2),A}function l(A,w,C,L){return w===null||w.tag!==6?(w=yu(C,A.mode,L),w.return=A,w):(w=i(w,C),w.return=A,w)}function u(A,w,C,L){var b=C.type;return b===Or?d(A,w,C.props.children,L,C.key):w!==null&&(w.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Tn&&op(b)===w.type)?(L=i(w,C.props),L.ref=Gi(A,w,C),L.return=A,L):(L=ra(C.type,C.key,C.props,null,A.mode,L),L.ref=Gi(A,w,C),L.return=A,L)}function h(A,w,C,L){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=vu(C,A.mode,L),w.return=A,w):(w=i(w,C.children||[]),w.return=A,w)}function d(A,w,C,L,b){return w===null||w.tag!==7?(w=lr(C,A.mode,L,b),w.return=A,w):(w=i(w,C),w.return=A,w)}function g(A,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=yu(""+w,A.mode,C),w.return=A,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Po:return C=ra(w.type,w.key,w.props,null,A.mode,C),C.ref=Gi(A,null,w),C.return=A,C;case Mr:return w=vu(w,A.mode,C),w.return=A,w;case Tn:var L=w._init;return g(A,L(w._payload),C)}if(es(w)||Wi(w))return w=lr(w,A.mode,C,null),w.return=A,w;Fo(A,w)}return null}function v(A,w,C,L){var b=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return b!==null?null:l(A,w,""+C,L);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Po:return C.key===b?u(A,w,C,L):null;case Mr:return C.key===b?h(A,w,C,L):null;case Tn:return b=C._init,v(A,w,b(C._payload),L)}if(es(C)||Wi(C))return b!==null?null:d(A,w,C,L,null);Fo(A,C)}return null}function P(A,w,C,L,b){if(typeof L=="string"&&L!==""||typeof L=="number")return A=A.get(C)||null,l(w,A,""+L,b);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Po:return A=A.get(L.key===null?C:L.key)||null,u(w,A,L,b);case Mr:return A=A.get(L.key===null?C:L.key)||null,h(w,A,L,b);case Tn:var U=L._init;return P(A,w,C,U(L._payload),b)}if(es(L)||Wi(L))return A=A.get(C)||null,d(w,A,L,b,null);Fo(w,L)}return null}function R(A,w,C,L){for(var b=null,U=null,_=w,m=w=0,y=null;_!==null&&m<C.length;m++){_.index>m?(y=_,_=null):y=_.sibling;var E=v(A,_,C[m],L);if(E===null){_===null&&(_=y);break}t&&_&&E.alternate===null&&e(A,_),w=s(E,w,m),U===null?b=E:U.sibling=E,U=E,_=y}if(m===C.length)return n(A,_),pe&&er(A,m),b;if(_===null){for(;m<C.length;m++)_=g(A,C[m],L),_!==null&&(w=s(_,w,m),U===null?b=_:U.sibling=_,U=_);return pe&&er(A,m),b}for(_=r(A,_);m<C.length;m++)y=P(_,A,m,C[m],L),y!==null&&(t&&y.alternate!==null&&_.delete(y.key===null?m:y.key),w=s(y,w,m),U===null?b=y:U.sibling=y,U=y);return t&&_.forEach(function(I){return e(A,I)}),pe&&er(A,m),b}function V(A,w,C,L){var b=Wi(C);if(typeof b!="function")throw Error(F(150));if(C=b.call(C),C==null)throw Error(F(151));for(var U=b=null,_=w,m=w=0,y=null,E=C.next();_!==null&&!E.done;m++,E=C.next()){_.index>m?(y=_,_=null):y=_.sibling;var I=v(A,_,E.value,L);if(I===null){_===null&&(_=y);break}t&&_&&I.alternate===null&&e(A,_),w=s(I,w,m),U===null?b=I:U.sibling=I,U=I,_=y}if(E.done)return n(A,_),pe&&er(A,m),b;if(_===null){for(;!E.done;m++,E=C.next())E=g(A,E.value,L),E!==null&&(w=s(E,w,m),U===null?b=E:U.sibling=E,U=E);return pe&&er(A,m),b}for(_=r(A,_);!E.done;m++,E=C.next())E=P(_,A,m,E.value,L),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?m:E.key),w=s(E,w,m),U===null?b=E:U.sibling=E,U=E);return t&&_.forEach(function(k){return e(A,k)}),pe&&er(A,m),b}function N(A,w,C,L){if(typeof C=="object"&&C!==null&&C.type===Or&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Po:e:{for(var b=C.key,U=w;U!==null;){if(U.key===b){if(b=C.type,b===Or){if(U.tag===7){n(A,U.sibling),w=i(U,C.props.children),w.return=A,A=w;break e}}else if(U.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Tn&&op(b)===U.type){n(A,U.sibling),w=i(U,C.props),w.ref=Gi(A,U,C),w.return=A,A=w;break e}n(A,U);break}else e(A,U);U=U.sibling}C.type===Or?(w=lr(C.props.children,A.mode,L,C.key),w.return=A,A=w):(L=ra(C.type,C.key,C.props,null,A.mode,L),L.ref=Gi(A,w,C),L.return=A,A=L)}return a(A);case Mr:e:{for(U=C.key;w!==null;){if(w.key===U)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(A,w.sibling),w=i(w,C.children||[]),w.return=A,A=w;break e}else{n(A,w);break}else e(A,w);w=w.sibling}w=vu(C,A.mode,L),w.return=A,A=w}return a(A);case Tn:return U=C._init,N(A,w,U(C._payload),L)}if(es(C))return R(A,w,C,L);if(Wi(C))return V(A,w,C,L);Fo(A,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(A,w.sibling),w=i(w,C),w.return=A,A=w):(n(A,w),w=yu(C,A.mode,L),w.return=A,A=w),a(A)):n(A,w)}return N}var ii=Kg(!0),Gg=Kg(!1),Ia=qn(null),Aa=null,Wr=null,mh=null;function gh(){mh=Wr=Aa=null}function yh(t){var e=Ia.current;de(Ia),t._currentValue=e}function ic(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xr(t,e){Aa=t,mh=Wr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ct=!0),t.firstContext=null)}function Rt(t){var e=t._currentValue;if(mh!==t)if(t={context:t,memoizedValue:e,next:null},Wr===null){if(Aa===null)throw Error(F(308));Wr=t,Aa.dependencies={lanes:0,firstContext:t}}else Wr=Wr.next=t;return e}var ir=null;function vh(t){ir===null?ir=[t]:ir.push(t)}function Yg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,vh(e)):(n.next=i.next,i.next=n),e.interleaved=n,fn(t,r)}function fn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var In=!1;function _h(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ln(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Nn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ne&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,fn(t,n)}return i=r.interleaved,i===null?(e.next=e,vh(r)):(e.next=i.next,i.next=e),r.interleaved=e,fn(t,n)}function Xo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ih(t,n)}}function ap(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sa(t,e,n,r){var i=t.updateQueue;In=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var g=i.baseState;a=0,d=h=u=null,l=s;do{var v=l.lane,P=l.eventTime;if((r&v)===v){d!==null&&(d=d.next={eventTime:P,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,V=l;switch(v=e,P=n,V.tag){case 1:if(R=V.payload,typeof R=="function"){g=R.call(P,g,v);break e}g=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=V.payload,v=typeof R=="function"?R.call(P,g,v):R,v==null)break e;g=_e({},g,v);break e;case 2:In=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[l]:v.push(l))}else P={eventTime:P,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=P,u=g):d=d.next=P,a|=v;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;v=l,l=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(d===null&&(u=g),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);pr|=a,t.lanes=a,t.memoizedState=g}}function lp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(F(191,i));i.call(r)}}}var Ys={},Ht=qn(Ys),Vs=qn(Ys),Ds=qn(Ys);function sr(t){if(t===Ys)throw Error(F(174));return t}function Eh(t,e){switch(ue(Ds,e),ue(Vs,t),ue(Ht,Ys),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ju(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ju(e,t)}de(Ht),ue(Ht,e)}function si(){de(Ht),de(Vs),de(Ds)}function Jg(t){sr(Ds.current);var e=sr(Ht.current),n=ju(e,t.type);e!==n&&(ue(Vs,t),ue(Ht,n))}function wh(t){Vs.current===t&&(de(Ht),de(Vs))}var ye=qn(0);function Pa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hu=[];function Th(){for(var t=0;t<hu.length;t++)hu[t]._workInProgressVersionPrimary=null;hu.length=0}var Jo=yn.ReactCurrentDispatcher,fu=yn.ReactCurrentBatchConfig,dr=0,ve=null,Ve=null,Oe=null,Ca=!1,fs=!1,Ns=0,ow=0;function Ge(){throw Error(F(321))}function Ih(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jt(t[n],e[n]))return!1;return!0}function Ah(t,e,n,r,i,s){if(dr=s,ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jo.current=t===null||t.memoizedState===null?cw:hw,t=n(r,i),fs){s=0;do{if(fs=!1,Ns=0,25<=s)throw Error(F(301));s+=1,Oe=Ve=null,e.updateQueue=null,Jo.current=fw,t=n(r,i)}while(fs)}if(Jo.current=Ra,e=Ve!==null&&Ve.next!==null,dr=0,Oe=Ve=ve=null,Ca=!1,e)throw Error(F(300));return t}function Sh(){var t=Ns!==0;return Ns=0,t}function Bt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?ve.memoizedState=Oe=t:Oe=Oe.next=t,Oe}function kt(){if(Ve===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=Ve.next;var e=Oe===null?ve.memoizedState:Oe.next;if(e!==null)Oe=e,Ve=t;else{if(t===null)throw Error(F(310));Ve=t,t={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Oe===null?ve.memoizedState=Oe=t:Oe=Oe.next=t}return Oe}function Ls(t,e){return typeof e=="function"?e(t):e}function du(t){var e=kt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Ve,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,u=null,h=s;do{var d=h.lane;if((dr&d)===d)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=g,a=r):u=u.next=g,ve.lanes|=d,pr|=d}h=h.next}while(h!==null&&h!==s);u===null?a=r:u.next=l,jt(r,e.memoizedState)||(ct=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ve.lanes|=s,pr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pu(t){var e=kt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);jt(s,e.memoizedState)||(ct=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Zg(){}function ey(t,e){var n=ve,r=kt(),i=e(),s=!jt(r.memoizedState,i);if(s&&(r.memoizedState=i,ct=!0),r=r.queue,Ph(ry.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,Ms(9,ny.bind(null,n,r,i,e),void 0,null),Fe===null)throw Error(F(349));dr&30||ty(n,e,i)}return i}function ty(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ny(t,e,n,r){e.value=n,e.getSnapshot=r,iy(e)&&sy(t)}function ry(t,e,n){return n(function(){iy(e)&&sy(t)})}function iy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jt(t,n)}catch{return!0}}function sy(t){var e=fn(t,1);e!==null&&Ft(e,t,1,-1)}function up(t){var e=Bt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:t},e.queue=t,t=t.dispatch=uw.bind(null,ve,t),[e.memoizedState,t]}function Ms(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function oy(){return kt().memoizedState}function Zo(t,e,n,r){var i=Bt();ve.flags|=t,i.memoizedState=Ms(1|e,n,void 0,r===void 0?null:r)}function Ja(t,e,n,r){var i=kt();r=r===void 0?null:r;var s=void 0;if(Ve!==null){var a=Ve.memoizedState;if(s=a.destroy,r!==null&&Ih(r,a.deps)){i.memoizedState=Ms(e,n,s,r);return}}ve.flags|=t,i.memoizedState=Ms(1|e,n,s,r)}function cp(t,e){return Zo(8390656,8,t,e)}function Ph(t,e){return Ja(2048,8,t,e)}function ay(t,e){return Ja(4,2,t,e)}function ly(t,e){return Ja(4,4,t,e)}function uy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cy(t,e,n){return n=n!=null?n.concat([t]):null,Ja(4,4,uy.bind(null,e,t),n)}function Ch(){}function hy(t,e){var n=kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ih(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function fy(t,e){var n=kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ih(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function dy(t,e,n){return dr&21?(jt(n,e)||(n=vg(),ve.lanes|=n,pr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ct=!0),t.memoizedState=n)}function aw(t,e){var n=se;se=n!==0&&4>n?n:4,t(!0);var r=fu.transition;fu.transition={};try{t(!1),e()}finally{se=n,fu.transition=r}}function py(){return kt().memoizedState}function lw(t,e,n){var r=Mn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},my(t))gy(e,n);else if(n=Yg(t,e,n,r),n!==null){var i=st();Ft(n,t,r,i),yy(n,e,r)}}function uw(t,e,n){var r=Mn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(my(t))gy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,jt(l,a)){var u=e.interleaved;u===null?(i.next=i,vh(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Yg(t,e,i,r),n!==null&&(i=st(),Ft(n,t,r,i),yy(n,e,r))}}function my(t){var e=t.alternate;return t===ve||e!==null&&e===ve}function gy(t,e){fs=Ca=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ih(t,n)}}var Ra={readContext:Rt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},cw={readContext:Rt,useCallback:function(t,e){return Bt().memoizedState=[t,e===void 0?null:e],t},useContext:Rt,useEffect:cp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zo(4194308,4,uy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zo(4,2,t,e)},useMemo:function(t,e){var n=Bt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Bt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lw.bind(null,ve,t),[r.memoizedState,t]},useRef:function(t){var e=Bt();return t={current:t},e.memoizedState=t},useState:up,useDebugValue:Ch,useDeferredValue:function(t){return Bt().memoizedState=t},useTransition:function(){var t=up(!1),e=t[0];return t=aw.bind(null,t[1]),Bt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ve,i=Bt();if(pe){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Fe===null)throw Error(F(349));dr&30||ty(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,cp(ry.bind(null,r,s,t),[t]),r.flags|=2048,Ms(9,ny.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Bt(),e=Fe.identifierPrefix;if(pe){var n=an,r=on;n=(r&~(1<<32-Ot(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ns++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ow++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hw={readContext:Rt,useCallback:hy,useContext:Rt,useEffect:Ph,useImperativeHandle:cy,useInsertionEffect:ay,useLayoutEffect:ly,useMemo:fy,useReducer:du,useRef:oy,useState:function(){return du(Ls)},useDebugValue:Ch,useDeferredValue:function(t){var e=kt();return dy(e,Ve.memoizedState,t)},useTransition:function(){var t=du(Ls)[0],e=kt().memoizedState;return[t,e]},useMutableSource:Zg,useSyncExternalStore:ey,useId:py,unstable_isNewReconciler:!1},fw={readContext:Rt,useCallback:hy,useContext:Rt,useEffect:Ph,useImperativeHandle:cy,useInsertionEffect:ay,useLayoutEffect:ly,useMemo:fy,useReducer:pu,useRef:oy,useState:function(){return pu(Ls)},useDebugValue:Ch,useDeferredValue:function(t){var e=kt();return Ve===null?e.memoizedState=t:dy(e,Ve.memoizedState,t)},useTransition:function(){var t=pu(Ls)[0],e=kt().memoizedState;return[t,e]},useMutableSource:Zg,useSyncExternalStore:ey,useId:py,unstable_isNewReconciler:!1};function Nt(t,e){if(t&&t.defaultProps){e=_e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:_e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Za={isMounted:function(t){return(t=t._reactInternals)?Ir(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=st(),i=Mn(t),s=ln(r,i);s.payload=e,n!=null&&(s.callback=n),e=Nn(t,s,i),e!==null&&(Ft(e,t,i,r),Xo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=st(),i=Mn(t),s=ln(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Nn(t,s,i),e!==null&&(Ft(e,t,i,r),Xo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=st(),r=Mn(t),i=ln(n,r);i.tag=2,e!=null&&(i.callback=e),e=Nn(t,i,r),e!==null&&(Ft(e,t,r,n),Xo(e,t,r))}};function hp(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Cs(n,r)||!Cs(i,s):!0}function vy(t,e,n){var r=!1,i=zn,s=e.contextType;return typeof s=="object"&&s!==null?s=Rt(s):(i=ft(e)?hr:tt.current,r=e.contextTypes,s=(r=r!=null)?ni(t,i):zn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Za,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function fp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Za.enqueueReplaceState(e,e.state,null)}function oc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},_h(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Rt(s):(s=ft(e)?hr:tt.current,i.context=ni(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(sc(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Za.enqueueReplaceState(i,i.state,null),Sa(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function oi(t,e){try{var n="",r=e;do n+=b0(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function mu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ac(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dw=typeof WeakMap=="function"?WeakMap:Map;function _y(t,e,n){n=ln(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xa||(xa=!0,yc=r),ac(t,e)},n}function Ey(t,e,n){n=ln(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ac(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ac(t,e),typeof r!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function dp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new dw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Cw.bind(null,t,e,n),e.then(t,t))}function pp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ln(-1,1),e.tag=2,Nn(n,e,1))),n.lanes|=1),t)}var pw=yn.ReactCurrentOwner,ct=!1;function it(t,e,n,r){e.child=t===null?Gg(e,null,n,r):ii(e,t.child,n,r)}function gp(t,e,n,r,i){n=n.render;var s=e.ref;return Xr(e,i),r=Ah(t,e,n,r,s,i),n=Sh(),t!==null&&!ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dn(t,e,i)):(pe&&n&&fh(e),e.flags|=1,it(t,e,r,i),e.child)}function yp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Mh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,wy(t,e,s,r,i)):(t=ra(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Cs,n(a,r)&&t.ref===e.ref)return dn(t,e,i)}return e.flags|=1,t=On(s,r),t.ref=e.ref,t.return=e,e.child=t}function wy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Cs(s,r)&&t.ref===e.ref)if(ct=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ct=!0);else return e.lanes=t.lanes,dn(t,e,i)}return lc(t,e,n,r,i)}function Ty(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(qr,yt),yt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(qr,yt),yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ue(qr,yt),yt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ue(qr,yt),yt|=r;return it(t,e,i,n),e.child}function Iy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lc(t,e,n,r,i){var s=ft(n)?hr:tt.current;return s=ni(e,s),Xr(e,i),n=Ah(t,e,n,r,s,i),r=Sh(),t!==null&&!ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dn(t,e,i)):(pe&&r&&fh(e),e.flags|=1,it(t,e,n,i),e.child)}function vp(t,e,n,r,i){if(ft(n)){var s=!0;Ea(e)}else s=!1;if(Xr(e,i),e.stateNode===null)ea(t,e),vy(e,n,r),oc(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Rt(h):(h=ft(n)?hr:tt.current,h=ni(e,h));var d=n.getDerivedStateFromProps,g=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&fp(e,a,r,h),In=!1;var v=e.memoizedState;a.state=v,Sa(e,r,a,i),u=e.memoizedState,l!==r||v!==u||ht.current||In?(typeof d=="function"&&(sc(e,n,d,r),u=e.memoizedState),(l=In||hp(e,n,l,r,v,u,h))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Xg(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Nt(e.type,l),a.props=h,g=e.pendingProps,v=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Rt(u):(u=ft(n)?hr:tt.current,u=ni(e,u));var P=n.getDerivedStateFromProps;(d=typeof P=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==g||v!==u)&&fp(e,a,r,u),In=!1,v=e.memoizedState,a.state=v,Sa(e,r,a,i);var R=e.memoizedState;l!==g||v!==R||ht.current||In?(typeof P=="function"&&(sc(e,n,P,r),R=e.memoizedState),(h=In||hp(e,n,h,r,v,R,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,R,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,R,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),a.props=r,a.state=R,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return uc(t,e,n,r,s,i)}function uc(t,e,n,r,i,s){Iy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&rp(e,n,!1),dn(t,e,s);r=e.stateNode,pw.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=ii(e,t.child,null,s),e.child=ii(e,null,l,s)):it(t,e,l,s),e.memoizedState=r.state,i&&rp(e,n,!0),e.child}function Ay(t){var e=t.stateNode;e.pendingContext?np(t,e.pendingContext,e.pendingContext!==e.context):e.context&&np(t,e.context,!1),Eh(t,e.containerInfo)}function _p(t,e,n,r,i){return ri(),ph(i),e.flags|=256,it(t,e,n,r),e.child}var cc={dehydrated:null,treeContext:null,retryLane:0};function hc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Sy(t,e,n){var r=e.pendingProps,i=ye.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ue(ye,i&1),t===null)return rc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=nl(a,r,0,null),t=lr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=hc(n),e.memoizedState=cc,t):Rh(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return mw(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=On(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=On(l,s):(s=lr(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?hc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=cc,r}return s=t.child,t=s.sibling,r=On(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Rh(t,e){return e=nl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jo(t,e,n,r){return r!==null&&ph(r),ii(e,t.child,null,n),t=Rh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mw(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=mu(Error(F(422))),jo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=nl({mode:"visible",children:r.children},i,0,null),s=lr(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ii(e,t.child,null,a),e.child.memoizedState=hc(a),e.memoizedState=cc,s);if(!(e.mode&1))return jo(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(F(419)),r=mu(s,r,void 0),jo(t,e,a,r)}if(l=(a&t.childLanes)!==0,ct||l){if(r=Fe,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,fn(t,i),Ft(r,t,i,-1))}return Lh(),r=mu(Error(F(421))),jo(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Rw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,vt=Dn(i.nextSibling),Et=e,pe=!0,Mt=null,t!==null&&(At[St++]=on,At[St++]=an,At[St++]=fr,on=t.id,an=t.overflow,fr=e),e=Rh(e,r.children),e.flags|=4096,e)}function Ep(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ic(t.return,e,n)}function gu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Py(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(it(t,e,r.children,n),r=ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ep(t,n,e);else if(t.tag===19)Ep(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ue(ye,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Pa(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Pa(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gu(e,!0,n,null,s);break;case"together":gu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ea(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=On(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=On(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gw(t,e,n){switch(e.tag){case 3:Ay(e),ri();break;case 5:Jg(e);break;case 1:ft(e.type)&&Ea(e);break;case 4:Eh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ue(Ia,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ue(ye,ye.current&1),e.flags|=128,null):n&e.child.childLanes?Sy(t,e,n):(ue(ye,ye.current&1),t=dn(t,e,n),t!==null?t.sibling:null);ue(ye,ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Py(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ue(ye,ye.current),r)break;return null;case 22:case 23:return e.lanes=0,Ty(t,e,n)}return dn(t,e,n)}var Cy,fc,Ry,ky;Cy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fc=function(){};Ry=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,sr(Ht.current);var s=null;switch(n){case"input":i=Lu(t,i),r=Lu(t,r),s=[];break;case"select":i=_e({},i,{value:void 0}),r=_e({},r,{value:void 0}),s=[];break;case"textarea":i=Fu(t,i),r=Fu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=va)}Uu(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Es.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Es.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&he("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};ky=function(t,e,n,r){n!==r&&(e.flags|=4)};function Yi(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ye(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yw(t,e,n){var r=e.pendingProps;switch(dh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(e),null;case 1:return ft(e.type)&&_a(),Ye(e),null;case 3:return r=e.stateNode,si(),de(ht),de(tt),Th(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Oo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mt!==null&&(Ec(Mt),Mt=null))),fc(t,e),Ye(e),null;case 5:wh(e);var i=sr(Ds.current);if(n=e.type,t!==null&&e.stateNode!=null)Ry(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return Ye(e),null}if(t=sr(Ht.current),Oo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[$t]=e,r[xs]=s,t=(e.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(i=0;i<ns.length;i++)he(ns[i],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":kd(r,s),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},he("invalid",r);break;case"textarea":Vd(r,s),he("invalid",r)}Uu(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Mo(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Mo(r.textContent,l,t),i=["children",""+l]):Es.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&he("scroll",r)}switch(n){case"input":Co(r),xd(r,s,!0);break;case"textarea":Co(r),Dd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=va)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[$t]=e,t[xs]=r,Cy(t,e,!1,!1),e.stateNode=t;e:{switch(a=bu(n,r),n){case"dialog":he("cancel",t),he("close",t),i=r;break;case"iframe":case"object":case"embed":he("load",t),i=r;break;case"video":case"audio":for(i=0;i<ns.length;i++)he(ns[i],t);i=r;break;case"source":he("error",t),i=r;break;case"img":case"image":case"link":he("error",t),he("load",t),i=r;break;case"details":he("toggle",t),i=r;break;case"input":kd(t,r),i=Lu(t,r),he("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=_e({},r,{value:void 0}),he("invalid",t);break;case"textarea":Vd(t,r),i=Fu(t,r),he("invalid",t);break;default:i=r}Uu(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?og(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ig(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ws(t,u):typeof u=="number"&&ws(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Es.hasOwnProperty(s)?u!=null&&s==="onScroll"&&he("scroll",t):u!=null&&Jc(t,s,u,a))}switch(n){case"input":Co(t),xd(t,r,!1);break;case"textarea":Co(t),Dd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Qr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Qr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=va)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ye(e),null;case 6:if(t&&e.stateNode!=null)ky(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=sr(Ds.current),sr(Ht.current),Oo(e)){if(r=e.stateNode,n=e.memoizedProps,r[$t]=e,(s=r.nodeValue!==n)&&(t=Et,t!==null))switch(t.tag){case 3:Mo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Mo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$t]=e,e.stateNode=r}return Ye(e),null;case 13:if(de(ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pe&&vt!==null&&e.mode&1&&!(e.flags&128))Qg(),ri(),e.flags|=98560,s=!1;else if(s=Oo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(F(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(F(317));s[$t]=e}else ri(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ye(e),s=!1}else Mt!==null&&(Ec(Mt),Mt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ye.current&1?De===0&&(De=3):Lh())),e.updateQueue!==null&&(e.flags|=4),Ye(e),null);case 4:return si(),fc(t,e),t===null&&Rs(e.stateNode.containerInfo),Ye(e),null;case 10:return yh(e.type._context),Ye(e),null;case 17:return ft(e.type)&&_a(),Ye(e),null;case 19:if(de(ye),s=e.memoizedState,s===null)return Ye(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Yi(s,!1);else{if(De!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Pa(t),a!==null){for(e.flags|=128,Yi(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ue(ye,ye.current&1|2),e.child}t=t.sibling}s.tail!==null&&Pe()>ai&&(e.flags|=128,r=!0,Yi(s,!1),e.lanes=4194304)}else{if(!r)if(t=Pa(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!pe)return Ye(e),null}else 2*Pe()-s.renderingStartTime>ai&&n!==1073741824&&(e.flags|=128,r=!0,Yi(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Pe(),e.sibling=null,n=ye.current,ue(ye,r?n&1|2:n&1),e):(Ye(e),null);case 22:case 23:return Nh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yt&1073741824&&(Ye(e),e.subtreeFlags&6&&(e.flags|=8192)):Ye(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function vw(t,e){switch(dh(e),e.tag){case 1:return ft(e.type)&&_a(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return si(),de(ht),de(tt),Th(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wh(e),null;case 13:if(de(ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));ri()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return de(ye),null;case 4:return si(),null;case 10:return yh(e.type._context),null;case 22:case 23:return Nh(),null;case 24:return null;default:return null}}var Uo=!1,Ze=!1,_w=typeof WeakSet=="function"?WeakSet:Set,$=null;function Hr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ie(t,e,r)}else n.current=null}function dc(t,e,n){try{n()}catch(r){Ie(t,e,r)}}var wp=!1;function Ew(t,e){if(Yu=ma,t=Lg(),hh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,d=0,g=t,v=null;t:for(;;){for(var P;g!==n||i!==0&&g.nodeType!==3||(l=a+i),g!==s||r!==0&&g.nodeType!==3||(u=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(P=g.firstChild)!==null;)v=g,g=P;for(;;){if(g===t)break t;if(v===n&&++h===i&&(l=a),v===s&&++d===r&&(u=a),(P=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=P}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xu={focusedElem:t,selectionRange:n},ma=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var V=R.memoizedProps,N=R.memoizedState,A=e.stateNode,w=A.getSnapshotBeforeUpdate(e.elementType===e.type?V:Nt(e.type,V),N);A.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(L){Ie(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return R=wp,wp=!1,R}function ds(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&dc(e,n,s)}i=i.next}while(i!==r)}}function el(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function xy(t){var e=t.alternate;e!==null&&(t.alternate=null,xy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$t],delete e[xs],delete e[ec],delete e[nw],delete e[rw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Vy(t){return t.tag===5||t.tag===3||t.tag===4}function Tp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=va));else if(r!==4&&(t=t.child,t!==null))for(mc(t,e,n),t=t.sibling;t!==null;)mc(t,e,n),t=t.sibling}function gc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gc(t,e,n),t=t.sibling;t!==null;)gc(t,e,n),t=t.sibling}var Ue=null,Lt=!1;function wn(t,e,n){for(n=n.child;n!==null;)Dy(t,e,n),n=n.sibling}function Dy(t,e,n){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(qa,n)}catch{}switch(n.tag){case 5:Ze||Hr(n,e);case 6:var r=Ue,i=Lt;Ue=null,wn(t,e,n),Ue=r,Lt=i,Ue!==null&&(Lt?(t=Ue,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ue.removeChild(n.stateNode));break;case 18:Ue!==null&&(Lt?(t=Ue,n=n.stateNode,t.nodeType===8?uu(t.parentNode,n):t.nodeType===1&&uu(t,n),Ss(t)):uu(Ue,n.stateNode));break;case 4:r=Ue,i=Lt,Ue=n.stateNode.containerInfo,Lt=!0,wn(t,e,n),Ue=r,Lt=i;break;case 0:case 11:case 14:case 15:if(!Ze&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&dc(n,e,a),i=i.next}while(i!==r)}wn(t,e,n);break;case 1:if(!Ze&&(Hr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ie(n,e,l)}wn(t,e,n);break;case 21:wn(t,e,n);break;case 22:n.mode&1?(Ze=(r=Ze)||n.memoizedState!==null,wn(t,e,n),Ze=r):wn(t,e,n);break;default:wn(t,e,n)}}function Ip(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _w),e.forEach(function(r){var i=kw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Dt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ue=l.stateNode,Lt=!1;break e;case 3:Ue=l.stateNode.containerInfo,Lt=!0;break e;case 4:Ue=l.stateNode.containerInfo,Lt=!0;break e}l=l.return}if(Ue===null)throw Error(F(160));Dy(s,a,i),Ue=null,Lt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Ie(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ny(e,t),e=e.sibling}function Ny(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dt(e,t),zt(t),r&4){try{ds(3,t,t.return),el(3,t)}catch(V){Ie(t,t.return,V)}try{ds(5,t,t.return)}catch(V){Ie(t,t.return,V)}}break;case 1:Dt(e,t),zt(t),r&512&&n!==null&&Hr(n,n.return);break;case 5:if(Dt(e,t),zt(t),r&512&&n!==null&&Hr(n,n.return),t.flags&32){var i=t.stateNode;try{ws(i,"")}catch(V){Ie(t,t.return,V)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&tg(i,s),bu(l,a);var h=bu(l,s);for(a=0;a<u.length;a+=2){var d=u[a],g=u[a+1];d==="style"?og(i,g):d==="dangerouslySetInnerHTML"?ig(i,g):d==="children"?ws(i,g):Jc(i,d,g,h)}switch(l){case"input":Mu(i,s);break;case"textarea":ng(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var P=s.value;P!=null?Qr(i,!!s.multiple,P,!1):v!==!!s.multiple&&(s.defaultValue!=null?Qr(i,!!s.multiple,s.defaultValue,!0):Qr(i,!!s.multiple,s.multiple?[]:"",!1))}i[xs]=s}catch(V){Ie(t,t.return,V)}}break;case 6:if(Dt(e,t),zt(t),r&4){if(t.stateNode===null)throw Error(F(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(V){Ie(t,t.return,V)}}break;case 3:if(Dt(e,t),zt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ss(e.containerInfo)}catch(V){Ie(t,t.return,V)}break;case 4:Dt(e,t),zt(t);break;case 13:Dt(e,t),zt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Vh=Pe())),r&4&&Ip(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ze=(h=Ze)||d,Dt(e,t),Ze=h):Dt(e,t),zt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!d&&t.mode&1)for($=t,d=t.child;d!==null;){for(g=$=d;$!==null;){switch(v=$,P=v.child,v.tag){case 0:case 11:case 14:case 15:ds(4,v,v.return);break;case 1:Hr(v,v.return);var R=v.stateNode;if(typeof R.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(V){Ie(r,n,V)}}break;case 5:Hr(v,v.return);break;case 22:if(v.memoizedState!==null){Sp(g);continue}}P!==null?(P.return=v,$=P):Sp(g)}d=d.sibling}e:for(d=null,g=t;;){if(g.tag===5){if(d===null){d=g;try{i=g.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=g.stateNode,u=g.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=sg("display",a))}catch(V){Ie(t,t.return,V)}}}else if(g.tag===6){if(d===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(V){Ie(t,t.return,V)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;d===g&&(d=null),g=g.return}d===g&&(d=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Dt(e,t),zt(t),r&4&&Ip(t);break;case 21:break;default:Dt(e,t),zt(t)}}function zt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Vy(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ws(i,""),r.flags&=-33);var s=Tp(t);gc(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Tp(t);mc(t,l,a);break;default:throw Error(F(161))}}catch(u){Ie(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ww(t,e,n){$=t,Ly(t)}function Ly(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var i=$,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Uo;if(!a){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Ze;l=Uo;var h=Ze;if(Uo=a,(Ze=u)&&!h)for($=i;$!==null;)a=$,u=a.child,a.tag===22&&a.memoizedState!==null?Pp(i):u!==null?(u.return=a,$=u):Pp(i);for(;s!==null;)$=s,Ly(s),s=s.sibling;$=i,Uo=l,Ze=h}Ap(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$=s):Ap(t)}}function Ap(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ze||el(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ze)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Nt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&lp(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}lp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var g=d.dehydrated;g!==null&&Ss(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Ze||e.flags&512&&pc(e)}catch(v){Ie(e,e.return,v)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Sp(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Pp(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{el(4,e)}catch(u){Ie(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ie(e,i,u)}}var s=e.return;try{pc(e)}catch(u){Ie(e,s,u)}break;case 5:var a=e.return;try{pc(e)}catch(u){Ie(e,a,u)}}}catch(u){Ie(e,e.return,u)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var Tw=Math.ceil,ka=yn.ReactCurrentDispatcher,kh=yn.ReactCurrentOwner,Ct=yn.ReactCurrentBatchConfig,ne=0,Fe=null,Re=null,Be=0,yt=0,qr=qn(0),De=0,Os=null,pr=0,tl=0,xh=0,ps=null,lt=null,Vh=0,ai=1/0,nn=null,xa=!1,yc=null,Ln=null,bo=!1,Cn=null,Va=0,ms=0,vc=null,ta=-1,na=0;function st(){return ne&6?Pe():ta!==-1?ta:ta=Pe()}function Mn(t){return t.mode&1?ne&2&&Be!==0?Be&-Be:sw.transition!==null?(na===0&&(na=vg()),na):(t=se,t!==0||(t=window.event,t=t===void 0?16:Sg(t.type)),t):1}function Ft(t,e,n,r){if(50<ms)throw ms=0,vc=null,Error(F(185));Qs(t,n,r),(!(ne&2)||t!==Fe)&&(t===Fe&&(!(ne&2)&&(tl|=n),De===4&&Sn(t,Be)),dt(t,r),n===1&&ne===0&&!(e.mode&1)&&(ai=Pe()+500,Xa&&Qn()))}function dt(t,e){var n=t.callbackNode;sE(t,e);var r=pa(t,t===Fe?Be:0);if(r===0)n!==null&&Md(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Md(n),e===1)t.tag===0?iw(Cp.bind(null,t)):Wg(Cp.bind(null,t)),ew(function(){!(ne&6)&&Qn()}),n=null;else{switch(_g(r)){case 1:n=rh;break;case 4:n=gg;break;case 16:n=da;break;case 536870912:n=yg;break;default:n=da}n=By(n,My.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function My(t,e){if(ta=-1,na=0,ne&6)throw Error(F(327));var n=t.callbackNode;if(Jr()&&t.callbackNode!==n)return null;var r=pa(t,t===Fe?Be:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Da(t,r);else{e=r;var i=ne;ne|=2;var s=Fy();(Fe!==t||Be!==e)&&(nn=null,ai=Pe()+500,ar(t,e));do try{Sw();break}catch(l){Oy(t,l)}while(!0);gh(),ka.current=s,ne=i,Re!==null?e=0:(Fe=null,Be=0,e=De)}if(e!==0){if(e===2&&(i=Hu(t),i!==0&&(r=i,e=_c(t,i))),e===1)throw n=Os,ar(t,0),Sn(t,r),dt(t,Pe()),n;if(e===6)Sn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Iw(i)&&(e=Da(t,r),e===2&&(s=Hu(t),s!==0&&(r=s,e=_c(t,s))),e===1))throw n=Os,ar(t,0),Sn(t,r),dt(t,Pe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:tr(t,lt,nn);break;case 3:if(Sn(t,r),(r&130023424)===r&&(e=Vh+500-Pe(),10<e)){if(pa(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){st(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Zu(tr.bind(null,t,lt,nn),e);break}tr(t,lt,nn);break;case 4:if(Sn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Ot(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tw(r/1960))-r,10<r){t.timeoutHandle=Zu(tr.bind(null,t,lt,nn),r);break}tr(t,lt,nn);break;case 5:tr(t,lt,nn);break;default:throw Error(F(329))}}}return dt(t,Pe()),t.callbackNode===n?My.bind(null,t):null}function _c(t,e){var n=ps;return t.current.memoizedState.isDehydrated&&(ar(t,e).flags|=256),t=Da(t,e),t!==2&&(e=lt,lt=n,e!==null&&Ec(e)),t}function Ec(t){lt===null?lt=t:lt.push.apply(lt,t)}function Iw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!jt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Sn(t,e){for(e&=~xh,e&=~tl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ot(e),r=1<<n;t[n]=-1,e&=~r}}function Cp(t){if(ne&6)throw Error(F(327));Jr();var e=pa(t,0);if(!(e&1))return dt(t,Pe()),null;var n=Da(t,e);if(t.tag!==0&&n===2){var r=Hu(t);r!==0&&(e=r,n=_c(t,r))}if(n===1)throw n=Os,ar(t,0),Sn(t,e),dt(t,Pe()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,tr(t,lt,nn),dt(t,Pe()),null}function Dh(t,e){var n=ne;ne|=1;try{return t(e)}finally{ne=n,ne===0&&(ai=Pe()+500,Xa&&Qn())}}function mr(t){Cn!==null&&Cn.tag===0&&!(ne&6)&&Jr();var e=ne;ne|=1;var n=Ct.transition,r=se;try{if(Ct.transition=null,se=1,t)return t()}finally{se=r,Ct.transition=n,ne=e,!(ne&6)&&Qn()}}function Nh(){yt=qr.current,de(qr)}function ar(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ZE(n)),Re!==null)for(n=Re.return;n!==null;){var r=n;switch(dh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_a();break;case 3:si(),de(ht),de(tt),Th();break;case 5:wh(r);break;case 4:si();break;case 13:de(ye);break;case 19:de(ye);break;case 10:yh(r.type._context);break;case 22:case 23:Nh()}n=n.return}if(Fe=t,Re=t=On(t.current,null),Be=yt=e,De=0,Os=null,xh=tl=pr=0,lt=ps=null,ir!==null){for(e=0;e<ir.length;e++)if(n=ir[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}ir=null}return t}function Oy(t,e){do{var n=Re;try{if(gh(),Jo.current=Ra,Ca){for(var r=ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ca=!1}if(dr=0,Oe=Ve=ve=null,fs=!1,Ns=0,kh.current=null,n===null||n.return===null){De=1,Os=e,Re=null;break}e:{var s=t,a=n.return,l=n,u=e;if(e=Be,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,d=l,g=d.tag;if(!(d.mode&1)&&(g===0||g===11||g===15)){var v=d.alternate;v?(d.updateQueue=v.updateQueue,d.memoizedState=v.memoizedState,d.lanes=v.lanes):(d.updateQueue=null,d.memoizedState=null)}var P=pp(a);if(P!==null){P.flags&=-257,mp(P,a,l,s,e),P.mode&1&&dp(s,h,e),e=P,u=h;var R=e.updateQueue;if(R===null){var V=new Set;V.add(u),e.updateQueue=V}else R.add(u);break e}else{if(!(e&1)){dp(s,h,e),Lh();break e}u=Error(F(426))}}else if(pe&&l.mode&1){var N=pp(a);if(N!==null){!(N.flags&65536)&&(N.flags|=256),mp(N,a,l,s,e),ph(oi(u,l));break e}}s=u=oi(u,l),De!==4&&(De=2),ps===null?ps=[s]:ps.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var A=_y(s,u,e);ap(s,A);break e;case 1:l=u;var w=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ln===null||!Ln.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var L=Ey(s,l,e);ap(s,L);break e}}s=s.return}while(s!==null)}Uy(n)}catch(b){e=b,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function Fy(){var t=ka.current;return ka.current=Ra,t===null?Ra:t}function Lh(){(De===0||De===3||De===2)&&(De=4),Fe===null||!(pr&268435455)&&!(tl&268435455)||Sn(Fe,Be)}function Da(t,e){var n=ne;ne|=2;var r=Fy();(Fe!==t||Be!==e)&&(nn=null,ar(t,e));do try{Aw();break}catch(i){Oy(t,i)}while(!0);if(gh(),ne=n,ka.current=r,Re!==null)throw Error(F(261));return Fe=null,Be=0,De}function Aw(){for(;Re!==null;)jy(Re)}function Sw(){for(;Re!==null&&!Y0();)jy(Re)}function jy(t){var e=zy(t.alternate,t,yt);t.memoizedProps=t.pendingProps,e===null?Uy(t):Re=e,kh.current=null}function Uy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vw(n,e),n!==null){n.flags&=32767,Re=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{De=6,Re=null;return}}else if(n=yw(n,e,yt),n!==null){Re=n;return}if(e=e.sibling,e!==null){Re=e;return}Re=e=t}while(e!==null);De===0&&(De=5)}function tr(t,e,n){var r=se,i=Ct.transition;try{Ct.transition=null,se=1,Pw(t,e,n,r)}finally{Ct.transition=i,se=r}return null}function Pw(t,e,n,r){do Jr();while(Cn!==null);if(ne&6)throw Error(F(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(oE(t,s),t===Fe&&(Re=Fe=null,Be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bo||(bo=!0,By(da,function(){return Jr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ct.transition,Ct.transition=null;var a=se;se=1;var l=ne;ne|=4,kh.current=null,Ew(t,n),Ny(n,t),qE(Xu),ma=!!Yu,Xu=Yu=null,t.current=n,ww(n),X0(),ne=l,se=a,Ct.transition=s}else t.current=n;if(bo&&(bo=!1,Cn=t,Va=i),s=t.pendingLanes,s===0&&(Ln=null),eE(n.stateNode),dt(t,Pe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xa)throw xa=!1,t=yc,yc=null,t;return Va&1&&t.tag!==0&&Jr(),s=t.pendingLanes,s&1?t===vc?ms++:(ms=0,vc=t):ms=0,Qn(),null}function Jr(){if(Cn!==null){var t=_g(Va),e=Ct.transition,n=se;try{if(Ct.transition=null,se=16>t?16:t,Cn===null)var r=!1;else{if(t=Cn,Cn=null,Va=0,ne&6)throw Error(F(331));var i=ne;for(ne|=4,$=t.current;$!==null;){var s=$,a=s.child;if($.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for($=h;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:ds(8,d,s)}var g=d.child;if(g!==null)g.return=d,$=g;else for(;$!==null;){d=$;var v=d.sibling,P=d.return;if(xy(d),d===h){$=null;break}if(v!==null){v.return=P,$=v;break}$=P}}}var R=s.alternate;if(R!==null){var V=R.child;if(V!==null){R.child=null;do{var N=V.sibling;V.sibling=null,V=N}while(V!==null)}}$=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,$=a;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ds(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,$=A;break e}$=s.return}}var w=t.current;for($=w;$!==null;){a=$;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,$=C;else e:for(a=w;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:el(9,l)}}catch(b){Ie(l,l.return,b)}if(l===a){$=null;break e}var L=l.sibling;if(L!==null){L.return=l.return,$=L;break e}$=l.return}}if(ne=i,Qn(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(qa,t)}catch{}r=!0}return r}finally{se=n,Ct.transition=e}}return!1}function Rp(t,e,n){e=oi(n,e),e=_y(t,e,1),t=Nn(t,e,1),e=st(),t!==null&&(Qs(t,1,e),dt(t,e))}function Ie(t,e,n){if(t.tag===3)Rp(t,t,n);else for(;e!==null;){if(e.tag===3){Rp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ln===null||!Ln.has(r))){t=oi(n,t),t=Ey(e,t,1),e=Nn(e,t,1),t=st(),e!==null&&(Qs(e,1,t),dt(e,t));break}}e=e.return}}function Cw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=st(),t.pingedLanes|=t.suspendedLanes&n,Fe===t&&(Be&n)===n&&(De===4||De===3&&(Be&130023424)===Be&&500>Pe()-Vh?ar(t,0):xh|=n),dt(t,e)}function by(t,e){e===0&&(t.mode&1?(e=xo,xo<<=1,!(xo&130023424)&&(xo=4194304)):e=1);var n=st();t=fn(t,e),t!==null&&(Qs(t,e,n),dt(t,n))}function Rw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),by(t,n)}function kw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),by(t,n)}var zy;zy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ht.current)ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ct=!1,gw(t,e,n);ct=!!(t.flags&131072)}else ct=!1,pe&&e.flags&1048576&&Hg(e,Ta,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ea(t,e),t=e.pendingProps;var i=ni(e,tt.current);Xr(e,n),i=Ah(null,e,r,t,i,n);var s=Sh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ft(r)?(s=!0,Ea(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_h(e),i.updater=Za,e.stateNode=i,i._reactInternals=e,oc(e,r,t,n),e=uc(null,e,r,!0,s,n)):(e.tag=0,pe&&s&&fh(e),it(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ea(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Vw(r),t=Nt(r,t),i){case 0:e=lc(null,e,r,t,n);break e;case 1:e=vp(null,e,r,t,n);break e;case 11:e=gp(null,e,r,t,n);break e;case 14:e=yp(null,e,r,Nt(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),lc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),vp(t,e,r,i,n);case 3:e:{if(Ay(e),t===null)throw Error(F(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Xg(t,e),Sa(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=oi(Error(F(423)),e),e=_p(t,e,r,n,i);break e}else if(r!==i){i=oi(Error(F(424)),e),e=_p(t,e,r,n,i);break e}else for(vt=Dn(e.stateNode.containerInfo.firstChild),Et=e,pe=!0,Mt=null,n=Gg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ri(),r===i){e=dn(t,e,n);break e}it(t,e,r,n)}e=e.child}return e;case 5:return Jg(e),t===null&&rc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Ju(r,i)?a=null:s!==null&&Ju(r,s)&&(e.flags|=32),Iy(t,e),it(t,e,a,n),e.child;case 6:return t===null&&rc(e),null;case 13:return Sy(t,e,n);case 4:return Eh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ii(e,null,r,n):it(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),gp(t,e,r,i,n);case 7:return it(t,e,e.pendingProps,n),e.child;case 8:return it(t,e,e.pendingProps.children,n),e.child;case 12:return it(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,ue(Ia,r._currentValue),r._currentValue=a,s!==null)if(jt(s.value,a)){if(s.children===i.children&&!ht.current){e=dn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=ln(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?u.next=u:(u.next=d.next,d.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),ic(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(F(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),ic(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}it(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Xr(e,n),i=Rt(i),r=r(i),e.flags|=1,it(t,e,r,n),e.child;case 14:return r=e.type,i=Nt(r,e.pendingProps),i=Nt(r.type,i),yp(t,e,r,i,n);case 15:return wy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),ea(t,e),e.tag=1,ft(r)?(t=!0,Ea(e)):t=!1,Xr(e,n),vy(e,r,i),oc(e,r,i,n),uc(null,e,r,!0,t,n);case 19:return Py(t,e,n);case 22:return Ty(t,e,n)}throw Error(F(156,e.tag))};function By(t,e){return mg(t,e)}function xw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,e,n,r){return new xw(t,e,n,r)}function Mh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vw(t){if(typeof t=="function")return Mh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eh)return 11;if(t===th)return 14}return 2}function On(t,e){var n=t.alternate;return n===null?(n=Pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ra(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Mh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Or:return lr(n.children,i,s,e);case Zc:a=8,i|=8;break;case xu:return t=Pt(12,n,e,i|2),t.elementType=xu,t.lanes=s,t;case Vu:return t=Pt(13,n,e,i),t.elementType=Vu,t.lanes=s,t;case Du:return t=Pt(19,n,e,i),t.elementType=Du,t.lanes=s,t;case Jm:return nl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ym:a=10;break e;case Xm:a=9;break e;case eh:a=11;break e;case th:a=14;break e;case Tn:a=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Pt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function lr(t,e,n,r){return t=Pt(7,t,r,e),t.lanes=n,t}function nl(t,e,n,r){return t=Pt(22,t,r,e),t.elementType=Jm,t.lanes=n,t.stateNode={isHidden:!1},t}function yu(t,e,n){return t=Pt(6,t,null,e),t.lanes=n,t}function vu(t,e,n){return e=Pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Dw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jl(0),this.expirationTimes=Jl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Oh(t,e,n,r,i,s,a,l,u){return t=new Dw(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_h(s),t}function Nw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function $y(t){if(!t)return zn;t=t._reactInternals;e:{if(Ir(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(ft(n))return $g(t,n,e)}return e}function Wy(t,e,n,r,i,s,a,l,u){return t=Oh(n,r,!0,t,i,s,a,l,u),t.context=$y(null),n=t.current,r=st(),i=Mn(n),s=ln(r,i),s.callback=e??null,Nn(n,s,i),t.current.lanes=i,Qs(t,i,r),dt(t,r),t}function rl(t,e,n,r){var i=e.current,s=st(),a=Mn(i);return n=$y(n),e.context===null?e.context=n:e.pendingContext=n,e=ln(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Nn(i,e,a),t!==null&&(Ft(t,i,a,s),Xo(t,i,a)),a}function Na(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fh(t,e){kp(t,e),(t=t.alternate)&&kp(t,e)}function Lw(){return null}var Hy=typeof reportError=="function"?reportError:function(t){console.error(t)};function jh(t){this._internalRoot=t}il.prototype.render=jh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));rl(t,e,null,null)};il.prototype.unmount=jh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mr(function(){rl(null,t,null,null)}),e[hn]=null}};function il(t){this._internalRoot=t}il.prototype.unstable_scheduleHydration=function(t){if(t){var e=Tg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<An.length&&e!==0&&e<An[n].priority;n++);An.splice(n,0,t),n===0&&Ag(t)}};function Uh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xp(){}function Mw(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Na(a);s.call(h)}}var a=Wy(e,r,t,0,null,!1,!1,"",xp);return t._reactRootContainer=a,t[hn]=a.current,Rs(t.nodeType===8?t.parentNode:t),mr(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Na(u);l.call(h)}}var u=Oh(t,0,!1,null,null,!1,!1,"",xp);return t._reactRootContainer=u,t[hn]=u.current,Rs(t.nodeType===8?t.parentNode:t),mr(function(){rl(e,u,n,r)}),u}function ol(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var u=Na(a);l.call(u)}}rl(e,a,t,i)}else a=Mw(n,e,t,i,r);return Na(a)}Eg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ts(e.pendingLanes);n!==0&&(ih(e,n|1),dt(e,Pe()),!(ne&6)&&(ai=Pe()+500,Qn()))}break;case 13:mr(function(){var r=fn(t,1);if(r!==null){var i=st();Ft(r,t,1,i)}}),Fh(t,1)}};sh=function(t){if(t.tag===13){var e=fn(t,134217728);if(e!==null){var n=st();Ft(e,t,134217728,n)}Fh(t,134217728)}};wg=function(t){if(t.tag===13){var e=Mn(t),n=fn(t,e);if(n!==null){var r=st();Ft(n,t,e,r)}Fh(t,e)}};Tg=function(){return se};Ig=function(t,e){var n=se;try{return se=t,e()}finally{se=n}};Bu=function(t,e,n){switch(e){case"input":if(Mu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ya(r);if(!i)throw Error(F(90));eg(r),Mu(r,i)}}}break;case"textarea":ng(t,n);break;case"select":e=n.value,e!=null&&Qr(t,!!n.multiple,e,!1)}};ug=Dh;cg=mr;var Ow={usingClientEntryPoint:!1,Events:[Gs,br,Ya,ag,lg,Dh]},Xi={findFiberByHostInstance:rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fw={bundleType:Xi.bundleType,version:Xi.version,rendererPackageName:Xi.rendererPackageName,rendererConfig:Xi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=dg(t),t===null?null:t.stateNode},findFiberByHostInstance:Xi.findFiberByHostInstance||Lw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zo.isDisabled&&zo.supportsFiber)try{qa=zo.inject(Fw),Wt=zo}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ow;Tt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uh(e))throw Error(F(200));return Nw(t,e,null,n)};Tt.createRoot=function(t,e){if(!Uh(t))throw Error(F(299));var n=!1,r="",i=Hy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Oh(t,1,!1,null,null,n,!1,r,i),t[hn]=e.current,Rs(t.nodeType===8?t.parentNode:t),new jh(e)};Tt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=dg(e),t=t===null?null:t.stateNode,t};Tt.flushSync=function(t){return mr(t)};Tt.hydrate=function(t,e,n){if(!sl(e))throw Error(F(200));return ol(null,t,e,!0,n)};Tt.hydrateRoot=function(t,e,n){if(!Uh(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=Hy;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Wy(e,null,t,1,n??null,i,!1,s,a),t[hn]=e.current,Rs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new il(e)};Tt.render=function(t,e,n){if(!sl(e))throw Error(F(200));return ol(null,t,e,!1,n)};Tt.unmountComponentAtNode=function(t){if(!sl(t))throw Error(F(40));return t._reactRootContainer?(mr(function(){ol(null,null,t,!1,function(){t._reactRootContainer=null,t[hn]=null})}),!0):!1};Tt.unstable_batchedUpdates=Dh;Tt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sl(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return ol(t,e,n,!1,r)};Tt.version="18.3.1-next-f1338f8080-20240426";function qy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qy)}catch(t){console.error(t)}}qy(),qm.exports=Tt;var jw=qm.exports,Vp=jw;Ru.createRoot=Vp.createRoot,Ru.hydrateRoot=Vp.hydrateRoot;const Uw="modulepreload",bw=function(t){return"/"+t},Dp={},al=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=bw(u),u in Dp)return;Dp[u]=!0;const h=u.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":Uw,h||(g.as="script"),g.crossOrigin="",g.href=u,l&&g.setAttribute("nonce",l),document.head.appendChild(g),h)return new Promise((v,P)=>{g.addEventListener("load",v),g.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var Te=(t=>(t.Baking="baking-menu",t.BakingRecipeSelection="baking-recipe-selection",t.BakingProcess="baking-process",t.HeatingTimer="heating-timer",t.Operations="operations",t.Inventory="inventory",t.Settings="settings",t))(Te||{});const zw={"alert-triangle":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),S.jsx("path",{d:"M12 9v4"}),S.jsx("path",{d:"M12 17h.01"})]}),archive:S.jsxs(S.Fragment,{children:[S.jsx("rect",{width:"20",height:"5",x:"2",y:"3",rx:"1"}),S.jsx("path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"}),S.jsx("path",{d:"M10 12h4"})]}),"bar-chart-2":S.jsxs(S.Fragment,{children:[S.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),S.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),S.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),bell:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),S.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),boxes:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),S.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),S.jsx("path",{d:"M12 22V12"})]}),calendar:S.jsxs(S.Fragment,{children:[S.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),S.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),S.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),S.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),"cake-slice":S.jsx("path",{d:"M11.84 10.51 16.2 6.15a2.42 2.42 0 0 1 3.42 0 2.42 2.42 0 0 1 0 3.42l-4.36 4.36"}),check:S.jsx("path",{d:"M20 6 9 17l-5-5"}),"check-circle":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),S.jsx("path",{d:"m9 11 3 3L22 4"})]}),"chevron-left":S.jsx("path",{d:"m15 18-6-6 6-6"}),"chevron-right":S.jsx("path",{d:"m9 18 6-6-6-6"}),"clipboard-kanban":S.jsxs(S.Fragment,{children:[S.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),S.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),S.jsx("path",{d:"M12 14h.01"}),S.jsx("path",{d:"M16 14h.01"}),S.jsx("path",{d:"M8 14h.01"})]}),list:S.jsxs(S.Fragment,{children:[S.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),S.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),S.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),S.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),S.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),S.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]}),"map-pin":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),S.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),menu:S.jsx(S.Fragment,{children:S.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})}),minus:S.jsx("path",{d:"M5 12h14"}),pencil:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),S.jsx("path",{d:"m15 5 4 4"})]}),"play-circle":S.jsxs(S.Fragment,{children:[S.jsx("circle",{cx:"12",cy:"12",r:"10"}),S.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]}),plus:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M5 12h14"}),S.jsx("path",{d:"M12 5v14"})]}),"plus-circle":S.jsxs(S.Fragment,{children:[S.jsx("circle",{cx:"12",cy:"12",r:"10"}),S.jsx("path",{d:"M8 12h8"}),S.jsx("path",{d:"M12 8v8"})]}),"refresh-cw":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),S.jsx("path",{d:"M21 3v5h-5"}),S.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),S.jsx("path",{d:"M3 21v-5h5"})]}),"rotate-ccw":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),S.jsx("path",{d:"M3 3v5h5"})]}),settings:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0 2l.15.08a2 2 0 0 0 .73-2.73l.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),S.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"shopping-cart":S.jsxs(S.Fragment,{children:[S.jsx("circle",{cx:"8",cy:"21",r:"1"}),S.jsx("circle",{cx:"19",cy:"21",r:"1"}),S.jsx("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.15"})]}),star:S.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}),store:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"}),S.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),S.jsx("path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"}),S.jsx("path",{d:"M2 7h20"}),S.jsx("path",{d:"M22 7v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7"})]}),thermometer:S.jsx(S.Fragment,{children:S.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"})}),"thermometer-snowflake":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"}),S.jsx("path",{d:"M22 12h-3"}),S.jsx("path",{d:"M2 20v-3"}),S.jsx("path",{d:"M20 4v3"}),S.jsx("path",{d:"m22 7-3 3"}),S.jsx("path",{d:"M2 13l3 3"}),S.jsx("path",{d:"M5 4l-3 3"})]}),"thermometer-sun":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"}),S.jsx("path",{d:"M4 11H2"}),S.jsx("path",{d:"M10 11H8"}),S.jsx("path",{d:"M22 11h-2"}),S.jsx("path",{d:"M16 11h-2"}),S.jsx("path",{d:"M19 8a3 3 0 0 0-6 0"}),S.jsx("path",{d:"M19.3 4.7a3 3 0 0 0-4.25-4.25"})]}),"trash-2":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M3 6h18"}),S.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),S.jsx("path",{d:"M10 11v6"}),S.jsx("path",{d:"M14 11v6"})]}),"volume-2":S.jsxs(S.Fragment,{children:[S.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),S.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"}),S.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]}),"volume-x":S.jsxs(S.Fragment,{children:[S.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),S.jsx("line",{x1:"22",x2:"16",y1:"9",y2:"15"}),S.jsx("line",{x1:"16",x2:"22",y1:"9",y2:"15"})]}),x:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M18 6 6 18"}),S.jsx("path",{d:"m6 6 12 12"})]})},rn=({name:t,className:e="",size:n=24})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:zw[t]}),Bw=({activeScreen:t,setActiveScreen:e,processes:n,urgentTasks:r,shoppingListItems:i,inProgressTasks:s,isOpen:a,onClose:l})=>{const u=R=>{e(R),l()},h=({active:R,onClick:V,children:N})=>{const A="w-full flex items-center gap-4 p-4 rounded-lg font-bold text-left cursor-pointer transition-all duration-200",w=R?`${A} bg-blue-600 text-white`:`${A} text-gray-500 hover:bg-gray-100 hover:text-gray-900`;return S.jsx("button",{onClick:V,className:w,children:N})},d=({title:R,children:V,onClick:N,isAlarm:A})=>S.jsxs("div",{className:"mb-4",children:[S.jsx("h3",{className:`text-xs uppercase font-bold mb-2 px-2 ${A?"text-red-600 animate-pulse":"text-blue-600"}`,children:R}),S.jsx("button",{onClick:N,className:`w-full text-left p-3 rounded-lg transition-colors border ${A?"bg-red-50 border-red-400 hover:bg-red-100":"bg-gray-100 border-gray-200 hover:bg-gray-200"}`,children:V})]}),g=n.filter(R=>R.state!=="finished"),v=t===Te.Baking,P=`
        sidebar-nav flex flex-col bg-white p-4 border-r border-gray-200 overflow-y-auto 
        fixed inset-y-0 left-0 z-50 w-64 transform transition-transform duration-300 ease-in-out 
        md:relative md:w-auto md:translate-x-0
        ${a?"translate-x-0":"-translate-x-full"}
    `;return S.jsxs("nav",{className:P,children:[S.jsxs("header",{className:"sidebar-header text-center mb-6 pt-4 flex-shrink-0",children:[S.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Cafestesia"}),S.jsx("span",{className:"text-sm text-gray-500",children:"Gestor v2.1 (React)"})]}),S.jsxs("div",{className:"flex-grow",children:[g.map(R=>{const V=R.state==="alarm";return S.jsx(d,{title:V?"Accin Requerida!":"En Produccin",onClick:()=>u(Te.Baking),isAlarm:V,children:S.jsxs("div",{className:"flex items-center gap-3 font-bold text-sm text-gray-800",children:[S.jsx(rn,{name:V?"bell":"cake-slice",className:V?"text-red-500":"text-green-600",size:20}),S.jsx("span",{children:R.name})]})},R.id)}),s.length>0&&S.jsx(d,{title:"Tareas en Progreso",onClick:()=>u(Te.Operations),children:S.jsxs("div",{className:"flex items-center gap-3 font-bold text-sm text-gray-800",children:[S.jsx(rn,{name:"play-circle",className:"text-yellow-600",size:20}),S.jsxs("span",{children:[s.length," tarea",s.length>1?"s":""," activa",s.length>1?"s":""]})]})}),r.length>0&&S.jsx(d,{title:"Operaciones Urgentes",onClick:()=>u(Te.Operations),children:r.map(({task:R,diff:V})=>S.jsxs("div",{className:"text-sm mb-2 last:mb-0",children:[S.jsx("p",{className:"font-bold text-gray-800",children:R.text}),S.jsxs("p",{className:`text-xs font-semibold ${V<=0?"text-red-600 animate-pulse":"text-blue-600"}`,children:[R.time," ",V<=0?"(AHORA!)":`(en ${V} min)`]})]},R.id))}),i.length>0&&S.jsx(d,{title:"Inventario Crtico",onClick:()=>u(Te.Inventory),children:S.jsxs("div",{className:"flex items-center gap-3 font-bold text-sm text-gray-800",children:[S.jsx(rn,{name:"shopping-cart",className:"text-red-500",size:20}),S.jsxs("span",{children:[i.length," producto",i.length>1?"s":""," en la lista de compras"]})]})})]}),S.jsxs("div",{className:"nav-buttons flex flex-col gap-2 mt-auto flex-shrink-0",children:[S.jsxs(h,{active:v,onClick:()=>u(Te.Baking),children:[S.jsx(rn,{name:"cake-slice",size:20}),S.jsx("span",{children:"Produccin de Pan"})]}),S.jsxs(h,{active:t===Te.Operations,onClick:()=>u(Te.Operations),children:[S.jsx(rn,{name:"clipboard-kanban",size:20}),S.jsx("span",{children:"Operaciones"})]}),S.jsxs(h,{active:t===Te.Inventory,onClick:()=>u(Te.Inventory),children:[S.jsx(rn,{name:"archive",size:20}),S.jsx("span",{children:"Inventario"})]}),S.jsxs(h,{active:t===Te.Settings,onClick:()=>u(Te.Settings),children:[S.jsx(rn,{name:"settings",size:20}),S.jsx("span",{children:"Configuracin"})]})]})]})},Qy={roles:{id:"roles",name:"Roles de Canela",pluralName:"Roles de Canela listos",setupInstruction:"Configura el horno a 230C y programa 16 minutos.",totalDuration:14*60,steps:[{duration:2*60,instruction:"Coloca los roles en los niveles 1 y 3. Deja que el calor eleve el producto sin presionar INICIO.",isPauseStep:!0},{duration:6*60,instruction:"Baja la temperatura a 210C y comienza el horneado."},{duration:4*60,instruction:"Gira las charolas 180 grados."},{duration:2*60,instruction:"Agrega 20 ml de leche y gira cada rol 1/3 de vuelta en sentido contrario del reloj."},{duration:2*60,instruction:"Vuelve a girar cada rol 1/3 de vuelta para finalizar."}]},ciabattas:{id:"ciabattas",name:"Ciabattas",pluralName:"Ciabattas listas",setupInstruction:"Configura el horno a 230C y programa 30 minutos.",totalDuration:28*60,steps:[{duration:2*60,instruction:"Coloca las charolas (niveles 1 y 3) y pulveriza agua 12 veces. Deja que el calor eleve el producto sin presionar INICIO.",isPauseStep:!0},{duration:8*60,instruction:"Baja la temperatura a 210C y comienza el horneado."},{duration:8*60,instruction:"Gira las charolas 180 grados y vuelve a pulverizar agua 12 veces."},{duration:6*60,instruction:"Intercambia las charolas de nivel y da vuelta a cada pieza 180 grados."},{duration:6*60,instruction:"Gira las charolas 180 grados por ltima vez."}]},croissants:{id:"croissants",name:"Croissants",pluralName:"Croissants listos",setupInstruction:"Configura el horno a 230C y programa 21 minutos.",totalDuration:21*60,steps:[{duration:3*60,instruction:"Coloca las charolas en los niveles 1 y 3. Pulveriza agua 12 veces."},{duration:6*60,instruction:"Baja la temperatura a 200C y continua horneando. (Nota: Si horneas solo 1 charola, baja a 180C)"},{duration:5*60,instruction:"Gira las charolas 180 grados."},{duration:5*60,instruction:"Intercambia las charolas de nivel y gralas 180 grados."},{duration:2*60,instruction:"Gira las charolas 180 grados por ltima vez."}]}},$w=new Date,Zn=$w.toISOString().split("T")[0],Ky=[{text:"Roles: Descongelar en refrigeracin",employee:"Ali",shift:"matutino",date:Zn,time:"08:00",duration:30,isCritical:!0,zone:"Panadera",status:"todo"},{text:"Checar ingredientes diarios y comprarlos",employee:"Ali",shift:"pre-apertura",date:Zn,time:"15:00",duration:60,isCritical:!0,zone:"Cocina",status:"todo"},{text:"Hornear Roles",employee:"Claudia",shift:"pre-apertura",date:Zn,time:"16:00",duration:45,isCritical:!0,zone:"Panadera",status:"todo"},{text:"Hornear Croissants",employee:"Claudia",shift:"pre-apertura",date:Zn,time:"16:30",duration:45,isCritical:!0,zone:"Panadera",status:"todo"},{text:"Corte de caja",employee:"Fer",shift:"cierre",date:Zn,time:"21:50",duration:20,isCritical:!0,zone:"Admin",status:"todo"},{text:"Limpiar barra y area de barismo",employee:"Claudia",shift:"pre-apertura",date:Zn,time:"17:00",duration:30,isCritical:!0,zone:"Barra",status:"todo"},{text:"Hacer masa para ciabatta (da siguiente)",employee:"Fer",shift:"cierre",date:Zn,time:"21:40",duration:20,isCritical:!0,zone:"Panadera",status:"todo"}],Gy=[{name:"Harina de Trigo",category:"Secos",currentStock:50,unit:"kg",minStock:10,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Levadura Fresca",category:"Refrigerados",currentStock:1,unit:"kg",minStock:.5,providerPreferido:"Proveedor B",purchaseHistory:[]},{name:"Mantequilla sin Sal",category:"Refrigerados",currentStock:5,unit:"kg",minStock:2,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Chocolate Amargo 70%",category:"Secos",currentStock:3,unit:"kg",minStock:1,providerPreferido:"Proveedor C",purchaseHistory:[]},{name:"Leche Entera",category:"Lcteos",currentStock:8,unit:"lt",minStock:4,providerPreferido:"Supermercado",purchaseHistory:[]},{name:"Caf en Grano",category:"Bebidas",currentStock:10,unit:"kg",minStock:5,providerPreferido:"Tostador Local",purchaseHistory:[]},{name:"Azcar Morena",category:"Secos",currentStock:15,unit:"kg",minStock:5,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Canela en Polvo",category:"Secos",currentStock:.4,unit:"kg",minStock:.5,providerPreferido:"Proveedor C",purchaseHistory:[]}],eS=["kg","lt","pz","g","ml","unidad(es)"],tS=8,nS=22,rS=[{value:5,label:"5 min"},{value:10,label:"10 min"},{value:15,label:"15 min"},{value:30,label:"30 min"},{value:60,label:"1 hora"},{value:120,label:"2 horas"}],iS="1234";var Np={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Ww=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Xy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,d=s>>2,g=(s&3)<<4|l>>4;let v=(l&15)<<2|h>>6,P=h&63;u||(P=64,a||(v=64)),r.push(n[d],n[g],n[v],n[P])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Yy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ww(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||g==null)throw new Hw;const v=s<<2|l>>4;if(r.push(v),h!==64){const P=l<<4&240|h>>2;if(r.push(P),g!==64){const R=h<<6&192|g;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Hw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qw=function(t){const e=Yy(t);return Xy.encodeByteArray(e,!0)},La=function(t){return qw(t).replace(/\./g,"")},Qw=function(t){try{return Xy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=()=>Kw().__FIREBASE_DEFAULTS__,Yw=()=>{if(typeof process>"u"||typeof Np>"u")return;const t=Np.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Xw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Qw(t[1]);return e&&JSON.parse(e)},bh=()=>{try{return Gw()||Yw()||Xw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Jw=t=>{var e,n;return(n=(e=bh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Zw=t=>{const e=Jw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Jy=()=>{var t;return(t=bh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[La(JSON.stringify(n)),La(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function r1(){var t;const e=(t=bh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function i1(){return!r1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s1(){try{return typeof indexedDB=="object"}catch{return!1}}function o1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="FirebaseError";class _i extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=a1,Object.setPrototypeOf(this,_i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zy.prototype.create)}}class Zy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?l1(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new _i(i,l,r)}}function l1(t,e){return t.replace(u1,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const u1=/\{\$([^}]+)}/g;function Ma(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(Lp(s)&&Lp(a)){if(!Ma(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Lp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){return t&&t._delegate?t._delegate:t}class Fs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new e1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(f1(e))try{this.getOrInitializeService({instanceIdentifier:nr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=nr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nr){return this.instances.has(e)}getOptions(e=nr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:h1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=nr){return this.component?this.component.multipleInstances?e:nr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function h1(t){return t===nr?void 0:t}function f1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new c1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(te||(te={}));const p1={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},m1=te.INFO,g1={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},y1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=g1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ev{constructor(e){this.name=e,this._logLevel=m1,this._logHandler=y1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?p1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}}const v1=(t,e)=>e.some(n=>t instanceof n);let Mp,Op;function _1(){return Mp||(Mp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E1(){return Op||(Op=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tv=new WeakMap,wc=new WeakMap,nv=new WeakMap,_u=new WeakMap,zh=new WeakMap;function w1(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Fn(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&tv.set(n,t)}).catch(()=>{}),zh.set(e,t),e}function T1(t){if(wc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});wc.set(t,e)}let Tc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function I1(t){Tc=t(Tc)}function A1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Eu(this),e,...n);return nv.set(r,e.sort?e.sort():[e]),Fn(r)}:E1().includes(t)?function(...e){return t.apply(Eu(this),e),Fn(tv.get(this))}:function(...e){return Fn(t.apply(Eu(this),e))}}function S1(t){return typeof t=="function"?A1(t):(t instanceof IDBTransaction&&T1(t),v1(t,_1())?new Proxy(t,Tc):t)}function Fn(t){if(t instanceof IDBRequest)return w1(t);if(_u.has(t))return _u.get(t);const e=S1(t);return e!==t&&(_u.set(t,e),zh.set(e,t)),e}const Eu=t=>zh.get(t);function P1(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=Fn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Fn(a.result),u.oldVersion,u.newVersion,Fn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const C1=["get","getKey","getAll","getAllKeys","count"],R1=["put","add","delete","clear"],wu=new Map;function Fp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wu.get(e))return wu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=R1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||C1.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return wu.set(e,s),s}I1(t=>({...t,get:(e,n,r)=>Fp(e,n)||t.get(e,n,r),has:(e,n)=>!!Fp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(x1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function x1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ic="@firebase/app",jp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn=new ev("@firebase/app"),V1="@firebase/app-compat",D1="@firebase/analytics-compat",N1="@firebase/analytics",L1="@firebase/app-check-compat",M1="@firebase/app-check",O1="@firebase/auth",F1="@firebase/auth-compat",j1="@firebase/database",U1="@firebase/data-connect",b1="@firebase/database-compat",z1="@firebase/functions",B1="@firebase/functions-compat",$1="@firebase/installations",W1="@firebase/installations-compat",H1="@firebase/messaging",q1="@firebase/messaging-compat",Q1="@firebase/performance",K1="@firebase/performance-compat",G1="@firebase/remote-config",Y1="@firebase/remote-config-compat",X1="@firebase/storage",J1="@firebase/storage-compat",Z1="@firebase/firestore",eT="@firebase/vertexai-preview",tT="@firebase/firestore-compat",nT="firebase",rT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac="[DEFAULT]",iT={[Ic]:"fire-core",[V1]:"fire-core-compat",[N1]:"fire-analytics",[D1]:"fire-analytics-compat",[M1]:"fire-app-check",[L1]:"fire-app-check-compat",[O1]:"fire-auth",[F1]:"fire-auth-compat",[j1]:"fire-rtdb",[U1]:"fire-data-connect",[b1]:"fire-rtdb-compat",[z1]:"fire-fn",[B1]:"fire-fn-compat",[$1]:"fire-iid",[W1]:"fire-iid-compat",[H1]:"fire-fcm",[q1]:"fire-fcm-compat",[Q1]:"fire-perf",[K1]:"fire-perf-compat",[G1]:"fire-rc",[Y1]:"fire-rc-compat",[X1]:"fire-gcs",[J1]:"fire-gcs-compat",[Z1]:"fire-fst",[tT]:"fire-fst-compat",[eT]:"fire-vertex","fire-js":"fire-js",[nT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new Map,sT=new Map,Sc=new Map;function Up(t,e){try{t.container.addComponent(e)}catch(n){pn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fa(t){const e=t.name;if(Sc.has(e))return pn.debug(`There were multiple attempts to register component ${e}.`),!1;Sc.set(e,t);for(const n of Oa.values())Up(n,t);for(const n of sT.values())Up(n,t);return!0}function oT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jn=new Zy("app","Firebase",aT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=rT;function rv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ac,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw jn.create("bad-app-name",{appName:String(i)});if(n||(n=Jy()),!n)throw jn.create("no-options");const s=Oa.get(i);if(s){if(Ma(n,s.options)&&Ma(r,s.config))return s;throw jn.create("duplicate-app",{appName:i})}const a=new d1(i);for(const u of Sc.values())a.addComponent(u);const l=new lT(n,r,a);return Oa.set(i,l),l}function cT(t=Ac){const e=Oa.get(t);if(!e&&t===Ac&&Jy())return rv();if(!e)throw jn.create("no-app",{appName:t});return e}function Zr(t,e,n){var r;let i=(r=iT[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pn.warn(l.join(" "));return}Fa(new Fs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="firebase-heartbeat-database",fT=1,js="firebase-heartbeat-store";let Tu=null;function iv(){return Tu||(Tu=P1(hT,fT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(js)}catch(n){console.warn(n)}}}}).catch(t=>{throw jn.create("idb-open",{originalErrorMessage:t.message})})),Tu}async function dT(t){try{const n=(await iv()).transaction(js),r=await n.objectStore(js).get(sv(t));return await n.done,r}catch(e){if(e instanceof _i)pn.warn(e.message);else{const n=jn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pn.warn(n.message)}}}async function bp(t,e){try{const r=(await iv()).transaction(js,"readwrite");await r.objectStore(js).put(e,sv(t)),await r.done}catch(n){if(n instanceof _i)pn.warn(n.message);else{const r=jn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pn.warn(r.message)}}}function sv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=1024,mT=30*24*60*60*1e3;class gT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=mT}),this._storage.overwrite(this._heartbeatsCache))}catch(r){pn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zp(),{heartbeatsToSend:r,unsentEntries:i}=yT(this._heartbeatsCache.heartbeats),s=La(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return pn.warn(n),""}}}function zp(){return new Date().toISOString().substring(0,10)}function yT(t,e=pT){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Bp(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Bp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s1()?o1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return bp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return bp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Bp(t){return La(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t){Fa(new Fs("platform-logger",e=>new k1(e),"PRIVATE")),Fa(new Fs("heartbeat",e=>new gT(e),"PRIVATE")),Zr(Ic,jp,t),Zr(Ic,jp,"esm2017"),Zr("fire-js","")}_T("");var ET="firebase",wT="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zr(ET,wT,"app");var $p=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ur,ov;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,m){function y(){}y.prototype=m.prototype,_.D=m.prototype,_.prototype=new y,_.prototype.constructor=_,_.C=function(E,I,k){for(var T=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)T[xe-2]=arguments[xe];return m.prototype[I].apply(E,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,m,y){y||(y=0);var E=Array(16);if(typeof m=="string")for(var I=0;16>I;++I)E[I]=m.charCodeAt(y++)|m.charCodeAt(y++)<<8|m.charCodeAt(y++)<<16|m.charCodeAt(y++)<<24;else for(I=0;16>I;++I)E[I]=m[y++]|m[y++]<<8|m[y++]<<16|m[y++]<<24;m=_.g[0],y=_.g[1],I=_.g[2];var k=_.g[3],T=m+(k^y&(I^k))+E[0]+3614090360&4294967295;m=y+(T<<7&4294967295|T>>>25),T=k+(I^m&(y^I))+E[1]+3905402710&4294967295,k=m+(T<<12&4294967295|T>>>20),T=I+(y^k&(m^y))+E[2]+606105819&4294967295,I=k+(T<<17&4294967295|T>>>15),T=y+(m^I&(k^m))+E[3]+3250441966&4294967295,y=I+(T<<22&4294967295|T>>>10),T=m+(k^y&(I^k))+E[4]+4118548399&4294967295,m=y+(T<<7&4294967295|T>>>25),T=k+(I^m&(y^I))+E[5]+1200080426&4294967295,k=m+(T<<12&4294967295|T>>>20),T=I+(y^k&(m^y))+E[6]+2821735955&4294967295,I=k+(T<<17&4294967295|T>>>15),T=y+(m^I&(k^m))+E[7]+4249261313&4294967295,y=I+(T<<22&4294967295|T>>>10),T=m+(k^y&(I^k))+E[8]+1770035416&4294967295,m=y+(T<<7&4294967295|T>>>25),T=k+(I^m&(y^I))+E[9]+2336552879&4294967295,k=m+(T<<12&4294967295|T>>>20),T=I+(y^k&(m^y))+E[10]+4294925233&4294967295,I=k+(T<<17&4294967295|T>>>15),T=y+(m^I&(k^m))+E[11]+2304563134&4294967295,y=I+(T<<22&4294967295|T>>>10),T=m+(k^y&(I^k))+E[12]+1804603682&4294967295,m=y+(T<<7&4294967295|T>>>25),T=k+(I^m&(y^I))+E[13]+4254626195&4294967295,k=m+(T<<12&4294967295|T>>>20),T=I+(y^k&(m^y))+E[14]+2792965006&4294967295,I=k+(T<<17&4294967295|T>>>15),T=y+(m^I&(k^m))+E[15]+1236535329&4294967295,y=I+(T<<22&4294967295|T>>>10),T=m+(I^k&(y^I))+E[1]+4129170786&4294967295,m=y+(T<<5&4294967295|T>>>27),T=k+(y^I&(m^y))+E[6]+3225465664&4294967295,k=m+(T<<9&4294967295|T>>>23),T=I+(m^y&(k^m))+E[11]+643717713&4294967295,I=k+(T<<14&4294967295|T>>>18),T=y+(k^m&(I^k))+E[0]+3921069994&4294967295,y=I+(T<<20&4294967295|T>>>12),T=m+(I^k&(y^I))+E[5]+3593408605&4294967295,m=y+(T<<5&4294967295|T>>>27),T=k+(y^I&(m^y))+E[10]+38016083&4294967295,k=m+(T<<9&4294967295|T>>>23),T=I+(m^y&(k^m))+E[15]+3634488961&4294967295,I=k+(T<<14&4294967295|T>>>18),T=y+(k^m&(I^k))+E[4]+3889429448&4294967295,y=I+(T<<20&4294967295|T>>>12),T=m+(I^k&(y^I))+E[9]+568446438&4294967295,m=y+(T<<5&4294967295|T>>>27),T=k+(y^I&(m^y))+E[14]+3275163606&4294967295,k=m+(T<<9&4294967295|T>>>23),T=I+(m^y&(k^m))+E[3]+4107603335&4294967295,I=k+(T<<14&4294967295|T>>>18),T=y+(k^m&(I^k))+E[8]+1163531501&4294967295,y=I+(T<<20&4294967295|T>>>12),T=m+(I^k&(y^I))+E[13]+2850285829&4294967295,m=y+(T<<5&4294967295|T>>>27),T=k+(y^I&(m^y))+E[2]+4243563512&4294967295,k=m+(T<<9&4294967295|T>>>23),T=I+(m^y&(k^m))+E[7]+1735328473&4294967295,I=k+(T<<14&4294967295|T>>>18),T=y+(k^m&(I^k))+E[12]+2368359562&4294967295,y=I+(T<<20&4294967295|T>>>12),T=m+(y^I^k)+E[5]+4294588738&4294967295,m=y+(T<<4&4294967295|T>>>28),T=k+(m^y^I)+E[8]+2272392833&4294967295,k=m+(T<<11&4294967295|T>>>21),T=I+(k^m^y)+E[11]+1839030562&4294967295,I=k+(T<<16&4294967295|T>>>16),T=y+(I^k^m)+E[14]+4259657740&4294967295,y=I+(T<<23&4294967295|T>>>9),T=m+(y^I^k)+E[1]+2763975236&4294967295,m=y+(T<<4&4294967295|T>>>28),T=k+(m^y^I)+E[4]+1272893353&4294967295,k=m+(T<<11&4294967295|T>>>21),T=I+(k^m^y)+E[7]+4139469664&4294967295,I=k+(T<<16&4294967295|T>>>16),T=y+(I^k^m)+E[10]+3200236656&4294967295,y=I+(T<<23&4294967295|T>>>9),T=m+(y^I^k)+E[13]+681279174&4294967295,m=y+(T<<4&4294967295|T>>>28),T=k+(m^y^I)+E[0]+3936430074&4294967295,k=m+(T<<11&4294967295|T>>>21),T=I+(k^m^y)+E[3]+3572445317&4294967295,I=k+(T<<16&4294967295|T>>>16),T=y+(I^k^m)+E[6]+76029189&4294967295,y=I+(T<<23&4294967295|T>>>9),T=m+(y^I^k)+E[9]+3654602809&4294967295,m=y+(T<<4&4294967295|T>>>28),T=k+(m^y^I)+E[12]+3873151461&4294967295,k=m+(T<<11&4294967295|T>>>21),T=I+(k^m^y)+E[15]+530742520&4294967295,I=k+(T<<16&4294967295|T>>>16),T=y+(I^k^m)+E[2]+3299628645&4294967295,y=I+(T<<23&4294967295|T>>>9),T=m+(I^(y|~k))+E[0]+4096336452&4294967295,m=y+(T<<6&4294967295|T>>>26),T=k+(y^(m|~I))+E[7]+1126891415&4294967295,k=m+(T<<10&4294967295|T>>>22),T=I+(m^(k|~y))+E[14]+2878612391&4294967295,I=k+(T<<15&4294967295|T>>>17),T=y+(k^(I|~m))+E[5]+4237533241&4294967295,y=I+(T<<21&4294967295|T>>>11),T=m+(I^(y|~k))+E[12]+1700485571&4294967295,m=y+(T<<6&4294967295|T>>>26),T=k+(y^(m|~I))+E[3]+2399980690&4294967295,k=m+(T<<10&4294967295|T>>>22),T=I+(m^(k|~y))+E[10]+4293915773&4294967295,I=k+(T<<15&4294967295|T>>>17),T=y+(k^(I|~m))+E[1]+2240044497&4294967295,y=I+(T<<21&4294967295|T>>>11),T=m+(I^(y|~k))+E[8]+1873313359&4294967295,m=y+(T<<6&4294967295|T>>>26),T=k+(y^(m|~I))+E[15]+4264355552&4294967295,k=m+(T<<10&4294967295|T>>>22),T=I+(m^(k|~y))+E[6]+2734768916&4294967295,I=k+(T<<15&4294967295|T>>>17),T=y+(k^(I|~m))+E[13]+1309151649&4294967295,y=I+(T<<21&4294967295|T>>>11),T=m+(I^(y|~k))+E[4]+4149444226&4294967295,m=y+(T<<6&4294967295|T>>>26),T=k+(y^(m|~I))+E[11]+3174756917&4294967295,k=m+(T<<10&4294967295|T>>>22),T=I+(m^(k|~y))+E[2]+718787259&4294967295,I=k+(T<<15&4294967295|T>>>17),T=y+(k^(I|~m))+E[9]+3951481745&4294967295,_.g[0]=_.g[0]+m&4294967295,_.g[1]=_.g[1]+(I+(T<<21&4294967295|T>>>11))&4294967295,_.g[2]=_.g[2]+I&4294967295,_.g[3]=_.g[3]+k&4294967295}r.prototype.u=function(_,m){m===void 0&&(m=_.length);for(var y=m-this.blockSize,E=this.B,I=this.h,k=0;k<m;){if(I==0)for(;k<=y;)i(this,_,k),k+=this.blockSize;if(typeof _=="string"){for(;k<m;)if(E[I++]=_.charCodeAt(k++),I==this.blockSize){i(this,E),I=0;break}}else for(;k<m;)if(E[I++]=_[k++],I==this.blockSize){i(this,E),I=0;break}}this.h=I,this.o+=m},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var m=1;m<_.length-8;++m)_[m]=0;var y=8*this.o;for(m=_.length-8;m<_.length;++m)_[m]=y&255,y/=256;for(this.u(_),_=Array(16),m=y=0;4>m;++m)for(var E=0;32>E;E+=8)_[y++]=this.g[m]>>>E&255;return _};function s(_,m){var y=l;return Object.prototype.hasOwnProperty.call(y,_)?y[_]:y[_]=m(_)}function a(_,m){this.h=m;for(var y=[],E=!0,I=_.length-1;0<=I;I--){var k=_[I]|0;E&&k==m||(y[I]=k,E=!1)}this.g=y}var l={};function u(_){return-128<=_&&128>_?s(_,function(m){return new a([m|0],0>m?-1:0)}):new a([_|0],0>_?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return g;if(0>_)return N(h(-_));for(var m=[],y=1,E=0;_>=y;E++)m[E]=_/y|0,y*=4294967296;return new a(m,0)}function d(_,m){if(_.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(_.charAt(0)=="-")return N(d(_.substring(1),m));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=h(Math.pow(m,8)),E=g,I=0;I<_.length;I+=8){var k=Math.min(8,_.length-I),T=parseInt(_.substring(I,I+k),m);8>k?(k=h(Math.pow(m,k)),E=E.j(k).add(h(T))):(E=E.j(y),E=E.add(h(T)))}return E}var g=u(0),v=u(1),P=u(16777216);t=a.prototype,t.m=function(){if(V(this))return-N(this).m();for(var _=0,m=1,y=0;y<this.g.length;y++){var E=this.i(y);_+=(0<=E?E:4294967296+E)*m,m*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(R(this))return"0";if(V(this))return"-"+N(this).toString(_);for(var m=h(Math.pow(_,6)),y=this,E="";;){var I=L(y,m).g;y=A(y,I.j(m));var k=((0<y.g.length?y.g[0]:y.h)>>>0).toString(_);if(y=I,R(y))return k+E;for(;6>k.length;)k="0"+k;E=k+E}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function R(_){if(_.h!=0)return!1;for(var m=0;m<_.g.length;m++)if(_.g[m]!=0)return!1;return!0}function V(_){return _.h==-1}t.l=function(_){return _=A(this,_),V(_)?-1:R(_)?0:1};function N(_){for(var m=_.g.length,y=[],E=0;E<m;E++)y[E]=~_.g[E];return new a(y,~_.h).add(v)}t.abs=function(){return V(this)?N(this):this},t.add=function(_){for(var m=Math.max(this.g.length,_.g.length),y=[],E=0,I=0;I<=m;I++){var k=E+(this.i(I)&65535)+(_.i(I)&65535),T=(k>>>16)+(this.i(I)>>>16)+(_.i(I)>>>16);E=T>>>16,k&=65535,T&=65535,y[I]=T<<16|k}return new a(y,y[y.length-1]&-2147483648?-1:0)};function A(_,m){return _.add(N(m))}t.j=function(_){if(R(this)||R(_))return g;if(V(this))return V(_)?N(this).j(N(_)):N(N(this).j(_));if(V(_))return N(this.j(N(_)));if(0>this.l(P)&&0>_.l(P))return h(this.m()*_.m());for(var m=this.g.length+_.g.length,y=[],E=0;E<2*m;E++)y[E]=0;for(E=0;E<this.g.length;E++)for(var I=0;I<_.g.length;I++){var k=this.i(E)>>>16,T=this.i(E)&65535,xe=_.i(I)>>>16,bt=_.i(I)&65535;y[2*E+2*I]+=T*bt,w(y,2*E+2*I),y[2*E+2*I+1]+=k*bt,w(y,2*E+2*I+1),y[2*E+2*I+1]+=T*xe,w(y,2*E+2*I+1),y[2*E+2*I+2]+=k*xe,w(y,2*E+2*I+2)}for(E=0;E<m;E++)y[E]=y[2*E+1]<<16|y[2*E];for(E=m;E<2*m;E++)y[E]=0;return new a(y,0)};function w(_,m){for(;(_[m]&65535)!=_[m];)_[m+1]+=_[m]>>>16,_[m]&=65535,m++}function C(_,m){this.g=_,this.h=m}function L(_,m){if(R(m))throw Error("division by zero");if(R(_))return new C(g,g);if(V(_))return m=L(N(_),m),new C(N(m.g),N(m.h));if(V(m))return m=L(_,N(m)),new C(N(m.g),m.h);if(30<_.g.length){if(V(_)||V(m))throw Error("slowDivide_ only works with positive integers.");for(var y=v,E=m;0>=E.l(_);)y=b(y),E=b(E);var I=U(y,1),k=U(E,1);for(E=U(E,2),y=U(y,2);!R(E);){var T=k.add(E);0>=T.l(_)&&(I=I.add(y),k=T),E=U(E,1),y=U(y,1)}return m=A(_,I.j(m)),new C(I,m)}for(I=g;0<=_.l(m);){for(y=Math.max(1,Math.floor(_.m()/m.m())),E=Math.ceil(Math.log(y)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),k=h(y),T=k.j(m);V(T)||0<T.l(_);)y-=E,k=h(y),T=k.j(m);R(k)&&(k=v),I=I.add(k),_=A(_,T)}return new C(I,_)}t.A=function(_){return L(this,_).h},t.and=function(_){for(var m=Math.max(this.g.length,_.g.length),y=[],E=0;E<m;E++)y[E]=this.i(E)&_.i(E);return new a(y,this.h&_.h)},t.or=function(_){for(var m=Math.max(this.g.length,_.g.length),y=[],E=0;E<m;E++)y[E]=this.i(E)|_.i(E);return new a(y,this.h|_.h)},t.xor=function(_){for(var m=Math.max(this.g.length,_.g.length),y=[],E=0;E<m;E++)y[E]=this.i(E)^_.i(E);return new a(y,this.h^_.h)};function b(_){for(var m=_.g.length+1,y=[],E=0;E<m;E++)y[E]=_.i(E)<<1|_.i(E-1)>>>31;return new a(y,_.h)}function U(_,m){var y=m>>5;m%=32;for(var E=_.g.length-y,I=[],k=0;k<E;k++)I[k]=0<m?_.i(k+y)>>>m|_.i(k+y+1)<<32-m:_.i(k+y);return new a(I,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ov=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,ur=a}).apply(typeof $p<"u"?$p:typeof self<"u"?self:typeof window<"u"?window:{});var Bo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var av,rs,lv,ia,Pc,uv,cv,hv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bo=="object"&&Bo];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(o,c){if(c)e:{var f=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var x=o[p];if(!(x in f))break e;f=f[x]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&e(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,p=!1,x={next:function(){if(!p&&f<o.length){var D=f++;return{value:c(D,o[D]),done:!1}}return p=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}i("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,p),o.apply(c,x)}}return function(){return o.apply(c,arguments)}}function v(o,c,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,v.apply(null,arguments)}function P(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function R(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,x,D){for(var j=Array(arguments.length-2),le=2;le<arguments.length;le++)j[le-2]=arguments[le];return c.prototype[x].apply(p,j)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function N(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const x=o.length||0,D=p.length||0;o.length=x+D;for(let j=0;j<D;j++)o[x+j]=p[j]}else o.push(p)}}class A{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function w(o){return/^[\s\xa0]*$/.test(o)}function C(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function L(o){return L[" "](o),o}L[" "]=function(){};var b=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function U(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function _(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function m(o){const c={};for(const f in o)c[f]=o[f];return c}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(o,c){let f,p;for(let x=1;x<arguments.length;x++){p=arguments[x];for(f in p)o[f]=p[f];for(let D=0;D<y.length;D++)f=y[D],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function I(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function k(o){l.setTimeout(()=>{throw o},0)}function T(){var o=K;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class xe{constructor(){this.h=this.g=null}add(c,f){const p=bt.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var bt=new A(()=>new xi,o=>o.reset());class xi{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Gt,z=!1,K=new xe,X=()=>{const o=l.Promise.resolve(void 0);Gt=()=>{o.then(ge)}};var ge=()=>{for(var o;o=T();){try{o.h.call(o.g)}catch(f){k(f)}var c=bt;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}z=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var Yt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function Xt(o,c){if(Ae.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(b){e:{try{L(c.nodeName);var x=!0;break e}catch{}x=!1}x||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Jt[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Xt.aa.h.call(this)}}R(Xt,Ae);var Jt={2:"touch",3:"pen",4:"mouse"};Xt.prototype.h=function(){Xt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Zt="closure_listenable_"+(1e6*Math.random()|0),L_=0;function M_(o,c,f,p,x){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=x,this.key=++L_,this.da=this.fa=!1}function oo(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ao(o){this.src=o,this.g={},this.h=0}ao.prototype.add=function(o,c,f,p,x){var D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);var j=Sl(o,c,p,x);return-1<j?(c=o[j],f||(c.fa=!1)):(c=new M_(c,this.src,D,!!p,x),c.fa=f,o.push(c)),c};function Al(o,c){var f=c.type;if(f in o.g){var p=o.g[f],x=Array.prototype.indexOf.call(p,c,void 0),D;(D=0<=x)&&Array.prototype.splice.call(p,x,1),D&&(oo(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Sl(o,c,f,p){for(var x=0;x<o.length;++x){var D=o[x];if(!D.da&&D.listener==c&&D.capture==!!f&&D.ha==p)return x}return-1}var Pl="closure_lm_"+(1e6*Math.random()|0),Cl={};function Af(o,c,f,p,x){if(Array.isArray(c)){for(var D=0;D<c.length;D++)Af(o,c[D],f,p,x);return null}return f=Cf(f),o&&o[Zt]?o.K(c,f,h(p)?!!p.capture:!1,x):O_(o,c,f,!1,p,x)}function O_(o,c,f,p,x,D){if(!c)throw Error("Invalid event type");var j=h(x)?!!x.capture:!!x,le=kl(o);if(le||(o[Pl]=le=new ao(o)),f=le.add(c,f,p,j,D),f.proxy)return f;if(p=F_(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)Yt||(x=j),x===void 0&&(x=!1),o.addEventListener(c.toString(),p,x);else if(o.attachEvent)o.attachEvent(Pf(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function F_(){function o(f){return c.call(o.src,o.listener,f)}const c=j_;return o}function Sf(o,c,f,p,x){if(Array.isArray(c))for(var D=0;D<c.length;D++)Sf(o,c[D],f,p,x);else p=h(p)?!!p.capture:!!p,f=Cf(f),o&&o[Zt]?(o=o.i,c=String(c).toString(),c in o.g&&(D=o.g[c],f=Sl(D,f,p,x),-1<f&&(oo(D[f]),Array.prototype.splice.call(D,f,1),D.length==0&&(delete o.g[c],o.h--)))):o&&(o=kl(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Sl(c,f,p,x)),(f=-1<o?c[o]:null)&&Rl(f))}function Rl(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Zt])Al(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(Pf(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=kl(c))?(Al(f,o),f.h==0&&(f.src=null,c[Pl]=null)):oo(o)}}}function Pf(o){return o in Cl?Cl[o]:Cl[o]="on"+o}function j_(o,c){if(o.da)o=!0;else{c=new Xt(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&Rl(o),o=f.call(p,c)}return o}function kl(o){return o=o[Pl],o instanceof ao?o:null}var xl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cf(o){return typeof o=="function"?o:(o[xl]||(o[xl]=function(c){return o.handleEvent(c)}),o[xl])}function qe(){ae.call(this),this.i=new ao(this),this.M=this,this.F=null}R(qe,ae),qe.prototype[Zt]=!0,qe.prototype.removeEventListener=function(o,c,f,p){Sf(this,o,c,f,p)};function nt(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new Ae(c,o);else if(c instanceof Ae)c.target=c.target||o;else{var x=c;c=new Ae(p,o),E(c,x)}if(x=!0,f)for(var D=f.length-1;0<=D;D--){var j=c.g=f[D];x=lo(j,p,!0,c)&&x}if(j=c.g=o,x=lo(j,p,!0,c)&&x,x=lo(j,p,!1,c)&&x,f)for(D=0;D<f.length;D++)j=c.g=f[D],x=lo(j,p,!1,c)&&x}qe.prototype.N=function(){if(qe.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)oo(f[p]);delete o.g[c],o.h--}}this.F=null},qe.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},qe.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function lo(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var x=!0,D=0;D<c.length;++D){var j=c[D];if(j&&!j.da&&j.capture==f){var le=j.listener,je=j.ha||j.src;j.fa&&Al(o.i,j),x=le.call(je,p)!==!1&&x}}return x&&!p.defaultPrevented}function Rf(o,c,f){if(typeof o=="function")f&&(o=v(o,f));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function kf(o){o.g=Rf(()=>{o.g=null,o.i&&(o.i=!1,kf(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class U_ extends ae{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:kf(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vi(o){ae.call(this),this.h=o,this.g={}}R(Vi,ae);var xf=[];function Vf(o){U(o.g,function(c,f){this.g.hasOwnProperty(f)&&Rl(c)},o),o.g={}}Vi.prototype.N=function(){Vi.aa.N.call(this),Vf(this)},Vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vl=l.JSON.stringify,b_=l.JSON.parse,z_=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Dl(){}Dl.prototype.h=null;function Df(o){return o.h||(o.h=o.i())}function Nf(){}var Di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nl(){Ae.call(this,"d")}R(Nl,Ae);function Ll(){Ae.call(this,"c")}R(Ll,Ae);var Gn={},Lf=null;function uo(){return Lf=Lf||new qe}Gn.La="serverreachability";function Mf(o){Ae.call(this,Gn.La,o)}R(Mf,Ae);function Ni(o){const c=uo();nt(c,new Mf(c))}Gn.STAT_EVENT="statevent";function Of(o,c){Ae.call(this,Gn.STAT_EVENT,o),this.stat=c}R(Of,Ae);function rt(o){const c=uo();nt(c,new Of(c,o))}Gn.Ma="timingevent";function Ff(o,c){Ae.call(this,Gn.Ma,o),this.size=c}R(Ff,Ae);function Li(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Mi(){this.g=!0}Mi.prototype.xa=function(){this.g=!1};function B_(o,c,f,p,x,D){o.info(function(){if(o.g)if(D)for(var j="",le=D.split("&"),je=0;je<le.length;je++){var re=le[je].split("=");if(1<re.length){var Qe=re[0];re=re[1];var Ke=Qe.split("_");j=2<=Ke.length&&Ke[1]=="type"?j+(Qe+"="+re+"&"):j+(Qe+"=redacted&")}}else j=null;else j=D;return"XMLHTTP REQ ("+p+") [attempt "+x+"]: "+c+`
`+f+`
`+j})}function $_(o,c,f,p,x,D,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+x+"]: "+c+`
`+f+`
`+D+" "+j})}function Cr(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+H_(o,f)+(p?" "+p:"")})}function W_(o,c){o.info(function(){return"TIMEOUT: "+c})}Mi.prototype.info=function(){};function H_(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var x=p[1];if(Array.isArray(x)&&!(1>x.length)){var D=x[0];if(D!="noop"&&D!="stop"&&D!="close")for(var j=1;j<x.length;j++)x[j]=""}}}}return Vl(f)}catch{return c}}var co={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ml;function ho(){}R(ho,Dl),ho.prototype.g=function(){return new XMLHttpRequest},ho.prototype.i=function(){return{}},Ml=new ho;function vn(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new Vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Uf}function Uf(){this.i=null,this.g="",this.h=!1}var bf={},Ol={};function Fl(o,c,f){o.L=1,o.v=go(en(c)),o.m=f,o.P=!0,zf(o,null)}function zf(o,c){o.F=Date.now(),fo(o),o.A=en(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),td(f.i,"t",p),o.C=0,f=o.j.J,o.h=new Uf,o.g=_d(o.j,f?c:null,!o.m),0<o.O&&(o.M=new U_(v(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var x="readystatechange";Array.isArray(x)||(x&&(xf[0]=x.toString()),x=xf);for(var D=0;D<x.length;D++){var j=Af(f,x[D],p||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=o.H?m(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Ni(),B_(o.i,o.u,o.A,o.l,o.R,o.m)}vn.prototype.ca=function(o){o=o.target;const c=this.M;c&&tn(o)==3?c.j():this.Y(o)},vn.prototype.Y=function(o){try{if(o==this.g)e:{const Ke=tn(this.g);var c=this.g.Ba();const xr=this.g.Z();if(!(3>Ke)&&(Ke!=3||this.g&&(this.h.h||this.g.oa()||ld(this.g)))){this.J||Ke!=4||c==7||(c==8||0>=xr?Ni(3):Ni(2)),jl(this);var f=this.g.Z();this.X=f;t:if(Bf(this)){var p=ld(this.g);o="";var x=p.length,D=tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yn(this),Oi(this);var j="";break t}this.h.i=new l.TextDecoder}for(c=0;c<x;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(D&&c==x-1)});p.length=0,this.h.g+=o,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,$_(this.i,this.u,this.A,this.l,this.R,Ke,f),this.o){if(this.T&&!this.K){t:{if(this.g){var le,je=this.g;if((le=je.g?je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(le)){var re=le;break t}}re=null}if(f=re)Cr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ul(this,f);else{this.o=!1,this.s=3,rt(12),Yn(this),Oi(this);break e}}if(this.P){f=!0;let Vt;for(;!this.J&&this.C<j.length;)if(Vt=q_(this,j),Vt==Ol){Ke==4&&(this.s=4,rt(14),f=!1),Cr(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==bf){this.s=4,rt(15),Cr(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Cr(this.i,this.l,Vt,null),Ul(this,Vt);if(Bf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||j.length!=0||this.h.h||(this.s=1,rt(16),f=!1),this.o=this.o&&f,!f)Cr(this.i,this.l,j,"[Invalid Chunked Response]"),Yn(this),Oi(this);else if(0<j.length&&!this.W){this.W=!0;var Qe=this.j;Qe.g==this&&Qe.ba&&!Qe.M&&(Qe.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Hl(Qe),Qe.M=!0,rt(11))}}else Cr(this.i,this.l,j,null),Ul(this,j);Ke==4&&Yn(this),this.o&&!this.J&&(Ke==4?md(this.j,this):(this.o=!1,fo(this)))}else u0(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),Yn(this),Oi(this)}}}catch{}finally{}};function Bf(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function q_(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?Ol:(f=Number(c.substring(f,p)),isNaN(f)?bf:(p+=1,p+f>c.length?Ol:(c=c.slice(p,p+f),o.C=p+f,c)))}vn.prototype.cancel=function(){this.J=!0,Yn(this)};function fo(o){o.S=Date.now()+o.I,$f(o,o.I)}function $f(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Li(v(o.ba,o),c)}function jl(o){o.B&&(l.clearTimeout(o.B),o.B=null)}vn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(W_(this.i,this.A),this.L!=2&&(Ni(),rt(17)),Yn(this),this.s=2,Oi(this)):$f(this,this.S-o)};function Oi(o){o.j.G==0||o.J||md(o.j,o)}function Yn(o){jl(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Vf(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Ul(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||bl(f.h,o))){if(!o.K&&bl(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var x=p;if(x[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)To(f),Eo(f);else break e;Wl(f),rt(18)}}else f.za=x[1],0<f.za-f.T&&37500>x[2]&&f.F&&f.v==0&&!f.C&&(f.C=Li(v(f.Za,f),6e3));if(1>=qf(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Jn(f,11)}else if((o.K||f.g==o)&&To(f),!w(c))for(x=f.Da.g.parse(c),c=0;c<x.length;c++){let re=x[c];if(f.T=re[0],re=re[1],f.G==2)if(re[0]=="c"){f.K=re[1],f.ia=re[2];const Qe=re[3];Qe!=null&&(f.la=Qe,f.j.info("VER="+f.la));const Ke=re[4];Ke!=null&&(f.Aa=Ke,f.j.info("SVER="+f.Aa));const xr=re[5];xr!=null&&typeof xr=="number"&&0<xr&&(p=1.5*xr,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const Vt=o.g;if(Vt){const Ao=Vt.g?Vt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ao){var D=p.h;D.g||Ao.indexOf("spdy")==-1&&Ao.indexOf("quic")==-1&&Ao.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(zl(D,D.h),D.h=null))}if(p.D){const ql=Vt.g?Vt.g.getResponseHeader("X-HTTP-Session-Id"):null;ql&&(p.ya=ql,ce(p.I,p.D,ql))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var j=o;if(p.qa=vd(p,p.J?p.ia:null,p.W),j.K){Qf(p.h,j);var le=j,je=p.L;je&&(le.I=je),le.B&&(jl(le),fo(le)),p.g=j}else dd(p);0<f.i.length&&wo(f)}else re[0]!="stop"&&re[0]!="close"||Jn(f,7);else f.G==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?Jn(f,7):$l(f):re[0]!="noop"&&f.l&&f.l.ta(re),f.v=0)}}Ni(4)}catch{}}var Q_=class{constructor(o,c){this.g=o,this.map=c}};function Wf(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hf(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function qf(o){return o.h?1:o.g?o.g.size:0}function bl(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function zl(o,c){o.g?o.g.add(c):o.h=c}function Qf(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Wf.prototype.cancel=function(){if(this.i=Kf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Kf(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function K_(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function G_(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function Gf(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=G_(o),p=K_(o),x=p.length,D=0;D<x;D++)c.call(void 0,p[D],f&&f[D],o)}var Yf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Y_(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),x=null;if(0<=p){var D=o[f].substring(0,p);x=o[f].substring(p+1)}else D=o[f];c(D,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Xn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Xn){this.h=o.h,po(this,o.j),this.o=o.o,this.g=o.g,mo(this,o.s),this.l=o.l;var c=o.i,f=new Ui;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Xf(this,f),this.m=o.m}else o&&(c=String(o).match(Yf))?(this.h=!1,po(this,c[1]||"",!0),this.o=Fi(c[2]||""),this.g=Fi(c[3]||"",!0),mo(this,c[4]),this.l=Fi(c[5]||"",!0),Xf(this,c[6]||"",!0),this.m=Fi(c[7]||"")):(this.h=!1,this.i=new Ui(null,this.h))}Xn.prototype.toString=function(){var o=[],c=this.j;c&&o.push(ji(c,Jf,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(ji(c,Jf,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(ji(f,f.charAt(0)=="/"?Z_:J_,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",ji(f,t0)),o.join("")};function en(o){return new Xn(o)}function po(o,c,f){o.j=f?Fi(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function mo(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Xf(o,c,f){c instanceof Ui?(o.i=c,n0(o.i,o.h)):(f||(c=ji(c,e0)),o.i=new Ui(c,o.h))}function ce(o,c,f){o.i.set(c,f)}function go(o){return ce(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Fi(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ji(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,X_),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function X_(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Jf=/[#\/\?@]/g,J_=/[#\?:]/g,Z_=/[#\?]/g,e0=/[#\?@]/g,t0=/#/g;function Ui(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function _n(o){o.g||(o.g=new Map,o.h=0,o.i&&Y_(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=Ui.prototype,t.add=function(o,c){_n(this),this.i=null,o=Rr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function Zf(o,c){_n(o),c=Rr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function ed(o,c){return _n(o),c=Rr(o,c),o.g.has(c)}t.forEach=function(o,c){_n(this),this.g.forEach(function(f,p){f.forEach(function(x){o.call(c,x,p,this)},this)},this)},t.na=function(){_n(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const x=o[p];for(let D=0;D<x.length;D++)f.push(c[p])}return f},t.V=function(o){_n(this);let c=[];if(typeof o=="string")ed(this,o)&&(c=c.concat(this.g.get(Rr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},t.set=function(o,c){return _n(this),this.i=null,o=Rr(this,o),ed(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function td(o,c,f){Zf(o,c),0<f.length&&(o.i=null,o.g.set(Rr(o,c),V(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const D=encodeURIComponent(String(p)),j=this.V(p);for(p=0;p<j.length;p++){var x=D;j[p]!==""&&(x+="="+encodeURIComponent(String(j[p]))),o.push(x)}}return this.i=o.join("&")};function Rr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function n0(o,c){c&&!o.j&&(_n(o),o.i=null,o.g.forEach(function(f,p){var x=p.toLowerCase();p!=x&&(Zf(this,p),td(this,x,f))},o)),o.j=c}function r0(o,c){const f=new Mi;if(l.Image){const p=new Image;p.onload=P(En,f,"TestLoadImage: loaded",!0,c,p),p.onerror=P(En,f,"TestLoadImage: error",!1,c,p),p.onabort=P(En,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=P(En,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function i0(o,c){const f=new Mi,p=new AbortController,x=setTimeout(()=>{p.abort(),En(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(D=>{clearTimeout(x),D.ok?En(f,"TestPingServer: ok",!0,c):En(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(x),En(f,"TestPingServer: error",!1,c)})}function En(o,c,f,p,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),p(f)}catch{}}function s0(){this.g=new z_}function o0(o,c,f){const p=f||"";try{Gf(o,function(x,D){let j=x;h(x)&&(j=Vl(x)),c.push(p+D+"="+encodeURIComponent(j))})}catch(x){throw c.push(p+"type="+encodeURIComponent("_badmap")),x}}function yo(o){this.l=o.Ub||null,this.j=o.eb||!1}R(yo,Dl),yo.prototype.g=function(){return new vo(this.l,this.j)},yo.prototype.i=function(o){return function(){return o}}({});function vo(o,c){qe.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(vo,qe),t=vo.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,zi(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bi(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,zi(this)),this.g&&(this.readyState=3,zi(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nd(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function nd(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?bi(this):zi(this),this.readyState==3&&nd(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,bi(this))},t.Qa=function(o){this.g&&(this.response=o,bi(this))},t.ga=function(){this.g&&bi(this)};function bi(o){o.readyState=4,o.l=null,o.j=null,o.v=null,zi(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function zi(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(vo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function rd(o){let c="";return U(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function Bl(o,c,f){e:{for(p in f){var p=!1;break e}p=!0}p||(f=rd(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):ce(o,c,f))}function we(o){qe.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(we,qe);var a0=/^https?$/i,l0=["POST","PUT"];t=we.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ml.g(),this.v=this.o?Df(this.o):Df(Ml),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(D){id(this,D);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var x in p)f.set(x,p[x]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const D of p.keys())f.set(D,p.get(D));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),x=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(l0,c,void 0))||p||x||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,j]of f)this.g.setRequestHeader(D,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ad(this),this.u=!0,this.g.send(o),this.u=!1}catch(D){id(this,D)}};function id(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,sd(o),_o(o)}function sd(o){o.A||(o.A=!0,nt(o,"complete"),nt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,nt(this,"complete"),nt(this,"abort"),_o(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_o(this,!0)),we.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?od(this):this.bb())},t.bb=function(){od(this)};function od(o){if(o.h&&typeof a<"u"&&(!o.v[1]||tn(o)!=4||o.Z()!=2)){if(o.u&&tn(o)==4)Rf(o.Ea,0,o);else if(nt(o,"readystatechange"),tn(o)==4){o.h=!1;try{const j=o.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var p;if(p=j===0){var x=String(o.D).match(Yf)[1]||null;!x&&l.self&&l.self.location&&(x=l.self.location.protocol.slice(0,-1)),p=!a0.test(x?x.toLowerCase():"")}f=p}if(f)nt(o,"complete"),nt(o,"success");else{o.m=6;try{var D=2<tn(o)?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.Z()+"]",sd(o)}}finally{_o(o)}}}}function _o(o,c){if(o.g){ad(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||nt(o,"ready");try{f.onreadystatechange=p}catch{}}}function ad(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function tn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),b_(c)}};function ld(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function u0(o){const c={};o=(o.g&&2<=tn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(w(o[p]))continue;var f=I(o[p]);const x=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=c[x]||[];c[x]=D,D.push(f)}_(c,function(p){return p.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function ud(o){this.Aa=0,this.i=[],this.j=new Mi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bi("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bi("baseRetryDelayMs",5e3,o),this.cb=Bi("retryDelaySeedMs",1e4,o),this.Wa=Bi("forwardChannelMaxRetries",2,o),this.wa=Bi("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Wf(o&&o.concurrentRequestLimit),this.Da=new s0,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ud.prototype,t.la=8,t.G=1,t.connect=function(o,c,f,p){rt(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=vd(this,null,this.W),wo(this)};function $l(o){if(cd(o),o.G==3){var c=o.U++,f=en(o.I);if(ce(f,"SID",o.K),ce(f,"RID",c),ce(f,"TYPE","terminate"),$i(o,f),c=new vn(o,o.j,c),c.L=2,c.v=go(en(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=_d(c.j,null),c.g.ea(c.v)),c.F=Date.now(),fo(c)}yd(o)}function Eo(o){o.g&&(Hl(o),o.g.cancel(),o.g=null)}function cd(o){Eo(o),o.u&&(l.clearTimeout(o.u),o.u=null),To(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function wo(o){if(!Hf(o.h)&&!o.s){o.s=!0;var c=o.Ga;Gt||X(),z||(Gt(),z=!0),K.add(c,o),o.B=0}}function c0(o,c){return qf(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Li(v(o.Ga,o,c),gd(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const x=new vn(this,this.j,o);let D=this.o;if(this.S&&(D?(D=m(D),E(D,this.S)):D=this.S),this.m!==null||this.O||(x.H=D,D=null),this.P)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=fd(this,x,c),f=en(this.I),ce(f,"RID",o),ce(f,"CVER",22),this.D&&ce(f,"X-HTTP-Session-Id",this.D),$i(this,f),D&&(this.O?c="headers="+encodeURIComponent(String(rd(D)))+"&"+c:this.m&&Bl(f,this.m,D)),zl(this.h,x),this.Ua&&ce(f,"TYPE","init"),this.P?(ce(f,"$req",c),ce(f,"SID","null"),x.T=!0,Fl(x,f,null)):Fl(x,f,c),this.G=2}}else this.G==3&&(o?hd(this,o):this.i.length==0||Hf(this.h)||hd(this))};function hd(o,c){var f;c?f=c.l:f=o.U++;const p=en(o.I);ce(p,"SID",o.K),ce(p,"RID",f),ce(p,"AID",o.T),$i(o,p),o.m&&o.o&&Bl(p,o.m,o.o),f=new vn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=fd(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),zl(o.h,f),Fl(f,p,c)}function $i(o,c){o.H&&U(o.H,function(f,p){ce(c,p,f)}),o.l&&Gf({},function(f,p){ce(c,p,f)})}function fd(o,c,f){f=Math.min(o.i.length,f);var p=o.l?v(o.l.Na,o.l,o):null;e:{var x=o.i;let D=-1;for(;;){const j=["count="+f];D==-1?0<f?(D=x[0].g,j.push("ofs="+D)):D=0:j.push("ofs="+D);let le=!0;for(let je=0;je<f;je++){let re=x[je].g;const Qe=x[je].map;if(re-=D,0>re)D=Math.max(0,x[je].g-100),le=!1;else try{o0(Qe,j,"req"+re+"_")}catch{p&&p(Qe)}}if(le){p=j.join("&");break e}}}return o=o.i.splice(0,f),c.D=o,p}function dd(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;Gt||X(),z||(Gt(),z=!0),K.add(c,o),o.v=0}}function Wl(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Li(v(o.Fa,o),gd(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,pd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Li(v(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),Eo(this),pd(this))};function Hl(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function pd(o){o.g=new vn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=en(o.qa);ce(c,"RID","rpc"),ce(c,"SID",o.K),ce(c,"AID",o.T),ce(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&ce(c,"TO",o.ja),ce(c,"TYPE","xmlhttp"),$i(o,c),o.m&&o.o&&Bl(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=go(en(c)),f.m=null,f.P=!0,zf(f,o)}t.Za=function(){this.C!=null&&(this.C=null,Eo(this),Wl(this),rt(19))};function To(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function md(o,c){var f=null;if(o.g==c){To(o),Hl(o),o.g=null;var p=2}else if(bl(o.h,c))f=c.D,Qf(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var x=o.B;p=uo(),nt(p,new Ff(p,f)),wo(o)}else dd(o);else if(x=c.s,x==3||x==0&&0<c.X||!(p==1&&c0(o,c)||p==2&&Wl(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),x){case 1:Jn(o,5);break;case 4:Jn(o,10);break;case 3:Jn(o,6);break;default:Jn(o,2)}}}function gd(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function Jn(o,c){if(o.j.info("Error code "+c),c==2){var f=v(o.fb,o),p=o.Xa;const x=!p;p=new Xn(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||po(p,"https"),go(p),x?r0(p.toString(),f):i0(p.toString(),f)}else rt(2);o.G=0,o.l&&o.l.sa(c),yd(o),cd(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function yd(o){if(o.G=0,o.ka=[],o.l){const c=Kf(o.h);(c.length!=0||o.i.length!=0)&&(N(o.ka,c),N(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function vd(o,c,f){var p=f instanceof Xn?en(f):new Xn(f);if(p.g!="")c&&(p.g=c+"."+p.g),mo(p,p.s);else{var x=l.location;p=x.protocol,c=c?c+"."+x.hostname:x.hostname,x=+x.port;var D=new Xn(null);p&&po(D,p),c&&(D.g=c),x&&mo(D,x),f&&(D.l=f),p=D}return f=o.D,c=o.ya,f&&c&&ce(p,f,c),ce(p,"VER",o.la),$i(o,p),p}function _d(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new we(new yo({eb:f})):new we(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ed(){}t=Ed.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Io(){}Io.prototype.g=function(o,c){return new gt(o,c)};function gt(o,c){qe.call(this),this.g=new ud(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!w(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!w(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new kr(this)}R(gt,qe),gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gt.prototype.close=function(){$l(this.g)},gt.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Vl(o),o=f);c.i.push(new Q_(c.Ya++,o)),c.G==3&&wo(c)},gt.prototype.N=function(){this.g.l=null,delete this.j,$l(this.g),delete this.g,gt.aa.N.call(this)};function wd(o){Nl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const f in c){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}R(wd,Nl);function Td(){Ll.call(this),this.status=1}R(Td,Ll);function kr(o){this.g=o}R(kr,Ed),kr.prototype.ua=function(){nt(this.g,"a")},kr.prototype.ta=function(o){nt(this.g,new wd(o))},kr.prototype.sa=function(o){nt(this.g,new Td)},kr.prototype.ra=function(){nt(this.g,"b")},Io.prototype.createWebChannel=Io.prototype.g,gt.prototype.send=gt.prototype.o,gt.prototype.open=gt.prototype.m,gt.prototype.close=gt.prototype.close,hv=function(){return new Io},cv=function(){return uo()},uv=Gn,Pc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},co.NO_ERROR=0,co.TIMEOUT=8,co.HTTP_ERROR=6,ia=co,jf.COMPLETE="complete",lv=jf,Nf.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",qe.prototype.listen=qe.prototype.K,rs=Nf,we.prototype.listenOnce=we.prototype.L,we.prototype.getLastError=we.prototype.Ka,we.prototype.getLastErrorCode=we.prototype.Ba,we.prototype.getStatus=we.prototype.Z,we.prototype.getResponseJson=we.prototype.Oa,we.prototype.getResponseText=we.prototype.oa,we.prototype.send=we.prototype.ea,we.prototype.setWithCredentials=we.prototype.Ha,av=we}).apply(typeof Bo<"u"?Bo:typeof self<"u"?self:typeof window<"u"?window:{});const Wp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ei="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new ev("@firebase/firestore");function Ji(){return gr.logLevel}function W(t,...e){if(gr.logLevel<=te.DEBUG){const n=e.map(Bh);gr.debug(`Firestore (${Ei}): ${t}`,...n)}}function mn(t,...e){if(gr.logLevel<=te.ERROR){const n=e.map(Bh);gr.error(`Firestore (${Ei}): ${t}`,...n)}}function li(t,...e){if(gr.logLevel<=te.WARN){const n=e.map(Bh);gr.warn(`Firestore (${Ei}): ${t}`,...n)}}function Bh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${Ei}) INTERNAL ASSERTION FAILED: `+t;throw mn(e),new Error(e)}function oe(t,e){t||Q()}function Y(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends _i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Je.UNAUTHENTICATED))}shutdown(){}}class IT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class AT{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new cr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new cr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string"),new fv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string"),new Je(e)}}class ST{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class PT{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new ST(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){oe(this.o===void 0);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string"),this.R=n.token,new CT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=kT(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function ui(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Le(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.timestamp=e}static fromTimestamp(e){return new G(e)}static min(){return new G(new Le(0,0))}static max(){return new G(new Le(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Us.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Us?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class fe extends Us{construct(e,n,r){return new fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new fe(n)}static emptyPath(){return new fe([])}}const xT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ze extends Us{construct(e,n,r){return new ze(e,n,r)}static isValidIdentifier(e){return xT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ze(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new B(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new B(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ze(n)}static emptyPath(){return new ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(fe.fromString(e))}static fromName(e){return new q(fe.fromString(e).popFirst(5))}static empty(){return new q(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new fe(e.slice()))}}function VT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=G.fromTimestamp(r===1e9?new Le(n+1,0):new Le(n,r));return new Bn(i,q.empty(),e)}function DT(t){return new Bn(t.readTime,t.key,-1)}class Bn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Bn(G.min(),q.empty(),-1)}static max(){return new Bn(G.max(),q.empty(),-1)}}function NT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==LT)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},u=>r(u))}),a=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(d=>{a[h]=d,++l,l===s&&r(a)},d=>i(d))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function OT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Js(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}$h.oe=-1;function ll(t){return t==null}function ja(t){return t===0&&1/t==-1/0}function FT(t){return typeof t=="number"&&Number.isInteger(t)&&!ja(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ar(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,n){this.comparator=e,this.root=n||be.EMPTY}insert(e,n){return new Ee(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,be.BLACK,null,null))}remove(e){return new Ee(this.comparator,this.root.remove(e,this.comparator).copy(null,null,be.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $o(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $o(this.root,e,this.comparator,!1)}getReverseIterator(){return new $o(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $o(this.root,e,this.comparator,!0)}}class $o{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class be{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??be.RED,this.left=i??be.EMPTY,this.right=s??be.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new be(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return be.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return be.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,be.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}be.EMPTY=null,be.RED=!0,be.BLACK=!1;be.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,i,s){return this}insert(e,n,r){return new be(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qp(this.data.getIterator())}getIteratorFrom(e){return new qp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $e)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $e(this.comparator);return n.data=e,n}}class qp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.fields=e,e.sort(ze.comparator)}static empty(){return new _t([])}unionWith(e){let n=new $e(ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new _t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ui(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new mv("Invalid base64 string: "+s):s}}(e);return new He(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new He(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}He.EMPTY_BYTE_STRING=new He("");const jT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $n(t){if(oe(!!t),typeof t=="string"){let e=0;const n=jT.exec(t);if(oe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yr(t){return typeof t=="string"?He.fromBase64String(t):He.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hh(t){const e=t.mapValue.fields.__previous_value__;return Wh(e)?Hh(e):e}function bs(t){const e=$n(t.mapValue.fields.__local_write_time__.timestampValue);return new Le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n,r,i,s,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class zs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new zs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof zs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo={mapValue:{}};function vr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wh(t)?4:zT(t)?9007199254740991:bT(t)?10:11:Q()}function Kt(t,e){if(t===e)return!0;const n=vr(t);if(n!==vr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bs(t).isEqual(bs(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=$n(i.timestampValue),l=$n(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return yr(i.bytesValue).isEqual(yr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Se(i.geoPointValue.latitude)===Se(s.geoPointValue.latitude)&&Se(i.geoPointValue.longitude)===Se(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Se(i.integerValue)===Se(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Se(i.doubleValue),l=Se(s.doubleValue);return a===l?ja(a)===ja(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ui(t.arrayValue.values||[],e.arrayValue.values||[],Kt);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Hp(a)!==Hp(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Kt(a[u],l[u])))return!1;return!0}(t,e);default:return Q()}}function Bs(t,e){return(t.values||[]).find(n=>Kt(n,e))!==void 0}function ci(t,e){if(t===e)return 0;const n=vr(t),r=vr(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Se(s.integerValue||s.doubleValue),u=Se(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Qp(t.timestampValue,e.timestampValue);case 4:return Qp(bs(t),bs(e));case 5:return ie(t.stringValue,e.stringValue);case 6:return function(s,a){const l=yr(s),u=yr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=ie(l[h],u[h]);if(d!==0)return d}return ie(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=ie(Se(s.latitude),Se(a.latitude));return l!==0?l:ie(Se(s.longitude),Se(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Kp(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,u,h,d;const g=s.fields||{},v=a.fields||{},P=(l=g.value)===null||l===void 0?void 0:l.arrayValue,R=(u=v.value)===null||u===void 0?void 0:u.arrayValue,V=ie(((h=P==null?void 0:P.values)===null||h===void 0?void 0:h.length)||0,((d=R==null?void 0:R.values)===null||d===void 0?void 0:d.length)||0);return V!==0?V:Kp(P,R)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Wo.mapValue&&a===Wo.mapValue)return 0;if(s===Wo.mapValue)return 1;if(a===Wo.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const v=ie(u[g],d[g]);if(v!==0)return v;const P=ci(l[u[g]],h[d[g]]);if(P!==0)return P}return ie(u.length,d.length)}(t.mapValue,e.mapValue);default:throw Q()}}function Qp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=$n(t),r=$n(e),i=ie(n.seconds,r.seconds);return i!==0?i:ie(n.nanos,r.nanos)}function Kp(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ci(n[i],r[i]);if(s)return s}return ie(n.length,r.length)}function hi(t){return Cc(t)}function Cc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=$n(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return yr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Cc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Cc(n.fields[a])}`;return i+"}"}(t.mapValue):Q()}function Gp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rc(t){return!!t&&"integerValue"in t}function qh(t){return!!t&&"arrayValue"in t}function Yp(t){return!!t&&"nullValue"in t}function Xp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sa(t){return!!t&&"mapValue"in t}function bT(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function gs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ar(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=gs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function zT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.value=e}static empty(){return new ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gs(n)}setAll(e){let n=ze.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=gs(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());sa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];sa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ar(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ut(gs(this.value))}}function gv(t){const e=[];return Ar(t.fields,(n,r)=>{const i=new ze([n]);if(sa(r)){const s=gv(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new _t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new et(e,0,G.min(),G.min(),G.min(),ut.empty(),0)}static newFoundDocument(e,n,r,i){return new et(e,1,n,G.min(),r,i,0)}static newNoDocument(e,n){return new et(e,2,n,G.min(),G.min(),ut.empty(),0)}static newUnknownDocument(e,n){return new et(e,3,n,G.min(),G.min(),ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n){this.position=e,this.inclusive=n}}function Jp(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(a.referenceValue),n.key):r=ci(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Zp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Kt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n="asc"){this.field=e,this.dir=n}}function BT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{}class ke extends yv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new WT(e,n,r):n==="array-contains"?new QT(e,r):n==="in"?new KT(e,r):n==="not-in"?new GT(e,r):n==="array-contains-any"?new YT(e,r):new ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new HT(e,r):new qT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ci(n,this.value)):n!==null&&vr(this.value)===vr(n)&&this.matchesComparison(ci(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ut extends yv{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ut(e,n)}matches(e){return vv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function vv(t){return t.op==="and"}function _v(t){return $T(t)&&vv(t)}function $T(t){for(const e of t.filters)if(e instanceof Ut)return!1;return!0}function kc(t){if(t instanceof ke)return t.field.canonicalString()+t.op.toString()+hi(t.value);if(_v(t))return t.filters.map(e=>kc(e)).join(",");{const e=t.filters.map(n=>kc(n)).join(",");return`${t.op}(${e})`}}function Ev(t,e){return t instanceof ke?function(r,i){return i instanceof ke&&r.op===i.op&&r.field.isEqual(i.field)&&Kt(r.value,i.value)}(t,e):t instanceof Ut?function(r,i){return i instanceof Ut&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&Ev(a,i.filters[l]),!0):!1}(t,e):void Q()}function wv(t){return t instanceof ke?function(n){return`${n.field.canonicalString()} ${n.op} ${hi(n.value)}`}(t):t instanceof Ut?function(n){return n.op.toString()+" {"+n.getFilters().map(wv).join(" ,")+"}"}(t):"Filter"}class WT extends ke{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class HT extends ke{constructor(e,n){super(e,"in",n),this.keys=Tv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class qT extends ke{constructor(e,n){super(e,"not-in",n),this.keys=Tv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Tv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class QT extends ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qh(n)&&Bs(n.arrayValue,this.value)}}class KT extends ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bs(this.value.arrayValue,n)}}class GT extends ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Bs(this.value.arrayValue,n)}}class YT extends ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bs(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.ue=null}}function em(t,e=null,n=[],r=[],i=null,s=null,a=null){return new XT(t,e,n,r,i,s,a)}function Qh(t){const e=Y(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ll(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hi(r)).join(",")),e.ue=n}return e.ue}function Kh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!BT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ev(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Zp(t.startAt,e.startAt)&&Zp(t.endAt,e.endAt)}function xc(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function JT(t,e,n,r,i,s,a,l){return new wi(t,e,n,r,i,s,a,l)}function Gh(t){return new wi(t)}function tm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Iv(t){return t.collectionGroup!==null}function ys(t){const e=Y(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new $e(ze.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new $s(s,r))}),n.has(ze.keyField().canonicalString())||e.ce.push(new $s(ze.keyField(),r))}return e.ce}function qt(t){const e=Y(t);return e.le||(e.le=ZT(e,ys(t))),e.le}function ZT(t,e){if(t.limitType==="F")return em(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new $s(i.field,s)});const n=t.endAt?new Ua(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ua(t.startAt.position,t.startAt.inclusive):null;return em(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vc(t,e){const n=t.filters.concat([e]);return new wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dc(t,e,n){return new wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ul(t,e){return Kh(qt(t),qt(e))&&t.limitType===e.limitType}function Av(t){return`${Qh(qt(t))}|lt:${t.limitType}`}function Dr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>wv(i)).join(", ")}]`),ll(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>hi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>hi(i)).join(",")),`Target(${r})`}(qt(t))}; limitType=${t.limitType})`}function cl(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ys(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,u){const h=Jp(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,ys(r),i)||r.endAt&&!function(a,l,u){const h=Jp(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,ys(r),i))}(t,e)}function eI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Sv(t){return(e,n)=>{let r=!1;for(const i of ys(t)){const s=tI(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function tI(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?ci(u,h):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ar(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return pv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=new Ee(q.comparator);function gn(){return nI}const Pv=new Ee(q.comparator);function is(...t){let e=Pv;for(const n of t)e=e.insert(n.key,n);return e}function Cv(t){let e=Pv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function or(){return vs()}function Rv(){return vs()}function vs(){return new Ti(t=>t.toString(),(t,e)=>t.isEqual(e))}const rI=new Ee(q.comparator),iI=new $e(q.comparator);function Z(...t){let e=iI;for(const n of t)e=e.add(n);return e}const sI=new $e(ie);function oI(){return sI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ja(e)?"-0":e}}function kv(t){return{integerValue:""+t}}function xv(t,e){return FT(e)?kv(e):Yh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(){this._=void 0}}function aI(t,e,n){return t instanceof ba?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Wh(s)&&(s=Hh(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof fi?Dv(t,e):t instanceof Ws?Nv(t,e):function(i,s){const a=Vv(i,s),l=nm(a)+nm(i.Pe);return Rc(a)&&Rc(i.Pe)?kv(l):Yh(i.serializer,l)}(t,e)}function lI(t,e,n){return t instanceof fi?Dv(t,e):t instanceof Ws?Nv(t,e):n}function Vv(t,e){return t instanceof Hs?function(r){return Rc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ba extends hl{}class fi extends hl{constructor(e){super(),this.elements=e}}function Dv(t,e){const n=Lv(e);for(const r of t.elements)n.some(i=>Kt(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ws extends hl{constructor(e){super(),this.elements=e}}function Nv(t,e){let n=Lv(e);for(const r of t.elements)n=n.filter(i=>!Kt(i,r));return{arrayValue:{values:n}}}class Hs extends hl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function nm(t){return Se(t.integerValue||t.doubleValue)}function Lv(t){return qh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n){this.field=e,this.transform=n}}function uI(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof fi&&i instanceof fi||r instanceof Ws&&i instanceof Ws?ui(r.elements,i.elements,Kt):r instanceof Hs&&i instanceof Hs?Kt(r.Pe,i.Pe):r instanceof ba&&i instanceof ba}(t.transform,e.transform)}class cI{constructor(e,n){this.version=e,this.transformResults=n}}class pt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pt}static exists(e){return new pt(void 0,e)}static updateTime(e){return new pt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fl{}function Ov(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dl(t.key,pt.none()):new Zs(t.key,t.data,pt.none());{const n=t.data,r=ut.empty();let i=new $e(ze.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Kn(t.key,r,new _t(i.toArray()),pt.none())}}function hI(t,e,n){t instanceof Zs?function(i,s,a){const l=i.value.clone(),u=im(i.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Kn?function(i,s,a){if(!oa(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=im(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(Fv(i)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function _s(t,e,n,r){return t instanceof Zs?function(s,a,l,u){if(!oa(s.precondition,a))return l;const h=s.value.clone(),d=sm(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Kn?function(s,a,l,u){if(!oa(s.precondition,a))return l;const h=sm(s.fieldTransforms,u,a),d=a.data;return d.setAll(Fv(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,a,l){return oa(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function fI(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Vv(r.transform,i||null);s!=null&&(n===null&&(n=ut.empty()),n.set(r.field,s))}return n||null}function rm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ui(r,i,(s,a)=>uI(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zs extends fl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Kn extends fl{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Fv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function im(t,e,n){const r=new Map;oe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,lI(a,l,n[i]))}return r}function sm(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,aI(s,a,e))}return r}class dl extends fl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dI extends fl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&hI(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_s(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_s(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Rv();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const u=Ov(a,l);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Z())}isEqual(e){return this.batchId===e.batchId&&ui(this.mutations,e.mutations,(n,r)=>rm(n,r))&&ui(this.baseMutations,e.baseMutations,(n,r)=>rm(n,r))}}class Xh{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){oe(e.mutations.length===r.length);let i=function(){return rI}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new Xh(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce,ee;function yI(t){switch(t){default:return Q();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function jv(t){if(t===void 0)return mn("GRPC error has no .code"),M.UNKNOWN;switch(t){case Ce.OK:return M.OK;case Ce.CANCELLED:return M.CANCELLED;case Ce.UNKNOWN:return M.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return M.INTERNAL;case Ce.UNAVAILABLE:return M.UNAVAILABLE;case Ce.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ce.NOT_FOUND:return M.NOT_FOUND;case Ce.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ce.ABORTED:return M.ABORTED;case Ce.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ce.DATA_LOSS:return M.DATA_LOSS;default:return Q()}}(ee=Ce||(Ce={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new ur([4294967295,4294967295],0);function om(t){const e=vI().encode(t),n=new ov;return n.update(e),new Uint8Array(n.digest())}function am(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ur([n,r],0),new ur([i,s],0)]}class Jh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ss(`Invalid padding: ${n}`);if(r<0)throw new ss(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ss(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ss(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ur.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ur.fromNumber(r)));return i.compare(_I)===1&&(i=new ur([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=om(e),[r,i]=am(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Jh(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=om(e),[r,i]=am(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ss extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,eo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new pl(G.min(),i,new Ee(ie),gn(),Z())}}class eo{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new eo(r,n,Z(),Z(),Z())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Uv{constructor(e,n){this.targetId=e,this.me=n}}class bv{constructor(e,n,r=He.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class lm{constructor(){this.fe=0,this.ge=cm(),this.pe=He.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Z(),n=Z(),r=Z();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new eo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=cm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class EI{constructor(e){this.Le=e,this.Be=new Map,this.ke=gn(),this.qe=um(),this.Qe=new Ee(ie)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(xc(s))if(r===0){const a=new q(s.path);this.Ue(n,a,et.newNoDocument(a,G.min()))}else oe(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=yr(r).toUint8Array()}catch(u){if(u instanceof mv)return li("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Jh(a,i,s)}catch(u){return li(u instanceof ss?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const l=this.Je(a);if(l){if(s.current&&xc(l.target)){const u=new q(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,et.newNoDocument(u,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=Z();this.qe.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new pl(e,n,this.Qe,this.ke,r);return this.ke=gn(),this.qe=um(),this.Qe=new Ee(ie),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new lm,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new $e(ie),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new lm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function um(){return new Ee(q.comparator)}function cm(){return new Ee(q.comparator)}const wI={asc:"ASCENDING",desc:"DESCENDING"},TI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},II={and:"AND",or:"OR"};class AI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nc(t,e){return t.useProto3Json||ll(e)?e:{value:e}}function za(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function SI(t,e){return za(t,e.toTimestamp())}function Qt(t){return oe(!!t),G.fromTimestamp(function(n){const r=$n(n);return new Le(r.seconds,r.nanos)}(t))}function Zh(t,e){return Lc(t,e).canonicalString()}function Lc(t,e){const n=function(i){return new fe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Bv(t){const e=fe.fromString(t);return oe(Qv(e)),e}function Mc(t,e){return Zh(t.databaseId,e.path)}function Iu(t,e){const n=Bv(e);if(n.get(1)!==t.databaseId.projectId)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(Wv(n))}function $v(t,e){return Zh(t.databaseId,e)}function PI(t){const e=Bv(t);return e.length===4?fe.emptyPath():Wv(e)}function Oc(t){return new fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Wv(t){return oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function hm(t,e,n){return{name:Mc(t,e),fields:n.value.mapValue.fields}}function CI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(oe(d===void 0||typeof d=="string"),He.fromBase64String(d||"")):(oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),He.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const d=h.code===void 0?M.UNKNOWN:jv(h.code);return new B(d,h.message||"")}(a);n=new bv(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Iu(t,r.document.name),s=Qt(r.document.updateTime),a=r.document.createTime?Qt(r.document.createTime):G.min(),l=new ut({mapValue:{fields:r.document.fields}}),u=et.newFoundDocument(i,s,a,l),h=r.targetIds||[],d=r.removedTargetIds||[];n=new aa(h,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Iu(t,r.document),s=r.readTime?Qt(r.readTime):G.min(),a=et.newNoDocument(i,s),l=r.removedTargetIds||[];n=new aa([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Iu(t,r.document),s=r.removedTargetIds||[];n=new aa([],s,i,null)}else{if(!("filter"in e))return Q();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new gI(i,s),l=r.targetId;n=new Uv(l,a)}}return n}function RI(t,e){let n;if(e instanceof Zs)n={update:hm(t,e.key,e.value)};else if(e instanceof dl)n={delete:Mc(t,e.key)};else if(e instanceof Kn)n={update:hm(t,e.key,e.data),updateMask:FI(e.fieldMask)};else{if(!(e instanceof dI))return Q();n={verify:Mc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof ba)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fi)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ws)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Hs)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:SI(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(t,e.precondition)),n}function kI(t,e){return t&&t.length>0?(oe(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?Qt(i.updateTime):Qt(s);return a.isEqual(G.min())&&(a=Qt(s)),new cI(a,i.transformResults||[])}(n,e))):[]}function xI(t,e){return{documents:[$v(t,e.path)]}}function VI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$v(t,i);const s=function(h){if(h.length!==0)return qv(Ut.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(v){return{field:Nr(v.field),direction:LI(v.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Nc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function DI(t){let e=PI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){oe(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(g){const v=Hv(g);return v instanceof Ut&&_v(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(v=>function(R){return new $s(Lr(R.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(g){let v;return v=typeof g=="object"?g.value:g,ll(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(g){const v=!!g.before,P=g.values||[];return new Ua(P,v)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const v=!g.before,P=g.values||[];return new Ua(P,v)}(n.endAt)),JT(e,i,a,s,l,"F",u,h)}function NI(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Hv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Lr(n.unaryFilter.field);return ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Lr(n.unaryFilter.field);return ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Lr(n.unaryFilter.field);return ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Lr(n.unaryFilter.field);return ke.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return ke.create(Lr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ut.create(n.compositeFilter.filters.map(r=>Hv(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function LI(t){return wI[t]}function MI(t){return TI[t]}function OI(t){return II[t]}function Nr(t){return{fieldPath:t.canonicalString()}}function Lr(t){return ze.fromServerFormat(t.fieldPath)}function qv(t){return t instanceof ke?function(n){if(n.op==="=="){if(Xp(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NAN"}};if(Yp(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Xp(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NOT_NAN"}};if(Yp(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nr(n.field),op:MI(n.op),value:n.value}}}(t):t instanceof Ut?function(n){const r=n.getFilters().map(i=>qv(i));return r.length===1?r[0]:{compositeFilter:{op:OI(n.op),filters:r}}}(t):Q()}function FI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Qv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n,r,i,s=G.min(),a=G.min(),l=He.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Rn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Rn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.ct=e}}function UI(t){const e=DI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.un=new zI}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Bn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Bn.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class zI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new $e(fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $e(fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new di(0)}static kn(){return new di(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.changes=new Ti(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_s(r.mutation,i,_t.empty(),Le.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Z()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Z()){const i=or();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=is();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=or();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Z()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=gn();const a=vs(),l=function(){return vs()}();return n.forEach((u,h)=>{const d=r.get(h.key);i.has(h.key)&&(d===void 0||d.mutation instanceof Kn)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),_s(d.mutation,h,d.mutation.getFieldMask(),Le.now())):a.set(h.key,_t.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>{var g;return l.set(h,new $I(d,(g=a.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=vs();let i=new Ee((a,l)=>a-l),s=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=r.get(u)||_t.empty();d=l.applyToLocalView(h,d),r.set(u,d);const g=(i.get(l.batchId)||Z()).add(u);i=i.insert(l.batchId,g)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=Rv();d.forEach(v=>{if(!s.has(v)){const P=Ov(n.get(v),r.get(v));P!==null&&g.set(v,P),s=s.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return O.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Iv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(or());let l=-1,u=s;return a.next(h=>O.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(d)?O.resolve():this.remoteDocumentCache.getEntry(e,d).next(v=>{u=u.insert(d,v)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,Z())).next(d=>({batchId:l,changes:Cv(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=is();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=is();return this.indexManager.getCollectionParents(e,s).next(l=>O.forEach(l,u=>{const h=function(g,v){return new wi(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(d=>{d.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,et.newInvalidDocument(d)))});let l=is();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&_s(d.mutation,h,_t.empty(),Le.now()),cl(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Qt(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:UI(i.bundledQuery),readTime:Qt(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.overlays=new Ee(q.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=or();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=or(),s=n.length+1,a=new q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ee((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=s.get(h.largestBatchId);d===null&&(d=or(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=or(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=i)););return O.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new mI(n,r));let s=this.Ir.get(n);s===void 0&&(s=Z(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this.sessionToken=He.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(){this.Tr=new $e(Me.Er),this.dr=new $e(Me.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Me(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Me(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new q(new fe([])),r=new Me(n,e),i=new Me(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new q(new fe([])),r=new Me(n,e),i=new Me(n,e+1);let s=Z();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Me(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Me{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||ie(e.wr,n.wr)}static Ar(e,n){return ie(e.wr,n.wr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new $e(Me.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new pI(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.br=this.br.add(new Me(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Me(n,0),i=new Me(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const l=this.Dr(a.wr);s.push(l)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $e(ie);return n.forEach(i=>{const s=new Me(i,0),a=new Me(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],l=>{r=r.add(l.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;q.isDocumentKey(s)||(s=s.child(""));const a=new Me(new q(s),0);let l=new $e(ie);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.wr)),!0)},a),O.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){oe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,i=>{const s=new Me(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Me(n,0),i=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.Mr=e,this.docs=function(){return new Ee(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():et.newInvalidDocument(n))}getEntries(e,n){let r=gn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():et.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=gn();const a=n.path,l=new q(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||NT(DT(d),r)<=0||(i.has(d.key)||cl(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new YI(this)}getSize(e){return O.resolve(this.size)}}class YI extends BI{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.persistence=e,this.Nr=new Ti(n=>Qh(n),Kh),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ef,this.targetCount=0,this.kr=di.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new di(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n){this.qr={},this.overlays={},this.Qr=new $h(0),this.Kr=!1,this.Kr=!0,this.$r=new QI,this.referenceDelegate=e(this),this.Ur=new XI(this),this.indexManager=new bI,this.remoteDocumentCache=function(i){return new GI(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new jI(n),this.Gr=new HI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new KI(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new ZI(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class ZI extends MT{constructor(e){super(),this.currentSequenceNumber=e}}class tf{constructor(e){this.persistence=e,this.Jr=new ef,this.Yr=null}static Zr(e){return new tf(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{const i=q.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,G.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Z(),i=Z();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new nf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return i1()?8:OT(n1())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new e2;return this.Xi(e,n,a).next(l=>{if(s.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ji()<=te.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Dr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Ji()<=te.DEBUG&&W("QueryEngine","Query:",Dr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ji()<=te.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Dr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qt(n))):O.resolve())}Yi(e,n){if(tm(n))return O.resolve(null);let r=qt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Dc(n,null,"F"),r=qt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Z(...s);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,a,u.readTime)?this.Yi(e,Dc(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return tm(n)||i.isEqual(G.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?O.resolve(null):(Ji()<=te.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Dr(n)),this.rs(e,a,n,VT(i,-1)).next(l=>l))})}ts(e,n){let r=new $e(Sv(e));return n.forEach((i,s)=>{cl(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ji()<=te.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Dr(n)),this.Ji.getDocumentsMatchingQuery(e,n,Bn.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ee(ie),this._s=new Ti(s=>Qh(s),Kh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function r2(t,e,n,r){return new n2(t,e,n,r)}async function Kv(t,e){const n=Y(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let u=Z();for(const h of i){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:l}))})})}function i2(t,e){const n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,v=g.keys();let P=O.resolve();return v.forEach(R=>{P=P.next(()=>d.getEntry(u,R)).next(V=>{const N=h.docVersions.get(R);oe(N!==null),V.version.compareTo(N)<0&&(g.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Z();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Gv(t){const e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function s2(t,e){const n=Y(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((d,g)=>{const v=i.get(g);if(!v)return;l.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,g)));let P=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?P=P.withResumeToken(He.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):d.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(d.resumeToken,r)),i=i.insert(g,P),function(V,N,A){return V.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(v,P,d)&&l.push(n.Ur.updateTargetData(s,P))});let u=gn(),h=Z();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(o2(s,a,e.documentUpdates).next(d=>{u=d.Ps,h=d.Is})),!r.isEqual(G.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(g=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(d)}return O.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.os=i,s))}function o2(t,e,n){let r=Z(),i=Z();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=gn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(G.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:a,Is:i}})}function a2(t,e){const n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function l2(t,e){const n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new Rn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Fc(t,e,n){const r=Y(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Js(a))throw a;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function fm(t,e,n){const r=Y(t);let i=G.min(),s=Z();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=Y(u),v=g._s.get(d);return v!==void 0?O.resolve(g.os.get(v)):g.Ur.getTargetData(h,d)}(r,a,qt(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:G.min(),n?s:Z())).next(l=>(u2(r,eI(e),l),{documents:l,Ts:s})))}function u2(t,e,n){let r=t.us.get(e)||G.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class dm{constructor(){this.activeTargetIds=oI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class c2{constructor(){this.so=new dm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new dm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho=null;function Au(){return Ho===null?Ho=function(){return 268435456+Math.round(2147483648*Math.random())}():Ho++,"0x"+Ho.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe="WebChannelConnection";class p2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const l=Au(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,a),this.No(n,u,h,i).then(d=>(W("RestConnection",`Received RPC '${n}' ${l}: `,d),d),d=>{throw li("RestConnection",`RPC '${n}' ${l} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(n,r,i,s,a,l){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ei}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=f2[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Au();return new Promise((a,l)=>{const u=new av;u.setWithCredentials(!0),u.listenOnce(lv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ia.NO_ERROR:const d=u.getResponseJson();W(Xe,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),a(d);break;case ia.TIMEOUT:W(Xe,`RPC '${e}' ${s} timed out`),l(new B(M.DEADLINE_EXCEEDED,"Request time out"));break;case ia.HTTP_ERROR:const g=u.getStatus();if(W(Xe,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const P=v==null?void 0:v.error;if(P&&P.status&&P.message){const R=function(N){const A=N.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(A)>=0?A:M.UNKNOWN}(P.status);l(new B(R,P.message))}else l(new B(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new B(M.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{W(Xe,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);W(Xe,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=Au(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=hv(),l=cv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=s.join("");W(Xe,`Creating RPC '${e}' stream ${i}: ${d}`,u);const g=a.createWebChannel(d,u);let v=!1,P=!1;const R=new d2({Io:N=>{P?W(Xe,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(v||(W(Xe,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),W(Xe,`RPC '${e}' stream ${i} sending:`,N),g.send(N))},To:()=>g.close()}),V=(N,A,w)=>{N.listen(A,C=>{try{w(C)}catch(L){setTimeout(()=>{throw L},0)}})};return V(g,rs.EventType.OPEN,()=>{P||(W(Xe,`RPC '${e}' stream ${i} transport opened.`),R.yo())}),V(g,rs.EventType.CLOSE,()=>{P||(P=!0,W(Xe,`RPC '${e}' stream ${i} transport closed`),R.So())}),V(g,rs.EventType.ERROR,N=>{P||(P=!0,li(Xe,`RPC '${e}' stream ${i} transport errored:`,N),R.So(new B(M.UNAVAILABLE,"The operation could not be completed")))}),V(g,rs.EventType.MESSAGE,N=>{var A;if(!P){const w=N.data[0];oe(!!w);const C=w,L=C.error||((A=C[0])===null||A===void 0?void 0:A.error);if(L){W(Xe,`RPC '${e}' stream ${i} received error:`,L);const b=L.status;let U=function(y){const E=Ce[y];if(E!==void 0)return jv(E)}(b),_=L.message;U===void 0&&(U=M.INTERNAL,_="Unknown error status: "+b+" with message "+L.message),P=!0,R.So(new B(U,_)),g.close()}else W(Xe,`RPC '${e}' stream ${i} received:`,w),R.bo(w)}}),V(l,uv.STAT_EVENT,N=>{N.stat===Pc.PROXY?W(Xe,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Pc.NOPROXY&&W(Xe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}function Su(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t){return new AI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n,r,i,s,a,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Yv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(mn(n.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new B(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class m2 extends Xv{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=CI(this.serializer,e),r=function(s){if(!("targetChange"in s))return G.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?G.min():a.readTime?Qt(a.readTime):G.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Oc(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=xc(u)?{documents:xI(s,u)}:{query:VI(s,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=zv(s,a.resumeToken);const h=Nc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(G.min())>0){l.readTime=za(s,a.snapshotVersion.toTimestamp());const h=Nc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=NI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Oc(this.serializer),n.removeTarget=e,this.a_(n)}}class g2 extends Xv{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return oe(!!e.streamToken),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=kI(e.writeResults,e.commitTime),r=Qt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Oc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>RI(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,Lc(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,Lc(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new B(M.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class v2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(mn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Sr(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=Y(u);h.L_.add(4),await to(h),h.q_.set("Unknown"),h.L_.delete(4),await gl(h)}(this))})}),this.q_=new v2(r,i)}}async function gl(t){if(Sr(t))for(const e of t.B_)await e(!0)}async function to(t){for(const e of t.B_)await e(!1)}function Jv(t,e){const n=Y(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),af(n)?of(n):Ii(n).r_()&&sf(n,e))}function rf(t,e){const n=Y(t),r=Ii(n);n.N_.delete(e),r.r_()&&Zv(n,e),n.N_.size===0&&(r.r_()?r.o_():Sr(n)&&n.q_.set("Unknown"))}function sf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(G.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ii(t).A_(e)}function Zv(t,e){t.Q_.xe(e),Ii(t).R_(e)}function of(t){t.Q_=new EI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ii(t).start(),t.q_.v_()}function af(t){return Sr(t)&&!Ii(t).n_()&&t.N_.size>0}function Sr(t){return Y(t).L_.size===0}function e_(t){t.Q_=void 0}async function E2(t){t.q_.set("Online")}async function w2(t){t.N_.forEach((e,n)=>{sf(t,e)})}async function T2(t,e){e_(t),af(t)?(t.q_.M_(e),of(t)):t.q_.set("Unknown")}async function I2(t,e,n){if(t.q_.set("Online"),e instanceof bv&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ba(t,r)}else if(e instanceof aa?t.Q_.Ke(e):e instanceof Uv?t.Q_.He(e):t.Q_.We(e),!n.isEqual(G.min()))try{const r=await Gv(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.Q_.rt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.N_.get(h);d&&s.N_.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.N_.get(u);if(!d)return;s.N_.set(u,d.withResumeToken(He.EMPTY_BYTE_STRING,d.snapshotVersion)),Zv(s,u);const g=new Rn(d.target,u,h,d.sequenceNumber);sf(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await Ba(t,r)}}async function Ba(t,e,n){if(!Js(e))throw e;t.L_.add(1),await to(t),t.q_.set("Offline"),n||(n=()=>Gv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await gl(t)})}function t_(t,e){return e().catch(n=>Ba(t,n,e))}async function yl(t){const e=Y(t),n=Wn(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;A2(e);)try{const i=await a2(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,S2(e,i)}catch(i){await Ba(e,i)}n_(e)&&r_(e)}function A2(t){return Sr(t)&&t.O_.length<10}function S2(t,e){t.O_.push(e);const n=Wn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function n_(t){return Sr(t)&&!Wn(t).n_()&&t.O_.length>0}function r_(t){Wn(t).start()}async function P2(t){Wn(t).p_()}async function C2(t){const e=Wn(t);for(const n of t.O_)e.m_(n.mutations)}async function R2(t,e,n){const r=t.O_.shift(),i=Xh.from(r,e,n);await t_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await yl(t)}async function k2(t,e){e&&Wn(t).V_&&await async function(r,i){if(function(a){return yI(a)&&a!==M.ABORTED}(i.code)){const s=r.O_.shift();Wn(r).s_(),await t_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await yl(r)}}(t,e),n_(t)&&r_(t)}async function mm(t,e){const n=Y(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Sr(n);n.L_.add(3),await to(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await gl(n)}async function x2(t,e){const n=Y(t);e?(n.L_.delete(2),await gl(n)):e||(n.L_.add(2),await to(n),n.q_.set("Unknown"))}function Ii(t){return t.K_||(t.K_=function(n,r,i){const s=Y(n);return s.w_(),new m2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:E2.bind(null,t),Ro:w2.bind(null,t),mo:T2.bind(null,t),d_:I2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),af(t)?of(t):t.q_.set("Unknown")):(await t.K_.stop(),e_(t))})),t.K_}function Wn(t){return t.U_||(t.U_=function(n,r,i){const s=Y(n);return s.w_(),new g2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:P2.bind(null,t),mo:k2.bind(null,t),f_:C2.bind(null,t),g_:R2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await yl(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new lf(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uf(t,e){if(mn("AsyncQueue",`${e}: ${t}`),Js(t))return new B(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=is(),this.sortedSet=new Ee(this.comparator)}static emptySet(e){return new ei(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ei)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ei;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(){this.W_=new Ee(q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class pi{constructor(e,n,r,i,s,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new pi(e,n,ei.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ul(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class D2{constructor(){this.queries=ym(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Y(n),s=i.queries;i.queries=ym(),s.forEach((a,l)=>{for(const u of l.j_)u.onError(r)})})(this,new B(M.ABORTED,"Firestore shutting down"))}}function ym(){return new Ti(t=>Av(t),ul)}async function N2(t,e){const n=Y(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new V2,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=uf(a,`Initialization of query '${Dr(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&cf(n)}async function L2(t,e){const n=Y(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function M2(t,e){const n=Y(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.j_)l.X_(i)&&(r=!0);a.z_=i}}r&&cf(n)}function O2(t,e,n){const r=Y(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function cf(t){t.Y_.forEach(e=>{e.next()})}var jc,vm;(vm=jc||(jc={})).ea="default",vm.Cache="cache";class F2{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new pi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=pi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==jc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e){this.key=e}}class s_{constructor(e){this.key=e}}class j2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Z(),this.mutatedKeys=Z(),this.Aa=Sv(e),this.Ra=new ei(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new gm,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,g)=>{const v=i.get(d),P=cl(this.query,g)?g:null,R=!!v&&this.mutatedKeys.has(v.key),V=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let N=!1;v&&P?v.data.isEqual(P.data)?R!==V&&(r.track({type:3,doc:P}),N=!0):this.ga(v,P)||(r.track({type:2,doc:P}),N=!0,(u&&this.Aa(P,u)>0||h&&this.Aa(P,h)<0)&&(l=!0)):!v&&P?(r.track({type:0,doc:P}),N=!0):v&&!P&&(r.track({type:1,doc:v}),N=!0,(u||h)&&(l=!0)),N&&(P?(a=a.add(P),s=V?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:a,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((d,g)=>function(P,R){const V=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return V(P)-V(R)}(d.type,g.type)||this.Aa(d.doc,g.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,a.length!==0||h?{snapshot:new pi(this.query,e.Ra,s,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new gm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Z(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new s_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new i_(r))}),n}ba(e){this.Ta=e.Ts,this.da=Z();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return pi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class U2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class b2{constructor(e){this.key=e,this.va=!1}}class z2{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ti(l=>Av(l),ul),this.Ma=new Map,this.xa=new Set,this.Oa=new Ee(q.comparator),this.Na=new Map,this.La=new ef,this.Ba={},this.ka=new Map,this.qa=di.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function B2(t,e,n=!0){const r=h_(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await o_(r,e,n,!0),i}async function $2(t,e){const n=h_(t);await o_(n,e,!0,!1)}async function o_(t,e,n,r){const i=await l2(t.localStore,qt(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await W2(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Jv(t.remoteStore,i),l}async function W2(t,e,n,r,i){t.Ka=(g,v,P)=>async function(V,N,A,w){let C=N.view.ma(A);C.ns&&(C=await fm(V.localStore,N.query,!1).then(({documents:_})=>N.view.ma(_,C)));const L=w&&w.targetChanges.get(N.targetId),b=w&&w.targetMismatches.get(N.targetId)!=null,U=N.view.applyChanges(C,V.isPrimaryClient,L,b);return Em(V,N.targetId,U.wa),U.snapshot}(t,g,v,P);const s=await fm(t.localStore,e,!0),a=new j2(e,s.Ts),l=a.ma(s.documents),u=eo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=a.applyChanges(l,t.isPrimaryClient,u);Em(t,n,h.wa);const d=new U2(e,n,a);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function H2(t,e,n){const r=Y(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!ul(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Fc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&rf(r.remoteStore,i.targetId),Uc(r,i.targetId)}).catch(Xs)):(Uc(r,i.targetId),await Fc(r.localStore,i.targetId,!0))}async function q2(t,e){const n=Y(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rf(n.remoteStore,r.targetId))}async function Q2(t,e,n){const r=eA(t);try{const i=await function(a,l){const u=Y(a),h=Le.now(),d=l.reduce((P,R)=>P.add(R.key),Z());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",P=>{let R=gn(),V=Z();return u.cs.getEntries(P,d).next(N=>{R=N,R.forEach((A,w)=>{w.isValidDocument()||(V=V.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(P,R)).next(N=>{g=N;const A=[];for(const w of l){const C=fI(w,g.get(w.key).overlayedDocument);C!=null&&A.push(new Kn(w.key,C,gv(C.value.mapValue),pt.exists(!0)))}return u.mutationQueue.addMutationBatch(P,h,A,l)}).next(N=>{v=N;const A=N.applyToLocalDocumentSet(g,V);return u.documentOverlayCache.saveOverlays(P,N.batchId,A)})}).then(()=>({batchId:v.batchId,changes:Cv(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,u){let h=a.Ba[a.currentUser.toKey()];h||(h=new Ee(ie)),h=h.insert(l,u),a.Ba[a.currentUser.toKey()]=h}(r,i.batchId,n),await no(r,i.changes),await yl(r.remoteStore)}catch(i){const s=uf(i,"Failed to persist write");n.reject(s)}}async function a_(t,e){const n=Y(t);try{const r=await s2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?oe(a.va):i.removedDocuments.size>0&&(oe(a.va),a.va=!1))}),await no(n,r,e)}catch(r){await Xs(r)}}function _m(t,e,n){const r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const l=a.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const u=Y(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const v of g.j_)v.Z_(l)&&(h=!0)}),h&&cf(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function K2(t,e,n){const r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new Ee(q.comparator);a=a.insert(s,et.newNoDocument(s,G.min()));const l=Z().add(s),u=new pl(G.min(),new Map,new Ee(ie),a,l);await a_(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),hf(r)}else await Fc(r.localStore,e,!1).then(()=>Uc(r,e,n)).catch(Xs)}async function G2(t,e){const n=Y(t),r=e.batch.batchId;try{const i=await i2(n.localStore,e);u_(n,r,null),l_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await no(n,i)}catch(i){await Xs(i)}}async function Y2(t,e,n){const r=Y(t);try{const i=await function(a,l){const u=Y(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(oe(g!==null),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(r.localStore,e);u_(r,e,n),l_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await no(r,i)}catch(i){await Xs(i)}}function l_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function u_(t,e,n){const r=Y(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Uc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||c_(t,r)})}function c_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(rf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),hf(t))}function Em(t,e,n){for(const r of n)r instanceof i_?(t.La.addReference(r.key,e),X2(t,r)):r instanceof s_?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||c_(t,r.key)):Q()}function X2(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),hf(t))}function hf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new q(fe.fromString(e)),r=t.qa.next();t.Na.set(r,new b2(n)),t.Oa=t.Oa.insert(n,r),Jv(t.remoteStore,new Rn(qt(Gh(n.path)),r,"TargetPurposeLimboResolution",$h.oe))}}async function no(t,e,n){const r=Y(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{a.push(r.Ka(u,e,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){i.push(h);const g=nf.Wi(u.targetId,h);s.push(g)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(u,h){const d=Y(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>O.forEach(h,v=>O.forEach(v.$i,P=>d.persistence.referenceDelegate.addReference(g,v.targetId,P)).next(()=>O.forEach(v.Ui,P=>d.persistence.referenceDelegate.removeReference(g,v.targetId,P)))))}catch(g){if(!Js(g))throw g;W("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const P=d.os.get(v),R=P.snapshotVersion,V=P.withLastLimboFreeSnapshotVersion(R);d.os=d.os.insert(v,V)}}}(r.localStore,s))}async function J2(t,e){const n=Y(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await Kv(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new B(M.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await no(n,r.hs)}}function Z2(t,e){const n=Y(t),r=n.Na.get(e);if(r&&r.va)return Z().add(r.key);{let i=Z();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const l=n.Fa.get(a);i=i.unionWith(l.view.Va)}return i}}function h_(t){const e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=a_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K2.bind(null,e),e.Ca.d_=M2.bind(null,e.eventManager),e.Ca.$a=O2.bind(null,e.eventManager),e}function eA(t){const e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y2.bind(null,e),e}class $a{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ml(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return r2(this.persistence,new t2,e.initialUser,this.serializer)}Ga(e){return new JI(tf.Zr,this.serializer)}Wa(e){return new c2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$a.provider={build:()=>new $a};class bc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_m(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=J2.bind(null,this.syncEngine),await x2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new D2}()}createDatastore(e){const n=ml(e.databaseInfo.databaseId),r=function(s){return new p2(s)}(e.databaseInfo);return function(s,a,l,u){return new y2(s,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new _2(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>_m(this.syncEngine,n,0),function(){return pm.D()?new pm:new h2}())}createSyncEngine(e,n){return function(i,s,a,l,u,h,d){const g=new z2(i,s,a,l,u,h);return d&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Y(i);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await to(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bc.provider={build:()=>new bc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):mn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Je.UNAUTHENTICATED,this.clientId=dv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{W("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(W("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=uf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Pu(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Kv(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function wm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rA(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>mm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>mm(e.remoteStore,i)),t._onlineComponents=e}async function rA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await Pu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;li("Error using user provided cache. Falling back to memory cache: "+n),await Pu(t,new $a)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await Pu(t,new $a);return t._offlineComponents}async function f_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await wm(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await wm(t,new bc))),t._onlineComponents}function iA(t){return f_(t).then(e=>e.syncEngine)}async function Tm(t){const e=await f_(t),n=e.eventManager;return n.onListen=B2.bind(null,e.syncEngine),n.onUnlisten=H2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=q2.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t,e,n){if(!n)throw new B(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sA(t,e,n,r){if(e===!0&&r===!0)throw new B(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Am(t){if(!q.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Sm(t){if(q.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vl(t);throw new B(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=d_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _l{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new TT;switch(r.type){case"firstParty":return new PT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Im.get(n);r&&(W("ComponentProvider","Removing Datastore"),Im.delete(n),r.terminate())}(this),Promise.resolve()}}function oA(t,e,n,r={}){var i;const s=(t=un(t,_l))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Je.MOCK_USER;else{l=t1(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new B(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Je(h)}t._authCredentials=new IT(new fv(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pr(this.firestore,e,this._query)}}class mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Un(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}}class Un extends Pr{constructor(e,n,r){super(e,n,Gh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new q(e))}withConverter(e){return new Un(this.firestore,e,this._path)}}function Ai(t,e,...n){if(t=xt(t),p_("collection","path",e),t instanceof _l){const r=fe.fromString(e,...n);return Sm(r),new Un(t,null,r)}{if(!(t instanceof mt||t instanceof Un))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return Sm(r),new Un(t.firestore,null,r)}}function Ne(t,e,...n){if(t=xt(t),arguments.length===1&&(e=dv.newId()),p_("doc","path",e),t instanceof _l){const r=fe.fromString(e,...n);return Am(r),new mt(t,null,new q(r))}{if(!(t instanceof mt||t instanceof Un))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return Am(r),new mt(t.firestore,t instanceof Un?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Yv(this,"async_queue_retry"),this.Vu=()=>{const r=Su();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Su();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Su();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new cr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Js(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw mn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=lf.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Q()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Rm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class _r extends _l{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Cm,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cm(e),this._firestoreClient=void 0,await e}}}function aA(t,e){const n=typeof t=="object"?t:cT(),r=typeof t=="string"?t:"(default)",i=oT(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Zw("firestore");s&&oA(i,...s)}return i}function ff(t){if(t._terminated)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||lA(t),t._firestoreClient}function lA(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,d){return new UT(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d_(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new nA(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mi(He.fromBase64String(e))}catch(n){throw new B(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mi(He.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=/^__.*__$/;class cA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Kn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zs(e,this.data,n,this.fieldTransforms)}}class m_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Kn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function g_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class El{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new El(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Wa(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(g_(this.Cu)&&uA.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class hA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ml(e)}Qu(e,n,r,i=!1){return new El({Cu:e,methodName:n,qu:r,path:ze.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wl(t){const e=t._freezeSettings(),n=ml(t._databaseId);return new hA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function y_(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);yf("Data must be an object, but it was:",a,r);const l=E_(r,a);let u,h;if(s.merge)u=new _t(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const v=zc(e,g,n);if(!a.contains(v))throw new B(M.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);T_(d,v)||d.push(v)}u=new _t(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new cA(new ut(l),u,h)}class Tl extends io{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tl}}function fA(t,e,n){return new El({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class mf extends io{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=fA(this,e,!0),r=this.Ku.map(s=>Si(s,n)),i=new fi(r);return new Mv(e.path,i)}isEqual(e){return e instanceof mf&&Ma(this.Ku,e.Ku)}}class gf extends io{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Hs(e.serializer,xv(e.serializer,this.$u));return new Mv(e.path,n)}isEqual(e){return e instanceof gf&&this.$u===e.$u}}function v_(t,e,n,r){const i=t.Qu(1,e,n);yf("Data must be an object, but it was:",i,r);const s=[],a=ut.empty();Ar(r,(u,h)=>{const d=vf(e,u,n);h=xt(h);const g=i.Nu(d);if(h instanceof Tl)s.push(d);else{const v=Si(h,g);v!=null&&(s.push(d),a.set(d,v))}});const l=new _t(s);return new m_(a,l,i.fieldTransforms)}function __(t,e,n,r,i,s){const a=t.Qu(1,e,n),l=[zc(e,r,n)],u=[i];if(s.length%2!=0)throw new B(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)l.push(zc(e,s[v])),u.push(s[v+1]);const h=[],d=ut.empty();for(let v=l.length-1;v>=0;--v)if(!T_(h,l[v])){const P=l[v];let R=u[v];R=xt(R);const V=a.Nu(P);if(R instanceof Tl)h.push(P);else{const N=Si(R,V);N!=null&&(h.push(P),d.set(P,N))}}const g=new _t(h);return new m_(d,g,a.fieldTransforms)}function dA(t,e,n,r=!1){return Si(n,t.Qu(r?4:3,e))}function Si(t,e){if(w_(t=xt(t)))return yf("Unsupported field value:",e,t),E_(t,e);if(t instanceof io)return function(r,i){if(!g_(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let u=Si(l,i.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xv(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Le.fromDate(r);return{timestampValue:za(i.serializer,s)}}if(r instanceof Le){const s=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:za(i.serializer,s)}}if(r instanceof df)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mi)return{bytesValue:zv(i.serializer,r._byteString)};if(r instanceof mt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Zh(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof pf)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Yh(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${vl(r)}`)}(t,e)}function E_(t,e){const n={};return pv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ar(t,(r,i)=>{const s=Si(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function w_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof df||t instanceof mi||t instanceof mt||t instanceof io||t instanceof pf)}function yf(t,e,n){if(!w_(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=vl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function zc(t,e,n){if((e=xt(e))instanceof ro)return e._internalPath;if(typeof e=="string")return vf(t,e);throw Wa("Field path arguments must be of type string or ",t,!1,void 0,n)}const pA=new RegExp("[~\\*/\\[\\]]");function vf(t,e,n){if(e.search(pA)>=0)throw Wa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ro(...e.split("."))._internalPath}catch{throw Wa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wa(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new B(M.INVALID_ARGUMENT,l+t+u)}function T_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_f("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mA extends I_{data(){return super.data()}}function _f(t,e){return typeof e=="string"?vf(t,e):e instanceof ro?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ef{}class A_ extends Ef{}function Pi(t,e,...n){let r=[];e instanceof Ef&&r.push(e),r=r.concat(n),function(s){const a=s.filter(u=>u instanceof Tf).length,l=s.filter(u=>u instanceof wf).length;if(a>1||a>0&&l>0)throw new B(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class wf extends A_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new wf(e,n,r)}_apply(e){const n=this._parse(e);return S_(e._query,n),new Pr(e.firestore,e.converter,Vc(e._query,n))}_parse(e){const n=wl(e.firestore);return function(s,a,l,u,h,d,g){let v;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){xm(g,d);const P=[];for(const R of g)P.push(km(u,s,R));v={arrayValue:{values:P}}}else v=km(u,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||xm(g,d),v=dA(l,a,g,d==="in"||d==="not-in");return ke.create(h,d,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Tf extends Ef{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Tf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ut.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const l=s.getFlattenedFilters();for(const u of l)S_(a,u),a=Vc(a,u)}(e._query,n),new Pr(e.firestore,e.converter,Vc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class If extends A_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new If(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $s(s,a)}(e._query,this._field,this._direction);return new Pr(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new wi(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Er(t,e="asc"){const n=e,r=_f("orderBy",t);return If._create(r,n)}function km(t,e,n){if(typeof(n=xt(n))=="string"){if(n==="")throw new B(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Iv(e)&&n.indexOf("/")!==-1)throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(fe.fromString(n));if(!q.isDocumentKey(r))throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gp(t,new q(r))}if(n instanceof mt)return Gp(t,n._key);throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vl(n)}.`)}function xm(t,e){if(!Array.isArray(t)||t.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function S_(t,e){const n=function(i,s){for(const a of i)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class yA{convertValue(e,n="none"){switch(vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ar(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Se(a.doubleValue));return new pf(s)}convertGeoPoint(e){return new df(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bs(e));default:return null}}convertTimestamp(e){const n=$n(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=fe.fromString(e);oe(Qv(r));const i=new zs(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||mn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class C_ extends I_{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new la(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_f("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class la extends C_{data(e={}){return super.data(e)}}class vA{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new os(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new la(this._firestore,this._userDataWriter,r.key,r,new os(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const u=new la(i._firestore,i._userDataWriter,l.doc.key,l.doc,new os(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new la(i._firestore,i._userDataWriter,l.doc.key,l.doc,new os(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:_A(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function _A(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}class R_ extends yA{constructor(e){super(),this.firestore=e}convertBytes(e){return new mi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function wr(t,e,n,...r){t=un(t,mt);const i=un(t.firestore,_r),s=wl(i);let a;return a=typeof(e=xt(e))=="string"||e instanceof ro?__(s,"updateDoc",t._key,e,n,r):v_(s,"updateDoc",t._key,e),Il(i,[a.toMutation(t._key,pt.exists(!0))])}function so(t){return Il(un(t.firestore,_r),[new dl(t._key,pt.none())])}function Ci(t,e){const n=un(t.firestore,_r),r=Ne(t),i=P_(t.converter,e);return Il(n,[y_(wl(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,pt.exists(!1))]).then(()=>r)}function Ri(t,...e){var n,r,i;t=xt(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Rm(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Rm(e[a])){const g=e[a];e[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[a+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[a+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let u,h,d;if(t instanceof mt)h=un(t.firestore,_r),d=Gh(t._key.path),u={next:g=>{e[a]&&e[a](EA(h,t,g))},error:e[a+1],complete:e[a+2]};else{const g=un(t,Pr);h=un(g.firestore,_r),d=g._query;const v=new R_(h);u={next:P=>{e[a]&&e[a](new vA(h,v,g,P))},error:e[a+1],complete:e[a+2]},gA(t._query)}return function(v,P,R,V){const N=new tA(V),A=new F2(P,N,R);return v.asyncQueue.enqueueAndForget(async()=>N2(await Tm(v),A)),()=>{N.Za(),v.asyncQueue.enqueueAndForget(async()=>L2(await Tm(v),A))}}(ff(h),d,l,u)}function Il(t,e){return function(r,i){const s=new cr;return r.asyncQueue.enqueueAndForget(async()=>Q2(await iA(r),i,s)),s.promise}(ff(t),e)}function EA(t,e,n){const r=n.docs.get(e._key),i=new R_(t);return new C_(t,i,e._key,r,new os(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=wl(e)}set(e,n,r){this._verifyNotCommitted();const i=Cu(e,this._firestore),s=P_(i.converter,n,r),a=y_(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,pt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Cu(e,this._firestore);let a;return a=typeof(n=xt(n))=="string"||n instanceof ro?__(this._dataReader,"WriteBatch.update",s._key,n,r,i):v_(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,pt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Cu(e,this._firestore);return this._mutations=this._mutations.concat(new dl(n._key,pt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cu(t,e){if((t=xt(t)).firestore!==e)throw new B(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function TA(...t){return new mf("arrayUnion",t)}function IA(t){return new gf("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(t){return ff(t=un(t,_r)),new wA(t,e=>Il(t,e))}(function(e,n=!0){(function(i){Ei=i})(uT),Fa(new Fs("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new _r(new AT(r.getProvider("auth-internal")),new RT(r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new B(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zs(h.options.projectId,d)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Zr(Wp,"4.7.3",e),Zr(Wp,"4.7.3","esm2017")})();const AA={apiKey:"AIzaSyB6-Z_XRfCHWQ3ujGzkj4ck1WtI9gX6O_k",authDomain:"cafestesiaapp.firebaseapp.com",projectId:"cafestesiaapp",storageBucket:"cafestesiaapp.firebasestorage.app",messagingSenderId:"639191492553",appId:"1:639191492553:web:dc6ce00f5622dc686faa18",measurementId:"G-Z52JP10C1R"},SA=rv(AA),me=aA(SA),ua=Ai(me,"tasks"),PA=async()=>{console.log("Seeding initial tasks to Firestore...");const t=ki(me);Ky.forEach(e=>{const n=Ne(ua);t.set(n,e)}),await t.commit(),console.log("Initial tasks seeded.")},CA=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const l=Pi(ua,Er("date"),Er("time")),u=Ri(l,h=>{if(h.empty&&Ky.length>0){PA();return}const d=h.docs.map(g=>({id:g.id,...g.data()}));e(d)},h=>{console.error("Error fetching Kanban tasks:",h)});return()=>u()},[]),{tasks:t,updateTaskStatus:async(l,u)=>{const h=Ne(me,"tasks",l);try{await wr(h,{status:u})}catch(d){console.error("Error updating task status:",d)}},addTask:async l=>{try{await Ci(ua,{...l,status:"todo"})}catch(u){console.error("Error adding task:",u)}},addMultipleTasks:async l=>{try{const u=ki(me);l.forEach(h=>{const d=Ne(ua);u.set(d,{...h,status:"todo"})}),await u.commit()}catch(u){console.error("Error adding multiple tasks:",u)}},updateTask:async l=>{const{id:u,...h}=l,d=Ne(me,"tasks",u);try{await wr(d,h)}catch(g){console.error("Error updating task:",g)}},deleteTask:async l=>{const u=Ne(me,"tasks",l);try{await so(u)}catch(h){console.error("Error deleting task:",h)}}}},Bc=Ai(me,"inventory"),RA=async()=>{console.log("Seeding initial inventory to Firestore...");const t=ki(me);Gy.forEach(e=>{const n=Ne(Bc);t.set(n,{...e,purchaseHistory:[]})}),await t.commit(),console.log("Initial inventory seeded.")},kA=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const a=Pi(Bc,Er("name")),l=Ri(a,u=>{if(u.empty&&Gy.length>0){RA();return}const h=u.docs.map(d=>({id:d.id,...d.data()}));e(h)},u=>{console.error("Error fetching inventory items:",u)});return()=>l()},[]),{items:t,addItem:async a=>{try{await Ci(Bc,{...a,purchaseHistory:[]})}catch(l){console.error("Error adding inventory item:",l)}},updateItem:async a=>{const{id:l,...u}=a,h=Ne(me,"inventory",l);try{await wr(h,u)}catch(d){console.error("Error updating item:",d)}},deleteItem:async a=>{const l=Ne(me,"inventory",a);try{await so(l)}catch(u){console.error("Error deleting item:",u)}},recordStockChange:async({itemId:a,change:l,purchaseDetails:u})=>{const h=Ne(me,"inventory",a);try{const d={currentStock:IA(l)};if(u&&l>0){const g={id:`pur-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,date:new Date().toISOString(),quantity:l,totalPrice:u.totalPrice,providerName:u.providerName};d.purchaseHistory=TA(g)}await wr(h,d)}catch(d){console.error("Error recording stock change:",d)}}}},$c=Ai(me,"providers"),k_=[{name:"Proveedor A"},{name:"Proveedor B"},{name:"Proveedor C"},{name:"Supermercado"},{name:"Tostador Local"}],xA=async()=>{console.log("Seeding initial providers to Firestore...");const t=ki(me);k_.forEach(e=>{const n=Ne($c);t.set(n,e)}),await t.commit(),console.log("Initial providers seeded.")},VA=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const s=Pi($c,Er("name")),a=Ri(s,l=>{if(l.empty&&k_.length>0){xA();return}const u=l.docs.map(h=>({id:h.id,...h.data()}));e(u)},l=>{console.error("Error fetching providers:",l)});return()=>a()},[]),{providers:t,addProvider:async s=>{try{await Ci($c,s)}catch(a){console.error("Error adding provider:",a)}},updateProvider:async s=>{const{id:a,...l}=s,u=Ne(me,"providers",a);try{await wr(u,l)}catch(h){console.error("Error updating provider:",h)}},deleteProvider:async s=>{const a=Ne(me,"providers",s);try{await so(a)}catch(l){console.error("Error deleting provider:",l)}}}},DA="data:audio/wav;base64,UklGRlgEAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQEAABk/2//aP9w/3X/eP+A/4P/hv+K/43/kv+b/5//ov+p/63/rv+w/7L/tP+3/7f/tv+z/7D/r/+t/6n/pP+g/53/l/+T/4v/iP+D/3//df9x/2n/Y/9f/13/Wv9Z/1n/Wv9c/1//Yv9m/2v/c/96/4H/h/+L/5D/mv+h/6n/sP+1/7n/vP/A/8L/xP/G/8j/yf/K/8r/yP/F/8H/uv+z/6f/n/+W/4n/f/9t/2T/Wv9V/1P/U/9T/1X/W/9h/2n/d/9//4j/l/+f/6b/r/+z/7f/vP/C/8f/zP/Q/9L/0//S/9H/zv/J/8T/v/+1/6r/n/+R/4b/ev9r/2P/V/9R/0//S/9M/03/T/9U/1r/Y/9r/3j/gf+J/5L/oP+p/7H/uP/A/8T/yv/P/9P/1v/Y/9j/1//T/8//yP/C/7z/tP+p/6D/kv+H/3n/av9j/1f/Uf9O/0z/TP9N/0//VP9b/2T/b/96/4L/i/+T/5//p/+t/7T/vP/C/8j/z//U/9f/2v/c/9z/2//W/9P/zP/I/8L/vP+0/6r/oP+S/4b/ef9s/2P/Vv9R/0//S/9L/0v/TP9Q/1T/Wv9j/2v/d/9+/4L/i/+S/5v/o/+p/6//sv+2/7r/v/+9/7z/u/+2/7H/qf+g/5n/kv+J/4H/d/9s/2T/Wf9W/1T/Uv9T/1T/Vf9Z/1//Yv9n/2v/cv95/3//hP+I/4r/jP+P/5D/kv+U/5X/lf+U/5D/j/+N/4r/if+F/4D/e/9z/2v/Z/9i/1//W/9Z/1f/Vf9V/1X/Vv9Y/1r/Xf9f/2L/Zv9r/3L/d/96/3//gv+F/4n/iv+N/4//kP+T/5X/mf+a/5v/m/+Z/5T/kP+O/4v/iP+F/4D/eP9x/2n/Y/9g/1//W/9Z/1j/V/9W/1b/V/9X/1j/Wv9d/2D/Y/9m/2n/c/91/3n/f/+C/4X/if+L/43/j/+Q/5L/lP+W/5j/mf+b/5z/n/+g/6H/oP+e/5r/lv+S/47/jf+K/4f/gf98/3X/c/9r/2b/Yv9f/17/W/9Z/1j/V/9V/1X/Vf9W/1j/W/9f/2P/aP9t/3H/df96/3//gv+E/4f/iP+K/4z/jv+P/5H/kv+U/5X/lv+Y/5n/mv+c/5//oP+h/6L/ov+i/6H/n/+d/5r/lf+R/47/jP+K/4f/gf99/3b/cf9p/2X/Yf9e/1v/Wf9Y/1f/Vf9V/1X/Vv9Y/1v/X/9h/2T/aP9u/3H/d/97/3//g/+E/4b/iP+J/4r/jP+O/5D/kv+U/5X/lv+Y/5n/mv+b/5z/nv+f/6D/of+i/6P/pP+k/6T/ov+g/53/m/+U/4//jf+K/4f/gP98/3b/c/9q/2b/Yf9f/13/Wv9Y/1f/VP9T/1L/Uv9T/1T/Vf9Y/1s=",NA="data:audio/wav;base64,UklGRmAEAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YSAEAAC9/73/v/+9/8D/wf/D/8T/xv/I/8n/y//L/8r/x//D/7//uv+5/7v/uv+7/7z/vP+9/77/wP/B/8P/xP/G/8j/yf/L/8z/zf/M/8r/x//D/7//uv+2/7L/sf+v/63/q/+o/6f/pP+k/6T/p/+n/6n/qv+u/7D/s/+3/7f/sv+w/6v/qP+j/57/mv+U/5D/j/+O/4//kP+T/5X/mf+a/5v/n/+h/6P/pP+m/6f/qP+n/6X/ov+e/5n/kv+P/4v/iP+G/4T/hP+G/4f/iP+K/4z/j/+R/5P/lf+Z/5v/nv+g/6L/pf+m/6f/qf+p/6f/pv+k/6H/nv+a/5T/kP+N/4n/hv+C/3//f/+A/4L/hP+G/4j/iv+M/47/kP+T/5X/mP+Z/5r/mv+Z/5f/lP+R/47/jP+J/4L/fP91/2//bf9w/3L/df96/3//gf+E/4f/iP+K/4//kf+V/5n/mv+c/57/nv+c/5n/lf+R/47/jf+K/4f/gP97/3X/cv9s/2n/a/9u/3D/c/92/3f/d/9x/2r/Z/9i/2H/Y/9l/2j/b/9y/3b/eP98/3//g/+D/4T/hP+C/37/d/9s/2b/Yf9f/13/Xf9f/2D/Yv9m/2r/c/94/3v/fv+A/4L/hP+G/4b/hP+C/3//d/9t/2f/Yv9f/17/Xf9e/1//Yf9j/2b/af9u/3H/d/96/3v/e/94/3L/af9l/2D/Xv9b/1j/V/9X/1f/V/9Z/1v/Xv9g/2T/aP9u/3L/d/95/3n/d/9x/2n/Zv9i/1//Xf9b/1j/Vv9V/1T/Uv9S/1L/U/9V/1f/Wf9c/1//Yv9n/2r/b/9y/3f/d/9w/2f/Yf9d/1r/V/9U/0//T/9O/07/T/9U/1b/Wf9b/1//Yv9k/2f/aP9o/2f/Y/9d/1r/Vv9T/07/S/9J/0j/R/9G/0b/Rv9H/0n/TP9P/1T/Wf9c/1//Yf9j/2X/Zv9l/2L/Xv9b/1f/U/9P/0z/Sv9I/0X/Q/9A/z//Ov85/zn/Of88/z//Qv9G/0r/T/9W/1//Yv9l/2f/aP9o/2b/Yv9d/1r/Vv9U/0//TP9K/0f/Q/8//zn/M/8u/yn/J/8j/yH/IP8h/yL/J/8s/zL/O/9C/0f/TP9U/1f/WP9Y/1f/U/9N/0j/Qv88/zL/KP8g/yv/PP9J/1f/dQB1/7X/uv+9/8H/xP/H/8n/y//N/9D/0P/N/8r/x//E/8D/vf+5/7b/tP+0/7T/tP+1/7X/tf+1/7X/tf+0/7D/qv+m/5//mv+U/5D/j/+N/4z/jP+O/4//kP+T/5X/mf+a/5v/nP+e/5//of+j/6X/pv+n/6f/pf+j/5//mv+U/4//jP+J/4P/fP94/3b/cv9w/2//c/93/3n/fv+C/4b/iP+K/4z/jv+Q/5L/lP+W/5j/mf+a/5v/nP+b/5f/kv+P/4v/iP+F/4D/ev90/2v/Z/9j/2D/Yv9k/2f/av9v/3H/d/96/3//g/+E/4b/iP+J/4v/jP+O/5D/kv+T/5D/j/+M/4n/h/+C/3//e/92/3D/av9n/2P/YP9f/1//YP9j/2X/aP9s/3D/d/96/3//gf+E/4b/iP+J/4r/jP+O/5D/kv+T/5H/jv+L/4j/hf+A/3r/cv9p/2X/Y/9g/1//YP9i/2X/aP9t/3H/df96/3//gf+E/4b/iP+J/4r/jP+O/4//j/+M/4n/h/+B/3z/df9x/2n/Zf9j/2D/YP9j/2X/aP9t/3H/df96/3//gf+D/4T/hf+G/4b/hf+E/4L/f/96/3b/cf9p/2b/Y/9g/2D/Y/9l/2f/a/9v/3H/df96/3//gP+B/4L/gv+C/4L/gf+A/3z/ef92/3H/av9n/2T/Yv9h/2L/ZP9n/2r/b/9x/3X/ef98/3//gP+B/4L/gv+A/3z/ef91/2//a/9p/2X/Y/9h/2D/YP9j/2X/aP9t/3H/d/96/3z/f/9//33/ef91/2//a/9p/2b/Y/9h/2D/YP9j/2X/aP9s/2//cP9x/3L/cf9w/2v/aP9l/2L/Yf9f/1//YP9j/2X/aP9t/3H/df96/3//gP+B/4L/gv+A/33/eP90/2z/aP9m/2L/Yf9h/2L/ZP9n/2r/bv9w/3L/df95/3v/fP9+/3v/df9x/2n/Zv9i/1//Xv9d/13/Xf9e/1//Yf9j/2X/aP9s/27/bv9s/2n/Zv9k/2L/Yf9g/2D/Yv9k/2b/aP9s/3D/cv91/3b/cv9v/2n/Zv9k/2L/Yf9f/17/Xf9d/13/Xv9f/2D/Yv9k/2b/aP9s/23/bf9r/2f/Y/9f/1v/V/9W/1b/Vv9W/1f/Wf9b/1//Yv9l/2j/b/9x/3X/d/9z/2v/Z/9i/1//W/9Z/1f/Vf9V/1X/Vf9W/1j/Wv9d/2D/Y/9m/2n/bf9v/23/av9o/2X/Yv9f/1v/WP9W/1T/Uv9S/1L/U/9V/1f/Wf9b/1//Yf9j/2X/aP9p/2n/Zv9k/1//Wv9V/1D/TP9L/0n/R/9G/0b/Rv9H/0n/TP9P/1T/Wf9b/1//Yf9i/2L/Yf9f/1v/Vv9R/07/S/9I/0X/Qf8+/zv/Of85/zn/O/8//0L/Rv9K/0//Vf9Y/1v/Xf9d/1v/V/9T/07/S/9G/0H/Ov8y/yj/Iv8e/xr/Fv8U/xT/FP8V/xb/Gv8e/yL/KP8y/zr/Qf9G/0v/Tv9T/1T/Uf9O/0n/Q/88/zD/J/8e/xX/D/8L/wn/Cf8J/wv/D/8V/x7/J/8w/zz/Q/9J/04=",LA="data:audio/wav;base64,UklGRmAEAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YSAEAAC9/73/v/+9/8D/wf/D/8T/xv/I/8n/y//L/8r/x//D/7//uv+5/7v/uv+7/7z/vP+9/77/wP/B/8P/xP/G/8j/yf/L/8z/zf/M/8r/x//D/7//uv+2/7L/sf+v/63/q/+o/6f/pP+k/6T/pP+n/6n/qv+u/7D/s/+3/7f/sv+w/6v/qP+j/57/mv+U/5D/j/+O/4//kP+T/5X/mf+a/5v/n/+h/6P/pP+m/6f/qP+n/6X/ov+e/5n/kv+P/4v/iP+G/4T/hP+G/4f/iP+K/4z/j/+R/5P/lf+Z/5v/nv+g/6L/pf+m/6f/qf+p/6f/pv+k/6H/nv+a/5T/kP+N/4n/hv+C/3//f/+A/4L/hP+G/4j/iv+M/47/kP+T/5X/mP+Z/5r/mv+Z/5f/lP+R/47/jP+J/4L/fP91/2//bf9w/3L/df96/3//gf+E/4f/iP+K/4//kf+V/5n/mv+c/57/nv+c/5n/lf+R/47/jf+K/4f/gP97/3X/cv9s/2n/a/9u/3D/c/92/3f/d/9x/2r/Z/9i/2H/Y/9l/2j/b/9y/3b/eP98/3//g/+D/4T/hP+C/37/d/9s/2b/Yf9f/13/Xf9f/2D/Yv9m/2r/c/94/3v/fv+A/4L/hP+G/4b/hP+C/3//d/9t/2f/Yv9f/17/Xf9e/1//Yf9j/2b/af9u/3H/d/96/3v/e/94/3L/af9l/2D/Xv9b/1j/V/9X/1f/V/9Z/1v/Xv9g/2T/aP9u/3L/d/95/3n/d/9x/2n/Zv9i/1//Xf9b/1j/Vv9V/1T/Uv9S/1L/U/9V/1f/Wf9c/1//Yv9n/2r/b/9y/3f/d/9w/2f/Yf9d/1r/V/9U/0//T/9O/07/T/9U/1b/Wf9b/1//Yv9k/2f/aP9o/2f/Y/9d/1r/Vv9T/07/S/9J/0j/R/9G/0b/Rv9H/0n/TP9P/1T/Wf9c/1//Yf9j/2X/Zv9l/2L/Xv9b/1f/U/9P/0z/Sv9I/0X/Q/9A/z//Ov85/zn/Of88/z//Qv9G/0r/T/9W/1//Yv9l/2f/aP9o/2b/Yv9d/1r/Vv9U/0//TP9K/0f/Q/8//zn/M/8u/yn/J/8j/yH/IP8h/yL/J/8s/zL/O/9C/0f/TP9U/1f/WP9Y/1f/U/9N/0j/Qv88/zL/KP8g/yv/PP9J/1f/dQB1/7X/uv+9/8H/xP/H/8n/y//N/9D/0P/N/8r/x//E/8D/vf+5/7b/tP+0/7T/tP+1/7X/tf+1/7X/tf+0/7D/qv+m/5//mv+U/5D/j/+N/4z/jP+O/4//kP+T/5X/mf+a/5v/nP+e/5//of+j/6X/pv+n/6f/pf+j/5//mv+U/4//jP+J/4P/fP94/3b/cv9w/2//c/93/3n/fv+C/4b/iP+K/4z/jv+Q/5L/lP+W/5j/mf+a/5v/nP+b/5f/kv+P/4v/iP+F/4D/ev90/2v/Z/9j/2D/Yv9k/2f/av9v/3H/d/96/3//g/+E/4b/iP+J/4v/jP+O/5D/kv+T/5D/j/+M/4n/h/+C/3//e/92/3D/av9n/2P/YP9f/1//YP9j/2X/aP9s/3D/d/96/3//gf+E/4b/iP+J/4r/jP+O/5D/kv+T/5H/jv+L/4j/hf+A/3r/cv9p/2X/Y/9g/1//YP9i/2X/aP9t/3H/df96/3//gf+E/4b/iP+J/4r/jP+O/4//j/+M/4n/h/+B/3z/df9x/2n/Zf9j/2D/YP9j/2X/aP9t/3H/df96/3//gf+D/4T/hf+G/4b/hf+E/4L/f/96/3b/cf9p/2b/Y/9g/2D/Y/9l/2f/a/9v/3H/df96/3//gP+B/4L/gv+C/4L/gf+A/3z/ef92/3H/av9n/2T/Yv9h/2L/ZP9n/2r/b/9x/3X/ef98/3//gP+B/4L/gv+A/3z/ef91/2//a/9p/2X/Y/9h/2D/YP9j/2X/aP9t/3H/d/96/3z/f/9//33/ef91/2//a/9p/2b/Y/9h/2D/YP9j/2X/aP9s/2//cP9x/3L/cf9w/2v/aP9l/2L/Yf9f/1//YP9j/2X/aP9t/3H/df96/3//gP+B/4L/gv+A/33/eP90/2z/aP9m/2L/Yf9h/2L/ZP9n/2r/bv9w/3L/df95/3v/fP9+/3v/df9x/2n/Zv9i/1//Xv9d/13/Xf9e/1//Yf9j/2X/aP9s/27/bv9s/2n/Zv9k/2L/Yf9g/2D/Yv9k/2b/aP9s/3D/cv91/3b/cv9v/2n/Zv9k/2L/Yf9f/17/Xf9d/13/Xv9f/2D/Yv9k/2b/aP9s/23/bf9r/2f/Y/9f/1v/V/9W/1b/Vv9W/1f/Wf9b/1//Yv9l/2j/b/9x/3X/d/9z/2v/Z/9i/1//W/9Z/1f/Vf9V/1X/Vf9W/1j/Wv9d/2D/Y/9m/2n/bf9v/23/av9o/2X/Yv9f/1v/WP9W/1T/Uv9S/1L/U/9V/1f/Wf9b/1//Yf9j/2X/aP9p/2n/Zv9k/1//Wv9V/1D/TP9L/0n/R/9G/0b/Rv9H/0n/TP9P/1T/Wf9b/1//Yf9i/2L/Yf9f/1v/Vv9R/07/S/9I/0X/Qf8+/zv/Of85/zn/O/8//0L/Rv9K/0//Vf9Y/1v/Xf9d/1v/V/9T/07/S/9G/0H/Ov8y/yj/Iv8e/xr/Fv8U/xT/FP8V/xb/Gv8e/yL/KP8y/zr/Qf9G/0v/Tv9T/1T/Uf9O/0n/Q/88/zD/J/8e/xX/D/8L/wn/Cf8J/wv/D/8V/x7/J/8w/zz/Q/9J/04=",MA="data:audio/wav;base64,UklGRqgBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YYABAAC2/7n/wf/G/8z/1f/c/+D/5v/t//v/FwAnADgASgBYAGYAcgB8AIgAkgCeAKQAqgCuALQAugDAAMYA1ADfAOwBCAEmATMBQwFLAVMBXwFwAXgBigGbAcoB3gHyAgsCGgIuAkYCTgJWAl4CYgJnAm4CcwJ9Ao0CoAKqAsUC1ALmAvEDEgMgAyIDNAM+A0sDWANhA24DhAOOA5kDpwOxA7wDxwPQA94D/AQMBREFGgUrBTYFVwVeBW0FfQWMBZkFqgW8BcAF2AXuBhgGJgY0BkIGVwZsBn0GkgaqBrIGvgjECfUKFApsCnwKwgLhAu0DCQMbAysDRANVA2ADawOBBAgEGQQzBUMFWQVtBYIFlgWuBcwF2AYCBhMGMAZGBl0GcQeDB5gHvgjVCf8KbgrBCw0LJgswCz0LXgt/DBEMVwx5DI4MrAzBDNsO7xAFEbwS+hQIFGQU8xXfF0cYwRnlG5gd/h8IIAghGiMoI5wj8CQcJqon5SjVKlgr2iwILVouVC+UMMwwzDDeMP0x/zLfM/A02jX2N3E4zjneO3E9kj7TQCpBfUJEQtJFo0ZPR5NKK0uTTTdQN1AbUTdSO1M9VDhWNFdAWEhZSFoMXQxfEGQYZRhsGXEcgRyTHQMeFx9NIBYfdiC2ImUjhyTDJ5Uo/SkXLCst/C/NMUQ09DXcOJU6yD5mQHpCl0eWTCxPQVVuWXVfT2V/bYFyf3Xge4t+kH+sgLCAt4S9hbuIgomAioyNkJGSk5WWl5mbnZ6fo6Slpqeoqausrq+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19vf4+fr7/P3+/w==",Vm="productionSoundMuted",Dm={start:DA,warning:NA,alarm:LA,success:MA},OA=()=>{const t=H.useRef(null),e=H.useRef({}),n=H.useRef(null),r=H.useRef(!1),[i,s]=H.useState("loading"),[a,l]=H.useState(()=>{try{return localStorage.getItem(Vm)==="true"}catch{return!1}});H.useEffect(()=>{localStorage.setItem(Vm,String(a))},[a]),H.useEffect(()=>{let v=!0;return s("loading"),(async()=>{let R=null;try{R=new(window.AudioContext||window.webkitAudioContext)}catch(V){console.error("Web Audio API is not supported in this browser.",V),v&&s("error");return}try{const V=Object.keys(Dm).map(async N=>{if(e.current[N])return;const w=await(await fetch(Dm[N])).arrayBuffer(),C=await R.decodeAudioData(w);v&&(e.current[N]=C)});await Promise.all(V),v&&s("ready")}catch(V){console.error("Error loading or decoding audio files:",V),v&&s("error")}finally{R&&R.close()}})(),()=>{v=!1}},[]);const u=H.useCallback(()=>{if(r.current)return;if(!t.current)try{t.current=new(window.AudioContext||window.webkitAudioContext)}catch(P){console.error("Could not create AudioContext:",P),s("error");return}const v=t.current;v.state==="suspended"?v.resume().then(()=>{r.current=!0}):r.current=!0},[]),h=H.useCallback((v,P=!1)=>{if(a||i!=="ready"||!t.current)return;const R=t.current,V=e.current[v];if(!V||R.state==="suspended")return;const N=R.createBufferSource();if(N.buffer=V,N.connect(R.destination),N.loop=P,N.start(0),P){if(n.current)try{n.current.stop()}catch{}n.current=N}},[a,i]),d=H.useCallback(()=>{if(n.current){try{n.current.stop()}catch{}n.current=null}},[]),g=H.useCallback(()=>{u(),l(v=>{const P=!v;return P&&d(),P})},[d,u]);return{isSoundMuted:a,toggleSoundMute:g,audioState:i,unlockAudio:u,playStart:()=>h("start"),playWarning:()=>h("warning"),playAlarmLoop:()=>h("alarm",!0),stopAlarmLoop:d,playSuccess:()=>h("success")}},x_="productionState_v2",FA=()=>{try{const t=localStorage.getItem(x_);if(t)return JSON.parse(t).map(n=>({...n,recipe:n.recipeId?Qy[n.recipeId]:void 0}))}catch(t){console.error("Error loading production state:",t)}return[]},jA=t=>{try{const e=t.map(({recipe:n,...r})=>r);localStorage.setItem(x_,JSON.stringify(e))}catch(e){console.error("Error saving production state:",e)}},UA=()=>{const[t,e]=H.useState(FA),n=H.useRef(null),{isSoundMuted:r,toggleSoundMute:i,playStart:s,playWarning:a,playAlarmLoop:l,stopAlarmLoop:u,playSuccess:h,unlockAudio:d,audioState:g}=OA(),v=g==="ready",P=H.useRef(new Set),R=H.useRef([]),V=H.useCallback(()=>{n.current&&(clearInterval(n.current),n.current=null)},[]);H.useEffect(()=>{const _=R.current;t.forEach(m=>{const y=_.find(E=>E.id===m.id);y&&y.state!=="alarm"&&m.state==="alarm"&&l()}),R.current=t},[t,l]);const N=H.useCallback(()=>{e(_=>{const m=Date.now();let y=!1;const E=_.map(I=>{if(I.state!=="running")return I;y=!0;const k=Math.round((m-I.lastTickTimestamp)/1e3),T=Math.max(0,I.stepTimeLeft-k),xe=Math.max(0,I.totalTimeLeft-k),bt=`${I.id}-${I.currentStepIndex}`;return T>29&&T<=30&&!P.current.has(bt)&&(a(),P.current.add(bt)),T===0?{...I,stepTimeLeft:0,totalTimeLeft:xe,state:"alarm",lastTickTimestamp:m}:{...I,stepTimeLeft:T,totalTimeLeft:xe,lastTickTimestamp:m}});return y?E:_})},[a]),A=H.useCallback(()=>{V(),n.current=window.setInterval(N,1e3)},[V,N]);H.useEffect(()=>{e(_=>{const m=Date.now();return _.map(y=>{if(y.state!=="running")return y;const E=Math.round((m-y.lastTickTimestamp)/1e3),I=Math.max(0,y.stepTimeLeft-E),k=Math.max(0,y.totalTimeLeft-E);return I===0?{...y,state:"alarm",stepTimeLeft:0,totalTimeLeft:k}:{...y,stepTimeLeft:I,totalTimeLeft:k,lastTickTimestamp:m}})})},[]),H.useEffect(()=>(jA(t),t.some(m=>m.state==="running")?A():V(),V),[t,A,V]);const w=H.useCallback(_=>{const m=Qy[_];if(!m)return;const y={id:`baking-${Date.now()}`,name:m.name,recipeId:_,recipe:m,type:"baking",state:"paused",currentStepIndex:0,steps:m.steps,totalTime:m.totalDuration,totalTimeLeft:m.totalDuration,stepTimeLeft:m.steps[0].duration,lastTickTimestamp:Date.now()};e(E=>[...E,y])},[]),C=H.useCallback((_,m)=>{const y=[{instruction:m,duration:_,isPauseStep:!1}],E={id:`heating-${Date.now()}`,name:m,type:"heating",state:"paused",currentStepIndex:0,steps:y,totalTime:_,totalTimeLeft:_,stepTimeLeft:_,lastTickTimestamp:Date.now()};e(I=>[...I,E])},[]),L=H.useCallback(_=>{u(),e(m=>m.map(y=>{if(y.id!==_)return y;if(y.state==="finished")return{...y,state:"paused"};if(y.currentStepIndex<y.steps.length-1){const E=y.currentStepIndex+1,I=y.steps[E];return{...y,state:"paused",currentStepIndex:E,stepTimeLeft:I.duration,lastTickTimestamp:Date.now()}}else return h(),{...y,state:"finished",stepTimeLeft:0,lastTickTimestamp:Date.now()}}))},[u,h]),b=H.useCallback(_=>{d(),e(m=>m.map(y=>{if(y.id!==_||y.state==="alarm"||y.state==="finished")return y;const E=y.state==="paused"&&y.totalTimeLeft===y.totalTime;return y.state==="running"?{...y,state:"paused"}:(E&&s(),{...y,state:"running",lastTickTimestamp:Date.now()})}))},[s,d]),U=H.useCallback(_=>{u(),e(m=>m.filter(y=>y.id!==_))},[u]);return{processes:t,startBakingProcess:w,startHeatingProcess:C,advanceProcess:L,togglePauseProcess:b,cancelProcess:U,isSoundMuted:r,toggleSoundMute:i,isAudioReady:v}},Wc=Ai(me,"categories"),V_=[{name:"Secos"},{name:"Refrigerados"},{name:"Lcteos"},{name:"Bebidas"},{name:"Carnes"},{name:"Frutas y Verduras"}],bA=async()=>{console.log("Seeding initial categories to Firestore...");const t=ki(me);V_.forEach(e=>{const n=Ne(Wc);t.set(n,e)}),await t.commit(),console.log("Initial categories seeded.")},zA=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const s=Pi(Wc,Er("name")),a=Ri(s,l=>{if(l.empty&&V_.length>0){bA();return}const u=l.docs.map(h=>({id:h.id,...h.data()}));e(u)},l=>{console.error("Error fetching categories:",l)});return()=>a()},[]),{categories:t,addCategory:async s=>{try{await Ci(Wc,s)}catch(a){console.error("Error adding category:",a)}},updateCategory:async s=>{const{id:a,...l}=s,u=Ne(me,"categories",a);try{await wr(u,l)}catch(h){console.error("Error updating category:",h)}},deleteCategory:async s=>{const a=Ne(me,"categories",s);try{await so(a)}catch(l){console.error("Error deleting category:",l)}}}},Nm=Ai(me,"recipeFeedback"),BA=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const r=Pi(Nm,Er("date","desc")),i=Ri(r,s=>{const a=s.docs.map(l=>({id:l.id,...l.data()}));e(a)},s=>{console.error("Error fetching recipe feedback:",s)});return()=>i()},[]),{feedbackLog:t,addFeedback:async r=>{try{await Ci(Nm,{...r,date:new Date().toISOString()})}catch(i){console.error("Error adding feedback:",i)}}}},$A="data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU",WA=()=>{const t=H.useRef(null),e=H.useCallback(()=>{t.current||(t.current=new Audio($A))},[]);return{playAlert:H.useCallback(()=>{e(),t.current&&(t.current.currentTime=0,t.current.play().catch(r=>{console.warn("Audio playback failed:",r)}))},[e])}},Hc=Ai(me,"users"),D_=[{name:"Ali",color:"#ec4899"},{name:"Fer",color:"#8b5cf6"},{name:"Claudia",color:"#14b8a6"},{name:"Admin",color:"#f59e0b"}],HA=async()=>{console.log("Seeding initial users to Firestore...");const t=ki(me);D_.forEach(e=>{const n=Ne(Hc);t.set(n,e)}),await t.commit(),console.log("Initial users seeded.")},qA=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const s=Pi(Hc,Er("name")),a=Ri(s,l=>{if(l.empty&&D_.length>0){HA();return}const u=l.docs.map(h=>({id:h.id,...h.data()}));e(u)},l=>{console.error("Error fetching users:",l)});return()=>a()},[]),{users:t,addUser:async s=>{try{await Ci(Hc,s)}catch(a){console.error("Error adding user:",a)}},updateUser:async s=>{const{id:a,...l}=s,u=Ne(me,"users",a);try{await wr(u,l)}catch(h){console.error("Error updating user:",h)}},deleteUser:async s=>{const a=Ne(me,"users",s);try{await so(a)}catch(l){console.error("Error deleting user:",l)}}}},Lm=H.lazy(()=>al(()=>import("./BreadProductionScreen-FgNtOgaE.js"),__vite__mapDeps([0,1]))),QA=H.lazy(()=>al(()=>import("./OperationsScreen-C5g1rruT.js"),__vite__mapDeps([2,1]))),KA=H.lazy(()=>al(()=>import("./InventoryScreen-DetKpyGd.js"),__vite__mapDeps([3,1]))),GA=H.lazy(()=>al(()=>import("./SettingsScreen-TlRtfuin.js"),__vite__mapDeps([4,1]))),YA=t=>{const e=new Date,[n,r]=t.split(":").map(Number),i=new Date;return i.setHours(n,r,0,0),Math.round((i.getTime()-e.getTime())/1e3/60)},XA=()=>S.jsx("div",{className:"w-full h-full flex items-center justify-center",children:S.jsx(rn,{name:"refresh-cw",className:"animate-spin text-blue-500",size:48})}),JA=()=>{const[t,e]=H.useState(Te.Baking),[n,r]=H.useState(!1),i=UA(),s=CA(),a=kA(),l=VA(),u=zA(),h=BA(),d=qA(),{playAlert:g}=WA(),{processes:v}=i,{tasks:P}=s,{items:R}=a,[V,N]=H.useState({}),A=H.useMemo(()=>{const y=new Date;return y.setMinutes(y.getMinutes()-y.getTimezoneOffset()),y.toISOString().split("T")[0]},[]);H.useEffect(()=>{const y=()=>{const I={};P.forEach(k=>{if(k.date===A&&k.status!=="done"){const T=YA(k.time);let xe="normal";T<=0?xe="due":T<=15&&(xe="imminent"),I[k.id]={diff:T,status:xe}}}),N(I)};y();const E=setInterval(y,1e4);return()=>clearInterval(E)},[P,A]);const w=H.useMemo(()=>P.filter(I=>I.date===A&&I.isCritical&&I.status!=="done"&&V[I.id]).map(I=>({task:I,diff:V[I.id].diff})).filter(({diff:I})=>I<=30&&I>=-15).sort((I,k)=>I.diff-k.diff),[P,V,A]),C=H.useRef(new Set);H.useEffect(()=>{const y=new Set(w.map(E=>`task-${E.task.id}`));y.forEach(E=>{C.current.has(E)||(g(),C.current.add(E))}),C.current.forEach(E=>{E.startsWith("task-")&&!y.has(E)&&C.current.delete(E)})},[w,g]);const L=H.useMemo(()=>w.slice(0,3),[w]),b=H.useMemo(()=>P.filter(y=>y.status==="inprogress"),[P]),U=H.useMemo(()=>R.filter(y=>y.currentStock<=y.minStock),[R]),_=()=>{switch(t){case Te.Baking:return S.jsx(Lm,{productionHook:i,recipeLogHook:h});case Te.Operations:return S.jsx(QA,{kanbanHook:s,criticalTasks:w,users:d.users});case Te.Inventory:return S.jsx(KA,{inventoryHook:a,providers:l.providers,categories:u.categories});case Te.Settings:return S.jsx(GA,{providersHook:l,categoriesHook:u,recipeLogHook:h,usersHook:d});default:return S.jsx(Lm,{productionHook:i,recipeLogHook:h})}},m=()=>{switch(t){case Te.Baking:return"Produccin de Pan";case Te.Operations:return"Operaciones";case Te.Inventory:return"Inventario";case Te.Settings:return"Configuracin";default:return"Cafestesia"}};return S.jsx("div",{className:"w-full min-h-screen md:p-4 flex items-center justify-center bg-gray-100 text-gray-800",children:S.jsxs("div",{className:"app-container w-full h-screen max-w-5xl bg-white md:rounded-xl shadow-lg overflow-hidden relative border border-gray-200",children:[n&&S.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 z-40",onClick:()=>r(!1),"aria-hidden":"true"}),S.jsxs("div",{className:"grid md:grid-cols-[240px_1fr] h-full",children:[S.jsx(Bw,{activeScreen:t,setActiveScreen:e,processes:v,urgentTasks:L,shoppingListItems:U,inProgressTasks:b,isOpen:n,onClose:()=>r(!1)}),S.jsxs("main",{className:"main-content flex flex-col overflow-y-auto h-full",children:[S.jsxs("header",{className:"main-content-header p-4 md:p-6 border-b border-gray-200 flex justify-between items-center flex-shrink-0",children:[S.jsx("button",{className:"md:hidden p-2 -ml-2 text-gray-600 hover:text-blue-600",onClick:()=>r(!0),children:S.jsx(rn,{name:"menu",size:24})}),S.jsx("h2",{className:"text-xl md:text-3xl font-bold text-blue-600",children:m()}),S.jsx("div",{className:"md:hidden w-8"})," "]}),S.jsx("div",{className:"flex-grow relative",children:S.jsx("div",{className:"absolute inset-0 overflow-y-auto relative",children:S.jsx(H.Suspense,{fallback:S.jsx(XA,{}),children:_()})})})]})]})]})})},N_=document.getElementById("root");if(!N_)throw new Error("Could not find root element to mount to");const ZA=Ru.createRoot(N_);ZA.render(S.jsx(C0.StrictMode,{children:S.jsx(JA,{})}));export{rn as I,iS as O,Qy as R,rS as T,nS as a,tS as b,C0 as c,eS as d,S as j,H as r};
