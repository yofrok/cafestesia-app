const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BreadProductionScreen-B3FAH_aq.js","assets/Modal-CvDs-8TX.js","assets/OperationsScreen-DRcMpMJ9.js","assets/InventoryScreen-DvufexOC.js","assets/SettingsScreen-2Dwj2NMW.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function u0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Lm={exports:{}},Wa={},Mm={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zs=Symbol.for("react.element"),c0=Symbol.for("react.portal"),h0=Symbol.for("react.fragment"),f0=Symbol.for("react.strict_mode"),d0=Symbol.for("react.profiler"),p0=Symbol.for("react.provider"),m0=Symbol.for("react.context"),g0=Symbol.for("react.forward_ref"),y0=Symbol.for("react.suspense"),v0=Symbol.for("react.memo"),_0=Symbol.for("react.lazy"),Td=Symbol.iterator;function E0(t){return t===null||typeof t!="object"?null:(t=Td&&t[Td]||t["@@iterator"],typeof t=="function"?t:null)}var Om={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fm=Object.assign,jm={};function gi(t,e,n){this.props=t,this.context=e,this.refs=jm,this.updater=n||Om}gi.prototype.isReactComponent={};gi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Um(){}Um.prototype=gi.prototype;function Wc(t,e,n){this.props=t,this.context=e,this.refs=jm,this.updater=n||Om}var Hc=Wc.prototype=new Um;Hc.constructor=Wc;Fm(Hc,gi.prototype);Hc.isPureReactComponent=!0;var Id=Array.isArray,bm=Object.prototype.hasOwnProperty,qc={current:null},zm={key:!0,ref:!0,__self:!0,__source:!0};function Bm(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)bm.call(e,r)&&!zm.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:zs,type:t,key:s,ref:a,props:i,_owner:qc.current}}function w0(t,e){return{$$typeof:zs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qc(t){return typeof t=="object"&&t!==null&&t.$$typeof===zs}function T0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ad=/\/+/g;function ql(t,e){return typeof t=="object"&&t!==null&&t.key!=null?T0(""+t.key):e.toString(36)}function Ho(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case zs:case c0:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+ql(a,0):r,Id(i)?(n="",t!=null&&(n=t.replace(Ad,"$&/")+"/"),Ho(i,e,n,"",function(h){return h})):i!=null&&(Qc(i)&&(i=w0(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Ad,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Id(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+ql(s,l);a+=Ho(s,e,n,u,i)}else if(u=E0(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+ql(s,l++),a+=Ho(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ao(t,e,n){if(t==null)return t;var r=[],i=0;return Ho(t,r,"","",function(s){return e.call(n,s,i++)}),r}function I0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var st={current:null},qo={transition:null},A0={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:qo,ReactCurrentOwner:qc};function $m(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:Ao,forEach:function(t,e,n){Ao(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ao(t,function(){e++}),e},toArray:function(t){return Ao(t,function(e){return e})||[]},only:function(t){if(!Qc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Component=gi;J.Fragment=h0;J.Profiler=d0;J.PureComponent=Wc;J.StrictMode=f0;J.Suspense=y0;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A0;J.act=$m;J.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Fm({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=qc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)bm.call(e,u)&&!zm.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:zs,type:t.type,key:i,ref:s,props:r,_owner:a}};J.createContext=function(t){return t={$$typeof:m0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:p0,_context:t},t.Consumer=t};J.createElement=Bm;J.createFactory=function(t){var e=Bm.bind(null,t);return e.type=t,e};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:g0,render:t}};J.isValidElement=Qc;J.lazy=function(t){return{$$typeof:_0,_payload:{_status:-1,_result:t},_init:I0}};J.memo=function(t,e){return{$$typeof:v0,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=qo.transition;qo.transition={};try{t()}finally{qo.transition=e}};J.unstable_act=$m;J.useCallback=function(t,e){return st.current.useCallback(t,e)};J.useContext=function(t){return st.current.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t){return st.current.useDeferredValue(t)};J.useEffect=function(t,e){return st.current.useEffect(t,e)};J.useId=function(){return st.current.useId()};J.useImperativeHandle=function(t,e,n){return st.current.useImperativeHandle(t,e,n)};J.useInsertionEffect=function(t,e){return st.current.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return st.current.useLayoutEffect(t,e)};J.useMemo=function(t,e){return st.current.useMemo(t,e)};J.useReducer=function(t,e,n){return st.current.useReducer(t,e,n)};J.useRef=function(t){return st.current.useRef(t)};J.useState=function(t){return st.current.useState(t)};J.useSyncExternalStore=function(t,e,n){return st.current.useSyncExternalStore(t,e,n)};J.useTransition=function(){return st.current.useTransition()};J.version="18.3.1";Mm.exports=J;var H=Mm.exports;const S0=u0(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0=H,C0=Symbol.for("react.element"),R0=Symbol.for("react.fragment"),k0=Object.prototype.hasOwnProperty,x0=P0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V0={key:!0,ref:!0,__self:!0,__source:!0};function Wm(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)k0.call(e,r)&&!V0.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:C0,type:t,key:s,ref:a,props:i,_owner:x0.current}}Wa.Fragment=R0;Wa.jsx=Wm;Wa.jsxs=Wm;Lm.exports=Wa;var S=Lm.exports,Cu={},Hm={exports:{}},wt={},qm={exports:{}},Qm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,K){var X=z.length;z.push(K);e:for(;0<X;){var me=X-1>>>1,ae=z[me];if(0<i(ae,K))z[me]=K,z[X]=ae,X=me;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var K=z[0],X=z.pop();if(X!==K){z[0]=X;e:for(var me=0,ae=z.length,Ie=ae>>>1;me<Ie;){var Gt=2*(me+1)-1,Yt=z[Gt],Xt=Gt+1,Jt=z[Xt];if(0>i(Yt,X))Xt<ae&&0>i(Jt,Yt)?(z[me]=Jt,z[Xt]=X,me=Xt):(z[me]=Yt,z[Gt]=X,me=Gt);else if(Xt<ae&&0>i(Jt,X))z[me]=Jt,z[Xt]=X,me=Xt;else break e}}return K}function i(z,K){var X=z.sortIndex-K.sortIndex;return X!==0?X:z.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,y=3,A=!1,k=!1,V=!1,M=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(z){for(var K=n(h);K!==null;){if(K.callback===null)r(h);else if(K.startTime<=z)r(h),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(h)}}function D(z){if(V=!1,C(z),!k)if(n(u)!==null)k=!0,Si(F);else{var K=n(h);K!==null&&Kt(D,K.startTime-z)}}function F(z,K){k=!1,V&&(V=!1,I(p),p=-1),A=!0;var X=y;try{for(C(K),g=n(u);g!==null&&(!(g.expirationTime>K)||z&&!P());){var me=g.callback;if(typeof me=="function"){g.callback=null,y=g.priorityLevel;var ae=me(g.expirationTime<=K);K=t.unstable_now(),typeof ae=="function"?g.callback=ae:g===n(u)&&r(u),C(K)}else r(u);g=n(u)}if(g!==null)var Ie=!0;else{var Gt=n(h);Gt!==null&&Kt(D,Gt.startTime-K),Ie=!1}return Ie}finally{g=null,y=X,A=!1}}var L=!1,_=null,p=-1,v=5,E=-1;function P(){return!(t.unstable_now()-E<v)}function R(){if(_!==null){var z=t.unstable_now();E=z;var K=!0;try{K=_(!0,z)}finally{K?T():(L=!1,_=null)}}else L=!1}var T;if(typeof w=="function")T=function(){w(R)};else if(typeof MessageChannel<"u"){var It=new MessageChannel,Kn=It.port2;It.port1.onmessage=R,T=function(){Kn.postMessage(null)}}else T=function(){M(R,0)};function Si(z){_=z,L||(L=!0,T())}function Kt(z,K){p=M(function(){z(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){k||A||(k=!0,Si(F))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(y){case 1:case 2:case 3:var K=3;break;default:K=y}var X=y;y=K;try{return z()}finally{y=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=y;y=z;try{return K()}finally{y=X}},t.unstable_scheduleCallback=function(z,K,X){var me=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?me+X:me):X=me,z){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=X+ae,z={id:d++,callback:K,priorityLevel:z,startTime:X,expirationTime:ae,sortIndex:-1},X>me?(z.sortIndex=X,e(h,z),n(u)===null&&z===n(h)&&(V?(I(p),p=-1):V=!0,Kt(D,X-me))):(z.sortIndex=ae,e(u,z),k||A||(k=!0,Si(F))),z},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(z){var K=y;return function(){var X=y;y=K;try{return z.apply(this,arguments)}finally{y=X}}}})(Qm);qm.exports=Qm;var D0=qm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0=H,Et=D0;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Km=new Set,ms={};function Er(t,e){Zr(t,e),Zr(t+"Capture",e)}function Zr(t,e){for(ms[t]=e,t=0;t<e.length;t++)Km.add(e[t])}var un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ru=Object.prototype.hasOwnProperty,L0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sd={},Pd={};function M0(t){return Ru.call(Pd,t)?!0:Ru.call(Sd,t)?!1:L0.test(t)?Pd[t]=!0:(Sd[t]=!0,!1)}function O0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function F0(t,e,n,r){if(e===null||typeof e>"u"||O0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ot(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Be[t]=new ot(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Be[e]=new ot(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Be[t]=new ot(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Be[t]=new ot(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Be[t]=new ot(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Be[t]=new ot(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Be[t]=new ot(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Be[t]=new ot(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Be[t]=new ot(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kc=/[\-:]([a-z])/g;function Gc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kc,Gc);Be[e]=new ot(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kc,Gc);Be[e]=new ot(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kc,Gc);Be[e]=new ot(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Be[t]=new ot(t,1,!1,t.toLowerCase(),null,!1,!1)});Be.xlinkHref=new ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Be[t]=new ot(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yc(t,e,n,r){var i=Be.hasOwnProperty(e)?Be[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(F0(e,n,i,r)&&(n=null),r||i===null?M0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gn=N0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,So=Symbol.for("react.element"),Nr=Symbol.for("react.portal"),Lr=Symbol.for("react.fragment"),Xc=Symbol.for("react.strict_mode"),ku=Symbol.for("react.profiler"),Gm=Symbol.for("react.provider"),Ym=Symbol.for("react.context"),Jc=Symbol.for("react.forward_ref"),xu=Symbol.for("react.suspense"),Vu=Symbol.for("react.suspense_list"),Zc=Symbol.for("react.memo"),wn=Symbol.for("react.lazy"),Xm=Symbol.for("react.offscreen"),Cd=Symbol.iterator;function Ui(t){return t===null||typeof t!="object"?null:(t=Cd&&t[Cd]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Object.assign,Ql;function Ki(t){if(Ql===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ql=e&&e[1]||""}return`
`+Ql+t}var Kl=!1;function Gl(t,e){if(!t||Kl)return"";Kl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{Kl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ki(t):""}function j0(t){switch(t.tag){case 5:return Ki(t.type);case 16:return Ki("Lazy");case 13:return Ki("Suspense");case 19:return Ki("SuspenseList");case 0:case 2:case 15:return t=Gl(t.type,!1),t;case 11:return t=Gl(t.type.render,!1),t;case 1:return t=Gl(t.type,!0),t;default:return""}}function Du(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Lr:return"Fragment";case Nr:return"Portal";case ku:return"Profiler";case Xc:return"StrictMode";case xu:return"Suspense";case Vu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ym:return(t.displayName||"Context")+".Consumer";case Gm:return(t._context.displayName||"Context")+".Provider";case Jc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zc:return e=t.displayName||null,e!==null?e:Du(t.type)||"Memo";case wn:e=t._payload,t=t._init;try{return Du(t(e))}catch{}}return null}function U0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Du(e);case 8:return e===Xc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Un(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function b0(t){var e=Jm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Po(t){t._valueTracker||(t._valueTracker=b0(t))}function Zm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Jm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ua(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nu(t,e){var n=e.checked;return ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Rd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Un(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eg(t,e){e=e.checked,e!=null&&Yc(t,"checked",e,!1)}function Lu(t,e){eg(t,e);var n=Un(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mu(t,e.type,Un(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mu(t,e,n){(e!=="number"||ua(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gi=Array.isArray;function Hr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Un(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ou(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Gi(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Un(n)}}function tg(t,e){var n=Un(e.value),r=Un(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Vd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ng(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ng(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Co,rg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Co=Co||document.createElement("div"),Co.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Co.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z0=["Webkit","ms","Moz","O"];Object.keys(ns).forEach(function(t){z0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ns[e]=ns[t]})});function ig(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ns.hasOwnProperty(t)&&ns[t]?(""+e).trim():e+"px"}function sg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ig(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var B0=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ju(t,e){if(e){if(B0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Uu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bu=null;function eh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zu=null,qr=null,Qr=null;function Dd(t){if(t=Ws(t)){if(typeof zu!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Ga(e),zu(t.stateNode,t.type,e))}}function og(t){qr?Qr?Qr.push(t):Qr=[t]:qr=t}function ag(){if(qr){var t=qr,e=Qr;if(Qr=qr=null,Dd(t),e)for(t=0;t<e.length;t++)Dd(e[t])}}function lg(t,e){return t(e)}function ug(){}var Yl=!1;function cg(t,e,n){if(Yl)return t(e,n);Yl=!0;try{return lg(t,e,n)}finally{Yl=!1,(qr!==null||Qr!==null)&&(ug(),ag())}}function ys(t,e){var n=t.stateNode;if(n===null)return null;var r=Ga(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Bu=!1;if(un)try{var bi={};Object.defineProperty(bi,"passive",{get:function(){Bu=!0}}),window.addEventListener("test",bi,bi),window.removeEventListener("test",bi,bi)}catch{Bu=!1}function $0(t,e,n,r,i,s,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(d){this.onError(d)}}var rs=!1,ca=null,ha=!1,$u=null,W0={onError:function(t){rs=!0,ca=t}};function H0(t,e,n,r,i,s,a,l,u){rs=!1,ca=null,$0.apply(W0,arguments)}function q0(t,e,n,r,i,s,a,l,u){if(H0.apply(this,arguments),rs){if(rs){var h=ca;rs=!1,ca=null}else throw Error(U(198));ha||(ha=!0,$u=h)}}function wr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Nd(t){if(wr(t)!==t)throw Error(U(188))}function Q0(t){var e=t.alternate;if(!e){if(e=wr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Nd(i),t;if(s===r)return Nd(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function fg(t){return t=Q0(t),t!==null?dg(t):null}function dg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=dg(t);if(e!==null)return e;t=t.sibling}return null}var pg=Et.unstable_scheduleCallback,Ld=Et.unstable_cancelCallback,K0=Et.unstable_shouldYield,G0=Et.unstable_requestPaint,Se=Et.unstable_now,Y0=Et.unstable_getCurrentPriorityLevel,th=Et.unstable_ImmediatePriority,mg=Et.unstable_UserBlockingPriority,fa=Et.unstable_NormalPriority,X0=Et.unstable_LowPriority,gg=Et.unstable_IdlePriority,Ha=null,$t=null;function J0(t){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Ha,t,void 0,(t.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:tE,Z0=Math.log,eE=Math.LN2;function tE(t){return t>>>=0,t===0?32:31-(Z0(t)/eE|0)|0}var Ro=64,ko=4194304;function Yi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function da(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Yi(l):(s&=a,s!==0&&(r=Yi(s)))}else a=n&~i,a!==0?r=Yi(a):s!==0&&(r=Yi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ot(e),i=1<<n,r|=t[n],e&=~i;return r}function nE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Ot(s),l=1<<a,u=i[a];u===-1?(!(l&n)||l&r)&&(i[a]=nE(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Wu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yg(){var t=Ro;return Ro<<=1,!(Ro&4194240)&&(Ro=64),t}function Xl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ot(e),t[e]=n}function iE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ot(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function nh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ot(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var se=0;function vg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _g,rh,Eg,wg,Tg,Hu=!1,xo=[],Rn=null,kn=null,xn=null,vs=new Map,_s=new Map,In=[],sE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Md(t,e){switch(t){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":kn=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":vs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_s.delete(e.pointerId)}}function zi(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ws(e),e!==null&&rh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function oE(t,e,n,r,i){switch(e){case"focusin":return Rn=zi(Rn,t,e,n,r,i),!0;case"dragenter":return kn=zi(kn,t,e,n,r,i),!0;case"mouseover":return xn=zi(xn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return vs.set(s,zi(vs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,_s.set(s,zi(_s.get(s)||null,t,e,n,r,i)),!0}return!1}function Ig(t){var e=rr(t.target);if(e!==null){var n=wr(e);if(n!==null){if(e=n.tag,e===13){if(e=hg(n),e!==null){t.blockedOn=e,Tg(t.priority,function(){Eg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bu=r,n.target.dispatchEvent(r),bu=null}else return e=Ws(n),e!==null&&rh(e),t.blockedOn=n,!1;e.shift()}return!0}function Od(t,e,n){Qo(t)&&n.delete(e)}function aE(){Hu=!1,Rn!==null&&Qo(Rn)&&(Rn=null),kn!==null&&Qo(kn)&&(kn=null),xn!==null&&Qo(xn)&&(xn=null),vs.forEach(Od),_s.forEach(Od)}function Bi(t,e){t.blockedOn===e&&(t.blockedOn=null,Hu||(Hu=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,aE)))}function Es(t){function e(i){return Bi(i,t)}if(0<xo.length){Bi(xo[0],t);for(var n=1;n<xo.length;n++){var r=xo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rn!==null&&Bi(Rn,t),kn!==null&&Bi(kn,t),xn!==null&&Bi(xn,t),vs.forEach(e),_s.forEach(e),n=0;n<In.length;n++)r=In[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<In.length&&(n=In[0],n.blockedOn===null);)Ig(n),n.blockedOn===null&&In.shift()}var Kr=gn.ReactCurrentBatchConfig,pa=!0;function lE(t,e,n,r){var i=se,s=Kr.transition;Kr.transition=null;try{se=1,ih(t,e,n,r)}finally{se=i,Kr.transition=s}}function uE(t,e,n,r){var i=se,s=Kr.transition;Kr.transition=null;try{se=4,ih(t,e,n,r)}finally{se=i,Kr.transition=s}}function ih(t,e,n,r){if(pa){var i=qu(t,e,n,r);if(i===null)au(t,e,r,ma,n),Md(t,r);else if(oE(i,t,e,n,r))r.stopPropagation();else if(Md(t,r),e&4&&-1<sE.indexOf(t)){for(;i!==null;){var s=Ws(i);if(s!==null&&_g(s),s=qu(t,e,n,r),s===null&&au(t,e,r,ma,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else au(t,e,r,null,n)}}var ma=null;function qu(t,e,n,r){if(ma=null,t=eh(r),t=rr(t),t!==null)if(e=wr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ma=t,null}function Ag(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Y0()){case th:return 1;case mg:return 4;case fa:case X0:return 16;case gg:return 536870912;default:return 16}default:return 16}}var Sn=null,sh=null,Ko=null;function Sg(){if(Ko)return Ko;var t,e=sh,n=e.length,r,i="value"in Sn?Sn.value:Sn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Ko=i.slice(t,1<r?1-r:void 0)}function Go(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vo(){return!0}function Fd(){return!1}function Tt(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Vo:Fd,this.isPropagationStopped=Fd,this}return ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vo)},persist:function(){},isPersistent:Vo}),e}var yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oh=Tt(yi),$s=ve({},yi,{view:0,detail:0}),cE=Tt($s),Jl,Zl,$i,qa=ve({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ah,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$i&&($i&&t.type==="mousemove"?(Jl=t.screenX-$i.screenX,Zl=t.screenY-$i.screenY):Zl=Jl=0,$i=t),Jl)},movementY:function(t){return"movementY"in t?t.movementY:Zl}}),jd=Tt(qa),hE=ve({},qa,{dataTransfer:0}),fE=Tt(hE),dE=ve({},$s,{relatedTarget:0}),eu=Tt(dE),pE=ve({},yi,{animationName:0,elapsedTime:0,pseudoElement:0}),mE=Tt(pE),gE=ve({},yi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yE=Tt(gE),vE=ve({},yi,{data:0}),Ud=Tt(vE),_E={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wE[t])?!!e[t]:!1}function ah(){return TE}var IE=ve({},$s,{key:function(t){if(t.key){var e=_E[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Go(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ah,charCode:function(t){return t.type==="keypress"?Go(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Go(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),AE=Tt(IE),SE=ve({},qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bd=Tt(SE),PE=ve({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ah}),CE=Tt(PE),RE=ve({},yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),kE=Tt(RE),xE=ve({},qa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),VE=Tt(xE),DE=[9,13,27,32],lh=un&&"CompositionEvent"in window,is=null;un&&"documentMode"in document&&(is=document.documentMode);var NE=un&&"TextEvent"in window&&!is,Pg=un&&(!lh||is&&8<is&&11>=is),zd=" ",Bd=!1;function Cg(t,e){switch(t){case"keyup":return DE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mr=!1;function LE(t,e){switch(t){case"compositionend":return Rg(e);case"keypress":return e.which!==32?null:(Bd=!0,zd);case"textInput":return t=e.data,t===zd&&Bd?null:t;default:return null}}function ME(t,e){if(Mr)return t==="compositionend"||!lh&&Cg(t,e)?(t=Sg(),Ko=sh=Sn=null,Mr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pg&&e.locale!=="ko"?null:e.data;default:return null}}var OE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $d(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!OE[t.type]:e==="textarea"}function kg(t,e,n,r){og(r),e=ga(e,"onChange"),0<e.length&&(n=new oh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ss=null,ws=null;function FE(t){bg(t,0)}function Qa(t){var e=jr(t);if(Zm(e))return t}function jE(t,e){if(t==="change")return e}var xg=!1;if(un){var tu;if(un){var nu="oninput"in document;if(!nu){var Wd=document.createElement("div");Wd.setAttribute("oninput","return;"),nu=typeof Wd.oninput=="function"}tu=nu}else tu=!1;xg=tu&&(!document.documentMode||9<document.documentMode)}function Hd(){ss&&(ss.detachEvent("onpropertychange",Vg),ws=ss=null)}function Vg(t){if(t.propertyName==="value"&&Qa(ws)){var e=[];kg(e,ws,t,eh(t)),cg(FE,e)}}function UE(t,e,n){t==="focusin"?(Hd(),ss=e,ws=n,ss.attachEvent("onpropertychange",Vg)):t==="focusout"&&Hd()}function bE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qa(ws)}function zE(t,e){if(t==="click")return Qa(e)}function BE(t,e){if(t==="input"||t==="change")return Qa(e)}function $E(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jt=typeof Object.is=="function"?Object.is:$E;function Ts(t,e){if(jt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ru.call(e,i)||!jt(t[i],e[i]))return!1}return!0}function qd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qd(t,e){var n=qd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qd(n)}}function Dg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Dg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ng(){for(var t=window,e=ua();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ua(t.document)}return e}function uh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function WE(t){var e=Ng(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Dg(n.ownerDocument.documentElement,n)){if(r!==null&&uh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Qd(n,s);var a=Qd(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var HE=un&&"documentMode"in document&&11>=document.documentMode,Or=null,Qu=null,os=null,Ku=!1;function Kd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ku||Or==null||Or!==ua(r)||(r=Or,"selectionStart"in r&&uh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),os&&Ts(os,r)||(os=r,r=ga(Qu,"onSelect"),0<r.length&&(e=new oh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Or)))}function Do(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fr={animationend:Do("Animation","AnimationEnd"),animationiteration:Do("Animation","AnimationIteration"),animationstart:Do("Animation","AnimationStart"),transitionend:Do("Transition","TransitionEnd")},ru={},Lg={};un&&(Lg=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function Ka(t){if(ru[t])return ru[t];if(!Fr[t])return t;var e=Fr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Lg)return ru[t]=e[n];return t}var Mg=Ka("animationend"),Og=Ka("animationiteration"),Fg=Ka("animationstart"),jg=Ka("transitionend"),Ug=new Map,Gd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wn(t,e){Ug.set(t,e),Er(e,[t])}for(var iu=0;iu<Gd.length;iu++){var su=Gd[iu],qE=su.toLowerCase(),QE=su[0].toUpperCase()+su.slice(1);Wn(qE,"on"+QE)}Wn(Mg,"onAnimationEnd");Wn(Og,"onAnimationIteration");Wn(Fg,"onAnimationStart");Wn("dblclick","onDoubleClick");Wn("focusin","onFocus");Wn("focusout","onBlur");Wn(jg,"onTransitionEnd");Zr("onMouseEnter",["mouseout","mouseover"]);Zr("onMouseLeave",["mouseout","mouseover"]);Zr("onPointerEnter",["pointerout","pointerover"]);Zr("onPointerLeave",["pointerout","pointerover"]);Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Er("onBeforeInput",["compositionend","keypress","textInput","paste"]);Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xi));function Yd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,q0(r,e,void 0,t),t.currentTarget=null}function bg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Yd(i,l,h),s=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Yd(i,l,h),s=u}}}if(ha)throw t=$u,ha=!1,$u=null,t}function he(t,e){var n=e[Zu];n===void 0&&(n=e[Zu]=new Set);var r=t+"__bubble";n.has(r)||(zg(e,t,2,!1),n.add(r))}function ou(t,e,n){var r=0;e&&(r|=4),zg(n,t,r,e)}var No="_reactListening"+Math.random().toString(36).slice(2);function Is(t){if(!t[No]){t[No]=!0,Km.forEach(function(n){n!=="selectionchange"&&(KE.has(n)||ou(n,!1,t),ou(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[No]||(e[No]=!0,ou("selectionchange",!1,e))}}function zg(t,e,n,r){switch(Ag(e)){case 1:var i=lE;break;case 4:i=uE;break;default:i=ih}n=i.bind(null,e,n,t),i=void 0,!Bu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function au(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;l!==null;){if(a=rr(l),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}l=l.parentNode}}r=r.return}cg(function(){var h=s,d=eh(n),g=[];e:{var y=Ug.get(t);if(y!==void 0){var A=oh,k=t;switch(t){case"keypress":if(Go(n)===0)break e;case"keydown":case"keyup":A=AE;break;case"focusin":k="focus",A=eu;break;case"focusout":k="blur",A=eu;break;case"beforeblur":case"afterblur":A=eu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=fE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=CE;break;case Mg:case Og:case Fg:A=mE;break;case jg:A=kE;break;case"scroll":A=cE;break;case"wheel":A=VE;break;case"copy":case"cut":case"paste":A=yE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=bd}var V=(e&4)!==0,M=!V&&t==="scroll",I=V?y!==null?y+"Capture":null:y;V=[];for(var w=h,C;w!==null;){C=w;var D=C.stateNode;if(C.tag===5&&D!==null&&(C=D,I!==null&&(D=ys(w,I),D!=null&&V.push(As(w,D,C)))),M)break;w=w.return}0<V.length&&(y=new A(y,k,null,n,d),g.push({event:y,listeners:V}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",y&&n!==bu&&(k=n.relatedTarget||n.fromElement)&&(rr(k)||k[cn]))break e;if((A||y)&&(y=d.window===d?d:(y=d.ownerDocument)?y.defaultView||y.parentWindow:window,A?(k=n.relatedTarget||n.toElement,A=h,k=k?rr(k):null,k!==null&&(M=wr(k),k!==M||k.tag!==5&&k.tag!==6)&&(k=null)):(A=null,k=h),A!==k)){if(V=jd,D="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(V=bd,D="onPointerLeave",I="onPointerEnter",w="pointer"),M=A==null?y:jr(A),C=k==null?y:jr(k),y=new V(D,w+"leave",A,n,d),y.target=M,y.relatedTarget=C,D=null,rr(d)===h&&(V=new V(I,w+"enter",k,n,d),V.target=C,V.relatedTarget=M,D=V),M=D,A&&k)t:{for(V=A,I=k,w=0,C=V;C;C=kr(C))w++;for(C=0,D=I;D;D=kr(D))C++;for(;0<w-C;)V=kr(V),w--;for(;0<C-w;)I=kr(I),C--;for(;w--;){if(V===I||I!==null&&V===I.alternate)break t;V=kr(V),I=kr(I)}V=null}else V=null;A!==null&&Xd(g,y,A,V,!1),k!==null&&M!==null&&Xd(g,M,k,V,!0)}}e:{if(y=h?jr(h):window,A=y.nodeName&&y.nodeName.toLowerCase(),A==="select"||A==="input"&&y.type==="file")var F=jE;else if($d(y))if(xg)F=BE;else{F=bE;var L=UE}else(A=y.nodeName)&&A.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(F=zE);if(F&&(F=F(t,h))){kg(g,F,n,d);break e}L&&L(t,y,h),t==="focusout"&&(L=y._wrapperState)&&L.controlled&&y.type==="number"&&Mu(y,"number",y.value)}switch(L=h?jr(h):window,t){case"focusin":($d(L)||L.contentEditable==="true")&&(Or=L,Qu=h,os=null);break;case"focusout":os=Qu=Or=null;break;case"mousedown":Ku=!0;break;case"contextmenu":case"mouseup":case"dragend":Ku=!1,Kd(g,n,d);break;case"selectionchange":if(HE)break;case"keydown":case"keyup":Kd(g,n,d)}var _;if(lh)e:{switch(t){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else Mr?Cg(t,n)&&(p="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(p="onCompositionStart");p&&(Pg&&n.locale!=="ko"&&(Mr||p!=="onCompositionStart"?p==="onCompositionEnd"&&Mr&&(_=Sg()):(Sn=d,sh="value"in Sn?Sn.value:Sn.textContent,Mr=!0)),L=ga(h,p),0<L.length&&(p=new Ud(p,t,null,n,d),g.push({event:p,listeners:L}),_?p.data=_:(_=Rg(n),_!==null&&(p.data=_)))),(_=NE?LE(t,n):ME(t,n))&&(h=ga(h,"onBeforeInput"),0<h.length&&(d=new Ud("onBeforeInput","beforeinput",null,n,d),g.push({event:d,listeners:h}),d.data=_))}bg(g,e)})}function As(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ga(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ys(t,n),s!=null&&r.unshift(As(t,s,i)),s=ys(t,e),s!=null&&r.push(As(t,s,i))),t=t.return}return r}function kr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xd(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=ys(n,s),u!=null&&a.unshift(As(n,u,l))):i||(u=ys(n,s),u!=null&&a.push(As(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var GE=/\r\n?/g,YE=/\u0000|\uFFFD/g;function Jd(t){return(typeof t=="string"?t:""+t).replace(GE,`
`).replace(YE,"")}function Lo(t,e,n){if(e=Jd(e),Jd(t)!==e&&n)throw Error(U(425))}function ya(){}var Gu=null,Yu=null;function Xu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ju=typeof setTimeout=="function"?setTimeout:void 0,XE=typeof clearTimeout=="function"?clearTimeout:void 0,Zd=typeof Promise=="function"?Promise:void 0,JE=typeof queueMicrotask=="function"?queueMicrotask:typeof Zd<"u"?function(t){return Zd.resolve(null).then(t).catch(ZE)}:Ju;function ZE(t){setTimeout(function(){throw t})}function lu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Es(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Es(e)}function Vn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ep(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vi=Math.random().toString(36).slice(2),Bt="__reactFiber$"+vi,Ss="__reactProps$"+vi,cn="__reactContainer$"+vi,Zu="__reactEvents$"+vi,ew="__reactListeners$"+vi,tw="__reactHandles$"+vi;function rr(t){var e=t[Bt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cn]||n[Bt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ep(t);t!==null;){if(n=t[Bt])return n;t=ep(t)}return e}t=n,n=t.parentNode}return null}function Ws(t){return t=t[Bt]||t[cn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Ga(t){return t[Ss]||null}var ec=[],Ur=-1;function Hn(t){return{current:t}}function de(t){0>Ur||(t.current=ec[Ur],ec[Ur]=null,Ur--)}function ue(t,e){Ur++,ec[Ur]=t.current,t.current=e}var bn={},Ze=Hn(bn),ct=Hn(!1),hr=bn;function ei(t,e){var n=t.type.contextTypes;if(!n)return bn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ht(t){return t=t.childContextTypes,t!=null}function va(){de(ct),de(Ze)}function tp(t,e,n){if(Ze.current!==bn)throw Error(U(168));ue(Ze,e),ue(ct,n)}function Bg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,U0(t)||"Unknown",i));return ve({},n,r)}function _a(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bn,hr=Ze.current,ue(Ze,t),ue(ct,ct.current),!0}function np(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Bg(t,e,hr),r.__reactInternalMemoizedMergedChildContext=t,de(ct),de(Ze),ue(Ze,t)):de(ct),ue(ct,n)}var rn=null,Ya=!1,uu=!1;function $g(t){rn===null?rn=[t]:rn.push(t)}function nw(t){Ya=!0,$g(t)}function qn(){if(!uu&&rn!==null){uu=!0;var t=0,e=se;try{var n=rn;for(se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}rn=null,Ya=!1}catch(i){throw rn!==null&&(rn=rn.slice(t+1)),pg(th,qn),i}finally{se=e,uu=!1}}return null}var br=[],zr=0,Ea=null,wa=0,At=[],St=0,fr=null,sn=1,on="";function er(t,e){br[zr++]=wa,br[zr++]=Ea,Ea=t,wa=e}function Wg(t,e,n){At[St++]=sn,At[St++]=on,At[St++]=fr,fr=t;var r=sn;t=on;var i=32-Ot(r)-1;r&=~(1<<i),n+=1;var s=32-Ot(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,sn=1<<32-Ot(e)+i|n<<i|r,on=s+t}else sn=1<<s|n<<i|r,on=t}function ch(t){t.return!==null&&(er(t,1),Wg(t,1,0))}function hh(t){for(;t===Ea;)Ea=br[--zr],br[zr]=null,wa=br[--zr],br[zr]=null;for(;t===fr;)fr=At[--St],At[St]=null,on=At[--St],At[St]=null,sn=At[--St],At[St]=null}var _t=null,yt=null,pe=!1,Mt=null;function Hg(t,e){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_t=t,yt=Vn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_t=t,yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fr!==null?{id:sn,overflow:on}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_t=t,yt=null,!0):!1;default:return!1}}function tc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nc(t){if(pe){var e=yt;if(e){var n=e;if(!rp(t,e)){if(tc(t))throw Error(U(418));e=Vn(n.nextSibling);var r=_t;e&&rp(t,e)?Hg(r,n):(t.flags=t.flags&-4097|2,pe=!1,_t=t)}}else{if(tc(t))throw Error(U(418));t.flags=t.flags&-4097|2,pe=!1,_t=t}}}function ip(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_t=t}function Mo(t){if(t!==_t)return!1;if(!pe)return ip(t),pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xu(t.type,t.memoizedProps)),e&&(e=yt)){if(tc(t))throw qg(),Error(U(418));for(;e;)Hg(t,e),e=Vn(e.nextSibling)}if(ip(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yt=Vn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yt=null}}else yt=_t?Vn(t.stateNode.nextSibling):null;return!0}function qg(){for(var t=yt;t;)t=Vn(t.nextSibling)}function ti(){yt=_t=null,pe=!1}function fh(t){Mt===null?Mt=[t]:Mt.push(t)}var rw=gn.ReactCurrentBatchConfig;function Wi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Oo(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sp(t){var e=t._init;return e(t._payload)}function Qg(t){function e(I,w){if(t){var C=I.deletions;C===null?(I.deletions=[w],I.flags|=16):C.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function i(I,w){return I=Mn(I,w),I.index=0,I.sibling=null,I}function s(I,w,C){return I.index=C,t?(C=I.alternate,C!==null?(C=C.index,C<w?(I.flags|=2,w):C):(I.flags|=2,w)):(I.flags|=1048576,w)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,w,C,D){return w===null||w.tag!==6?(w=gu(C,I.mode,D),w.return=I,w):(w=i(w,C),w.return=I,w)}function u(I,w,C,D){var F=C.type;return F===Lr?d(I,w,C.props.children,D,C.key):w!==null&&(w.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===wn&&sp(F)===w.type)?(D=i(w,C.props),D.ref=Wi(I,w,C),D.return=I,D):(D=na(C.type,C.key,C.props,null,I.mode,D),D.ref=Wi(I,w,C),D.return=I,D)}function h(I,w,C,D){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=yu(C,I.mode,D),w.return=I,w):(w=i(w,C.children||[]),w.return=I,w)}function d(I,w,C,D,F){return w===null||w.tag!==7?(w=lr(C,I.mode,D,F),w.return=I,w):(w=i(w,C),w.return=I,w)}function g(I,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=gu(""+w,I.mode,C),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case So:return C=na(w.type,w.key,w.props,null,I.mode,C),C.ref=Wi(I,null,w),C.return=I,C;case Nr:return w=yu(w,I.mode,C),w.return=I,w;case wn:var D=w._init;return g(I,D(w._payload),C)}if(Gi(w)||Ui(w))return w=lr(w,I.mode,C,null),w.return=I,w;Oo(I,w)}return null}function y(I,w,C,D){var F=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return F!==null?null:l(I,w,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case So:return C.key===F?u(I,w,C,D):null;case Nr:return C.key===F?h(I,w,C,D):null;case wn:return F=C._init,y(I,w,F(C._payload),D)}if(Gi(C)||Ui(C))return F!==null?null:d(I,w,C,D,null);Oo(I,C)}return null}function A(I,w,C,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return I=I.get(C)||null,l(w,I,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case So:return I=I.get(D.key===null?C:D.key)||null,u(w,I,D,F);case Nr:return I=I.get(D.key===null?C:D.key)||null,h(w,I,D,F);case wn:var L=D._init;return A(I,w,C,L(D._payload),F)}if(Gi(D)||Ui(D))return I=I.get(C)||null,d(w,I,D,F,null);Oo(w,D)}return null}function k(I,w,C,D){for(var F=null,L=null,_=w,p=w=0,v=null;_!==null&&p<C.length;p++){_.index>p?(v=_,_=null):v=_.sibling;var E=y(I,_,C[p],D);if(E===null){_===null&&(_=v);break}t&&_&&E.alternate===null&&e(I,_),w=s(E,w,p),L===null?F=E:L.sibling=E,L=E,_=v}if(p===C.length)return n(I,_),pe&&er(I,p),F;if(_===null){for(;p<C.length;p++)_=g(I,C[p],D),_!==null&&(w=s(_,w,p),L===null?F=_:L.sibling=_,L=_);return pe&&er(I,p),F}for(_=r(I,_);p<C.length;p++)v=A(_,I,p,C[p],D),v!==null&&(t&&v.alternate!==null&&_.delete(v.key===null?p:v.key),w=s(v,w,p),L===null?F=v:L.sibling=v,L=v);return t&&_.forEach(function(P){return e(I,P)}),pe&&er(I,p),F}function V(I,w,C,D){var F=Ui(C);if(typeof F!="function")throw Error(U(150));if(C=F.call(C),C==null)throw Error(U(151));for(var L=F=null,_=w,p=w=0,v=null,E=C.next();_!==null&&!E.done;p++,E=C.next()){_.index>p?(v=_,_=null):v=_.sibling;var P=y(I,_,E.value,D);if(P===null){_===null&&(_=v);break}t&&_&&P.alternate===null&&e(I,_),w=s(P,w,p),L===null?F=P:L.sibling=P,L=P,_=v}if(E.done)return n(I,_),pe&&er(I,p),F;if(_===null){for(;!E.done;p++,E=C.next())E=g(I,E.value,D),E!==null&&(w=s(E,w,p),L===null?F=E:L.sibling=E,L=E);return pe&&er(I,p),F}for(_=r(I,_);!E.done;p++,E=C.next())E=A(_,I,p,E.value,D),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?p:E.key),w=s(E,w,p),L===null?F=E:L.sibling=E,L=E);return t&&_.forEach(function(R){return e(I,R)}),pe&&er(I,p),F}function M(I,w,C,D){if(typeof C=="object"&&C!==null&&C.type===Lr&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case So:e:{for(var F=C.key,L=w;L!==null;){if(L.key===F){if(F=C.type,F===Lr){if(L.tag===7){n(I,L.sibling),w=i(L,C.props.children),w.return=I,I=w;break e}}else if(L.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===wn&&sp(F)===L.type){n(I,L.sibling),w=i(L,C.props),w.ref=Wi(I,L,C),w.return=I,I=w;break e}n(I,L);break}else e(I,L);L=L.sibling}C.type===Lr?(w=lr(C.props.children,I.mode,D,C.key),w.return=I,I=w):(D=na(C.type,C.key,C.props,null,I.mode,D),D.ref=Wi(I,w,C),D.return=I,I=D)}return a(I);case Nr:e:{for(L=C.key;w!==null;){if(w.key===L)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(I,w.sibling),w=i(w,C.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=yu(C,I.mode,D),w.return=I,I=w}return a(I);case wn:return L=C._init,M(I,w,L(C._payload),D)}if(Gi(C))return k(I,w,C,D);if(Ui(C))return V(I,w,C,D);Oo(I,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(I,w.sibling),w=i(w,C),w.return=I,I=w):(n(I,w),w=gu(C,I.mode,D),w.return=I,I=w),a(I)):n(I,w)}return M}var ni=Qg(!0),Kg=Qg(!1),Ta=Hn(null),Ia=null,Br=null,dh=null;function ph(){dh=Br=Ia=null}function mh(t){var e=Ta.current;de(Ta),t._currentValue=e}function rc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Gr(t,e){Ia=t,dh=Br=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ut=!0),t.firstContext=null)}function Rt(t){var e=t._currentValue;if(dh!==t)if(t={context:t,memoizedValue:e,next:null},Br===null){if(Ia===null)throw Error(U(308));Br=t,Ia.dependencies={lanes:0,firstContext:t}}else Br=Br.next=t;return e}var ir=null;function gh(t){ir===null?ir=[t]:ir.push(t)}function Gg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,gh(e)):(n.next=i.next,i.next=n),e.interleaved=n,hn(t,r)}function hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tn=!1;function yh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function an(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ne&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,hn(t,n)}return i=r.interleaved,i===null?(e.next=e,gh(r)):(e.next=i.next,i.next=e),r.interleaved=e,hn(t,n)}function Yo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nh(t,n)}}function op(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Aa(t,e,n,r){var i=t.updateQueue;Tn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var g=i.baseState;a=0,d=h=u=null,l=s;do{var y=l.lane,A=l.eventTime;if((r&y)===y){d!==null&&(d=d.next={eventTime:A,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,V=l;switch(y=e,A=n,V.tag){case 1:if(k=V.payload,typeof k=="function"){g=k.call(A,g,y);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=V.payload,y=typeof k=="function"?k.call(A,g,y):k,y==null)break e;g=ve({},g,y);break e;case 2:Tn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[l]:y.push(l))}else A={eventTime:A,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=A,u=g):d=d.next=A,a|=y;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(d===null&&(u=g),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);pr|=a,t.lanes=a,t.memoizedState=g}}function ap(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var Hs={},Wt=Hn(Hs),Ps=Hn(Hs),Cs=Hn(Hs);function sr(t){if(t===Hs)throw Error(U(174));return t}function vh(t,e){switch(ue(Cs,e),ue(Ps,t),ue(Wt,Hs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fu(e,t)}de(Wt),ue(Wt,e)}function ri(){de(Wt),de(Ps),de(Cs)}function Xg(t){sr(Cs.current);var e=sr(Wt.current),n=Fu(e,t.type);e!==n&&(ue(Ps,t),ue(Wt,n))}function _h(t){Ps.current===t&&(de(Wt),de(Ps))}var ge=Hn(0);function Sa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cu=[];function Eh(){for(var t=0;t<cu.length;t++)cu[t]._workInProgressVersionPrimary=null;cu.length=0}var Xo=gn.ReactCurrentDispatcher,hu=gn.ReactCurrentBatchConfig,dr=0,ye=null,ke=null,Le=null,Pa=!1,as=!1,Rs=0,iw=0;function Qe(){throw Error(U(321))}function wh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jt(t[n],e[n]))return!1;return!0}function Th(t,e,n,r,i,s){if(dr=s,ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xo.current=t===null||t.memoizedState===null?lw:uw,t=n(r,i),as){s=0;do{if(as=!1,Rs=0,25<=s)throw Error(U(301));s+=1,Le=ke=null,e.updateQueue=null,Xo.current=cw,t=n(r,i)}while(as)}if(Xo.current=Ca,e=ke!==null&&ke.next!==null,dr=0,Le=ke=ye=null,Pa=!1,e)throw Error(U(300));return t}function Ih(){var t=Rs!==0;return Rs=0,t}function zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?ye.memoizedState=Le=t:Le=Le.next=t,Le}function kt(){if(ke===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var e=Le===null?ye.memoizedState:Le.next;if(e!==null)Le=e,ke=t;else{if(t===null)throw Error(U(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Le===null?ye.memoizedState=Le=t:Le=Le.next=t}return Le}function ks(t,e){return typeof e=="function"?e(t):e}function fu(t){var e=kt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=ke,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,u=null,h=s;do{var d=h.lane;if((dr&d)===d)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=g,a=r):u=u.next=g,ye.lanes|=d,pr|=d}h=h.next}while(h!==null&&h!==s);u===null?a=r:u.next=l,jt(r,e.memoizedState)||(ut=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ye.lanes|=s,pr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function du(t){var e=kt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);jt(s,e.memoizedState)||(ut=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Jg(){}function Zg(t,e){var n=ye,r=kt(),i=e(),s=!jt(r.memoizedState,i);if(s&&(r.memoizedState=i,ut=!0),r=r.queue,Ah(ny.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,xs(9,ty.bind(null,n,r,i,e),void 0,null),Me===null)throw Error(U(349));dr&30||ey(n,e,i)}return i}function ey(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ty(t,e,n,r){e.value=n,e.getSnapshot=r,ry(e)&&iy(t)}function ny(t,e,n){return n(function(){ry(e)&&iy(t)})}function ry(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jt(t,n)}catch{return!0}}function iy(t){var e=hn(t,1);e!==null&&Ft(e,t,1,-1)}function lp(t){var e=zt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:t},e.queue=t,t=t.dispatch=aw.bind(null,ye,t),[e.memoizedState,t]}function xs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function sy(){return kt().memoizedState}function Jo(t,e,n,r){var i=zt();ye.flags|=t,i.memoizedState=xs(1|e,n,void 0,r===void 0?null:r)}function Xa(t,e,n,r){var i=kt();r=r===void 0?null:r;var s=void 0;if(ke!==null){var a=ke.memoizedState;if(s=a.destroy,r!==null&&wh(r,a.deps)){i.memoizedState=xs(e,n,s,r);return}}ye.flags|=t,i.memoizedState=xs(1|e,n,s,r)}function up(t,e){return Jo(8390656,8,t,e)}function Ah(t,e){return Xa(2048,8,t,e)}function oy(t,e){return Xa(4,2,t,e)}function ay(t,e){return Xa(4,4,t,e)}function ly(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function uy(t,e,n){return n=n!=null?n.concat([t]):null,Xa(4,4,ly.bind(null,e,t),n)}function Sh(){}function cy(t,e){var n=kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hy(t,e){var n=kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function fy(t,e,n){return dr&21?(jt(n,e)||(n=yg(),ye.lanes|=n,pr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ut=!0),t.memoizedState=n)}function sw(t,e){var n=se;se=n!==0&&4>n?n:4,t(!0);var r=hu.transition;hu.transition={};try{t(!1),e()}finally{se=n,hu.transition=r}}function dy(){return kt().memoizedState}function ow(t,e,n){var r=Ln(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},py(t))my(e,n);else if(n=Gg(t,e,n,r),n!==null){var i=rt();Ft(n,t,r,i),gy(n,e,r)}}function aw(t,e,n){var r=Ln(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(py(t))my(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,jt(l,a)){var u=e.interleaved;u===null?(i.next=i,gh(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Gg(t,e,i,r),n!==null&&(i=rt(),Ft(n,t,r,i),gy(n,e,r))}}function py(t){var e=t.alternate;return t===ye||e!==null&&e===ye}function my(t,e){as=Pa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nh(t,n)}}var Ca={readContext:Rt,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},lw={readContext:Rt,useCallback:function(t,e){return zt().memoizedState=[t,e===void 0?null:e],t},useContext:Rt,useEffect:up,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jo(4194308,4,ly.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jo(4,2,t,e)},useMemo:function(t,e){var n=zt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ow.bind(null,ye,t),[r.memoizedState,t]},useRef:function(t){var e=zt();return t={current:t},e.memoizedState=t},useState:lp,useDebugValue:Sh,useDeferredValue:function(t){return zt().memoizedState=t},useTransition:function(){var t=lp(!1),e=t[0];return t=sw.bind(null,t[1]),zt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ye,i=zt();if(pe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Me===null)throw Error(U(349));dr&30||ey(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,up(ny.bind(null,r,s,t),[t]),r.flags|=2048,xs(9,ty.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=zt(),e=Me.identifierPrefix;if(pe){var n=on,r=sn;n=(r&~(1<<32-Ot(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Rs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uw={readContext:Rt,useCallback:cy,useContext:Rt,useEffect:Ah,useImperativeHandle:uy,useInsertionEffect:oy,useLayoutEffect:ay,useMemo:hy,useReducer:fu,useRef:sy,useState:function(){return fu(ks)},useDebugValue:Sh,useDeferredValue:function(t){var e=kt();return fy(e,ke.memoizedState,t)},useTransition:function(){var t=fu(ks)[0],e=kt().memoizedState;return[t,e]},useMutableSource:Jg,useSyncExternalStore:Zg,useId:dy,unstable_isNewReconciler:!1},cw={readContext:Rt,useCallback:cy,useContext:Rt,useEffect:Ah,useImperativeHandle:uy,useInsertionEffect:oy,useLayoutEffect:ay,useMemo:hy,useReducer:du,useRef:sy,useState:function(){return du(ks)},useDebugValue:Sh,useDeferredValue:function(t){var e=kt();return ke===null?e.memoizedState=t:fy(e,ke.memoizedState,t)},useTransition:function(){var t=du(ks)[0],e=kt().memoizedState;return[t,e]},useMutableSource:Jg,useSyncExternalStore:Zg,useId:dy,unstable_isNewReconciler:!1};function Nt(t,e){if(t&&t.defaultProps){e=ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ic(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ja={isMounted:function(t){return(t=t._reactInternals)?wr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rt(),i=Ln(t),s=an(r,i);s.payload=e,n!=null&&(s.callback=n),e=Dn(t,s,i),e!==null&&(Ft(e,t,i,r),Yo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rt(),i=Ln(t),s=an(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Dn(t,s,i),e!==null&&(Ft(e,t,i,r),Yo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rt(),r=Ln(t),i=an(n,r);i.tag=2,e!=null&&(i.callback=e),e=Dn(t,i,r),e!==null&&(Ft(e,t,r,n),Yo(e,t,r))}};function cp(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Ts(n,r)||!Ts(i,s):!0}function yy(t,e,n){var r=!1,i=bn,s=e.contextType;return typeof s=="object"&&s!==null?s=Rt(s):(i=ht(e)?hr:Ze.current,r=e.contextTypes,s=(r=r!=null)?ei(t,i):bn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ja,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function hp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ja.enqueueReplaceState(e,e.state,null)}function sc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},yh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Rt(s):(s=ht(e)?hr:Ze.current,i.context=ei(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ic(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ja.enqueueReplaceState(i,i.state,null),Aa(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ii(t,e){try{var n="",r=e;do n+=j0(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function pu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function oc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hw=typeof WeakMap=="function"?WeakMap:Map;function vy(t,e,n){n=an(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ka||(ka=!0,gc=r),oc(t,e)},n}function _y(t,e,n){n=an(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){oc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){oc(t,e),typeof r!="function"&&(Nn===null?Nn=new Set([this]):Nn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function fp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Sw.bind(null,t,e,n),e.then(t,t))}function dp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function pp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=an(-1,1),e.tag=2,Dn(n,e,1))),n.lanes|=1),t)}var fw=gn.ReactCurrentOwner,ut=!1;function nt(t,e,n,r){e.child=t===null?Kg(e,null,n,r):ni(e,t.child,n,r)}function mp(t,e,n,r,i){n=n.render;var s=e.ref;return Gr(e,i),r=Th(t,e,n,r,s,i),n=Ih(),t!==null&&!ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fn(t,e,i)):(pe&&n&&ch(e),e.flags|=1,nt(t,e,r,i),e.child)}function gp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Nh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Ey(t,e,s,r,i)):(t=na(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ts,n(a,r)&&t.ref===e.ref)return fn(t,e,i)}return e.flags|=1,t=Mn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Ey(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ts(s,r)&&t.ref===e.ref)if(ut=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ut=!0);else return e.lanes=t.lanes,fn(t,e,i)}return ac(t,e,n,r,i)}function wy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(Wr,gt),gt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(Wr,gt),gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ue(Wr,gt),gt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ue(Wr,gt),gt|=r;return nt(t,e,i,n),e.child}function Ty(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ac(t,e,n,r,i){var s=ht(n)?hr:Ze.current;return s=ei(e,s),Gr(e,i),n=Th(t,e,n,r,s,i),r=Ih(),t!==null&&!ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fn(t,e,i)):(pe&&r&&ch(e),e.flags|=1,nt(t,e,n,i),e.child)}function yp(t,e,n,r,i){if(ht(n)){var s=!0;_a(e)}else s=!1;if(Gr(e,i),e.stateNode===null)Zo(t,e),yy(e,n,r),sc(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Rt(h):(h=ht(n)?hr:Ze.current,h=ei(e,h));var d=n.getDerivedStateFromProps,g=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&hp(e,a,r,h),Tn=!1;var y=e.memoizedState;a.state=y,Aa(e,r,a,i),u=e.memoizedState,l!==r||y!==u||ct.current||Tn?(typeof d=="function"&&(ic(e,n,d,r),u=e.memoizedState),(l=Tn||cp(e,n,l,r,y,u,h))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Yg(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Nt(e.type,l),a.props=h,g=e.pendingProps,y=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Rt(u):(u=ht(n)?hr:Ze.current,u=ei(e,u));var A=n.getDerivedStateFromProps;(d=typeof A=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==g||y!==u)&&hp(e,a,r,u),Tn=!1,y=e.memoizedState,a.state=y,Aa(e,r,a,i);var k=e.memoizedState;l!==g||y!==k||ct.current||Tn?(typeof A=="function"&&(ic(e,n,A,r),k=e.memoizedState),(h=Tn||cp(e,n,h,r,y,k,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,k,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,k,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),a.props=r,a.state=k,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return lc(t,e,n,r,s,i)}function lc(t,e,n,r,i,s){Ty(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&np(e,n,!1),fn(t,e,s);r=e.stateNode,fw.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=ni(e,t.child,null,s),e.child=ni(e,null,l,s)):nt(t,e,l,s),e.memoizedState=r.state,i&&np(e,n,!0),e.child}function Iy(t){var e=t.stateNode;e.pendingContext?tp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tp(t,e.context,!1),vh(t,e.containerInfo)}function vp(t,e,n,r,i){return ti(),fh(i),e.flags|=256,nt(t,e,n,r),e.child}var uc={dehydrated:null,treeContext:null,retryLane:0};function cc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ay(t,e,n){var r=e.pendingProps,i=ge.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ue(ge,i&1),t===null)return nc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=tl(a,r,0,null),t=lr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=cc(n),e.memoizedState=uc,t):Ph(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return dw(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Mn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Mn(l,s):(s=lr(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?cc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=uc,r}return s=t.child,t=s.sibling,r=Mn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ph(t,e){return e=tl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fo(t,e,n,r){return r!==null&&fh(r),ni(e,t.child,null,n),t=Ph(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dw(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=pu(Error(U(422))),Fo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=tl({mode:"visible",children:r.children},i,0,null),s=lr(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ni(e,t.child,null,a),e.child.memoizedState=cc(a),e.memoizedState=uc,s);if(!(e.mode&1))return Fo(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(U(419)),r=pu(s,r,void 0),Fo(t,e,a,r)}if(l=(a&t.childLanes)!==0,ut||l){if(r=Me,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,hn(t,i),Ft(r,t,i,-1))}return Dh(),r=pu(Error(U(421))),Fo(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Pw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,yt=Vn(i.nextSibling),_t=e,pe=!0,Mt=null,t!==null&&(At[St++]=sn,At[St++]=on,At[St++]=fr,sn=t.id,on=t.overflow,fr=e),e=Ph(e,r.children),e.flags|=4096,e)}function _p(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rc(t.return,e,n)}function mu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Sy(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(nt(t,e,r.children,n),r=ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_p(t,n,e);else if(t.tag===19)_p(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ue(ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Sa(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),mu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Sa(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}mu(e,!0,n,null,s);break;case"together":mu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Mn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pw(t,e,n){switch(e.tag){case 3:Iy(e),ti();break;case 5:Xg(e);break;case 1:ht(e.type)&&_a(e);break;case 4:vh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ue(Ta,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ue(ge,ge.current&1),e.flags|=128,null):n&e.child.childLanes?Ay(t,e,n):(ue(ge,ge.current&1),t=fn(t,e,n),t!==null?t.sibling:null);ue(ge,ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Sy(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ue(ge,ge.current),r)break;return null;case 22:case 23:return e.lanes=0,wy(t,e,n)}return fn(t,e,n)}var Py,hc,Cy,Ry;Py=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hc=function(){};Cy=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,sr(Wt.current);var s=null;switch(n){case"input":i=Nu(t,i),r=Nu(t,r),s=[];break;case"select":i=ve({},i,{value:void 0}),r=ve({},r,{value:void 0}),s=[];break;case"textarea":i=Ou(t,i),r=Ou(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ya)}ju(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ms.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ms.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&he("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Ry=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hi(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mw(t,e,n){var r=e.pendingProps;switch(hh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return ht(e.type)&&va(),Ke(e),null;case 3:return r=e.stateNode,ri(),de(ct),de(Ze),Eh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Mo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mt!==null&&(_c(Mt),Mt=null))),hc(t,e),Ke(e),null;case 5:_h(e);var i=sr(Cs.current);if(n=e.type,t!==null&&e.stateNode!=null)Cy(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Ke(e),null}if(t=sr(Wt.current),Mo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Bt]=e,r[Ss]=s,t=(e.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(i=0;i<Xi.length;i++)he(Xi[i],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":Rd(r,s),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},he("invalid",r);break;case"textarea":xd(r,s),he("invalid",r)}ju(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Lo(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Lo(r.textContent,l,t),i=["children",""+l]):ms.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&he("scroll",r)}switch(n){case"input":Po(r),kd(r,s,!0);break;case"textarea":Po(r),Vd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ya)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ng(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Bt]=e,t[Ss]=r,Py(t,e,!1,!1),e.stateNode=t;e:{switch(a=Uu(n,r),n){case"dialog":he("cancel",t),he("close",t),i=r;break;case"iframe":case"object":case"embed":he("load",t),i=r;break;case"video":case"audio":for(i=0;i<Xi.length;i++)he(Xi[i],t);i=r;break;case"source":he("error",t),i=r;break;case"img":case"image":case"link":he("error",t),he("load",t),i=r;break;case"details":he("toggle",t),i=r;break;case"input":Rd(t,r),i=Nu(t,r),he("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ve({},r,{value:void 0}),he("invalid",t);break;case"textarea":xd(t,r),i=Ou(t,r),he("invalid",t);break;default:i=r}ju(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?sg(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&rg(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&gs(t,u):typeof u=="number"&&gs(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ms.hasOwnProperty(s)?u!=null&&s==="onScroll"&&he("scroll",t):u!=null&&Yc(t,s,u,a))}switch(n){case"input":Po(t),kd(t,r,!1);break;case"textarea":Po(t),Vd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Un(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Hr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Hr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ya)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ke(e),null;case 6:if(t&&e.stateNode!=null)Ry(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=sr(Cs.current),sr(Wt.current),Mo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bt]=e,(s=r.nodeValue!==n)&&(t=_t,t!==null))switch(t.tag){case 3:Lo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bt]=e,e.stateNode=r}return Ke(e),null;case 13:if(de(ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pe&&yt!==null&&e.mode&1&&!(e.flags&128))qg(),ti(),e.flags|=98560,s=!1;else if(s=Mo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Bt]=e}else ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ke(e),s=!1}else Mt!==null&&(_c(Mt),Mt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ge.current&1?xe===0&&(xe=3):Dh())),e.updateQueue!==null&&(e.flags|=4),Ke(e),null);case 4:return ri(),hc(t,e),t===null&&Is(e.stateNode.containerInfo),Ke(e),null;case 10:return mh(e.type._context),Ke(e),null;case 17:return ht(e.type)&&va(),Ke(e),null;case 19:if(de(ge),s=e.memoizedState,s===null)return Ke(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Hi(s,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Sa(t),a!==null){for(e.flags|=128,Hi(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ue(ge,ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&Se()>si&&(e.flags|=128,r=!0,Hi(s,!1),e.lanes=4194304)}else{if(!r)if(t=Sa(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!pe)return Ke(e),null}else 2*Se()-s.renderingStartTime>si&&n!==1073741824&&(e.flags|=128,r=!0,Hi(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Se(),e.sibling=null,n=ge.current,ue(ge,r?n&1|2:n&1),e):(Ke(e),null);case 22:case 23:return Vh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gt&1073741824&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function gw(t,e){switch(hh(e),e.tag){case 1:return ht(e.type)&&va(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ri(),de(ct),de(Ze),Eh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _h(e),null;case 13:if(de(ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return de(ge),null;case 4:return ri(),null;case 10:return mh(e.type._context),null;case 22:case 23:return Vh(),null;case 24:return null;default:return null}}var jo=!1,Xe=!1,yw=typeof WeakSet=="function"?WeakSet:Set,$=null;function $r(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(t,e,r)}else n.current=null}function fc(t,e,n){try{n()}catch(r){Te(t,e,r)}}var Ep=!1;function vw(t,e){if(Gu=pa,t=Ng(),uh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,d=0,g=t,y=null;t:for(;;){for(var A;g!==n||i!==0&&g.nodeType!==3||(l=a+i),g!==s||r!==0&&g.nodeType!==3||(u=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(A=g.firstChild)!==null;)y=g,g=A;for(;;){if(g===t)break t;if(y===n&&++h===i&&(l=a),y===s&&++d===r&&(u=a),(A=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=A}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yu={focusedElem:t,selectionRange:n},pa=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var V=k.memoizedProps,M=k.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?V:Nt(e.type,V),M);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(D){Te(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return k=Ep,Ep=!1,k}function ls(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&fc(e,n,s)}i=i.next}while(i!==r)}}function Za(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ky(t){var e=t.alternate;e!==null&&(t.alternate=null,ky(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bt],delete e[Ss],delete e[Zu],delete e[ew],delete e[tw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xy(t){return t.tag===5||t.tag===3||t.tag===4}function wp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ya));else if(r!==4&&(t=t.child,t!==null))for(pc(t,e,n),t=t.sibling;t!==null;)pc(t,e,n),t=t.sibling}function mc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mc(t,e,n),t=t.sibling;t!==null;)mc(t,e,n),t=t.sibling}var Fe=null,Lt=!1;function En(t,e,n){for(n=n.child;n!==null;)Vy(t,e,n),n=n.sibling}function Vy(t,e,n){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Ha,n)}catch{}switch(n.tag){case 5:Xe||$r(n,e);case 6:var r=Fe,i=Lt;Fe=null,En(t,e,n),Fe=r,Lt=i,Fe!==null&&(Lt?(t=Fe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Fe.removeChild(n.stateNode));break;case 18:Fe!==null&&(Lt?(t=Fe,n=n.stateNode,t.nodeType===8?lu(t.parentNode,n):t.nodeType===1&&lu(t,n),Es(t)):lu(Fe,n.stateNode));break;case 4:r=Fe,i=Lt,Fe=n.stateNode.containerInfo,Lt=!0,En(t,e,n),Fe=r,Lt=i;break;case 0:case 11:case 14:case 15:if(!Xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&fc(n,e,a),i=i.next}while(i!==r)}En(t,e,n);break;case 1:if(!Xe&&($r(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Te(n,e,l)}En(t,e,n);break;case 21:En(t,e,n);break;case 22:n.mode&1?(Xe=(r=Xe)||n.memoizedState!==null,En(t,e,n),Xe=r):En(t,e,n);break;default:En(t,e,n)}}function Tp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yw),e.forEach(function(r){var i=Cw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Dt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Fe=l.stateNode,Lt=!1;break e;case 3:Fe=l.stateNode.containerInfo,Lt=!0;break e;case 4:Fe=l.stateNode.containerInfo,Lt=!0;break e}l=l.return}if(Fe===null)throw Error(U(160));Vy(s,a,i),Fe=null,Lt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Te(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dy(e,t),e=e.sibling}function Dy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dt(e,t),bt(t),r&4){try{ls(3,t,t.return),Za(3,t)}catch(V){Te(t,t.return,V)}try{ls(5,t,t.return)}catch(V){Te(t,t.return,V)}}break;case 1:Dt(e,t),bt(t),r&512&&n!==null&&$r(n,n.return);break;case 5:if(Dt(e,t),bt(t),r&512&&n!==null&&$r(n,n.return),t.flags&32){var i=t.stateNode;try{gs(i,"")}catch(V){Te(t,t.return,V)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&eg(i,s),Uu(l,a);var h=Uu(l,s);for(a=0;a<u.length;a+=2){var d=u[a],g=u[a+1];d==="style"?sg(i,g):d==="dangerouslySetInnerHTML"?rg(i,g):d==="children"?gs(i,g):Yc(i,d,g,h)}switch(l){case"input":Lu(i,s);break;case"textarea":tg(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var A=s.value;A!=null?Hr(i,!!s.multiple,A,!1):y!==!!s.multiple&&(s.defaultValue!=null?Hr(i,!!s.multiple,s.defaultValue,!0):Hr(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ss]=s}catch(V){Te(t,t.return,V)}}break;case 6:if(Dt(e,t),bt(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(V){Te(t,t.return,V)}}break;case 3:if(Dt(e,t),bt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Es(e.containerInfo)}catch(V){Te(t,t.return,V)}break;case 4:Dt(e,t),bt(t);break;case 13:Dt(e,t),bt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(kh=Se())),r&4&&Tp(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Xe=(h=Xe)||d,Dt(e,t),Xe=h):Dt(e,t),bt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!d&&t.mode&1)for($=t,d=t.child;d!==null;){for(g=$=d;$!==null;){switch(y=$,A=y.child,y.tag){case 0:case 11:case 14:case 15:ls(4,y,y.return);break;case 1:$r(y,y.return);var k=y.stateNode;if(typeof k.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(V){Te(r,n,V)}}break;case 5:$r(y,y.return);break;case 22:if(y.memoizedState!==null){Ap(g);continue}}A!==null?(A.return=y,$=A):Ap(g)}d=d.sibling}e:for(d=null,g=t;;){if(g.tag===5){if(d===null){d=g;try{i=g.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=g.stateNode,u=g.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=ig("display",a))}catch(V){Te(t,t.return,V)}}}else if(g.tag===6){if(d===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(V){Te(t,t.return,V)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;d===g&&(d=null),g=g.return}d===g&&(d=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Dt(e,t),bt(t),r&4&&Tp(t);break;case 21:break;default:Dt(e,t),bt(t)}}function bt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xy(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(gs(i,""),r.flags&=-33);var s=wp(t);mc(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=wp(t);pc(t,l,a);break;default:throw Error(U(161))}}catch(u){Te(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _w(t,e,n){$=t,Ny(t)}function Ny(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var i=$,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||jo;if(!a){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Xe;l=jo;var h=Xe;if(jo=a,(Xe=u)&&!h)for($=i;$!==null;)a=$,u=a.child,a.tag===22&&a.memoizedState!==null?Sp(i):u!==null?(u.return=a,$=u):Sp(i);for(;s!==null;)$=s,Ny(s),s=s.sibling;$=i,jo=l,Xe=h}Ip(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$=s):Ip(t)}}function Ip(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xe||Za(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Xe)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Nt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ap(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ap(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var g=d.dehydrated;g!==null&&Es(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Xe||e.flags&512&&dc(e)}catch(y){Te(e,e.return,y)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Ap(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Sp(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Za(4,e)}catch(u){Te(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Te(e,i,u)}}var s=e.return;try{dc(e)}catch(u){Te(e,s,u)}break;case 5:var a=e.return;try{dc(e)}catch(u){Te(e,a,u)}}}catch(u){Te(e,e.return,u)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var Ew=Math.ceil,Ra=gn.ReactCurrentDispatcher,Ch=gn.ReactCurrentOwner,Ct=gn.ReactCurrentBatchConfig,ne=0,Me=null,Ce=null,be=0,gt=0,Wr=Hn(0),xe=0,Vs=null,pr=0,el=0,Rh=0,us=null,at=null,kh=0,si=1/0,tn=null,ka=!1,gc=null,Nn=null,Uo=!1,Pn=null,xa=0,cs=0,yc=null,ea=-1,ta=0;function rt(){return ne&6?Se():ea!==-1?ea:ea=Se()}function Ln(t){return t.mode&1?ne&2&&be!==0?be&-be:rw.transition!==null?(ta===0&&(ta=yg()),ta):(t=se,t!==0||(t=window.event,t=t===void 0?16:Ag(t.type)),t):1}function Ft(t,e,n,r){if(50<cs)throw cs=0,yc=null,Error(U(185));Bs(t,n,r),(!(ne&2)||t!==Me)&&(t===Me&&(!(ne&2)&&(el|=n),xe===4&&An(t,be)),ft(t,r),n===1&&ne===0&&!(e.mode&1)&&(si=Se()+500,Ya&&qn()))}function ft(t,e){var n=t.callbackNode;rE(t,e);var r=da(t,t===Me?be:0);if(r===0)n!==null&&Ld(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ld(n),e===1)t.tag===0?nw(Pp.bind(null,t)):$g(Pp.bind(null,t)),JE(function(){!(ne&6)&&qn()}),n=null;else{switch(vg(r)){case 1:n=th;break;case 4:n=mg;break;case 16:n=fa;break;case 536870912:n=gg;break;default:n=fa}n=zy(n,Ly.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ly(t,e){if(ea=-1,ta=0,ne&6)throw Error(U(327));var n=t.callbackNode;if(Yr()&&t.callbackNode!==n)return null;var r=da(t,t===Me?be:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Va(t,r);else{e=r;var i=ne;ne|=2;var s=Oy();(Me!==t||be!==e)&&(tn=null,si=Se()+500,ar(t,e));do try{Iw();break}catch(l){My(t,l)}while(!0);ph(),Ra.current=s,ne=i,Ce!==null?e=0:(Me=null,be=0,e=xe)}if(e!==0){if(e===2&&(i=Wu(t),i!==0&&(r=i,e=vc(t,i))),e===1)throw n=Vs,ar(t,0),An(t,r),ft(t,Se()),n;if(e===6)An(t,r);else{if(i=t.current.alternate,!(r&30)&&!ww(i)&&(e=Va(t,r),e===2&&(s=Wu(t),s!==0&&(r=s,e=vc(t,s))),e===1))throw n=Vs,ar(t,0),An(t,r),ft(t,Se()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:tr(t,at,tn);break;case 3:if(An(t,r),(r&130023424)===r&&(e=kh+500-Se(),10<e)){if(da(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){rt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ju(tr.bind(null,t,at,tn),e);break}tr(t,at,tn);break;case 4:if(An(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Ot(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ew(r/1960))-r,10<r){t.timeoutHandle=Ju(tr.bind(null,t,at,tn),r);break}tr(t,at,tn);break;case 5:tr(t,at,tn);break;default:throw Error(U(329))}}}return ft(t,Se()),t.callbackNode===n?Ly.bind(null,t):null}function vc(t,e){var n=us;return t.current.memoizedState.isDehydrated&&(ar(t,e).flags|=256),t=Va(t,e),t!==2&&(e=at,at=n,e!==null&&_c(e)),t}function _c(t){at===null?at=t:at.push.apply(at,t)}function ww(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!jt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function An(t,e){for(e&=~Rh,e&=~el,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ot(e),r=1<<n;t[n]=-1,e&=~r}}function Pp(t){if(ne&6)throw Error(U(327));Yr();var e=da(t,0);if(!(e&1))return ft(t,Se()),null;var n=Va(t,e);if(t.tag!==0&&n===2){var r=Wu(t);r!==0&&(e=r,n=vc(t,r))}if(n===1)throw n=Vs,ar(t,0),An(t,e),ft(t,Se()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,tr(t,at,tn),ft(t,Se()),null}function xh(t,e){var n=ne;ne|=1;try{return t(e)}finally{ne=n,ne===0&&(si=Se()+500,Ya&&qn())}}function mr(t){Pn!==null&&Pn.tag===0&&!(ne&6)&&Yr();var e=ne;ne|=1;var n=Ct.transition,r=se;try{if(Ct.transition=null,se=1,t)return t()}finally{se=r,Ct.transition=n,ne=e,!(ne&6)&&qn()}}function Vh(){gt=Wr.current,de(Wr)}function ar(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,XE(n)),Ce!==null)for(n=Ce.return;n!==null;){var r=n;switch(hh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&va();break;case 3:ri(),de(ct),de(Ze),Eh();break;case 5:_h(r);break;case 4:ri();break;case 13:de(ge);break;case 19:de(ge);break;case 10:mh(r.type._context);break;case 22:case 23:Vh()}n=n.return}if(Me=t,Ce=t=Mn(t.current,null),be=gt=e,xe=0,Vs=null,Rh=el=pr=0,at=us=null,ir!==null){for(e=0;e<ir.length;e++)if(n=ir[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}ir=null}return t}function My(t,e){do{var n=Ce;try{if(ph(),Xo.current=Ca,Pa){for(var r=ye.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Pa=!1}if(dr=0,Le=ke=ye=null,as=!1,Rs=0,Ch.current=null,n===null||n.return===null){xe=1,Vs=e,Ce=null;break}e:{var s=t,a=n.return,l=n,u=e;if(e=be,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,d=l,g=d.tag;if(!(d.mode&1)&&(g===0||g===11||g===15)){var y=d.alternate;y?(d.updateQueue=y.updateQueue,d.memoizedState=y.memoizedState,d.lanes=y.lanes):(d.updateQueue=null,d.memoizedState=null)}var A=dp(a);if(A!==null){A.flags&=-257,pp(A,a,l,s,e),A.mode&1&&fp(s,h,e),e=A,u=h;var k=e.updateQueue;if(k===null){var V=new Set;V.add(u),e.updateQueue=V}else k.add(u);break e}else{if(!(e&1)){fp(s,h,e),Dh();break e}u=Error(U(426))}}else if(pe&&l.mode&1){var M=dp(a);if(M!==null){!(M.flags&65536)&&(M.flags|=256),pp(M,a,l,s,e),fh(ii(u,l));break e}}s=u=ii(u,l),xe!==4&&(xe=2),us===null?us=[s]:us.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=vy(s,u,e);op(s,I);break e;case 1:l=u;var w=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Nn===null||!Nn.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=_y(s,l,e);op(s,D);break e}}s=s.return}while(s!==null)}jy(n)}catch(F){e=F,Ce===n&&n!==null&&(Ce=n=n.return);continue}break}while(!0)}function Oy(){var t=Ra.current;return Ra.current=Ca,t===null?Ca:t}function Dh(){(xe===0||xe===3||xe===2)&&(xe=4),Me===null||!(pr&268435455)&&!(el&268435455)||An(Me,be)}function Va(t,e){var n=ne;ne|=2;var r=Oy();(Me!==t||be!==e)&&(tn=null,ar(t,e));do try{Tw();break}catch(i){My(t,i)}while(!0);if(ph(),ne=n,Ra.current=r,Ce!==null)throw Error(U(261));return Me=null,be=0,xe}function Tw(){for(;Ce!==null;)Fy(Ce)}function Iw(){for(;Ce!==null&&!K0();)Fy(Ce)}function Fy(t){var e=by(t.alternate,t,gt);t.memoizedProps=t.pendingProps,e===null?jy(t):Ce=e,Ch.current=null}function jy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gw(n,e),n!==null){n.flags&=32767,Ce=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,Ce=null;return}}else if(n=mw(n,e,gt),n!==null){Ce=n;return}if(e=e.sibling,e!==null){Ce=e;return}Ce=e=t}while(e!==null);xe===0&&(xe=5)}function tr(t,e,n){var r=se,i=Ct.transition;try{Ct.transition=null,se=1,Aw(t,e,n,r)}finally{Ct.transition=i,se=r}return null}function Aw(t,e,n,r){do Yr();while(Pn!==null);if(ne&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(iE(t,s),t===Me&&(Ce=Me=null,be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Uo||(Uo=!0,zy(fa,function(){return Yr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ct.transition,Ct.transition=null;var a=se;se=1;var l=ne;ne|=4,Ch.current=null,vw(t,n),Dy(n,t),WE(Yu),pa=!!Gu,Yu=Gu=null,t.current=n,_w(n),G0(),ne=l,se=a,Ct.transition=s}else t.current=n;if(Uo&&(Uo=!1,Pn=t,xa=i),s=t.pendingLanes,s===0&&(Nn=null),J0(n.stateNode),ft(t,Se()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ka)throw ka=!1,t=gc,gc=null,t;return xa&1&&t.tag!==0&&Yr(),s=t.pendingLanes,s&1?t===yc?cs++:(cs=0,yc=t):cs=0,qn(),null}function Yr(){if(Pn!==null){var t=vg(xa),e=Ct.transition,n=se;try{if(Ct.transition=null,se=16>t?16:t,Pn===null)var r=!1;else{if(t=Pn,Pn=null,xa=0,ne&6)throw Error(U(331));var i=ne;for(ne|=4,$=t.current;$!==null;){var s=$,a=s.child;if($.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for($=h;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:ls(8,d,s)}var g=d.child;if(g!==null)g.return=d,$=g;else for(;$!==null;){d=$;var y=d.sibling,A=d.return;if(ky(d),d===h){$=null;break}if(y!==null){y.return=A,$=y;break}$=A}}}var k=s.alternate;if(k!==null){var V=k.child;if(V!==null){k.child=null;do{var M=V.sibling;V.sibling=null,V=M}while(V!==null)}}$=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,$=a;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ls(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,$=I;break e}$=s.return}}var w=t.current;for($=w;$!==null;){a=$;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,$=C;else e:for(a=w;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Za(9,l)}}catch(F){Te(l,l.return,F)}if(l===a){$=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,$=D;break e}$=l.return}}if(ne=i,qn(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Ha,t)}catch{}r=!0}return r}finally{se=n,Ct.transition=e}}return!1}function Cp(t,e,n){e=ii(n,e),e=vy(t,e,1),t=Dn(t,e,1),e=rt(),t!==null&&(Bs(t,1,e),ft(t,e))}function Te(t,e,n){if(t.tag===3)Cp(t,t,n);else for(;e!==null;){if(e.tag===3){Cp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nn===null||!Nn.has(r))){t=ii(n,t),t=_y(e,t,1),e=Dn(e,t,1),t=rt(),e!==null&&(Bs(e,1,t),ft(e,t));break}}e=e.return}}function Sw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rt(),t.pingedLanes|=t.suspendedLanes&n,Me===t&&(be&n)===n&&(xe===4||xe===3&&(be&130023424)===be&&500>Se()-kh?ar(t,0):Rh|=n),ft(t,e)}function Uy(t,e){e===0&&(t.mode&1?(e=ko,ko<<=1,!(ko&130023424)&&(ko=4194304)):e=1);var n=rt();t=hn(t,e),t!==null&&(Bs(t,e,n),ft(t,n))}function Pw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Uy(t,n)}function Cw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),Uy(t,n)}var by;by=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ct.current)ut=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ut=!1,pw(t,e,n);ut=!!(t.flags&131072)}else ut=!1,pe&&e.flags&1048576&&Wg(e,wa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zo(t,e),t=e.pendingProps;var i=ei(e,Ze.current);Gr(e,n),i=Th(null,e,r,t,i,n);var s=Ih();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ht(r)?(s=!0,_a(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yh(e),i.updater=Ja,e.stateNode=i,i._reactInternals=e,sc(e,r,t,n),e=lc(null,e,r,!0,s,n)):(e.tag=0,pe&&s&&ch(e),nt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zo(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=kw(r),t=Nt(r,t),i){case 0:e=ac(null,e,r,t,n);break e;case 1:e=yp(null,e,r,t,n);break e;case 11:e=mp(null,e,r,t,n);break e;case 14:e=gp(null,e,r,Nt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),ac(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),yp(t,e,r,i,n);case 3:e:{if(Iy(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Yg(t,e),Aa(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ii(Error(U(423)),e),e=vp(t,e,r,n,i);break e}else if(r!==i){i=ii(Error(U(424)),e),e=vp(t,e,r,n,i);break e}else for(yt=Vn(e.stateNode.containerInfo.firstChild),_t=e,pe=!0,Mt=null,n=Kg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ti(),r===i){e=fn(t,e,n);break e}nt(t,e,r,n)}e=e.child}return e;case 5:return Xg(e),t===null&&nc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Xu(r,i)?a=null:s!==null&&Xu(r,s)&&(e.flags|=32),Ty(t,e),nt(t,e,a,n),e.child;case 6:return t===null&&nc(e),null;case 13:return Ay(t,e,n);case 4:return vh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ni(e,null,r,n):nt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),mp(t,e,r,i,n);case 7:return nt(t,e,e.pendingProps,n),e.child;case 8:return nt(t,e,e.pendingProps.children,n),e.child;case 12:return nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,ue(Ta,r._currentValue),r._currentValue=a,s!==null)if(jt(s.value,a)){if(s.children===i.children&&!ct.current){e=fn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=an(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?u.next=u:(u.next=d.next,d.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),rc(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(U(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),rc(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}nt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Gr(e,n),i=Rt(i),r=r(i),e.flags|=1,nt(t,e,r,n),e.child;case 14:return r=e.type,i=Nt(r,e.pendingProps),i=Nt(r.type,i),gp(t,e,r,i,n);case 15:return Ey(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),Zo(t,e),e.tag=1,ht(r)?(t=!0,_a(e)):t=!1,Gr(e,n),yy(e,r,i),sc(e,r,i,n),lc(null,e,r,!0,t,n);case 19:return Sy(t,e,n);case 22:return wy(t,e,n)}throw Error(U(156,e.tag))};function zy(t,e){return pg(t,e)}function Rw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,e,n,r){return new Rw(t,e,n,r)}function Nh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kw(t){if(typeof t=="function")return Nh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jc)return 11;if(t===Zc)return 14}return 2}function Mn(t,e){var n=t.alternate;return n===null?(n=Pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function na(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Nh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Lr:return lr(n.children,i,s,e);case Xc:a=8,i|=8;break;case ku:return t=Pt(12,n,e,i|2),t.elementType=ku,t.lanes=s,t;case xu:return t=Pt(13,n,e,i),t.elementType=xu,t.lanes=s,t;case Vu:return t=Pt(19,n,e,i),t.elementType=Vu,t.lanes=s,t;case Xm:return tl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gm:a=10;break e;case Ym:a=9;break e;case Jc:a=11;break e;case Zc:a=14;break e;case wn:a=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Pt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function lr(t,e,n,r){return t=Pt(7,t,r,e),t.lanes=n,t}function tl(t,e,n,r){return t=Pt(22,t,r,e),t.elementType=Xm,t.lanes=n,t.stateNode={isHidden:!1},t}function gu(t,e,n){return t=Pt(6,t,null,e),t.lanes=n,t}function yu(t,e,n){return e=Pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xl(0),this.expirationTimes=Xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lh(t,e,n,r,i,s,a,l,u){return t=new xw(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yh(s),t}function Vw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function By(t){if(!t)return bn;t=t._reactInternals;e:{if(wr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(ht(n))return Bg(t,n,e)}return e}function $y(t,e,n,r,i,s,a,l,u){return t=Lh(n,r,!0,t,i,s,a,l,u),t.context=By(null),n=t.current,r=rt(),i=Ln(n),s=an(r,i),s.callback=e??null,Dn(n,s,i),t.current.lanes=i,Bs(t,i,r),ft(t,r),t}function nl(t,e,n,r){var i=e.current,s=rt(),a=Ln(i);return n=By(n),e.context===null?e.context=n:e.pendingContext=n,e=an(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Dn(i,e,a),t!==null&&(Ft(t,i,a,s),Yo(t,i,a)),a}function Da(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Rp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mh(t,e){Rp(t,e),(t=t.alternate)&&Rp(t,e)}function Dw(){return null}var Wy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Oh(t){this._internalRoot=t}rl.prototype.render=Oh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));nl(t,e,null,null)};rl.prototype.unmount=Oh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mr(function(){nl(null,t,null,null)}),e[cn]=null}};function rl(t){this._internalRoot=t}rl.prototype.unstable_scheduleHydration=function(t){if(t){var e=wg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<In.length&&e!==0&&e<In[n].priority;n++);In.splice(n,0,t),n===0&&Ig(t)}};function Fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function il(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kp(){}function Nw(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Da(a);s.call(h)}}var a=$y(e,r,t,0,null,!1,!1,"",kp);return t._reactRootContainer=a,t[cn]=a.current,Is(t.nodeType===8?t.parentNode:t),mr(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Da(u);l.call(h)}}var u=Lh(t,0,!1,null,null,!1,!1,"",kp);return t._reactRootContainer=u,t[cn]=u.current,Is(t.nodeType===8?t.parentNode:t),mr(function(){nl(e,u,n,r)}),u}function sl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var u=Da(a);l.call(u)}}nl(e,a,t,i)}else a=Nw(n,e,t,i,r);return Da(a)}_g=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yi(e.pendingLanes);n!==0&&(nh(e,n|1),ft(e,Se()),!(ne&6)&&(si=Se()+500,qn()))}break;case 13:mr(function(){var r=hn(t,1);if(r!==null){var i=rt();Ft(r,t,1,i)}}),Mh(t,1)}};rh=function(t){if(t.tag===13){var e=hn(t,134217728);if(e!==null){var n=rt();Ft(e,t,134217728,n)}Mh(t,134217728)}};Eg=function(t){if(t.tag===13){var e=Ln(t),n=hn(t,e);if(n!==null){var r=rt();Ft(n,t,e,r)}Mh(t,e)}};wg=function(){return se};Tg=function(t,e){var n=se;try{return se=t,e()}finally{se=n}};zu=function(t,e,n){switch(e){case"input":if(Lu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ga(r);if(!i)throw Error(U(90));Zm(r),Lu(r,i)}}}break;case"textarea":tg(t,n);break;case"select":e=n.value,e!=null&&Hr(t,!!n.multiple,e,!1)}};lg=xh;ug=mr;var Lw={usingClientEntryPoint:!1,Events:[Ws,jr,Ga,og,ag,xh]},qi={findFiberByHostInstance:rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mw={bundleType:qi.bundleType,version:qi.version,rendererPackageName:qi.rendererPackageName,rendererConfig:qi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fg(t),t===null?null:t.stateNode},findFiberByHostInstance:qi.findFiberByHostInstance||Dw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bo.isDisabled&&bo.supportsFiber)try{Ha=bo.inject(Mw),$t=bo}catch{}}wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lw;wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fh(e))throw Error(U(200));return Vw(t,e,null,n)};wt.createRoot=function(t,e){if(!Fh(t))throw Error(U(299));var n=!1,r="",i=Wy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Lh(t,1,!1,null,null,n,!1,r,i),t[cn]=e.current,Is(t.nodeType===8?t.parentNode:t),new Oh(e)};wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=fg(e),t=t===null?null:t.stateNode,t};wt.flushSync=function(t){return mr(t)};wt.hydrate=function(t,e,n){if(!il(e))throw Error(U(200));return sl(null,t,e,!0,n)};wt.hydrateRoot=function(t,e,n){if(!Fh(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=Wy;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=$y(e,null,t,1,n??null,i,!1,s,a),t[cn]=e.current,Is(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new rl(e)};wt.render=function(t,e,n){if(!il(e))throw Error(U(200));return sl(null,t,e,!1,n)};wt.unmountComponentAtNode=function(t){if(!il(t))throw Error(U(40));return t._reactRootContainer?(mr(function(){sl(null,null,t,!1,function(){t._reactRootContainer=null,t[cn]=null})}),!0):!1};wt.unstable_batchedUpdates=xh;wt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!il(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return sl(t,e,n,!1,r)};wt.version="18.3.1-next-f1338f8080-20240426";function Hy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hy)}catch(t){console.error(t)}}Hy(),Hm.exports=wt;var Ow=Hm.exports,xp=Ow;Cu.createRoot=xp.createRoot,Cu.hydrateRoot=xp.hydrateRoot;const Fw="modulepreload",jw=function(t){return"/"+t},Vp={},ol=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=jw(u),u in Vp)return;Vp[u]=!0;const h=u.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":Fw,h||(g.as="script"),g.crossOrigin="",g.href=u,l&&g.setAttribute("nonce",l),document.head.appendChild(g),h)return new Promise((y,A)=>{g.addEventListener("load",y),g.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var we=(t=>(t.Baking="baking-menu",t.BakingRecipeSelection="baking-recipe-selection",t.BakingProcess="baking-process",t.HeatingTimer="heating-timer",t.Operations="operations",t.Inventory="inventory",t.Settings="settings",t))(we||{});const Uw={"cake-slice":S.jsx("path",{d:"M11.84 10.51 16.2 6.15a2.42 2.42 0 0 1 3.42 0 2.42 2.42 0 0 1 0 3.42l-4.36 4.36"}),"clipboard-kanban":S.jsxs(S.Fragment,{children:[S.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),S.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),S.jsx("path",{d:"M12 14h.01"}),S.jsx("path",{d:"M16 14h.01"}),S.jsx("path",{d:"M8 14h.01"})]}),archive:S.jsxs(S.Fragment,{children:[S.jsx("rect",{width:"20",height:"5",x:"2",y:"3",rx:"1"}),S.jsx("path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"}),S.jsx("path",{d:"M10 12h4"})]}),bell:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),S.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),check:S.jsx("path",{d:"M20 6 9 17l-5-5"}),thermometer:S.jsx(S.Fragment,{children:S.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"})}),"thermometer-snowflake":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"}),S.jsx("path",{d:"M22 12h-3"}),S.jsx("path",{d:"M2 20v-3"}),S.jsx("path",{d:"M20 4v3"}),S.jsx("path",{d:"m22 7-3 3"}),S.jsx("path",{d:"M2 13l3 3"}),S.jsx("path",{d:"M5 4l-3 3"})]}),"thermometer-sun":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"}),S.jsx("path",{d:"M4 11H2"}),S.jsx("path",{d:"M10 11H8"}),S.jsx("path",{d:"M22 11h-2"}),S.jsx("path",{d:"M16 11h-2"}),S.jsx("path",{d:"M19 8a3 3 0 0 0-6 0"}),S.jsx("path",{d:"M19.3 4.7a3 3 0 0 0-4.25-4.25"})]}),"chevron-right":S.jsx("path",{d:"m9 18 6-6-6-6"}),"rotate-ccw":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),S.jsx("path",{d:"M3 3v5h5"})]}),x:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M18 6 6 18"}),S.jsx("path",{d:"m6 6 12 12"})]}),"plus-circle":S.jsxs(S.Fragment,{children:[S.jsx("circle",{cx:"12",cy:"12",r:"10"}),S.jsx("path",{d:"M8 12h8"}),S.jsx("path",{d:"M12 8v8"})]}),"refresh-cw":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),S.jsx("path",{d:"M21 3v5h-5"}),S.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),S.jsx("path",{d:"M3 21v-5h5"})]}),list:S.jsxs(S.Fragment,{children:[S.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),S.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),S.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),S.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),S.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),S.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]}),"play-circle":S.jsxs(S.Fragment,{children:[S.jsx("circle",{cx:"12",cy:"12",r:"10"}),S.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]}),"check-circle":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),S.jsx("path",{d:"m9 11 3 3L22 4"})]}),"alert-triangle":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),S.jsx("path",{d:"M12 9v4"}),S.jsx("path",{d:"M12 17h.01"})]}),"map-pin":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),S.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),boxes:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),S.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),S.jsx("path",{d:"M12 22V12"})]}),"shopping-cart":S.jsxs(S.Fragment,{children:[S.jsx("circle",{cx:"8",cy:"21",r:"1"}),S.jsx("circle",{cx:"19",cy:"21",r:"1"}),S.jsx("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.15"})]}),store:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"}),S.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),S.jsx("path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"}),S.jsx("path",{d:"M2 7h20"}),S.jsx("path",{d:"M22 7v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7"})]}),plus:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M5 12h14"}),S.jsx("path",{d:"M12 5v14"})]}),minus:S.jsx("path",{d:"M5 12h14"}),pencil:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),S.jsx("path",{d:"m15 5 4 4"})]}),settings:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0 2l.15.08a2 2 0 0 0 .73-2.73l.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),S.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"bar-chart-2":S.jsxs(S.Fragment,{children:[S.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),S.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),S.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),star:S.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}),menu:S.jsx(S.Fragment,{children:S.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})}),"trash-2":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M3 6h18"}),S.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),S.jsx("path",{d:"M10 11v6"}),S.jsx("path",{d:"M14 11v6"})]}),"volume-2":S.jsxs(S.Fragment,{children:[S.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),S.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"}),S.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]}),"volume-x":S.jsxs(S.Fragment,{children:[S.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),S.jsx("line",{x1:"22",x2:"16",y1:"9",y2:"15"}),S.jsx("line",{x1:"16",x2:"22",y1:"9",y2:"15"})]})},nn=({name:t,className:e="",size:n=24})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:Uw[t]}),bw=({activeScreen:t,setActiveScreen:e,processes:n,urgentTasks:r,shoppingListItems:i,inProgressTasks:s,isOpen:a,onClose:l})=>{const u=k=>{e(k),l()},h=({active:k,onClick:V,children:M})=>{const I="w-full flex items-center gap-4 p-4 rounded-lg font-bold text-left cursor-pointer transition-all duration-200",w=k?`${I} bg-blue-600 text-white`:`${I} text-gray-500 hover:bg-gray-100 hover:text-gray-900`;return S.jsx("button",{onClick:V,className:w,children:M})},d=({title:k,children:V,onClick:M,isAlarm:I})=>S.jsxs("div",{className:"mb-4",children:[S.jsx("h3",{className:`text-xs uppercase font-bold mb-2 px-2 ${I?"text-red-600 animate-pulse":"text-blue-600"}`,children:k}),S.jsx("button",{onClick:M,className:`w-full text-left p-3 rounded-lg transition-colors border ${I?"bg-red-50 border-red-400 hover:bg-red-100":"bg-gray-100 border-gray-200 hover:bg-gray-200"}`,children:V})]}),g=n.filter(k=>k.state!=="finished"),y=t===we.Baking,A=`
        sidebar-nav flex flex-col bg-white p-4 border-r border-gray-200 overflow-y-auto 
        fixed inset-y-0 left-0 z-50 w-64 transform transition-transform duration-300 ease-in-out 
        md:relative md:w-auto md:translate-x-0
        ${a?"translate-x-0":"-translate-x-full"}
    `;return S.jsxs("nav",{className:A,children:[S.jsxs("header",{className:"sidebar-header text-center mb-6 pt-4 flex-shrink-0",children:[S.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Cafestesia"}),S.jsx("span",{className:"text-sm text-gray-500",children:"Gestor v2.1 (React)"})]}),S.jsxs("div",{className:"flex-grow",children:[g.map(k=>{const V=k.state==="alarm";return S.jsx(d,{title:V?"Accin Requerida!":"En Produccin",onClick:()=>u(we.Baking),isAlarm:V,children:S.jsxs("div",{className:"flex items-center gap-3 font-bold text-sm text-gray-800",children:[S.jsx(nn,{name:V?"bell":"cake-slice",className:V?"text-red-500":"text-green-600",size:20}),S.jsx("span",{children:k.name})]})},k.id)}),s.length>0&&S.jsx(d,{title:"Tareas en Progreso",onClick:()=>u(we.Operations),children:S.jsxs("div",{className:"flex items-center gap-3 font-bold text-sm text-gray-800",children:[S.jsx(nn,{name:"play-circle",className:"text-yellow-600",size:20}),S.jsxs("span",{children:[s.length," tarea",s.length>1?"s":""," activa",s.length>1?"s":""]})]})}),r.length>0&&S.jsx(d,{title:"Operaciones Urgentes",onClick:()=>u(we.Operations),children:r.map(({task:k,diff:V})=>S.jsxs("div",{className:"text-sm mb-2 last:mb-0",children:[S.jsx("p",{className:"font-bold text-gray-800",children:k.text}),S.jsxs("p",{className:`text-xs font-semibold ${V<=0?"text-red-600 animate-pulse":"text-blue-600"}`,children:[k.time," ",V<=0?"(AHORA!)":`(en ${V} min)`]})]},k.id))}),i.length>0&&S.jsx(d,{title:"Inventario Crtico",onClick:()=>u(we.Inventory),children:S.jsxs("div",{className:"flex items-center gap-3 font-bold text-sm text-gray-800",children:[S.jsx(nn,{name:"shopping-cart",className:"text-red-500",size:20}),S.jsxs("span",{children:[i.length," producto",i.length>1?"s":""," en la lista de compras"]})]})})]}),S.jsxs("div",{className:"nav-buttons flex flex-col gap-2 mt-auto flex-shrink-0",children:[S.jsxs(h,{active:y,onClick:()=>u(we.Baking),children:[S.jsx(nn,{name:"cake-slice",size:20}),S.jsx("span",{children:"Produccin de Pan"})]}),S.jsxs(h,{active:t===we.Operations,onClick:()=>u(we.Operations),children:[S.jsx(nn,{name:"clipboard-kanban",size:20}),S.jsx("span",{children:"Operaciones"})]}),S.jsxs(h,{active:t===we.Inventory,onClick:()=>u(we.Inventory),children:[S.jsx(nn,{name:"archive",size:20}),S.jsx("span",{children:"Inventario"})]}),S.jsxs(h,{active:t===we.Settings,onClick:()=>u(we.Settings),children:[S.jsx(nn,{name:"settings",size:20}),S.jsx("span",{children:"Configuracin"})]})]})]})},qy={roles:{id:"roles",name:"Roles de Canela",pluralName:"Roles de Canela listos",setupInstruction:"Configura el horno a 230C y programa 16 minutos.",totalDuration:14*60,steps:[{duration:2*60,instruction:"Coloca los roles en los niveles 1 y 3. Deja que el calor eleve el producto sin presionar INICIO.",isPauseStep:!0},{duration:6*60,instruction:"Baja la temperatura a 210C y comienza el horneado."},{duration:4*60,instruction:"Gira las charolas 180 grados."},{duration:2*60,instruction:"Agrega 20 ml de leche y gira cada rol 1/3 de vuelta en sentido contrario del reloj."},{duration:2*60,instruction:"Vuelve a girar cada rol 1/3 de vuelta para finalizar."}]},ciabattas:{id:"ciabattas",name:"Ciabattas",pluralName:"Ciabattas listas",setupInstruction:"Configura el horno a 230C y programa 30 minutos.",totalDuration:28*60,steps:[{duration:2*60,instruction:"Coloca las charolas (niveles 1 y 3) y pulveriza agua 12 veces. Deja que el calor eleve el producto sin presionar INICIO.",isPauseStep:!0},{duration:8*60,instruction:"Baja la temperatura a 210C y comienza el horneado."},{duration:8*60,instruction:"Gira las charolas 180 grados y vuelve a pulverizar agua 12 veces."},{duration:6*60,instruction:"Intercambia las charolas de nivel y da vuelta a cada pieza 180 grados."},{duration:6*60,instruction:"Gira las charolas 180 grados por ltima vez."}]},croissants:{id:"croissants",name:"Croissants",pluralName:"Croissants listos",setupInstruction:"Configura el horno a 230C y programa 21 minutos.",totalDuration:21*60,steps:[{duration:3*60,instruction:"Coloca las charolas en los niveles 1 y 3. Pulveriza agua 12 veces."},{duration:6*60,instruction:"Baja la temperatura a 200C y continua horneando. (Nota: Si horneas solo 1 charola, baja a 180C)"},{duration:5*60,instruction:"Gira las charolas 180 grados."},{duration:5*60,instruction:"Intercambia las charolas de nivel y gralas 180 grados."},{duration:2*60,instruction:"Gira las charolas 180 grados por ltima vez."}]}},zw=new Date,Zn=zw.toISOString().split("T")[0],Qy=[{text:"Roles: Descongelar en refrigeracin",employee:"Ali",shift:"matutino",date:Zn,time:"08:00",duration:30,isCritical:!0,zone:"Panadera",status:"todo"},{text:"Checar ingredientes diarios y comprarlos",employee:"Ali",shift:"pre-apertura",date:Zn,time:"15:00",duration:60,isCritical:!0,zone:"Cocina",status:"todo"},{text:"Hornear Roles",employee:"Claudia",shift:"pre-apertura",date:Zn,time:"16:00",duration:45,isCritical:!0,zone:"Panadera",status:"todo"},{text:"Hornear Croissants",employee:"Claudia",shift:"pre-apertura",date:Zn,time:"16:30",duration:45,isCritical:!0,zone:"Panadera",status:"todo"},{text:"Corte de caja",employee:"Fer",shift:"cierre",date:Zn,time:"21:50",duration:20,isCritical:!0,zone:"Admin",status:"todo"},{text:"Limpiar barra y area de barismo",employee:"Claudia",shift:"pre-apertura",date:Zn,time:"17:00",duration:30,isCritical:!0,zone:"Barra",status:"todo"},{text:"Hacer masa para ciabatta (da siguiente)",employee:"Fer",shift:"cierre",date:Zn,time:"21:40",duration:20,isCritical:!0,zone:"Panadera",status:"todo"}],Ky=[{name:"Harina de Trigo",category:"Secos",currentStock:50,unit:"kg",minStock:10,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Levadura Fresca",category:"Refrigerados",currentStock:1,unit:"kg",minStock:.5,providerPreferido:"Proveedor B",purchaseHistory:[]},{name:"Mantequilla sin Sal",category:"Refrigerados",currentStock:5,unit:"kg",minStock:2,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Chocolate Amargo 70%",category:"Secos",currentStock:3,unit:"kg",minStock:1,providerPreferido:"Proveedor C",purchaseHistory:[]},{name:"Leche Entera",category:"Lcteos",currentStock:8,unit:"lt",minStock:4,providerPreferido:"Supermercado",purchaseHistory:[]},{name:"Caf en Grano",category:"Bebidas",currentStock:10,unit:"kg",minStock:5,providerPreferido:"Tostador Local",purchaseHistory:[]},{name:"Azcar Morena",category:"Secos",currentStock:15,unit:"kg",minStock:5,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Canela en Polvo",category:"Secos",currentStock:.4,unit:"kg",minStock:.5,providerPreferido:"Proveedor C",purchaseHistory:[]}],YA=["kg","lt","pz","g","ml","unidad(es)"],XA=8,JA=22,ZA=[{value:5,label:"5 min"},{value:10,label:"10 min"},{value:15,label:"15 min"},{value:30,label:"30 min"},{value:60,label:"1 hora"},{value:120,label:"2 horas"}];var Dp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Bw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Yy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,d=s>>2,g=(s&3)<<4|l>>4;let y=(l&15)<<2|h>>6,A=h&63;u||(A=64,a||(y=64)),r.push(n[d],n[g],n[y],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Gy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Bw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||g==null)throw new $w;const y=s<<2|l>>4;if(r.push(y),h!==64){const A=l<<4&240|h>>2;if(r.push(A),g!==64){const k=h<<6&192|g;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $w extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ww=function(t){const e=Gy(t);return Yy.encodeByteArray(e,!0)},Na=function(t){return Ww(t).replace(/\./g,"")},Hw=function(t){try{return Yy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=()=>qw().__FIREBASE_DEFAULTS__,Kw=()=>{if(typeof process>"u"||typeof Dp>"u")return;const t=Dp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Gw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hw(t[1]);return e&&JSON.parse(e)},jh=()=>{try{return Qw()||Kw()||Gw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Yw=t=>{var e,n;return(n=(e=jh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Xw=t=>{const e=Yw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Xy=()=>{var t;return(t=jh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Na(JSON.stringify(n)),Na(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function t1(){var t;const e=(t=jh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function n1(){return!t1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function r1(){try{return typeof indexedDB=="object"}catch{return!1}}function i1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="FirebaseError";class _i extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=s1,Object.setPrototypeOf(this,_i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jy.prototype.create)}}class Jy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?o1(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new _i(i,l,r)}}function o1(t,e){return t.replace(a1,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const a1=/\{\$([^}]+)}/g;function La(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(Np(s)&&Np(a)){if(!La(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Np(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){return t&&t._delegate?t._delegate:t}class Ds{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Jw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(c1(e))try{this.getOrInitializeService({instanceIdentifier:nr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=nr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nr){return this.instances.has(e)}getOptions(e=nr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:u1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=nr){return this.component?this.component.multipleInstances?e:nr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function u1(t){return t===nr?void 0:t}function c1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new l1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(te||(te={}));const f1={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},d1=te.INFO,p1={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},m1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=p1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zy{constructor(e){this.name=e,this._logLevel=d1,this._logHandler=m1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?f1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}}const g1=(t,e)=>e.some(n=>t instanceof n);let Lp,Mp;function y1(){return Lp||(Lp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v1(){return Mp||(Mp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ev=new WeakMap,Ec=new WeakMap,tv=new WeakMap,vu=new WeakMap,Uh=new WeakMap;function _1(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(On(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&ev.set(n,t)}).catch(()=>{}),Uh.set(e,t),e}function E1(t){if(Ec.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Ec.set(t,e)}let wc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ec.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return On(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function w1(t){wc=t(wc)}function T1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_u(this),e,...n);return tv.set(r,e.sort?e.sort():[e]),On(r)}:v1().includes(t)?function(...e){return t.apply(_u(this),e),On(ev.get(this))}:function(...e){return On(t.apply(_u(this),e))}}function I1(t){return typeof t=="function"?T1(t):(t instanceof IDBTransaction&&E1(t),g1(t,y1())?new Proxy(t,wc):t)}function On(t){if(t instanceof IDBRequest)return _1(t);if(vu.has(t))return vu.get(t);const e=I1(t);return e!==t&&(vu.set(t,e),Uh.set(e,t)),e}const _u=t=>Uh.get(t);function A1(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=On(a);return r&&a.addEventListener("upgradeneeded",u=>{r(On(a.result),u.oldVersion,u.newVersion,On(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const S1=["get","getKey","getAll","getAllKeys","count"],P1=["put","add","delete","clear"],Eu=new Map;function Op(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Eu.get(e))return Eu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=P1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||S1.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return Eu.set(e,s),s}w1(t=>({...t,get:(e,n,r)=>Op(e,n)||t.get(e,n,r),has:(e,n)=>!!Op(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(R1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function R1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tc="@firebase/app",Fp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn=new Zy("@firebase/app"),k1="@firebase/app-compat",x1="@firebase/analytics-compat",V1="@firebase/analytics",D1="@firebase/app-check-compat",N1="@firebase/app-check",L1="@firebase/auth",M1="@firebase/auth-compat",O1="@firebase/database",F1="@firebase/data-connect",j1="@firebase/database-compat",U1="@firebase/functions",b1="@firebase/functions-compat",z1="@firebase/installations",B1="@firebase/installations-compat",$1="@firebase/messaging",W1="@firebase/messaging-compat",H1="@firebase/performance",q1="@firebase/performance-compat",Q1="@firebase/remote-config",K1="@firebase/remote-config-compat",G1="@firebase/storage",Y1="@firebase/storage-compat",X1="@firebase/firestore",J1="@firebase/vertexai-preview",Z1="@firebase/firestore-compat",eT="firebase",tT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic="[DEFAULT]",nT={[Tc]:"fire-core",[k1]:"fire-core-compat",[V1]:"fire-analytics",[x1]:"fire-analytics-compat",[N1]:"fire-app-check",[D1]:"fire-app-check-compat",[L1]:"fire-auth",[M1]:"fire-auth-compat",[O1]:"fire-rtdb",[F1]:"fire-data-connect",[j1]:"fire-rtdb-compat",[U1]:"fire-fn",[b1]:"fire-fn-compat",[z1]:"fire-iid",[B1]:"fire-iid-compat",[$1]:"fire-fcm",[W1]:"fire-fcm-compat",[H1]:"fire-perf",[q1]:"fire-perf-compat",[Q1]:"fire-rc",[K1]:"fire-rc-compat",[G1]:"fire-gcs",[Y1]:"fire-gcs-compat",[X1]:"fire-fst",[Z1]:"fire-fst-compat",[J1]:"fire-vertex","fire-js":"fire-js",[eT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=new Map,rT=new Map,Ac=new Map;function jp(t,e){try{t.container.addComponent(e)}catch(n){dn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Oa(t){const e=t.name;if(Ac.has(e))return dn.debug(`There were multiple attempts to register component ${e}.`),!1;Ac.set(e,t);for(const n of Ma.values())jp(n,t);for(const n of rT.values())jp(n,t);return!0}function iT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fn=new Jy("app","Firebase",sT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=tT;function nv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ic,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Fn.create("bad-app-name",{appName:String(i)});if(n||(n=Xy()),!n)throw Fn.create("no-options");const s=Ma.get(i);if(s){if(La(n,s.options)&&La(r,s.config))return s;throw Fn.create("duplicate-app",{appName:i})}const a=new h1(i);for(const u of Ac.values())a.addComponent(u);const l=new oT(n,r,a);return Ma.set(i,l),l}function lT(t=Ic){const e=Ma.get(t);if(!e&&t===Ic&&Xy())return nv();if(!e)throw Fn.create("no-app",{appName:t});return e}function Xr(t,e,n){var r;let i=(r=nT[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dn.warn(l.join(" "));return}Oa(new Ds(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="firebase-heartbeat-database",cT=1,Ns="firebase-heartbeat-store";let wu=null;function rv(){return wu||(wu=A1(uT,cT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ns)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fn.create("idb-open",{originalErrorMessage:t.message})})),wu}async function hT(t){try{const n=(await rv()).transaction(Ns),r=await n.objectStore(Ns).get(iv(t));return await n.done,r}catch(e){if(e instanceof _i)dn.warn(e.message);else{const n=Fn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dn.warn(n.message)}}}async function Up(t,e){try{const r=(await rv()).transaction(Ns,"readwrite");await r.objectStore(Ns).put(e,iv(t)),await r.done}catch(n){if(n instanceof _i)dn.warn(n.message);else{const r=Fn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});dn.warn(r.message)}}}function iv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=1024,dT=30*24*60*60*1e3;class pT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=bp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=dT}),this._storage.overwrite(this._heartbeatsCache))}catch(r){dn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bp(),{heartbeatsToSend:r,unsentEntries:i}=mT(this._heartbeatsCache.heartbeats),s=Na(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return dn.warn(n),""}}}function bp(){return new Date().toISOString().substring(0,10)}function mT(t,e=fT){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),zp(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),zp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return r1()?i1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Up(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Up(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function zp(t){return Na(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(t){Oa(new Ds("platform-logger",e=>new C1(e),"PRIVATE")),Oa(new Ds("heartbeat",e=>new pT(e),"PRIVATE")),Xr(Tc,Fp,t),Xr(Tc,Fp,"esm2017"),Xr("fire-js","")}yT("");var vT="firebase",_T="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xr(vT,_T,"app");var Bp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ur,sv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,p){function v(){}v.prototype=p.prototype,_.D=p.prototype,_.prototype=new v,_.prototype.constructor=_,_.C=function(E,P,R){for(var T=Array(arguments.length-2),It=2;It<arguments.length;It++)T[It-2]=arguments[It];return p.prototype[P].apply(E,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,p,v){v||(v=0);var E=Array(16);if(typeof p=="string")for(var P=0;16>P;++P)E[P]=p.charCodeAt(v++)|p.charCodeAt(v++)<<8|p.charCodeAt(v++)<<16|p.charCodeAt(v++)<<24;else for(P=0;16>P;++P)E[P]=p[v++]|p[v++]<<8|p[v++]<<16|p[v++]<<24;p=_.g[0],v=_.g[1],P=_.g[2];var R=_.g[3],T=p+(R^v&(P^R))+E[0]+3614090360&4294967295;p=v+(T<<7&4294967295|T>>>25),T=R+(P^p&(v^P))+E[1]+3905402710&4294967295,R=p+(T<<12&4294967295|T>>>20),T=P+(v^R&(p^v))+E[2]+606105819&4294967295,P=R+(T<<17&4294967295|T>>>15),T=v+(p^P&(R^p))+E[3]+3250441966&4294967295,v=P+(T<<22&4294967295|T>>>10),T=p+(R^v&(P^R))+E[4]+4118548399&4294967295,p=v+(T<<7&4294967295|T>>>25),T=R+(P^p&(v^P))+E[5]+1200080426&4294967295,R=p+(T<<12&4294967295|T>>>20),T=P+(v^R&(p^v))+E[6]+2821735955&4294967295,P=R+(T<<17&4294967295|T>>>15),T=v+(p^P&(R^p))+E[7]+4249261313&4294967295,v=P+(T<<22&4294967295|T>>>10),T=p+(R^v&(P^R))+E[8]+1770035416&4294967295,p=v+(T<<7&4294967295|T>>>25),T=R+(P^p&(v^P))+E[9]+2336552879&4294967295,R=p+(T<<12&4294967295|T>>>20),T=P+(v^R&(p^v))+E[10]+4294925233&4294967295,P=R+(T<<17&4294967295|T>>>15),T=v+(p^P&(R^p))+E[11]+2304563134&4294967295,v=P+(T<<22&4294967295|T>>>10),T=p+(R^v&(P^R))+E[12]+1804603682&4294967295,p=v+(T<<7&4294967295|T>>>25),T=R+(P^p&(v^P))+E[13]+4254626195&4294967295,R=p+(T<<12&4294967295|T>>>20),T=P+(v^R&(p^v))+E[14]+2792965006&4294967295,P=R+(T<<17&4294967295|T>>>15),T=v+(p^P&(R^p))+E[15]+1236535329&4294967295,v=P+(T<<22&4294967295|T>>>10),T=p+(P^R&(v^P))+E[1]+4129170786&4294967295,p=v+(T<<5&4294967295|T>>>27),T=R+(v^P&(p^v))+E[6]+3225465664&4294967295,R=p+(T<<9&4294967295|T>>>23),T=P+(p^v&(R^p))+E[11]+643717713&4294967295,P=R+(T<<14&4294967295|T>>>18),T=v+(R^p&(P^R))+E[0]+3921069994&4294967295,v=P+(T<<20&4294967295|T>>>12),T=p+(P^R&(v^P))+E[5]+3593408605&4294967295,p=v+(T<<5&4294967295|T>>>27),T=R+(v^P&(p^v))+E[10]+38016083&4294967295,R=p+(T<<9&4294967295|T>>>23),T=P+(p^v&(R^p))+E[15]+3634488961&4294967295,P=R+(T<<14&4294967295|T>>>18),T=v+(R^p&(P^R))+E[4]+3889429448&4294967295,v=P+(T<<20&4294967295|T>>>12),T=p+(P^R&(v^P))+E[9]+568446438&4294967295,p=v+(T<<5&4294967295|T>>>27),T=R+(v^P&(p^v))+E[14]+3275163606&4294967295,R=p+(T<<9&4294967295|T>>>23),T=P+(p^v&(R^p))+E[3]+4107603335&4294967295,P=R+(T<<14&4294967295|T>>>18),T=v+(R^p&(P^R))+E[8]+1163531501&4294967295,v=P+(T<<20&4294967295|T>>>12),T=p+(P^R&(v^P))+E[13]+2850285829&4294967295,p=v+(T<<5&4294967295|T>>>27),T=R+(v^P&(p^v))+E[2]+4243563512&4294967295,R=p+(T<<9&4294967295|T>>>23),T=P+(p^v&(R^p))+E[7]+1735328473&4294967295,P=R+(T<<14&4294967295|T>>>18),T=v+(R^p&(P^R))+E[12]+2368359562&4294967295,v=P+(T<<20&4294967295|T>>>12),T=p+(v^P^R)+E[5]+4294588738&4294967295,p=v+(T<<4&4294967295|T>>>28),T=R+(p^v^P)+E[8]+2272392833&4294967295,R=p+(T<<11&4294967295|T>>>21),T=P+(R^p^v)+E[11]+1839030562&4294967295,P=R+(T<<16&4294967295|T>>>16),T=v+(P^R^p)+E[14]+4259657740&4294967295,v=P+(T<<23&4294967295|T>>>9),T=p+(v^P^R)+E[1]+2763975236&4294967295,p=v+(T<<4&4294967295|T>>>28),T=R+(p^v^P)+E[4]+1272893353&4294967295,R=p+(T<<11&4294967295|T>>>21),T=P+(R^p^v)+E[7]+4139469664&4294967295,P=R+(T<<16&4294967295|T>>>16),T=v+(P^R^p)+E[10]+3200236656&4294967295,v=P+(T<<23&4294967295|T>>>9),T=p+(v^P^R)+E[13]+681279174&4294967295,p=v+(T<<4&4294967295|T>>>28),T=R+(p^v^P)+E[0]+3936430074&4294967295,R=p+(T<<11&4294967295|T>>>21),T=P+(R^p^v)+E[3]+3572445317&4294967295,P=R+(T<<16&4294967295|T>>>16),T=v+(P^R^p)+E[6]+76029189&4294967295,v=P+(T<<23&4294967295|T>>>9),T=p+(v^P^R)+E[9]+3654602809&4294967295,p=v+(T<<4&4294967295|T>>>28),T=R+(p^v^P)+E[12]+3873151461&4294967295,R=p+(T<<11&4294967295|T>>>21),T=P+(R^p^v)+E[15]+530742520&4294967295,P=R+(T<<16&4294967295|T>>>16),T=v+(P^R^p)+E[2]+3299628645&4294967295,v=P+(T<<23&4294967295|T>>>9),T=p+(P^(v|~R))+E[0]+4096336452&4294967295,p=v+(T<<6&4294967295|T>>>26),T=R+(v^(p|~P))+E[7]+1126891415&4294967295,R=p+(T<<10&4294967295|T>>>22),T=P+(p^(R|~v))+E[14]+2878612391&4294967295,P=R+(T<<15&4294967295|T>>>17),T=v+(R^(P|~p))+E[5]+4237533241&4294967295,v=P+(T<<21&4294967295|T>>>11),T=p+(P^(v|~R))+E[12]+1700485571&4294967295,p=v+(T<<6&4294967295|T>>>26),T=R+(v^(p|~P))+E[3]+2399980690&4294967295,R=p+(T<<10&4294967295|T>>>22),T=P+(p^(R|~v))+E[10]+4293915773&4294967295,P=R+(T<<15&4294967295|T>>>17),T=v+(R^(P|~p))+E[1]+2240044497&4294967295,v=P+(T<<21&4294967295|T>>>11),T=p+(P^(v|~R))+E[8]+1873313359&4294967295,p=v+(T<<6&4294967295|T>>>26),T=R+(v^(p|~P))+E[15]+4264355552&4294967295,R=p+(T<<10&4294967295|T>>>22),T=P+(p^(R|~v))+E[6]+2734768916&4294967295,P=R+(T<<15&4294967295|T>>>17),T=v+(R^(P|~p))+E[13]+1309151649&4294967295,v=P+(T<<21&4294967295|T>>>11),T=p+(P^(v|~R))+E[4]+4149444226&4294967295,p=v+(T<<6&4294967295|T>>>26),T=R+(v^(p|~P))+E[11]+3174756917&4294967295,R=p+(T<<10&4294967295|T>>>22),T=P+(p^(R|~v))+E[2]+718787259&4294967295,P=R+(T<<15&4294967295|T>>>17),T=v+(R^(P|~p))+E[9]+3951481745&4294967295,_.g[0]=_.g[0]+p&4294967295,_.g[1]=_.g[1]+(P+(T<<21&4294967295|T>>>11))&4294967295,_.g[2]=_.g[2]+P&4294967295,_.g[3]=_.g[3]+R&4294967295}r.prototype.u=function(_,p){p===void 0&&(p=_.length);for(var v=p-this.blockSize,E=this.B,P=this.h,R=0;R<p;){if(P==0)for(;R<=v;)i(this,_,R),R+=this.blockSize;if(typeof _=="string"){for(;R<p;)if(E[P++]=_.charCodeAt(R++),P==this.blockSize){i(this,E),P=0;break}}else for(;R<p;)if(E[P++]=_[R++],P==this.blockSize){i(this,E),P=0;break}}this.h=P,this.o+=p},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var p=1;p<_.length-8;++p)_[p]=0;var v=8*this.o;for(p=_.length-8;p<_.length;++p)_[p]=v&255,v/=256;for(this.u(_),_=Array(16),p=v=0;4>p;++p)for(var E=0;32>E;E+=8)_[v++]=this.g[p]>>>E&255;return _};function s(_,p){var v=l;return Object.prototype.hasOwnProperty.call(v,_)?v[_]:v[_]=p(_)}function a(_,p){this.h=p;for(var v=[],E=!0,P=_.length-1;0<=P;P--){var R=_[P]|0;E&&R==p||(v[P]=R,E=!1)}this.g=v}var l={};function u(_){return-128<=_&&128>_?s(_,function(p){return new a([p|0],0>p?-1:0)}):new a([_|0],0>_?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return g;if(0>_)return M(h(-_));for(var p=[],v=1,E=0;_>=v;E++)p[E]=_/v|0,v*=4294967296;return new a(p,0)}function d(_,p){if(_.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(_.charAt(0)=="-")return M(d(_.substring(1),p));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=h(Math.pow(p,8)),E=g,P=0;P<_.length;P+=8){var R=Math.min(8,_.length-P),T=parseInt(_.substring(P,P+R),p);8>R?(R=h(Math.pow(p,R)),E=E.j(R).add(h(T))):(E=E.j(v),E=E.add(h(T)))}return E}var g=u(0),y=u(1),A=u(16777216);t=a.prototype,t.m=function(){if(V(this))return-M(this).m();for(var _=0,p=1,v=0;v<this.g.length;v++){var E=this.i(v);_+=(0<=E?E:4294967296+E)*p,p*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(k(this))return"0";if(V(this))return"-"+M(this).toString(_);for(var p=h(Math.pow(_,6)),v=this,E="";;){var P=D(v,p).g;v=I(v,P.j(p));var R=((0<v.g.length?v.g[0]:v.h)>>>0).toString(_);if(v=P,k(v))return R+E;for(;6>R.length;)R="0"+R;E=R+E}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function k(_){if(_.h!=0)return!1;for(var p=0;p<_.g.length;p++)if(_.g[p]!=0)return!1;return!0}function V(_){return _.h==-1}t.l=function(_){return _=I(this,_),V(_)?-1:k(_)?0:1};function M(_){for(var p=_.g.length,v=[],E=0;E<p;E++)v[E]=~_.g[E];return new a(v,~_.h).add(y)}t.abs=function(){return V(this)?M(this):this},t.add=function(_){for(var p=Math.max(this.g.length,_.g.length),v=[],E=0,P=0;P<=p;P++){var R=E+(this.i(P)&65535)+(_.i(P)&65535),T=(R>>>16)+(this.i(P)>>>16)+(_.i(P)>>>16);E=T>>>16,R&=65535,T&=65535,v[P]=T<<16|R}return new a(v,v[v.length-1]&-2147483648?-1:0)};function I(_,p){return _.add(M(p))}t.j=function(_){if(k(this)||k(_))return g;if(V(this))return V(_)?M(this).j(M(_)):M(M(this).j(_));if(V(_))return M(this.j(M(_)));if(0>this.l(A)&&0>_.l(A))return h(this.m()*_.m());for(var p=this.g.length+_.g.length,v=[],E=0;E<2*p;E++)v[E]=0;for(E=0;E<this.g.length;E++)for(var P=0;P<_.g.length;P++){var R=this.i(E)>>>16,T=this.i(E)&65535,It=_.i(P)>>>16,Kn=_.i(P)&65535;v[2*E+2*P]+=T*Kn,w(v,2*E+2*P),v[2*E+2*P+1]+=R*Kn,w(v,2*E+2*P+1),v[2*E+2*P+1]+=T*It,w(v,2*E+2*P+1),v[2*E+2*P+2]+=R*It,w(v,2*E+2*P+2)}for(E=0;E<p;E++)v[E]=v[2*E+1]<<16|v[2*E];for(E=p;E<2*p;E++)v[E]=0;return new a(v,0)};function w(_,p){for(;(_[p]&65535)!=_[p];)_[p+1]+=_[p]>>>16,_[p]&=65535,p++}function C(_,p){this.g=_,this.h=p}function D(_,p){if(k(p))throw Error("division by zero");if(k(_))return new C(g,g);if(V(_))return p=D(M(_),p),new C(M(p.g),M(p.h));if(V(p))return p=D(_,M(p)),new C(M(p.g),p.h);if(30<_.g.length){if(V(_)||V(p))throw Error("slowDivide_ only works with positive integers.");for(var v=y,E=p;0>=E.l(_);)v=F(v),E=F(E);var P=L(v,1),R=L(E,1);for(E=L(E,2),v=L(v,2);!k(E);){var T=R.add(E);0>=T.l(_)&&(P=P.add(v),R=T),E=L(E,1),v=L(v,1)}return p=I(_,P.j(p)),new C(P,p)}for(P=g;0<=_.l(p);){for(v=Math.max(1,Math.floor(_.m()/p.m())),E=Math.ceil(Math.log(v)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),R=h(v),T=R.j(p);V(T)||0<T.l(_);)v-=E,R=h(v),T=R.j(p);k(R)&&(R=y),P=P.add(R),_=I(_,T)}return new C(P,_)}t.A=function(_){return D(this,_).h},t.and=function(_){for(var p=Math.max(this.g.length,_.g.length),v=[],E=0;E<p;E++)v[E]=this.i(E)&_.i(E);return new a(v,this.h&_.h)},t.or=function(_){for(var p=Math.max(this.g.length,_.g.length),v=[],E=0;E<p;E++)v[E]=this.i(E)|_.i(E);return new a(v,this.h|_.h)},t.xor=function(_){for(var p=Math.max(this.g.length,_.g.length),v=[],E=0;E<p;E++)v[E]=this.i(E)^_.i(E);return new a(v,this.h^_.h)};function F(_){for(var p=_.g.length+1,v=[],E=0;E<p;E++)v[E]=_.i(E)<<1|_.i(E-1)>>>31;return new a(v,_.h)}function L(_,p){var v=p>>5;p%=32;for(var E=_.g.length-v,P=[],R=0;R<E;R++)P[R]=0<p?_.i(R+v)>>>p|_.i(R+v+1)<<32-p:_.i(R+v);return new a(P,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sv=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,ur=a}).apply(typeof Bp<"u"?Bp:typeof self<"u"?self:typeof window<"u"?window:{});var zo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ov,Ji,av,ra,Sc,lv,uv,cv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof zo=="object"&&zo];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(o,c){if(c)e:{var f=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var x=o[m];if(!(x in f))break e;f=f[x]}o=o[o.length-1],m=f[o],c=c(m),c!=m&&c!=null&&e(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,m=!1,x={next:function(){if(!m&&f<o.length){var N=f++;return{value:c(N,o[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}i("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,m),o.apply(c,x)}}return function(){return o.apply(c,arguments)}}function y(o,c,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,y.apply(null,arguments)}function A(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function k(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(m,x,N){for(var b=Array(arguments.length-2),le=2;le<arguments.length;le++)b[le-2]=arguments[le];return c.prototype[x].apply(m,b)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let m=0;m<c;m++)f[m]=o[m];return f}return[]}function M(o,c){for(let f=1;f<arguments.length;f++){const m=arguments[f];if(u(m)){const x=o.length||0,N=m.length||0;o.length=x+N;for(let b=0;b<N;b++)o[x+b]=m[b]}else o.push(m)}}class I{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function w(o){return/^[\s\xa0]*$/.test(o)}function C(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function D(o){return D[" "](o),o}D[" "]=function(){};var F=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function L(o,c,f){for(const m in o)c.call(f,o[m],m,o)}function _(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function p(o){const c={};for(const f in o)c[f]=o[f];return c}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(o,c){let f,m;for(let x=1;x<arguments.length;x++){m=arguments[x];for(f in m)o[f]=m[f];for(let N=0;N<v.length;N++)f=v[N],Object.prototype.hasOwnProperty.call(m,f)&&(o[f]=m[f])}}function P(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function R(o){l.setTimeout(()=>{throw o},0)}function T(){var o=K;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class It{constructor(){this.h=this.g=null}add(c,f){const m=Kn.get();m.set(c,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Kn=new I(()=>new Si,o=>o.reset());class Si{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Kt,z=!1,K=new It,X=()=>{const o=l.Promise.resolve(void 0);Kt=()=>{o.then(me)}};var me=()=>{for(var o;o=T();){try{o.h.call(o.g)}catch(f){R(f)}var c=Kn;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}z=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Gt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function Yt(o,c){if(Ie.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(F){e:{try{D(c.nodeName);var x=!0;break e}catch{}x=!1}x||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Xt[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Yt.aa.h.call(this)}}k(Yt,Ie);var Xt={2:"touch",3:"pen",4:"mouse"};Yt.prototype.h=function(){Yt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Jt="closure_listenable_"+(1e6*Math.random()|0),D_=0;function N_(o,c,f,m,x){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!m,this.ha=x,this.key=++D_,this.da=this.fa=!1}function so(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function oo(o){this.src=o,this.g={},this.h=0}oo.prototype.add=function(o,c,f,m,x){var N=o.toString();o=this.g[N],o||(o=this.g[N]=[],this.h++);var b=Al(o,c,m,x);return-1<b?(c=o[b],f||(c.fa=!1)):(c=new N_(c,this.src,N,!!m,x),c.fa=f,o.push(c)),c};function Il(o,c){var f=c.type;if(f in o.g){var m=o.g[f],x=Array.prototype.indexOf.call(m,c,void 0),N;(N=0<=x)&&Array.prototype.splice.call(m,x,1),N&&(so(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Al(o,c,f,m){for(var x=0;x<o.length;++x){var N=o[x];if(!N.da&&N.listener==c&&N.capture==!!f&&N.ha==m)return x}return-1}var Sl="closure_lm_"+(1e6*Math.random()|0),Pl={};function If(o,c,f,m,x){if(Array.isArray(c)){for(var N=0;N<c.length;N++)If(o,c[N],f,m,x);return null}return f=Pf(f),o&&o[Jt]?o.K(c,f,h(m)?!!m.capture:!1,x):L_(o,c,f,!1,m,x)}function L_(o,c,f,m,x,N){if(!c)throw Error("Invalid event type");var b=h(x)?!!x.capture:!!x,le=Rl(o);if(le||(o[Sl]=le=new oo(o)),f=le.add(c,f,m,b,N),f.proxy)return f;if(m=M_(),f.proxy=m,m.src=o,m.listener=f,o.addEventListener)Gt||(x=b),x===void 0&&(x=!1),o.addEventListener(c.toString(),m,x);else if(o.attachEvent)o.attachEvent(Sf(c.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function M_(){function o(f){return c.call(o.src,o.listener,f)}const c=O_;return o}function Af(o,c,f,m,x){if(Array.isArray(c))for(var N=0;N<c.length;N++)Af(o,c[N],f,m,x);else m=h(m)?!!m.capture:!!m,f=Pf(f),o&&o[Jt]?(o=o.i,c=String(c).toString(),c in o.g&&(N=o.g[c],f=Al(N,f,m,x),-1<f&&(so(N[f]),Array.prototype.splice.call(N,f,1),N.length==0&&(delete o.g[c],o.h--)))):o&&(o=Rl(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Al(c,f,m,x)),(f=-1<o?c[o]:null)&&Cl(f))}function Cl(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Jt])Il(c.i,o);else{var f=o.type,m=o.proxy;c.removeEventListener?c.removeEventListener(f,m,o.capture):c.detachEvent?c.detachEvent(Sf(f),m):c.addListener&&c.removeListener&&c.removeListener(m),(f=Rl(c))?(Il(f,o),f.h==0&&(f.src=null,c[Sl]=null)):so(o)}}}function Sf(o){return o in Pl?Pl[o]:Pl[o]="on"+o}function O_(o,c){if(o.da)o=!0;else{c=new Yt(c,this);var f=o.listener,m=o.ha||o.src;o.fa&&Cl(o),o=f.call(m,c)}return o}function Rl(o){return o=o[Sl],o instanceof oo?o:null}var kl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pf(o){return typeof o=="function"?o:(o[kl]||(o[kl]=function(c){return o.handleEvent(c)}),o[kl])}function We(){ae.call(this),this.i=new oo(this),this.M=this,this.F=null}k(We,ae),We.prototype[Jt]=!0,We.prototype.removeEventListener=function(o,c,f,m){Af(this,o,c,f,m)};function et(o,c){var f,m=o.F;if(m)for(f=[];m;m=m.F)f.push(m);if(o=o.M,m=c.type||c,typeof c=="string")c=new Ie(c,o);else if(c instanceof Ie)c.target=c.target||o;else{var x=c;c=new Ie(m,o),E(c,x)}if(x=!0,f)for(var N=f.length-1;0<=N;N--){var b=c.g=f[N];x=ao(b,m,!0,c)&&x}if(b=c.g=o,x=ao(b,m,!0,c)&&x,x=ao(b,m,!1,c)&&x,f)for(N=0;N<f.length;N++)b=c.g=f[N],x=ao(b,m,!1,c)&&x}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],m=0;m<f.length;m++)so(f[m]);delete o.g[c],o.h--}}this.F=null},We.prototype.K=function(o,c,f,m){return this.i.add(String(o),c,!1,f,m)},We.prototype.L=function(o,c,f,m){return this.i.add(String(o),c,!0,f,m)};function ao(o,c,f,m){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var x=!0,N=0;N<c.length;++N){var b=c[N];if(b&&!b.da&&b.capture==f){var le=b.listener,Oe=b.ha||b.src;b.fa&&Il(o.i,b),x=le.call(Oe,m)!==!1&&x}}return x&&!m.defaultPrevented}function Cf(o,c,f){if(typeof o=="function")f&&(o=y(o,f));else if(o&&typeof o.handleEvent=="function")o=y(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Rf(o){o.g=Cf(()=>{o.g=null,o.i&&(o.i=!1,Rf(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class F_ extends ae{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Rf(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pi(o){ae.call(this),this.h=o,this.g={}}k(Pi,ae);var kf=[];function xf(o){L(o.g,function(c,f){this.g.hasOwnProperty(f)&&Cl(c)},o),o.g={}}Pi.prototype.N=function(){Pi.aa.N.call(this),xf(this)},Pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xl=l.JSON.stringify,j_=l.JSON.parse,U_=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Vl(){}Vl.prototype.h=null;function Vf(o){return o.h||(o.h=o.i())}function Df(){}var Ci={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dl(){Ie.call(this,"d")}k(Dl,Ie);function Nl(){Ie.call(this,"c")}k(Nl,Ie);var Gn={},Nf=null;function lo(){return Nf=Nf||new We}Gn.La="serverreachability";function Lf(o){Ie.call(this,Gn.La,o)}k(Lf,Ie);function Ri(o){const c=lo();et(c,new Lf(c))}Gn.STAT_EVENT="statevent";function Mf(o,c){Ie.call(this,Gn.STAT_EVENT,o),this.stat=c}k(Mf,Ie);function tt(o){const c=lo();et(c,new Mf(c,o))}Gn.Ma="timingevent";function Of(o,c){Ie.call(this,Gn.Ma,o),this.size=c}k(Of,Ie);function ki(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function xi(){this.g=!0}xi.prototype.xa=function(){this.g=!1};function b_(o,c,f,m,x,N){o.info(function(){if(o.g)if(N)for(var b="",le=N.split("&"),Oe=0;Oe<le.length;Oe++){var re=le[Oe].split("=");if(1<re.length){var He=re[0];re=re[1];var qe=He.split("_");b=2<=qe.length&&qe[1]=="type"?b+(He+"="+re+"&"):b+(He+"=redacted&")}}else b=null;else b=N;return"XMLHTTP REQ ("+m+") [attempt "+x+"]: "+c+`
`+f+`
`+b})}function z_(o,c,f,m,x,N,b){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+x+"]: "+c+`
`+f+`
`+N+" "+b})}function Sr(o,c,f,m){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+$_(o,f)+(m?" "+m:"")})}function B_(o,c){o.info(function(){return"TIMEOUT: "+c})}xi.prototype.info=function(){};function $_(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var m=f[o];if(!(2>m.length)){var x=m[1];if(Array.isArray(x)&&!(1>x.length)){var N=x[0];if(N!="noop"&&N!="stop"&&N!="close")for(var b=1;b<x.length;b++)x[b]=""}}}}return xl(f)}catch{return c}}var uo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ff={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ll;function co(){}k(co,Vl),co.prototype.g=function(){return new XMLHttpRequest},co.prototype.i=function(){return{}},Ll=new co;function yn(o,c,f,m){this.j=o,this.i=c,this.l=f,this.R=m||1,this.U=new Pi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jf}function jf(){this.i=null,this.g="",this.h=!1}var Uf={},Ml={};function Ol(o,c,f){o.L=1,o.v=mo(Zt(c)),o.m=f,o.P=!0,bf(o,null)}function bf(o,c){o.F=Date.now(),ho(o),o.A=Zt(o.v);var f=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),ed(f.i,"t",m),o.C=0,f=o.j.J,o.h=new jf,o.g=vd(o.j,f?c:null,!o.m),0<o.O&&(o.M=new F_(y(o.Y,o,o.g),o.O)),c=o.U,f=o.g,m=o.ca;var x="readystatechange";Array.isArray(x)||(x&&(kf[0]=x.toString()),x=kf);for(var N=0;N<x.length;N++){var b=If(f,x[N],m||c.handleEvent,!1,c.h||c);if(!b)break;c.g[b.key]=b}c=o.H?p(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Ri(),b_(o.i,o.u,o.A,o.l,o.R,o.m)}yn.prototype.ca=function(o){o=o.target;const c=this.M;c&&en(o)==3?c.j():this.Y(o)},yn.prototype.Y=function(o){try{if(o==this.g)e:{const qe=en(this.g);var c=this.g.Ba();const Rr=this.g.Z();if(!(3>qe)&&(qe!=3||this.g&&(this.h.h||this.g.oa()||ad(this.g)))){this.J||qe!=4||c==7||(c==8||0>=Rr?Ri(3):Ri(2)),Fl(this);var f=this.g.Z();this.X=f;t:if(zf(this)){var m=ad(this.g);o="";var x=m.length,N=en(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yn(this),Vi(this);var b="";break t}this.h.i=new l.TextDecoder}for(c=0;c<x;c++)this.h.h=!0,o+=this.h.i.decode(m[c],{stream:!(N&&c==x-1)});m.length=0,this.h.g+=o,this.C=0,b=this.h.g}else b=this.g.oa();if(this.o=f==200,z_(this.i,this.u,this.A,this.l,this.R,qe,f),this.o){if(this.T&&!this.K){t:{if(this.g){var le,Oe=this.g;if((le=Oe.g?Oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(le)){var re=le;break t}}re=null}if(f=re)Sr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jl(this,f);else{this.o=!1,this.s=3,tt(12),Yn(this),Vi(this);break e}}if(this.P){f=!0;let Vt;for(;!this.J&&this.C<b.length;)if(Vt=W_(this,b),Vt==Ml){qe==4&&(this.s=4,tt(14),f=!1),Sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==Uf){this.s=4,tt(15),Sr(this.i,this.l,b,"[Invalid Chunk]"),f=!1;break}else Sr(this.i,this.l,Vt,null),jl(this,Vt);if(zf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||b.length!=0||this.h.h||(this.s=1,tt(16),f=!1),this.o=this.o&&f,!f)Sr(this.i,this.l,b,"[Invalid Chunked Response]"),Yn(this),Vi(this);else if(0<b.length&&!this.W){this.W=!0;var He=this.j;He.g==this&&He.ba&&!He.M&&(He.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Wl(He),He.M=!0,tt(11))}}else Sr(this.i,this.l,b,null),jl(this,b);qe==4&&Yn(this),this.o&&!this.J&&(qe==4?pd(this.j,this):(this.o=!1,ho(this)))}else a0(this.g),f==400&&0<b.indexOf("Unknown SID")?(this.s=3,tt(12)):(this.s=0,tt(13)),Yn(this),Vi(this)}}}catch{}finally{}};function zf(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function W_(o,c){var f=o.C,m=c.indexOf(`
`,f);return m==-1?Ml:(f=Number(c.substring(f,m)),isNaN(f)?Uf:(m+=1,m+f>c.length?Ml:(c=c.slice(m,m+f),o.C=m+f,c)))}yn.prototype.cancel=function(){this.J=!0,Yn(this)};function ho(o){o.S=Date.now()+o.I,Bf(o,o.I)}function Bf(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ki(y(o.ba,o),c)}function Fl(o){o.B&&(l.clearTimeout(o.B),o.B=null)}yn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(B_(this.i,this.A),this.L!=2&&(Ri(),tt(17)),Yn(this),this.s=2,Vi(this)):Bf(this,this.S-o)};function Vi(o){o.j.G==0||o.J||pd(o.j,o)}function Yn(o){Fl(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,xf(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function jl(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||Ul(f.h,o))){if(!o.K&&Ul(f.h,o)&&f.G==3){try{var m=f.Da.g.parse(c)}catch{m=null}if(Array.isArray(m)&&m.length==3){var x=m;if(x[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)wo(f),_o(f);else break e;$l(f),tt(18)}}else f.za=x[1],0<f.za-f.T&&37500>x[2]&&f.F&&f.v==0&&!f.C&&(f.C=ki(y(f.Za,f),6e3));if(1>=Hf(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Jn(f,11)}else if((o.K||f.g==o)&&wo(f),!w(c))for(x=f.Da.g.parse(c),c=0;c<x.length;c++){let re=x[c];if(f.T=re[0],re=re[1],f.G==2)if(re[0]=="c"){f.K=re[1],f.ia=re[2];const He=re[3];He!=null&&(f.la=He,f.j.info("VER="+f.la));const qe=re[4];qe!=null&&(f.Aa=qe,f.j.info("SVER="+f.Aa));const Rr=re[5];Rr!=null&&typeof Rr=="number"&&0<Rr&&(m=1.5*Rr,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const Vt=o.g;if(Vt){const Io=Vt.g?Vt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Io){var N=m.h;N.g||Io.indexOf("spdy")==-1&&Io.indexOf("quic")==-1&&Io.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(bl(N,N.h),N.h=null))}if(m.D){const Hl=Vt.g?Vt.g.getResponseHeader("X-HTTP-Session-Id"):null;Hl&&(m.ya=Hl,ce(m.I,m.D,Hl))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var b=o;if(m.qa=yd(m,m.J?m.ia:null,m.W),b.K){qf(m.h,b);var le=b,Oe=m.L;Oe&&(le.I=Oe),le.B&&(Fl(le),ho(le)),m.g=b}else fd(m);0<f.i.length&&Eo(f)}else re[0]!="stop"&&re[0]!="close"||Jn(f,7);else f.G==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?Jn(f,7):Bl(f):re[0]!="noop"&&f.l&&f.l.ta(re),f.v=0)}}Ri(4)}catch{}}var H_=class{constructor(o,c){this.g=o,this.map=c}};function $f(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wf(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Hf(o){return o.h?1:o.g?o.g.size:0}function Ul(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function bl(o,c){o.g?o.g.add(c):o.h=c}function qf(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}$f.prototype.cancel=function(){if(this.i=Qf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Qf(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function q_(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,m=0;m<f;m++)c.push(o[m]);return c}c=[],f=0;for(m in o)c[f++]=o[m];return c}function Q_(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const m in o)c[f++]=m;return c}}}function Kf(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=Q_(o),m=q_(o),x=m.length,N=0;N<x;N++)c.call(void 0,m[N],f&&f[N],o)}var Gf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function K_(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var m=o[f].indexOf("="),x=null;if(0<=m){var N=o[f].substring(0,m);x=o[f].substring(m+1)}else N=o[f];c(N,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Xn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Xn){this.h=o.h,fo(this,o.j),this.o=o.o,this.g=o.g,po(this,o.s),this.l=o.l;var c=o.i,f=new Li;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Yf(this,f),this.m=o.m}else o&&(c=String(o).match(Gf))?(this.h=!1,fo(this,c[1]||"",!0),this.o=Di(c[2]||""),this.g=Di(c[3]||"",!0),po(this,c[4]),this.l=Di(c[5]||"",!0),Yf(this,c[6]||"",!0),this.m=Di(c[7]||"")):(this.h=!1,this.i=new Li(null,this.h))}Xn.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Ni(c,Xf,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Ni(c,Xf,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Ni(f,f.charAt(0)=="/"?X_:Y_,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Ni(f,Z_)),o.join("")};function Zt(o){return new Xn(o)}function fo(o,c,f){o.j=f?Di(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function po(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Yf(o,c,f){c instanceof Li?(o.i=c,e0(o.i,o.h)):(f||(c=Ni(c,J_)),o.i=new Li(c,o.h))}function ce(o,c,f){o.i.set(c,f)}function mo(o){return ce(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Di(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ni(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,G_),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function G_(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Xf=/[#\/\?@]/g,Y_=/[#\?:]/g,X_=/[#\?]/g,J_=/[#\?@]/g,Z_=/#/g;function Li(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function vn(o){o.g||(o.g=new Map,o.h=0,o.i&&K_(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=Li.prototype,t.add=function(o,c){vn(this),this.i=null,o=Pr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function Jf(o,c){vn(o),c=Pr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Zf(o,c){return vn(o),c=Pr(o,c),o.g.has(c)}t.forEach=function(o,c){vn(this),this.g.forEach(function(f,m){f.forEach(function(x){o.call(c,x,m,this)},this)},this)},t.na=function(){vn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let m=0;m<c.length;m++){const x=o[m];for(let N=0;N<x.length;N++)f.push(c[m])}return f},t.V=function(o){vn(this);let c=[];if(typeof o=="string")Zf(this,o)&&(c=c.concat(this.g.get(Pr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},t.set=function(o,c){return vn(this),this.i=null,o=Pr(this,o),Zf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function ed(o,c,f){Jf(o,c),0<f.length&&(o.i=null,o.g.set(Pr(o,c),V(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var m=c[f];const N=encodeURIComponent(String(m)),b=this.V(m);for(m=0;m<b.length;m++){var x=N;b[m]!==""&&(x+="="+encodeURIComponent(String(b[m]))),o.push(x)}}return this.i=o.join("&")};function Pr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function e0(o,c){c&&!o.j&&(vn(o),o.i=null,o.g.forEach(function(f,m){var x=m.toLowerCase();m!=x&&(Jf(this,m),ed(this,x,f))},o)),o.j=c}function t0(o,c){const f=new xi;if(l.Image){const m=new Image;m.onload=A(_n,f,"TestLoadImage: loaded",!0,c,m),m.onerror=A(_n,f,"TestLoadImage: error",!1,c,m),m.onabort=A(_n,f,"TestLoadImage: abort",!1,c,m),m.ontimeout=A(_n,f,"TestLoadImage: timeout",!1,c,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else c(!1)}function n0(o,c){const f=new xi,m=new AbortController,x=setTimeout(()=>{m.abort(),_n(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:m.signal}).then(N=>{clearTimeout(x),N.ok?_n(f,"TestPingServer: ok",!0,c):_n(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(x),_n(f,"TestPingServer: error",!1,c)})}function _n(o,c,f,m,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),m(f)}catch{}}function r0(){this.g=new U_}function i0(o,c,f){const m=f||"";try{Kf(o,function(x,N){let b=x;h(x)&&(b=xl(x)),c.push(m+N+"="+encodeURIComponent(b))})}catch(x){throw c.push(m+"type="+encodeURIComponent("_badmap")),x}}function go(o){this.l=o.Ub||null,this.j=o.eb||!1}k(go,Vl),go.prototype.g=function(){return new yo(this.l,this.j)},go.prototype.i=function(o){return function(){return o}}({});function yo(o,c){We.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(yo,We),t=yo.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Oi(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mi(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;td(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function td(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Mi(this):Oi(this),this.readyState==3&&td(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Mi(this))},t.Qa=function(o){this.g&&(this.response=o,Mi(this))},t.ga=function(){this.g&&Mi(this)};function Mi(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Oi(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Oi(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(yo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function nd(o){let c="";return L(o,function(f,m){c+=m,c+=":",c+=f,c+=`\r
`}),c}function zl(o,c,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=nd(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):ce(o,c,f))}function Ee(o){We.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Ee,We);var s0=/^https?$/i,o0=["POST","PUT"];t=Ee.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ll.g(),this.v=this.o?Vf(this.o):Vf(Ll),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(N){rd(this,N);return}if(o=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var x in m)f.set(x,m[x]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const N of m.keys())f.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(N=>N.toLowerCase()=="content-type"),x=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(o0,c,void 0))||m||x||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,b]of f)this.g.setRequestHeader(N,b);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{od(this),this.u=!0,this.g.send(o),this.u=!1}catch(N){rd(this,N)}};function rd(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,id(o),vo(o)}function id(o){o.A||(o.A=!0,et(o,"complete"),et(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,et(this,"complete"),et(this,"abort"),vo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vo(this,!0)),Ee.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sd(this):this.bb())},t.bb=function(){sd(this)};function sd(o){if(o.h&&typeof a<"u"&&(!o.v[1]||en(o)!=4||o.Z()!=2)){if(o.u&&en(o)==4)Cf(o.Ea,0,o);else if(et(o,"readystatechange"),en(o)==4){o.h=!1;try{const b=o.Z();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var m;if(m=b===0){var x=String(o.D).match(Gf)[1]||null;!x&&l.self&&l.self.location&&(x=l.self.location.protocol.slice(0,-1)),m=!s0.test(x?x.toLowerCase():"")}f=m}if(f)et(o,"complete"),et(o,"success");else{o.m=6;try{var N=2<en(o)?o.g.statusText:""}catch{N=""}o.l=N+" ["+o.Z()+"]",id(o)}}finally{vo(o)}}}}function vo(o,c){if(o.g){od(o);const f=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||et(o,"ready");try{f.onreadystatechange=m}catch{}}}function od(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function en(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<en(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),j_(c)}};function ad(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function a0(o){const c={};o=(o.g&&2<=en(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(w(o[m]))continue;var f=P(o[m]);const x=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const N=c[x]||[];c[x]=N,N.push(f)}_(c,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fi(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function ld(o){this.Aa=0,this.i=[],this.j=new xi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fi("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fi("baseRetryDelayMs",5e3,o),this.cb=Fi("retryDelaySeedMs",1e4,o),this.Wa=Fi("forwardChannelMaxRetries",2,o),this.wa=Fi("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new $f(o&&o.concurrentRequestLimit),this.Da=new r0,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ld.prototype,t.la=8,t.G=1,t.connect=function(o,c,f,m){tt(0),this.W=o,this.H=c||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=yd(this,null,this.W),Eo(this)};function Bl(o){if(ud(o),o.G==3){var c=o.U++,f=Zt(o.I);if(ce(f,"SID",o.K),ce(f,"RID",c),ce(f,"TYPE","terminate"),ji(o,f),c=new yn(o,o.j,c),c.L=2,c.v=mo(Zt(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=vd(c.j,null),c.g.ea(c.v)),c.F=Date.now(),ho(c)}gd(o)}function _o(o){o.g&&(Wl(o),o.g.cancel(),o.g=null)}function ud(o){_o(o),o.u&&(l.clearTimeout(o.u),o.u=null),wo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Eo(o){if(!Wf(o.h)&&!o.s){o.s=!0;var c=o.Ga;Kt||X(),z||(Kt(),z=!0),K.add(c,o),o.B=0}}function l0(o,c){return Hf(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ki(y(o.Ga,o,c),md(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const x=new yn(this,this.j,o);let N=this.o;if(this.S&&(N?(N=p(N),E(N,this.S)):N=this.S),this.m!==null||this.O||(x.H=N,N=null),this.P)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(c+=m,4096<c){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=hd(this,x,c),f=Zt(this.I),ce(f,"RID",o),ce(f,"CVER",22),this.D&&ce(f,"X-HTTP-Session-Id",this.D),ji(this,f),N&&(this.O?c="headers="+encodeURIComponent(String(nd(N)))+"&"+c:this.m&&zl(f,this.m,N)),bl(this.h,x),this.Ua&&ce(f,"TYPE","init"),this.P?(ce(f,"$req",c),ce(f,"SID","null"),x.T=!0,Ol(x,f,null)):Ol(x,f,c),this.G=2}}else this.G==3&&(o?cd(this,o):this.i.length==0||Wf(this.h)||cd(this))};function cd(o,c){var f;c?f=c.l:f=o.U++;const m=Zt(o.I);ce(m,"SID",o.K),ce(m,"RID",f),ce(m,"AID",o.T),ji(o,m),o.m&&o.o&&zl(m,o.m,o.o),f=new yn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=hd(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),bl(o.h,f),Ol(f,m,c)}function ji(o,c){o.H&&L(o.H,function(f,m){ce(c,m,f)}),o.l&&Kf({},function(f,m){ce(c,m,f)})}function hd(o,c,f){f=Math.min(o.i.length,f);var m=o.l?y(o.l.Na,o.l,o):null;e:{var x=o.i;let N=-1;for(;;){const b=["count="+f];N==-1?0<f?(N=x[0].g,b.push("ofs="+N)):N=0:b.push("ofs="+N);let le=!0;for(let Oe=0;Oe<f;Oe++){let re=x[Oe].g;const He=x[Oe].map;if(re-=N,0>re)N=Math.max(0,x[Oe].g-100),le=!1;else try{i0(He,b,"req"+re+"_")}catch{m&&m(He)}}if(le){m=b.join("&");break e}}}return o=o.i.splice(0,f),c.D=o,m}function fd(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;Kt||X(),z||(Kt(),z=!0),K.add(c,o),o.v=0}}function $l(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ki(y(o.Fa,o),md(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,dd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ki(y(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tt(10),_o(this),dd(this))};function Wl(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function dd(o){o.g=new yn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Zt(o.qa);ce(c,"RID","rpc"),ce(c,"SID",o.K),ce(c,"AID",o.T),ce(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&ce(c,"TO",o.ja),ce(c,"TYPE","xmlhttp"),ji(o,c),o.m&&o.o&&zl(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=mo(Zt(c)),f.m=null,f.P=!0,bf(f,o)}t.Za=function(){this.C!=null&&(this.C=null,_o(this),$l(this),tt(19))};function wo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function pd(o,c){var f=null;if(o.g==c){wo(o),Wl(o),o.g=null;var m=2}else if(Ul(o.h,c))f=c.D,qf(o.h,c),m=1;else return;if(o.G!=0){if(c.o)if(m==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var x=o.B;m=lo(),et(m,new Of(m,f)),Eo(o)}else fd(o);else if(x=c.s,x==3||x==0&&0<c.X||!(m==1&&l0(o,c)||m==2&&$l(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),x){case 1:Jn(o,5);break;case 4:Jn(o,10);break;case 3:Jn(o,6);break;default:Jn(o,2)}}}function md(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function Jn(o,c){if(o.j.info("Error code "+c),c==2){var f=y(o.fb,o),m=o.Xa;const x=!m;m=new Xn(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||fo(m,"https"),mo(m),x?t0(m.toString(),f):n0(m.toString(),f)}else tt(2);o.G=0,o.l&&o.l.sa(c),gd(o),ud(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function gd(o){if(o.G=0,o.ka=[],o.l){const c=Qf(o.h);(c.length!=0||o.i.length!=0)&&(M(o.ka,c),M(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function yd(o,c,f){var m=f instanceof Xn?Zt(f):new Xn(f);if(m.g!="")c&&(m.g=c+"."+m.g),po(m,m.s);else{var x=l.location;m=x.protocol,c=c?c+"."+x.hostname:x.hostname,x=+x.port;var N=new Xn(null);m&&fo(N,m),c&&(N.g=c),x&&po(N,x),f&&(N.l=f),m=N}return f=o.D,c=o.ya,f&&c&&ce(m,f,c),ce(m,"VER",o.la),ji(o,m),m}function vd(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Ee(new go({eb:f})):new Ee(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _d(){}t=_d.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function To(){}To.prototype.g=function(o,c){return new mt(o,c)};function mt(o,c){We.call(this),this.g=new ld(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!w(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!w(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Cr(this)}k(mt,We),mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mt.prototype.close=function(){Bl(this.g)},mt.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=xl(o),o=f);c.i.push(new H_(c.Ya++,o)),c.G==3&&Eo(c)},mt.prototype.N=function(){this.g.l=null,delete this.j,Bl(this.g),delete this.g,mt.aa.N.call(this)};function Ed(o){Dl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const f in c){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}k(Ed,Dl);function wd(){Nl.call(this),this.status=1}k(wd,Nl);function Cr(o){this.g=o}k(Cr,_d),Cr.prototype.ua=function(){et(this.g,"a")},Cr.prototype.ta=function(o){et(this.g,new Ed(o))},Cr.prototype.sa=function(o){et(this.g,new wd)},Cr.prototype.ra=function(){et(this.g,"b")},To.prototype.createWebChannel=To.prototype.g,mt.prototype.send=mt.prototype.o,mt.prototype.open=mt.prototype.m,mt.prototype.close=mt.prototype.close,cv=function(){return new To},uv=function(){return lo()},lv=Gn,Sc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uo.NO_ERROR=0,uo.TIMEOUT=8,uo.HTTP_ERROR=6,ra=uo,Ff.COMPLETE="complete",av=Ff,Df.EventType=Ci,Ci.OPEN="a",Ci.CLOSE="b",Ci.ERROR="c",Ci.MESSAGE="d",We.prototype.listen=We.prototype.K,Ji=Df,Ee.prototype.listenOnce=Ee.prototype.L,Ee.prototype.getLastError=Ee.prototype.Ka,Ee.prototype.getLastErrorCode=Ee.prototype.Ba,Ee.prototype.getStatus=Ee.prototype.Z,Ee.prototype.getResponseJson=Ee.prototype.Oa,Ee.prototype.getResponseText=Ee.prototype.oa,Ee.prototype.send=Ee.prototype.ea,Ee.prototype.setWithCredentials=Ee.prototype.Ha,ov=Ee}).apply(typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{});const $p="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ei="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new Zy("@firebase/firestore");function Qi(){return gr.logLevel}function W(t,...e){if(gr.logLevel<=te.DEBUG){const n=e.map(bh);gr.debug(`Firestore (${Ei}): ${t}`,...n)}}function pn(t,...e){if(gr.logLevel<=te.ERROR){const n=e.map(bh);gr.error(`Firestore (${Ei}): ${t}`,...n)}}function oi(t,...e){if(gr.logLevel<=te.WARN){const n=e.map(bh);gr.warn(`Firestore (${Ei}): ${t}`,...n)}}function bh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${Ei}) INTERNAL ASSERTION FAILED: `+t;throw pn(e),new Error(e)}function oe(t,e){t||Q()}function Y(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends _i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ET{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ye.UNAUTHENTICATED))}shutdown(){}}class wT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class TT{constructor(e){this.t=e,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new cr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new cr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string"),new hv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string"),new Ye(e)}}class IT{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class AT{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new IT(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ST{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){oe(this.o===void 0);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string"),this.R=n.token,new ST(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=CT(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function ai(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ve(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.timestamp=e}static fromTimestamp(e){return new G(e)}static min(){return new G(new Ve(0,0))}static max(){return new G(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ls.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ls?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class fe extends Ls{construct(e,n,r){return new fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new fe(n)}static emptyPath(){return new fe([])}}const RT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ue extends Ls{construct(e,n,r){return new Ue(e,n,r)}static isValidIdentifier(e){return RT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ue.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ue(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new B(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new B(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new B(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ue(n)}static emptyPath(){return new Ue([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(fe.fromString(e))}static fromName(e){return new q(fe.fromString(e).popFirst(5))}static empty(){return new q(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new fe(e.slice()))}}function kT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=G.fromTimestamp(r===1e9?new Ve(n+1,0):new Ve(n,r));return new zn(i,q.empty(),e)}function xT(t){return new zn(t.readTime,t.key,-1)}class zn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zn(G.min(),q.empty(),-1)}static max(){return new zn(G.max(),q.empty(),-1)}}function VT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==DT)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},u=>r(u))}),a=!0,s===i&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(i=>i?j.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new j((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(d=>{a[h]=d,++l,l===s&&r(a)},d=>i(d))}})}static doWhile(e,n){return new j((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function LT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}zh.oe=-1;function al(t){return t==null}function Fa(t){return t===0&&1/t==-1/0}function MT(t){return typeof t=="number"&&Number.isInteger(t)&&!Fa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Tr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e,n){this.comparator=e,this.root=n||je.EMPTY}insert(e,n){return new _e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,je.BLACK,null,null))}remove(e){return new _e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bo(this.root,e,this.comparator,!0)}}class Bo{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class je{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??je.RED,this.left=i??je.EMPTY,this.right=s??je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new je(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return je.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}je.EMPTY=null,je.RED=!0,je.BLACK=!1;je.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,i,s){return this}insert(e,n,r){return new je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new _e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hp(this.data.getIterator())}getIteratorFrom(e){return new Hp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class Hp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.fields=e,e.sort(Ue.comparator)}static empty(){return new vt([])}unionWith(e){let n=new ze(Ue.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ai(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pv("Invalid base64 string: "+s):s}}(e);return new $e(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new $e(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$e.EMPTY_BYTE_STRING=new $e("");const OT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bn(t){if(oe(!!t),typeof t=="string"){let e=0;const n=OT.exec(t);if(oe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yr(t){return typeof t=="string"?$e.fromBase64String(t):$e.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function $h(t){const e=t.mapValue.fields.__previous_value__;return Bh(e)?$h(e):e}function Ms(t){const e=Bn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n,r,i,s,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class Os{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Os("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Os&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o={mapValue:{}};function vr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bh(t)?4:UT(t)?9007199254740991:jT(t)?10:11:Q()}function Qt(t,e){if(t===e)return!0;const n=vr(t);if(n!==vr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ms(t).isEqual(Ms(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Bn(i.timestampValue),l=Bn(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return yr(i.bytesValue).isEqual(yr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ae(i.geoPointValue.latitude)===Ae(s.geoPointValue.latitude)&&Ae(i.geoPointValue.longitude)===Ae(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ae(i.integerValue)===Ae(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Ae(i.doubleValue),l=Ae(s.doubleValue);return a===l?Fa(a)===Fa(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ai(t.arrayValue.values||[],e.arrayValue.values||[],Qt);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Wp(a)!==Wp(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Qt(a[u],l[u])))return!1;return!0}(t,e);default:return Q()}}function Fs(t,e){return(t.values||[]).find(n=>Qt(n,e))!==void 0}function li(t,e){if(t===e)return 0;const n=vr(t),r=vr(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Ae(s.integerValue||s.doubleValue),u=Ae(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return qp(t.timestampValue,e.timestampValue);case 4:return qp(Ms(t),Ms(e));case 5:return ie(t.stringValue,e.stringValue);case 6:return function(s,a){const l=yr(s),u=yr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=ie(l[h],u[h]);if(d!==0)return d}return ie(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=ie(Ae(s.latitude),Ae(a.latitude));return l!==0?l:ie(Ae(s.longitude),Ae(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Qp(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,u,h,d;const g=s.fields||{},y=a.fields||{},A=(l=g.value)===null||l===void 0?void 0:l.arrayValue,k=(u=y.value)===null||u===void 0?void 0:u.arrayValue,V=ie(((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0,((d=k==null?void 0:k.values)===null||d===void 0?void 0:d.length)||0);return V!==0?V:Qp(A,k)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===$o.mapValue&&a===$o.mapValue)return 0;if(s===$o.mapValue)return 1;if(a===$o.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const y=ie(u[g],d[g]);if(y!==0)return y;const A=li(l[u[g]],h[d[g]]);if(A!==0)return A}return ie(u.length,d.length)}(t.mapValue,e.mapValue);default:throw Q()}}function qp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=Bn(t),r=Bn(e),i=ie(n.seconds,r.seconds);return i!==0?i:ie(n.nanos,r.nanos)}function Qp(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=li(n[i],r[i]);if(s)return s}return ie(n.length,r.length)}function ui(t){return Pc(t)}function Pc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Bn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return yr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Pc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Pc(n.fields[a])}`;return i+"}"}(t.mapValue):Q()}function Kp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Cc(t){return!!t&&"integerValue"in t}function Wh(t){return!!t&&"arrayValue"in t}function Gp(t){return!!t&&"nullValue"in t}function Yp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ia(t){return!!t&&"mapValue"in t}function jT(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function hs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Tr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=hs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function UT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.value=e}static empty(){return new lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ia(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hs(n)}setAll(e){let n=Ue.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=hs(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ia(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ia(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Tr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new lt(hs(this.value))}}function mv(t){const e=[];return Tr(t.fields,(n,r)=>{const i=new Ue([n]);if(ia(r)){const s=mv(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new vt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Je(e,0,G.min(),G.min(),G.min(),lt.empty(),0)}static newFoundDocument(e,n,r,i){return new Je(e,1,n,G.min(),r,i,0)}static newNoDocument(e,n){return new Je(e,2,n,G.min(),G.min(),lt.empty(),0)}static newUnknownDocument(e,n){return new Je(e,3,n,G.min(),G.min(),lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Je&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Je(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n){this.position=e,this.inclusive=n}}function Xp(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(a.referenceValue),n.key):r=li(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Jp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n="asc"){this.field=e,this.dir=n}}function bT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{}class Re extends gv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new BT(e,n,r):n==="array-contains"?new HT(e,r):n==="in"?new qT(e,r):n==="not-in"?new QT(e,r):n==="array-contains-any"?new KT(e,r):new Re(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new $T(e,r):new WT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(li(n,this.value)):n!==null&&vr(this.value)===vr(n)&&this.matchesComparison(li(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ut extends gv{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ut(e,n)}matches(e){return yv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yv(t){return t.op==="and"}function vv(t){return zT(t)&&yv(t)}function zT(t){for(const e of t.filters)if(e instanceof Ut)return!1;return!0}function Rc(t){if(t instanceof Re)return t.field.canonicalString()+t.op.toString()+ui(t.value);if(vv(t))return t.filters.map(e=>Rc(e)).join(",");{const e=t.filters.map(n=>Rc(n)).join(",");return`${t.op}(${e})`}}function _v(t,e){return t instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.field.isEqual(i.field)&&Qt(r.value,i.value)}(t,e):t instanceof Ut?function(r,i){return i instanceof Ut&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&_v(a,i.filters[l]),!0):!1}(t,e):void Q()}function Ev(t){return t instanceof Re?function(n){return`${n.field.canonicalString()} ${n.op} ${ui(n.value)}`}(t):t instanceof Ut?function(n){return n.op.toString()+" {"+n.getFilters().map(Ev).join(" ,")+"}"}(t):"Filter"}class BT extends Re{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class $T extends Re{constructor(e,n){super(e,"in",n),this.keys=wv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class WT extends Re{constructor(e,n){super(e,"not-in",n),this.keys=wv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function wv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class HT extends Re{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wh(n)&&Fs(n.arrayValue,this.value)}}class qT extends Re{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fs(this.value.arrayValue,n)}}class QT extends Re{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fs(this.value.arrayValue,n)}}class KT extends Re{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Fs(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.ue=null}}function Zp(t,e=null,n=[],r=[],i=null,s=null,a=null){return new GT(t,e,n,r,i,s,a)}function Hh(t){const e=Y(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),al(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ui(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ui(r)).join(",")),e.ue=n}return e.ue}function qh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_v(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Jp(t.startAt,e.startAt)&&Jp(t.endAt,e.endAt)}function kc(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function YT(t,e,n,r,i,s,a,l){return new wi(t,e,n,r,i,s,a,l)}function Qh(t){return new wi(t)}function em(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Tv(t){return t.collectionGroup!==null}function fs(t){const e=Y(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ze(Ue.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new js(s,r))}),n.has(Ue.keyField().canonicalString())||e.ce.push(new js(Ue.keyField(),r))}return e.ce}function Ht(t){const e=Y(t);return e.le||(e.le=XT(e,fs(t))),e.le}function XT(t,e){if(t.limitType==="F")return Zp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new js(i.field,s)});const n=t.endAt?new ja(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ja(t.startAt.position,t.startAt.inclusive):null;return Zp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xc(t,e){const n=t.filters.concat([e]);return new wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Vc(t,e,n){return new wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ll(t,e){return qh(Ht(t),Ht(e))&&t.limitType===e.limitType}function Iv(t){return`${Hh(Ht(t))}|lt:${t.limitType}`}function xr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Ev(i)).join(", ")}]`),al(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ui(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ui(i)).join(",")),`Target(${r})`}(Ht(t))}; limitType=${t.limitType})`}function ul(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of fs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,u){const h=Xp(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,fs(r),i)||r.endAt&&!function(a,l,u){const h=Xp(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,fs(r),i))}(t,e)}function JT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Av(t){return(e,n)=>{let r=!1;for(const i of fs(t)){const s=ZT(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ZT(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?li(u,h):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Tr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return dv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=new _e(q.comparator);function mn(){return eI}const Sv=new _e(q.comparator);function Zi(...t){let e=Sv;for(const n of t)e=e.insert(n.key,n);return e}function Pv(t){let e=Sv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function or(){return ds()}function Cv(){return ds()}function ds(){return new Ti(t=>t.toString(),(t,e)=>t.isEqual(e))}const tI=new _e(q.comparator),nI=new ze(q.comparator);function Z(...t){let e=nI;for(const n of t)e=e.add(n);return e}const rI=new ze(ie);function iI(){return rI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fa(e)?"-0":e}}function Rv(t){return{integerValue:""+t}}function kv(t,e){return MT(e)?Rv(e):Kh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this._=void 0}}function sI(t,e,n){return t instanceof Ua?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Bh(s)&&(s=$h(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof ci?Vv(t,e):t instanceof Us?Dv(t,e):function(i,s){const a=xv(i,s),l=tm(a)+tm(i.Pe);return Cc(a)&&Cc(i.Pe)?Rv(l):Kh(i.serializer,l)}(t,e)}function oI(t,e,n){return t instanceof ci?Vv(t,e):t instanceof Us?Dv(t,e):n}function xv(t,e){return t instanceof bs?function(r){return Cc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ua extends cl{}class ci extends cl{constructor(e){super(),this.elements=e}}function Vv(t,e){const n=Nv(e);for(const r of t.elements)n.some(i=>Qt(i,r))||n.push(r);return{arrayValue:{values:n}}}class Us extends cl{constructor(e){super(),this.elements=e}}function Dv(t,e){let n=Nv(e);for(const r of t.elements)n=n.filter(i=>!Qt(i,r));return{arrayValue:{values:n}}}class bs extends cl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function tm(t){return Ae(t.integerValue||t.doubleValue)}function Nv(t){return Wh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n){this.field=e,this.transform=n}}function aI(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ci&&i instanceof ci||r instanceof Us&&i instanceof Us?ai(r.elements,i.elements,Qt):r instanceof bs&&i instanceof bs?Qt(r.Pe,i.Pe):r instanceof Ua&&i instanceof Ua}(t.transform,e.transform)}class lI{constructor(e,n){this.version=e,this.transformResults=n}}class dt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dt}static exists(e){return new dt(void 0,e)}static updateTime(e){return new dt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hl{}function Mv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new fl(t.key,dt.none()):new Ks(t.key,t.data,dt.none());{const n=t.data,r=lt.empty();let i=new ze(Ue.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Qn(t.key,r,new vt(i.toArray()),dt.none())}}function uI(t,e,n){t instanceof Ks?function(i,s,a){const l=i.value.clone(),u=rm(i.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Qn?function(i,s,a){if(!sa(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=rm(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(Ov(i)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ps(t,e,n,r){return t instanceof Ks?function(s,a,l,u){if(!sa(s.precondition,a))return l;const h=s.value.clone(),d=im(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Qn?function(s,a,l,u){if(!sa(s.precondition,a))return l;const h=im(s.fieldTransforms,u,a),d=a.data;return d.setAll(Ov(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,a,l){return sa(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function cI(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=xv(r.transform,i||null);s!=null&&(n===null&&(n=lt.empty()),n.set(r.field,s))}return n||null}function nm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ai(r,i,(s,a)=>aI(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ks extends hl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qn extends hl{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ov(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function rm(t,e,n){const r=new Map;oe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,oI(a,l,n[i]))}return r}function im(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,sI(s,a,e))}return r}class fl extends hl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hI extends hl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&uI(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ps(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ps(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Cv();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const u=Mv(a,l);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Z())}isEqual(e){return this.batchId===e.batchId&&ai(this.mutations,e.mutations,(n,r)=>nm(n,r))&&ai(this.baseMutations,e.baseMutations,(n,r)=>nm(n,r))}}class Gh{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){oe(e.mutations.length===r.length);let i=function(){return tI}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new Gh(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe,ee;function mI(t){switch(t){default:return Q();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function Fv(t){if(t===void 0)return pn("GRPC error has no .code"),O.UNKNOWN;switch(t){case Pe.OK:return O.OK;case Pe.CANCELLED:return O.CANCELLED;case Pe.UNKNOWN:return O.UNKNOWN;case Pe.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Pe.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Pe.INTERNAL:return O.INTERNAL;case Pe.UNAVAILABLE:return O.UNAVAILABLE;case Pe.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Pe.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Pe.NOT_FOUND:return O.NOT_FOUND;case Pe.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Pe.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Pe.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Pe.ABORTED:return O.ABORTED;case Pe.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Pe.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Pe.DATA_LOSS:return O.DATA_LOSS;default:return Q()}}(ee=Pe||(Pe={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=new ur([4294967295,4294967295],0);function sm(t){const e=gI().encode(t),n=new sv;return n.update(e),new Uint8Array(n.digest())}function om(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ur([n,r],0),new ur([i,s],0)]}class Yh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new es(`Invalid padding: ${n}`);if(r<0)throw new es(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new es(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new es(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ur.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ur.fromNumber(r)));return i.compare(yI)===1&&(i=new ur([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=sm(e),[r,i]=om(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Yh(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=sm(e),[r,i]=om(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class es extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Gs.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new dl(G.min(),i,new _e(ie),mn(),Z())}}class Gs{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Gs(r,n,Z(),Z(),Z())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class jv{constructor(e,n){this.targetId=e,this.me=n}}class Uv{constructor(e,n,r=$e.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class am{constructor(){this.fe=0,this.ge=um(),this.pe=$e.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Z(),n=Z(),r=Z();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new Gs(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=um()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class vI{constructor(e){this.Le=e,this.Be=new Map,this.ke=mn(),this.qe=lm(),this.Qe=new _e(ie)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(kc(s))if(r===0){const a=new q(s.path);this.Ue(n,a,Je.newNoDocument(a,G.min()))}else oe(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=yr(r).toUint8Array()}catch(u){if(u instanceof pv)return oi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Yh(a,i,s)}catch(u){return oi(u instanceof es?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const l=this.Je(a);if(l){if(s.current&&kc(l.target)){const u=new q(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Je.newNoDocument(u,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=Z();this.qe.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new dl(e,n,this.Qe,this.ke,r);return this.ke=mn(),this.qe=lm(),this.Qe=new _e(ie),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new am,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ze(ie),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new am),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function lm(){return new _e(q.comparator)}function um(){return new _e(q.comparator)}const _I={asc:"ASCENDING",desc:"DESCENDING"},EI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wI={and:"AND",or:"OR"};class TI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dc(t,e){return t.useProto3Json||al(e)?e:{value:e}}function ba(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function II(t,e){return ba(t,e.toTimestamp())}function qt(t){return oe(!!t),G.fromTimestamp(function(n){const r=Bn(n);return new Ve(r.seconds,r.nanos)}(t))}function Xh(t,e){return Nc(t,e).canonicalString()}function Nc(t,e){const n=function(i){return new fe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function zv(t){const e=fe.fromString(t);return oe(qv(e)),e}function Lc(t,e){return Xh(t.databaseId,e.path)}function Tu(t,e){const n=zv(e);if(n.get(1)!==t.databaseId.projectId)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q($v(n))}function Bv(t,e){return Xh(t.databaseId,e)}function AI(t){const e=zv(t);return e.length===4?fe.emptyPath():$v(e)}function Mc(t){return new fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $v(t){return oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function cm(t,e,n){return{name:Lc(t,e),fields:n.value.mapValue.fields}}function SI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(oe(d===void 0||typeof d=="string"),$e.fromBase64String(d||"")):(oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),$e.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const d=h.code===void 0?O.UNKNOWN:Fv(h.code);return new B(d,h.message||"")}(a);n=new Uv(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Tu(t,r.document.name),s=qt(r.document.updateTime),a=r.document.createTime?qt(r.document.createTime):G.min(),l=new lt({mapValue:{fields:r.document.fields}}),u=Je.newFoundDocument(i,s,a,l),h=r.targetIds||[],d=r.removedTargetIds||[];n=new oa(h,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Tu(t,r.document),s=r.readTime?qt(r.readTime):G.min(),a=Je.newNoDocument(i,s),l=r.removedTargetIds||[];n=new oa([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Tu(t,r.document),s=r.removedTargetIds||[];n=new oa([],s,i,null)}else{if(!("filter"in e))return Q();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new pI(i,s),l=r.targetId;n=new jv(l,a)}}return n}function PI(t,e){let n;if(e instanceof Ks)n={update:cm(t,e.key,e.value)};else if(e instanceof fl)n={delete:Lc(t,e.key)};else if(e instanceof Qn)n={update:cm(t,e.key,e.data),updateMask:MI(e.fieldMask)};else{if(!(e instanceof hI))return Q();n={verify:Lc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof Ua)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ci)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Us)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof bs)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:II(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(t,e.precondition)),n}function CI(t,e){return t&&t.length>0?(oe(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?qt(i.updateTime):qt(s);return a.isEqual(G.min())&&(a=qt(s)),new lI(a,i.transformResults||[])}(n,e))):[]}function RI(t,e){return{documents:[Bv(t,e.path)]}}function kI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Bv(t,i);const s=function(h){if(h.length!==0)return Hv(Ut.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(y){return{field:Vr(y.field),direction:DI(y.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Dc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function xI(t){let e=AI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){oe(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(g){const y=Wv(g);return y instanceof Ut&&vv(y)?y.getFilters():[y]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(y=>function(k){return new js(Dr(k.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(g){let y;return y=typeof g=="object"?g.value:g,al(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(g){const y=!!g.before,A=g.values||[];return new ja(A,y)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const y=!g.before,A=g.values||[];return new ja(A,y)}(n.endAt)),YT(e,i,a,s,l,"F",u,h)}function VI(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Wv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Dr(n.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Dr(n.unaryFilter.field);return Re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Dr(n.unaryFilter.field);return Re.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Dr(n.unaryFilter.field);return Re.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return Re.create(Dr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ut.create(n.compositeFilter.filters.map(r=>Wv(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function DI(t){return _I[t]}function NI(t){return EI[t]}function LI(t){return wI[t]}function Vr(t){return{fieldPath:t.canonicalString()}}function Dr(t){return Ue.fromServerFormat(t.fieldPath)}function Hv(t){return t instanceof Re?function(n){if(n.op==="=="){if(Yp(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NAN"}};if(Gp(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Yp(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NOT_NAN"}};if(Gp(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vr(n.field),op:NI(n.op),value:n.value}}}(t):t instanceof Ut?function(n){const r=n.getFilters().map(i=>Hv(i));return r.length===1?r[0]:{compositeFilter:{op:LI(n.op),filters:r}}}(t):Q()}function MI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n,r,i,s=G.min(),a=G.min(),l=$e.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Cn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Cn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.ct=e}}function FI(t){const e=xI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.un=new UI}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(zn.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(zn.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class UI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ze(fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ze(fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new hi(0)}static kn(){return new hi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.changes=new Ti(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ps(r.mutation,i,vt.empty(),Ve.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Z()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Z()){const i=or();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Zi();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=or();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Z()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=mn();const a=ds(),l=function(){return ds()}();return n.forEach((u,h)=>{const d=r.get(h.key);i.has(h.key)&&(d===void 0||d.mutation instanceof Qn)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),ps(d.mutation,h,d.mutation.getFieldMask(),Ve.now())):a.set(h.key,vt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>{var g;return l.set(h,new zI(d,(g=a.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ds();let i=new _e((a,l)=>a-l),s=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=r.get(u)||vt.empty();d=l.applyToLocalView(h,d),r.set(u,d);const g=(i.get(l.batchId)||Z()).add(u);i=i.insert(l.batchId,g)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=Cv();d.forEach(y=>{if(!s.has(y)){const A=Mv(n.get(y),r.get(y));A!==null&&g.set(y,A),s=s.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return j.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Tv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):j.resolve(or());let l=-1,u=s;return a.next(h=>j.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(y=>{u=u.insert(d,y)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,Z())).next(d=>({batchId:l,changes:Pv(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=Zi();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Zi();return this.indexManager.getCollectionParents(e,s).next(l=>j.forEach(l,u=>{const h=function(g,y){return new wi(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(d=>{d.forEach((g,y)=>{a=a.insert(g,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,Je.newInvalidDocument(d)))});let l=Zi();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&ps(d.mutation,h,vt.empty(),Ve.now()),ul(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:qt(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:FI(i.bundledQuery),readTime:qt(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.overlays=new _e(q.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=or();return j.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const i=or(),s=n.length+1,a=new q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new _e((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=s.get(h.largestBatchId);d===null&&(d=or(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=or(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=i)););return j.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new dI(n,r));let s=this.Ir.get(n);s===void 0&&(s=Z(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.sessionToken=$e.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(){this.Tr=new ze(Ne.Er),this.dr=new ze(Ne.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ne(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ne(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new q(new fe([])),r=new Ne(n,e),i=new Ne(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new q(new fe([])),r=new Ne(n,e),i=new Ne(n,e+1);let s=Z();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Ne(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ne{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||ie(e.wr,n.wr)}static Ar(e,n){return ie(e.wr,n.wr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ze(Ne.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new fI(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.br=this.br.add(new Ne(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return j.resolve(a)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ne(n,0),i=new Ne(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const l=this.Dr(a.wr);s.push(l)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(ie);return n.forEach(i=>{const s=new Ne(i,0),a=new Ne(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],l=>{r=r.add(l.wr)})}),j.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;q.isDocumentKey(s)||(s=s.child(""));const a=new Ne(new q(s),0);let l=new ze(ie);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.wr)),!0)},a),j.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){oe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return j.forEach(n.mutations,i=>{const s=new Ne(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ne(n,0),i=this.br.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.Mr=e,this.docs=function(){return new _e(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():Je.newInvalidDocument(n))}getEntries(e,n){let r=mn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Je.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=mn();const a=n.path,l=new q(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||VT(xT(d),r)<=0||(i.has(d.key)||ul(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q()}Or(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new KI(this)}getSize(e){return j.resolve(this.size)}}class KI extends bI{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.persistence=e,this.Nr=new Ti(n=>Hh(n),qh),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Jh,this.targetCount=0,this.kr=hi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new hi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this.qr={},this.overlays={},this.Qr=new zh(0),this.Kr=!1,this.Kr=!0,this.$r=new HI,this.referenceDelegate=e(this),this.Ur=new GI(this),this.indexManager=new jI,this.remoteDocumentCache=function(i){return new QI(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new OI(n),this.Gr=new $I(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new qI(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new XI(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return j.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class XI extends NT{constructor(e){super(),this.currentSequenceNumber=e}}class Zh{constructor(e){this.persistence=e,this.Jr=new Jh,this.Yr=null}static Zr(e){return new Zh(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,r=>{const i=q.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,G.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Z(),i=Z();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ef(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return n1()?8:LT(e1())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new JI;return this.Xi(e,n,a).next(l=>{if(s.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Qi()<=te.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",xr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(Qi()<=te.DEBUG&&W("QueryEngine","Query:",xr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Qi()<=te.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",xr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ht(n))):j.resolve())}Yi(e,n){if(em(n))return j.resolve(null);let r=Ht(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Vc(n,null,"F"),r=Ht(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Z(...s);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,a,u.readTime)?this.Yi(e,Vc(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return em(n)||i.isEqual(G.min())?j.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?j.resolve(null):(Qi()<=te.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xr(n)),this.rs(e,a,n,kT(i,-1)).next(l=>l))})}ts(e,n){let r=new ze(Av(e));return n.forEach((i,s)=>{ul(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Qi()<=te.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",xr(n)),this.Ji.getDocumentsMatchingQuery(e,n,zn.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new _e(ie),this._s=new Ti(s=>Hh(s),qh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function t2(t,e,n,r){return new e2(t,e,n,r)}async function Qv(t,e){const n=Y(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let u=Z();for(const h of i){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:l}))})})}function n2(t,e){const n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,y=g.keys();let A=j.resolve();return y.forEach(k=>{A=A.next(()=>d.getEntry(u,k)).next(V=>{const M=h.docVersions.get(k);oe(M!==null),V.version.compareTo(M)<0&&(g.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Z();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Kv(t){const e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function r2(t,e){const n=Y(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((d,g)=>{const y=i.get(g);if(!y)return;l.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,g)));let A=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?A=A.withResumeToken($e.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):d.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(d.resumeToken,r)),i=i.insert(g,A),function(V,M,I){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(y,A,d)&&l.push(n.Ur.updateTargetData(s,A))});let u=mn(),h=Z();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(i2(s,a,e.documentUpdates).next(d=>{u=d.Ps,h=d.Is})),!r.isEqual(G.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(g=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(d)}return j.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.os=i,s))}function i2(t,e,n){let r=Z(),i=Z();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=mn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(G.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:a,Is:i}})}function s2(t,e){const n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function o2(t,e){const n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new Cn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Oc(t,e,n){const r=Y(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Qs(a))throw a;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function hm(t,e,n){const r=Y(t);let i=G.min(),s=Z();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=Y(u),y=g._s.get(d);return y!==void 0?j.resolve(g.os.get(y)):g.Ur.getTargetData(h,d)}(r,a,Ht(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:G.min(),n?s:Z())).next(l=>(a2(r,JT(e),l),{documents:l,Ts:s})))}function a2(t,e,n){let r=t.us.get(e)||G.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class fm{constructor(){this.activeTargetIds=iI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l2{constructor(){this.so=new fm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new fm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wo=null;function Iu(){return Wo===null?Wo=function(){return 268435456+Math.round(2147483648*Math.random())}():Wo++,"0x"+Wo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ge="WebChannelConnection";class f2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const l=Iu(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,a),this.No(n,u,h,i).then(d=>(W("RestConnection",`Received RPC '${n}' ${l}: `,d),d),d=>{throw oi("RestConnection",`RPC '${n}' ${l} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(n,r,i,s,a,l){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ei}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=c2[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Iu();return new Promise((a,l)=>{const u=new ov;u.setWithCredentials(!0),u.listenOnce(av.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ra.NO_ERROR:const d=u.getResponseJson();W(Ge,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),a(d);break;case ra.TIMEOUT:W(Ge,`RPC '${e}' ${s} timed out`),l(new B(O.DEADLINE_EXCEEDED,"Request time out"));break;case ra.HTTP_ERROR:const g=u.getStatus();if(W(Ge,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const A=y==null?void 0:y.error;if(A&&A.status&&A.message){const k=function(M){const I=M.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(I)>=0?I:O.UNKNOWN}(A.status);l(new B(k,A.message))}else l(new B(O.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new B(O.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{W(Ge,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);W(Ge,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=Iu(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=cv(),l=uv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=s.join("");W(Ge,`Creating RPC '${e}' stream ${i}: ${d}`,u);const g=a.createWebChannel(d,u);let y=!1,A=!1;const k=new h2({Io:M=>{A?W(Ge,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(y||(W(Ge,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),W(Ge,`RPC '${e}' stream ${i} sending:`,M),g.send(M))},To:()=>g.close()}),V=(M,I,w)=>{M.listen(I,C=>{try{w(C)}catch(D){setTimeout(()=>{throw D},0)}})};return V(g,Ji.EventType.OPEN,()=>{A||(W(Ge,`RPC '${e}' stream ${i} transport opened.`),k.yo())}),V(g,Ji.EventType.CLOSE,()=>{A||(A=!0,W(Ge,`RPC '${e}' stream ${i} transport closed`),k.So())}),V(g,Ji.EventType.ERROR,M=>{A||(A=!0,oi(Ge,`RPC '${e}' stream ${i} transport errored:`,M),k.So(new B(O.UNAVAILABLE,"The operation could not be completed")))}),V(g,Ji.EventType.MESSAGE,M=>{var I;if(!A){const w=M.data[0];oe(!!w);const C=w,D=C.error||((I=C[0])===null||I===void 0?void 0:I.error);if(D){W(Ge,`RPC '${e}' stream ${i} received error:`,D);const F=D.status;let L=function(v){const E=Pe[v];if(E!==void 0)return Fv(E)}(F),_=D.message;L===void 0&&(L=O.INTERNAL,_="Unknown error status: "+F+" with message "+D.message),A=!0,k.So(new B(L,_)),g.close()}else W(Ge,`RPC '${e}' stream ${i} received:`,w),k.bo(w)}}),V(l,lv.STAT_EVENT,M=>{M.stat===Sc.PROXY?W(Ge,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Sc.NOPROXY&&W(Ge,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function Au(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(t){return new TI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n,r,i,s,a,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(pn(n.toString()),pn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new B(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class d2 extends Yv{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=SI(this.serializer,e),r=function(s){if(!("targetChange"in s))return G.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?G.min():a.readTime?qt(a.readTime):G.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Mc(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=kc(u)?{documents:RI(s,u)}:{query:kI(s,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=bv(s,a.resumeToken);const h=Dc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(G.min())>0){l.readTime=ba(s,a.snapshotVersion.toTimestamp());const h=Dc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=VI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Mc(this.serializer),n.removeTarget=e,this.a_(n)}}class p2 extends Yv{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return oe(!!e.streamToken),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=CI(e.writeResults,e.commitTime),r=qt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Mc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>PI(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,Nc(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(O.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,Nc(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new B(O.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class g2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(pn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Ir(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=Y(u);h.L_.add(4),await Ys(h),h.q_.set("Unknown"),h.L_.delete(4),await ml(h)}(this))})}),this.q_=new g2(r,i)}}async function ml(t){if(Ir(t))for(const e of t.B_)await e(!0)}async function Ys(t){for(const e of t.B_)await e(!1)}function Xv(t,e){const n=Y(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),sf(n)?rf(n):Ii(n).r_()&&nf(n,e))}function tf(t,e){const n=Y(t),r=Ii(n);n.N_.delete(e),r.r_()&&Jv(n,e),n.N_.size===0&&(r.r_()?r.o_():Ir(n)&&n.q_.set("Unknown"))}function nf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(G.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ii(t).A_(e)}function Jv(t,e){t.Q_.xe(e),Ii(t).R_(e)}function rf(t){t.Q_=new vI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ii(t).start(),t.q_.v_()}function sf(t){return Ir(t)&&!Ii(t).n_()&&t.N_.size>0}function Ir(t){return Y(t).L_.size===0}function Zv(t){t.Q_=void 0}async function v2(t){t.q_.set("Online")}async function _2(t){t.N_.forEach((e,n)=>{nf(t,e)})}async function E2(t,e){Zv(t),sf(t)?(t.q_.M_(e),rf(t)):t.q_.set("Unknown")}async function w2(t,e,n){if(t.q_.set("Online"),e instanceof Uv&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await za(t,r)}else if(e instanceof oa?t.Q_.Ke(e):e instanceof jv?t.Q_.He(e):t.Q_.We(e),!n.isEqual(G.min()))try{const r=await Kv(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.Q_.rt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.N_.get(h);d&&s.N_.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.N_.get(u);if(!d)return;s.N_.set(u,d.withResumeToken($e.EMPTY_BYTE_STRING,d.snapshotVersion)),Jv(s,u);const g=new Cn(d.target,u,h,d.sequenceNumber);nf(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await za(t,r)}}async function za(t,e,n){if(!Qs(e))throw e;t.L_.add(1),await Ys(t),t.q_.set("Offline"),n||(n=()=>Kv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ml(t)})}function e_(t,e){return e().catch(n=>za(t,n,e))}async function gl(t){const e=Y(t),n=$n(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;T2(e);)try{const i=await s2(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,I2(e,i)}catch(i){await za(e,i)}t_(e)&&n_(e)}function T2(t){return Ir(t)&&t.O_.length<10}function I2(t,e){t.O_.push(e);const n=$n(t);n.r_()&&n.V_&&n.m_(e.mutations)}function t_(t){return Ir(t)&&!$n(t).n_()&&t.O_.length>0}function n_(t){$n(t).start()}async function A2(t){$n(t).p_()}async function S2(t){const e=$n(t);for(const n of t.O_)e.m_(n.mutations)}async function P2(t,e,n){const r=t.O_.shift(),i=Gh.from(r,e,n);await e_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await gl(t)}async function C2(t,e){e&&$n(t).V_&&await async function(r,i){if(function(a){return mI(a)&&a!==O.ABORTED}(i.code)){const s=r.O_.shift();$n(r).s_(),await e_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await gl(r)}}(t,e),t_(t)&&n_(t)}async function pm(t,e){const n=Y(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Ir(n);n.L_.add(3),await Ys(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ml(n)}async function R2(t,e){const n=Y(t);e?(n.L_.delete(2),await ml(n)):e||(n.L_.add(2),await Ys(n),n.q_.set("Unknown"))}function Ii(t){return t.K_||(t.K_=function(n,r,i){const s=Y(n);return s.w_(),new d2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:v2.bind(null,t),Ro:_2.bind(null,t),mo:E2.bind(null,t),d_:w2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),sf(t)?rf(t):t.q_.set("Unknown")):(await t.K_.stop(),Zv(t))})),t.K_}function $n(t){return t.U_||(t.U_=function(n,r,i){const s=Y(n);return s.w_(),new p2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:A2.bind(null,t),mo:C2.bind(null,t),f_:S2.bind(null,t),g_:P2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await gl(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new of(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function af(t,e){if(pn("AsyncQueue",`${e}: ${t}`),Qs(t))return new B(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Zi(),this.sortedSet=new _e(this.comparator)}static emptySet(e){return new Jr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Jr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Jr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(){this.W_=new _e(q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class fi{constructor(e,n,r,i,s,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new fi(e,n,Jr.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ll(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class x2{constructor(){this.queries=gm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Y(n),s=i.queries;i.queries=gm(),s.forEach((a,l)=>{for(const u of l.j_)u.onError(r)})})(this,new B(O.ABORTED,"Firestore shutting down"))}}function gm(){return new Ti(t=>Iv(t),ll)}async function V2(t,e){const n=Y(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new k2,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=af(a,`Initialization of query '${xr(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&lf(n)}async function D2(t,e){const n=Y(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function N2(t,e){const n=Y(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.j_)l.X_(i)&&(r=!0);a.z_=i}}r&&lf(n)}function L2(t,e,n){const r=Y(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function lf(t){t.Y_.forEach(e=>{e.next()})}var Fc,ym;(ym=Fc||(Fc={})).ea="default",ym.Cache="cache";class M2{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new fi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=fi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Fc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e){this.key=e}}class i_{constructor(e){this.key=e}}class O2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Z(),this.mutatedKeys=Z(),this.Aa=Av(e),this.Ra=new Jr(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new mm,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,g)=>{const y=i.get(d),A=ul(this.query,g)?g:null,k=!!y&&this.mutatedKeys.has(y.key),V=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let M=!1;y&&A?y.data.isEqual(A.data)?k!==V&&(r.track({type:3,doc:A}),M=!0):this.ga(y,A)||(r.track({type:2,doc:A}),M=!0,(u&&this.Aa(A,u)>0||h&&this.Aa(A,h)<0)&&(l=!0)):!y&&A?(r.track({type:0,doc:A}),M=!0):y&&!A&&(r.track({type:1,doc:y}),M=!0,(u||h)&&(l=!0)),M&&(A?(a=a.add(A),s=V?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:a,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((d,g)=>function(A,k){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return V(A)-V(k)}(d.type,g.type)||this.Aa(d.doc,g.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,a.length!==0||h?{snapshot:new fi(this.query,e.Ra,s,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new mm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Z(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new i_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new r_(r))}),n}ba(e){this.Ta=e.Ts,this.da=Z();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return fi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class F2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class j2{constructor(e){this.key=e,this.va=!1}}class U2{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ti(l=>Iv(l),ll),this.Ma=new Map,this.xa=new Set,this.Oa=new _e(q.comparator),this.Na=new Map,this.La=new Jh,this.Ba={},this.ka=new Map,this.qa=hi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function b2(t,e,n=!0){const r=c_(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await s_(r,e,n,!0),i}async function z2(t,e){const n=c_(t);await s_(n,e,!0,!1)}async function s_(t,e,n,r){const i=await o2(t.localStore,Ht(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await B2(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Xv(t.remoteStore,i),l}async function B2(t,e,n,r,i){t.Ka=(g,y,A)=>async function(V,M,I,w){let C=M.view.ma(I);C.ns&&(C=await hm(V.localStore,M.query,!1).then(({documents:_})=>M.view.ma(_,C)));const D=w&&w.targetChanges.get(M.targetId),F=w&&w.targetMismatches.get(M.targetId)!=null,L=M.view.applyChanges(C,V.isPrimaryClient,D,F);return _m(V,M.targetId,L.wa),L.snapshot}(t,g,y,A);const s=await hm(t.localStore,e,!0),a=new O2(e,s.Ts),l=a.ma(s.documents),u=Gs.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=a.applyChanges(l,t.isPrimaryClient,u);_m(t,n,h.wa);const d=new F2(e,n,a);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function $2(t,e,n){const r=Y(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!ll(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Oc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tf(r.remoteStore,i.targetId),jc(r,i.targetId)}).catch(qs)):(jc(r,i.targetId),await Oc(r.localStore,i.targetId,!0))}async function W2(t,e){const n=Y(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tf(n.remoteStore,r.targetId))}async function H2(t,e,n){const r=J2(t);try{const i=await function(a,l){const u=Y(a),h=Ve.now(),d=l.reduce((A,k)=>A.add(k.key),Z());let g,y;return u.persistence.runTransaction("Locally write mutations","readwrite",A=>{let k=mn(),V=Z();return u.cs.getEntries(A,d).next(M=>{k=M,k.forEach((I,w)=>{w.isValidDocument()||(V=V.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(A,k)).next(M=>{g=M;const I=[];for(const w of l){const C=cI(w,g.get(w.key).overlayedDocument);C!=null&&I.push(new Qn(w.key,C,mv(C.value.mapValue),dt.exists(!0)))}return u.mutationQueue.addMutationBatch(A,h,I,l)}).next(M=>{y=M;const I=M.applyToLocalDocumentSet(g,V);return u.documentOverlayCache.saveOverlays(A,M.batchId,I)})}).then(()=>({batchId:y.batchId,changes:Pv(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,u){let h=a.Ba[a.currentUser.toKey()];h||(h=new _e(ie)),h=h.insert(l,u),a.Ba[a.currentUser.toKey()]=h}(r,i.batchId,n),await Xs(r,i.changes),await gl(r.remoteStore)}catch(i){const s=af(i,"Failed to persist write");n.reject(s)}}async function o_(t,e){const n=Y(t);try{const r=await r2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?oe(a.va):i.removedDocuments.size>0&&(oe(a.va),a.va=!1))}),await Xs(n,r,e)}catch(r){await qs(r)}}function vm(t,e,n){const r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const l=a.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const u=Y(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const y of g.j_)y.Z_(l)&&(h=!0)}),h&&lf(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function q2(t,e,n){const r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new _e(q.comparator);a=a.insert(s,Je.newNoDocument(s,G.min()));const l=Z().add(s),u=new dl(G.min(),new Map,new _e(ie),a,l);await o_(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),uf(r)}else await Oc(r.localStore,e,!1).then(()=>jc(r,e,n)).catch(qs)}async function Q2(t,e){const n=Y(t),r=e.batch.batchId;try{const i=await n2(n.localStore,e);l_(n,r,null),a_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xs(n,i)}catch(i){await qs(i)}}async function K2(t,e,n){const r=Y(t);try{const i=await function(a,l){const u=Y(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(oe(g!==null),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(r.localStore,e);l_(r,e,n),a_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Xs(r,i)}catch(i){await qs(i)}}function a_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function l_(t,e,n){const r=Y(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function jc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||u_(t,r)})}function u_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(tf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),uf(t))}function _m(t,e,n){for(const r of n)r instanceof r_?(t.La.addReference(r.key,e),G2(t,r)):r instanceof i_?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||u_(t,r.key)):Q()}function G2(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),uf(t))}function uf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new q(fe.fromString(e)),r=t.qa.next();t.Na.set(r,new j2(n)),t.Oa=t.Oa.insert(n,r),Xv(t.remoteStore,new Cn(Ht(Qh(n.path)),r,"TargetPurposeLimboResolution",zh.oe))}}async function Xs(t,e,n){const r=Y(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{a.push(r.Ka(u,e,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){i.push(h);const g=ef.Wi(u.targetId,h);s.push(g)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(u,h){const d=Y(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>j.forEach(h,y=>j.forEach(y.$i,A=>d.persistence.referenceDelegate.addReference(g,y.targetId,A)).next(()=>j.forEach(y.Ui,A=>d.persistence.referenceDelegate.removeReference(g,y.targetId,A)))))}catch(g){if(!Qs(g))throw g;W("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const y=g.targetId;if(!g.fromCache){const A=d.os.get(y),k=A.snapshotVersion,V=A.withLastLimboFreeSnapshotVersion(k);d.os=d.os.insert(y,V)}}}(r.localStore,s))}async function Y2(t,e){const n=Y(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await Qv(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new B(O.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xs(n,r.hs)}}function X2(t,e){const n=Y(t),r=n.Na.get(e);if(r&&r.va)return Z().add(r.key);{let i=Z();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const l=n.Fa.get(a);i=i.unionWith(l.view.Va)}return i}}function c_(t){const e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=o_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q2.bind(null,e),e.Ca.d_=N2.bind(null,e.eventManager),e.Ca.$a=L2.bind(null,e.eventManager),e}function J2(t){const e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K2.bind(null,e),e}class Ba{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return t2(this.persistence,new ZI,e.initialUser,this.serializer)}Ga(e){return new YI(Zh.Zr,this.serializer)}Wa(e){return new l2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ba.provider={build:()=>new Ba};class Uc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>vm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Y2.bind(null,this.syncEngine),await R2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new x2}()}createDatastore(e){const n=pl(e.databaseInfo.databaseId),r=function(s){return new f2(s)}(e.databaseInfo);return function(s,a,l,u){return new m2(s,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new y2(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>vm(this.syncEngine,n,0),function(){return dm.D()?new dm:new u2}())}createSyncEngine(e,n){return function(i,s,a,l,u,h,d){const g=new U2(i,s,a,l,u,h);return d&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Y(i);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ys(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Uc.provider={build:()=>new Uc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):pn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ye.UNAUTHENTICATED,this.clientId=fv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{W("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(W("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=af(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Su(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Qv(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Em(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tA(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>pm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>pm(e.remoteStore,i)),t._onlineComponents=e}async function tA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await Su(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;oi("Error using user provided cache. Falling back to memory cache: "+n),await Su(t,new Ba)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await Su(t,new Ba);return t._offlineComponents}async function h_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Em(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Em(t,new Uc))),t._onlineComponents}function nA(t){return h_(t).then(e=>e.syncEngine)}async function wm(t){const e=await h_(t),n=e.eventManager;return n.onListen=b2.bind(null,e.syncEngine),n.onUnlisten=$2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=z2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=W2.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t,e,n){if(!n)throw new B(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rA(t,e,n,r){if(e===!0&&r===!0)throw new B(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Im(t){if(!q.isDocumentKey(t))throw new B(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Am(t){if(q.isDocumentKey(t))throw new B(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function ln(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yl(t);throw new B(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=f_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ET;switch(r.type){case"firstParty":return new AT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Tm.get(n);r&&(W("ComponentProvider","Removing Datastore"),Tm.delete(n),r.terminate())}(this),Promise.resolve()}}function iA(t,e,n,r={}){var i;const s=(t=ln(t,vl))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Ye.MOCK_USER;else{l=Zw(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new B(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ye(h)}t._authCredentials=new wT(new hv(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ar(this.firestore,e,this._query)}}class pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}}class jn extends Ar{constructor(e,n,r){super(e,n,Qh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new q(e))}withConverter(e){return new jn(this.firestore,e,this._path)}}function Js(t,e,...n){if(t=xt(t),d_("collection","path",e),t instanceof vl){const r=fe.fromString(e,...n);return Am(r),new jn(t,null,r)}{if(!(t instanceof pt||t instanceof jn))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return Am(r),new jn(t.firestore,null,r)}}function it(t,e,...n){if(t=xt(t),arguments.length===1&&(e=fv.newId()),d_("doc","path",e),t instanceof vl){const r=fe.fromString(e,...n);return Im(r),new pt(t,null,new q(r))}{if(!(t instanceof pt||t instanceof jn))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return Im(r),new pt(t.firestore,t instanceof jn?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Gv(this,"async_queue_retry"),this.Vu=()=>{const r=Au();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Au();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Au();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new cr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Qs(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw pn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=of.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Q()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Cm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class _r extends vl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Pm,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Pm(e),this._firestoreClient=void 0,await e}}}function sA(t,e){const n=typeof t=="object"?t:lT(),r=typeof t=="string"?t:"(default)",i=iT(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Xw("firestore");s&&iA(i,...s)}return i}function cf(t){if(t._terminated)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oA(t),t._firestoreClient}function oA(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,d){return new FT(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,f_(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new eA(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new di($e.fromBase64String(e))}catch(n){throw new B(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new di($e.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ue(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=/^__.*__$/;class lA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Qn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ks(e,this.data,n,this.fieldTransforms)}}class p_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Qn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function m_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class _l{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new _l(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return $a(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(m_(this.Cu)&&aA.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class uA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pl(e)}Qu(e,n,r,i=!1){return new _l({Cu:e,methodName:n,qu:r,path:Ue.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function El(t){const e=t._freezeSettings(),n=pl(t._databaseId);return new uA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function g_(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);mf("Data must be an object, but it was:",a,r);const l=__(r,a);let u,h;if(s.merge)u=new vt(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const y=bc(e,g,n);if(!a.contains(y))throw new B(O.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);w_(d,y)||d.push(y)}u=new vt(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new lA(new lt(l),u,h)}class wl extends eo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wl}}function cA(t,e,n){return new _l({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class df extends eo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=cA(this,e,!0),r=this.Ku.map(s=>Ai(s,n)),i=new ci(r);return new Lv(e.path,i)}isEqual(e){return e instanceof df&&La(this.Ku,e.Ku)}}class pf extends eo{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new bs(e.serializer,kv(e.serializer,this.$u));return new Lv(e.path,n)}isEqual(e){return e instanceof pf&&this.$u===e.$u}}function y_(t,e,n,r){const i=t.Qu(1,e,n);mf("Data must be an object, but it was:",i,r);const s=[],a=lt.empty();Tr(r,(u,h)=>{const d=gf(e,u,n);h=xt(h);const g=i.Nu(d);if(h instanceof wl)s.push(d);else{const y=Ai(h,g);y!=null&&(s.push(d),a.set(d,y))}});const l=new vt(s);return new p_(a,l,i.fieldTransforms)}function v_(t,e,n,r,i,s){const a=t.Qu(1,e,n),l=[bc(e,r,n)],u=[i];if(s.length%2!=0)throw new B(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)l.push(bc(e,s[y])),u.push(s[y+1]);const h=[],d=lt.empty();for(let y=l.length-1;y>=0;--y)if(!w_(h,l[y])){const A=l[y];let k=u[y];k=xt(k);const V=a.Nu(A);if(k instanceof wl)h.push(A);else{const M=Ai(k,V);M!=null&&(h.push(A),d.set(A,M))}}const g=new vt(h);return new p_(d,g,a.fieldTransforms)}function hA(t,e,n,r=!1){return Ai(n,t.Qu(r?4:3,e))}function Ai(t,e){if(E_(t=xt(t)))return mf("Unsupported field value:",e,t),__(t,e);if(t instanceof eo)return function(r,i){if(!m_(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let u=Ai(l,i.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kv(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ve.fromDate(r);return{timestampValue:ba(i.serializer,s)}}if(r instanceof Ve){const s=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ba(i.serializer,s)}}if(r instanceof hf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof di)return{bytesValue:bv(i.serializer,r._byteString)};if(r instanceof pt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Xh(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ff)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Kh(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${yl(r)}`)}(t,e)}function __(t,e){const n={};return dv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tr(t,(r,i)=>{const s=Ai(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function E_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof hf||t instanceof di||t instanceof pt||t instanceof eo||t instanceof ff)}function mf(t,e,n){if(!E_(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=yl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function bc(t,e,n){if((e=xt(e))instanceof Zs)return e._internalPath;if(typeof e=="string")return gf(t,e);throw $a("Field path arguments must be of type string or ",t,!1,void 0,n)}const fA=new RegExp("[~\\*/\\[\\]]");function gf(t,e,n){if(e.search(fA)>=0)throw $a(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zs(...e.split("."))._internalPath}catch{throw $a(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $a(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new B(O.INVALID_ARGUMENT,l+t+u)}function w_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dA extends T_{data(){return super.data()}}function yf(t,e){return typeof e=="string"?gf(t,e):e instanceof Zs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vf{}class I_ extends vf{}function to(t,e,...n){let r=[];e instanceof vf&&r.push(e),r=r.concat(n),function(s){const a=s.filter(u=>u instanceof Ef).length,l=s.filter(u=>u instanceof _f).length;if(a>1||a>0&&l>0)throw new B(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class _f extends I_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _f(e,n,r)}_apply(e){const n=this._parse(e);return A_(e._query,n),new Ar(e.firestore,e.converter,xc(e._query,n))}_parse(e){const n=El(e.firestore);return function(s,a,l,u,h,d,g){let y;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){km(g,d);const A=[];for(const k of g)A.push(Rm(u,s,k));y={arrayValue:{values:A}}}else y=Rm(u,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||km(g,d),y=hA(l,a,g,d==="in"||d==="not-in");return Re.create(h,d,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ef extends vf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ef(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ut.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const l=s.getFlattenedFilters();for(const u of l)A_(a,u),a=xc(a,u)}(e._query,n),new Ar(e.firestore,e.converter,xc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wf extends I_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wf(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new js(s,a)}(e._query,this._field,this._direction);return new Ar(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new wi(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function pi(t,e="asc"){const n=e,r=yf("orderBy",t);return wf._create(r,n)}function Rm(t,e,n){if(typeof(n=xt(n))=="string"){if(n==="")throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tv(e)&&n.indexOf("/")!==-1)throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(fe.fromString(n));if(!q.isDocumentKey(r))throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kp(t,new q(r))}if(n instanceof pt)return Kp(t,n._key);throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yl(n)}.`)}function km(t,e){if(!Array.isArray(t)||t.length===0)throw new B(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function A_(t,e){const n=function(i,s){for(const a of i)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class mA{convertValue(e,n="none"){switch(vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Tr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Ae(a.doubleValue));return new ff(s)}convertGeoPoint(e){return new hf(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=$h(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ms(e));default:return null}}convertTimestamp(e){const n=Bn(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=fe.fromString(e);oe(qv(r));const i=new Os(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||pn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class P_ extends T_{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new aa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class aa extends P_{data(e={}){return super.data(e)}}class gA{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ts(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new aa(this._firestore,this._userDataWriter,r.key,r,new ts(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const u=new aa(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ts(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new aa(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ts(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:yA(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}class C_ extends mA{constructor(e){super(),this.firestore=e}convertBytes(e){return new di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function mi(t,e,n,...r){t=ln(t,pt);const i=ln(t.firestore,_r),s=El(i);let a;return a=typeof(e=xt(e))=="string"||e instanceof Zs?v_(s,"updateDoc",t._key,e,n,r):y_(s,"updateDoc",t._key,e),Tl(i,[a.toMutation(t._key,dt.exists(!0))])}function Tf(t){return Tl(ln(t.firestore,_r),[new fl(t._key,dt.none())])}function no(t,e){const n=ln(t.firestore,_r),r=it(t),i=S_(t.converter,e);return Tl(n,[g_(El(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,dt.exists(!1))]).then(()=>r)}function ro(t,...e){var n,r,i;t=xt(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Cm(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Cm(e[a])){const g=e[a];e[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[a+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[a+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let u,h,d;if(t instanceof pt)h=ln(t.firestore,_r),d=Qh(t._key.path),u={next:g=>{e[a]&&e[a](vA(h,t,g))},error:e[a+1],complete:e[a+2]};else{const g=ln(t,Ar);h=ln(g.firestore,_r),d=g._query;const y=new C_(h);u={next:A=>{e[a]&&e[a](new gA(h,y,g,A))},error:e[a+1],complete:e[a+2]},pA(t._query)}return function(y,A,k,V){const M=new Z2(V),I=new M2(A,M,k);return y.asyncQueue.enqueueAndForget(async()=>V2(await wm(y),I)),()=>{M.Za(),y.asyncQueue.enqueueAndForget(async()=>D2(await wm(y),I))}}(cf(h),d,l,u)}function Tl(t,e){return function(r,i){const s=new cr;return r.asyncQueue.enqueueAndForget(async()=>H2(await nA(r),i,s)),s.promise}(cf(t),e)}function vA(t,e,n){const r=n.docs.get(e._key),i=new C_(t);return new P_(t,i,e._key,r,new ts(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=El(e)}set(e,n,r){this._verifyNotCommitted();const i=Pu(e,this._firestore),s=S_(i.converter,n,r),a=g_(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,dt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Pu(e,this._firestore);let a;return a=typeof(n=xt(n))=="string"||n instanceof Zs?v_(this._dataReader,"WriteBatch.update",s._key,n,r,i):y_(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,dt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Pu(e,this._firestore);return this._mutations=this._mutations.concat(new fl(n._key,dt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pu(t,e){if((t=xt(t)).firestore!==e)throw new B(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function EA(...t){return new df("arrayUnion",t)}function wA(t){return new pf("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t){return cf(t=ln(t,_r)),new _A(t,e=>Tl(t,e))}(function(e,n=!0){(function(i){Ei=i})(aT),Oa(new Ds("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new _r(new TT(r.getProvider("auth-internal")),new PT(r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new B(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Os(h.options.projectId,d)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Xr($p,"4.7.3",e),Xr($p,"4.7.3","esm2017")})();const TA={apiKey:"AIzaSyB6-Z_XRfCHWQ3ujGzkj4ck1WtI9gX6O_k",authDomain:"cafestesiaapp.firebaseapp.com",projectId:"cafestesiaapp",storageBucket:"cafestesiaapp.firebasestorage.app",messagingSenderId:"639191492553",appId:"1:639191492553:web:dc6ce00f5622dc686faa18",measurementId:"G-Z52JP10C1R"},IA=nv(TA),De=sA(IA),la=Js(De,"tasks"),AA=async()=>{console.log("Seeding initial tasks to Firestore...");const t=io(De);Qy.forEach(e=>{const n=it(la);t.set(n,e)}),await t.commit(),console.log("Initial tasks seeded.")},SA=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const a=to(la,pi("date"),pi("time")),l=ro(a,u=>{if(u.empty&&Qy.length>0){AA();return}const h=u.docs.map(d=>({id:d.id,...d.data()}));e(h)},u=>{console.error("Error fetching Kanban tasks:",u)});return()=>l()},[]),{tasks:t,updateTaskStatus:async(a,l)=>{const u=it(De,"tasks",a);try{await mi(u,{status:l})}catch(h){console.error("Error updating task status:",h)}},addTask:async a=>{try{await no(la,{...a,status:"todo"})}catch(l){console.error("Error adding task:",l)}},addMultipleTasks:async a=>{try{const l=io(De);a.forEach(u=>{const h=it(la);l.set(h,{...u,status:"todo"})}),await l.commit()}catch(l){console.error("Error adding multiple tasks:",l)}},updateTask:async a=>{const{id:l,...u}=a,h=it(De,"tasks",l);try{await mi(h,u)}catch(d){console.error("Error updating task:",d)}}}},zc=Js(De,"inventory"),PA=async()=>{console.log("Seeding initial inventory to Firestore...");const t=io(De);Ky.forEach(e=>{const n=it(zc);t.set(n,{...e,purchaseHistory:[]})}),await t.commit(),console.log("Initial inventory seeded.")},CA=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const a=to(zc,pi("name")),l=ro(a,u=>{if(u.empty&&Ky.length>0){PA();return}const h=u.docs.map(d=>({id:d.id,...d.data()}));e(h)},u=>{console.error("Error fetching inventory items:",u)});return()=>l()},[]),{items:t,addItem:async a=>{try{await no(zc,{...a,purchaseHistory:[]})}catch(l){console.error("Error adding inventory item:",l)}},updateItem:async a=>{const{id:l,...u}=a,h=it(De,"inventory",l);try{await mi(h,u)}catch(d){console.error("Error updating item:",d)}},deleteItem:async a=>{const l=it(De,"inventory",a);try{await Tf(l)}catch(u){console.error("Error deleting item:",u)}},recordStockChange:async({itemId:a,change:l,purchaseDetails:u})=>{const h=it(De,"inventory",a);try{const d={currentStock:wA(l)};if(u&&l>0){const g={id:`pur-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,date:new Date().toISOString(),quantity:l,totalPrice:u.totalPrice,providerName:u.providerName};d.purchaseHistory=EA(g)}await mi(h,d)}catch(d){console.error("Error recording stock change:",d)}}}},Bc=Js(De,"providers"),R_=[{name:"Proveedor A"},{name:"Proveedor B"},{name:"Proveedor C"},{name:"Supermercado"},{name:"Tostador Local"}],RA=async()=>{console.log("Seeding initial providers to Firestore...");const t=io(De);R_.forEach(e=>{const n=it(Bc);t.set(n,e)}),await t.commit(),console.log("Initial providers seeded.")},kA=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const s=to(Bc,pi("name")),a=ro(s,l=>{if(l.empty&&R_.length>0){RA();return}const u=l.docs.map(h=>({id:h.id,...h.data()}));e(u)},l=>{console.error("Error fetching providers:",l)});return()=>a()},[]),{providers:t,addProvider:async s=>{try{await no(Bc,s)}catch(a){console.error("Error adding provider:",a)}},updateProvider:async s=>{const{id:a,...l}=s,u=it(De,"providers",a);try{await mi(u,l)}catch(h){console.error("Error updating provider:",h)}},deleteProvider:async s=>{const a=it(De,"providers",s);try{await Tf(a)}catch(l){console.error("Error deleting provider:",l)}}}},xA="data:audio/wav;base64,UklGRlgEAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQEAABk/2//aP9w/3X/eP+A/4P/hv+K/43/kv+b/5//ov+p/63/rv+w/7L/tP+3/7f/tv+z/7D/r/+t/6n/pP+g/53/l/+T/4v/iP+D/3//df9x/2n/Y/9f/13/Wv9Z/1n/Wv9c/1//Yv9m/2v/c/96/4H/h/+L/5D/mv+h/6n/sP+1/7n/vP/A/8L/xP/G/8j/yf/K/8r/yP/F/8H/uv+z/6f/n/+W/4n/f/9t/2T/Wv9V/1P/U/9T/1X/W/9h/2n/d/9//4j/l/+f/6b/r/+z/7f/vP/C/8f/zP/Q/9L/0//S/9H/zv/J/8T/v/+1/6r/n/+R/4b/ev9r/2P/V/9R/0//S/9M/03/T/9U/1r/Y/9r/3j/gf+J/5L/oP+p/7H/uP/A/8T/yv/P/9P/1v/Y/9j/1//T/8//yP/C/7z/tP+p/6D/kv+H/3n/av9j/1f/Uf9O/0z/TP9N/0//VP9b/2T/b/96/4L/i/+T/5//p/+t/7T/vP/C/8j/z//U/9f/2v/c/9z/2//W/9P/zP/I/8L/vP+0/6r/oP+S/4b/ef9s/2P/Vv9R/0//S/9L/0v/TP9Q/1T/Wv9j/2v/d/9+/4L/i/+S/5v/o/+p/6//sv+2/7r/v/+9/7z/u/+2/7H/qf+g/5n/kv+J/4H/d/9s/2T/Wf9W/1T/Uv9T/1T/Vf9Z/1//Yv9n/2v/cv95/3//hP+I/4r/jP+P/5D/kv+U/5X/lf+U/5D/j/+N/4r/if+F/4D/e/9z/2v/Z/9i/1//W/9Z/1f/Vf9V/1X/Vv9Y/1r/Xf9f/2L/Zv9r/3L/d/96/3//gv+F/4n/iv+N/4//kP+T/5X/mf+a/5v/m/+Z/5T/kP+O/4v/iP+F/4D/eP9x/2n/Y/9g/1//W/9Z/1j/V/9W/1b/V/9X/1j/Wv9d/2D/Y/9m/2n/c/91/3n/f/+C/4X/if+L/43/j/+Q/5L/lP+W/5j/mf+b/5z/n/+g/6H/oP+e/5r/lv+S/47/jf+K/4f/gf98/3X/c/9r/2b/Yv9f/17/W/9Z/1j/V/9V/1X/Vf9W/1j/W/9f/2P/aP9t/3H/df96/3//gv+E/4f/iP+K/4z/jv+P/5H/kv+U/5X/lv+Y/5n/mv+c/5//oP+h/6L/ov+i/6H/n/+d/5r/lf+R/47/jP+K/4f/gf99/3b/cf9p/2X/Yf9e/1v/Wf9Y/1f/Vf9V/1X/Vv9Y/1v/X/9h/2T/aP9u/3H/d/97/3//g/+E/4b/iP+J/4r/jP+O/5D/kv+U/5X/lv+Y/5n/mv+b/5z/nv+f/6D/of+i/6P/pP+k/6T/ov+g/53/m/+U/4//jf+K/4f/gP98/3b/c/9q/2b/Yf9f/13/Wv9Y/1f/VP9T/1L/Uv9T/1T/Vf9Y/1s=",VA="data:audio/wav;base64,UklGRmAEAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YSAEAAC9/73/v/+9/8D/wf/D/8T/xv/I/8n/y//L/8r/x//D/7//uv+5/7v/uv+7/7z/vP+9/77/wP/B/8P/xP/G/8j/yf/L/8z/zf/M/8r/x//D/7//uv+2/7L/sf+v/63/q/+o/6f/pP+k/6T/p/+n/6n/qv+u/7D/s/+3/7f/sv+w/6v/qP+j/57/mv+U/5D/j/+O/4//kP+T/5X/mf+a/5v/n/+h/6P/pP+m/6f/qP+n/6X/ov+e/5n/kv+P/4v/iP+G/4T/hP+G/4f/iP+K/4z/j/+R/5P/lf+Z/5v/nv+g/6L/pf+m/6f/qf+p/6f/pv+k/6H/nv+a/5T/kP+N/4n/hv+C/3//f/+A/4L/hP+G/4j/iv+M/47/kP+T/5X/mP+Z/5r/mv+Z/5f/lP+R/47/jP+J/4L/fP91/2//bf9w/3L/df96/3//gf+E/4f/iP+K/4//kf+V/5n/mv+c/57/nv+c/5n/lf+R/47/jf+K/4f/gP97/3X/cv9s/2n/a/9u/3D/c/92/3f/d/9x/2r/Z/9i/2H/Y/9l/2j/b/9y/3b/eP98/3//g/+D/4T/hP+C/37/d/9s/2b/Yf9f/13/Xf9f/2D/Yv9m/2r/c/94/3v/fv+A/4L/hP+G/4b/hP+C/3//d/9t/2f/Yv9f/17/Xf9e/1//Yf9j/2b/af9u/3H/d/96/3v/e/94/3L/af9l/2D/Xv9b/1j/V/9X/1f/V/9Z/1v/Xv9g/2T/aP9u/3L/d/95/3n/d/9x/2n/Zv9i/1//Xf9b/1j/Vv9V/1T/Uv9S/1L/U/9V/1f/Wf9c/1//Yv9n/2r/b/9y/3f/d/9w/2f/Yf9d/1r/V/9U/0//T/9O/07/T/9U/1b/Wf9b/1//Yv9k/2f/aP9o/2f/Y/9d/1r/Vv9T/07/S/9J/0j/R/9G/0b/Rv9H/0n/TP9P/1T/Wf9c/1//Yf9j/2X/Zv9l/2L/Xv9b/1f/U/9P/0z/Sv9I/0X/Q/9A/z//Ov85/zn/Of88/z//Qv9G/0r/T/9W/1//Yv9l/2f/aP9o/2b/Yv9d/1r/Vv9U/0//TP9K/0f/Q/8//zn/M/8u/yn/J/8j/yH/IP8h/yL/J/8s/zL/O/9C/0f/TP9U/1f/WP9Y/1f/U/9N/0j/Qv88/zL/KP8g/yv/PP9J/1f/dQB1/7X/uv+9/8H/xP/H/8n/y//N/9D/0P/N/8r/x//E/8D/vf+5/7b/tP+0/7T/tP+1/7X/tf+1/7X/tf+0/7D/qv+m/5//mv+U/5D/j/+N/4z/jP+O/4//kP+T/5X/mf+a/5v/nP+e/5//of+j/6X/pv+n/6f/pf+j/5//mv+U/4//jP+J/4P/fP94/3b/cv9w/2//c/93/3n/fv+C/4b/iP+K/4z/jv+Q/5L/lP+W/5j/mf+a/5v/nP+b/5f/kv+P/4v/iP+F/4D/ev90/2v/Z/9j/2D/Yv9k/2f/av9v/3H/d/96/3//g/+E/4b/iP+J/4v/jP+O/5D/kv+T/5D/j/+M/4n/h/+C/3//e/92/3D/av9n/2P/YP9f/1//YP9j/2X/aP9s/3D/d/96/3//gf+E/4b/iP+J/4r/jP+O/5D/kv+T/5H/jv+L/4j/hf+A/3r/cv9p/2X/Y/9g/1//YP9i/2X/aP9t/3H/df96/3//gf+E/4b/iP+J/4r/jP+O/4//j/+M/4n/h/+B/3z/df9x/2n/Zf9j/2D/YP9j/2X/aP9t/3H/df96/3//gf+D/4T/hf+G/4b/hf+E/4L/f/96/3b/cf9p/2b/Y/9g/2D/Y/9l/2f/a/9v/3H/df96/3//gP+B/4L/gv+C/4L/gf+A/3z/ef92/3H/av9n/2T/Yv9h/2L/ZP9n/2r/b/9x/3X/ef98/3//gP+B/4L/gv+A/3z/ef91/2//a/9p/2X/Y/9h/2D/YP9j/2X/aP9t/3H/d/96/3z/f/9//33/ef91/2//a/9p/2b/Y/9h/2D/YP9j/2X/aP9s/2//cP9x/3L/cf9w/2v/aP9l/2L/Yf9f/1//YP9j/2X/aP9t/3H/df96/3//gP+B/4L/gv+A/33/eP90/2z/aP9m/2L/Yf9h/2L/ZP9n/2r/bv9w/3L/df95/3v/fP9+/3v/df9x/2n/Zv9i/1//Xv9d/13/Xf9e/1//Yf9j/2X/aP9s/27/bv9s/2n/Zv9k/2L/Yf9g/2D/Yv9k/2b/aP9s/3D/cv91/3b/cv9v/2n/Zv9k/2L/Yf9f/17/Xf9d/13/Xv9f/2D/Yv9k/2b/aP9s/23/bf9r/2f/Y/9f/1v/V/9W/1b/Vv9W/1f/Wf9b/1//Yv9l/2j/b/9x/3X/d/9z/2v/Z/9i/1//W/9Z/1f/Vf9V/1X/Vf9W/1j/Wv9d/2D/Y/9m/2n/bf9v/23/av9o/2X/Yv9f/1v/WP9W/1T/Uv9S/1L/U/9V/1f/Wf9b/1//Yf9j/2X/aP9p/2n/Zv9k/1//Wv9V/1D/TP9L/0n/R/9G/0b/Rv9H/0n/TP9P/1T/Wf9b/1//Yf9i/2L/Yf9f/1v/Vv9R/07/S/9I/0X/Qf8+/zv/Of85/zn/O/8//0L/Rv9K/0//Vf9Y/1v/Xf9d/1v/V/9T/07/S/9G/0H/Ov8y/yj/Iv8e/xr/Fv8U/xT/FP8V/xb/Gv8e/yL/KP8y/zr/Qf9G/0v/Tv9T/1T/Uf9O/0n/Q/88/zD/J/8e/xX/D/8L/wn/Cf8J/wv/D/8V/x7/J/8w/zz/Q/9J/04=",DA="data:audio/wav;base64,UklGRmAEAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YSAEAAC9/73/v/+9/8D/wf/D/8T/xv/I/8n/y//L/8r/x//D/7//uv+5/7v/uv+7/7z/vP+9/77/wP/B/8P/xP/G/8j/yf/L/8z/zf/M/8r/x//D/7//uv+2/7L/sf+v/63/q/+o/6f/pP+k/6T/pP+n/6n/qv+u/7D/s/+3/7f/sv+w/6v/qP+j/57/mv+U/5D/j/+O/4//kP+T/5X/mf+a/5v/n/+h/6P/pP+m/6f/qP+n/6X/ov+e/5n/kv+P/4v/iP+G/4T/hP+G/4f/iP+K/4z/j/+R/5P/lf+Z/5v/nv+g/6L/pf+m/6f/qf+p/6f/pv+k/6H/nv+a/5T/kP+N/4n/hv+C/3//f/+A/4L/hP+G/4j/iv+M/47/kP+T/5X/mP+Z/5r/mv+Z/5f/lP+R/47/jP+J/4L/fP91/2//bf9w/3L/df96/3//gf+E/4f/iP+K/4//kf+V/5n/mv+c/57/nv+c/5n/lf+R/47/jf+K/4f/gP97/3X/cv9s/2n/a/9u/3D/c/92/3f/d/9x/2r/Z/9i/2H/Y/9l/2j/b/9y/3b/eP98/3//g/+D/4T/hP+C/37/d/9s/2b/Yf9f/13/Xf9f/2D/Yv9m/2r/c/94/3v/fv+A/4L/hP+G/4b/hP+C/3//d/9t/2f/Yv9f/17/Xf9e/1//Yf9j/2b/af9u/3H/d/96/3v/e/94/3L/af9l/2D/Xv9b/1j/V/9X/1f/V/9Z/1v/Xv9g/2T/aP9u/3L/d/95/3n/d/9x/2n/Zv9i/1//Xf9b/1j/Vv9V/1T/Uv9S/1L/U/9V/1f/Wf9c/1//Yv9n/2r/b/9y/3f/d/9w/2f/Yf9d/1r/V/9U/0//T/9O/07/T/9U/1b/Wf9b/1//Yv9k/2f/aP9o/2f/Y/9d/1r/Vv9T/07/S/9J/0j/R/9G/0b/Rv9H/0n/TP9P/1T/Wf9c/1//Yf9j/2X/Zv9l/2L/Xv9b/1f/U/9P/0z/Sv9I/0X/Q/9A/z//Ov85/zn/Of88/z//Qv9G/0r/T/9W/1//Yv9l/2f/aP9o/2b/Yv9d/1r/Vv9U/0//TP9K/0f/Q/8//zn/M/8u/yn/J/8j/yH/IP8h/yL/J/8s/zL/O/9C/0f/TP9U/1f/WP9Y/1f/U/9N/0j/Qv88/zL/KP8g/yv/PP9J/1f/dQB1/7X/uv+9/8H/xP/H/8n/y//N/9D/0P/N/8r/x//E/8D/vf+5/7b/tP+0/7T/tP+1/7X/tf+1/7X/tf+0/7D/qv+m/5//mv+U/5D/j/+N/4z/jP+O/4//kP+T/5X/mf+a/5v/nP+e/5//of+j/6X/pv+n/6f/pf+j/5//mv+U/4//jP+J/4P/fP94/3b/cv9w/2//c/93/3n/fv+C/4b/iP+K/4z/jv+Q/5L/lP+W/5j/mf+a/5v/nP+b/5f/kv+P/4v/iP+F/4D/ev90/2v/Z/9j/2D/Yv9k/2f/av9v/3H/d/96/3//g/+E/4b/iP+J/4v/jP+O/5D/kv+T/5D/j/+M/4n/h/+C/3//e/92/3D/av9n/2P/YP9f/1//YP9j/2X/aP9s/3D/d/96/3//gf+E/4b/iP+J/4r/jP+O/5D/kv+T/5H/jv+L/4j/hf+A/3r/cv9p/2X/Y/9g/1//YP9i/2X/aP9t/3H/df96/3//gf+E/4b/iP+J/4r/jP+O/4//j/+M/4n/h/+B/3z/df9x/2n/Zf9j/2D/YP9j/2X/aP9t/3H/df96/3//gf+D/4T/hf+G/4b/hf+E/4L/f/96/3b/cf9p/2b/Y/9g/2D/Y/9l/2f/a/9v/3H/df96/3//gP+B/4L/gv+C/4L/gf+A/3z/ef92/3H/av9n/2T/Yv9h/2L/ZP9n/2r/b/9x/3X/ef98/3//gP+B/4L/gv+A/3z/ef91/2//a/9p/2X/Y/9h/2D/YP9j/2X/aP9t/3H/d/96/3z/f/9//33/ef91/2//a/9p/2b/Y/9h/2D/YP9j/2X/aP9s/2//cP9x/3L/cf9w/2v/aP9l/2L/Yf9f/1//YP9j/2X/aP9t/3H/df96/3//gP+B/4L/gv+A/33/eP90/2z/aP9m/2L/Yf9h/2L/ZP9n/2r/bv9w/3L/df95/3v/fP9+/3v/df9x/2n/Zv9i/1//Xv9d/13/Xf9e/1//Yf9j/2X/aP9s/27/bv9s/2n/Zv9k/2L/Yf9g/2D/Yv9k/2b/aP9s/3D/cv91/3b/cv9v/2n/Zv9k/2L/Yf9f/17/Xf9d/13/Xv9f/2D/Yv9k/2b/aP9s/23/bf9r/2f/Y/9f/1v/V/9W/1b/Vv9W/1f/Wf9b/1//Yv9l/2j/b/9x/3X/d/9z/2v/Z/9i/1//W/9Z/1f/Vf9V/1X/Vf9W/1j/Wv9d/2D/Y/9m/2n/bf9v/23/av9o/2X/Yv9f/1v/WP9W/1T/Uv9S/1L/U/9V/1f/Wf9b/1//Yf9j/2X/aP9p/2n/Zv9k/1//Wv9V/1D/TP9L/0n/R/9G/0b/Rv9H/0n/TP9P/1T/Wf9b/1//Yf9i/2L/Yf9f/1v/Vv9R/07/S/9I/0X/Qf8+/zv/Of85/zn/O/8//0L/Rv9K/0//Vf9Y/1v/Xf9d/1v/V/9T/07/S/9G/0H/Ov8y/yj/Iv8e/xr/Fv8U/xT/FP8V/xb/Gv8e/yL/KP8y/zr/Qf9G/0v/Tv9T/1T/Uf9O/0n/Q/88/zD/J/8e/xX/D/8L/wn/Cf8J/wv/D/8V/x7/J/8w/zz/Q/9J/04=",NA="data:audio/wav;base64,UklGRqgBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YYABAAC2/7n/wf/G/8z/1f/c/+D/5v/t//v/FwAnADgASgBYAGYAcgB8AIgAkgCeAKQAqgCuALQAugDAAMYA1ADfAOwBCAEmATMBQwFLAVMBXwFwAXgBigGbAcoB3gHyAgsCGgIuAkYCTgJWAl4CYgJnAm4CcwJ9Ao0CoAKqAsUC1ALmAvEDEgMgAyIDNAM+A0sDWANhA24DhAOOA5kDpwOxA7wDxwPQA94D/AQMBREFGgUrBTYFVwVeBW0FfQWMBZkFqgW8BcAF2AXuBhgGJgY0BkIGVwZsBn0GkgaqBrIGvgjECfUKFApsCnwKwgLhAu0DCQMbAysDRANVA2ADawOBBAgEGQQzBUMFWQVtBYIFlgWuBcwF2AYCBhMGMAZGBl0GcQeDB5gHvgjVCf8KbgrBCw0LJgswCz0LXgt/DBEMVwx5DI4MrAzBDNsO7xAFEbwS+hQIFGQU8xXfF0cYwRnlG5gd/h8IIAghGiMoI5wj8CQcJqon5SjVKlgr2iwILVouVC+UMMwwzDDeMP0x/zLfM/A02jX2N3E4zjneO3E9kj7TQCpBfUJEQtJFo0ZPR5NKK0uTTTdQN1AbUTdSO1M9VDhWNFdAWEhZSFoMXQxfEGQYZRhsGXEcgRyTHQMeFx9NIBYfdiC2ImUjhyTDJ5Uo/SkXLCst/C/NMUQ09DXcOJU6yD5mQHpCl0eWTCxPQVVuWXVfT2V/bYFyf3Xge4t+kH+sgLCAt4S9hbuIgomAioyNkJGSk5WWl5mbnZ6fo6Slpqeoqausrq+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19vf4+fr7/P3+/w==",xm="productionSoundMuted",Vm={start:xA,warning:VA,alarm:DA,success:NA},LA=()=>{const t=H.useRef(null),e=H.useRef({}),n=H.useRef(null),[r,i]=H.useState(()=>{try{const h=localStorage.getItem(xm);return h===null?!1:h==="true"}catch{return!1}});H.useEffect(()=>{localStorage.setItem(xm,String(r))},[r]);const s=H.useCallback(()=>{t.current||(t.current=new(window.AudioContext||window.webkitAudioContext));const h=t.current;h.state==="suspended"&&h.resume()},[]);H.useEffect(()=>{let h=!0;t.current||(t.current=new(window.AudioContext||window.webkitAudioContext));const d=t.current;return(async()=>{try{const y=Object.keys(Vm).map(async A=>{if(e.current[A])return;const V=await(await fetch(Vm[A])).arrayBuffer(),M=await d.decodeAudioData(V);h&&(e.current[A]=M)});await Promise.all(y)}catch(y){console.error("Error loading or decoding audio files:",y)}})(),()=>{h=!1}},[]);const a=H.useCallback((h,d=!1)=>{if(r)return;const g=t.current,y=e.current[h];if(!(!g||!y))if(g.state==="suspended")g.resume().then(()=>{const A=g.createBufferSource();A.buffer=y,A.connect(g.destination),A.loop=d,A.start(0),d&&(n.current=A)});else{const A=g.createBufferSource();A.buffer=y,A.connect(g.destination),A.loop=d,A.start(0),d&&(n.current=A)}},[r]),l=H.useCallback(()=>{if(n.current){try{n.current.stop()}catch{}n.current=null}},[]),u=H.useCallback(()=>{s(),i(h=>{const d=!h;return d&&l(),d})},[l,s]);return{isSoundMuted:r,toggleSoundMute:u,playStart:()=>a("start"),playWarning:()=>a("warning"),playAlarmLoop:()=>a("alarm",!0),stopAlarmLoop:l,playSuccess:()=>a("success")}},k_="productionState_v2",MA=()=>{try{const t=localStorage.getItem(k_);if(t)return JSON.parse(t).map(n=>({...n,recipe:n.recipeId?qy[n.recipeId]:void 0}))}catch(t){console.error("Error loading production state:",t)}return[]},OA=t=>{try{const e=t.map(({recipe:n,...r})=>r);localStorage.setItem(k_,JSON.stringify(e))}catch(e){console.error("Error saving production state:",e)}},FA=()=>{const[t,e]=H.useState(MA),n=H.useRef(null),{isSoundMuted:r,toggleSoundMute:i,playStart:s,playWarning:a,playAlarmLoop:l,stopAlarmLoop:u,playSuccess:h}=LA(),d=H.useRef(new Set),g=H.useRef([]),y=H.useCallback(()=>{n.current&&(clearInterval(n.current),n.current=null)},[]);H.useEffect(()=>{const D=g.current;t.forEach(F=>{const L=D.find(_=>_.id===F.id);L&&L.state!=="alarm"&&F.state==="alarm"&&l()}),g.current=t},[t,l]);const A=H.useCallback(()=>{e(D=>{const F=Date.now();let L=!1;const _=D.map(p=>{if(p.state!=="running")return p;L=!0;const v=Math.round((F-p.lastTickTimestamp)/1e3),E=Math.max(0,p.stepTimeLeft-v),P=Math.max(0,p.totalTimeLeft-v),R=`${p.id}-${p.currentStepIndex}`;return E>29&&E<=30&&!d.current.has(R)&&(a(),d.current.add(R)),E===0?{...p,stepTimeLeft:0,totalTimeLeft:P,state:"alarm",lastTickTimestamp:F}:{...p,stepTimeLeft:E,totalTimeLeft:P,lastTickTimestamp:F}});return L?_:D})},[a]),k=H.useCallback(()=>{y(),n.current=window.setInterval(A,1e3)},[y,A]);H.useEffect(()=>{e(D=>{const F=Date.now();return D.map(L=>{if(L.state!=="running")return L;const _=Math.round((F-L.lastTickTimestamp)/1e3),p=Math.max(0,L.stepTimeLeft-_),v=Math.max(0,L.totalTimeLeft-_);return p===0?{...L,state:"alarm",stepTimeLeft:0,totalTimeLeft:v}:{...L,stepTimeLeft:p,totalTimeLeft:v,lastTickTimestamp:F}})})},[]),H.useEffect(()=>(OA(t),t.some(F=>F.state==="running")?k():y(),y),[t,k,y]);const V=H.useCallback(D=>{const F=qy[D];if(!F)return;const L={id:`baking-${Date.now()}`,name:F.name,recipeId:D,recipe:F,type:"baking",state:"paused",currentStepIndex:0,steps:F.steps,totalTime:F.totalDuration,totalTimeLeft:F.totalDuration,stepTimeLeft:F.steps[0].duration,lastTickTimestamp:Date.now()};e(_=>[..._,L])},[]),M=H.useCallback((D,F)=>{const L=[{instruction:F,duration:D,isPauseStep:!1}],_={id:`heating-${Date.now()}`,name:F,type:"heating",state:"paused",currentStepIndex:0,steps:L,totalTime:D,totalTimeLeft:D,stepTimeLeft:D,lastTickTimestamp:Date.now()};e(p=>[...p,_])},[]),I=H.useCallback(D=>{u(),e(F=>F.map(L=>{if(L.id!==D)return L;if(L.state==="finished")return{...L,state:"paused"};if(L.currentStepIndex<L.steps.length-1){const _=L.currentStepIndex+1,p=L.steps[_];return{...L,state:"paused",currentStepIndex:_,stepTimeLeft:p.duration,lastTickTimestamp:Date.now()}}else return h(),{...L,state:"finished",stepTimeLeft:0,lastTickTimestamp:Date.now()}}))},[u,h]),w=H.useCallback(D=>{e(F=>F.map(L=>{if(L.id!==D||L.state==="alarm"||L.state==="finished")return L;const _=L.state==="paused"&&L.totalTimeLeft===L.totalTime;return L.state==="running"?{...L,state:"paused"}:(_&&s(),{...L,state:"running",lastTickTimestamp:Date.now()})}))},[s]),C=H.useCallback(D=>{u(),e(F=>F.filter(L=>L.id!==D))},[u]);return{processes:t,startBakingProcess:V,startHeatingProcess:M,advanceProcess:I,togglePauseProcess:w,cancelProcess:C,isSoundMuted:r,toggleSoundMute:i}},$c=Js(De,"categories"),x_=[{name:"Secos"},{name:"Refrigerados"},{name:"Lcteos"},{name:"Bebidas"},{name:"Carnes"},{name:"Frutas y Verduras"}],jA=async()=>{console.log("Seeding initial categories to Firestore...");const t=io(De);x_.forEach(e=>{const n=it($c);t.set(n,e)}),await t.commit(),console.log("Initial categories seeded.")},UA=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const s=to($c,pi("name")),a=ro(s,l=>{if(l.empty&&x_.length>0){jA();return}const u=l.docs.map(h=>({id:h.id,...h.data()}));e(u)},l=>{console.error("Error fetching categories:",l)});return()=>a()},[]),{categories:t,addCategory:async s=>{try{await no($c,s)}catch(a){console.error("Error adding category:",a)}},updateCategory:async s=>{const{id:a,...l}=s,u=it(De,"categories",a);try{await mi(u,l)}catch(h){console.error("Error updating category:",h)}},deleteCategory:async s=>{const a=it(De,"categories",s);try{await Tf(a)}catch(l){console.error("Error deleting category:",l)}}}},Dm=Js(De,"recipeFeedback"),bA=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const r=to(Dm,pi("date","desc")),i=ro(r,s=>{const a=s.docs.map(l=>({id:l.id,...l.data()}));e(a)},s=>{console.error("Error fetching recipe feedback:",s)});return()=>i()},[]),{feedbackLog:t,addFeedback:async r=>{try{await no(Dm,{...r,date:new Date().toISOString()})}catch(i){console.error("Error adding feedback:",i)}}}},zA="data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU",BA=()=>{const t=H.useRef(null),e=H.useCallback(()=>{t.current||(t.current=new Audio(zA))},[]);return{playAlert:H.useCallback(()=>{e(),t.current&&(t.current.currentTime=0,t.current.play().catch(r=>{console.warn("Audio playback failed:",r)}))},[e])}},Nm=H.lazy(()=>ol(()=>import("./BreadProductionScreen-B3FAH_aq.js"),__vite__mapDeps([0,1]))),$A=H.lazy(()=>ol(()=>import("./OperationsScreen-DRcMpMJ9.js"),__vite__mapDeps([2,1]))),WA=H.lazy(()=>ol(()=>import("./InventoryScreen-DvufexOC.js"),__vite__mapDeps([3,1]))),HA=H.lazy(()=>ol(()=>import("./SettingsScreen-2Dwj2NMW.js"),__vite__mapDeps([4,1]))),qA=t=>{const e=new Date,[n,r]=t.split(":").map(Number),i=new Date;return i.setHours(n,r,0,0),Math.round((i.getTime()-e.getTime())/1e3/60)},QA=()=>S.jsx("div",{className:"w-full h-full flex items-center justify-center",children:S.jsx(nn,{name:"refresh-cw",className:"animate-spin text-blue-500",size:48})}),KA=()=>{const[t,e]=H.useState(we.Baking),[n,r]=H.useState(!1),i=FA(),s=SA(),a=CA(),l=kA(),u=UA(),h=bA(),{playAlert:d}=BA(),{processes:g}=i,{tasks:y}=s,{items:A}=a,[k,V]=H.useState({}),M=H.useMemo(()=>{const p=new Date;return p.setMinutes(p.getMinutes()-p.getTimezoneOffset()),p.toISOString().split("T")[0]},[]);H.useEffect(()=>{const p=()=>{const E={};y.forEach(P=>{if(P.date===M&&P.status!=="done"){const R=qA(P.time);let T="normal";R<=0?T="due":R<=15&&(T="imminent"),E[P.id]={diff:R,status:T}}}),V(E)};p();const v=setInterval(p,1e4);return()=>clearInterval(v)},[y,M]);const I=H.useMemo(()=>y.filter(E=>E.date===M&&E.isCritical&&E.status!=="done"&&k[E.id]).map(E=>({task:E,diff:k[E.id].diff})).filter(({diff:E})=>E<=30&&E>=-15).sort((E,P)=>E.diff-P.diff),[y,k,M]),w=H.useRef(new Set);H.useEffect(()=>{const p=new Set(I.map(v=>`task-${v.task.id}`));p.forEach(v=>{w.current.has(v)||(d(),w.current.add(v))}),w.current.forEach(v=>{v.startsWith("task-")&&!p.has(v)&&w.current.delete(v)})},[I,d]);const C=H.useMemo(()=>I.slice(0,3),[I]),D=H.useMemo(()=>y.filter(p=>p.status==="inprogress"),[y]),F=H.useMemo(()=>A.filter(p=>p.currentStock<=p.minStock),[A]),L=()=>{switch(t){case we.Baking:return S.jsx(Nm,{productionHook:i,recipeLogHook:h});case we.Operations:return S.jsx($A,{kanbanHook:s,criticalTasks:I});case we.Inventory:return S.jsx(WA,{inventoryHook:a,providers:l.providers,categories:u.categories});case we.Settings:return S.jsx(HA,{providersHook:l,categoriesHook:u,recipeLogHook:h});default:return S.jsx(Nm,{productionHook:i,recipeLogHook:h})}},_=()=>{switch(t){case we.Baking:return"Produccin de Pan";case we.Operations:return"Operaciones";case we.Inventory:return"Inventario";case we.Settings:return"Configuracin";default:return"Cafestesia"}};return S.jsx("div",{className:"w-full min-h-screen md:p-4 flex items-center justify-center bg-gray-100 text-gray-800",children:S.jsxs("div",{className:"app-container w-full h-screen max-w-5xl bg-white md:rounded-xl shadow-lg overflow-hidden relative border border-gray-200",children:[n&&S.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 z-40",onClick:()=>r(!1),"aria-hidden":"true"}),S.jsxs("div",{className:"grid md:grid-cols-[240px_1fr] h-full",children:[S.jsx(bw,{activeScreen:t,setActiveScreen:e,processes:g,urgentTasks:C,shoppingListItems:F,inProgressTasks:D,isOpen:n,onClose:()=>r(!1)}),S.jsxs("main",{className:"main-content flex flex-col overflow-y-auto h-full",children:[S.jsxs("header",{className:"main-content-header p-4 md:p-6 border-b border-gray-200 flex justify-between items-center flex-shrink-0",children:[S.jsx("button",{className:"md:hidden p-2 -ml-2 text-gray-600 hover:text-blue-600",onClick:()=>r(!0),children:S.jsx(nn,{name:"menu",size:24})}),S.jsx("h2",{className:"text-xl md:text-3xl font-bold text-blue-600",children:_()}),S.jsx("div",{className:"md:hidden w-8"})," "]}),S.jsx("div",{className:"flex-grow relative",children:S.jsx("div",{className:"absolute inset-0 overflow-y-auto relative",children:S.jsx(H.Suspense,{fallback:S.jsx(QA,{}),children:L()})})})]})]})]})})},V_=document.getElementById("root");if(!V_)throw new Error("Could not find root element to mount to");const GA=Cu.createRoot(V_);GA.render(S.jsx(S0.StrictMode,{children:S.jsx(KA,{})}));export{nn as I,qy as R,ZA as T,JA as a,XA as b,S0 as c,YA as d,S as j,H as r};
