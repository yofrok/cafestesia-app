import{r as l,j as e,I as v,f as ge,R as pe,q as je,g as fe,h as ye,o as Ne,a as W,d as ee,i as ve,k as we,l as Ce,T as Se}from"./index-CE1MFFCv.js";import{M as G}from"./Modal-dsQ9zPJa.js";import{u as ke}from"./useBeverages-BdwPV319.js";const Ee=({isOpen:r,onClose:n,onSave:x,onDelete:p,provider:t})=>{const[s,a]=l.useState("");l.useEffect(()=>{r&&a((t==null?void 0:t.name)||"")},[r,t]);const i=c=>{if(c.preventDefault(),!s.trim())return;const j={name:s.trim()};x(t?{...j,id:t.id}:j),n()},u=()=>{t&&window.confirm(`Â¿EstÃ¡s seguro de que quieres eliminar al proveedor "${t.name}"?`)&&(p(t.id),n())};return e.jsx(G,{isOpen:r,onClose:n,title:t?"Editar Proveedor":"AÃ±adir Proveedor",children:e.jsxs("form",{onSubmit:i,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre del Proveedor"}),e.jsx("input",{type:"text",value:s,onChange:c=>a(c.target.value),required:!0,autoFocus:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("div",{children:t&&e.jsx("button",{type:"button",onClick:u,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Eliminar"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:n,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})]})})},Ie=({isOpen:r,onClose:n,onSave:x,onDelete:p,category:t})=>{const[s,a]=l.useState("");l.useEffect(()=>{r&&a((t==null?void 0:t.name)||"")},[r,t]);const i=c=>{if(c.preventDefault(),!s.trim())return;const j={name:s.trim()};x(t?{...j,id:t.id}:j),n()},u=()=>{t&&window.confirm(`Â¿EstÃ¡s seguro de que quieres eliminar la categorÃ­a "${t.name}"?`)&&(p(t.id),n())};return e.jsx(G,{isOpen:r,onClose:n,title:t?"Editar CategorÃ­a":"AÃ±adir CategorÃ­a",children:e.jsxs("form",{onSubmit:i,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre de la CategorÃ­a"}),e.jsx("input",{type:"text",value:s,onChange:c=>a(c.target.value),required:!0,autoFocus:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("div",{children:t&&e.jsx("button",{type:"button",onClick:u,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Eliminar"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:n,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})]})})},Re=({rating:r})=>e.jsx("div",{className:"flex",children:[...Array(5)].map((n,x)=>e.jsx(v,{name:"star",size:16,className:x<r?"text-yellow-400 fill-current":"text-gray-300"},x))}),De=({isOpen:r,onClose:n,recipe:x,feedbackLog:p})=>{const t=[...p].sort((s,a)=>new Date(a.date).getTime()-new Date(s.date).getTime());return e.jsxs(G,{isOpen:r,onClose:n,title:`BitÃ¡cora de: ${x.name}`,children:[e.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:t.length>0?e.jsx("div",{className:"space-y-4",children:t.map(s=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:new Date(s.date).toLocaleString("es-ES",{dateStyle:"long",timeStyle:"short"})}),e.jsx(Re,{rating:s.rating})]}),e.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:s.notes||"Sin notas."})]},s.id))}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay feedback registrado para esta receta todavÃ­a."})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:n,className:"py-2 px-6 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cerrar"})})]})},Ae=({isOpen:r,onClose:n,onSave:x,onDelete:p,user:t})=>{const[s,a]=l.useState(""),[i,u]=l.useState("#CCCCCC"),[c,j]=l.useState("");l.useEffect(()=>{r&&(a((t==null?void 0:t.name)||""),u((t==null?void 0:t.color)||"#CCCCCC"),j((t==null?void 0:t.phone)||""))},[r,t]);const S=d=>{if(d.preventDefault(),!s.trim())return;const b={name:s.trim(),color:i,phone:c.trim()};x(t?{...b,id:t.id}:b),n()},h=()=>{t&&window.confirm(`Â¿EstÃ¡s seguro de que quieres eliminar a "${t.name}"? Esto no se puede deshacer.`)&&(p(t.id),n())};return e.jsx(G,{isOpen:r,onClose:n,title:t?"Editar Usuario":"AÃ±adir Usuario",children:e.jsxs("form",{onSubmit:S,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre del Usuario"}),e.jsx("input",{type:"text",value:s,onChange:d=>a(d.target.value),required:!0,autoFocus:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"NÃºmero de WhatsApp (Opcional)"}),e.jsx("input",{type:"tel",value:c,onChange:d=>j(d.target.value),placeholder:"+521234567890",className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Color de Etiqueta"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:i,onChange:d=>u(d.target.value),className:"w-12 h-10 p-1 border border-gray-300 rounded-md cursor-pointer"}),e.jsx("input",{type:"text",value:i,onChange:d=>u(d.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 font-mono focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("div",{children:t&&e.jsx("button",{type:"button",onClick:h,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Eliminar"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:n,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})]})})},Pe=({steps:r,setSteps:n})=>{const x=(s,a,i)=>{const u=[...r];a==="duration"?u[s][a]=typeof i=="string"?parseInt(i,10)*60:i:u[s][a]=i,n(u)},p=()=>{n([...r,{duration:300,instruction:"Nuevo paso",type:"active"}])},t=s=>{r.length<=1||n(r.filter((a,i)=>i!==s))};return e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-700 mb-2",children:"Pasos del Proceso"}),e.jsxs("div",{className:"space-y-3 bg-gray-100 p-3 rounded-lg border",children:[r.map((s,a)=>e.jsx("div",{className:"flex flex-col gap-2 bg-white p-3 rounded-md shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("span",{className:"font-bold text-gray-500 mt-2",children:[a+1,"."]}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("textarea",{value:s.instruction,onChange:i=>x(a,"instruction",i.target.value),rows:2,placeholder:"InstrucciÃ³n del paso",className:"w-full p-2 text-sm border border-gray-300 rounded-md mb-2"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center flex-grow",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 mr-2 uppercase",children:"DuraciÃ³n:"}),e.jsx("input",{type:"number",value:s.duration/60,onChange:i=>x(a,"duration",i.target.value),min:"1",className:"w-16 p-1 text-sm border border-gray-300 rounded-md text-center"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"min"})]}),e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{type:"button",onClick:()=>x(a,"type","active"),className:`px-3 py-1 text-xs font-bold rounded-md transition-colors ${s.type==="active"||!s.type?"bg-white text-blue-600 shadow-sm":"text-gray-500"}`,children:"Manual"}),e.jsx("button",{type:"button",onClick:()=>x(a,"type","passive"),className:`px-3 py-1 text-xs font-bold rounded-md transition-colors ${s.type==="passive"?"bg-white text-teal-600 shadow-sm":"text-gray-500"}`,children:"Espera"})]})]})]}),e.jsx("button",{type:"button",onClick:()=>t(a),disabled:r.length<=1,className:"p-2 text-red-500 hover:bg-red-100 rounded-full disabled:text-gray-400 disabled:cursor-not-allowed mt-2",children:e.jsx(v,{name:"trash-2",size:18})})]})},a)),e.jsxs("button",{type:"button",onClick:p,className:"w-full mt-2 py-2 px-4 bg-blue-100 text-blue-700 font-semibold rounded-lg hover:bg-blue-200 transition-colors text-sm flex items-center justify-center gap-2",children:[e.jsx(v,{name:"plus",size:16}),"AÃ±adir Paso"]})]})]})},ze=({variants:r,setVariants:n,baseSteps:x})=>{const[p,t]=l.useState(""),[s,a]=l.useState(""),[i,u]=l.useState(null),c=()=>{if(!p.trim())return;const d={id:`var-${Date.now()}`,name:p.trim(),description:s.trim(),stepOverrides:Array(x.length).fill(null)};n([...r,d]),t(""),a("")},j=d=>{n(r.filter(b=>b.id!==d)),(i==null?void 0:i.id)===d&&u(null)},S=(d,b,N)=>{n(w=>w.map(f=>f.id===d?{...f,[b]:N}:f))},h=(d,b,N)=>{n(w=>w.map(f=>{if(f.id===d){const k=[...f.stepOverrides],D=N.trim()===x[b].instruction.trim()?null:N.trim();return D===null?k[b]=null:k[b]={...k[b]||{},instruction:D},k[b]&&Object.keys(k[b]).length===0&&(k[b]=null),{...f,stepOverrides:k}}return f}))};return e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-700 mb-2",children:"Variantes de Receta (Opcional)"}),e.jsxs("div",{className:"space-y-3 bg-gray-100 p-3 rounded-lg border",children:[r.map(d=>{const b=(i==null?void 0:i.id)===d.id;return e.jsxs("div",{className:"bg-white p-3 rounded-md shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[b?e.jsx("input",{type:"text",value:d.name,onChange:N=>S(d.id,"name",N.target.value),className:"font-semibold text-gray-800 p-1 border border-gray-300 rounded-md w-full mr-2"}):e.jsx("h4",{className:"font-semibold text-gray-800",children:d.name}),e.jsxs("div",{children:[e.jsx("button",{type:"button",onClick:()=>u(b?null:d),className:`p-2 rounded-full transition-colors ${b?"bg-blue-100 text-blue-600":"text-gray-500 hover:bg-gray-100"}`,children:e.jsx(v,{name:"pencil",size:16})}),e.jsx("button",{type:"button",onClick:()=>j(d.id),className:"p-2 text-red-500 hover:bg-red-100 rounded-full",children:e.jsx(v,{name:"trash-2",size:16})})]})]}),b&&e.jsxs("div",{className:"space-y-2 mt-2 pt-2 border-t",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("label",{className:"text-xs text-gray-500",children:"DescripciÃ³n de la Variante"}),e.jsx("input",{type:"text",value:d.description||"",onChange:N=>S(d.id,"description",N.target.value),placeholder:"Ej: 1 charola (6-8 pzas)",className:"w-full p-1 border border-gray-300 rounded-md"})]}),x.map((N,w)=>{const f=d.stepOverrides[w];return e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsxs("span",{className:"font-bold text-gray-500 mt-2",children:[w+1,"."]}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("label",{className:"text-xs text-gray-500",children:['InstrucciÃ³n (Base: "',N.instruction,'")']}),e.jsx("textarea",{value:(f==null?void 0:f.instruction)||N.instruction,onChange:k=>h(d.id,w,k.target.value),rows:2,className:"w-full p-1 border border-gray-300 rounded-md"})]})]},w)})]})]},d.id)}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-2 pt-2",children:[e.jsx("input",{type:"text",value:p,onChange:d=>t(d.target.value),placeholder:"Nombre de variante (ej: Media Charola)",className:"w-full p-2 border border-gray-300 rounded-md bg-white text-sm"}),e.jsx("input",{type:"text",value:s,onChange:d=>a(d.target.value),placeholder:"DescripciÃ³n (ej: 1 charola)",className:"w-full p-2 border border-gray-300 rounded-md bg-white text-sm"}),e.jsx("button",{type:"button",onClick:c,className:"flex-shrink-0 py-2 px-4 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 text-sm",children:"AÃ±adir"})]})]})]})},Me=({ingredient:r,index:n,inventoryItems:x,onUpdate:p,onRemove:t})=>{const[s,a]=l.useState(String(r.quantity||"")),i=x.find(c=>c.id===r.inventoryItemId);l.useEffect(()=>{const c=parseFloat(s);c!==r.quantity&&!(Number.isNaN(c)&&!r.quantity)&&a(String(r.quantity||""))},[r.quantity]);const u=c=>{a(c);const j=parseFloat(c);isNaN(j)?p(n,"quantity",0):p(n,"quantity",j)};return e.jsxs("div",{className:"flex gap-2 items-center bg-white p-2 rounded border border-emerald-100",children:[e.jsx("div",{className:"flex-grow",children:e.jsx("select",{value:r.inventoryItemId,onChange:c=>p(n,"inventoryItemId",c.target.value),className:"w-full p-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-emerald-500 focus:outline-none",children:x.map(c=>e.jsxs("option",{value:c.id,children:[c.name," (",c.unit,")"]},c.id))})}),e.jsxs("div",{className:"flex items-center gap-1 w-28 relative",children:[e.jsx("input",{type:"number",value:s,onChange:c=>u(c.target.value),className:"w-full p-1 pr-8 border border-gray-300 rounded text-sm text-center focus:ring-2 focus:ring-emerald-500 focus:outline-none",placeholder:"0",step:"any"}),e.jsx("span",{className:"absolute right-2 text-xs text-gray-500 pointer-events-none font-bold bg-white/80 px-1",children:i==null?void 0:i.unit})]}),e.jsx("button",{type:"button",onClick:()=>t(n),className:"text-red-400 hover:text-red-600 p-1 transition-colors",title:"Eliminar ingrediente",children:e.jsx(v,{name:"trash-2",size:16})})]})},te=({ingredients:r,setIngredients:n,inventoryItems:x})=>{const p=()=>{x.length!==0&&n([...r,{inventoryItemId:x[0].id,quantity:0}])},t=a=>{n(r.filter((i,u)=>u!==a))},s=(a,i,u)=>{const c=[...r];c[a][i]=u,n(c)};return e.jsxs("div",{className:"mt-4 border-t pt-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-emerald-700 mb-2 flex items-center gap-2",children:[e.jsx(v,{name:"archive",size:20}),"Consumo de Inventario"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Define quÃ© ingredientes se descuentan al preparar un lote estÃ¡ndar de esta receta."}),e.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-200 space-y-3",children:[r.length>0?r.map((a,i)=>e.jsx(Me,{index:i,ingredient:a,inventoryItems:x,onUpdate:s,onRemove:t},`${i}-${a.inventoryItemId}`)):e.jsx("p",{className:"text-sm text-gray-400 text-center italic py-2",children:"No hay ingredientes configurados."}),e.jsxs("button",{type:"button",onClick:p,className:"w-full py-2 bg-white border border-emerald-300 text-emerald-700 font-semibold rounded hover:bg-emerald-100 transition-colors text-sm flex items-center justify-center gap-2 shadow-sm",children:[e.jsx(v,{name:"plus",size:14}),"AÃ±adir Ingrediente"]})]})]})},qe=({isOpen:r,onClose:n,onSave:x,onDelete:p,recipe:t})=>{const{items:s}=ge(),[a,i]=l.useState(""),[u,c]=l.useState(""),[j,S]=l.useState(""),[h,d]=l.useState(""),[b,N]=l.useState(""),[w,f]=l.useState([]),[k,D]=l.useState([]),[$,I]=l.useState([]),[q,M]=l.useState(""),[U,E]=l.useState(0);l.useEffect(()=>{r&&(i((t==null?void 0:t.name)||""),c((t==null?void 0:t.pluralName)||""),S((t==null?void 0:t.setupInstruction)||""),d((t==null?void 0:t.baseVariantName)||"Receta EstÃ¡ndar"),N((t==null?void 0:t.baseVariantDescription)||""),f((t==null?void 0:t.steps)||[{duration:300,instruction:"Nuevo paso",type:"active"}]),D((t==null?void 0:t.variants)||[]),I((t==null?void 0:t.ingredients)||[]),M((t==null?void 0:t.outputInventoryItemId)||""),E((t==null?void 0:t.outputQuantity)||0))},[r,t]);const A=y=>{y.preventDefault();const O=w.reduce((F,L)=>F+L.duration,0);x({name:a,pluralName:u,setupInstruction:j,baseVariantName:h,baseVariantDescription:b,steps:w,variants:k,totalDuration:O,ingredients:$,outputInventoryItemId:q||void 0,outputQuantity:U||void 0}),n()},z=()=>{t&&window.confirm(`âš ï¸ Â¿EstÃ¡s seguro de eliminar la receta "${t.name}"?

Esta acciÃ³n no se puede deshacer y perderÃ¡s el historial asociado.`)&&(p(t.id),n())};return e.jsx(G,{isOpen:r,onClose:n,title:t?`Editar Receta: ${t.name}`:"AÃ±adir Nueva Receta",children:e.jsxs("form",{onSubmit:A,className:"flex flex-col gap-6 max-h-[80vh] overflow-y-auto pr-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Q,{label:"Nombre de la Receta (Singular)",children:e.jsx("input",{type:"text",value:a,onChange:y=>i(y.target.value),required:!0})}),e.jsx(Q,{label:"Nombre para Notificaciones (Plural)",children:e.jsx("input",{type:"text",value:u,onChange:y=>c(y.target.value),placeholder:"Ej: Roles de Canela listos",required:!0})})]}),e.jsx(Q,{label:"InstrucciÃ³n de ConfiguraciÃ³n Inicial",children:e.jsx("textarea",{value:j,onChange:y=>S(y.target.value),rows:2})}),e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"text-md font-bold text-blue-800 mb-2",children:"ConfiguraciÃ³n de la Receta Base"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Q,{label:"Nombre de la Variante Base",children:e.jsx("input",{type:"text",value:h,onChange:y=>d(y.target.value),required:!0})}),e.jsx(Q,{label:"DescripciÃ³n de la Variante Base",children:e.jsx("input",{type:"text",value:b,onChange:y=>N(y.target.value),placeholder:"Ej: 2 charolas (12 pzas)"})})]})]}),e.jsx(Pe,{steps:w,setSteps:f}),e.jsx(ze,{variants:k,setVariants:D,baseSteps:w}),e.jsx(te,{ingredients:$,setIngredients:I,inventoryItems:s}),e.jsxs("div",{className:"mt-2 p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsx("h4",{className:"font-bold text-indigo-800 mb-2 text-sm",children:"ProducciÃ³n (Producto Terminado)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Producto que genera"}),e.jsxs("select",{value:q,onChange:y=>M(y.target.value),className:"w-full p-1.5 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"-- Ninguno --"}),s.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Cantidad producida"}),e.jsx("input",{type:"number",value:U,onChange:y=>E(parseFloat(y.target.value)),className:"w-full p-1.5 border border-gray-300 rounded text-sm",placeholder:"0"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t sticky bottom-0 bg-white",children:[e.jsx("div",{children:t&&e.jsx("button",{type:"button",onClick:z,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Eliminar"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:n,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar Receta"})]})]})]})})},Q=({label:r,children:n})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:r}),pe.cloneElement(n,{className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),se=ye(W,"task_templates"),Oe=()=>{const[r,n]=l.useState([]);return l.useEffect(()=>{const s=je(se,fe("title")),a=Ne(s,i=>{const u=i.docs.map(c=>({id:c.id,...c.data()}));n(u)},i=>{console.error("Error fetching routines:",i)});return()=>a()},[]),{routines:r,addRoutine:async s=>{try{await Ce(se,s)}catch(a){console.error("Error adding routine:",a)}},updateRoutine:async s=>{const{id:a,...i}=s,u=ee(W,"task_templates",a);try{await we(u,i)}catch(c){console.error("Error updating routine:",c)}},deleteRoutine:async s=>{const a=ee(W,"task_templates",s);try{await ve(a)}catch(i){console.error("Error deleting routine:",i)}}}},Te=[{label:"Lunes",value:1},{label:"Martes",value:2},{label:"MiÃ©rcoles",value:3},{label:"Jueves",value:4},{label:"Viernes",value:5},{label:"SÃ¡bado",value:6},{label:"Domingo",value:0}],Be=({isOpen:r,onClose:n,onSave:x,onUpdate:p,onDelete:t,routine:s,users:a})=>{var P;const[i,u]=l.useState(""),[c,j]=l.useState("08:00"),[S,h]=l.useState("30"),[d,b]=l.useState("pre-apertura"),[N,w]=l.useState(""),[f,k]=l.useState(!1),[D,$]=l.useState(""),[I,q]=l.useState([]),[M,U]=l.useState(""),[E,A]=l.useState([]),[z,y]=l.useState(((P=a[0])==null?void 0:P.name)||""),[O,V]=l.useState({});l.useEffect(()=>{var m;r&&(u((s==null?void 0:s.title)||""),j((s==null?void 0:s.time)||"08:00"),h(String((s==null?void 0:s.duration)||"30")),b((s==null?void 0:s.shift)||"pre-apertura"),w((s==null?void 0:s.zone)||""),k((s==null?void 0:s.isCritical)||!1),$((s==null?void 0:s.notes)||""),q((s==null?void 0:s.subtasks)||[]),A((s==null?void 0:s.frequencyDays)||[]),y((s==null?void 0:s.defaultEmployee)||((m=a[0])==null?void 0:m.name)||""),V((s==null?void 0:s.customAssignments)||{}))},[r,s,a]);const F=m=>{if(m.preventDefault(),!i.trim())return;const C={title:i,subtasks:I,notes:D,frequencyDays:E,time:c,duration:parseInt(S),shift:d,zone:N,isCritical:f,defaultEmployee:z,customAssignments:O};s?p({...C,id:s.id}):x(C),n()},L=m=>{if(E.includes(m)){A(R=>R.filter(T=>T!==m));const C={...O};delete C[m],V(C)}else A(C=>[...C,m])},K=(m,C)=>{if(C===z){const R={...O};delete R[m],V(R)}else V(R=>({...R,[m]:C}))},g=()=>{M.trim()&&(q([...I,{id:`st-${Date.now()}`,text:M,isCompleted:!1}]),U(""))};return e.jsx(G,{isOpen:r,onClose:n,title:s?"Editar Rutina":"Nueva Rutina Maestra",children:e.jsxs("form",{onSubmit:F,className:"flex flex-col gap-5 max-h-[80vh] overflow-y-auto pr-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Nombre de la Tarea"}),e.jsx("input",{type:"text",value:i,onChange:m=>u(m.target.value),required:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",placeholder:"Ej: Limpieza de MÃ¡quina"})]}),e.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"font-bold text-gray-700",children:"ProgramaciÃ³n y AsignaciÃ³n"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Por defecto:",e.jsx("select",{value:z,onChange:m=>y(m.target.value),className:"ml-2 p-1 rounded border border-gray-300 font-bold text-blue-600",children:a.map(m=>e.jsx("option",{value:m.name,children:m.name},m.id))})]})]}),e.jsx("div",{className:"space-y-2",children:Te.map(m=>{var _;const C=E.includes(m.value),R=O[m.value]||z,T=((_=a.find(B=>B.name===R))==null?void 0:_.color)||"#ccc";return e.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md transition-colors ${C?"bg-white shadow-sm border border-blue-200":"opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:()=>L(m.value),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 cursor-pointer"}),e.jsx("span",{className:`font-medium ${C?"text-gray-900":"text-gray-500"}`,children:m.label})]}),C&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Asignar a:"}),e.jsx("div",{className:"relative",children:e.jsx("select",{value:R,onChange:B=>K(m.value,B.target.value),className:"pl-2 pr-6 py-1 text-sm border border-gray-300 rounded-md bg-gray-50 appearance-none cursor-pointer hover:border-blue-400 focus:outline-none",style:{borderLeftWidth:"4px",borderLeftColor:T},children:a.map(B=>e.jsx("option",{value:B.name,children:B.name},B.id))})})]})]},m.value)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Hora (24h)"}),e.jsx("input",{type:"time",value:c,onChange:m=>j(m.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"DuraciÃ³n"}),e.jsx("select",{value:S,onChange:m=>h(m.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:Se.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Turno"}),e.jsxs("select",{value:d,onChange:m=>b(m.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:[e.jsx("option",{value:"pre-apertura",children:"Pre-apertura"}),e.jsx("option",{value:"matutino",children:"Matutino"}),e.jsx("option",{value:"cierre",children:"Cierre"}),e.jsx("option",{value:"default",children:"Otro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Zona"}),e.jsx("input",{type:"text",value:N,onChange:m=>w(m.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Subtareas Maestras"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[e.jsx("ul",{className:"mb-2 space-y-1",children:I.map((m,C)=>e.jsxs("li",{className:"flex justify-between text-sm bg-white p-1 px-2 rounded border border-gray-100",children:[e.jsx("span",{children:m.text}),e.jsx("button",{type:"button",onClick:()=>q(I.filter((R,T)=>T!==C)),className:"text-red-400 hover:text-red-600",children:e.jsx(v,{name:"x",size:14})})]},C))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:M,onChange:m=>U(m.target.value),placeholder:"Nueva subtarea...",className:"flex-1 p-1 text-sm border rounded"}),e.jsx("button",{type:"button",onClick:g,className:"px-3 bg-blue-500 text-white rounded text-sm",children:e.jsx(v,{name:"plus",size:14})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:f,onChange:m=>k(m.target.checked),className:"w-4 h-4 text-red-600"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Marcar como CrÃ­tica"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[s&&e.jsx("button",{type:"button",onClick:()=>{window.confirm("Borrar rutina?")&&t(s.id),n()},className:"px-4 py-2 text-red-600 bg-red-50 rounded-lg hover:bg-red-100",children:"Eliminar"}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 font-bold",children:"Guardar Rutina"})]})]})]})})},$e=({users:r})=>{const{routines:n,addRoutine:x,updateRoutine:p,deleteRoutine:t}=Oe(),[s,a]=l.useState(!1),[i,u]=l.useState(null),c=()=>{u(null),a(!0)},j=h=>{u(h),a(!0)},S=h=>{if(h.length===7)return"Todos los dÃ­as";if(h.length===0)return"Sin programar";const d=["D","L","M","M","J","V","S"];return h.sort().map(b=>d[b]).join(", ")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Rutinas Maestras"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Configura tareas recurrentes y sus asignaciones automÃ¡ticas."})]}),e.jsxs("button",{onClick:c,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(v,{name:"plus-circle",size:16}),"Nueva Rutina"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.map(h=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all cursor-pointer group",onClick:()=>j(h),children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 group-hover:text-blue-600 transition-colors",children:h.title}),e.jsx(v,{name:"pencil",size:16,className:"text-gray-300 group-hover:text-blue-500"})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{name:"calendar",size:14,className:"text-gray-400"}),e.jsx("span",{children:S(h.frequencyDays)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{name:"check-circle",size:14,className:"text-gray-400"}),e.jsxs("span",{children:[h.time," (",h.shift,")"]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"AsignaciÃ³n:"}),e.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded text-gray-700 font-medium",children:h.defaultEmployee}),Object.keys(h.customAssignments).length>0&&e.jsxs("span",{className:"bg-blue-50 text-blue-600 px-2 py-1 rounded font-bold",children:["+",Object.keys(h.customAssignments).length," Excepciones"]})]})]},h.id)),n.length===0&&e.jsx("div",{className:"col-span-full text-center py-10 text-gray-400 bg-gray-50 rounded-xl border border-dashed border-gray-300",children:e.jsx("p",{children:"No hay rutinas configuradas."})})]}),e.jsx(Be,{isOpen:s,onClose:()=>a(!1),onSave:x,onUpdate:p,onDelete:t,routine:i,users:r})]})},Ue=({isOpen:r,onClose:n,onSave:x,onUpdate:p,onDelete:t,beverage:s,inventoryItems:a})=>{const[i,u]=l.useState(""),[c,j]=l.useState("beverage"),[S,h]=l.useState("caliente"),[d,b]=l.useState(""),[N,w]=l.useState(""),[f,k]=l.useState(!1),[D,$]=l.useState([]),[I,q]=l.useState(""),[M,U]=l.useState(""),[E,A]=l.useState("none"),[z,y]=l.useState(""),[O,V]=l.useState([]);l.useEffect(()=>{var g,P,m;r&&(u((s==null?void 0:s.name)||""),j((s==null?void 0:s.type)||"beverage"),h((s==null?void 0:s.category)||"caliente"),b((s==null?void 0:s.recipe)||""),w(s!=null&&s.modifiers?s.modifiers.join(", "):""),k((s==null?void 0:s.hasSizes)||!1),$((s==null?void 0:s.sizes)||[]),A(((g=s==null?void 0:s.stockConfig)==null?void 0:g.mode)||"none"),y(((P=s==null?void 0:s.stockConfig)==null?void 0:P.directItemId)||""),V(((m=s==null?void 0:s.stockConfig)==null?void 0:m.ingredients)||[]))},[r,s]);const F=g=>{if(g.preventDefault(),!i.trim())return;const P=N.split(",").map(T=>T.trim()).filter(T=>T!==""),R=JSON.parse(JSON.stringify({name:i,type:c,category:S,recipe:d,modifiers:P,hasSizes:f,sizes:D,stockConfig:{mode:E,directItemId:E==="direct"?z:void 0,ingredients:E==="recipe"?O:void 0}}));s?p({...R,id:s.id}):x(R),n()},L=()=>{I.trim()&&($([...D,{name:I.trim(),recipe:M.trim()}]),q(""),U(""))},K=g=>{$(D.filter((P,m)=>m!==g))};return e.jsx(G,{isOpen:r,onClose:n,title:s?"Editar Producto":"Nuevo Producto",children:e.jsxs("form",{onSubmit:F,className:"flex flex-col gap-4 max-h-[80vh] overflow-y-auto pr-2",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:i,onChange:g=>u(g.target.value),required:!0,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Ej: Latte, Pizza Pepperoni"})]}),e.jsxs("div",{className:"w-1/3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tipo"}),e.jsxs("select",{value:c,onChange:g=>j(g.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-white",children:[e.jsx("option",{value:"beverage",children:"Bebida"}),e.jsx("option",{value:"food",children:"Comida"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"CategorÃ­a (Filtro POS)"}),e.jsxs("select",{value:S,onChange:g=>h(g.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-white",children:[e.jsx("option",{value:"caliente",children:"Caliente (CafÃ©/TÃ©)"}),e.jsx("option",{value:"frio",children:"FrÃ­o / FrappÃ©"}),e.jsx("option",{value:"metodo",children:"MÃ©todo (V60, Chemex)"}),e.jsx("option",{value:"comida",children:"Comida / Alimentos"}),e.jsx("option",{value:"otro",children:"Otro"})]})]}),e.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-200",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsxs("h4",{className:"font-bold text-emerald-800 flex items-center gap-2",children:[e.jsx(v,{name:"archive",size:16}),"Control de Stock (AutomÃ¡tico)"]})}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{type:"button",onClick:()=>A("none"),className:`flex-1 py-1 px-2 rounded text-xs font-bold border ${E==="none"?"bg-white border-gray-400 text-gray-800 shadow-sm":"border-transparent text-gray-500 hover:bg-emerald-100"}`,children:"Sin Control"}),e.jsx("button",{type:"button",onClick:()=>A("direct"),className:`flex-1 py-1 px-2 rounded text-xs font-bold border ${E==="direct"?"bg-white border-emerald-500 text-emerald-800 shadow-sm":"border-transparent text-emerald-600 hover:bg-emerald-100"}`,children:"Producto Final"}),e.jsx("button",{type:"button",onClick:()=>A("recipe"),className:`flex-1 py-1 px-2 rounded text-xs font-bold border ${E==="recipe"?"bg-white border-purple-500 text-purple-800 shadow-sm":"border-transparent text-purple-600 hover:bg-purple-100"}`,children:"Receta (Ingr.)"})]}),E==="direct"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-emerald-700 mb-1",children:"Se descontarÃ¡ 1 unidad de este producto al completar la orden."}),e.jsxs("select",{value:z,onChange:g=>y(g.target.value),className:"w-full p-2 text-sm border border-emerald-300 rounded bg-white",children:[e.jsx("option",{value:"",children:"-- Selecciona Producto del Inventario --"}),a.map(g=>e.jsxs("option",{value:g.id,children:[g.name," (Stock: ",g.currentStock,")"]},g.id))]})]}),E==="recipe"&&e.jsxs("div",{className:"bg-white p-2 rounded border border-emerald-100",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Configura los ingredientes que se descontarÃ¡n por cada unidad vendida."}),e.jsx(te,{ingredients:O,setIngredients:V,inventoryItems:a})]})]}),e.jsxs("div",{className:"border-t border-gray-200 py-4 my-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700",children:"Instrucciones de PreparaciÃ³n (KDS)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs ${f?"text-blue-600 font-bold":"text-gray-500"}`,children:"Variantes/TamaÃ±os"}),e.jsx("button",{type:"button",onClick:()=>k(!f),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${f?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f?"translate-x-6":"translate-x-1"}`})})]})]}),f?e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Define variantes (Ej: 12oz, Grande) y sus instrucciones."}),e.jsx("ul",{className:"space-y-2 mb-3",children:D.map((g,P)=>e.jsxs("li",{className:"bg-white p-2 rounded border border-gray-200 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"font-bold text-blue-700",children:g.name}),e.jsx("button",{type:"button",onClick:()=>K(P),className:"text-red-400 hover:text-red-600",children:e.jsx(v,{name:"x",size:14})})]}),e.jsx("p",{className:"text-gray-600 mt-1 text-xs",children:g.recipe})]},P))}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("input",{type:"text",value:I,onChange:g=>q(g.target.value),placeholder:"Variante (Ej: Grande)",className:"p-2 border rounded text-sm"}),e.jsx("textarea",{value:M,onChange:g=>U(g.target.value),placeholder:"InstrucciÃ³n especÃ­fica...",rows:2,className:"p-2 border rounded text-sm"}),e.jsx("button",{type:"button",onClick:L,className:"bg-blue-500 text-white py-1 px-3 rounded text-sm font-bold self-end",children:"AÃ±adir"})]})]}):e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-1 flex items-center gap-2",children:["InstrucciÃ³n Ãšnica ",e.jsx(v,{name:"pencil",size:14})]}),e.jsx("textarea",{value:d,onChange:g=>b(g.target.value),rows:4,className:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:c==="food"?"Ej: Calentar 3 min, decorar con...":"Ej: 18.5g in, 36g out..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Modificadores Comunes"}),e.jsx("input",{type:"text",value:N,onChange:g=>w(g.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Separados por coma: Leche Soya, Extra Shot, Sin Cebolla"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t mt-2",children:[s&&e.jsx("button",{type:"button",onClick:()=>{window.confirm("Â¿Eliminar?")&&t(s.id),n()},className:"text-red-500 font-bold text-sm",children:"Eliminar"}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 rounded-lg font-bold",children:"Guardar"})]})]})]})})},Ve=({inventoryHook:r})=>{const{beverages:n,addBeverage:x,updateBeverage:p,deleteBeverage:t}=ke(),[s,a]=l.useState(!1),[i,u]=l.useState(null),c=h=>{u(h),a(!0)},j=()=>{u(null),a(!0)},S=n.reduce((h,d)=>((h[d.category]=h[d.category]||[]).push(d),h),{});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"MenÃº de Barra y Cocina"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Gestiona recetas rÃ¡pidas y configuraciÃ³n de stock para el KDS."})]}),e.jsxs("button",{onClick:j,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(v,{name:"plus-circle",size:16}),"Nuevo Producto"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.keys(S).map(h=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"font-bold text-lg capitalize mb-3 text-blue-700 border-b pb-2",children:h}),e.jsx("ul",{className:"space-y-2",children:S[h].map(d=>{var b,N;return e.jsxs("li",{onClick:()=>c(d),className:"flex justify-between items-center p-2 hover:bg-gray-50 rounded cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${d.type==="food"?"bg-orange-500":"bg-blue-500"}`}),e.jsx("span",{className:"font-medium text-gray-700",children:d.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[((b=d.stockConfig)==null?void 0:b.mode)==="direct"&&e.jsx("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-1.5 rounded",children:"Stock"}),((N=d.stockConfig)==null?void 0:N.mode)==="recipe"&&e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-1.5 rounded",children:"Receta"}),e.jsx(v,{name:"pencil",size:14,className:"text-gray-300 group-hover:text-blue-500"})]})]},d.id)})})]},h))}),e.jsx(Ue,{isOpen:s,onClose:()=>a(!1),onSave:x,onUpdate:p,onDelete:t,beverage:i,inventoryItems:r.items})]})},Le=()=>e.jsxs("div",{className:"space-y-8 max-w-3xl mx-auto pb-12",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Cafestesia Operations Manager"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:'Una aplicaciÃ³n web progresiva (PWA) diseÃ±ada como el "Sistema Operativo" integral para la gestiÃ³n operativa de Cafestesia. Su objetivo es digitalizar y sincronizar los flujos de trabajo entre la cocina (panaderÃ­a), la barra (bebidas) y la administraciÃ³n.'})]}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-blue-600 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸž"})," ProducciÃ³n de PanaderÃ­a"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Asistente digital para procesos de larga duraciÃ³n."}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-500 space-y-1",children:[e.jsx("li",{children:"Temporizadores persistentes (Horas/Min)."}),e.jsx("li",{children:"Pasos Activos (Manual) vs Pasivos (Espera)."}),e.jsx("li",{children:"Alertas sonoras y visuales."})]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-purple-600 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"})," Operaciones (Kanban)"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"GestiÃ³n de tareas y rutinas del personal."}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-500 space-y-1",children:[e.jsx("li",{children:"Agenda Diaria (Timeline) y Tablero."}),e.jsx("li",{children:"Rutinas Maestras con asignaciÃ³n inteligente."}),e.jsx("li",{children:"ValidaciÃ³n por PIN para acciones sensibles."})]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-amber-600 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"â˜•"})," Barra (KDS & POS)"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Sistema de Comandas y Pantalla de Cocina."}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-500 space-y-1",children:[e.jsx("li",{children:"POS Simplificado (Botones grandes)."}),e.jsx("li",{children:"KDS Barista con semÃ¡foro de tiempos."}),e.jsx("li",{children:"Ayuda en vivo (Recetas rÃ¡pidas)."})]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-emerald-600 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“¦"})," Inventario"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Control de stock e insumos crÃ­ticos."}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-500 space-y-1",children:[e.jsx("li",{children:"Listas de compras automÃ¡ticas."}),e.jsx("li",{children:"Historial de precios por proveedor."})]})]})]}),e.jsxs("section",{className:"bg-gray-100 p-6 rounded-xl border border-gray-300",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"AnÃ¡lisis para Web Design System (WDS)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm text-gray-700 uppercase tracking-wider mb-2",children:"Tokens de DiseÃ±o ImplÃ­citos"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-1 rounded-full border text-xs",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600"}),e.jsx("span",{children:"AcciÃ³n / Info"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-1 rounded-full border text-xs",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-600"}),e.jsx("span",{children:"Alerta / Error"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-1 rounded-full border text-xs",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),e.jsx("span",{children:"PrecauciÃ³n / Progreso"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-1 rounded-full border text-xs",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-teal-500"}),e.jsx("span",{children:"Pasivo / Espera"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-1 rounded-full border text-xs",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-600"}),e.jsx("span",{children:"Ã‰xito / Completado"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 pt-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm text-gray-700 mb-1",children:"Ãtomos"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Componentes base indivisibles."}),e.jsxs("ul",{className:"mt-2 text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Button (Primary, Secondary, Danger)"}),e.jsx("li",{children:"â€¢ Icon (SVG System)"}),e.jsx("li",{children:"â€¢ Input / Select"}),e.jsx("li",{children:"â€¢ Badge / Tag"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm text-gray-700 mb-1",children:"MolÃ©culas"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Agrupaciones funcionales simples."}),e.jsxs("ul",{className:"mt-2 text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ ProcessCard (Tarjeta de Proceso)"}),e.jsx("li",{children:"â€¢ KanbanCard (Tarjeta de Tarea)"}),e.jsx("li",{children:"â€¢ SwipeButton (BotÃ³n deslizante)"}),e.jsx("li",{children:"â€¢ InventoryItemRow"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm text-gray-700 mb-1",children:"Organismos"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Secciones complejas de la UI."}),e.jsxs("ul",{className:"mt-2 text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Modal (Contenedor genÃ©rico)"}),e.jsx("li",{children:"â€¢ Sidebar (NavegaciÃ³n)"}),e.jsx("li",{children:"â€¢ DailyAgendaView (Timeline)"}),e.jsx("li",{children:"â€¢ BeveragePOS (Grid interactivo)"})]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-300",children:e.jsxs("p",{className:"text-sm font-semibold text-blue-800 bg-blue-50 p-3 rounded-lg border border-blue-100",children:["â„¹ï¸ ",e.jsx("strong",{children:"ConclusiÃ³n:"})," La integraciÃ³n en un WDS es altamente viable. La aplicaciÃ³n ya utiliza patrones consistentes que pueden extraerse y documentarse fÃ¡cilmente para escalar el desarrollo de futuros mÃ³dulos."]})})]})]})]}),He=({providersHook:r,categoriesHook:n,recipeLogHook:x,usersHook:p,recipesHook:t,inventoryHook:s})=>{const[a,i]=l.useState("production"),{providers:u,addProvider:c,updateProvider:j,deleteProvider:S}=r,[h,d]=l.useState(!1),[b,N]=l.useState(null),{categories:w,addCategory:f,updateCategory:k,deleteCategory:D}=n,[$,I]=l.useState(!1),[q,M]=l.useState(null),{feedbackLog:U}=x,[E,A]=l.useState(null),{users:z,addUser:y,updateUser:O,deleteUser:V}=p,[F,L]=l.useState(!1),[K,g]=l.useState(null),{recipes:P,addRecipe:m,updateRecipe:C,deleteRecipe:R}=t,[T,_]=l.useState(!1),[B,J]=l.useState(null),ae=o=>{N(o),d(!0)},le=()=>{N(null),d(!0)},re=o=>{"id"in o?j(o):c(o)},ne=o=>{M(o),I(!0)},ie=()=>{M(null),I(!0)},de=o=>{"id"in o?k(o):f(o)},oe=o=>{g(o),L(!0)},ce=()=>{g(null),L(!0)},me=o=>{"id"in o?O(o):y(o)},Z=o=>{J(o),_(!0)},xe=()=>{J(null),_(!0)},ue=o=>{B?C({...o,id:B.id}):m(o)},H=({tab:o,label:he,icon:be})=>e.jsxs("button",{onClick:()=>i(o),className:`flex items-center gap-2 py-3 px-4 text-sm md:text-base font-bold border-b-4 transition-colors whitespace-nowrap ${a===o?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-800"}`,children:[e.jsx(v,{name:be,size:18}),he]}),Y=P.filter(o=>o.name.toLowerCase().includes("(horneado)")),X=P.filter(o=>!o.name.toLowerCase().includes("(horneado)"));return e.jsxs("div",{className:"p-4 md:p-6 bg-gray-50 h-full overflow-y-auto",children:[e.jsxs("div",{className:"max-w-4xl mx-auto pb-20",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex gap-4 overflow-x-auto",children:[e.jsx(H,{tab:"production",label:"PanaderÃ­a",icon:"cake-slice"}),e.jsx(H,{tab:"beverages",label:"MenÃº/Barra",icon:"star"}),e.jsx(H,{tab:"operations",label:"Usuarios",icon:"clipboard-kanban"}),e.jsx(H,{tab:"routines",label:"Rutinas",icon:"list"}),e.jsx(H,{tab:"inventory",label:"Inventario",icon:"archive"}),e.jsx(H,{tab:"docs",label:"Info / WDS",icon:"clipboard-list"})]})}),e.jsxs("div",{className:"mt-6",children:[a==="docs"&&e.jsx(Le,{}),a==="production"&&e.jsxs("section",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Recetas de Pan"}),e.jsxs("button",{onClick:xe,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(v,{name:"plus-circle",size:16}),"AÃ±adir Receta"]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ¥£"})," ElaboraciÃ³n de Masas"]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:X.length>0?X.map(o=>e.jsxs("li",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:o.name}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>A(o),className:"text-sm text-gray-500 hover:text-blue-600 hover:underline font-semibold transition-colors",children:"Historial"}),e.jsx("button",{onClick:()=>Z(o),className:"text-sm text-blue-600 hover:text-blue-800 hover:underline font-semibold transition-colors",children:"Editar"})]})]},o.id)):e.jsx("li",{className:"p-4 text-gray-400 italic text-sm text-center",children:"No hay recetas de masas configuradas."})})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-orange-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”¥"})," Horneado Final"]}),e.jsx("div",{className:"bg-white rounded-lg border border-orange-200 shadow-sm",children:e.jsx("ul",{className:"divide-y divide-orange-100",children:Y.length>0?Y.map(o=>e.jsxs("li",{className:"p-4 flex justify-between items-center bg-orange-50/30",children:[e.jsx("span",{className:"font-medium text-gray-800",children:o.name.replace(/\(Horneado\)/i,"").trim()}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>A(o),className:"text-sm text-gray-500 hover:text-blue-600 hover:underline font-semibold transition-colors",children:"Historial"}),e.jsx("button",{onClick:()=>Z(o),className:"text-sm text-blue-600 hover:text-blue-800 hover:underline font-semibold transition-colors",children:"Editar"})]})]},o.id)):e.jsx("li",{className:"p-4 text-gray-400 italic text-sm text-center",children:"No hay recetas de horneado configuradas."})})})]})]}),a==="routines"&&e.jsx($e,{users:z}),a==="beverages"&&e.jsx(Ve,{inventoryHook:s}),a==="inventory"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700",children:"Proveedores de Inventario"}),e.jsxs("button",{onClick:le,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(v,{name:"plus-circle",size:16}),"AÃ±adir Proveedor"]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:u.length>0?u.map(o=>e.jsxs("li",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:o.name}),e.jsx("button",{onClick:()=>ae(o),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Editar"})]},o.id)):e.jsx("li",{className:"p-4 text-center text-gray-500",children:"No hay proveedores. Â¡AÃ±ade el primero!"})})})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700",children:"CategorÃ­as de Inventario"}),e.jsxs("button",{onClick:ie,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(v,{name:"plus-circle",size:16}),"AÃ±adir CategorÃ­a"]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:w.length>0?w.map(o=>e.jsxs("li",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:o.name}),e.jsx("button",{onClick:()=>ne(o),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Editar"})]},o.id)):e.jsx("li",{className:"p-4 text-center text-gray-500",children:"No hay categorÃ­as. Â¡AÃ±ade la primera!"})})})]})]}),a==="operations"&&e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700",children:"GestiÃ³n de Usuarios"}),e.jsxs("button",{onClick:ce,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(v,{name:"plus-circle",size:16}),"AÃ±adir Usuario"]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:z.length>0?z.map(o=>e.jsxs("li",{className:"p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:o.color}}),e.jsx("span",{className:"font-medium text-gray-800",children:o.name})]}),e.jsx("button",{onClick:()=>oe(o),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Editar"})]},o.id)):e.jsx("li",{className:"p-4 text-center text-gray-500",children:"No hay usuarios. Â¡AÃ±ade el primero!"})})})]})]})]}),e.jsx(Ee,{isOpen:h,onClose:()=>d(!1),onSave:re,onDelete:S,provider:b}),e.jsx(Ie,{isOpen:$,onClose:()=>I(!1),onSave:de,onDelete:D,category:q}),e.jsx(Ae,{isOpen:F,onClose:()=>L(!1),onSave:me,onDelete:V,user:K}),e.jsx(qe,{isOpen:T,onClose:()=>_(!1),onSave:ue,onDelete:R,recipe:B}),E&&e.jsx(De,{isOpen:!!E,onClose:()=>A(null),recipe:E,feedbackLog:U.filter(o=>o.recipeId===E.id)})]})};export{He as default};
