import{r as n,j as e,I as f,R as Q}from"./index-DcNr4IdX.js";import{M as j}from"./Modal-Nj_anpfU.js";const X=({isOpen:r,onClose:a,onSave:i,onDelete:x,provider:t})=>{const[l,d]=n.useState("");n.useEffect(()=>{r&&d((t==null?void 0:t.name)||"")},[r,t]);const u=o=>{if(o.preventDefault(),!l.trim())return;const m={name:l.trim()};i(t?{...m,id:t.id}:m),a()},b=()=>{t&&window.confirm(`¿Estás seguro de que quieres eliminar al proveedor "${t.name}"?`)&&(x(t.id),a())};return e.jsx(j,{isOpen:r,onClose:a,title:t?"Editar Proveedor":"Añadir Proveedor",children:e.jsxs("form",{onSubmit:u,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre del Proveedor"}),e.jsx("input",{type:"text",value:l,onChange:o=>d(o.target.value),required:!0,autoFocus:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("div",{children:t&&e.jsx("button",{type:"button",onClick:b,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Eliminar"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:a,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})]})})},Y=({isOpen:r,onClose:a,onSave:i,onDelete:x,category:t})=>{const[l,d]=n.useState("");n.useEffect(()=>{r&&d((t==null?void 0:t.name)||"")},[r,t]);const u=o=>{if(o.preventDefault(),!l.trim())return;const m={name:l.trim()};i(t?{...m,id:t.id}:m),a()},b=()=>{t&&window.confirm(`¿Estás seguro de que quieres eliminar la categoría "${t.name}"?`)&&(x(t.id),a())};return e.jsx(j,{isOpen:r,onClose:a,title:t?"Editar Categoría":"Añadir Categoría",children:e.jsxs("form",{onSubmit:u,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre de la Categoría"}),e.jsx("input",{type:"text",value:l,onChange:o=>d(o.target.value),required:!0,autoFocus:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("div",{children:t&&e.jsx("button",{type:"button",onClick:b,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Eliminar"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:a,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})]})})},Z=({rating:r})=>e.jsx("div",{className:"flex",children:[...Array(5)].map((a,i)=>e.jsx(f,{name:"star",size:16,className:i<r?"text-yellow-400 fill-current":"text-gray-300"},i))}),ee=({isOpen:r,onClose:a,recipe:i,feedbackLog:x})=>{const t=[...x].sort((l,d)=>new Date(d.date).getTime()-new Date(l.date).getTime());return e.jsxs(j,{isOpen:r,onClose:a,title:`Bitácora de: ${i.name}`,children:[e.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:t.length>0?e.jsx("div",{className:"space-y-4",children:t.map(l=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:new Date(l.date).toLocaleString("es-ES",{dateStyle:"long",timeStyle:"short"})}),e.jsx(Z,{rating:l.rating})]}),e.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:l.notes||"Sin notas."})]},l.id))}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay feedback registrado para esta receta todavía."})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:a,className:"py-2 px-6 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cerrar"})})]})},te=({isOpen:r,onClose:a,onSave:i,onDelete:x,user:t})=>{const[l,d]=n.useState(""),[u,b]=n.useState("#CCCCCC"),[o,m]=n.useState("");n.useEffect(()=>{r&&(d((t==null?void 0:t.name)||""),b((t==null?void 0:t.color)||"#CCCCCC"),m((t==null?void 0:t.phone)||""))},[r,t]);const h=c=>{if(c.preventDefault(),!l.trim())return;const g={name:l.trim(),color:u,phone:o.trim()};i(t?{...g,id:t.id}:g),a()},y=()=>{t&&window.confirm(`¿Estás seguro de que quieres eliminar a "${t.name}"? Esto no se puede deshacer.`)&&(x(t.id),a())};return e.jsx(j,{isOpen:r,onClose:a,title:t?"Editar Usuario":"Añadir Usuario",children:e.jsxs("form",{onSubmit:h,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre del Usuario"}),e.jsx("input",{type:"text",value:l,onChange:c=>d(c.target.value),required:!0,autoFocus:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Número de WhatsApp (Opcional)"}),e.jsx("input",{type:"tel",value:o,onChange:c=>m(c.target.value),placeholder:"+521234567890",className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Color de Etiqueta"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:u,onChange:c=>b(c.target.value),className:"w-12 h-10 p-1 border border-gray-300 rounded-md cursor-pointer"}),e.jsx("input",{type:"text",value:u,onChange:c=>b(c.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 font-mono focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("div",{children:t&&e.jsx("button",{type:"button",onClick:y,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Eliminar"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:a,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})]})})},le=({providersHook:r,categoriesHook:a,recipeLogHook:i,usersHook:x})=>{const[t,l]=n.useState("operations"),{providers:d,addProvider:u,updateProvider:b,deleteProvider:o}=r,[m,h]=n.useState(!1),[y,c]=n.useState(null),{categories:g,addCategory:P,updateCategory:U,deleteCategory:A}=a,[M,v]=n.useState(!1),[q,C]=n.useState(null),{feedbackLog:D}=i,[p,S]=n.useState(null),{users:E,addUser:I,updateUser:O,deleteUser:R}=x,[F,N]=n.useState(!1),[z,k]=n.useState(null),L=s=>{c(s),h(!0)},T=()=>{c(null),h(!0)},$=s=>{"id"in s?b(s):u(s)},G=s=>{C(s),v(!0)},B=()=>{C(null),v(!0)},H=s=>{"id"in s?U(s):P(s)},V=s=>{k(s),N(!0)},W=()=>{k(null),N(!0)},_=s=>{"id"in s?O(s):I(s)},w=({tab:s,label:J,icon:K})=>e.jsxs("button",{onClick:()=>l(s),className:`flex items-center gap-2 py-3 px-4 text-sm md:text-base font-bold border-b-4 transition-colors ${t===s?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-800"}`,children:[e.jsx(f,{name:K,size:18}),J]});return e.jsxs("div",{className:"p-4 md:p-6 bg-gray-50 h-full overflow-y-auto",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(w,{tab:"production",label:"Producción",icon:"cake-slice"}),e.jsx(w,{tab:"inventory",label:"Inventario",icon:"archive"}),e.jsx(w,{tab:"operations",label:"Operaciones",icon:"clipboard-kanban"})]})}),e.jsxs("div",{className:"mt-6",children:[t==="production"&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-4",children:"Bitácora de Recetas"}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:Object.values(Q).map(s=>e.jsxs("li",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:s.name}),e.jsx("button",{onClick:()=>S(s),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Ver Historial"})]},s.id))})})]}),t==="inventory"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700",children:"Proveedores de Inventario"}),e.jsxs("button",{onClick:T,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(f,{name:"plus-circle",size:16}),"Añadir Proveedor"]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:d.length>0?d.map(s=>e.jsxs("li",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:s.name}),e.jsx("button",{onClick:()=>L(s),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Editar"})]},s.id)):e.jsx("li",{className:"p-4 text-center text-gray-500",children:"No hay proveedores. ¡Añade el primero!"})})})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700",children:"Categorías de Inventario"}),e.jsxs("button",{onClick:B,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(f,{name:"plus-circle",size:16}),"Añadir Categoría"]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:g.length>0?g.map(s=>e.jsxs("li",{className:"p-4 flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:s.name}),e.jsx("button",{onClick:()=>G(s),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Editar"})]},s.id)):e.jsx("li",{className:"p-4 text-center text-gray-500",children:"No hay categorías. ¡Añade la primera!"})})})]})]}),t==="operations"&&e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700",children:"Gestión de Usuarios"}),e.jsxs("button",{onClick:W,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(f,{name:"plus-circle",size:16}),"Añadir Usuario"]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:E.length>0?E.map(s=>e.jsxs("li",{className:"p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:s.color}}),e.jsx("span",{className:"font-medium text-gray-800",children:s.name})]}),e.jsx("button",{onClick:()=>V(s),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Editar"})]},s.id)):e.jsx("li",{className:"p-4 text-center text-gray-500",children:"No hay usuarios. ¡Añade el primero!"})})})]})]})]}),e.jsx(X,{isOpen:m,onClose:()=>h(!1),onSave:$,onDelete:o,provider:y}),e.jsx(Y,{isOpen:M,onClose:()=>v(!1),onSave:H,onDelete:A,category:q}),e.jsx(te,{isOpen:F,onClose:()=>N(!1),onSave:_,onDelete:R,user:z}),p&&e.jsx(ee,{isOpen:!!p,onClose:()=>S(null),recipe:p,feedbackLog:D.filter(s=>s.recipeId===p.id)})]})};export{le as default};
