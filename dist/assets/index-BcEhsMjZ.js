const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BreadProductionScreen-DHy6s6Qo.js","assets/Modal-pn_fuNFk.js","assets/OperationsScreen-DpQqlbIX.js","assets/InventoryScreen-C2dVSHor.js","assets/SettingsScreen-CxRZU7Vb.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function T0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qm={exports:{}},Ja={},Hm={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zi=Symbol.for("react.element"),I0=Symbol.for("react.portal"),S0=Symbol.for("react.fragment"),A0=Symbol.for("react.strict_mode"),R0=Symbol.for("react.profiler"),C0=Symbol.for("react.provider"),k0=Symbol.for("react.context"),P0=Symbol.for("react.forward_ref"),x0=Symbol.for("react.suspense"),V0=Symbol.for("react.memo"),N0=Symbol.for("react.lazy"),Mf=Symbol.iterator;function D0(t){return t===null||typeof t!="object"?null:(t=Mf&&t[Mf]||t["@@iterator"],typeof t=="function"?t:null)}var Wm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qm=Object.assign,Km={};function Rs(t,e,n){this.props=t,this.context=e,this.refs=Km,this.updater=n||Wm}Rs.prototype.isReactComponent={};Rs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Gm(){}Gm.prototype=Rs.prototype;function ih(t,e,n){this.props=t,this.context=e,this.refs=Km,this.updater=n||Wm}var oh=ih.prototype=new Gm;oh.constructor=ih;Qm(oh,Rs.prototype);oh.isPureReactComponent=!0;var Lf=Array.isArray,Ym=Object.prototype.hasOwnProperty,ah={current:null},Xm={key:!0,ref:!0,__self:!0,__source:!0};function Jm(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Ym.call(e,r)&&!Xm.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Zi,type:t,key:i,ref:a,props:s,_owner:ah.current}}function M0(t,e){return{$$typeof:Zi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zi}function L0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Of=/\/+/g;function nu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?L0(""+t.key):e.toString(36)}function ea(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Zi:case I0:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+nu(a,0):r,Lf(s)?(n="",t!=null&&(n=t.replace(Of,"$&/")+"/"),ea(s,e,n,"",function(h){return h})):s!=null&&(lh(s)&&(s=M0(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Of,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Lf(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+nu(i,l);a+=ea(i,e,n,u,s)}else if(u=D0(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+nu(i,l++),a+=ea(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function No(t,e,n){if(t==null)return t;var r=[],s=0;return ea(t,r,"","",function(i){return e.call(n,i,s++)}),r}function O0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ct={current:null},ta={transition:null},F0={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:ta,ReactCurrentOwner:ah};function Zm(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:No,forEach:function(t,e,n){No(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return No(t,function(){e++}),e},toArray:function(t){return No(t,function(e){return e})||[]},only:function(t){if(!lh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=Rs;ee.Fragment=S0;ee.Profiler=R0;ee.PureComponent=ih;ee.StrictMode=A0;ee.Suspense=x0;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F0;ee.act=Zm;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qm({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=ah.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Ym.call(e,u)&&!Xm.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Zi,type:t.type,key:s,ref:i,props:r,_owner:a}};ee.createContext=function(t){return t={$$typeof:k0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:C0,_context:t},t.Consumer=t};ee.createElement=Jm;ee.createFactory=function(t){var e=Jm.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:P0,render:t}};ee.isValidElement=lh;ee.lazy=function(t){return{$$typeof:N0,_payload:{_status:-1,_result:t},_init:O0}};ee.memo=function(t,e){return{$$typeof:V0,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=ta.transition;ta.transition={};try{t()}finally{ta.transition=e}};ee.unstable_act=Zm;ee.useCallback=function(t,e){return ct.current.useCallback(t,e)};ee.useContext=function(t){return ct.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return ct.current.useDeferredValue(t)};ee.useEffect=function(t,e){return ct.current.useEffect(t,e)};ee.useId=function(){return ct.current.useId()};ee.useImperativeHandle=function(t,e,n){return ct.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return ct.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return ct.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return ct.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return ct.current.useReducer(t,e,n)};ee.useRef=function(t){return ct.current.useRef(t)};ee.useState=function(t){return ct.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return ct.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return ct.current.useTransition()};ee.version="18.3.1";Hm.exports=ee;var H=Hm.exports;const j0=T0(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b0=H,U0=Symbol.for("react.element"),z0=Symbol.for("react.fragment"),B0=Object.prototype.hasOwnProperty,$0=b0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q0={key:!0,ref:!0,__self:!0,__source:!0};function eg(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)B0.call(e,r)&&!q0.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:U0,type:t,key:i,ref:a,props:s,_owner:$0.current}}Ja.Fragment=z0;Ja.jsx=eg;Ja.jsxs=eg;qm.exports=Ja;var S=qm.exports,Uu={},tg={exports:{}},Ct={},ng={exports:{}},rg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Q){var K=U.length;U.push(Q);e:for(;0<K;){var ge=K-1>>>1,fe=U[ge];if(0<s(fe,Q))U[ge]=Q,U[K]=fe,K=ge;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Q=U[0],K=U.pop();if(K!==Q){U[0]=K;e:for(var ge=0,fe=U.length,Pe=fe>>>1;ge<Pe;){var rn=2*(ge+1)-1,sn=U[rn],on=rn+1,an=U[on];if(0>s(sn,K))on<fe&&0>s(an,sn)?(U[ge]=an,U[on]=K,ge=on):(U[ge]=sn,U[rn]=K,ge=rn);else if(on<fe&&0>s(an,K))U[ge]=an,U[on]=K,ge=on;else break e}}return Q}function s(U,Q){var K=U.sortIndex-Q.sortIndex;return K!==0?K:U.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],f=1,g=null,v=3,T=!1,k=!1,x=!1,D=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(U){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=U)r(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(h)}}function N(U){if(x=!1,C(U),!k)if(n(u)!==null)k=!0,de(F);else{var Q=n(h);Q!==null&&te(N,Q.startTime-U)}}function F(U,Q){k=!1,x&&(x=!1,A(m),m=-1),T=!0;var K=v;try{for(C(Q),g=n(u);g!==null&&(!(g.expirationTime>Q)||U&&!R());){var ge=g.callback;if(typeof ge=="function"){g.callback=null,v=g.priorityLevel;var fe=ge(g.expirationTime<=Q);Q=t.unstable_now(),typeof fe=="function"?g.callback=fe:g===n(u)&&r(u),C(Q)}else r(u);g=n(u)}if(g!==null)var Pe=!0;else{var rn=n(h);rn!==null&&te(N,rn.startTime-Q),Pe=!1}return Pe}finally{g=null,v=K,T=!1}}var j=!1,w=null,m=-1,_=5,y=-1;function R(){return!(t.unstable_now()-y<_)}function P(){if(w!==null){var U=t.unstable_now();y=U;var Q=!0;try{Q=w(!0,U)}finally{Q?E():(j=!1,w=null)}}else j=!1}var E;if(typeof I=="function")E=function(){I(P)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Z=he.port2;he.port1.onmessage=P,E=function(){Z.postMessage(null)}}else E=function(){D(P,0)};function de(U){w=U,j||(j=!0,E())}function te(U,Q){m=D(function(){U(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){k||T||(k=!0,de(F))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(v){case 1:case 2:case 3:var Q=3;break;default:Q=v}var K=v;v=Q;try{return U()}finally{v=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,Q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var K=v;v=U;try{return Q()}finally{v=K}},t.unstable_scheduleCallback=function(U,Q,K){var ge=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ge+K:ge):K=ge,U){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=K+fe,U={id:f++,callback:Q,priorityLevel:U,startTime:K,expirationTime:fe,sortIndex:-1},K>ge?(U.sortIndex=K,e(h,U),n(u)===null&&U===n(h)&&(x?(A(m),m=-1):x=!0,te(N,K-ge))):(U.sortIndex=fe,e(u,U),k||T||(k=!0,de(F))),U},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(U){var Q=v;return function(){var K=v;v=Q;try{return U.apply(this,arguments)}finally{v=K}}}})(rg);ng.exports=rg;var H0=ng.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0=H,Rt=H0;function b(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sg=new Set,Ci={};function xr(t,e){hs(t,e),hs(t+"Capture",e)}function hs(t,e){for(Ci[t]=e,t=0;t<e.length;t++)sg.add(e[t])}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zu=Object.prototype.hasOwnProperty,Q0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ff={},jf={};function K0(t){return zu.call(jf,t)?!0:zu.call(Ff,t)?!1:Q0.test(t)?jf[t]=!0:(Ff[t]=!0,!1)}function G0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Y0(t,e,n,r){if(e===null||typeof e>"u"||G0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ht(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ke[t]=new ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ke[e]=new ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ke[t]=new ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ke[t]=new ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ke[t]=new ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ke[t]=new ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ke[t]=new ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ke[t]=new ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ke[t]=new ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var uh=/[\-:]([a-z])/g;function ch(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uh,ch);Ke[e]=new ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uh,ch);Ke[e]=new ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uh,ch);Ke[e]=new ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ke[t]=new ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ke[t]=new ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function hh(t,e,n,r){var s=Ke.hasOwnProperty(e)?Ke[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Y0(e,n,s,r)&&(n=null),r||s===null?K0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sn=W0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Do=Symbol.for("react.element"),Hr=Symbol.for("react.portal"),Wr=Symbol.for("react.fragment"),dh=Symbol.for("react.strict_mode"),Bu=Symbol.for("react.profiler"),ig=Symbol.for("react.provider"),og=Symbol.for("react.context"),fh=Symbol.for("react.forward_ref"),$u=Symbol.for("react.suspense"),qu=Symbol.for("react.suspense_list"),ph=Symbol.for("react.memo"),xn=Symbol.for("react.lazy"),ag=Symbol.for("react.offscreen"),bf=Symbol.iterator;function Ks(t){return t===null||typeof t!="object"?null:(t=bf&&t[bf]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Object.assign,ru;function si(t){if(ru===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ru=e&&e[1]||""}return`
`+ru+t}var su=!1;function iu(t,e){if(!t||su)return"";su=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{su=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?si(t):""}function X0(t){switch(t.tag){case 5:return si(t.type);case 16:return si("Lazy");case 13:return si("Suspense");case 19:return si("SuspenseList");case 0:case 2:case 15:return t=iu(t.type,!1),t;case 11:return t=iu(t.type.render,!1),t;case 1:return t=iu(t.type,!0),t;default:return""}}function Hu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wr:return"Fragment";case Hr:return"Portal";case Bu:return"Profiler";case dh:return"StrictMode";case $u:return"Suspense";case qu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case og:return(t.displayName||"Context")+".Consumer";case ig:return(t._context.displayName||"Context")+".Provider";case fh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ph:return e=t.displayName||null,e!==null?e:Hu(t.type)||"Memo";case xn:e=t._payload,t=t._init;try{return Hu(t(e))}catch{}}return null}function J0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hu(e);case 8:return e===dh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function lg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Z0(t){var e=lg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mo(t){t._valueTracker||(t._valueTracker=Z0(t))}function ug(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=lg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ya(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wu(t,e){var n=e.checked;return Se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Uf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Gn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cg(t,e){e=e.checked,e!=null&&hh(t,"checked",e,!1)}function Qu(t,e){cg(t,e);var n=Gn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ku(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ku(t,e.type,Gn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ku(t,e,n){(e!=="number"||ya(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ii=Array.isArray;function rs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Gn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Gu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(b(91));return Se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(b(92));if(ii(n)){if(1<n.length)throw Error(b(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gn(n)}}function hg(t,e){var n=Gn(e.value),r=Gn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $f(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function dg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?dg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lo,fg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lo=Lo||document.createElement("div"),Lo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ki(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eE=["Webkit","ms","Moz","O"];Object.keys(pi).forEach(function(t){eE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pi[e]=pi[t]})});function pg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pi.hasOwnProperty(t)&&pi[t]?(""+e).trim():e+"px"}function mg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=pg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var tE=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xu(t,e){if(e){if(tE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(b(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(b(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(b(61))}if(e.style!=null&&typeof e.style!="object")throw Error(b(62))}}function Ju(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zu=null;function mh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ec=null,ss=null,is=null;function qf(t){if(t=no(t)){if(typeof ec!="function")throw Error(b(280));var e=t.stateNode;e&&(e=rl(e),ec(t.stateNode,t.type,e))}}function gg(t){ss?is?is.push(t):is=[t]:ss=t}function yg(){if(ss){var t=ss,e=is;if(is=ss=null,qf(t),e)for(t=0;t<e.length;t++)qf(e[t])}}function _g(t,e){return t(e)}function vg(){}var ou=!1;function Eg(t,e,n){if(ou)return t(e,n);ou=!0;try{return _g(t,e,n)}finally{ou=!1,(ss!==null||is!==null)&&(vg(),yg())}}function Pi(t,e){var n=t.stateNode;if(n===null)return null;var r=rl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(b(231,e,typeof n));return n}var tc=!1;if(gn)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){tc=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{tc=!1}function nE(t,e,n,r,s,i,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var mi=!1,_a=null,va=!1,nc=null,rE={onError:function(t){mi=!0,_a=t}};function sE(t,e,n,r,s,i,a,l,u){mi=!1,_a=null,nE.apply(rE,arguments)}function iE(t,e,n,r,s,i,a,l,u){if(sE.apply(this,arguments),mi){if(mi){var h=_a;mi=!1,_a=null}else throw Error(b(198));va||(va=!0,nc=h)}}function Vr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function wg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hf(t){if(Vr(t)!==t)throw Error(b(188))}function oE(t){var e=t.alternate;if(!e){if(e=Vr(t),e===null)throw Error(b(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Hf(s),t;if(i===r)return Hf(s),e;i=i.sibling}throw Error(b(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(b(189))}}if(n.alternate!==r)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?t:e}function Tg(t){return t=oE(t),t!==null?Ig(t):null}function Ig(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ig(t);if(e!==null)return e;t=t.sibling}return null}var Sg=Rt.unstable_scheduleCallback,Wf=Rt.unstable_cancelCallback,aE=Rt.unstable_shouldYield,lE=Rt.unstable_requestPaint,Ve=Rt.unstable_now,uE=Rt.unstable_getCurrentPriorityLevel,gh=Rt.unstable_ImmediatePriority,Ag=Rt.unstable_UserBlockingPriority,Ea=Rt.unstable_NormalPriority,cE=Rt.unstable_LowPriority,Rg=Rt.unstable_IdlePriority,Za=null,Jt=null;function hE(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Za,t,void 0,(t.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:pE,dE=Math.log,fE=Math.LN2;function pE(t){return t>>>=0,t===0?32:31-(dE(t)/fE|0)|0}var Oo=64,Fo=4194304;function oi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=oi(l):(i&=a,i!==0&&(r=oi(i)))}else a=n&~s,a!==0?r=oi(a):i!==0&&(r=oi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qt(e),s=1<<n,r|=t[n],e&=~s;return r}function mE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-qt(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=mE(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function rc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Cg(){var t=Oo;return Oo<<=1,!(Oo&4194240)&&(Oo=64),t}function au(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function eo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qt(e),t[e]=n}function yE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-qt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function yh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ue=0;function kg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Pg,_h,xg,Vg,Ng,sc=!1,jo=[],Fn=null,jn=null,bn=null,xi=new Map,Vi=new Map,Nn=[],_E="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qf(t,e){switch(t){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":bn=null;break;case"pointerover":case"pointerout":xi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vi.delete(e.pointerId)}}function Ys(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=no(e),e!==null&&_h(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vE(t,e,n,r,s){switch(e){case"focusin":return Fn=Ys(Fn,t,e,n,r,s),!0;case"dragenter":return jn=Ys(jn,t,e,n,r,s),!0;case"mouseover":return bn=Ys(bn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return xi.set(i,Ys(xi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vi.set(i,Ys(Vi.get(i)||null,t,e,n,r,s)),!0}return!1}function Dg(t){var e=mr(t.target);if(e!==null){var n=Vr(e);if(n!==null){if(e=n.tag,e===13){if(e=wg(n),e!==null){t.blockedOn=e,Ng(t.priority,function(){xg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function na(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ic(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zu=r,n.target.dispatchEvent(r),Zu=null}else return e=no(n),e!==null&&_h(e),t.blockedOn=n,!1;e.shift()}return!0}function Kf(t,e,n){na(t)&&n.delete(e)}function EE(){sc=!1,Fn!==null&&na(Fn)&&(Fn=null),jn!==null&&na(jn)&&(jn=null),bn!==null&&na(bn)&&(bn=null),xi.forEach(Kf),Vi.forEach(Kf)}function Xs(t,e){t.blockedOn===e&&(t.blockedOn=null,sc||(sc=!0,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,EE)))}function Ni(t){function e(s){return Xs(s,t)}if(0<jo.length){Xs(jo[0],t);for(var n=1;n<jo.length;n++){var r=jo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fn!==null&&Xs(Fn,t),jn!==null&&Xs(jn,t),bn!==null&&Xs(bn,t),xi.forEach(e),Vi.forEach(e),n=0;n<Nn.length;n++)r=Nn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Nn.length&&(n=Nn[0],n.blockedOn===null);)Dg(n),n.blockedOn===null&&Nn.shift()}var os=Sn.ReactCurrentBatchConfig,Ta=!0;function wE(t,e,n,r){var s=ue,i=os.transition;os.transition=null;try{ue=1,vh(t,e,n,r)}finally{ue=s,os.transition=i}}function TE(t,e,n,r){var s=ue,i=os.transition;os.transition=null;try{ue=4,vh(t,e,n,r)}finally{ue=s,os.transition=i}}function vh(t,e,n,r){if(Ta){var s=ic(t,e,n,r);if(s===null)yu(t,e,r,Ia,n),Qf(t,r);else if(vE(s,t,e,n,r))r.stopPropagation();else if(Qf(t,r),e&4&&-1<_E.indexOf(t)){for(;s!==null;){var i=no(s);if(i!==null&&Pg(i),i=ic(t,e,n,r),i===null&&yu(t,e,r,Ia,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else yu(t,e,r,null,n)}}var Ia=null;function ic(t,e,n,r){if(Ia=null,t=mh(r),t=mr(t),t!==null)if(e=Vr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=wg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ia=t,null}function Mg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uE()){case gh:return 1;case Ag:return 4;case Ea:case cE:return 16;case Rg:return 536870912;default:return 16}default:return 16}}var Mn=null,Eh=null,ra=null;function Lg(){if(ra)return ra;var t,e=Eh,n=e.length,r,s="value"in Mn?Mn.value:Mn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return ra=s.slice(t,1<r?1-r:void 0)}function sa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bo(){return!0}function Gf(){return!1}function kt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?bo:Gf,this.isPropagationStopped=Gf,this}return Se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bo)},persist:function(){},isPersistent:bo}),e}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wh=kt(Cs),to=Se({},Cs,{view:0,detail:0}),IE=kt(to),lu,uu,Js,el=Se({},to,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Th,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Js&&(Js&&t.type==="mousemove"?(lu=t.screenX-Js.screenX,uu=t.screenY-Js.screenY):uu=lu=0,Js=t),lu)},movementY:function(t){return"movementY"in t?t.movementY:uu}}),Yf=kt(el),SE=Se({},el,{dataTransfer:0}),AE=kt(SE),RE=Se({},to,{relatedTarget:0}),cu=kt(RE),CE=Se({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),kE=kt(CE),PE=Se({},Cs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xE=kt(PE),VE=Se({},Cs,{data:0}),Xf=kt(VE),NE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ME={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ME[t])?!!e[t]:!1}function Th(){return LE}var OE=Se({},to,{key:function(t){if(t.key){var e=NE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?DE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Th,charCode:function(t){return t.type==="keypress"?sa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FE=kt(OE),jE=Se({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jf=kt(jE),bE=Se({},to,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Th}),UE=kt(bE),zE=Se({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),BE=kt(zE),$E=Se({},el,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qE=kt($E),HE=[9,13,27,32],Ih=gn&&"CompositionEvent"in window,gi=null;gn&&"documentMode"in document&&(gi=document.documentMode);var WE=gn&&"TextEvent"in window&&!gi,Og=gn&&(!Ih||gi&&8<gi&&11>=gi),Zf=" ",ep=!1;function Fg(t,e){switch(t){case"keyup":return HE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qr=!1;function QE(t,e){switch(t){case"compositionend":return jg(e);case"keypress":return e.which!==32?null:(ep=!0,Zf);case"textInput":return t=e.data,t===Zf&&ep?null:t;default:return null}}function KE(t,e){if(Qr)return t==="compositionend"||!Ih&&Fg(t,e)?(t=Lg(),ra=Eh=Mn=null,Qr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Og&&e.locale!=="ko"?null:e.data;default:return null}}var GE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!GE[t.type]:e==="textarea"}function bg(t,e,n,r){gg(r),e=Sa(e,"onChange"),0<e.length&&(n=new wh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yi=null,Di=null;function YE(t){Yg(t,0)}function tl(t){var e=Yr(t);if(ug(e))return t}function XE(t,e){if(t==="change")return e}var Ug=!1;if(gn){var hu;if(gn){var du="oninput"in document;if(!du){var np=document.createElement("div");np.setAttribute("oninput","return;"),du=typeof np.oninput=="function"}hu=du}else hu=!1;Ug=hu&&(!document.documentMode||9<document.documentMode)}function rp(){yi&&(yi.detachEvent("onpropertychange",zg),Di=yi=null)}function zg(t){if(t.propertyName==="value"&&tl(Di)){var e=[];bg(e,Di,t,mh(t)),Eg(YE,e)}}function JE(t,e,n){t==="focusin"?(rp(),yi=e,Di=n,yi.attachEvent("onpropertychange",zg)):t==="focusout"&&rp()}function ZE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tl(Di)}function ew(t,e){if(t==="click")return tl(e)}function tw(t,e){if(t==="input"||t==="change")return tl(e)}function nw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qt=typeof Object.is=="function"?Object.is:nw;function Mi(t,e){if(Qt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!zu.call(e,s)||!Qt(t[s],e[s]))return!1}return!0}function sp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ip(t,e){var n=sp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sp(n)}}function Bg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Bg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $g(){for(var t=window,e=ya();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ya(t.document)}return e}function Sh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rw(t){var e=$g(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Bg(n.ownerDocument.documentElement,n)){if(r!==null&&Sh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ip(n,i);var a=ip(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sw=gn&&"documentMode"in document&&11>=document.documentMode,Kr=null,oc=null,_i=null,ac=!1;function op(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ac||Kr==null||Kr!==ya(r)||(r=Kr,"selectionStart"in r&&Sh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_i&&Mi(_i,r)||(_i=r,r=Sa(oc,"onSelect"),0<r.length&&(e=new wh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Kr)))}function Uo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gr={animationend:Uo("Animation","AnimationEnd"),animationiteration:Uo("Animation","AnimationIteration"),animationstart:Uo("Animation","AnimationStart"),transitionend:Uo("Transition","TransitionEnd")},fu={},qg={};gn&&(qg=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function nl(t){if(fu[t])return fu[t];if(!Gr[t])return t;var e=Gr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qg)return fu[t]=e[n];return t}var Hg=nl("animationend"),Wg=nl("animationiteration"),Qg=nl("animationstart"),Kg=nl("transitionend"),Gg=new Map,ap="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(t,e){Gg.set(t,e),xr(e,[t])}for(var pu=0;pu<ap.length;pu++){var mu=ap[pu],iw=mu.toLowerCase(),ow=mu[0].toUpperCase()+mu.slice(1);tr(iw,"on"+ow)}tr(Hg,"onAnimationEnd");tr(Wg,"onAnimationIteration");tr(Qg,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(Kg,"onTransitionEnd");hs("onMouseEnter",["mouseout","mouseover"]);hs("onMouseLeave",["mouseout","mouseover"]);hs("onPointerEnter",["pointerout","pointerover"]);hs("onPointerLeave",["pointerout","pointerover"]);xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ai));function lp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,iE(r,e,void 0,t),t.currentTarget=null}function Yg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;lp(s,l,h),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;lp(s,l,h),i=u}}}if(va)throw t=nc,va=!1,nc=null,t}function _e(t,e){var n=e[dc];n===void 0&&(n=e[dc]=new Set);var r=t+"__bubble";n.has(r)||(Xg(e,t,2,!1),n.add(r))}function gu(t,e,n){var r=0;e&&(r|=4),Xg(n,t,r,e)}var zo="_reactListening"+Math.random().toString(36).slice(2);function Li(t){if(!t[zo]){t[zo]=!0,sg.forEach(function(n){n!=="selectionchange"&&(aw.has(n)||gu(n,!1,t),gu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zo]||(e[zo]=!0,gu("selectionchange",!1,e))}}function Xg(t,e,n,r){switch(Mg(e)){case 1:var s=wE;break;case 4:s=TE;break;default:s=vh}n=s.bind(null,e,n,t),s=void 0,!tc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function yu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=mr(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Eg(function(){var h=i,f=mh(n),g=[];e:{var v=Gg.get(t);if(v!==void 0){var T=wh,k=t;switch(t){case"keypress":if(sa(n)===0)break e;case"keydown":case"keyup":T=FE;break;case"focusin":k="focus",T=cu;break;case"focusout":k="blur",T=cu;break;case"beforeblur":case"afterblur":T=cu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Yf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=AE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=UE;break;case Hg:case Wg:case Qg:T=kE;break;case Kg:T=BE;break;case"scroll":T=IE;break;case"wheel":T=qE;break;case"copy":case"cut":case"paste":T=xE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Jf}var x=(e&4)!==0,D=!x&&t==="scroll",A=x?v!==null?v+"Capture":null:v;x=[];for(var I=h,C;I!==null;){C=I;var N=C.stateNode;if(C.tag===5&&N!==null&&(C=N,A!==null&&(N=Pi(I,A),N!=null&&x.push(Oi(I,N,C)))),D)break;I=I.return}0<x.length&&(v=new T(v,k,null,n,f),g.push({event:v,listeners:x}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",v&&n!==Zu&&(k=n.relatedTarget||n.fromElement)&&(mr(k)||k[yn]))break e;if((T||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,T?(k=n.relatedTarget||n.toElement,T=h,k=k?mr(k):null,k!==null&&(D=Vr(k),k!==D||k.tag!==5&&k.tag!==6)&&(k=null)):(T=null,k=h),T!==k)){if(x=Yf,N="onMouseLeave",A="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(x=Jf,N="onPointerLeave",A="onPointerEnter",I="pointer"),D=T==null?v:Yr(T),C=k==null?v:Yr(k),v=new x(N,I+"leave",T,n,f),v.target=D,v.relatedTarget=C,N=null,mr(f)===h&&(x=new x(A,I+"enter",k,n,f),x.target=C,x.relatedTarget=D,N=x),D=N,T&&k)t:{for(x=T,A=k,I=0,C=x;C;C=Ur(C))I++;for(C=0,N=A;N;N=Ur(N))C++;for(;0<I-C;)x=Ur(x),I--;for(;0<C-I;)A=Ur(A),C--;for(;I--;){if(x===A||A!==null&&x===A.alternate)break t;x=Ur(x),A=Ur(A)}x=null}else x=null;T!==null&&up(g,v,T,x,!1),k!==null&&D!==null&&up(g,D,k,x,!0)}}e:{if(v=h?Yr(h):window,T=v.nodeName&&v.nodeName.toLowerCase(),T==="select"||T==="input"&&v.type==="file")var F=XE;else if(tp(v))if(Ug)F=tw;else{F=ZE;var j=JE}else(T=v.nodeName)&&T.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(F=ew);if(F&&(F=F(t,h))){bg(g,F,n,f);break e}j&&j(t,v,h),t==="focusout"&&(j=v._wrapperState)&&j.controlled&&v.type==="number"&&Ku(v,"number",v.value)}switch(j=h?Yr(h):window,t){case"focusin":(tp(j)||j.contentEditable==="true")&&(Kr=j,oc=h,_i=null);break;case"focusout":_i=oc=Kr=null;break;case"mousedown":ac=!0;break;case"contextmenu":case"mouseup":case"dragend":ac=!1,op(g,n,f);break;case"selectionchange":if(sw)break;case"keydown":case"keyup":op(g,n,f)}var w;if(Ih)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Qr?Fg(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(Og&&n.locale!=="ko"&&(Qr||m!=="onCompositionStart"?m==="onCompositionEnd"&&Qr&&(w=Lg()):(Mn=f,Eh="value"in Mn?Mn.value:Mn.textContent,Qr=!0)),j=Sa(h,m),0<j.length&&(m=new Xf(m,t,null,n,f),g.push({event:m,listeners:j}),w?m.data=w:(w=jg(n),w!==null&&(m.data=w)))),(w=WE?QE(t,n):KE(t,n))&&(h=Sa(h,"onBeforeInput"),0<h.length&&(f=new Xf("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:h}),f.data=w))}Yg(g,e)})}function Oi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Pi(t,n),i!=null&&r.unshift(Oi(t,i,s)),i=Pi(t,e),i!=null&&r.push(Oi(t,i,s))),t=t.return}return r}function Ur(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function up(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Pi(n,i),u!=null&&a.unshift(Oi(n,u,l))):s||(u=Pi(n,i),u!=null&&a.push(Oi(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var lw=/\r\n?/g,uw=/\u0000|\uFFFD/g;function cp(t){return(typeof t=="string"?t:""+t).replace(lw,`
`).replace(uw,"")}function Bo(t,e,n){if(e=cp(e),cp(t)!==e&&n)throw Error(b(425))}function Aa(){}var lc=null,uc=null;function cc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hc=typeof setTimeout=="function"?setTimeout:void 0,cw=typeof clearTimeout=="function"?clearTimeout:void 0,hp=typeof Promise=="function"?Promise:void 0,hw=typeof queueMicrotask=="function"?queueMicrotask:typeof hp<"u"?function(t){return hp.resolve(null).then(t).catch(dw)}:hc;function dw(t){setTimeout(function(){throw t})}function _u(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ni(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ni(e)}function Un(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ks=Math.random().toString(36).slice(2),Xt="__reactFiber$"+ks,Fi="__reactProps$"+ks,yn="__reactContainer$"+ks,dc="__reactEvents$"+ks,fw="__reactListeners$"+ks,pw="__reactHandles$"+ks;function mr(t){var e=t[Xt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yn]||n[Xt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dp(t);t!==null;){if(n=t[Xt])return n;t=dp(t)}return e}t=n,n=t.parentNode}return null}function no(t){return t=t[Xt]||t[yn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(b(33))}function rl(t){return t[Fi]||null}var fc=[],Xr=-1;function nr(t){return{current:t}}function Ee(t){0>Xr||(t.current=fc[Xr],fc[Xr]=null,Xr--)}function me(t,e){Xr++,fc[Xr]=t.current,t.current=e}var Yn={},it=nr(Yn),mt=nr(!1),Tr=Yn;function ds(t,e){var n=t.type.contextTypes;if(!n)return Yn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function gt(t){return t=t.childContextTypes,t!=null}function Ra(){Ee(mt),Ee(it)}function fp(t,e,n){if(it.current!==Yn)throw Error(b(168));me(it,e),me(mt,n)}function Jg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(b(108,J0(t)||"Unknown",s));return Se({},n,r)}function Ca(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yn,Tr=it.current,me(it,t),me(mt,mt.current),!0}function pp(t,e,n){var r=t.stateNode;if(!r)throw Error(b(169));n?(t=Jg(t,e,Tr),r.__reactInternalMemoizedMergedChildContext=t,Ee(mt),Ee(it),me(it,t)):Ee(mt),me(mt,n)}var dn=null,sl=!1,vu=!1;function Zg(t){dn===null?dn=[t]:dn.push(t)}function mw(t){sl=!0,Zg(t)}function rr(){if(!vu&&dn!==null){vu=!0;var t=0,e=ue;try{var n=dn;for(ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}dn=null,sl=!1}catch(s){throw dn!==null&&(dn=dn.slice(t+1)),Sg(gh,rr),s}finally{ue=e,vu=!1}}return null}var Jr=[],Zr=0,ka=null,Pa=0,xt=[],Vt=0,Ir=null,fn=1,pn="";function dr(t,e){Jr[Zr++]=Pa,Jr[Zr++]=ka,ka=t,Pa=e}function ey(t,e,n){xt[Vt++]=fn,xt[Vt++]=pn,xt[Vt++]=Ir,Ir=t;var r=fn;t=pn;var s=32-qt(r)-1;r&=~(1<<s),n+=1;var i=32-qt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,fn=1<<32-qt(e)+s|n<<s|r,pn=i+t}else fn=1<<i|n<<s|r,pn=t}function Ah(t){t.return!==null&&(dr(t,1),ey(t,1,0))}function Rh(t){for(;t===ka;)ka=Jr[--Zr],Jr[Zr]=null,Pa=Jr[--Zr],Jr[Zr]=null;for(;t===Ir;)Ir=xt[--Vt],xt[Vt]=null,pn=xt[--Vt],xt[Vt]=null,fn=xt[--Vt],xt[Vt]=null}var At=null,It=null,we=!1,Bt=null;function ty(t,e){var n=Nt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,At=t,It=Un(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,At=t,It=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ir!==null?{id:fn,overflow:pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,At=t,It=null,!0):!1;default:return!1}}function pc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mc(t){if(we){var e=It;if(e){var n=e;if(!mp(t,e)){if(pc(t))throw Error(b(418));e=Un(n.nextSibling);var r=At;e&&mp(t,e)?ty(r,n):(t.flags=t.flags&-4097|2,we=!1,At=t)}}else{if(pc(t))throw Error(b(418));t.flags=t.flags&-4097|2,we=!1,At=t}}}function gp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;At=t}function $o(t){if(t!==At)return!1;if(!we)return gp(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cc(t.type,t.memoizedProps)),e&&(e=It)){if(pc(t))throw ny(),Error(b(418));for(;e;)ty(t,e),e=Un(e.nextSibling)}if(gp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(b(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){It=Un(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}It=null}}else It=At?Un(t.stateNode.nextSibling):null;return!0}function ny(){for(var t=It;t;)t=Un(t.nextSibling)}function fs(){It=At=null,we=!1}function Ch(t){Bt===null?Bt=[t]:Bt.push(t)}var gw=Sn.ReactCurrentBatchConfig;function Zs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(b(309));var r=n.stateNode}if(!r)throw Error(b(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(b(284));if(!n._owner)throw Error(b(290,t))}return t}function qo(t,e){throw t=Object.prototype.toString.call(e),Error(b(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yp(t){var e=t._init;return e(t._payload)}function ry(t){function e(A,I){if(t){var C=A.deletions;C===null?(A.deletions=[I],A.flags|=16):C.push(I)}}function n(A,I){if(!t)return null;for(;I!==null;)e(A,I),I=I.sibling;return null}function r(A,I){for(A=new Map;I!==null;)I.key!==null?A.set(I.key,I):A.set(I.index,I),I=I.sibling;return A}function s(A,I){return A=qn(A,I),A.index=0,A.sibling=null,A}function i(A,I,C){return A.index=C,t?(C=A.alternate,C!==null?(C=C.index,C<I?(A.flags|=2,I):C):(A.flags|=2,I)):(A.flags|=1048576,I)}function a(A){return t&&A.alternate===null&&(A.flags|=2),A}function l(A,I,C,N){return I===null||I.tag!==6?(I=Ru(C,A.mode,N),I.return=A,I):(I=s(I,C),I.return=A,I)}function u(A,I,C,N){var F=C.type;return F===Wr?f(A,I,C.props.children,N,C.key):I!==null&&(I.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===xn&&yp(F)===I.type)?(N=s(I,C.props),N.ref=Zs(A,I,C),N.return=A,N):(N=ha(C.type,C.key,C.props,null,A.mode,N),N.ref=Zs(A,I,C),N.return=A,N)}function h(A,I,C,N){return I===null||I.tag!==4||I.stateNode.containerInfo!==C.containerInfo||I.stateNode.implementation!==C.implementation?(I=Cu(C,A.mode,N),I.return=A,I):(I=s(I,C.children||[]),I.return=A,I)}function f(A,I,C,N,F){return I===null||I.tag!==7?(I=Er(C,A.mode,N,F),I.return=A,I):(I=s(I,C),I.return=A,I)}function g(A,I,C){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Ru(""+I,A.mode,C),I.return=A,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Do:return C=ha(I.type,I.key,I.props,null,A.mode,C),C.ref=Zs(A,null,I),C.return=A,C;case Hr:return I=Cu(I,A.mode,C),I.return=A,I;case xn:var N=I._init;return g(A,N(I._payload),C)}if(ii(I)||Ks(I))return I=Er(I,A.mode,C,null),I.return=A,I;qo(A,I)}return null}function v(A,I,C,N){var F=I!==null?I.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return F!==null?null:l(A,I,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Do:return C.key===F?u(A,I,C,N):null;case Hr:return C.key===F?h(A,I,C,N):null;case xn:return F=C._init,v(A,I,F(C._payload),N)}if(ii(C)||Ks(C))return F!==null?null:f(A,I,C,N,null);qo(A,C)}return null}function T(A,I,C,N,F){if(typeof N=="string"&&N!==""||typeof N=="number")return A=A.get(C)||null,l(I,A,""+N,F);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Do:return A=A.get(N.key===null?C:N.key)||null,u(I,A,N,F);case Hr:return A=A.get(N.key===null?C:N.key)||null,h(I,A,N,F);case xn:var j=N._init;return T(A,I,C,j(N._payload),F)}if(ii(N)||Ks(N))return A=A.get(C)||null,f(I,A,N,F,null);qo(I,N)}return null}function k(A,I,C,N){for(var F=null,j=null,w=I,m=I=0,_=null;w!==null&&m<C.length;m++){w.index>m?(_=w,w=null):_=w.sibling;var y=v(A,w,C[m],N);if(y===null){w===null&&(w=_);break}t&&w&&y.alternate===null&&e(A,w),I=i(y,I,m),j===null?F=y:j.sibling=y,j=y,w=_}if(m===C.length)return n(A,w),we&&dr(A,m),F;if(w===null){for(;m<C.length;m++)w=g(A,C[m],N),w!==null&&(I=i(w,I,m),j===null?F=w:j.sibling=w,j=w);return we&&dr(A,m),F}for(w=r(A,w);m<C.length;m++)_=T(w,A,m,C[m],N),_!==null&&(t&&_.alternate!==null&&w.delete(_.key===null?m:_.key),I=i(_,I,m),j===null?F=_:j.sibling=_,j=_);return t&&w.forEach(function(R){return e(A,R)}),we&&dr(A,m),F}function x(A,I,C,N){var F=Ks(C);if(typeof F!="function")throw Error(b(150));if(C=F.call(C),C==null)throw Error(b(151));for(var j=F=null,w=I,m=I=0,_=null,y=C.next();w!==null&&!y.done;m++,y=C.next()){w.index>m?(_=w,w=null):_=w.sibling;var R=v(A,w,y.value,N);if(R===null){w===null&&(w=_);break}t&&w&&R.alternate===null&&e(A,w),I=i(R,I,m),j===null?F=R:j.sibling=R,j=R,w=_}if(y.done)return n(A,w),we&&dr(A,m),F;if(w===null){for(;!y.done;m++,y=C.next())y=g(A,y.value,N),y!==null&&(I=i(y,I,m),j===null?F=y:j.sibling=y,j=y);return we&&dr(A,m),F}for(w=r(A,w);!y.done;m++,y=C.next())y=T(w,A,m,y.value,N),y!==null&&(t&&y.alternate!==null&&w.delete(y.key===null?m:y.key),I=i(y,I,m),j===null?F=y:j.sibling=y,j=y);return t&&w.forEach(function(P){return e(A,P)}),we&&dr(A,m),F}function D(A,I,C,N){if(typeof C=="object"&&C!==null&&C.type===Wr&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Do:e:{for(var F=C.key,j=I;j!==null;){if(j.key===F){if(F=C.type,F===Wr){if(j.tag===7){n(A,j.sibling),I=s(j,C.props.children),I.return=A,A=I;break e}}else if(j.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===xn&&yp(F)===j.type){n(A,j.sibling),I=s(j,C.props),I.ref=Zs(A,j,C),I.return=A,A=I;break e}n(A,j);break}else e(A,j);j=j.sibling}C.type===Wr?(I=Er(C.props.children,A.mode,N,C.key),I.return=A,A=I):(N=ha(C.type,C.key,C.props,null,A.mode,N),N.ref=Zs(A,I,C),N.return=A,A=N)}return a(A);case Hr:e:{for(j=C.key;I!==null;){if(I.key===j)if(I.tag===4&&I.stateNode.containerInfo===C.containerInfo&&I.stateNode.implementation===C.implementation){n(A,I.sibling),I=s(I,C.children||[]),I.return=A,A=I;break e}else{n(A,I);break}else e(A,I);I=I.sibling}I=Cu(C,A.mode,N),I.return=A,A=I}return a(A);case xn:return j=C._init,D(A,I,j(C._payload),N)}if(ii(C))return k(A,I,C,N);if(Ks(C))return x(A,I,C,N);qo(A,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,I!==null&&I.tag===6?(n(A,I.sibling),I=s(I,C),I.return=A,A=I):(n(A,I),I=Ru(C,A.mode,N),I.return=A,A=I),a(A)):n(A,I)}return D}var ps=ry(!0),sy=ry(!1),xa=nr(null),Va=null,es=null,kh=null;function Ph(){kh=es=Va=null}function xh(t){var e=xa.current;Ee(xa),t._currentValue=e}function gc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function as(t,e){Va=t,kh=es=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pt=!0),t.firstContext=null)}function Mt(t){var e=t._currentValue;if(kh!==t)if(t={context:t,memoizedValue:e,next:null},es===null){if(Va===null)throw Error(b(308));es=t,Va.dependencies={lanes:0,firstContext:t}}else es=es.next=t;return e}var gr=null;function Vh(t){gr===null?gr=[t]:gr.push(t)}function iy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Vh(e)):(n.next=s.next,s.next=n),e.interleaved=n,_n(t,r)}function _n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vn=!1;function Nh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ie&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,_n(t,n)}return s=r.interleaved,s===null?(e.next=e,Vh(r)):(e.next=s.next,s.next=e),r.interleaved=e,_n(t,n)}function ia(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}function _p(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Na(t,e,n,r){var s=t.updateQueue;Vn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?i=h:a.next=h,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;a=0,f=h=u=null,l=i;do{var v=l.lane,T=l.eventTime;if((r&v)===v){f!==null&&(f=f.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,x=l;switch(v=e,T=n,x.tag){case 1:if(k=x.payload,typeof k=="function"){g=k.call(T,g,v);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=x.payload,v=typeof k=="function"?k.call(T,g,v):k,v==null)break e;g=Se({},g,v);break e;case 2:Vn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else T={eventTime:T,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=T,u=g):f=f.next=T,a|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(f===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ar|=a,t.lanes=a,t.memoizedState=g}}function vp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(b(191,s));s.call(r)}}}var ro={},Zt=nr(ro),ji=nr(ro),bi=nr(ro);function yr(t){if(t===ro)throw Error(b(174));return t}function Dh(t,e){switch(me(bi,e),me(ji,t),me(Zt,ro),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yu(e,t)}Ee(Zt),me(Zt,e)}function ms(){Ee(Zt),Ee(ji),Ee(bi)}function ay(t){yr(bi.current);var e=yr(Zt.current),n=Yu(e,t.type);e!==n&&(me(ji,t),me(Zt,n))}function Mh(t){ji.current===t&&(Ee(Zt),Ee(ji))}var Te=nr(0);function Da(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Eu=[];function Lh(){for(var t=0;t<Eu.length;t++)Eu[t]._workInProgressVersionPrimary=null;Eu.length=0}var oa=Sn.ReactCurrentDispatcher,wu=Sn.ReactCurrentBatchConfig,Sr=0,Ie=null,Oe=null,Ue=null,Ma=!1,vi=!1,Ui=0,yw=0;function Ze(){throw Error(b(321))}function Oh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qt(t[n],e[n]))return!1;return!0}function Fh(t,e,n,r,s,i){if(Sr=i,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oa.current=t===null||t.memoizedState===null?ww:Tw,t=n(r,s),vi){i=0;do{if(vi=!1,Ui=0,25<=i)throw Error(b(301));i+=1,Ue=Oe=null,e.updateQueue=null,oa.current=Iw,t=n(r,s)}while(vi)}if(oa.current=La,e=Oe!==null&&Oe.next!==null,Sr=0,Ue=Oe=Ie=null,Ma=!1,e)throw Error(b(300));return t}function jh(){var t=Ui!==0;return Ui=0,t}function Yt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Ie.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function Lt(){if(Oe===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Oe.next;var e=Ue===null?Ie.memoizedState:Ue.next;if(e!==null)Ue=e,Oe=t;else{if(t===null)throw Error(b(310));Oe=t,t={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Ue===null?Ie.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function zi(t,e){return typeof e=="function"?e(t):e}function Tu(t){var e=Lt(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=Oe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,h=i;do{var f=h.lane;if((Sr&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=g,a=r):u=u.next=g,Ie.lanes|=f,Ar|=f}h=h.next}while(h!==null&&h!==i);u===null?a=r:u.next=l,Qt(r,e.memoizedState)||(pt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ie.lanes|=i,Ar|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Iu(t){var e=Lt(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Qt(i,e.memoizedState)||(pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function ly(){}function uy(t,e){var n=Ie,r=Lt(),s=e(),i=!Qt(r.memoizedState,s);if(i&&(r.memoizedState=s,pt=!0),r=r.queue,bh(dy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,Bi(9,hy.bind(null,n,r,s,e),void 0,null),ze===null)throw Error(b(349));Sr&30||cy(n,e,s)}return s}function cy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hy(t,e,n,r){e.value=n,e.getSnapshot=r,fy(e)&&py(t)}function dy(t,e,n){return n(function(){fy(e)&&py(t)})}function fy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qt(t,n)}catch{return!0}}function py(t){var e=_n(t,1);e!==null&&Ht(e,t,1,-1)}function Ep(t){var e=Yt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:t},e.queue=t,t=t.dispatch=Ew.bind(null,Ie,t),[e.memoizedState,t]}function Bi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function my(){return Lt().memoizedState}function aa(t,e,n,r){var s=Yt();Ie.flags|=t,s.memoizedState=Bi(1|e,n,void 0,r===void 0?null:r)}function il(t,e,n,r){var s=Lt();r=r===void 0?null:r;var i=void 0;if(Oe!==null){var a=Oe.memoizedState;if(i=a.destroy,r!==null&&Oh(r,a.deps)){s.memoizedState=Bi(e,n,i,r);return}}Ie.flags|=t,s.memoizedState=Bi(1|e,n,i,r)}function wp(t,e){return aa(8390656,8,t,e)}function bh(t,e){return il(2048,8,t,e)}function gy(t,e){return il(4,2,t,e)}function yy(t,e){return il(4,4,t,e)}function _y(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vy(t,e,n){return n=n!=null?n.concat([t]):null,il(4,4,_y.bind(null,e,t),n)}function Uh(){}function Ey(t,e){var n=Lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Oh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function wy(t,e){var n=Lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Oh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ty(t,e,n){return Sr&21?(Qt(n,e)||(n=Cg(),Ie.lanes|=n,Ar|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pt=!0),t.memoizedState=n)}function _w(t,e){var n=ue;ue=n!==0&&4>n?n:4,t(!0);var r=wu.transition;wu.transition={};try{t(!1),e()}finally{ue=n,wu.transition=r}}function Iy(){return Lt().memoizedState}function vw(t,e,n){var r=$n(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Sy(t))Ay(e,n);else if(n=iy(t,e,n,r),n!==null){var s=ut();Ht(n,t,r,s),Ry(n,e,r)}}function Ew(t,e,n){var r=$n(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sy(t))Ay(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Qt(l,a)){var u=e.interleaved;u===null?(s.next=s,Vh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=iy(t,e,s,r),n!==null&&(s=ut(),Ht(n,t,r,s),Ry(n,e,r))}}function Sy(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function Ay(t,e){vi=Ma=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ry(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}var La={readContext:Mt,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},ww={readContext:Mt,useCallback:function(t,e){return Yt().memoizedState=[t,e===void 0?null:e],t},useContext:Mt,useEffect:wp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,aa(4194308,4,_y.bind(null,e,t),n)},useLayoutEffect:function(t,e){return aa(4194308,4,t,e)},useInsertionEffect:function(t,e){return aa(4,2,t,e)},useMemo:function(t,e){var n=Yt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vw.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=Yt();return t={current:t},e.memoizedState=t},useState:Ep,useDebugValue:Uh,useDeferredValue:function(t){return Yt().memoizedState=t},useTransition:function(){var t=Ep(!1),e=t[0];return t=_w.bind(null,t[1]),Yt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,s=Yt();if(we){if(n===void 0)throw Error(b(407));n=n()}else{if(n=e(),ze===null)throw Error(b(349));Sr&30||cy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,wp(dy.bind(null,r,i,t),[t]),r.flags|=2048,Bi(9,hy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Yt(),e=ze.identifierPrefix;if(we){var n=pn,r=fn;n=(r&~(1<<32-qt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ui++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Tw={readContext:Mt,useCallback:Ey,useContext:Mt,useEffect:bh,useImperativeHandle:vy,useInsertionEffect:gy,useLayoutEffect:yy,useMemo:wy,useReducer:Tu,useRef:my,useState:function(){return Tu(zi)},useDebugValue:Uh,useDeferredValue:function(t){var e=Lt();return Ty(e,Oe.memoizedState,t)},useTransition:function(){var t=Tu(zi)[0],e=Lt().memoizedState;return[t,e]},useMutableSource:ly,useSyncExternalStore:uy,useId:Iy,unstable_isNewReconciler:!1},Iw={readContext:Mt,useCallback:Ey,useContext:Mt,useEffect:bh,useImperativeHandle:vy,useInsertionEffect:gy,useLayoutEffect:yy,useMemo:wy,useReducer:Iu,useRef:my,useState:function(){return Iu(zi)},useDebugValue:Uh,useDeferredValue:function(t){var e=Lt();return Oe===null?e.memoizedState=t:Ty(e,Oe.memoizedState,t)},useTransition:function(){var t=Iu(zi)[0],e=Lt().memoizedState;return[t,e]},useMutableSource:ly,useSyncExternalStore:uy,useId:Iy,unstable_isNewReconciler:!1};function bt(t,e){if(t&&t.defaultProps){e=Se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ol={isMounted:function(t){return(t=t._reactInternals)?Vr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ut(),s=$n(t),i=mn(r,s);i.payload=e,n!=null&&(i.callback=n),e=zn(t,i,s),e!==null&&(Ht(e,t,s,r),ia(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ut(),s=$n(t),i=mn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=zn(t,i,s),e!==null&&(Ht(e,t,s,r),ia(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ut(),r=$n(t),s=mn(n,r);s.tag=2,e!=null&&(s.callback=e),e=zn(t,s,r),e!==null&&(Ht(e,t,r,n),ia(e,t,r))}};function Tp(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Mi(n,r)||!Mi(s,i):!0}function Cy(t,e,n){var r=!1,s=Yn,i=e.contextType;return typeof i=="object"&&i!==null?i=Mt(i):(s=gt(e)?Tr:it.current,r=e.contextTypes,i=(r=r!=null)?ds(t,s):Yn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ol,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ip(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ol.enqueueReplaceState(e,e.state,null)}function _c(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Nh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Mt(i):(i=gt(e)?Tr:it.current,s.context=ds(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(yc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ol.enqueueReplaceState(s,s.state,null),Na(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function gs(t,e){try{var n="",r=e;do n+=X0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Su(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Sw=typeof WeakMap=="function"?WeakMap:Map;function ky(t,e,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fa||(Fa=!0,Pc=r),vc(t,e)},n}function Py(t,e,n){n=mn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){vc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){vc(t,e),typeof r!="function"&&(Bn===null?Bn=new Set([this]):Bn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Sp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Sw;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=jw.bind(null,t,e,n),e.then(t,t))}function Ap(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Rp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mn(-1,1),e.tag=2,zn(n,e,1))),n.lanes|=1),t)}var Aw=Sn.ReactCurrentOwner,pt=!1;function lt(t,e,n,r){e.child=t===null?sy(e,null,n,r):ps(e,t.child,n,r)}function Cp(t,e,n,r,s){n=n.render;var i=e.ref;return as(e,s),r=Fh(t,e,n,r,i,s),n=jh(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vn(t,e,s)):(we&&n&&Ah(e),e.flags|=1,lt(t,e,r,s),e.child)}function kp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Kh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,xy(t,e,i,r,s)):(t=ha(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Mi,n(a,r)&&t.ref===e.ref)return vn(t,e,s)}return e.flags|=1,t=qn(i,r),t.ref=e.ref,t.return=e,e.child=t}function xy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Mi(i,r)&&t.ref===e.ref)if(pt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(pt=!0);else return e.lanes=t.lanes,vn(t,e,s)}return Ec(t,e,n,r,s)}function Vy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(ns,wt),wt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(ns,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,me(ns,wt),wt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,me(ns,wt),wt|=r;return lt(t,e,s,n),e.child}function Ny(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ec(t,e,n,r,s){var i=gt(n)?Tr:it.current;return i=ds(e,i),as(e,s),n=Fh(t,e,n,r,i,s),r=jh(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vn(t,e,s)):(we&&r&&Ah(e),e.flags|=1,lt(t,e,n,s),e.child)}function Pp(t,e,n,r,s){if(gt(n)){var i=!0;Ca(e)}else i=!1;if(as(e,s),e.stateNode===null)la(t,e),Cy(e,n,r),_c(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Mt(h):(h=gt(n)?Tr:it.current,h=ds(e,h));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Ip(e,a,r,h),Vn=!1;var v=e.memoizedState;a.state=v,Na(e,r,a,s),u=e.memoizedState,l!==r||v!==u||mt.current||Vn?(typeof f=="function"&&(yc(e,n,f,r),u=e.memoizedState),(l=Vn||Tp(e,n,l,r,v,u,h))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,oy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:bt(e.type,l),a.props=h,g=e.pendingProps,v=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Mt(u):(u=gt(n)?Tr:it.current,u=ds(e,u));var T=n.getDerivedStateFromProps;(f=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==g||v!==u)&&Ip(e,a,r,u),Vn=!1,v=e.memoizedState,a.state=v,Na(e,r,a,s);var k=e.memoizedState;l!==g||v!==k||mt.current||Vn?(typeof T=="function"&&(yc(e,n,T,r),k=e.memoizedState),(h=Vn||Tp(e,n,h,r,v,k,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,k,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,k,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),a.props=r,a.state=k,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return wc(t,e,n,r,i,s)}function wc(t,e,n,r,s,i){Ny(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&pp(e,n,!1),vn(t,e,i);r=e.stateNode,Aw.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=ps(e,t.child,null,i),e.child=ps(e,null,l,i)):lt(t,e,l,i),e.memoizedState=r.state,s&&pp(e,n,!0),e.child}function Dy(t){var e=t.stateNode;e.pendingContext?fp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fp(t,e.context,!1),Dh(t,e.containerInfo)}function xp(t,e,n,r,s){return fs(),Ch(s),e.flags|=256,lt(t,e,n,r),e.child}var Tc={dehydrated:null,treeContext:null,retryLane:0};function Ic(t){return{baseLanes:t,cachePool:null,transitions:null}}function My(t,e,n){var r=e.pendingProps,s=Te.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),me(Te,s&1),t===null)return mc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=ul(a,r,0,null),t=Er(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ic(n),e.memoizedState=Tc,t):zh(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Rw(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=qn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=qn(l,i):(i=Er(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Ic(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Tc,r}return i=t.child,t=i.sibling,r=qn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zh(t,e){return e=ul({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ho(t,e,n,r){return r!==null&&Ch(r),ps(e,t.child,null,n),t=zh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Rw(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Su(Error(b(422))),Ho(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ul({mode:"visible",children:r.children},s,0,null),i=Er(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ps(e,t.child,null,a),e.child.memoizedState=Ic(a),e.memoizedState=Tc,i);if(!(e.mode&1))return Ho(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(b(419)),r=Su(i,r,void 0),Ho(t,e,a,r)}if(l=(a&t.childLanes)!==0,pt||l){if(r=ze,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_n(t,s),Ht(r,t,s,-1))}return Qh(),r=Su(Error(b(421))),Ho(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=bw.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,It=Un(s.nextSibling),At=e,we=!0,Bt=null,t!==null&&(xt[Vt++]=fn,xt[Vt++]=pn,xt[Vt++]=Ir,fn=t.id,pn=t.overflow,Ir=e),e=zh(e,r.children),e.flags|=4096,e)}function Vp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gc(t.return,e,n)}function Au(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ly(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(lt(t,e,r.children,n),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vp(t,n,e);else if(t.tag===19)Vp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(me(Te,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Da(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Au(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Da(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Au(e,!0,n,null,i);break;case"together":Au(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function la(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ar|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(b(153));if(e.child!==null){for(t=e.child,n=qn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Cw(t,e,n){switch(e.tag){case 3:Dy(e),fs();break;case 5:ay(e);break;case 1:gt(e.type)&&Ca(e);break;case 4:Dh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;me(xa,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(me(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?My(t,e,n):(me(Te,Te.current&1),t=vn(t,e,n),t!==null?t.sibling:null);me(Te,Te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ly(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),me(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,Vy(t,e,n)}return vn(t,e,n)}var Oy,Sc,Fy,jy;Oy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sc=function(){};Fy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,yr(Zt.current);var i=null;switch(n){case"input":s=Wu(t,s),r=Wu(t,r),i=[];break;case"select":s=Se({},s,{value:void 0}),r=Se({},r,{value:void 0}),i=[];break;case"textarea":s=Gu(t,s),r=Gu(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Aa)}Xu(n,r);var a;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ci.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ci.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&_e("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};jy=function(t,e,n,r){n!==r&&(e.flags|=4)};function ei(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kw(t,e,n){var r=e.pendingProps;switch(Rh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(e),null;case 1:return gt(e.type)&&Ra(),et(e),null;case 3:return r=e.stateNode,ms(),Ee(mt),Ee(it),Lh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($o(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bt!==null&&(Nc(Bt),Bt=null))),Sc(t,e),et(e),null;case 5:Mh(e);var s=yr(bi.current);if(n=e.type,t!==null&&e.stateNode!=null)Fy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(b(166));return et(e),null}if(t=yr(Zt.current),$o(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Xt]=e,r[Fi]=i,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<ai.length;s++)_e(ai[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Uf(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":Bf(r,i),_e("invalid",r)}Xu(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Bo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Bo(r.textContent,l,t),s=["children",""+l]):Ci.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&_e("scroll",r)}switch(n){case"input":Mo(r),zf(r,i,!0);break;case"textarea":Mo(r),$f(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Aa)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=dg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Xt]=e,t[Fi]=r,Oy(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ju(n,r),n){case"dialog":_e("cancel",t),_e("close",t),s=r;break;case"iframe":case"object":case"embed":_e("load",t),s=r;break;case"video":case"audio":for(s=0;s<ai.length;s++)_e(ai[s],t);s=r;break;case"source":_e("error",t),s=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=r;break;case"details":_e("toggle",t),s=r;break;case"input":Uf(t,r),s=Wu(t,r),_e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Se({},r,{value:void 0}),_e("invalid",t);break;case"textarea":Bf(t,r),s=Gu(t,r),_e("invalid",t);break;default:s=r}Xu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?mg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&fg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ki(t,u):typeof u=="number"&&ki(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ci.hasOwnProperty(i)?u!=null&&i==="onScroll"&&_e("scroll",t):u!=null&&hh(t,i,u,a))}switch(n){case"input":Mo(t),zf(t,r,!1);break;case"textarea":Mo(t),$f(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Gn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?rs(t,!!r.multiple,i,!1):r.defaultValue!=null&&rs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Aa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return et(e),null;case 6:if(t&&e.stateNode!=null)jy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(b(166));if(n=yr(bi.current),yr(Zt.current),$o(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xt]=e,(i=r.nodeValue!==n)&&(t=At,t!==null))switch(t.tag){case 3:Bo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xt]=e,e.stateNode=r}return et(e),null;case 13:if(Ee(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&It!==null&&e.mode&1&&!(e.flags&128))ny(),fs(),e.flags|=98560,i=!1;else if(i=$o(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(b(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(b(317));i[Xt]=e}else fs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;et(e),i=!1}else Bt!==null&&(Nc(Bt),Bt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Fe===0&&(Fe=3):Qh())),e.updateQueue!==null&&(e.flags|=4),et(e),null);case 4:return ms(),Sc(t,e),t===null&&Li(e.stateNode.containerInfo),et(e),null;case 10:return xh(e.type._context),et(e),null;case 17:return gt(e.type)&&Ra(),et(e),null;case 19:if(Ee(Te),i=e.memoizedState,i===null)return et(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)ei(i,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Da(t),a!==null){for(e.flags|=128,ei(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(Te,Te.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ve()>ys&&(e.flags|=128,r=!0,ei(i,!1),e.lanes=4194304)}else{if(!r)if(t=Da(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ei(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!we)return et(e),null}else 2*Ve()-i.renderingStartTime>ys&&n!==1073741824&&(e.flags|=128,r=!0,ei(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ve(),e.sibling=null,n=Te.current,me(Te,r?n&1|2:n&1),e):(et(e),null);case 22:case 23:return Wh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wt&1073741824&&(et(e),e.subtreeFlags&6&&(e.flags|=8192)):et(e),null;case 24:return null;case 25:return null}throw Error(b(156,e.tag))}function Pw(t,e){switch(Rh(e),e.tag){case 1:return gt(e.type)&&Ra(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ms(),Ee(mt),Ee(it),Lh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mh(e),null;case 13:if(Ee(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(b(340));fs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Te),null;case 4:return ms(),null;case 10:return xh(e.type._context),null;case 22:case 23:return Wh(),null;case 24:return null;default:return null}}var Wo=!1,rt=!1,xw=typeof WeakSet=="function"?WeakSet:Set,$=null;function ts(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ke(t,e,r)}else n.current=null}function Ac(t,e,n){try{n()}catch(r){ke(t,e,r)}}var Np=!1;function Vw(t,e){if(lc=Ta,t=$g(),Sh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,f=0,g=t,v=null;t:for(;;){for(var T;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==i||r!==0&&g.nodeType!==3||(u=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(T=g.firstChild)!==null;)v=g,g=T;for(;;){if(g===t)break t;if(v===n&&++h===s&&(l=a),v===i&&++f===r&&(u=a),(T=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=T}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(uc={focusedElem:t,selectionRange:n},Ta=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var x=k.memoizedProps,D=k.memoizedState,A=e.stateNode,I=A.getSnapshotBeforeUpdate(e.elementType===e.type?x:bt(e.type,x),D);A.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(N){ke(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return k=Np,Np=!1,k}function Ei(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ac(e,n,i)}s=s.next}while(s!==r)}}function al(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Rc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function by(t){var e=t.alternate;e!==null&&(t.alternate=null,by(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xt],delete e[Fi],delete e[dc],delete e[fw],delete e[pw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Uy(t){return t.tag===5||t.tag===3||t.tag===4}function Dp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Uy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Aa));else if(r!==4&&(t=t.child,t!==null))for(Cc(t,e,n),t=t.sibling;t!==null;)Cc(t,e,n),t=t.sibling}function kc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kc(t,e,n),t=t.sibling;t!==null;)kc(t,e,n),t=t.sibling}var $e=null,zt=!1;function Pn(t,e,n){for(n=n.child;n!==null;)zy(t,e,n),n=n.sibling}function zy(t,e,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Za,n)}catch{}switch(n.tag){case 5:rt||ts(n,e);case 6:var r=$e,s=zt;$e=null,Pn(t,e,n),$e=r,zt=s,$e!==null&&(zt?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(zt?(t=$e,n=n.stateNode,t.nodeType===8?_u(t.parentNode,n):t.nodeType===1&&_u(t,n),Ni(t)):_u($e,n.stateNode));break;case 4:r=$e,s=zt,$e=n.stateNode.containerInfo,zt=!0,Pn(t,e,n),$e=r,zt=s;break;case 0:case 11:case 14:case 15:if(!rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Ac(n,e,a),s=s.next}while(s!==r)}Pn(t,e,n);break;case 1:if(!rt&&(ts(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ke(n,e,l)}Pn(t,e,n);break;case 21:Pn(t,e,n);break;case 22:n.mode&1?(rt=(r=rt)||n.memoizedState!==null,Pn(t,e,n),rt=r):Pn(t,e,n);break;default:Pn(t,e,n)}}function Mp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xw),e.forEach(function(r){var s=Uw.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:$e=l.stateNode,zt=!1;break e;case 3:$e=l.stateNode.containerInfo,zt=!0;break e;case 4:$e=l.stateNode.containerInfo,zt=!0;break e}l=l.return}if($e===null)throw Error(b(160));zy(i,a,s),$e=null,zt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){ke(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)By(e,t),e=e.sibling}function By(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jt(e,t),Gt(t),r&4){try{Ei(3,t,t.return),al(3,t)}catch(x){ke(t,t.return,x)}try{Ei(5,t,t.return)}catch(x){ke(t,t.return,x)}}break;case 1:jt(e,t),Gt(t),r&512&&n!==null&&ts(n,n.return);break;case 5:if(jt(e,t),Gt(t),r&512&&n!==null&&ts(n,n.return),t.flags&32){var s=t.stateNode;try{ki(s,"")}catch(x){ke(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&cg(s,i),Ju(l,a);var h=Ju(l,i);for(a=0;a<u.length;a+=2){var f=u[a],g=u[a+1];f==="style"?mg(s,g):f==="dangerouslySetInnerHTML"?fg(s,g):f==="children"?ki(s,g):hh(s,f,g,h)}switch(l){case"input":Qu(s,i);break;case"textarea":hg(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?rs(s,!!i.multiple,T,!1):v!==!!i.multiple&&(i.defaultValue!=null?rs(s,!!i.multiple,i.defaultValue,!0):rs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Fi]=i}catch(x){ke(t,t.return,x)}}break;case 6:if(jt(e,t),Gt(t),r&4){if(t.stateNode===null)throw Error(b(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){ke(t,t.return,x)}}break;case 3:if(jt(e,t),Gt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ni(e.containerInfo)}catch(x){ke(t,t.return,x)}break;case 4:jt(e,t),Gt(t);break;case 13:jt(e,t),Gt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qh=Ve())),r&4&&Mp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(rt=(h=rt)||f,jt(e,t),rt=h):jt(e,t),Gt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for($=t,f=t.child;f!==null;){for(g=$=f;$!==null;){switch(v=$,T=v.child,v.tag){case 0:case 11:case 14:case 15:Ei(4,v,v.return);break;case 1:ts(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(x){ke(r,n,x)}}break;case 5:ts(v,v.return);break;case 22:if(v.memoizedState!==null){Op(g);continue}}T!==null?(T.return=v,$=T):Op(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{s=g.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,u=g.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=pg("display",a))}catch(x){ke(t,t.return,x)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(x){ke(t,t.return,x)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:jt(e,t),Gt(t),r&4&&Mp(t);break;case 21:break;default:jt(e,t),Gt(t)}}function Gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Uy(n)){var r=n;break e}n=n.return}throw Error(b(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ki(s,""),r.flags&=-33);var i=Dp(t);kc(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Dp(t);Cc(t,l,a);break;default:throw Error(b(161))}}catch(u){ke(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Nw(t,e,n){$=t,$y(t)}function $y(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Wo;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||rt;l=Wo;var h=rt;if(Wo=a,(rt=u)&&!h)for($=s;$!==null;)a=$,u=a.child,a.tag===22&&a.memoizedState!==null?Fp(s):u!==null?(u.return=a,$=u):Fp(s);for(;i!==null;)$=i,$y(i),i=i.sibling;$=s,Wo=l,rt=h}Lp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):Lp(t)}}function Lp(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rt||al(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!rt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:bt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&vp(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&Ni(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}rt||e.flags&512&&Rc(e)}catch(v){ke(e,e.return,v)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Op(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Fp(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{al(4,e)}catch(u){ke(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){ke(e,s,u)}}var i=e.return;try{Rc(e)}catch(u){ke(e,i,u)}break;case 5:var a=e.return;try{Rc(e)}catch(u){ke(e,a,u)}}}catch(u){ke(e,e.return,u)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var Dw=Math.ceil,Oa=Sn.ReactCurrentDispatcher,Bh=Sn.ReactCurrentOwner,Dt=Sn.ReactCurrentBatchConfig,ie=0,ze=null,De=null,We=0,wt=0,ns=nr(0),Fe=0,$i=null,Ar=0,ll=0,$h=0,wi=null,dt=null,qh=0,ys=1/0,hn=null,Fa=!1,Pc=null,Bn=null,Qo=!1,Ln=null,ja=0,Ti=0,xc=null,ua=-1,ca=0;function ut(){return ie&6?Ve():ua!==-1?ua:ua=Ve()}function $n(t){return t.mode&1?ie&2&&We!==0?We&-We:gw.transition!==null?(ca===0&&(ca=Cg()),ca):(t=ue,t!==0||(t=window.event,t=t===void 0?16:Mg(t.type)),t):1}function Ht(t,e,n,r){if(50<Ti)throw Ti=0,xc=null,Error(b(185));eo(t,n,r),(!(ie&2)||t!==ze)&&(t===ze&&(!(ie&2)&&(ll|=n),Fe===4&&Dn(t,We)),yt(t,r),n===1&&ie===0&&!(e.mode&1)&&(ys=Ve()+500,sl&&rr()))}function yt(t,e){var n=t.callbackNode;gE(t,e);var r=wa(t,t===ze?We:0);if(r===0)n!==null&&Wf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Wf(n),e===1)t.tag===0?mw(jp.bind(null,t)):Zg(jp.bind(null,t)),hw(function(){!(ie&6)&&rr()}),n=null;else{switch(kg(r)){case 1:n=gh;break;case 4:n=Ag;break;case 16:n=Ea;break;case 536870912:n=Rg;break;default:n=Ea}n=Xy(n,qy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qy(t,e){if(ua=-1,ca=0,ie&6)throw Error(b(327));var n=t.callbackNode;if(ls()&&t.callbackNode!==n)return null;var r=wa(t,t===ze?We:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ba(t,r);else{e=r;var s=ie;ie|=2;var i=Wy();(ze!==t||We!==e)&&(hn=null,ys=Ve()+500,vr(t,e));do try{Ow();break}catch(l){Hy(t,l)}while(!0);Ph(),Oa.current=i,ie=s,De!==null?e=0:(ze=null,We=0,e=Fe)}if(e!==0){if(e===2&&(s=rc(t),s!==0&&(r=s,e=Vc(t,s))),e===1)throw n=$i,vr(t,0),Dn(t,r),yt(t,Ve()),n;if(e===6)Dn(t,r);else{if(s=t.current.alternate,!(r&30)&&!Mw(s)&&(e=ba(t,r),e===2&&(i=rc(t),i!==0&&(r=i,e=Vc(t,i))),e===1))throw n=$i,vr(t,0),Dn(t,r),yt(t,Ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(b(345));case 2:fr(t,dt,hn);break;case 3:if(Dn(t,r),(r&130023424)===r&&(e=qh+500-Ve(),10<e)){if(wa(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ut(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=hc(fr.bind(null,t,dt,hn),e);break}fr(t,dt,hn);break;case 4:if(Dn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-qt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dw(r/1960))-r,10<r){t.timeoutHandle=hc(fr.bind(null,t,dt,hn),r);break}fr(t,dt,hn);break;case 5:fr(t,dt,hn);break;default:throw Error(b(329))}}}return yt(t,Ve()),t.callbackNode===n?qy.bind(null,t):null}function Vc(t,e){var n=wi;return t.current.memoizedState.isDehydrated&&(vr(t,e).flags|=256),t=ba(t,e),t!==2&&(e=dt,dt=n,e!==null&&Nc(e)),t}function Nc(t){dt===null?dt=t:dt.push.apply(dt,t)}function Mw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Qt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dn(t,e){for(e&=~$h,e&=~ll,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qt(e),r=1<<n;t[n]=-1,e&=~r}}function jp(t){if(ie&6)throw Error(b(327));ls();var e=wa(t,0);if(!(e&1))return yt(t,Ve()),null;var n=ba(t,e);if(t.tag!==0&&n===2){var r=rc(t);r!==0&&(e=r,n=Vc(t,r))}if(n===1)throw n=$i,vr(t,0),Dn(t,e),yt(t,Ve()),n;if(n===6)throw Error(b(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fr(t,dt,hn),yt(t,Ve()),null}function Hh(t,e){var n=ie;ie|=1;try{return t(e)}finally{ie=n,ie===0&&(ys=Ve()+500,sl&&rr())}}function Rr(t){Ln!==null&&Ln.tag===0&&!(ie&6)&&ls();var e=ie;ie|=1;var n=Dt.transition,r=ue;try{if(Dt.transition=null,ue=1,t)return t()}finally{ue=r,Dt.transition=n,ie=e,!(ie&6)&&rr()}}function Wh(){wt=ns.current,Ee(ns)}function vr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cw(n)),De!==null)for(n=De.return;n!==null;){var r=n;switch(Rh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ra();break;case 3:ms(),Ee(mt),Ee(it),Lh();break;case 5:Mh(r);break;case 4:ms();break;case 13:Ee(Te);break;case 19:Ee(Te);break;case 10:xh(r.type._context);break;case 22:case 23:Wh()}n=n.return}if(ze=t,De=t=qn(t.current,null),We=wt=e,Fe=0,$i=null,$h=ll=Ar=0,dt=wi=null,gr!==null){for(e=0;e<gr.length;e++)if(n=gr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}gr=null}return t}function Hy(t,e){do{var n=De;try{if(Ph(),oa.current=La,Ma){for(var r=Ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ma=!1}if(Sr=0,Ue=Oe=Ie=null,vi=!1,Ui=0,Bh.current=null,n===null||n.return===null){Fe=1,$i=e,De=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=We,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var T=Ap(a);if(T!==null){T.flags&=-257,Rp(T,a,l,i,e),T.mode&1&&Sp(i,h,e),e=T,u=h;var k=e.updateQueue;if(k===null){var x=new Set;x.add(u),e.updateQueue=x}else k.add(u);break e}else{if(!(e&1)){Sp(i,h,e),Qh();break e}u=Error(b(426))}}else if(we&&l.mode&1){var D=Ap(a);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Rp(D,a,l,i,e),Ch(gs(u,l));break e}}i=u=gs(u,l),Fe!==4&&(Fe=2),wi===null?wi=[i]:wi.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var A=ky(i,u,e);_p(i,A);break e;case 1:l=u;var I=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof I.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Bn===null||!Bn.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=Py(i,l,e);_p(i,N);break e}}i=i.return}while(i!==null)}Ky(n)}catch(F){e=F,De===n&&n!==null&&(De=n=n.return);continue}break}while(!0)}function Wy(){var t=Oa.current;return Oa.current=La,t===null?La:t}function Qh(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),ze===null||!(Ar&268435455)&&!(ll&268435455)||Dn(ze,We)}function ba(t,e){var n=ie;ie|=2;var r=Wy();(ze!==t||We!==e)&&(hn=null,vr(t,e));do try{Lw();break}catch(s){Hy(t,s)}while(!0);if(Ph(),ie=n,Oa.current=r,De!==null)throw Error(b(261));return ze=null,We=0,Fe}function Lw(){for(;De!==null;)Qy(De)}function Ow(){for(;De!==null&&!aE();)Qy(De)}function Qy(t){var e=Yy(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?Ky(t):De=e,Bh.current=null}function Ky(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Pw(n,e),n!==null){n.flags&=32767,De=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,De=null;return}}else if(n=kw(n,e,wt),n!==null){De=n;return}if(e=e.sibling,e!==null){De=e;return}De=e=t}while(e!==null);Fe===0&&(Fe=5)}function fr(t,e,n){var r=ue,s=Dt.transition;try{Dt.transition=null,ue=1,Fw(t,e,n,r)}finally{Dt.transition=s,ue=r}return null}function Fw(t,e,n,r){do ls();while(Ln!==null);if(ie&6)throw Error(b(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(b(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(yE(t,i),t===ze&&(De=ze=null,We=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qo||(Qo=!0,Xy(Ea,function(){return ls(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Dt.transition,Dt.transition=null;var a=ue;ue=1;var l=ie;ie|=4,Bh.current=null,Vw(t,n),By(n,t),rw(uc),Ta=!!lc,uc=lc=null,t.current=n,Nw(n),lE(),ie=l,ue=a,Dt.transition=i}else t.current=n;if(Qo&&(Qo=!1,Ln=t,ja=s),i=t.pendingLanes,i===0&&(Bn=null),hE(n.stateNode),yt(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Fa)throw Fa=!1,t=Pc,Pc=null,t;return ja&1&&t.tag!==0&&ls(),i=t.pendingLanes,i&1?t===xc?Ti++:(Ti=0,xc=t):Ti=0,rr(),null}function ls(){if(Ln!==null){var t=kg(ja),e=Dt.transition,n=ue;try{if(Dt.transition=null,ue=16>t?16:t,Ln===null)var r=!1;else{if(t=Ln,Ln=null,ja=0,ie&6)throw Error(b(331));var s=ie;for(ie|=4,$=t.current;$!==null;){var i=$,a=i.child;if($.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for($=h;$!==null;){var f=$;switch(f.tag){case 0:case 11:case 15:Ei(8,f,i)}var g=f.child;if(g!==null)g.return=f,$=g;else for(;$!==null;){f=$;var v=f.sibling,T=f.return;if(by(f),f===h){$=null;break}if(v!==null){v.return=T,$=v;break}$=T}}}var k=i.alternate;if(k!==null){var x=k.child;if(x!==null){k.child=null;do{var D=x.sibling;x.sibling=null,x=D}while(x!==null)}}$=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,$=a;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ei(9,i,i.return)}var A=i.sibling;if(A!==null){A.return=i.return,$=A;break e}$=i.return}}var I=t.current;for($=I;$!==null;){a=$;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,$=C;else e:for(a=I;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(F){ke(l,l.return,F)}if(l===a){$=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,$=N;break e}$=l.return}}if(ie=s,rr(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Za,t)}catch{}r=!0}return r}finally{ue=n,Dt.transition=e}}return!1}function bp(t,e,n){e=gs(n,e),e=ky(t,e,1),t=zn(t,e,1),e=ut(),t!==null&&(eo(t,1,e),yt(t,e))}function ke(t,e,n){if(t.tag===3)bp(t,t,n);else for(;e!==null;){if(e.tag===3){bp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bn===null||!Bn.has(r))){t=gs(n,t),t=Py(e,t,1),e=zn(e,t,1),t=ut(),e!==null&&(eo(e,1,t),yt(e,t));break}}e=e.return}}function jw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ut(),t.pingedLanes|=t.suspendedLanes&n,ze===t&&(We&n)===n&&(Fe===4||Fe===3&&(We&130023424)===We&&500>Ve()-qh?vr(t,0):$h|=n),yt(t,e)}function Gy(t,e){e===0&&(t.mode&1?(e=Fo,Fo<<=1,!(Fo&130023424)&&(Fo=4194304)):e=1);var n=ut();t=_n(t,e),t!==null&&(eo(t,e,n),yt(t,n))}function bw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Gy(t,n)}function Uw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(b(314))}r!==null&&r.delete(e),Gy(t,n)}var Yy;Yy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mt.current)pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pt=!1,Cw(t,e,n);pt=!!(t.flags&131072)}else pt=!1,we&&e.flags&1048576&&ey(e,Pa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;la(t,e),t=e.pendingProps;var s=ds(e,it.current);as(e,n),s=Fh(null,e,r,t,s,n);var i=jh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gt(r)?(i=!0,Ca(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Nh(e),s.updater=ol,e.stateNode=s,s._reactInternals=e,_c(e,r,t,n),e=wc(null,e,r,!0,i,n)):(e.tag=0,we&&i&&Ah(e),lt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(la(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Bw(r),t=bt(r,t),s){case 0:e=Ec(null,e,r,t,n);break e;case 1:e=Pp(null,e,r,t,n);break e;case 11:e=Cp(null,e,r,t,n);break e;case 14:e=kp(null,e,r,bt(r.type,t),n);break e}throw Error(b(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bt(r,s),Ec(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bt(r,s),Pp(t,e,r,s,n);case 3:e:{if(Dy(e),t===null)throw Error(b(387));r=e.pendingProps,i=e.memoizedState,s=i.element,oy(t,e),Na(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=gs(Error(b(423)),e),e=xp(t,e,r,n,s);break e}else if(r!==s){s=gs(Error(b(424)),e),e=xp(t,e,r,n,s);break e}else for(It=Un(e.stateNode.containerInfo.firstChild),At=e,we=!0,Bt=null,n=sy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fs(),r===s){e=vn(t,e,n);break e}lt(t,e,r,n)}e=e.child}return e;case 5:return ay(e),t===null&&mc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,cc(r,s)?a=null:i!==null&&cc(r,i)&&(e.flags|=32),Ny(t,e),lt(t,e,a,n),e.child;case 6:return t===null&&mc(e),null;case 13:return My(t,e,n);case 4:return Dh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ps(e,null,r,n):lt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bt(r,s),Cp(t,e,r,s,n);case 7:return lt(t,e,e.pendingProps,n),e.child;case 8:return lt(t,e,e.pendingProps.children,n),e.child;case 12:return lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,me(xa,r._currentValue),r._currentValue=a,i!==null)if(Qt(i.value,a)){if(i.children===s.children&&!mt.current){e=vn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=mn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),gc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(b(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),gc(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}lt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,as(e,n),s=Mt(s),r=r(s),e.flags|=1,lt(t,e,r,n),e.child;case 14:return r=e.type,s=bt(r,e.pendingProps),s=bt(r.type,s),kp(t,e,r,s,n);case 15:return xy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bt(r,s),la(t,e),e.tag=1,gt(r)?(t=!0,Ca(e)):t=!1,as(e,n),Cy(e,r,s),_c(e,r,s,n),wc(null,e,r,!0,t,n);case 19:return Ly(t,e,n);case 22:return Vy(t,e,n)}throw Error(b(156,e.tag))};function Xy(t,e){return Sg(t,e)}function zw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(t,e,n,r){return new zw(t,e,n,r)}function Kh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Bw(t){if(typeof t=="function")return Kh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fh)return 11;if(t===ph)return 14}return 2}function qn(t,e){var n=t.alternate;return n===null?(n=Nt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ha(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Kh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Wr:return Er(n.children,s,i,e);case dh:a=8,s|=8;break;case Bu:return t=Nt(12,n,e,s|2),t.elementType=Bu,t.lanes=i,t;case $u:return t=Nt(13,n,e,s),t.elementType=$u,t.lanes=i,t;case qu:return t=Nt(19,n,e,s),t.elementType=qu,t.lanes=i,t;case ag:return ul(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ig:a=10;break e;case og:a=9;break e;case fh:a=11;break e;case ph:a=14;break e;case xn:a=16,r=null;break e}throw Error(b(130,t==null?t:typeof t,""))}return e=Nt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Er(t,e,n,r){return t=Nt(7,t,r,e),t.lanes=n,t}function ul(t,e,n,r){return t=Nt(22,t,r,e),t.elementType=ag,t.lanes=n,t.stateNode={isHidden:!1},t}function Ru(t,e,n){return t=Nt(6,t,null,e),t.lanes=n,t}function Cu(t,e,n){return e=Nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $w(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=au(0),this.expirationTimes=au(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=au(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gh(t,e,n,r,s,i,a,l,u){return t=new $w(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Nt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nh(i),t}function qw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Jy(t){if(!t)return Yn;t=t._reactInternals;e:{if(Vr(t)!==t||t.tag!==1)throw Error(b(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(b(171))}if(t.tag===1){var n=t.type;if(gt(n))return Jg(t,n,e)}return e}function Zy(t,e,n,r,s,i,a,l,u){return t=Gh(n,r,!0,t,s,i,a,l,u),t.context=Jy(null),n=t.current,r=ut(),s=$n(n),i=mn(r,s),i.callback=e??null,zn(n,i,s),t.current.lanes=s,eo(t,s,r),yt(t,r),t}function cl(t,e,n,r){var s=e.current,i=ut(),a=$n(s);return n=Jy(n),e.context===null?e.context=n:e.pendingContext=n,e=mn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zn(s,e,a),t!==null&&(Ht(t,s,a,i),ia(t,s,a)),a}function Ua(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Up(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yh(t,e){Up(t,e),(t=t.alternate)&&Up(t,e)}function Hw(){return null}var e_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xh(t){this._internalRoot=t}hl.prototype.render=Xh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(b(409));cl(t,e,null,null)};hl.prototype.unmount=Xh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rr(function(){cl(null,t,null,null)}),e[yn]=null}};function hl(t){this._internalRoot=t}hl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Nn.length&&e!==0&&e<Nn[n].priority;n++);Nn.splice(n,0,t),n===0&&Dg(t)}};function Jh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zp(){}function Ww(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Ua(a);i.call(h)}}var a=Zy(e,r,t,0,null,!1,!1,"",zp);return t._reactRootContainer=a,t[yn]=a.current,Li(t.nodeType===8?t.parentNode:t),Rr(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Ua(u);l.call(h)}}var u=Gh(t,0,!1,null,null,!1,!1,"",zp);return t._reactRootContainer=u,t[yn]=u.current,Li(t.nodeType===8?t.parentNode:t),Rr(function(){cl(e,u,n,r)}),u}function fl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=Ua(a);l.call(u)}}cl(e,a,t,s)}else a=Ww(n,e,t,s,r);return Ua(a)}Pg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oi(e.pendingLanes);n!==0&&(yh(e,n|1),yt(e,Ve()),!(ie&6)&&(ys=Ve()+500,rr()))}break;case 13:Rr(function(){var r=_n(t,1);if(r!==null){var s=ut();Ht(r,t,1,s)}}),Yh(t,1)}};_h=function(t){if(t.tag===13){var e=_n(t,134217728);if(e!==null){var n=ut();Ht(e,t,134217728,n)}Yh(t,134217728)}};xg=function(t){if(t.tag===13){var e=$n(t),n=_n(t,e);if(n!==null){var r=ut();Ht(n,t,e,r)}Yh(t,e)}};Vg=function(){return ue};Ng=function(t,e){var n=ue;try{return ue=t,e()}finally{ue=n}};ec=function(t,e,n){switch(e){case"input":if(Qu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=rl(r);if(!s)throw Error(b(90));ug(r),Qu(r,s)}}}break;case"textarea":hg(t,n);break;case"select":e=n.value,e!=null&&rs(t,!!n.multiple,e,!1)}};_g=Hh;vg=Rr;var Qw={usingClientEntryPoint:!1,Events:[no,Yr,rl,gg,yg,Hh]},ti={findFiberByHostInstance:mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kw={bundleType:ti.bundleType,version:ti.version,rendererPackageName:ti.rendererPackageName,rendererConfig:ti.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Tg(t),t===null?null:t.stateNode},findFiberByHostInstance:ti.findFiberByHostInstance||Hw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ko.isDisabled&&Ko.supportsFiber)try{Za=Ko.inject(Kw),Jt=Ko}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qw;Ct.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jh(e))throw Error(b(200));return qw(t,e,null,n)};Ct.createRoot=function(t,e){if(!Jh(t))throw Error(b(299));var n=!1,r="",s=e_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Gh(t,1,!1,null,null,n,!1,r,s),t[yn]=e.current,Li(t.nodeType===8?t.parentNode:t),new Xh(e)};Ct.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(b(188)):(t=Object.keys(t).join(","),Error(b(268,t)));return t=Tg(e),t=t===null?null:t.stateNode,t};Ct.flushSync=function(t){return Rr(t)};Ct.hydrate=function(t,e,n){if(!dl(e))throw Error(b(200));return fl(null,t,e,!0,n)};Ct.hydrateRoot=function(t,e,n){if(!Jh(t))throw Error(b(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=e_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Zy(e,null,t,1,n??null,s,!1,i,a),t[yn]=e.current,Li(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new hl(e)};Ct.render=function(t,e,n){if(!dl(e))throw Error(b(200));return fl(null,t,e,!1,n)};Ct.unmountComponentAtNode=function(t){if(!dl(t))throw Error(b(40));return t._reactRootContainer?(Rr(function(){fl(null,null,t,!1,function(){t._reactRootContainer=null,t[yn]=null})}),!0):!1};Ct.unstable_batchedUpdates=Hh;Ct.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!dl(n))throw Error(b(200));if(t==null||t._reactInternals===void 0)throw Error(b(38));return fl(t,e,n,!1,r)};Ct.version="18.3.1-next-f1338f8080-20240426";function t_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t_)}catch(t){console.error(t)}}t_(),tg.exports=Ct;var Gw=tg.exports,Bp=Gw;Uu.createRoot=Bp.createRoot,Uu.hydrateRoot=Bp.hydrateRoot;const Yw="modulepreload",Xw=function(t){return"/"+t},$p={},pl=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=Xw(u),u in $p)return;$p[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":Yw,h||(g.as="script"),g.crossOrigin="",g.href=u,l&&g.setAttribute("nonce",l),document.head.appendChild(g),h)return new Promise((v,T)=>{g.addEventListener("load",v),g.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var Le=(t=>(t.Baking="baking-menu",t.BakingRecipeSelection="baking-recipe-selection",t.BakingProcess="baking-process",t.HeatingTimer="heating-timer",t.Operations="operations",t.Inventory="inventory",t.Settings="settings",t))(Le||{});const Jw={"alert-triangle":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),S.jsx("path",{d:"M12 9v4"}),S.jsx("path",{d:"M12 17h.01"})]}),archive:S.jsxs(S.Fragment,{children:[S.jsx("rect",{width:"20",height:"5",x:"2",y:"3",rx:"1"}),S.jsx("path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"}),S.jsx("path",{d:"M10 12h4"})]}),"bar-chart-2":S.jsxs(S.Fragment,{children:[S.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),S.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),S.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),bell:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),S.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),boxes:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),S.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),S.jsx("path",{d:"M12 22V12"})]}),calendar:S.jsxs(S.Fragment,{children:[S.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),S.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),S.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),S.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),"cake-slice":S.jsx("path",{d:"M11.84 10.51 16.2 6.15a2.42 2.42 0 0 1 3.42 0 2.42 2.42 0 0 1 0 3.42l-4.36 4.36"}),check:S.jsx("path",{d:"M20 6 9 17l-5-5"}),"check-circle":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),S.jsx("path",{d:"m9 11 3 3L22 4"})]}),"chevron-left":S.jsx("path",{d:"m15 18-6-6 6-6"}),"chevron-right":S.jsx("path",{d:"m9 18 6-6-6-6"}),"clipboard-kanban":S.jsxs(S.Fragment,{children:[S.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),S.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),S.jsx("path",{d:"M12 14h.01"}),S.jsx("path",{d:"M16 14h.01"}),S.jsx("path",{d:"M8 14h.01"})]}),"clipboard-list":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),S.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1"}),S.jsx("path",{d:"M12 11h4"}),S.jsx("path",{d:"M12 16h4"}),S.jsx("path",{d:"M8 11h.01"}),S.jsx("path",{d:"M8 16h.01"})]}),list:S.jsxs(S.Fragment,{children:[S.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),S.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),S.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),S.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),S.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),S.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]}),"map-pin":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),S.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),menu:S.jsx(S.Fragment,{children:S.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})}),"message-square":S.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),minus:S.jsx("path",{d:"M5 12h14"}),pencil:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),S.jsx("path",{d:"m15 5 4 4"})]}),"play-circle":S.jsxs(S.Fragment,{children:[S.jsx("circle",{cx:"12",cy:"12",r:"10"}),S.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]}),plus:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M5 12h14"}),S.jsx("path",{d:"M12 5v14"})]}),"plus-circle":S.jsxs(S.Fragment,{children:[S.jsx("circle",{cx:"12",cy:"12",r:"10"}),S.jsx("path",{d:"M8 12h8"}),S.jsx("path",{d:"M12 8v8"})]}),"refresh-cw":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),S.jsx("path",{d:"M21 3v5h-5"}),S.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),S.jsx("path",{d:"M3 21v-5h5"})]}),"rotate-ccw":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),S.jsx("path",{d:"M3 3v5h5"})]}),settings:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0 2l.15.08a2 2 0 0 0 .73-2.73l.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),S.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"shopping-cart":S.jsxs(S.Fragment,{children:[S.jsx("circle",{cx:"8",cy:"21",r:"1"}),S.jsx("circle",{cx:"19",cy:"21",r:"1"}),S.jsx("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.15"})]}),star:S.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}),store:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"}),S.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),S.jsx("path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"}),S.jsx("path",{d:"M2 7h20"}),S.jsx("path",{d:"M22 7v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7"})]}),thermometer:S.jsx(S.Fragment,{children:S.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"})}),"thermometer-snowflake":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"}),S.jsx("path",{d:"M22 12h-3"}),S.jsx("path",{d:"M2 20v-3"}),S.jsx("path",{d:"M20 4v3"}),S.jsx("path",{d:"m22 7-3 3"}),S.jsx("path",{d:"M2 13l3 3"}),S.jsx("path",{d:"M5 4l-3 3"})]}),"thermometer-sun":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"}),S.jsx("path",{d:"M4 11H2"}),S.jsx("path",{d:"M10 11H8"}),S.jsx("path",{d:"M22 11h-2"}),S.jsx("path",{d:"M16 11h-2"}),S.jsx("path",{d:"M19 8a3 3 0 0 0-6 0"}),S.jsx("path",{d:"M19.3 4.7a3 3 0 0 0-4.25-4.25"})]}),"trash-2":S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M3 6h18"}),S.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),S.jsx("path",{d:"M10 11v6"}),S.jsx("path",{d:"M14 11v6"})]}),"volume-2":S.jsxs(S.Fragment,{children:[S.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),S.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"}),S.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]}),"volume-x":S.jsxs(S.Fragment,{children:[S.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),S.jsx("line",{x1:"22",x2:"16",y1:"9",y2:"15"}),S.jsx("line",{x1:"16",x2:"22",y1:"9",y2:"15"})]}),whatsapp:S.jsx("path",{fillRule:"evenodd",d:"M18.4,6.4C16.5,4.4,14,3.4,11.5,3.4C6.5,3.4,2.5,7.4,2.5,12.4c0,1.7,0.5,3.4,1.3,4.9L2.5,21.5l4.3-1.3c1.5,0.8,3.1,1.2,4.8,1.2h0c5,0,9-4,9-9C20.6,9.9,19.6,7.5,18.4,6.4z M11.5,19.9c-1.5,0-3-0.4-4.3-1.2l-0.3-0.2l-3.2,1l1-3.1l-0.2-0.3c-0.8-1.3-1.3-2.8-1.3-4.4c0-4.1,3.3-7.4,7.4-7.4c2,0,3.9,0.8,5.3,2.2c1.4,1.4,2.2,3.3,2.2,5.3C18.9,16.5,15.6,19.9,11.5,19.9z M15.5,13.6c-0.2-0.1-1.3-0.6-1.5-0.7c-0.2-0.1-0.3-0.1-0.5,0.1c-0.2,0.2-0.6,0.7-0.7,0.8c-0.1,0.2-0.2,0.2-0.4,0.1c-0.2-0.1-0.8-0.3-1.6-1c-0.6-0.5-1-1.2-1.2-1.4c-0.1-0.2,0-0.3,0.1-0.4c0.1-0.1,0.2-0.2,0.3-0.3c0.1-0.1,0.1-0.2,0.2-0.4c0.1-0.2,0-0.3,0-0.4c-0.1-0.1-0.5-1.1-0.6-1.5c-0.2-0.4-0.3-0.4-0.5-0.4h-0.4c-0.2,0-0.4,0.1-0.6,0.3c-0.2,0.2-0.7,0.7-0.7,1.6c0,1,0.7,1.9,0.8,2c0.1,0.1,1.3,2,3.2,2.8c0.4,0.2,0.8,0.3,1.1,0.4c0.5,0.2,1,0.1,1.3,0.1c0.4-0.1,1.3-0.5,1.5-1c0.2-0.4,0.2-0.8,0.1-0.9C15.9,13.8,15.7,13.7,15.5,13.6z"}),x:S.jsxs(S.Fragment,{children:[S.jsx("path",{d:"M18 6 6 18"}),S.jsx("path",{d:"m6 6 12 12"})]})},Ut=({name:t,className:e="",size:n=24,title:r})=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[r&&S.jsx("title",{children:r}),Jw[t]]}),qp=({activeScreen:t,setActiveScreen:e,processes:n,urgentTasks:r,shoppingListItems:s,inProgressTasks:i,isOpen:a,onClose:l,users:u,onNavigateToTask:h,setOperationsDate:f,setHighlightedTaskId:g})=>{const v=N=>{N===Le.Operations&&(f(new Date),g(null)),e(N),l()},T=N=>{h(N),l()},k=(N,F,j)=>{if(N.stopPropagation(),!j.phone)return;const w=`Hola ${j.name}, tienes una tarea crtica: "${F.text}" programada para las ${F.time}.`,m=`https://wa.me/${j.phone.replace(/\D/g,"")}?text=${encodeURIComponent(w)}`;window.open(m,"_blank")},x=({active:N,onClick:F,children:j})=>{const w="w-full flex items-center gap-4 p-4 rounded-lg font-bold text-left cursor-pointer transition-all duration-200",m=N?`${w} bg-blue-600 text-white`:`${w} text-gray-500 hover:bg-gray-100 hover:text-gray-900`;return S.jsx("button",{onClick:F,className:m,children:j})},D=({title:N,children:F,onClick:j,isAlarm:w})=>S.jsxs("div",{className:"mb-4",children:[S.jsx("h3",{className:`text-xs uppercase font-bold mb-2 px-2 ${w?"text-red-600 animate-pulse":"text-blue-600"}`,children:N}),S.jsx("button",{onClick:j,className:`w-full text-left p-3 rounded-lg transition-colors border ${w?"bg-red-50 border-red-400 hover:bg-red-100":"bg-gray-100 border-gray-200 hover:bg-gray-200"}`,children:F})]}),A=n.filter(N=>N.state!=="finished"),I=t===Le.Baking,C=`
        sidebar-nav flex flex-col bg-white p-4 border-r border-gray-200 overflow-y-auto 
        fixed inset-y-0 left-0 z-50 w-64 transform transition-transform duration-300 ease-in-out 
        md:relative md:w-auto md:translate-x-0
        ${a?"translate-x-0":"-translate-x-full"}
    `;return S.jsxs("nav",{className:C,children:[S.jsxs("header",{className:"sidebar-header text-center mb-6 pt-4 flex-shrink-0",children:[S.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Cafestesia"}),S.jsx("span",{className:"text-sm text-gray-500",children:"Gestor v2.1 (React)"})]}),S.jsxs("div",{className:"flex-grow",children:[A.length>0&&S.jsxs("div",{className:"mb-4",children:[S.jsxs("h3",{className:"text-xs uppercase font-bold mb-2 px-2 text-blue-600",children:["EN PRODUCCIN (",A.length,")"]}),S.jsx("div",{className:"flex flex-col gap-2",children:A.map(N=>{const F=N.state==="alarm";return S.jsxs("button",{onClick:()=>v(Le.Baking),className:`w-full text-left p-2 rounded-lg transition-all border shadow-sm flex items-center gap-3 font-bold text-xs ${F?"bg-red-50 border-red-400 hover:bg-red-100 text-red-900 animate-pulse":"bg-white border-gray-200 hover:bg-blue-50 hover:border-blue-300 text-gray-700"}`,children:[S.jsx(Ut,{name:F?"bell":"cake-slice",className:F?"text-red-500":"text-blue-500",size:16}),S.jsx("span",{className:"truncate",children:N.name})]},N.id)})})]}),i.length>0&&S.jsxs("div",{className:"mb-4",children:[S.jsx("h3",{className:"text-xs uppercase font-bold mb-2 px-2 text-blue-600",children:"Tareas en Progreso"}),S.jsx("div",{className:"space-y-1",children:i.slice(0,3).map(N=>S.jsx("button",{onClick:()=>T(N),className:"w-full text-left p-2 rounded-lg transition-colors border-2 bg-yellow-50 animate-pulse-yellow hover:bg-yellow-100",title:`Ver tarea: ${N.text}`,children:S.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-800",children:[S.jsx(Ut,{name:"play-circle",className:"text-yellow-600 flex-shrink-0 animate-pulse",size:18}),S.jsxs("div",{className:"flex-grow min-w-0",children:[S.jsx("p",{className:"font-bold truncate",children:N.text}),S.jsxs("p",{className:"text-xs font-normal text-gray-600",children:[N.employee," - ",N.date]})]})]})},N.id))})]}),r.length>0&&S.jsx(D,{title:"Operaciones Urgentes",onClick:()=>v(Le.Operations),children:r.map(({task:N,diff:F})=>{const j=u.find(w=>w.name===N.employee);return S.jsx("div",{className:"text-sm mb-2 last:mb-0",children:S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsxs("div",{className:"flex-grow",children:[S.jsx("p",{className:"font-bold text-gray-800",children:N.text}),S.jsxs("p",{className:`text-xs font-semibold ${F<=0?"text-red-600 animate-pulse":"text-blue-600"}`,children:[N.time," ",F<=0?"(AHORA!)":`(en ${F} min)`]})]}),(j==null?void 0:j.phone)&&S.jsx("button",{onClick:w=>k(w,N,j),className:"p-2 -mr-2 -mt-1 text-green-600 hover:bg-green-100 rounded-full transition-colors flex-shrink-0",title:`Notificar a ${j.name} por WhatsApp`,children:S.jsx(Ut,{name:"whatsapp",size:20})})]})},N.id)})}),s.length>0&&S.jsx(D,{title:"Inventario Crtico",onClick:()=>v(Le.Inventory),children:S.jsxs("div",{className:"flex items-center gap-3 font-bold text-sm text-gray-800",children:[S.jsx(Ut,{name:"shopping-cart",className:"text-red-500",size:20}),S.jsxs("span",{children:[s.length>1?`${s.length} productos`:"1 producto"," en la lista de compras"]})]})})]}),S.jsxs("div",{className:"nav-buttons flex flex-col gap-2 mt-auto flex-shrink-0",children:[S.jsxs(x,{active:I,onClick:()=>v(Le.Baking),children:[S.jsx(Ut,{name:"cake-slice",size:20}),S.jsx("span",{children:"Produccin de Pan"})]}),S.jsxs(x,{active:t===Le.Operations,onClick:()=>v(Le.Operations),children:[S.jsx(Ut,{name:"clipboard-kanban",size:20}),S.jsx("span",{children:"Operaciones"})]}),S.jsxs(x,{active:t===Le.Inventory,onClick:()=>v(Le.Inventory),children:[S.jsx(Ut,{name:"archive",size:20}),S.jsx("span",{children:"Inventario"})]}),S.jsxs(x,{active:t===Le.Settings,onClick:()=>v(Le.Settings),children:[S.jsx(Ut,{name:"settings",size:20}),S.jsx("span",{children:"Configuracin"})]})]})]})},Zw=new Date,hr=Zw.toISOString().split("T")[0],e1=[{text:"Roles: Descongelar en refrigeracin",employee:"Ali",shift:"matutino",date:hr,time:"08:00",duration:30,isCritical:!0,zone:"Panadera",status:"todo",addedBy:"Admin"},{text:"Checar ingredientes diarios y comprarlos",employee:"Ali",shift:"pre-apertura",date:hr,time:"15:00",duration:60,isCritical:!0,zone:"Cocina",status:"todo",addedBy:"Admin"},{text:"Hornear Roles",employee:"Claudia",shift:"pre-apertura",date:hr,time:"16:00",duration:45,isCritical:!0,zone:"Panadera",status:"todo",addedBy:"Admin"},{text:"Hornear Croissants",employee:"Claudia",shift:"pre-apertura",date:hr,time:"16:30",duration:45,isCritical:!0,zone:"Panadera",status:"todo",addedBy:"Admin"},{text:"Corte de caja",employee:"Fer",shift:"cierre",date:hr,time:"21:50",duration:20,isCritical:!0,zone:"Admin",status:"todo",addedBy:"Admin"},{text:"Limpiar barra y area de barismo",employee:"Claudia",shift:"pre-apertura",date:hr,time:"17:00",duration:30,isCritical:!0,zone:"Barra",status:"todo",addedBy:"Admin"},{text:"Hacer masa para ciabatta (da siguiente)",employee:"Fer",shift:"cierre",date:hr,time:"21:40",duration:20,isCritical:!0,zone:"Panadera",status:"todo",addedBy:"Admin"}],n_=[{name:"Harina de Trigo",category:"Secos",currentStock:50,unit:"kg",minStock:10,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Levadura Fresca",category:"Refrigerados",currentStock:1,unit:"kg",minStock:.5,providerPreferido:"Proveedor B",purchaseHistory:[]},{name:"Mantequilla sin Sal",category:"Refrigerados",currentStock:5,unit:"kg",minStock:2,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Chocolate Amargo 70%",category:"Secos",currentStock:3,unit:"kg",minStock:1,providerPreferido:"Proveedor C",purchaseHistory:[]},{name:"Leche Entera",category:"Lcteos",currentStock:8,unit:"lt",minStock:4,providerPreferido:"Supermercado",purchaseHistory:[]},{name:"Caf en Grano",category:"Bebidas",currentStock:10,unit:"kg",minStock:5,providerPreferido:"Tostador Local",purchaseHistory:[]},{name:"Azcar Morena",category:"Secos",currentStock:15,unit:"kg",minStock:5,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Canela en Polvo",category:"Secos",currentStock:.4,unit:"kg",minStock:.5,providerPreferido:"Proveedor C",purchaseHistory:[]}],rA=["kg","lt","pz","g","ml","unidad(es)"],sA=0,iA=24,oA=[{value:5,label:"5 min"},{value:10,label:"10 min"},{value:15,label:"15 min"},{value:30,label:"30 min"},{value:60,label:"1 hora"},{value:120,label:"2 horas"}],aA="1234";var Hp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},t1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},s_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,f=i>>2,g=(i&3)<<4|l>>4;let v=(l&15)<<2|h>>6,T=h&63;u||(T=64,a||(v=64)),r.push(n[f],n[g],n[v],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):t1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||g==null)throw new n1;const v=i<<2|l>>4;if(r.push(v),h!==64){const T=l<<4&240|h>>2;if(r.push(T),g!==64){const k=h<<6&192|g;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class n1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const r1=function(t){const e=r_(t);return s_.encodeByteArray(e,!0)},za=function(t){return r1(t).replace(/\./g,"")},s1=function(t){try{return s_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=()=>i1().__FIREBASE_DEFAULTS__,a1=()=>{if(typeof process>"u"||typeof Hp>"u")return;const t=Hp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},l1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&s1(t[1]);return e&&JSON.parse(e)},Zh=()=>{try{return o1()||a1()||l1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},u1=t=>{var e,n;return(n=(e=Zh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},c1=t=>{const e=u1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},i_=()=>{var t;return(t=Zh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[za(JSON.stringify(n)),za(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function p1(){var t;const e=(t=Zh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m1(){return!p1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function g1(){try{return typeof indexedDB=="object"}catch{return!1}}function y1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="FirebaseError";class Ps extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_1,Object.setPrototypeOf(this,Ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,o_.prototype.create)}}class o_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?v1(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ps(s,l,r)}}function v1(t,e){return t.replace(E1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const E1=/\{\$([^}]+)}/g;function Ba(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Wp(i)&&Wp(a)){if(!Ba(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Wp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t){return t&&t._delegate?t._delegate:t}class qi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new h1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(I1(e))try{this.getOrInitializeService({instanceIdentifier:pr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pr){return this.instances.has(e)}getOptions(e=pr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:T1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pr){return this.component?this.component.multipleInstances?e:pr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function T1(t){return t===pr?void 0:t}function I1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new w1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const A1={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},R1=se.INFO,C1={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},k1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=C1[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class a_{constructor(e){this.name=e,this._logLevel=R1,this._logHandler=k1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?A1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const P1=(t,e)=>e.some(n=>t instanceof n);let Qp,Kp;function x1(){return Qp||(Qp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V1(){return Kp||(Kp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l_=new WeakMap,Dc=new WeakMap,u_=new WeakMap,ku=new WeakMap,ed=new WeakMap;function N1(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Hn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&l_.set(n,t)}).catch(()=>{}),ed.set(e,t),e}function D1(t){if(Dc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Dc.set(t,e)}let Mc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||u_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function M1(t){Mc=t(Mc)}function L1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pu(this),e,...n);return u_.set(r,e.sort?e.sort():[e]),Hn(r)}:V1().includes(t)?function(...e){return t.apply(Pu(this),e),Hn(l_.get(this))}:function(...e){return Hn(t.apply(Pu(this),e))}}function O1(t){return typeof t=="function"?L1(t):(t instanceof IDBTransaction&&D1(t),P1(t,x1())?new Proxy(t,Mc):t)}function Hn(t){if(t instanceof IDBRequest)return N1(t);if(ku.has(t))return ku.get(t);const e=O1(t);return e!==t&&(ku.set(t,e),ed.set(e,t)),e}const Pu=t=>ed.get(t);function F1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Hn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Hn(a.result),u.oldVersion,u.newVersion,Hn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const j1=["get","getKey","getAll","getAllKeys","count"],b1=["put","add","delete","clear"],xu=new Map;function Gp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xu.get(e))return xu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=b1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||j1.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return xu.set(e,i),i}M1(t=>({...t,get:(e,n,r)=>Gp(e,n)||t.get(e,n,r),has:(e,n)=>!!Gp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(z1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function z1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lc="@firebase/app",Yp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En=new a_("@firebase/app"),B1="@firebase/app-compat",$1="@firebase/analytics-compat",q1="@firebase/analytics",H1="@firebase/app-check-compat",W1="@firebase/app-check",Q1="@firebase/auth",K1="@firebase/auth-compat",G1="@firebase/database",Y1="@firebase/data-connect",X1="@firebase/database-compat",J1="@firebase/functions",Z1="@firebase/functions-compat",eT="@firebase/installations",tT="@firebase/installations-compat",nT="@firebase/messaging",rT="@firebase/messaging-compat",sT="@firebase/performance",iT="@firebase/performance-compat",oT="@firebase/remote-config",aT="@firebase/remote-config-compat",lT="@firebase/storage",uT="@firebase/storage-compat",cT="@firebase/firestore",hT="@firebase/vertexai-preview",dT="@firebase/firestore-compat",fT="firebase",pT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc="[DEFAULT]",mT={[Lc]:"fire-core",[B1]:"fire-core-compat",[q1]:"fire-analytics",[$1]:"fire-analytics-compat",[W1]:"fire-app-check",[H1]:"fire-app-check-compat",[Q1]:"fire-auth",[K1]:"fire-auth-compat",[G1]:"fire-rtdb",[Y1]:"fire-data-connect",[X1]:"fire-rtdb-compat",[J1]:"fire-fn",[Z1]:"fire-fn-compat",[eT]:"fire-iid",[tT]:"fire-iid-compat",[nT]:"fire-fcm",[rT]:"fire-fcm-compat",[sT]:"fire-perf",[iT]:"fire-perf-compat",[oT]:"fire-rc",[aT]:"fire-rc-compat",[lT]:"fire-gcs",[uT]:"fire-gcs-compat",[cT]:"fire-fst",[dT]:"fire-fst-compat",[hT]:"fire-vertex","fire-js":"fire-js",[fT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=new Map,gT=new Map,Fc=new Map;function Xp(t,e){try{t.container.addComponent(e)}catch(n){En.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qa(t){const e=t.name;if(Fc.has(e))return En.debug(`There were multiple attempts to register component ${e}.`),!1;Fc.set(e,t);for(const n of $a.values())Xp(n,t);for(const n of gT.values())Xp(n,t);return!0}function yT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wn=new o_("app","Firebase",_T);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=pT;function c_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Oc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Wn.create("bad-app-name",{appName:String(s)});if(n||(n=i_()),!n)throw Wn.create("no-options");const i=$a.get(s);if(i){if(Ba(n,i.options)&&Ba(r,i.config))return i;throw Wn.create("duplicate-app",{appName:s})}const a=new S1(s);for(const u of Fc.values())a.addComponent(u);const l=new vT(n,r,a);return $a.set(s,l),l}function wT(t=Oc){const e=$a.get(t);if(!e&&t===Oc&&i_())return c_();if(!e)throw Wn.create("no-app",{appName:t});return e}function us(t,e,n){var r;let s=(r=mT[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),En.warn(l.join(" "));return}qa(new qi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="firebase-heartbeat-database",IT=1,Hi="firebase-heartbeat-store";let Vu=null;function h_(){return Vu||(Vu=F1(TT,IT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wn.create("idb-open",{originalErrorMessage:t.message})})),Vu}async function ST(t){try{const n=(await h_()).transaction(Hi),r=await n.objectStore(Hi).get(d_(t));return await n.done,r}catch(e){if(e instanceof Ps)En.warn(e.message);else{const n=Wn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});En.warn(n.message)}}}async function Jp(t,e){try{const r=(await h_()).transaction(Hi,"readwrite");await r.objectStore(Hi).put(e,d_(t)),await r.done}catch(n){if(n instanceof Ps)En.warn(n.message);else{const r=Wn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});En.warn(r.message)}}}function d_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=1024,RT=30*24*60*60*1e3;class CT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Zp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=RT}),this._storage.overwrite(this._heartbeatsCache))}catch(r){En.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zp(),{heartbeatsToSend:r,unsentEntries:s}=kT(this._heartbeatsCache.heartbeats),i=za(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return En.warn(n),""}}}function Zp(){return new Date().toISOString().substring(0,10)}function kT(t,e=AT){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),em(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),em(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class PT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return g1()?y1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ST(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function em(t){return za(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t){qa(new qi("platform-logger",e=>new U1(e),"PRIVATE")),qa(new qi("heartbeat",e=>new CT(e),"PRIVATE")),us(Lc,Yp,t),us(Lc,Yp,"esm2017"),us("fire-js","")}xT("");var VT="firebase",NT="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us(VT,NT,"app");var tm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wr,f_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,m){function _(){}_.prototype=m.prototype,w.D=m.prototype,w.prototype=new _,w.prototype.constructor=w,w.C=function(y,R,P){for(var E=Array(arguments.length-2),he=2;he<arguments.length;he++)E[he-2]=arguments[he];return m.prototype[R].apply(y,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,m,_){_||(_=0);var y=Array(16);if(typeof m=="string")for(var R=0;16>R;++R)y[R]=m.charCodeAt(_++)|m.charCodeAt(_++)<<8|m.charCodeAt(_++)<<16|m.charCodeAt(_++)<<24;else for(R=0;16>R;++R)y[R]=m[_++]|m[_++]<<8|m[_++]<<16|m[_++]<<24;m=w.g[0],_=w.g[1],R=w.g[2];var P=w.g[3],E=m+(P^_&(R^P))+y[0]+3614090360&4294967295;m=_+(E<<7&4294967295|E>>>25),E=P+(R^m&(_^R))+y[1]+3905402710&4294967295,P=m+(E<<12&4294967295|E>>>20),E=R+(_^P&(m^_))+y[2]+606105819&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(m^R&(P^m))+y[3]+3250441966&4294967295,_=R+(E<<22&4294967295|E>>>10),E=m+(P^_&(R^P))+y[4]+4118548399&4294967295,m=_+(E<<7&4294967295|E>>>25),E=P+(R^m&(_^R))+y[5]+1200080426&4294967295,P=m+(E<<12&4294967295|E>>>20),E=R+(_^P&(m^_))+y[6]+2821735955&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(m^R&(P^m))+y[7]+4249261313&4294967295,_=R+(E<<22&4294967295|E>>>10),E=m+(P^_&(R^P))+y[8]+1770035416&4294967295,m=_+(E<<7&4294967295|E>>>25),E=P+(R^m&(_^R))+y[9]+2336552879&4294967295,P=m+(E<<12&4294967295|E>>>20),E=R+(_^P&(m^_))+y[10]+4294925233&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(m^R&(P^m))+y[11]+2304563134&4294967295,_=R+(E<<22&4294967295|E>>>10),E=m+(P^_&(R^P))+y[12]+1804603682&4294967295,m=_+(E<<7&4294967295|E>>>25),E=P+(R^m&(_^R))+y[13]+4254626195&4294967295,P=m+(E<<12&4294967295|E>>>20),E=R+(_^P&(m^_))+y[14]+2792965006&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(m^R&(P^m))+y[15]+1236535329&4294967295,_=R+(E<<22&4294967295|E>>>10),E=m+(R^P&(_^R))+y[1]+4129170786&4294967295,m=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(m^_))+y[6]+3225465664&4294967295,P=m+(E<<9&4294967295|E>>>23),E=R+(m^_&(P^m))+y[11]+643717713&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^m&(R^P))+y[0]+3921069994&4294967295,_=R+(E<<20&4294967295|E>>>12),E=m+(R^P&(_^R))+y[5]+3593408605&4294967295,m=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(m^_))+y[10]+38016083&4294967295,P=m+(E<<9&4294967295|E>>>23),E=R+(m^_&(P^m))+y[15]+3634488961&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^m&(R^P))+y[4]+3889429448&4294967295,_=R+(E<<20&4294967295|E>>>12),E=m+(R^P&(_^R))+y[9]+568446438&4294967295,m=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(m^_))+y[14]+3275163606&4294967295,P=m+(E<<9&4294967295|E>>>23),E=R+(m^_&(P^m))+y[3]+4107603335&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^m&(R^P))+y[8]+1163531501&4294967295,_=R+(E<<20&4294967295|E>>>12),E=m+(R^P&(_^R))+y[13]+2850285829&4294967295,m=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(m^_))+y[2]+4243563512&4294967295,P=m+(E<<9&4294967295|E>>>23),E=R+(m^_&(P^m))+y[7]+1735328473&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^m&(R^P))+y[12]+2368359562&4294967295,_=R+(E<<20&4294967295|E>>>12),E=m+(_^R^P)+y[5]+4294588738&4294967295,m=_+(E<<4&4294967295|E>>>28),E=P+(m^_^R)+y[8]+2272392833&4294967295,P=m+(E<<11&4294967295|E>>>21),E=R+(P^m^_)+y[11]+1839030562&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^m)+y[14]+4259657740&4294967295,_=R+(E<<23&4294967295|E>>>9),E=m+(_^R^P)+y[1]+2763975236&4294967295,m=_+(E<<4&4294967295|E>>>28),E=P+(m^_^R)+y[4]+1272893353&4294967295,P=m+(E<<11&4294967295|E>>>21),E=R+(P^m^_)+y[7]+4139469664&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^m)+y[10]+3200236656&4294967295,_=R+(E<<23&4294967295|E>>>9),E=m+(_^R^P)+y[13]+681279174&4294967295,m=_+(E<<4&4294967295|E>>>28),E=P+(m^_^R)+y[0]+3936430074&4294967295,P=m+(E<<11&4294967295|E>>>21),E=R+(P^m^_)+y[3]+3572445317&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^m)+y[6]+76029189&4294967295,_=R+(E<<23&4294967295|E>>>9),E=m+(_^R^P)+y[9]+3654602809&4294967295,m=_+(E<<4&4294967295|E>>>28),E=P+(m^_^R)+y[12]+3873151461&4294967295,P=m+(E<<11&4294967295|E>>>21),E=R+(P^m^_)+y[15]+530742520&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^m)+y[2]+3299628645&4294967295,_=R+(E<<23&4294967295|E>>>9),E=m+(R^(_|~P))+y[0]+4096336452&4294967295,m=_+(E<<6&4294967295|E>>>26),E=P+(_^(m|~R))+y[7]+1126891415&4294967295,P=m+(E<<10&4294967295|E>>>22),E=R+(m^(P|~_))+y[14]+2878612391&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~m))+y[5]+4237533241&4294967295,_=R+(E<<21&4294967295|E>>>11),E=m+(R^(_|~P))+y[12]+1700485571&4294967295,m=_+(E<<6&4294967295|E>>>26),E=P+(_^(m|~R))+y[3]+2399980690&4294967295,P=m+(E<<10&4294967295|E>>>22),E=R+(m^(P|~_))+y[10]+4293915773&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~m))+y[1]+2240044497&4294967295,_=R+(E<<21&4294967295|E>>>11),E=m+(R^(_|~P))+y[8]+1873313359&4294967295,m=_+(E<<6&4294967295|E>>>26),E=P+(_^(m|~R))+y[15]+4264355552&4294967295,P=m+(E<<10&4294967295|E>>>22),E=R+(m^(P|~_))+y[6]+2734768916&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~m))+y[13]+1309151649&4294967295,_=R+(E<<21&4294967295|E>>>11),E=m+(R^(_|~P))+y[4]+4149444226&4294967295,m=_+(E<<6&4294967295|E>>>26),E=P+(_^(m|~R))+y[11]+3174756917&4294967295,P=m+(E<<10&4294967295|E>>>22),E=R+(m^(P|~_))+y[2]+718787259&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~m))+y[9]+3951481745&4294967295,w.g[0]=w.g[0]+m&4294967295,w.g[1]=w.g[1]+(R+(E<<21&4294967295|E>>>11))&4294967295,w.g[2]=w.g[2]+R&4294967295,w.g[3]=w.g[3]+P&4294967295}r.prototype.u=function(w,m){m===void 0&&(m=w.length);for(var _=m-this.blockSize,y=this.B,R=this.h,P=0;P<m;){if(R==0)for(;P<=_;)s(this,w,P),P+=this.blockSize;if(typeof w=="string"){for(;P<m;)if(y[R++]=w.charCodeAt(P++),R==this.blockSize){s(this,y),R=0;break}}else for(;P<m;)if(y[R++]=w[P++],R==this.blockSize){s(this,y),R=0;break}}this.h=R,this.o+=m},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var m=1;m<w.length-8;++m)w[m]=0;var _=8*this.o;for(m=w.length-8;m<w.length;++m)w[m]=_&255,_/=256;for(this.u(w),w=Array(16),m=_=0;4>m;++m)for(var y=0;32>y;y+=8)w[_++]=this.g[m]>>>y&255;return w};function i(w,m){var _=l;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=m(w)}function a(w,m){this.h=m;for(var _=[],y=!0,R=w.length-1;0<=R;R--){var P=w[R]|0;y&&P==m||(_[R]=P,y=!1)}this.g=_}var l={};function u(w){return-128<=w&&128>w?i(w,function(m){return new a([m|0],0>m?-1:0)}):new a([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return g;if(0>w)return D(h(-w));for(var m=[],_=1,y=0;w>=_;y++)m[y]=w/_|0,_*=4294967296;return new a(m,0)}function f(w,m){if(w.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(w.charAt(0)=="-")return D(f(w.substring(1),m));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=h(Math.pow(m,8)),y=g,R=0;R<w.length;R+=8){var P=Math.min(8,w.length-R),E=parseInt(w.substring(R,R+P),m);8>P?(P=h(Math.pow(m,P)),y=y.j(P).add(h(E))):(y=y.j(_),y=y.add(h(E)))}return y}var g=u(0),v=u(1),T=u(16777216);t=a.prototype,t.m=function(){if(x(this))return-D(this).m();for(var w=0,m=1,_=0;_<this.g.length;_++){var y=this.i(_);w+=(0<=y?y:4294967296+y)*m,m*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k(this))return"0";if(x(this))return"-"+D(this).toString(w);for(var m=h(Math.pow(w,6)),_=this,y="";;){var R=N(_,m).g;_=A(_,R.j(m));var P=((0<_.g.length?_.g[0]:_.h)>>>0).toString(w);if(_=R,k(_))return P+y;for(;6>P.length;)P="0"+P;y=P+y}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function k(w){if(w.h!=0)return!1;for(var m=0;m<w.g.length;m++)if(w.g[m]!=0)return!1;return!0}function x(w){return w.h==-1}t.l=function(w){return w=A(this,w),x(w)?-1:k(w)?0:1};function D(w){for(var m=w.g.length,_=[],y=0;y<m;y++)_[y]=~w.g[y];return new a(_,~w.h).add(v)}t.abs=function(){return x(this)?D(this):this},t.add=function(w){for(var m=Math.max(this.g.length,w.g.length),_=[],y=0,R=0;R<=m;R++){var P=y+(this.i(R)&65535)+(w.i(R)&65535),E=(P>>>16)+(this.i(R)>>>16)+(w.i(R)>>>16);y=E>>>16,P&=65535,E&=65535,_[R]=E<<16|P}return new a(_,_[_.length-1]&-2147483648?-1:0)};function A(w,m){return w.add(D(m))}t.j=function(w){if(k(this)||k(w))return g;if(x(this))return x(w)?D(this).j(D(w)):D(D(this).j(w));if(x(w))return D(this.j(D(w)));if(0>this.l(T)&&0>w.l(T))return h(this.m()*w.m());for(var m=this.g.length+w.g.length,_=[],y=0;y<2*m;y++)_[y]=0;for(y=0;y<this.g.length;y++)for(var R=0;R<w.g.length;R++){var P=this.i(y)>>>16,E=this.i(y)&65535,he=w.i(R)>>>16,Z=w.i(R)&65535;_[2*y+2*R]+=E*Z,I(_,2*y+2*R),_[2*y+2*R+1]+=P*Z,I(_,2*y+2*R+1),_[2*y+2*R+1]+=E*he,I(_,2*y+2*R+1),_[2*y+2*R+2]+=P*he,I(_,2*y+2*R+2)}for(y=0;y<m;y++)_[y]=_[2*y+1]<<16|_[2*y];for(y=m;y<2*m;y++)_[y]=0;return new a(_,0)};function I(w,m){for(;(w[m]&65535)!=w[m];)w[m+1]+=w[m]>>>16,w[m]&=65535,m++}function C(w,m){this.g=w,this.h=m}function N(w,m){if(k(m))throw Error("division by zero");if(k(w))return new C(g,g);if(x(w))return m=N(D(w),m),new C(D(m.g),D(m.h));if(x(m))return m=N(w,D(m)),new C(D(m.g),m.h);if(30<w.g.length){if(x(w)||x(m))throw Error("slowDivide_ only works with positive integers.");for(var _=v,y=m;0>=y.l(w);)_=F(_),y=F(y);var R=j(_,1),P=j(y,1);for(y=j(y,2),_=j(_,2);!k(y);){var E=P.add(y);0>=E.l(w)&&(R=R.add(_),P=E),y=j(y,1),_=j(_,1)}return m=A(w,R.j(m)),new C(R,m)}for(R=g;0<=w.l(m);){for(_=Math.max(1,Math.floor(w.m()/m.m())),y=Math.ceil(Math.log(_)/Math.LN2),y=48>=y?1:Math.pow(2,y-48),P=h(_),E=P.j(m);x(E)||0<E.l(w);)_-=y,P=h(_),E=P.j(m);k(P)&&(P=v),R=R.add(P),w=A(w,E)}return new C(R,w)}t.A=function(w){return N(this,w).h},t.and=function(w){for(var m=Math.max(this.g.length,w.g.length),_=[],y=0;y<m;y++)_[y]=this.i(y)&w.i(y);return new a(_,this.h&w.h)},t.or=function(w){for(var m=Math.max(this.g.length,w.g.length),_=[],y=0;y<m;y++)_[y]=this.i(y)|w.i(y);return new a(_,this.h|w.h)},t.xor=function(w){for(var m=Math.max(this.g.length,w.g.length),_=[],y=0;y<m;y++)_[y]=this.i(y)^w.i(y);return new a(_,this.h^w.h)};function F(w){for(var m=w.g.length+1,_=[],y=0;y<m;y++)_[y]=w.i(y)<<1|w.i(y-1)>>>31;return new a(_,w.h)}function j(w,m){var _=m>>5;m%=32;for(var y=w.g.length-_,R=[],P=0;P<y;P++)R[P]=0<m?w.i(P+_)>>>m|w.i(P+_+1)<<32-m:w.i(P+_);return new a(R,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,f_=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,wr=a}).apply(typeof tm<"u"?tm:typeof self<"u"?self:typeof window<"u"?window:{});var Go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var p_,li,m_,da,jc,g_,y_,__;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,d){return o==Array.prototype||o==Object.prototype||(o[c]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Go=="object"&&Go];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)e:{var d=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var V=o[p];if(!(V in d))break e;d=d[V]}o=o[o.length-1],p=d[o],c=c(p),c!=p&&c!=null&&e(d,o,{configurable:!0,writable:!0,value:c})}}function i(o,c){o instanceof String&&(o+="");var d=0,p=!1,V={next:function(){if(!p&&d<o.length){var M=d++;return{value:c(M,o[M]),done:!1}}return p=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(o){return o||function(){return i(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function f(o,c,d){return o.call.apply(o.bind,arguments)}function g(o,c,d){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,p),o.apply(c,V)}}return function(){return o.apply(c,arguments)}}function v(o,c,d){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,v.apply(null,arguments)}function T(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function k(o,c){function d(){}d.prototype=c.prototype,o.aa=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(p,V,M){for(var z=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)z[pe-2]=arguments[pe];return c.prototype[V].apply(p,z)}}function x(o){const c=o.length;if(0<c){const d=Array(c);for(let p=0;p<c;p++)d[p]=o[p];return d}return[]}function D(o,c){for(let d=1;d<arguments.length;d++){const p=arguments[d];if(u(p)){const V=o.length||0,M=p.length||0;o.length=V+M;for(let z=0;z<M;z++)o[V+z]=p[z]}else o.push(p)}}class A{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function I(o){return/^[\s\xa0]*$/.test(o)}function C(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function N(o){return N[" "](o),o}N[" "]=function(){};var F=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function j(o,c,d){for(const p in o)c.call(d,o[p],p,o)}function w(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function m(o){const c={};for(const d in o)c[d]=o[d];return c}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function y(o,c){let d,p;for(let V=1;V<arguments.length;V++){p=arguments[V];for(d in p)o[d]=p[d];for(let M=0;M<_.length;M++)d=_[M],Object.prototype.hasOwnProperty.call(p,d)&&(o[d]=p[d])}}function R(o){var c=1;o=o.split(":");const d=[];for(;0<c&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function P(o){l.setTimeout(()=>{throw o},0)}function E(){var o=Q;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class he{constructor(){this.h=this.g=null}add(c,d){const p=Z.get();p.set(c,d),this.h?this.h.next=p:this.g=p,this.h=p}}var Z=new A(()=>new de,o=>o.reset());class de{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let te,U=!1,Q=new he,K=()=>{const o=l.Promise.resolve(void 0);te=()=>{o.then(ge)}};var ge=()=>{for(var o;o=E();){try{o.h.call(o.g)}catch(d){P(d)}var c=Z;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}U=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var rn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return o}();function sn(o,c){if(Pe.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(F){e:{try{N(c.nodeName);var V=!0;break e}catch{}V=!1}V||(c=null)}}else d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:on[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&sn.aa.h.call(this)}}k(sn,Pe);var on={2:"touch",3:"pen",4:"mouse"};sn.prototype.h=function(){sn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var an="closure_listenable_"+(1e6*Math.random()|0),Hv=0;function Wv(o,c,d,p,V){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!p,this.ha=V,this.key=++Hv,this.da=this.fa=!1}function po(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function mo(o){this.src=o,this.g={},this.h=0}mo.prototype.add=function(o,c,d,p,V){var M=o.toString();o=this.g[M],o||(o=this.g[M]=[],this.h++);var z=Ml(o,c,p,V);return-1<z?(c=o[z],d||(c.fa=!1)):(c=new Wv(c,this.src,M,!!p,V),c.fa=d,o.push(c)),c};function Dl(o,c){var d=c.type;if(d in o.g){var p=o.g[d],V=Array.prototype.indexOf.call(p,c,void 0),M;(M=0<=V)&&Array.prototype.splice.call(p,V,1),M&&(po(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Ml(o,c,d,p){for(var V=0;V<o.length;++V){var M=o[V];if(!M.da&&M.listener==c&&M.capture==!!d&&M.ha==p)return V}return-1}var Ll="closure_lm_"+(1e6*Math.random()|0),Ol={};function Md(o,c,d,p,V){if(Array.isArray(c)){for(var M=0;M<c.length;M++)Md(o,c[M],d,p,V);return null}return d=Fd(d),o&&o[an]?o.K(c,d,h(p)?!!p.capture:!1,V):Qv(o,c,d,!1,p,V)}function Qv(o,c,d,p,V,M){if(!c)throw Error("Invalid event type");var z=h(V)?!!V.capture:!!V,pe=jl(o);if(pe||(o[Ll]=pe=new mo(o)),d=pe.add(c,d,p,z,M),d.proxy)return d;if(p=Kv(),d.proxy=p,p.src=o,p.listener=d,o.addEventListener)rn||(V=z),V===void 0&&(V=!1),o.addEventListener(c.toString(),p,V);else if(o.attachEvent)o.attachEvent(Od(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Kv(){function o(d){return c.call(o.src,o.listener,d)}const c=Gv;return o}function Ld(o,c,d,p,V){if(Array.isArray(c))for(var M=0;M<c.length;M++)Ld(o,c[M],d,p,V);else p=h(p)?!!p.capture:!!p,d=Fd(d),o&&o[an]?(o=o.i,c=String(c).toString(),c in o.g&&(M=o.g[c],d=Ml(M,d,p,V),-1<d&&(po(M[d]),Array.prototype.splice.call(M,d,1),M.length==0&&(delete o.g[c],o.h--)))):o&&(o=jl(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Ml(c,d,p,V)),(d=-1<o?c[o]:null)&&Fl(d))}function Fl(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[an])Dl(c.i,o);else{var d=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(d,p,o.capture):c.detachEvent?c.detachEvent(Od(d),p):c.addListener&&c.removeListener&&c.removeListener(p),(d=jl(c))?(Dl(d,o),d.h==0&&(d.src=null,c[Ll]=null)):po(o)}}}function Od(o){return o in Ol?Ol[o]:Ol[o]="on"+o}function Gv(o,c){if(o.da)o=!0;else{c=new sn(c,this);var d=o.listener,p=o.ha||o.src;o.fa&&Fl(o),o=d.call(p,c)}return o}function jl(o){return o=o[Ll],o instanceof mo?o:null}var bl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fd(o){return typeof o=="function"?o:(o[bl]||(o[bl]=function(c){return o.handleEvent(c)}),o[bl])}function Ye(){fe.call(this),this.i=new mo(this),this.M=this,this.F=null}k(Ye,fe),Ye.prototype[an]=!0,Ye.prototype.removeEventListener=function(o,c,d,p){Ld(this,o,c,d,p)};function ot(o,c){var d,p=o.F;if(p)for(d=[];p;p=p.F)d.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new Pe(c,o);else if(c instanceof Pe)c.target=c.target||o;else{var V=c;c=new Pe(p,o),y(c,V)}if(V=!0,d)for(var M=d.length-1;0<=M;M--){var z=c.g=d[M];V=go(z,p,!0,c)&&V}if(z=c.g=o,V=go(z,p,!0,c)&&V,V=go(z,p,!1,c)&&V,d)for(M=0;M<d.length;M++)z=c.g=d[M],V=go(z,p,!1,c)&&V}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var d=o.g[c],p=0;p<d.length;p++)po(d[p]);delete o.g[c],o.h--}}this.F=null},Ye.prototype.K=function(o,c,d,p){return this.i.add(String(o),c,!1,d,p)},Ye.prototype.L=function(o,c,d,p){return this.i.add(String(o),c,!0,d,p)};function go(o,c,d,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var V=!0,M=0;M<c.length;++M){var z=c[M];if(z&&!z.da&&z.capture==d){var pe=z.listener,Be=z.ha||z.src;z.fa&&Dl(o.i,z),V=pe.call(Be,p)!==!1&&V}}return V&&!p.defaultPrevented}function jd(o,c,d){if(typeof o=="function")d&&(o=v(o,d));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function bd(o){o.g=jd(()=>{o.g=null,o.i&&(o.i=!1,bd(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Yv extends fe{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:bd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ls(o){fe.call(this),this.h=o,this.g={}}k(Ls,fe);var Ud=[];function zd(o){j(o.g,function(c,d){this.g.hasOwnProperty(d)&&Fl(c)},o),o.g={}}Ls.prototype.N=function(){Ls.aa.N.call(this),zd(this)},Ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ul=l.JSON.stringify,Xv=l.JSON.parse,Jv=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function zl(){}zl.prototype.h=null;function Bd(o){return o.h||(o.h=o.i())}function $d(){}var Os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bl(){Pe.call(this,"d")}k(Bl,Pe);function $l(){Pe.call(this,"c")}k($l,Pe);var ar={},qd=null;function yo(){return qd=qd||new Ye}ar.La="serverreachability";function Hd(o){Pe.call(this,ar.La,o)}k(Hd,Pe);function Fs(o){const c=yo();ot(c,new Hd(c))}ar.STAT_EVENT="statevent";function Wd(o,c){Pe.call(this,ar.STAT_EVENT,o),this.stat=c}k(Wd,Pe);function at(o){const c=yo();ot(c,new Wd(c,o))}ar.Ma="timingevent";function Qd(o,c){Pe.call(this,ar.Ma,o),this.size=c}k(Qd,Pe);function js(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function bs(){this.g=!0}bs.prototype.xa=function(){this.g=!1};function Zv(o,c,d,p,V,M){o.info(function(){if(o.g)if(M)for(var z="",pe=M.split("&"),Be=0;Be<pe.length;Be++){var oe=pe[Be].split("=");if(1<oe.length){var Xe=oe[0];oe=oe[1];var Je=Xe.split("_");z=2<=Je.length&&Je[1]=="type"?z+(Xe+"="+oe+"&"):z+(Xe+"=redacted&")}}else z=null;else z=M;return"XMLHTTP REQ ("+p+") [attempt "+V+"]: "+c+`
`+d+`
`+z})}function e0(o,c,d,p,V,M,z){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+V+"]: "+c+`
`+d+`
`+M+" "+z})}function Or(o,c,d,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+n0(o,d)+(p?" "+p:"")})}function t0(o,c){o.info(function(){return"TIMEOUT: "+c})}bs.prototype.info=function(){};function n0(o,c){if(!o.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var p=d[o];if(!(2>p.length)){var V=p[1];if(Array.isArray(V)&&!(1>V.length)){var M=V[0];if(M!="noop"&&M!="stop"&&M!="close")for(var z=1;z<V.length;z++)V[z]=""}}}}return Ul(d)}catch{return c}}var _o={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ql;function vo(){}k(vo,zl),vo.prototype.g=function(){return new XMLHttpRequest},vo.prototype.i=function(){return{}},ql=new vo;function Rn(o,c,d,p){this.j=o,this.i=c,this.l=d,this.R=p||1,this.U=new Ls(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gd}function Gd(){this.i=null,this.g="",this.h=!1}var Yd={},Hl={};function Wl(o,c,d){o.L=1,o.v=Io(ln(c)),o.m=d,o.P=!0,Xd(o,null)}function Xd(o,c){o.F=Date.now(),Eo(o),o.A=ln(o.v);var d=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),df(d.i,"t",p),o.C=0,d=o.j.J,o.h=new Gd,o.g=xf(o.j,d?c:null,!o.m),0<o.O&&(o.M=new Yv(v(o.Y,o,o.g),o.O)),c=o.U,d=o.g,p=o.ca;var V="readystatechange";Array.isArray(V)||(V&&(Ud[0]=V.toString()),V=Ud);for(var M=0;M<V.length;M++){var z=Md(d,V[M],p||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?m(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Fs(),Zv(o.i,o.u,o.A,o.l,o.R,o.m)}Rn.prototype.ca=function(o){o=o.target;const c=this.M;c&&un(o)==3?c.j():this.Y(o)},Rn.prototype.Y=function(o){try{if(o==this.g)e:{const Je=un(this.g);var c=this.g.Ba();const br=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||vf(this.g)))){this.J||Je!=4||c==7||(c==8||0>=br?Fs(3):Fs(2)),Ql(this);var d=this.g.Z();this.X=d;t:if(Jd(this)){var p=vf(this.g);o="";var V=p.length,M=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lr(this),Us(this);var z="";break t}this.h.i=new l.TextDecoder}for(c=0;c<V;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(M&&c==V-1)});p.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=d==200,e0(this.i,this.u,this.A,this.l,this.R,Je,d),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,Be=this.g;if((pe=Be.g?Be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(pe)){var oe=pe;break t}}oe=null}if(d=oe)Or(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kl(this,d);else{this.o=!1,this.s=3,at(12),lr(this),Us(this);break e}}if(this.P){d=!0;let Ft;for(;!this.J&&this.C<z.length;)if(Ft=r0(this,z),Ft==Hl){Je==4&&(this.s=4,at(14),d=!1),Or(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==Yd){this.s=4,at(15),Or(this.i,this.l,z,"[Invalid Chunk]"),d=!1;break}else Or(this.i,this.l,Ft,null),Kl(this,Ft);if(Jd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||z.length!=0||this.h.h||(this.s=1,at(16),d=!1),this.o=this.o&&d,!d)Or(this.i,this.l,z,"[Invalid Chunked Response]"),lr(this),Us(this);else if(0<z.length&&!this.W){this.W=!0;var Xe=this.j;Xe.g==this&&Xe.ba&&!Xe.M&&(Xe.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),eu(Xe),Xe.M=!0,at(11))}}else Or(this.i,this.l,z,null),Kl(this,z);Je==4&&lr(this),this.o&&!this.J&&(Je==4?Rf(this.j,this):(this.o=!1,Eo(this)))}else E0(this.g),d==400&&0<z.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),lr(this),Us(this)}}}catch{}finally{}};function Jd(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function r0(o,c){var d=o.C,p=c.indexOf(`
`,d);return p==-1?Hl:(d=Number(c.substring(d,p)),isNaN(d)?Yd:(p+=1,p+d>c.length?Hl:(c=c.slice(p,p+d),o.C=p+d,c)))}Rn.prototype.cancel=function(){this.J=!0,lr(this)};function Eo(o){o.S=Date.now()+o.I,Zd(o,o.I)}function Zd(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=js(v(o.ba,o),c)}function Ql(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Rn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(t0(this.i,this.A),this.L!=2&&(Fs(),at(17)),lr(this),this.s=2,Us(this)):Zd(this,this.S-o)};function Us(o){o.j.G==0||o.J||Rf(o.j,o)}function lr(o){Ql(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,zd(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Kl(o,c){try{var d=o.j;if(d.G!=0&&(d.g==o||Gl(d.h,o))){if(!o.K&&Gl(d.h,o)&&d.G==3){try{var p=d.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var V=p;if(V[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)Po(d),Co(d);else break e;Zl(d),at(18)}}else d.za=V[1],0<d.za-d.T&&37500>V[2]&&d.F&&d.v==0&&!d.C&&(d.C=js(v(d.Za,d),6e3));if(1>=nf(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else cr(d,11)}else if((o.K||d.g==o)&&Po(d),!I(c))for(V=d.Da.g.parse(c),c=0;c<V.length;c++){let oe=V[c];if(d.T=oe[0],oe=oe[1],d.G==2)if(oe[0]=="c"){d.K=oe[1],d.ia=oe[2];const Xe=oe[3];Xe!=null&&(d.la=Xe,d.j.info("VER="+d.la));const Je=oe[4];Je!=null&&(d.Aa=Je,d.j.info("SVER="+d.Aa));const br=oe[5];br!=null&&typeof br=="number"&&0<br&&(p=1.5*br,d.L=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;const Ft=o.g;if(Ft){const Vo=Ft.g?Ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vo){var M=p.h;M.g||Vo.indexOf("spdy")==-1&&Vo.indexOf("quic")==-1&&Vo.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Yl(M,M.h),M.h=null))}if(p.D){const tu=Ft.g?Ft.g.getResponseHeader("X-HTTP-Session-Id"):null;tu&&(p.ya=tu,ye(p.I,p.D,tu))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),p=d;var z=o;if(p.qa=Pf(p,p.J?p.ia:null,p.W),z.K){rf(p.h,z);var pe=z,Be=p.L;Be&&(pe.I=Be),pe.B&&(Ql(pe),Eo(pe)),p.g=z}else Sf(p);0<d.i.length&&ko(d)}else oe[0]!="stop"&&oe[0]!="close"||cr(d,7);else d.G==3&&(oe[0]=="stop"||oe[0]=="close"?oe[0]=="stop"?cr(d,7):Jl(d):oe[0]!="noop"&&d.l&&d.l.ta(oe),d.v=0)}}Fs(4)}catch{}}var s0=class{constructor(o,c){this.g=o,this.map=c}};function ef(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tf(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function nf(o){return o.h?1:o.g?o.g.size:0}function Gl(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Yl(o,c){o.g?o.g.add(c):o.h=c}function rf(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}ef.prototype.cancel=function(){if(this.i=sf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function sf(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.D);return c}return x(o.i)}function i0(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],d=o.length,p=0;p<d;p++)c.push(o[p]);return c}c=[],d=0;for(p in o)c[d++]=o[p];return c}function o0(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var d=0;d<o;d++)c.push(d);return c}c=[],d=0;for(const p in o)c[d++]=p;return c}}}function of(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var d=o0(o),p=i0(o),V=p.length,M=0;M<V;M++)c.call(void 0,p[M],d&&d[M],o)}var af=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function a0(o,c){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var p=o[d].indexOf("="),V=null;if(0<=p){var M=o[d].substring(0,p);V=o[d].substring(p+1)}else M=o[d];c(M,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function ur(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof ur){this.h=o.h,wo(this,o.j),this.o=o.o,this.g=o.g,To(this,o.s),this.l=o.l;var c=o.i,d=new $s;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),lf(this,d),this.m=o.m}else o&&(c=String(o).match(af))?(this.h=!1,wo(this,c[1]||"",!0),this.o=zs(c[2]||""),this.g=zs(c[3]||"",!0),To(this,c[4]),this.l=zs(c[5]||"",!0),lf(this,c[6]||"",!0),this.m=zs(c[7]||"")):(this.h=!1,this.i=new $s(null,this.h))}ur.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Bs(c,uf,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Bs(c,uf,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Bs(d,d.charAt(0)=="/"?c0:u0,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Bs(d,d0)),o.join("")};function ln(o){return new ur(o)}function wo(o,c,d){o.j=d?zs(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function To(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function lf(o,c,d){c instanceof $s?(o.i=c,f0(o.i,o.h)):(d||(c=Bs(c,h0)),o.i=new $s(c,o.h))}function ye(o,c,d){o.i.set(c,d)}function Io(o){return ye(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function zs(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Bs(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,l0),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function l0(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var uf=/[#\/\?@]/g,u0=/[#\?:]/g,c0=/[#\?]/g,h0=/[#\?@]/g,d0=/#/g;function $s(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Cn(o){o.g||(o.g=new Map,o.h=0,o.i&&a0(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=$s.prototype,t.add=function(o,c){Cn(this),this.i=null,o=Fr(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function cf(o,c){Cn(o),c=Fr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function hf(o,c){return Cn(o),c=Fr(o,c),o.g.has(c)}t.forEach=function(o,c){Cn(this),this.g.forEach(function(d,p){d.forEach(function(V){o.call(c,V,p,this)},this)},this)},t.na=function(){Cn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let p=0;p<c.length;p++){const V=o[p];for(let M=0;M<V.length;M++)d.push(c[p])}return d},t.V=function(o){Cn(this);let c=[];if(typeof o=="string")hf(this,o)&&(c=c.concat(this.g.get(Fr(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)c=c.concat(o[d])}return c},t.set=function(o,c){return Cn(this),this.i=null,o=Fr(this,o),hf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function df(o,c,d){cf(o,c),0<d.length&&(o.i=null,o.g.set(Fr(o,c),x(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var p=c[d];const M=encodeURIComponent(String(p)),z=this.V(p);for(p=0;p<z.length;p++){var V=M;z[p]!==""&&(V+="="+encodeURIComponent(String(z[p]))),o.push(V)}}return this.i=o.join("&")};function Fr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function f0(o,c){c&&!o.j&&(Cn(o),o.i=null,o.g.forEach(function(d,p){var V=p.toLowerCase();p!=V&&(cf(this,p),df(this,V,d))},o)),o.j=c}function p0(o,c){const d=new bs;if(l.Image){const p=new Image;p.onload=T(kn,d,"TestLoadImage: loaded",!0,c,p),p.onerror=T(kn,d,"TestLoadImage: error",!1,c,p),p.onabort=T(kn,d,"TestLoadImage: abort",!1,c,p),p.ontimeout=T(kn,d,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function m0(o,c){const d=new bs,p=new AbortController,V=setTimeout(()=>{p.abort(),kn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(M=>{clearTimeout(V),M.ok?kn(d,"TestPingServer: ok",!0,c):kn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(V),kn(d,"TestPingServer: error",!1,c)})}function kn(o,c,d,p,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),p(d)}catch{}}function g0(){this.g=new Jv}function y0(o,c,d){const p=d||"";try{of(o,function(V,M){let z=V;h(V)&&(z=Ul(V)),c.push(p+M+"="+encodeURIComponent(z))})}catch(V){throw c.push(p+"type="+encodeURIComponent("_badmap")),V}}function So(o){this.l=o.Ub||null,this.j=o.eb||!1}k(So,zl),So.prototype.g=function(){return new Ao(this.l,this.j)},So.prototype.i=function(o){return function(){return o}}({});function Ao(o,c){Ye.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Ao,Ye),t=Ao.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Hs(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qs(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ff(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function ff(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?qs(this):Hs(this),this.readyState==3&&ff(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,qs(this))},t.Qa=function(o){this.g&&(this.response=o,qs(this))},t.ga=function(){this.g&&qs(this)};function qs(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Hs(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function Hs(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ao.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function pf(o){let c="";return j(o,function(d,p){c+=p,c+=":",c+=d,c+=`\r
`}),c}function Xl(o,c,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=pf(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):ye(o,c,d))}function Re(o){Ye.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Re,Ye);var _0=/^https?$/i,v0=["POST","PUT"];t=Re.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ql.g(),this.v=this.o?Bd(this.o):Bd(ql),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(M){mf(this,M);return}if(o=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var V in p)d.set(V,p[V]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const M of p.keys())d.set(M,p.get(M));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(M=>M.toLowerCase()=="content-type"),V=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(v0,c,void 0))||p||V||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,z]of d)this.g.setRequestHeader(M,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_f(this),this.u=!0,this.g.send(o),this.u=!1}catch(M){mf(this,M)}};function mf(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,gf(o),Ro(o)}function gf(o){o.A||(o.A=!0,ot(o,"complete"),ot(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ot(this,"complete"),ot(this,"abort"),Ro(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ro(this,!0)),Re.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yf(this):this.bb())},t.bb=function(){yf(this)};function yf(o){if(o.h&&typeof a<"u"&&(!o.v[1]||un(o)!=4||o.Z()!=2)){if(o.u&&un(o)==4)jd(o.Ea,0,o);else if(ot(o,"readystatechange"),un(o)==4){o.h=!1;try{const z=o.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var p;if(p=z===0){var V=String(o.D).match(af)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),p=!_0.test(V?V.toLowerCase():"")}d=p}if(d)ot(o,"complete"),ot(o,"success");else{o.m=6;try{var M=2<un(o)?o.g.statusText:""}catch{M=""}o.l=M+" ["+o.Z()+"]",gf(o)}}finally{Ro(o)}}}}function Ro(o,c){if(o.g){_f(o);const d=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||ot(o,"ready");try{d.onreadystatechange=p}catch{}}}function _f(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function un(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Xv(c)}};function vf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function E0(o){const c={};o=(o.g&&2<=un(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(I(o[p]))continue;var d=R(o[p]);const V=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const M=c[V]||[];c[V]=M,M.push(d)}w(c,function(p){return p.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function Ef(o){this.Aa=0,this.i=[],this.j=new bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ws("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ws("baseRetryDelayMs",5e3,o),this.cb=Ws("retryDelaySeedMs",1e4,o),this.Wa=Ws("forwardChannelMaxRetries",2,o),this.wa=Ws("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new ef(o&&o.concurrentRequestLimit),this.Da=new g0,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ef.prototype,t.la=8,t.G=1,t.connect=function(o,c,d,p){at(0),this.W=o,this.H=c||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.I=Pf(this,null,this.W),ko(this)};function Jl(o){if(wf(o),o.G==3){var c=o.U++,d=ln(o.I);if(ye(d,"SID",o.K),ye(d,"RID",c),ye(d,"TYPE","terminate"),Qs(o,d),c=new Rn(o,o.j,c),c.L=2,c.v=Io(ln(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=xf(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Eo(c)}kf(o)}function Co(o){o.g&&(eu(o),o.g.cancel(),o.g=null)}function wf(o){Co(o),o.u&&(l.clearTimeout(o.u),o.u=null),Po(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function ko(o){if(!tf(o.h)&&!o.s){o.s=!0;var c=o.Ga;te||K(),U||(te(),U=!0),Q.add(c,o),o.B=0}}function w0(o,c){return nf(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=js(v(o.Ga,o,c),Cf(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const V=new Rn(this,this.j,o);let M=this.o;if(this.S&&(M?(M=m(M),y(M,this.S)):M=this.S),this.m!==null||this.O||(V.H=M,M=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=If(this,V,c),d=ln(this.I),ye(d,"RID",o),ye(d,"CVER",22),this.D&&ye(d,"X-HTTP-Session-Id",this.D),Qs(this,d),M&&(this.O?c="headers="+encodeURIComponent(String(pf(M)))+"&"+c:this.m&&Xl(d,this.m,M)),Yl(this.h,V),this.Ua&&ye(d,"TYPE","init"),this.P?(ye(d,"$req",c),ye(d,"SID","null"),V.T=!0,Wl(V,d,null)):Wl(V,d,c),this.G=2}}else this.G==3&&(o?Tf(this,o):this.i.length==0||tf(this.h)||Tf(this))};function Tf(o,c){var d;c?d=c.l:d=o.U++;const p=ln(o.I);ye(p,"SID",o.K),ye(p,"RID",d),ye(p,"AID",o.T),Qs(o,p),o.m&&o.o&&Xl(p,o.m,o.o),d=new Rn(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),c&&(o.i=c.D.concat(o.i)),c=If(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Yl(o.h,d),Wl(d,p,c)}function Qs(o,c){o.H&&j(o.H,function(d,p){ye(c,p,d)}),o.l&&of({},function(d,p){ye(c,p,d)})}function If(o,c,d){d=Math.min(o.i.length,d);var p=o.l?v(o.l.Na,o.l,o):null;e:{var V=o.i;let M=-1;for(;;){const z=["count="+d];M==-1?0<d?(M=V[0].g,z.push("ofs="+M)):M=0:z.push("ofs="+M);let pe=!0;for(let Be=0;Be<d;Be++){let oe=V[Be].g;const Xe=V[Be].map;if(oe-=M,0>oe)M=Math.max(0,V[Be].g-100),pe=!1;else try{y0(Xe,z,"req"+oe+"_")}catch{p&&p(Xe)}}if(pe){p=z.join("&");break e}}}return o=o.i.splice(0,d),c.D=o,p}function Sf(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;te||K(),U||(te(),U=!0),Q.add(c,o),o.v=0}}function Zl(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=js(v(o.Fa,o),Cf(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Af(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=js(v(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Co(this),Af(this))};function eu(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Af(o){o.g=new Rn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=ln(o.qa);ye(c,"RID","rpc"),ye(c,"SID",o.K),ye(c,"AID",o.T),ye(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&ye(c,"TO",o.ja),ye(c,"TYPE","xmlhttp"),Qs(o,c),o.m&&o.o&&Xl(c,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Io(ln(c)),d.m=null,d.P=!0,Xd(d,o)}t.Za=function(){this.C!=null&&(this.C=null,Co(this),Zl(this),at(19))};function Po(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Rf(o,c){var d=null;if(o.g==c){Po(o),eu(o),o.g=null;var p=2}else if(Gl(o.h,c))d=c.D,rf(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var V=o.B;p=yo(),ot(p,new Qd(p,d)),ko(o)}else Sf(o);else if(V=c.s,V==3||V==0&&0<c.X||!(p==1&&w0(o,c)||p==2&&Zl(o)))switch(d&&0<d.length&&(c=o.h,c.i=c.i.concat(d)),V){case 1:cr(o,5);break;case 4:cr(o,10);break;case 3:cr(o,6);break;default:cr(o,2)}}}function Cf(o,c){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*c}function cr(o,c){if(o.j.info("Error code "+c),c==2){var d=v(o.fb,o),p=o.Xa;const V=!p;p=new ur(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||wo(p,"https"),Io(p),V?p0(p.toString(),d):m0(p.toString(),d)}else at(2);o.G=0,o.l&&o.l.sa(c),kf(o),wf(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function kf(o){if(o.G=0,o.ka=[],o.l){const c=sf(o.h);(c.length!=0||o.i.length!=0)&&(D(o.ka,c),D(o.ka,o.i),o.h.i.length=0,x(o.i),o.i.length=0),o.l.ra()}}function Pf(o,c,d){var p=d instanceof ur?ln(d):new ur(d);if(p.g!="")c&&(p.g=c+"."+p.g),To(p,p.s);else{var V=l.location;p=V.protocol,c=c?c+"."+V.hostname:V.hostname,V=+V.port;var M=new ur(null);p&&wo(M,p),c&&(M.g=c),V&&To(M,V),d&&(M.l=d),p=M}return d=o.D,c=o.ya,d&&c&&ye(p,d,c),ye(p,"VER",o.la),Qs(o,p),p}function xf(o,c,d){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Re(new So({eb:d})):new Re(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vf(){}t=Vf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xo(){}xo.prototype.g=function(o,c){return new Et(o,c)};function Et(o,c){Ye.call(this),this.g=new Ef(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!I(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!I(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new jr(this)}k(Et,Ye),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){Jl(this.g)},Et.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Ul(o),o=d);c.i.push(new s0(c.Ya++,o)),c.G==3&&ko(c)},Et.prototype.N=function(){this.g.l=null,delete this.j,Jl(this.g),delete this.g,Et.aa.N.call(this)};function Nf(o){Bl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const d in c){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}k(Nf,Bl);function Df(){$l.call(this),this.status=1}k(Df,$l);function jr(o){this.g=o}k(jr,Vf),jr.prototype.ua=function(){ot(this.g,"a")},jr.prototype.ta=function(o){ot(this.g,new Nf(o))},jr.prototype.sa=function(o){ot(this.g,new Df)},jr.prototype.ra=function(){ot(this.g,"b")},xo.prototype.createWebChannel=xo.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,__=function(){return new xo},y_=function(){return yo()},g_=ar,jc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_o.NO_ERROR=0,_o.TIMEOUT=8,_o.HTTP_ERROR=6,da=_o,Kd.COMPLETE="complete",m_=Kd,$d.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,li=$d,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,p_=Re}).apply(typeof Go<"u"?Go:typeof self<"u"?self:typeof window<"u"?window:{});const nm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nt.UNAUTHENTICATED=new nt(null),nt.GOOGLE_CREDENTIALS=new nt("google-credentials-uid"),nt.FIRST_PARTY=new nt("first-party-uid"),nt.MOCK_USER=new nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new a_("@firebase/firestore");function ni(){return Cr.logLevel}function q(t,...e){if(Cr.logLevel<=se.DEBUG){const n=e.map(td);Cr.debug(`Firestore (${xs}): ${t}`,...n)}}function wn(t,...e){if(Cr.logLevel<=se.ERROR){const n=e.map(td);Cr.error(`Firestore (${xs}): ${t}`,...n)}}function _s(t,...e){if(Cr.logLevel<=se.WARN){const n=e.map(td);Cr.warn(`Firestore (${xs}): ${t}`,...n)}}function td(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t="Unexpected state"){const e=`FIRESTORE (${xs}) INTERNAL ASSERTION FAILED: `+t;throw wn(e),new Error(e)}function ce(t,e){t||G()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Ps{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nt.UNAUTHENTICATED))}shutdown(){}}class MT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LT{constructor(e){this.t=e,this.currentUser=nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Qn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Qn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string"),new v_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string"),new nt(e)}}class OT{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=nt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class FT{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new OT(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ce(this.o===void 0);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string"),this.R=n.token,new jT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=UT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function vs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new je(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new je(0,0))}static max(){return new X(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(),r===void 0?r=e.length-n:r>e.length-n&&G(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Wi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ve extends Wi{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const zT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends Wi{construct(e,n,r){return new He(e,n,r)}static isValidIdentifier(e){return zT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new He(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new B(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new B(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new B(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(ve.fromString(e))}static fromName(e){return new W(ve.fromString(e).popFirst(5))}static empty(){return new W(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new ve(e.slice()))}}function BT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new Xn(s,W.empty(),e)}function $T(t){return new Xn(t.readTime,t.key,-1)}class Xn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xn(X.min(),W.empty(),-1)}static max(){return new Xn(X.max(),W.empty(),-1)}}function qT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==HT)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(s=>s?O.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new O((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(f=>{a[h]=f,++l,l===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new O((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function QT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function io(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}nd.oe=-1;function ml(t){return t==null}function Ha(t){return t===0&&1/t==-1/0}function KT(t){return typeof t=="number"&&Number.isInteger(t)&&!Ha(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Nr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function w_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||qe.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yo(this.root,e,this.comparator,!0)}}class Yo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??qe.RED,this.left=s??qe.EMPTY,this.right=i??qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new qe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return qe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();const e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}}qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,n,r,s,i){return this}insert(e,n,r){return new qe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sm(this.data.getIterator())}getIteratorFrom(e){return new sm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class sm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new St([])}unionWith(e){let n=new Qe(He.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new St(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new T_("Invalid base64 string: "+i):i}}(e);return new Ge(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Ge(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ge.EMPTY_BYTE_STRING=new Ge("");const GT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jn(t){if(ce(!!t),typeof t=="string"){let e=0;const n=GT.exec(t);if(ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xe(t.seconds),nanos:xe(t.nanos)}}function xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function kr(t){return typeof t=="string"?Ge.fromBase64String(t):Ge.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sd(t){const e=t.mapValue.fields.__previous_value__;return rd(e)?sd(e):e}function Qi(t){const e=Jn(t.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n,r,s,i,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class Ki{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ki("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ki&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo={mapValue:{}};function Pr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rd(t)?4:JT(t)?9007199254740991:XT(t)?10:11:G()}function nn(t,e){if(t===e)return!0;const n=Pr(t);if(n!==Pr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qi(t).isEqual(Qi(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Jn(s.timestampValue),l=Jn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return kr(s.bytesValue).isEqual(kr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return xe(s.geoPointValue.latitude)===xe(i.geoPointValue.latitude)&&xe(s.geoPointValue.longitude)===xe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return xe(s.integerValue)===xe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=xe(s.doubleValue),l=xe(i.doubleValue);return a===l?Ha(a)===Ha(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return vs(t.arrayValue.values||[],e.arrayValue.values||[],nn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(rm(a)!==rm(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!nn(a[u],l[u])))return!1;return!0}(t,e);default:return G()}}function Gi(t,e){return(t.values||[]).find(n=>nn(n,e))!==void 0}function Es(t,e){if(t===e)return 0;const n=Pr(t),r=Pr(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=xe(i.integerValue||i.doubleValue),u=xe(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return im(t.timestampValue,e.timestampValue);case 4:return im(Qi(t),Qi(e));case 5:return ae(t.stringValue,e.stringValue);case 6:return function(i,a){const l=kr(i),u=kr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=ae(l[h],u[h]);if(f!==0)return f}return ae(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ae(xe(i.latitude),xe(a.latitude));return l!==0?l:ae(xe(i.longitude),xe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return om(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,u,h,f;const g=i.fields||{},v=a.fields||{},T=(l=g.value)===null||l===void 0?void 0:l.arrayValue,k=(u=v.value)===null||u===void 0?void 0:u.arrayValue,x=ae(((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0,((f=k==null?void 0:k.values)===null||f===void 0?void 0:f.length)||0);return x!==0?x:om(T,k)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Xo.mapValue&&a===Xo.mapValue)return 0;if(i===Xo.mapValue)return 1;if(a===Xo.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=a.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const v=ae(u[g],f[g]);if(v!==0)return v;const T=Es(l[u[g]],h[f[g]]);if(T!==0)return T}return ae(u.length,f.length)}(t.mapValue,e.mapValue);default:throw G()}}function im(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Jn(t),r=Jn(e),s=ae(n.seconds,r.seconds);return s!==0?s:ae(n.nanos,r.nanos)}function om(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Es(n[s],r[s]);if(i)return i}return ae(n.length,r.length)}function ws(t){return bc(t)}function bc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=bc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${bc(n.fields[a])}`;return s+"}"}(t.mapValue):G()}function am(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Uc(t){return!!t&&"integerValue"in t}function id(t){return!!t&&"arrayValue"in t}function lm(t){return!!t&&"nullValue"in t}function um(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fa(t){return!!t&&"mapValue"in t}function XT(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ii(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Nr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ii(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ii(t.arrayValue.values[n]);return e}return Object.assign({},t)}function JT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.value=e}static empty(){return new ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ii(n)}setAll(e){let n=He.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Ii(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());fa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];fa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Nr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ft(Ii(this.value))}}function I_(t){const e=[];return Nr(t.fields,(n,r)=>{const s=new He([n]);if(fa(r)){const i=I_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new St(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new st(e,0,X.min(),X.min(),X.min(),ft.empty(),0)}static newFoundDocument(e,n,r,s){return new st(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new st(e,2,n,X.min(),X.min(),ft.empty(),0)}static newUnknownDocument(e,n){return new st(e,3,n,X.min(),X.min(),ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof st&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new st(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this.position=e,this.inclusive=n}}function cm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(a.referenceValue),n.key):r=Es(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function hm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{}class Me extends S_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new tI(e,n,r):n==="array-contains"?new sI(e,r):n==="in"?new iI(e,r):n==="not-in"?new oI(e,r):n==="array-contains-any"?new aI(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new nI(e,r):new rI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Es(n,this.value)):n!==null&&Pr(this.value)===Pr(n)&&this.matchesComparison(Es(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kt extends S_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Kt(e,n)}matches(e){return A_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function A_(t){return t.op==="and"}function R_(t){return eI(t)&&A_(t)}function eI(t){for(const e of t.filters)if(e instanceof Kt)return!1;return!0}function zc(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+ws(t.value);if(R_(t))return t.filters.map(e=>zc(e)).join(",");{const e=t.filters.map(n=>zc(n)).join(",");return`${t.op}(${e})`}}function C_(t,e){return t instanceof Me?function(r,s){return s instanceof Me&&r.op===s.op&&r.field.isEqual(s.field)&&nn(r.value,s.value)}(t,e):t instanceof Kt?function(r,s){return s instanceof Kt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&C_(a,s.filters[l]),!0):!1}(t,e):void G()}function k_(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${ws(n.value)}`}(t):t instanceof Kt?function(n){return n.op.toString()+" {"+n.getFilters().map(k_).join(" ,")+"}"}(t):"Filter"}class tI extends Me{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class nI extends Me{constructor(e,n){super(e,"in",n),this.keys=P_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rI extends Me{constructor(e,n){super(e,"not-in",n),this.keys=P_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function P_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class sI extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return id(n)&&Gi(n.arrayValue,this.value)}}class iI extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gi(this.value.arrayValue,n)}}class oI extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Gi(this.value.arrayValue,n)}}class aI extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!id(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gi(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function dm(t,e=null,n=[],r=[],s=null,i=null,a=null){return new lI(t,e,n,r,s,i,a)}function od(t){const e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>zc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ml(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ws(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ws(r)).join(",")),e.ue=n}return e.ue}function ad(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!C_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hm(t.startAt,e.startAt)&&hm(t.endAt,e.endAt)}function Bc(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function uI(t,e,n,r,s,i,a,l){return new Vs(t,e,n,r,s,i,a,l)}function ld(t){return new Vs(t)}function fm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function x_(t){return t.collectionGroup!==null}function Si(t){const e=J(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Qe(He.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Yi(i,r))}),n.has(He.keyField().canonicalString())||e.ce.push(new Yi(He.keyField(),r))}return e.ce}function en(t){const e=J(t);return e.le||(e.le=cI(e,Si(t))),e.le}function cI(t,e){if(t.limitType==="F")return dm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Yi(s.field,i)});const n=t.endAt?new Wa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wa(t.startAt.position,t.startAt.inclusive):null;return dm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $c(t,e){const n=t.filters.concat([e]);return new Vs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function qc(t,e,n){return new Vs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gl(t,e){return ad(en(t),en(e))&&t.limitType===e.limitType}function V_(t){return`${od(en(t))}|lt:${t.limitType}`}function zr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>k_(s)).join(", ")}]`),ml(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ws(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ws(s)).join(",")),`Target(${r})`}(en(t))}; limitType=${t.limitType})`}function yl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Si(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const h=cm(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,Si(r),s)||r.endAt&&!function(a,l,u){const h=cm(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,Si(r),s))}(t,e)}function hI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function N_(t){return(e,n)=>{let r=!1;for(const s of Si(t)){const i=dI(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function dI(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Es(u,h):G()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Nr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return w_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=new Ae(W.comparator);function Tn(){return fI}const D_=new Ae(W.comparator);function ui(...t){let e=D_;for(const n of t)e=e.insert(n.key,n);return e}function M_(t){let e=D_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _r(){return Ai()}function L_(){return Ai()}function Ai(){return new Ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const pI=new Ae(W.comparator),mI=new Qe(W.comparator);function ne(...t){let e=mI;for(const n of t)e=e.add(n);return e}const gI=new Qe(ae);function yI(){return gI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ha(e)?"-0":e}}function O_(t){return{integerValue:""+t}}function F_(t,e){return KT(e)?O_(e):ud(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this._=void 0}}function _I(t,e,n){return t instanceof Qa?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&rd(i)&&(i=sd(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof Ts?b_(t,e):t instanceof Xi?U_(t,e):function(s,i){const a=j_(s,i),l=pm(a)+pm(s.Pe);return Uc(a)&&Uc(s.Pe)?O_(l):ud(s.serializer,l)}(t,e)}function vI(t,e,n){return t instanceof Ts?b_(t,e):t instanceof Xi?U_(t,e):n}function j_(t,e){return t instanceof Ji?function(r){return Uc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Qa extends _l{}class Ts extends _l{constructor(e){super(),this.elements=e}}function b_(t,e){const n=z_(e);for(const r of t.elements)n.some(s=>nn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Xi extends _l{constructor(e){super(),this.elements=e}}function U_(t,e){let n=z_(e);for(const r of t.elements)n=n.filter(s=>!nn(s,r));return{arrayValue:{values:n}}}class Ji extends _l{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function pm(t){return xe(t.integerValue||t.doubleValue)}function z_(t){return id(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n){this.field=e,this.transform=n}}function EI(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ts&&s instanceof Ts||r instanceof Xi&&s instanceof Xi?vs(r.elements,s.elements,nn):r instanceof Ji&&s instanceof Ji?nn(r.Pe,s.Pe):r instanceof Qa&&s instanceof Qa}(t.transform,e.transform)}class wI{constructor(e,n){this.version=e,this.transformResults=n}}class _t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _t}static exists(e){return new _t(void 0,e)}static updateTime(e){return new _t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vl{}function $_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new El(t.key,_t.none()):new oo(t.key,t.data,_t.none());{const n=t.data,r=ft.empty();let s=new Qe(He.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new sr(t.key,r,new St(s.toArray()),_t.none())}}function TI(t,e,n){t instanceof oo?function(s,i,a){const l=s.value.clone(),u=gm(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof sr?function(s,i,a){if(!pa(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=gm(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(q_(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ri(t,e,n,r){return t instanceof oo?function(i,a,l,u){if(!pa(i.precondition,a))return l;const h=i.value.clone(),f=ym(i.fieldTransforms,u,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof sr?function(i,a,l,u){if(!pa(i.precondition,a))return l;const h=ym(i.fieldTransforms,u,a),f=a.data;return f.setAll(q_(i)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,a,l){return pa(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function II(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=j_(r.transform,s||null);i!=null&&(n===null&&(n=ft.empty()),n.set(r.field,i))}return n||null}function mm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&vs(r,s,(i,a)=>EI(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oo extends vl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class sr extends vl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function q_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function gm(t,e,n){const r=new Map;ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,vI(a,l,n[s]))}return r}function ym(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,_I(i,a,e))}return r}class El extends vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SI extends vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&TI(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ri(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ri(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=L_();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=$_(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&vs(this.mutations,e.mutations,(n,r)=>mm(n,r))&&vs(this.baseMutations,e.baseMutations,(n,r)=>mm(n,r))}}class cd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length);let s=function(){return pI}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new cd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne,re;function kI(t){switch(t){default:return G();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function H_(t){if(t===void 0)return wn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Ne.OK:return L.OK;case Ne.CANCELLED:return L.CANCELLED;case Ne.UNKNOWN:return L.UNKNOWN;case Ne.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ne.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ne.INTERNAL:return L.INTERNAL;case Ne.UNAVAILABLE:return L.UNAVAILABLE;case Ne.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ne.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ne.NOT_FOUND:return L.NOT_FOUND;case Ne.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ne.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ne.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ne.ABORTED:return L.ABORTED;case Ne.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ne.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ne.DATA_LOSS:return L.DATA_LOSS;default:return G()}}(re=Ne||(Ne={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=new wr([4294967295,4294967295],0);function _m(t){const e=PI().encode(t),n=new f_;return n.update(e),new Uint8Array(n.digest())}function vm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new wr([n,r],0),new wr([s,i],0)]}class hd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ci(`Invalid padding: ${n}`);if(r<0)throw new ci(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ci(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ci(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=wr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(wr.fromNumber(r)));return s.compare(xI)===1&&(s=new wr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=_m(e),[r,s]=vm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new hd(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=_m(e),[r,s]=vm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ci extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ao.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wl(X.min(),s,new Ae(ae),Tn(),ne())}}class ao{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ao(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class W_{constructor(e,n){this.targetId=e,this.me=n}}class Q_{constructor(e,n,r=Ge.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Em{constructor(){this.fe=0,this.ge=Tm(),this.pe=Ge.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:G()}}),new ao(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Tm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VI{constructor(e){this.Le=e,this.Be=new Map,this.ke=Tn(),this.qe=wm(),this.Qe=new Ae(ae)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Bc(i))if(r===0){const a=new W(i.path);this.Ue(n,a,st.newNoDocument(a,X.min()))}else ce(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=kr(r).toUint8Array()}catch(u){if(u instanceof T_)return _s("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new hd(a,s,i)}catch(u){return _s(u instanceof ci?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const l=this.Je(a);if(l){if(i.current&&Bc(l.target)){const u=new W(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,st.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=ne();this.qe.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new wl(e,n,this.Qe,this.ke,r);return this.ke=Tn(),this.qe=wm(),this.Qe=new Ae(ae),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Em,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Qe(ae),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Em),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function wm(){return new Ae(W.comparator)}function Tm(){return new Ae(W.comparator)}const NI={asc:"ASCENDING",desc:"DESCENDING"},DI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MI={and:"AND",or:"OR"};class LI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hc(t,e){return t.useProto3Json||ml(e)?e:{value:e}}function Ka(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OI(t,e){return Ka(t,e.toTimestamp())}function tn(t){return ce(!!t),X.fromTimestamp(function(n){const r=Jn(n);return new je(r.seconds,r.nanos)}(t))}function dd(t,e){return Wc(t,e).canonicalString()}function Wc(t,e){const n=function(s){return new ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function G_(t){const e=ve.fromString(t);return ce(ev(e)),e}function Qc(t,e){return dd(t.databaseId,e.path)}function Nu(t,e){const n=G_(e);if(n.get(1)!==t.databaseId.projectId)throw new B(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(X_(n))}function Y_(t,e){return dd(t.databaseId,e)}function FI(t){const e=G_(t);return e.length===4?ve.emptyPath():X_(e)}function Kc(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function X_(t){return ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Im(t,e,n){return{name:Qc(t,e),fields:n.value.mapValue.fields}}function jI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(ce(f===void 0||typeof f=="string"),Ge.fromBase64String(f||"")):(ce(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Ge.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const f=h.code===void 0?L.UNKNOWN:H_(h.code);return new B(f,h.message||"")}(a);n=new Q_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Nu(t,r.document.name),i=tn(r.document.updateTime),a=r.document.createTime?tn(r.document.createTime):X.min(),l=new ft({mapValue:{fields:r.document.fields}}),u=st.newFoundDocument(s,i,a,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new ma(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Nu(t,r.document),i=r.readTime?tn(r.readTime):X.min(),a=st.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ma([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Nu(t,r.document),i=r.removedTargetIds||[];n=new ma([],i,s,null)}else{if(!("filter"in e))return G();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new CI(s,i),l=r.targetId;n=new W_(l,a)}}return n}function bI(t,e){let n;if(e instanceof oo)n={update:Im(t,e.key,e.value)};else if(e instanceof El)n={delete:Qc(t,e.key)};else if(e instanceof sr)n={update:Im(t,e.key,e.data),updateMask:KI(e.fieldMask)};else{if(!(e instanceof SI))return G();n={verify:Qc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Qa)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ts)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Xi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ji)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw G()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:OI(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:G()}(t,e.precondition)),n}function UI(t,e){return t&&t.length>0?(ce(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?tn(s.updateTime):tn(i);return a.isEqual(X.min())&&(a=tn(i)),new wI(a,s.transformResults||[])}(n,e))):[]}function zI(t,e){return{documents:[Y_(t,e.path)]}}function BI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Y_(t,s);const i=function(h){if(h.length!==0)return Z_(Kt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(f=>function(v){return{field:Br(v.field),direction:HI(v.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Hc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function $I(t){let e=FI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(g){const v=J_(g);return v instanceof Kt&&R_(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(v=>function(k){return new Yi($r(k.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(g){let v;return v=typeof g=="object"?g.value:g,ml(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(g){const v=!!g.before,T=g.values||[];return new Wa(T,v)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const v=!g.before,T=g.values||[];return new Wa(T,v)}(n.endAt)),uI(e,s,a,i,l,"F",u,h)}function qI(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function J_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$r(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=$r(n.unaryFilter.field);return Me.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$r(n.unaryFilter.field);return Me.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=$r(n.unaryFilter.field);return Me.create(a,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(t):t.fieldFilter!==void 0?function(n){return Me.create($r(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kt.create(n.compositeFilter.filters.map(r=>J_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(t):G()}function HI(t){return NI[t]}function WI(t){return DI[t]}function QI(t){return MI[t]}function Br(t){return{fieldPath:t.canonicalString()}}function $r(t){return He.fromServerFormat(t.fieldPath)}function Z_(t){return t instanceof Me?function(n){if(n.op==="=="){if(um(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NAN"}};if(lm(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(um(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NOT_NAN"}};if(lm(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Br(n.field),op:WI(n.op),value:n.value}}}(t):t instanceof Kt?function(n){const r=n.getFilters().map(s=>Z_(s));return r.length===1?r[0]:{compositeFilter:{op:QI(n.op),filters:r}}}(t):G()}function KI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ev(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n,r,s,i=X.min(),a=X.min(),l=Ge.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new On(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new On(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new On(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new On(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.ct=e}}function YI(t){const e=$I({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.un=new JI}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Xn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Xn.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class JI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Qe(ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Qe(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Is(0)}static kn(){return new Is(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.changes=new Ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ri(r.mutation,s,St.empty(),je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const s=_r();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=ui();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=_r();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Tn();const a=Ai(),l=function(){return Ai()}();return n.forEach((u,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof sr)?i=i.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),Ri(f.mutation,h,f.mutation.getFieldMask(),je.now())):a.set(h.key,St.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>a.set(h,f)),n.forEach((h,f)=>{var g;return l.set(h,new e2(f,(g=a.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ai();let s=new Ae((a,l)=>a-l),i=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||St.empty();f=l.applyToLocalView(h,f),r.set(u,f);const g=(s.get(l.batchId)||ne()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,g=L_();f.forEach(v=>{if(!i.has(v)){const T=$_(n.get(v),r.get(v));T!==null&&g.set(v,T),i=i.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return O.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return W.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):x_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(_r());let l=-1,u=i;return a.next(h=>O.forEach(h,(f,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{u=u.insert(f,v)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ne())).next(f=>({batchId:l,changes:M_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=ui();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=ui();return this.indexManager.getCollectionParents(e,i).next(l=>O.forEach(l,u=>{const h=function(g,v){return new Vs(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(f=>{f.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,st.newInvalidDocument(f)))});let l=ui();return a.forEach((u,h)=>{const f=i.get(u);f!==void 0&&Ri(f.mutation,h,St.empty(),je.now()),yl(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:tn(s.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:YI(s.bundledQuery),readTime:tn(s.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this.overlays=new Ae(W.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_r();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=_r(),i=n.length+1,a=new W(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ae((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=_r(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=_r(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=s)););return O.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new RI(n,r));let i=this.Ir.get(n);i===void 0&&(i=ne(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(){this.Tr=new Qe(be.Er),this.dr=new Qe(be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new be(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new be(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new W(new ve([])),r=new be(n,e),s=new be(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new W(new ve([])),r=new be(n,e),s=new be(n,e+1);let i=ne();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new be(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class be{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||ae(e.wr,n.wr)}static Ar(e,n){return ae(e.wr,n.wr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Qe(be.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new AI(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new be(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new be(n,0),s=new be(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const l=this.Dr(a.wr);i.push(l)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(ae);return n.forEach(s=>{const i=new be(s,0),a=new be(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],l=>{r=r.add(l.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const a=new be(new W(i),0);let l=new Qe(ae);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.wr)),!0)},a),O.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,s=>{const i=new be(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new be(n,0),s=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.Mr=e,this.docs=function(){return new Ae(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():st.newInvalidDocument(n))}getEntries(e,n){let r=Tn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():st.newInvalidDocument(s))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Tn();const a=n.path,l=new W(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||qT($T(f),r)<=0||(s.has(f.key)||yl(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){G()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new a2(this)}getSize(e){return O.resolve(this.size)}}class a2 extends ZI{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.persistence=e,this.Nr=new Ns(n=>od(n),ad),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fd,this.targetCount=0,this.kr=Is.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Is(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),O.waitFor(i).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new nd(0),this.Kr=!1,this.Kr=!0,this.$r=new s2,this.referenceDelegate=e(this),this.Ur=new l2(this),this.indexManager=new XI,this.remoteDocumentCache=function(s){return new o2(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new GI(n),this.Gr=new n2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new r2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new i2(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new c2(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class c2 extends WT{constructor(e){super(),this.currentSequenceNumber=e}}class pd{constructor(e){this.persistence=e,this.Jr=new fd,this.Yr=null}static Zr(e){return new pd(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{const s=W.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ne(),s=ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new md(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return m1()?8:QT(f1())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new h2;return this.Xi(e,n,a).next(l=>{if(i.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ni()<=se.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",zr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(ni()<=se.DEBUG&&q("QueryEngine","Query:",zr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ni()<=se.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",zr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,en(n))):O.resolve())}Yi(e,n){if(fm(n))return O.resolve(null);let r=en(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=qc(n,null,"F"),r=en(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ne(...i);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,a,u.readTime)?this.Yi(e,qc(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return fm(n)||s.isEqual(X.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?O.resolve(null):(ni()<=se.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zr(n)),this.rs(e,a,n,BT(s,-1)).next(l=>l))})}ts(e,n){let r=new Qe(N_(e));return n.forEach((s,i)=>{yl(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ni()<=se.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",zr(n)),this.Ji.getDocumentsMatchingQuery(e,n,Xn.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ae(ae),this._s=new Ns(i=>od(i),ad),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new t2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function p2(t,e,n,r){return new f2(t,e,n,r)}async function tv(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=ne();for(const h of s){a.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:l}))})})}function m2(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const g=h.batch,v=g.keys();let T=O.resolve();return v.forEach(k=>{T=T.next(()=>f.getEntry(u,k)).next(x=>{const D=h.docVersions.get(k);ce(D!==null),x.version.compareTo(D)<0&&(g.applyToRemoteDocument(x,h),x.isValidDocument()&&(x.setReadTime(h.commitVersion),f.addEntry(x)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ne();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function nv(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function g2(t,e){const n=J(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,g)=>{const v=s.get(g);if(!v)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,g)));let T=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Ge.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,r)),s=s.insert(g,T),function(x,D,A){return x.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(v,T,f)&&l.push(n.Ur.updateTargetData(i,T))});let u=Tn(),h=ne();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(y2(i,a,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(X.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return O.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function y2(t,e,n){let r=ne(),s=ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Tn();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function _2(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function v2(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,O.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new On(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Gc(t,e,n){const r=J(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!io(a))throw a;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Sm(t,e,n){const r=J(t);let s=X.min(),i=ne();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,f){const g=J(u),v=g._s.get(f);return v!==void 0?O.resolve(g.os.get(v)):g.Ur.getTargetData(h,f)}(r,a,en(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:X.min(),n?i:ne())).next(l=>(E2(r,hI(e),l),{documents:l,Ts:i})))}function E2(t,e,n){let r=t.us.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Am{constructor(){this.activeTargetIds=yI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class w2{constructor(){this.so=new Am,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Am,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo=null;function Du(){return Jo===null?Jo=function(){return 268435456+Math.round(2147483648*Math.random())}():Jo++,"0x"+Jo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tt="WebChannelConnection";class A2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const l=Du(),u=this.xo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,a),this.No(n,u,h,s).then(f=>(q("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw _s("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,a,l){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=I2[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Du();return new Promise((a,l)=>{const u=new p_;u.setWithCredentials(!0),u.listenOnce(m_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case da.NO_ERROR:const f=u.getResponseJson();q(tt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case da.TIMEOUT:q(tt,`RPC '${e}' ${i} timed out`),l(new B(L.DEADLINE_EXCEEDED,"Request time out"));break;case da.HTTP_ERROR:const g=u.getStatus();if(q(tt,`RPC '${e}' ${i} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const T=v==null?void 0:v.error;if(T&&T.status&&T.message){const k=function(D){const A=D.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(A)>=0?A:L.UNKNOWN}(T.status);l(new B(k,T.message))}else l(new B(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new B(L.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{q(tt,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);q(tt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Du(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=__(),l=y_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");q(tt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const g=a.createWebChannel(f,u);let v=!1,T=!1;const k=new S2({Io:D=>{T?q(tt,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(v||(q(tt,`Opening RPC '${e}' stream ${s} transport.`),g.open(),v=!0),q(tt,`RPC '${e}' stream ${s} sending:`,D),g.send(D))},To:()=>g.close()}),x=(D,A,I)=>{D.listen(A,C=>{try{I(C)}catch(N){setTimeout(()=>{throw N},0)}})};return x(g,li.EventType.OPEN,()=>{T||(q(tt,`RPC '${e}' stream ${s} transport opened.`),k.yo())}),x(g,li.EventType.CLOSE,()=>{T||(T=!0,q(tt,`RPC '${e}' stream ${s} transport closed`),k.So())}),x(g,li.EventType.ERROR,D=>{T||(T=!0,_s(tt,`RPC '${e}' stream ${s} transport errored:`,D),k.So(new B(L.UNAVAILABLE,"The operation could not be completed")))}),x(g,li.EventType.MESSAGE,D=>{var A;if(!T){const I=D.data[0];ce(!!I);const C=I,N=C.error||((A=C[0])===null||A===void 0?void 0:A.error);if(N){q(tt,`RPC '${e}' stream ${s} received error:`,N);const F=N.status;let j=function(_){const y=Ne[_];if(y!==void 0)return H_(y)}(F),w=N.message;j===void 0&&(j=L.INTERNAL,w="Unknown error status: "+F+" with message "+N.message),T=!0,k.So(new B(j,w)),g.close()}else q(tt,`RPC '${e}' stream ${s} received:`,I),k.bo(I)}}),x(l,g_.STAT_EVENT,D=>{D.stat===jc.PROXY?q(tt,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===jc.NOPROXY&&q(tt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function Mu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t){return new LI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,n,r,s,i,a,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new rv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(wn(n.toString()),wn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new B(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class R2 extends sv{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=jI(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?X.min():a.readTime?tn(a.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Kc(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=Bc(u)?{documents:zI(i,u)}:{query:BI(i,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=K_(i,a.resumeToken);const h=Hc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(X.min())>0){l.readTime=Ka(i,a.snapshotVersion.toTimestamp());const h=Hc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=qI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Kc(this.serializer),n.removeTarget=e,this.a_(n)}}class C2 extends sv{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ce(!!e.streamToken),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=UI(e.writeResults,e.commitTime),r=tn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Kc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bI(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new B(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Wc(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(L.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,Wc(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new B(L.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class P2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(wn(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{Dr(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=J(u);h.L_.add(4),await lo(h),h.q_.set("Unknown"),h.L_.delete(4),await Il(h)}(this))})}),this.q_=new P2(r,s)}}async function Il(t){if(Dr(t))for(const e of t.B_)await e(!0)}async function lo(t){for(const e of t.B_)await e(!1)}function iv(t,e){const n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),vd(n)?_d(n):Ds(n).r_()&&yd(n,e))}function gd(t,e){const n=J(t),r=Ds(n);n.N_.delete(e),r.r_()&&ov(n,e),n.N_.size===0&&(r.r_()?r.o_():Dr(n)&&n.q_.set("Unknown"))}function yd(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ds(t).A_(e)}function ov(t,e){t.Q_.xe(e),Ds(t).R_(e)}function _d(t){t.Q_=new VI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ds(t).start(),t.q_.v_()}function vd(t){return Dr(t)&&!Ds(t).n_()&&t.N_.size>0}function Dr(t){return J(t).L_.size===0}function av(t){t.Q_=void 0}async function V2(t){t.q_.set("Online")}async function N2(t){t.N_.forEach((e,n)=>{yd(t,e)})}async function D2(t,e){av(t),vd(t)?(t.q_.M_(e),_d(t)):t.q_.set("Unknown")}async function M2(t,e,n){if(t.q_.set("Online"),e instanceof Q_&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ga(t,r)}else if(e instanceof ma?t.Q_.Ke(e):e instanceof W_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{const r=await nv(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Q_.rt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(h);f&&i.N_.set(h,f.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(Ge.EMPTY_BYTE_STRING,f.snapshotVersion)),ov(i,u);const g=new On(f.target,u,h,f.sequenceNumber);yd(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await Ga(t,r)}}async function Ga(t,e,n){if(!io(e))throw e;t.L_.add(1),await lo(t),t.q_.set("Offline"),n||(n=()=>nv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Il(t)})}function lv(t,e){return e().catch(n=>Ga(t,n,e))}async function Sl(t){const e=J(t),n=Zn(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;L2(e);)try{const s=await _2(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,O2(e,s)}catch(s){await Ga(e,s)}uv(e)&&cv(e)}function L2(t){return Dr(t)&&t.O_.length<10}function O2(t,e){t.O_.push(e);const n=Zn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function uv(t){return Dr(t)&&!Zn(t).n_()&&t.O_.length>0}function cv(t){Zn(t).start()}async function F2(t){Zn(t).p_()}async function j2(t){const e=Zn(t);for(const n of t.O_)e.m_(n.mutations)}async function b2(t,e,n){const r=t.O_.shift(),s=cd.from(r,e,n);await lv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Sl(t)}async function U2(t,e){e&&Zn(t).V_&&await async function(r,s){if(function(a){return kI(a)&&a!==L.ABORTED}(s.code)){const i=r.O_.shift();Zn(r).s_(),await lv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Sl(r)}}(t,e),uv(t)&&cv(t)}async function Cm(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=Dr(n);n.L_.add(3),await lo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Il(n)}async function z2(t,e){const n=J(t);e?(n.L_.delete(2),await Il(n)):e||(n.L_.add(2),await lo(n),n.q_.set("Unknown"))}function Ds(t){return t.K_||(t.K_=function(n,r,s){const i=J(n);return i.w_(),new R2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:V2.bind(null,t),Ro:N2.bind(null,t),mo:D2.bind(null,t),d_:M2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),vd(t)?_d(t):t.q_.set("Unknown")):(await t.K_.stop(),av(t))})),t.K_}function Zn(t){return t.U_||(t.U_=function(n,r,s){const i=J(n);return i.w_(),new C2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:F2.bind(null,t),mo:U2.bind(null,t),f_:j2.bind(null,t),g_:b2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Sl(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Ed(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wd(t,e){if(wn("AsyncQueue",`${e}: ${t}`),io(t))return new B(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=ui(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new cs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new cs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(){this.W_=new Ae(W.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ss{constructor(e,n,r,s,i,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ss(e,n,cs.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class $2{constructor(){this.queries=Pm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=J(n),i=s.queries;s.queries=Pm(),i.forEach((a,l)=>{for(const u of l.j_)u.onError(r)})})(this,new B(L.ABORTED,"Firestore shutting down"))}}function Pm(){return new Ns(t=>V_(t),gl)}async function hv(t,e){const n=J(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new B2,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=wd(a,`Initialization of query '${zr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Td(n)}async function dv(t,e){const n=J(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function q2(t,e){const n=J(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.j_)l.X_(s)&&(r=!0);a.z_=s}}r&&Td(n)}function H2(t,e,n){const r=J(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Td(t){t.Y_.forEach(e=>{e.next()})}var Yc,xm;(xm=Yc||(Yc={})).ea="default",xm.Cache="cache";class fv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ss(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ss.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Yc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e){this.key=e}}class mv{constructor(e){this.key=e}}class W2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=N_(e),this.Ra=new cs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new km,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,g)=>{const v=s.get(f),T=yl(this.query,g)?g:null,k=!!v&&this.mutatedKeys.has(v.key),x=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let D=!1;v&&T?v.data.isEqual(T.data)?k!==x&&(r.track({type:3,doc:T}),D=!0):this.ga(v,T)||(r.track({type:2,doc:T}),D=!0,(u&&this.Aa(T,u)>0||h&&this.Aa(T,h)<0)&&(l=!0)):!v&&T?(r.track({type:0,doc:T}),D=!0):v&&!T&&(r.track({type:1,doc:v}),D=!0,(u||h)&&(l=!0)),D&&(T?(a=a.add(T),i=x?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,g)=>function(T,k){const x=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return x(T)-x(k)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,a.length!==0||h?{snapshot:new Ss(this.query,e.Ra,i,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new km,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new mv(r))}),this.da.forEach(r=>{e.has(r)||n.push(new pv(r))}),n}ba(e){this.Ta=e.Ts,this.da=ne();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ss.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Q2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class K2{constructor(e){this.key=e,this.va=!1}}class G2{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ns(l=>V_(l),gl),this.Ma=new Map,this.xa=new Set,this.Oa=new Ae(W.comparator),this.Na=new Map,this.La=new fd,this.Ba={},this.ka=new Map,this.qa=Is.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Y2(t,e,n=!0){const r=wv(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await gv(r,e,n,!0),s}async function X2(t,e){const n=wv(t);await gv(n,e,!0,!1)}async function gv(t,e,n,r){const s=await v2(t.localStore,en(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await J2(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&iv(t.remoteStore,s),l}async function J2(t,e,n,r,s){t.Ka=(g,v,T)=>async function(x,D,A,I){let C=D.view.ma(A);C.ns&&(C=await Sm(x.localStore,D.query,!1).then(({documents:w})=>D.view.ma(w,C)));const N=I&&I.targetChanges.get(D.targetId),F=I&&I.targetMismatches.get(D.targetId)!=null,j=D.view.applyChanges(C,x.isPrimaryClient,N,F);return Nm(x,D.targetId,j.wa),j.snapshot}(t,g,v,T);const i=await Sm(t.localStore,e,!0),a=new W2(e,i.Ts),l=a.ma(i.documents),u=ao.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=a.applyChanges(l,t.isPrimaryClient,u);Nm(t,n,h.wa);const f=new Q2(e,n,a);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function Z2(t,e,n){const r=J(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!gl(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Gc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&gd(r.remoteStore,s.targetId),Xc(r,s.targetId)}).catch(so)):(Xc(r,s.targetId),await Gc(r.localStore,s.targetId,!0))}async function eS(t,e){const n=J(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gd(n.remoteStore,r.targetId))}async function tS(t,e,n){const r=lS(t);try{const s=await function(a,l){const u=J(a),h=je.now(),f=l.reduce((T,k)=>T.add(k.key),ne());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let k=Tn(),x=ne();return u.cs.getEntries(T,f).next(D=>{k=D,k.forEach((A,I)=>{I.isValidDocument()||(x=x.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,k)).next(D=>{g=D;const A=[];for(const I of l){const C=II(I,g.get(I.key).overlayedDocument);C!=null&&A.push(new sr(I.key,C,I_(C.value.mapValue),_t.exists(!0)))}return u.mutationQueue.addMutationBatch(T,h,A,l)}).next(D=>{v=D;const A=D.applyToLocalDocumentSet(g,x);return u.documentOverlayCache.saveOverlays(T,D.batchId,A)})}).then(()=>({batchId:v.batchId,changes:M_(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Ba[a.currentUser.toKey()];h||(h=new Ae(ae)),h=h.insert(l,u),a.Ba[a.currentUser.toKey()]=h}(r,s.batchId,n),await uo(r,s.changes),await Sl(r.remoteStore)}catch(s){const i=wd(s,"Failed to persist write");n.reject(i)}}async function yv(t,e){const n=J(t);try{const r=await g2(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?ce(a.va):s.removedDocuments.size>0&&(ce(a.va),a.va=!1))}),await uo(n,r,e)}catch(r){await so(r)}}function Vm(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const l=a.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=J(a);u.onlineState=l;let h=!1;u.queries.forEach((f,g)=>{for(const v of g.j_)v.Z_(l)&&(h=!0)}),h&&Td(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nS(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new Ae(W.comparator);a=a.insert(i,st.newNoDocument(i,X.min()));const l=ne().add(i),u=new wl(X.min(),new Map,new Ae(ae),a,l);await yv(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Id(r)}else await Gc(r.localStore,e,!1).then(()=>Xc(r,e,n)).catch(so)}async function rS(t,e){const n=J(t),r=e.batch.batchId;try{const s=await m2(n.localStore,e);vv(n,r,null),_v(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await uo(n,s)}catch(s){await so(s)}}async function sS(t,e,n){const r=J(t);try{const s=await function(a,l){const u=J(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(ce(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);vv(r,e,n),_v(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await uo(r,s)}catch(s){await so(s)}}function _v(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function vv(t,e,n){const r=J(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Xc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Ev(t,r)})}function Ev(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(gd(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Id(t))}function Nm(t,e,n){for(const r of n)r instanceof pv?(t.La.addReference(r.key,e),iS(t,r)):r instanceof mv?(q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Ev(t,r.key)):G()}function iS(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(r),Id(t))}function Id(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new W(ve.fromString(e)),r=t.qa.next();t.Na.set(r,new K2(n)),t.Oa=t.Oa.insert(n,r),iv(t.remoteStore,new On(en(ld(n.path)),r,"TargetPurposeLimboResolution",nd.oe))}}async function uo(t,e,n){const r=J(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{a.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=md.Wi(u.targetId,h);i.push(g)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,h){const f=J(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>O.forEach(h,v=>O.forEach(v.$i,T=>f.persistence.referenceDelegate.addReference(g,v.targetId,T)).next(()=>O.forEach(v.Ui,T=>f.persistence.referenceDelegate.removeReference(g,v.targetId,T)))))}catch(g){if(!io(g))throw g;q("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const T=f.os.get(v),k=T.snapshotVersion,x=T.withLastLimboFreeSnapshotVersion(k);f.os=f.os.insert(v,x)}}}(r.localStore,i))}async function oS(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await tv(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new B(L.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await uo(n,r.hs)}}function aS(t,e){const n=J(t),r=n.Na.get(e);if(r&&r.va)return ne().add(r.key);{let s=ne();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function wv(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nS.bind(null,e),e.Ca.d_=q2.bind(null,e.eventManager),e.Ca.$a=H2.bind(null,e.eventManager),e}function lS(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sS.bind(null,e),e}class Ya{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return p2(this.persistence,new d2,e.initialUser,this.serializer)}Ga(e){return new u2(pd.Zr,this.serializer)}Wa(e){return new w2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ya.provider={build:()=>new Ya};class Jc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=oS.bind(null,this.syncEngine),await z2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $2}()}createDatastore(e){const n=Tl(e.databaseInfo.databaseId),r=function(i){return new A2(i)}(e.databaseInfo);return function(i,a,l,u){return new k2(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new x2(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Vm(this.syncEngine,n,0),function(){return Rm.D()?new Rm:new T2}())}createSyncEngine(e,n){return function(s,i,a,l,u,h,f){const g=new G2(s,i,a,l,u,h);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=J(s);q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await lo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Jc.provider={build:()=>new Jc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):wn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=nt.UNAUTHENTICATED,this.clientId=E_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{q("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(q("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=wd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Lu(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await tv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Dm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await cS(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Cm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Cm(e.remoteStore,s)),t._onlineComponents=e}async function cS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;_s("Error using user provided cache. Falling back to memory cache: "+n),await Lu(t,new Ya)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await Lu(t,new Ya);return t._offlineComponents}async function Iv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await Dm(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await Dm(t,new Jc))),t._onlineComponents}function hS(t){return Iv(t).then(e=>e.syncEngine)}async function Zc(t){const e=await Iv(t),n=e.eventManager;return n.onListen=Y2.bind(null,e.syncEngine),n.onUnlisten=Z2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=X2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=eS.bind(null,e.syncEngine),n}function dS(t,e,n={}){const r=new Qn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,h){const f=new Tv({next:v=>{f.Za(),a.enqueueAndForget(()=>dv(i,g)),v.fromCache&&u.source==="server"?h.reject(new B(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new fv(l,f,{includeMetadataChanges:!0,_a:!0});return hv(i,g)}(await Zc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t,e,n){if(!n)throw new B(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fS(t,e,n,r){if(e===!0&&r===!0)throw new B(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Lm(t){if(!W.isDocumentKey(t))throw new B(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Om(t){if(W.isDocumentKey(t))throw new B(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Al(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G()}function Wt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Al(t);throw new B(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new DT;switch(r.type){case"firstParty":return new FT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Mm.get(n);r&&(q("ComponentProvider","Removing Datastore"),Mm.delete(n),r.terminate())}(this),Promise.resolve()}}function pS(t,e,n,r={}){var s;const i=(t=Wt(t,Rl))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&_s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=nt.MOCK_USER;else{l=d1(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new B(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new nt(h)}t._authCredentials=new MT(new v_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ir(this.firestore,e,this._query)}}class vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}}class Kn extends ir{constructor(e,n,r){super(e,n,ld(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new W(e))}withConverter(e){return new Kn(this.firestore,e,this._path)}}function An(t,e,...n){if(t=Ot(t),Av("collection","path",e),t instanceof Rl){const r=ve.fromString(e,...n);return Om(r),new Kn(t,null,r)}{if(!(t instanceof vt||t instanceof Kn))throw new B(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Om(r),new Kn(t.firestore,null,r)}}function le(t,e,...n){if(t=Ot(t),arguments.length===1&&(e=E_.newId()),Av("doc","path",e),t instanceof Rl){const r=ve.fromString(e,...n);return Lm(r),new vt(t,null,new W(r))}{if(!(t instanceof vt||t instanceof Kn))throw new B(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Lm(r),new vt(t.firestore,t instanceof Kn?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new rv(this,"async_queue_retry"),this.Vu=()=>{const r=Mu();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Mu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Mu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Qn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!io(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw wn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Ed.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&G()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function bm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class er extends Rl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new jm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jm(e),this._firestoreClient=void 0,await e}}}function mS(t,e){const n=typeof t=="object"?t:wT(),r=typeof t=="string"?t:"(default)",s=yT(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=c1("firestore");i&&pS(s,...i)}return s}function Cl(t){if(t._terminated)throw new B(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gS(t),t._firestoreClient}function gS(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,f){return new YT(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Sv(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new uS(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this._byteString=e}static fromBase64String(e){try{return new As(Ge.fromBase64String(e))}catch(n){throw new B(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new As(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=/^__.*__$/;class _S{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new sr(e,this.data,this.fieldMask,n,this.fieldTransforms):new oo(e,this.data,n,this.fieldTransforms)}}class Rv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new sr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Cv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}class kl{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new kl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xa(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Cv(this.Cu)&&yS.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class vS{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tl(e)}Qu(e,n,r,s=!1){return new kl({Cu:e,methodName:n,qu:r,path:He.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pl(t){const e=t._freezeSettings(),n=Tl(t._databaseId);return new vS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kv(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);kd("Data must be an object, but it was:",a,r);const l=Vv(r,a);let u,h;if(i.merge)u=new St(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const v=eh(e,g,n);if(!a.contains(v))throw new B(L.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Dv(f,v)||f.push(v)}u=new St(f),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new _S(new ft(l),u,h)}class fo extends ho{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fo}}function ES(t,e,n){return new kl({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Rd extends ho{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=ES(this,e,!0),r=this.Ku.map(i=>Ms(i,n)),s=new Ts(r);return new B_(e.path,s)}isEqual(e){return e instanceof Rd&&Ba(this.Ku,e.Ku)}}class Cd extends ho{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Ji(e.serializer,F_(e.serializer,this.$u));return new B_(e.path,n)}isEqual(e){return e instanceof Cd&&this.$u===e.$u}}function Pv(t,e,n,r){const s=t.Qu(1,e,n);kd("Data must be an object, but it was:",s,r);const i=[],a=ft.empty();Nr(r,(u,h)=>{const f=Pd(e,u,n);h=Ot(h);const g=s.Nu(f);if(h instanceof fo)i.push(f);else{const v=Ms(h,g);v!=null&&(i.push(f),a.set(f,v))}});const l=new St(i);return new Rv(a,l,s.fieldTransforms)}function xv(t,e,n,r,s,i){const a=t.Qu(1,e,n),l=[eh(e,r,n)],u=[s];if(i.length%2!=0)throw new B(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)l.push(eh(e,i[v])),u.push(i[v+1]);const h=[],f=ft.empty();for(let v=l.length-1;v>=0;--v)if(!Dv(h,l[v])){const T=l[v];let k=u[v];k=Ot(k);const x=a.Nu(T);if(k instanceof fo)h.push(T);else{const D=Ms(k,x);D!=null&&(h.push(T),f.set(T,D))}}const g=new St(h);return new Rv(f,g,a.fieldTransforms)}function wS(t,e,n,r=!1){return Ms(n,t.Qu(r?4:3,e))}function Ms(t,e){if(Nv(t=Ot(t)))return kd("Unsupported field value:",e,t),Vv(t,e);if(t instanceof ho)return function(r,s){if(!Cv(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=Ms(l,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return F_(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=je.fromDate(r);return{timestampValue:Ka(s.serializer,i)}}if(r instanceof je){const i=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ka(s.serializer,i)}}if(r instanceof Sd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof As)return{bytesValue:K_(s.serializer,r._byteString)};if(r instanceof vt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:dd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ad)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return ud(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Al(r)}`)}(t,e)}function Vv(t,e){const n={};return w_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nr(t,(r,s)=>{const i=Ms(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Nv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof Sd||t instanceof As||t instanceof vt||t instanceof ho||t instanceof Ad)}function kd(t,e,n){if(!Nv(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Al(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function eh(t,e,n){if((e=Ot(e))instanceof co)return e._internalPath;if(typeof e=="string")return Pd(t,e);throw Xa("Field path arguments must be of type string or ",t,!1,void 0,n)}const TS=new RegExp("[~\\*/\\[\\]]");function Pd(t,e,n){if(e.search(TS)>=0)throw Xa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new co(...e.split("."))._internalPath}catch{throw Xa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xa(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new B(L.INVALID_ARGUMENT,l+t+u)}function Dv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class IS extends Mv{data(){return super.data()}}function xl(t,e){return typeof e=="string"?Pd(t,e):e instanceof co?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xd{}class Ov extends xd{}function $t(t,e,...n){let r=[];e instanceof xd&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof Vd).length,l=i.filter(u=>u instanceof Vl).length;if(a>1||a>0&&l>0)throw new B(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Vl extends Ov{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Vl(e,n,r)}_apply(e){const n=this._parse(e);return Fv(e._query,n),new ir(e.firestore,e.converter,$c(e._query,n))}_parse(e){const n=Pl(e.firestore);return function(i,a,l,u,h,f,g){let v;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new B(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){zm(g,f);const T=[];for(const k of g)T.push(Um(u,i,k));v={arrayValue:{values:T}}}else v=Um(u,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||zm(g,f),v=wS(l,a,g,f==="in"||f==="not-in");return Me.create(h,f,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ri(t,e,n){const r=e,s=xl("where",t);return Vl._create(s,r,n)}class Vd extends xd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Kt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)Fv(a,u),a=$c(a,u)}(e._query,n),new ir(e.firestore,e.converter,$c(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Nd extends Ov{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Nd(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new B(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yi(i,a)}(e._query,this._field,this._direction);return new ir(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Vs(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Mr(t,e="asc"){const n=e,r=xl("orderBy",t);return Nd._create(r,n)}function Um(t,e,n){if(typeof(n=Ot(n))=="string"){if(n==="")throw new B(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x_(e)&&n.indexOf("/")!==-1)throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!W.isDocumentKey(r))throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return am(t,new W(r))}if(n instanceof vt)return am(t,n._key);throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Al(n)}.`)}function zm(t,e){if(!Array.isArray(t)||t.length===0)throw new B(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Fv(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class SS{convertValue(e,n="none"){switch(Pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Nr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>xe(a.doubleValue));return new Ad(i)}convertGeoPoint(e){return new Sd(xe(e.latitude),xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qi(e));default:return null}}convertTimestamp(e){const n=Jn(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);ce(ev(r));const s=new Ki(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||wn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bv extends Mv{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ga(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ga extends bv{data(e={}){return super.data(e)}}class Uv{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new hi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ga(this._firestore,this._userDataWriter,r.key,r,new hi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new ga(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new ga(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:AS(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function AS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}class Dd extends SS{constructor(e){super(),this.firestore=e}convertBytes(e){return new As(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}function qr(t){t=Wt(t,ir);const e=Wt(t.firestore,er),n=Cl(e),r=new Dd(e);return Lv(t._query),dS(n,t._query).then(s=>new Uv(e,r,t,s))}function Tt(t,e,n,...r){t=Wt(t,vt);const s=Wt(t.firestore,er),i=Pl(s);let a;return a=typeof(e=Ot(e))=="string"||e instanceof co?xv(i,"updateDoc",t._key,e,n,r):Pv(i,"updateDoc",t._key,e),Nl(s,[a.toMutation(t._key,_t.exists(!0))])}function Lr(t){return Nl(Wt(t.firestore,er),[new El(t._key,_t.none())])}function In(t,e){const n=Wt(t.firestore,er),r=le(t),s=jv(t.converter,e);return Nl(n,[kv(Pl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,_t.exists(!1))]).then(()=>r)}function or(t,...e){var n,r,s;t=Ot(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||bm(e[a])||(i=e[a],a++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(bm(e[a])){const g=e[a];e[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[a+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[a+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let u,h,f;if(t instanceof vt)h=Wt(t.firestore,er),f=ld(t._key.path),u={next:g=>{e[a]&&e[a](RS(h,t,g))},error:e[a+1],complete:e[a+2]};else{const g=Wt(t,ir);h=Wt(g.firestore,er),f=g._query;const v=new Dd(h);u={next:T=>{e[a]&&e[a](new Uv(h,v,g,T))},error:e[a+1],complete:e[a+2]},Lv(t._query)}return function(v,T,k,x){const D=new Tv(x),A=new fv(T,D,k);return v.asyncQueue.enqueueAndForget(async()=>hv(await Zc(v),A)),()=>{D.Za(),v.asyncQueue.enqueueAndForget(async()=>dv(await Zc(v),A))}}(Cl(h),f,l,u)}function Nl(t,e){return function(r,s){const i=new Qn;return r.asyncQueue.enqueueAndForget(async()=>tS(await hS(r),s,i)),i.promise}(Cl(t),e)}function RS(t,e,n){const r=n.docs.get(e._key),s=new Dd(t);return new bv(t,s,e._key,r,new hi(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Pl(e)}set(e,n,r){this._verifyNotCommitted();const s=Ou(e,this._firestore),i=jv(s.converter,n,r),a=kv(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,_t.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Ou(e,this._firestore);let a;return a=typeof(n=Ot(n))=="string"||n instanceof co?xv(this._dataReader,"WriteBatch.update",i._key,n,r,s):Pv(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(a.toMutation(i._key,_t.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ou(e,this._firestore);return this._mutations=this._mutations.concat(new El(n._key,_t.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ou(t,e){if((t=Ot(t)).firestore!==e)throw new B(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(){return new fo("deleteField")}function PS(...t){return new Rd("arrayUnion",t)}function xS(t){return new Cd("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t){return Cl(t=Wt(t,er)),new CS(t,e=>Nl(t,e))}(function(e,n=!0){(function(s){xs=s})(ET),qa(new qi("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new er(new LT(r.getProvider("auth-internal")),new bT(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new B(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ki(h.options.projectId,f)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),us(nm,"4.7.3",e),us(nm,"4.7.3","esm2017")})();const VS={apiKey:"AIzaSyB6-Z_XRfCHWQ3ujGzkj4ck1WtI9gX6O_k",authDomain:"cafestesiaapp.firebaseapp.com",projectId:"cafestesiaapp",storageBucket:"cafestesiaapp.firebasestorage.app",messagingSenderId:"639191492553",appId:"1:639191492553:web:dc6ce00f5622dc686faa18",measurementId:"G-Z52JP10C1R"},NS=c_(VS),Y=mS(NS),cn=An(Y,"tasks"),DS=An(Y,"task_templates"),MS=()=>{const[t,e]=H.useState([]);H.useEffect(()=>{const T=$t(cn),k=or(T,x=>{const D=x.docs.map(A=>({id:A.id,...A.data()}));e(D)},x=>{console.error("Error fetching Kanban tasks:",x)});return()=>k()},[]);const n=async(T,k)=>{const x=le(Y,"tasks",T);try{await Tt(x,{status:k})}catch(D){console.error("Error updating task status:",D)}},r=async T=>{try{await In(cn,{...T,status:"todo"})}catch(k){console.error("Error adding task:",k)}},s=async T=>{try{const k=Pt(Y),x=`rec-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;T.forEach(D=>{const A=le(cn);k.set(A,{...D,status:"todo",recurrenceId:x})}),await k.commit()}catch(k){console.error("Error adding multiple tasks:",k)}},i=async T=>{const{id:k,...x}=T,D=le(Y,"tasks",k),A=x;"recurrenceId"in x||(A.recurrenceId=kS());try{await Tt(D,A)}catch(I){console.error("Error updating task:",I)}},a=async T=>{const k=le(Y,"tasks",T);try{await Lr(k)}catch(x){console.error("Error deleting task:",x)}},l=async(T,k)=>{if(!T.recurrenceId||!T.date)return;const x=$t(cn,ri("recurrenceId","==",T.recurrenceId),ri("date",">=",T.date));try{const D=await qr(x),A=Pt(Y);D.forEach(I=>{const C=le(Y,"tasks",I.id),{recurrenceId:N,...F}=k;A.update(C,F)}),await A.commit()}catch(D){console.error("Error updating future tasks:",D)}},u=async T=>{if(!T.recurrenceId||!T.date)return;const k=$t(cn,ri("recurrenceId","==",T.recurrenceId),ri("date",">=",T.date));try{const x=await qr(k),D=Pt(Y);x.forEach(A=>{D.delete(le(Y,"tasks",A.id))}),await D.commit()}catch(x){console.error("Error deleting future tasks:",x)}},h=async(T,k)=>{const x=t.find(C=>C.id===T),D=t.find(C=>C.id===k);if(!x||!D||!x.time||!D.time||x.date!==D.date){console.error("Cannot reorder tasks: invalid tasks or different dates.");return}const A=le(Y,"tasks",T),I=le(Y,"tasks",k);try{const C=Pt(Y);C.update(A,{time:D.time}),C.update(I,{time:x.time}),await C.commit()}catch(C){console.error("Error reordering tasks:",C)}},f=async()=>{try{const T=await qr(cn),k=Pt(Y);T.docs.forEach(x=>{k.delete(x.ref)}),await k.commit(),console.log("All tasks cleared.")}catch(T){throw console.error("Error clearing tasks:",T),T}},g=async()=>{try{await f();const T=Pt(Y);e1.forEach(k=>{const x=le(cn);T.set(x,k)}),await T.commit(),console.log("Tasks reset to default.")}catch(T){throw console.error("Error resetting tasks:",T),T}},v=H.useCallback(async T=>{try{const[k,x,D]=T.split("-").map(Number),I=new Date(k,x-1,D).getDay(),C=await qr(DS);if(C.empty)return;const N=$t(cn,ri("date","==",T)),F=await qr(N),j=new Set(F.docs.map(_=>_.data().templateId).filter(_=>!!_)),w=Pt(Y);let m=0;C.forEach(_=>{var R;const y={id:_.id,..._.data()};if(y.frequencyDays.includes(I)&&!j.has(y.id)){const P=((R=y.customAssignments)==null?void 0:R[String(I)])||y.defaultEmployee,E={text:y.title,employee:P,date:T,time:y.time,duration:y.duration,shift:y.shift,zone:y.zone,isCritical:y.isCritical,status:"todo",subtasks:y.subtasks||[],notes:y.notes||"",templateId:y.id,addedBy:"Sistema (Rutina)"},he=le(cn);w.set(he,E),m++}}),m>0&&(await w.commit(),console.log(`Generated ${m} routine tasks for ${T}`))}catch(k){console.error("Error generating daily routines:",k)}},[]);return{tasks:t,updateTaskStatus:n,addTask:r,addMultipleTasks:s,updateTask:i,deleteTask:a,updateFutureTasks:l,deleteFutureTasks:u,reorderDailyTasks:h,clearAllTasks:f,resetTasksToDefault:g,generateDailyRoutines:v}},th=An(Y,"inventory"),LS=async()=>{console.log("Seeding initial inventory to Firestore...");const t=Pt(Y);n_.forEach(e=>{const n=le(th);t.set(n,{...e,purchaseHistory:[]})}),await t.commit(),console.log("Initial inventory seeded.")},OS=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const a=$t(th,Mr("name")),l=or(a,u=>{if(u.empty&&n_.length>0){LS();return}const h=u.docs.map(f=>({id:f.id,...f.data()}));e(h)},u=>{console.error("Error fetching inventory items:",u)});return()=>l()},[]),{items:t,addItem:async a=>{try{await In(th,{...a,purchaseHistory:[]})}catch(l){console.error("Error adding inventory item:",l)}},updateItem:async a=>{const{id:l,...u}=a,h=le(Y,"inventory",l);try{await Tt(h,u)}catch(f){console.error("Error updating item:",f)}},deleteItem:async a=>{const l=le(Y,"inventory",a);try{await Lr(l)}catch(u){console.error("Error deleting item:",u)}},recordStockChange:async({itemId:a,change:l,purchaseDetails:u})=>{const h=le(Y,"inventory",a);try{const f={currentStock:xS(l)};if(u&&l>0){const g={id:`pur-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,date:new Date().toISOString(),quantity:l,totalPrice:u.totalPrice,providerName:u.providerName};f.purchaseHistory=PS(g)}await Tt(h,f)}catch(f){console.error("Error recording stock change:",f)}}}},nh=An(Y,"providers"),zv=[{name:"Proveedor A"},{name:"Proveedor B"},{name:"Proveedor C"},{name:"Supermercado"},{name:"Tostador Local"}],FS=async()=>{console.log("Seeding initial providers to Firestore...");const t=Pt(Y);zv.forEach(e=>{const n=le(nh);t.set(n,e)}),await t.commit(),console.log("Initial providers seeded.")},jS=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const i=$t(nh,Mr("name")),a=or(i,l=>{if(l.empty&&zv.length>0){FS();return}const u=l.docs.map(h=>({id:h.id,...h.data()}));e(u)},l=>{console.error("Error fetching providers:",l)});return()=>a()},[]),{providers:t,addProvider:async i=>{try{await In(nh,i)}catch(a){console.error("Error adding provider:",a)}},updateProvider:async i=>{const{id:a,...l}=i,u=le(Y,"providers",a);try{await Tt(u,l)}catch(h){console.error("Error updating provider:",h)}},deleteProvider:async i=>{const a=le(Y,"providers",i);try{await Lr(a)}catch(l){console.error("Error deleting provider:",l)}}}},Fu="productionSoundMuted",ju={start:"/assets/sounds/start.mp3",warning:"/assets/sounds/warning.mp3",alarm:"/assets/sounds/alarm.mp3",success:"/assets/sounds/success.mp3",notification:"/assets/sounds/notification.mp3"};let Ce=null,di={},fi=null;if(typeof window<"u"){if(!window.cafestesiaAudioContext)try{window.cafestesiaAudioContext=new(window.AudioContext||window.webkitAudioContext)}catch(t){console.error("Web Audio API is not supported in this browser.",t)}if(Ce=window.cafestesiaAudioContext||null,Ce&&!window.cafestesiaGainNode){const t=Ce.createGain();t.connect(Ce.destination),window.cafestesiaGainNode=t}fi=window.cafestesiaGainNode||null,window.cafestesiaAudioBuffers||(window.cafestesiaAudioBuffers={}),di=window.cafestesiaAudioBuffers}const bS=()=>{const t=H.useRef(null),[e,n]=H.useState("uninitialized"),[r,s]=H.useState(()=>Object.keys(di).length===Object.keys(ju).length),[i,a]=H.useState(()=>{try{return localStorage.getItem(Fu)==="true"}catch{return!1}});H.useEffect(()=>{localStorage.setItem(Fu,String(i)),fi&&Ce&&fi.gain.setTargetAtTime(i?0:1,Ce.currentTime,.01),window.dispatchEvent(new CustomEvent("mute-change",{detail:{isMuted:i}}))},[i]),H.useEffect(()=>{const T=x=>{a(x.detail.isMuted)},k=x=>{x.key===Fu&&a(x.newValue==="true")};return window.addEventListener("mute-change",T),window.addEventListener("storage",k),()=>{window.removeEventListener("mute-change",T),window.removeEventListener("storage",k)}},[]),H.useEffect(()=>{let T=!0;return(async()=>{if(!Ce){n("error");return}if(r){n(Ce.state);return}n("loading"),Ce.onstatechange=()=>{T&&n(Ce.state)},n(Ce.state);try{const x=Object.keys(ju).map(async D=>{if(di[D])return;const A=ju[D],I=await fetch(A);if(!I.ok)throw new Error(`Failed to fetch sound: ${A}`);const C=await I.arrayBuffer(),N=await Ce.decodeAudioData(C);T&&(di[D]=N)});await Promise.all(x),T&&(s(!0),n(Ce.state))}catch(x){console.error("Error initializing audio buffers:",x),T&&n("error")}})(),()=>{T=!1}},[r]);const l=H.useCallback(async()=>{if(Ce&&Ce.state==="suspended")try{await Ce.resume(),n(Ce.state)}catch(T){console.error("Failed to resume audio context",T),n(Ce.state)}},[]),u=H.useCallback((T,k=!1)=>{if(!Ce||!fi||e==="error"||!r)return;if(Ce.state!=="running"){console.warn(`AudioContext not running (state: ${Ce.state}). Sound '${T}' needs a user gesture.`),l();return}const x=di[T];if(!x){console.warn(`Audio buffer for '${T}' not loaded yet. State: ${e}`);return}k&&h();const D=Ce.createBufferSource();D.buffer=x,D.connect(fi),D.loop=k,D.start(0),k&&(t.current=D)},[e,r,l]),h=H.useCallback(()=>{if(t.current){try{t.current.stop()}catch{}t.current=null}},[]),f=H.useCallback(()=>{l(),a(T=>{const k=!T;return k&&h(),k})},[h,l]);return{isSoundMuted:i,toggleSoundMute:f,unlockAudio:l,isAudioReady:r,isSuspended:e==="suspended",playStart:()=>u("start"),playWarning:()=>u("warning"),playAlarmLoop:()=>u("alarm",!0),stopAlarmLoop:h,playSuccess:()=>u("success"),playNotification:()=>u("notification")}},bu=An(Y,"production_processes"),US=(t,e)=>{if(!e||e==="base"||!t.variants)return t.steps;const n=t.variants.find(r=>r.id===e);return n?t.steps.map((r,s)=>{const i=n.stepOverrides[s];return i?{...r,...i}:r}):t.steps},zS=()=>{const[t,e]=H.useState([]),n=H.useRef(null),r=H.useRef(null),{isSoundMuted:s,toggleSoundMute:i,playStart:a,playWarning:l,playAlarmLoop:u,stopAlarmLoop:h,playSuccess:f,unlockAudio:g,isAudioReady:v,playNotification:T,isSuspended:k}=bS(),x=H.useRef(new Set);H.useEffect(()=>{const _=$t(bu,Mr("lastTickTimestamp","asc")),y=or(_,R=>{const P=R.docs.map(E=>{const he=E.data();return{id:E.id,...he,_baseStepTimeLeft:he.stepTimeLeft,_baseTotalTimeLeft:he.totalTimeLeft}});e(P)},R=>{console.error("Error syncing production processes:",R)});return()=>y()},[]);const D=H.useCallback(()=>{n.current&&(clearInterval(n.current),n.current=null)},[]),A=H.useCallback(()=>{e(_=>{const y=Date.now();let R=!1;const P=_.map(E=>{if(E.state!=="running")return E;const he=E._baseStepTimeLeft??E.stepTimeLeft,Z=E._baseTotalTimeLeft??E.totalTimeLeft,de=Math.round((y-E.lastTickTimestamp)/1e3),te=Math.max(0,he-de),U=Math.max(0,Z-de);R=!0;const Q=`${E.id}-${E.currentStepIndex}`;if(te<=30&&te>28&&!x.current.has(Q)&&(l(),setTimeout(()=>l(),700),setTimeout(()=>l(),1400),x.current.add(Q)),te===0){if(E.state==="running"){u();const K=le(Y,"production_processes",E.id);Tt(K,{state:"alarm",stepTimeLeft:0,totalTimeLeft:U,lastTickTimestamp:y}).catch(ge=>console.error("Error triggering alarm:",ge))}return{...E,state:"alarm",stepTimeLeft:0,totalTimeLeft:U}}return{...E,stepTimeLeft:te,totalTimeLeft:U,_baseStepTimeLeft:he,_baseTotalTimeLeft:Z}});return R?P:_})},[l,u]),I=H.useCallback(()=>{D(),n.current=window.setInterval(A,1e3)},[D,A]);H.useEffect(()=>(t.some(y=>y.state==="running")?I():D(),D),[t,I,D]),H.useEffect(()=>{if(!k&&r.current){const _=r.current;r.current=null;const y=t.find(R=>R.id===_);y&&y.state==="paused"&&y.totalTimeLeft===y.totalTime&&a()}},[k,a,t]);const C=H.useCallback(async(_,y)=>{var de;if(!_)return;const R=US(_,y),P=R.reduce((te,U)=>te+U.duration,0),E=(de=_.variants)==null?void 0:de.find(te=>te.id===y),Z={name:E?`${_.name} (${E.name})`:_.name,recipeId:_.id,recipe:_,type:"baking",state:"paused",currentStepIndex:0,steps:R,totalTime:P,totalTimeLeft:P,stepTimeLeft:R[0].duration,lastTickTimestamp:Date.now(),...y?{variantId:y}:{}};try{await In(bu,Z)}catch(te){console.error("Error starting baking process:",te)}},[]),N=H.useCallback(async(_,y)=>{const P={name:y,type:"heating",state:"paused",currentStepIndex:0,steps:[{instruction:y,duration:_,type:"passive"}],totalTime:_,totalTimeLeft:_,stepTimeLeft:_,lastTickTimestamp:Date.now()};try{await In(bu,P)}catch(E){console.error("Error starting heating process:",E)}},[]),F=H.useCallback(async _=>{h();const y=t.find(E=>E.id===_);if(!y)return;const R=le(Y,"production_processes",_),P={lastTickTimestamp:Date.now()};if(y.state==="finished")P.state="paused";else if(y.currentStepIndex<y.steps.length-1){const E=y.currentStepIndex+1,he=y.steps[E];P.state="intermission",P.currentStepIndex=E,P.stepTimeLeft=he.duration}else f(),P.state="finished",P.stepTimeLeft=0;try{await Tt(R,P)}catch(E){console.error("Error advancing process:",E)}},[t,h,f]),j=H.useCallback(async _=>{h();const y=t.find(R=>R.id===_);if(y&&y.currentStepIndex>0){const R=y.currentStepIndex-1,P=y.steps[R],E=le(Y,"production_processes",_);try{await Tt(E,{state:"paused",currentStepIndex:R,stepTimeLeft:P.duration,lastTickTimestamp:Date.now()})}catch(he){console.error("Error going back:",he)}}},[t,h]),w=H.useCallback(async _=>{const y=t.find(P=>P.id===_);if(!y||y.state==="alarm"||y.state==="finished")return;const R=le(Y,"production_processes",_);if(y.state==="running"){const P=Date.now();try{await Tt(R,{state:"paused",stepTimeLeft:y.stepTimeLeft,totalTimeLeft:y.totalTimeLeft,lastTickTimestamp:P})}catch(E){console.error(E)}}else{k&&(r.current=_,g()),y.state==="paused"&&y.totalTimeLeft===y.totalTime&&a();try{await Tt(R,{state:"running",lastTickTimestamp:Date.now()})}catch(E){console.error(E)}}},[t,k,g,a]),m=H.useCallback(async _=>{h();const y=le(Y,"production_processes",_);try{await Lr(y)}catch(R){console.error("Error deleting process:",R)}},[h]);return{processes:t,startBakingProcess:C,startHeatingProcess:N,advanceProcess:F,goToPreviousStep:j,togglePauseProcess:w,cancelProcess:m,isSoundMuted:s,toggleSoundMute:i,isAudioReady:v,playNotification:T,isSuspended:k,unlockAudio:g}},rh=An(Y,"categories"),Bv=[{name:"Secos"},{name:"Refrigerados"},{name:"Lcteos"},{name:"Bebidas"},{name:"Carnes"},{name:"Frutas y Verduras"}],BS=async()=>{console.log("Seeding initial categories to Firestore...");const t=Pt(Y);Bv.forEach(e=>{const n=le(rh);t.set(n,e)}),await t.commit(),console.log("Initial categories seeded.")},$S=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const i=$t(rh,Mr("name")),a=or(i,l=>{if(l.empty&&Bv.length>0){BS();return}const u=l.docs.map(h=>({id:h.id,...h.data()}));e(u)},l=>{console.error("Error fetching categories:",l)});return()=>a()},[]),{categories:t,addCategory:async i=>{try{await In(rh,i)}catch(a){console.error("Error adding category:",a)}},updateCategory:async i=>{const{id:a,...l}=i,u=le(Y,"categories",a);try{await Tt(u,l)}catch(h){console.error("Error updating category:",h)}},deleteCategory:async i=>{const a=le(Y,"categories",i);try{await Lr(a)}catch(l){console.error("Error deleting category:",l)}}}},Bm=An(Y,"recipeFeedback"),qS=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const r=$t(Bm,Mr("date","desc")),s=or(r,i=>{const a=i.docs.map(l=>({id:l.id,...l.data()}));e(a)},i=>{console.error("Error fetching recipe feedback:",i)});return()=>s()},[]),{feedbackLog:t,addFeedback:async r=>{try{await In(Bm,{...r,date:new Date().toISOString()})}catch(s){console.error("Error adding feedback:",s)}}}},sh=An(Y,"users"),$v=[{name:"Ali",color:"#ec4899"},{name:"Fer",color:"#8b5cf6"},{name:"Claudia",color:"#14b8a6"},{name:"Admin",color:"#f59e0b"}],HS=async()=>{console.log("Seeding initial users to Firestore...");const t=Pt(Y);$v.forEach(e=>{const n=le(sh);t.set(n,e)}),await t.commit(),console.log("Initial users seeded.")},WS=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const i=$t(sh,Mr("name")),a=or(i,l=>{if(l.empty&&$v.length>0){HS();return}const u=l.docs.map(h=>({id:h.id,...h.data()}));e(u)},l=>{console.error("Error fetching users:",l)});return()=>a()},[]),{users:t,addUser:async i=>{try{await In(sh,i)}catch(a){console.error("Error adding user:",a)}},updateUser:async i=>{const{id:a,...l}=i,u=le(Y,"users",a);try{await Tt(u,l)}catch(h){console.error("Error updating user:",h)}},deleteUser:async i=>{const a=le(Y,"users",i);try{await Lr(a)}catch(l){console.error("Error deleting user:",l)}}}},QS=({onUnlock:t})=>S.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 w-11/12 max-w-md bg-gray-800 text-white rounded-lg shadow-lg p-3 z-50 cursor-pointer transition-transform hover:scale-105 animate-pulse",onClick:t,role:"button",tabIndex:0,"aria-label":"Activar sonidos",children:S.jsxs("div",{className:"flex items-center justify-center gap-3",children:[S.jsx(Ut,{name:"volume-x",size:20}),S.jsx("span",{className:"font-semibold text-sm",children:"Toca para activar los sonidos de alerta"})]})}),Zo=An(Y,"recipes"),KS=[{name:"Roles de Canela (Horneado)",pluralName:"Roles de Canela listos",setupInstruction:"Configura el horno a 230C y programa 16 minutos.",baseVariantName:"Receta Estndar",baseVariantDescription:"2 charolas (12 piezas)",totalDuration:0,steps:[{duration:2*60,instruction:"Coloca los roles en los niveles 1 y 3. Deja que el calor eleve el producto sin presionar INICIO.",type:"passive"},{duration:6*60,instruction:"Baja la temperatura a 210C y comienza el horneado.",type:"passive"},{duration:4*60,instruction:"Gira las charolas 180 grados.",type:"passive"},{duration:2*60,instruction:"Agrega 20 ml de leche y gira cada rol 1/3 de vuelta en sentido contrario del reloj.",type:"active"},{duration:2*60,instruction:"Vuelve a girar cada rol 1/3 de vuelta para finalizar.",type:"passive"}],variants:[]},{name:"Ciabattas (Horneado)",pluralName:"Ciabattas listas",setupInstruction:"Configura el horno a 230C y programa 30 minutos.",baseVariantName:"Receta Estndar",baseVariantDescription:"2 charolas (8 piezas)",totalDuration:0,steps:[{duration:2*60,instruction:"Coloca las charolas (niveles 1 y 3) y pulveriza agua 12 veces. Deja que el calor eleve el producto sin presionar INICIO.",type:"passive"},{duration:8*60,instruction:"Baja la temperatura a 210C y comienza el horneado.",type:"passive"},{duration:8*60,instruction:"Gira las charolas 180 grados y vuelve a pulverizar agua 12 veces.",type:"passive"},{duration:6*60,instruction:"Intercambia las charolas de nivel y da vuelta a cada pieza 180 grados.",type:"passive"},{duration:6*60,instruction:"Gira las charolas 180 grados por ltima vez.",type:"passive"}],variants:[]},{name:"Croissants (Horneado)",pluralName:"Croissants listos",setupInstruction:"Configura el horno a 230C y programa 21 minutos.",baseVariantName:"Receta Estndar",baseVariantDescription:"2 charolas (12-16 piezas)",totalDuration:0,steps:[{duration:3*60,instruction:"Coloca las charolas en los niveles 1 y 3. Pulveriza agua 12 veces.",type:"passive"},{duration:6*60,instruction:"Baja la temperatura a 200C y continua horneando.",type:"passive"},{duration:5*60,instruction:"Gira las charolas 180 grados.",type:"passive"},{duration:5*60,instruction:"Intercambia las charolas de nivel y gralas 180 grados.",type:"passive"},{duration:2*60,instruction:"Gira las charolas 180 grados por ltima vez.",type:"passive"}],variants:[{id:"var-media-charola",name:"Media Charola",description:"1 charola (6-8 piezas)",stepOverrides:[null,{instruction:"Baja la temperatura a 180C y continua horneando.",type:"passive"},null,null,null]}]},{name:"Masa de Croissants (Proceso Completo)",pluralName:"Masa lista",setupInstruction:"Tener mantequilla fra y laminadora lista.",baseVariantName:"Lote Completo",baseVariantDescription:"22-24 piezas",totalDuration:0,steps:[{duration:15*60,instruction:"Mezclar ingredientes y amasar (fase 1).",type:"active"},{duration:60*60,instruction:"Primera fermentacin / descanso en fro.",type:"passive"},{duration:20*60,instruction:"Laminar mantequilla y dar vueltas (simple y doble).",type:"active"},{duration:45*60,instruction:"Descanso en fro antes de formar.",type:"passive"},{duration:30*60,instruction:"Estirar, cortar tringulos y formar.",type:"active"}],variants:[]},{name:"Galletas (Cookies)",pluralName:"Galletas listas",setupInstruction:"Precalentar horno a 170C. Preparar charolas con papel estrella.",baseVariantName:"Lote Estndar",baseVariantDescription:"20-24 galletas",totalDuration:0,steps:[{duration:10*60,instruction:"Acremar mantequilla y azcares.",type:"active"},{duration:5*60,instruction:"Incorporar huevos y vainilla, luego secos y chocolate.",type:"active"},{duration:15*60,instruction:"Porcionar masa (bolear) y colocar en charolas.",type:"active"},{duration:20*60,instruction:"Congelar las bolas de masa (mejora textura).",type:"passive"},{duration:12*60,instruction:"Hornear a 170C.",type:"passive"},{duration:10*60,instruction:"Dejar enfriar en charola antes de mover.",type:"passive"}],variants:[]},{name:"Masa para Pizza",pluralName:"Masa de Pizza lista",setupInstruction:"Tener harina de fuerza lista y agua fra.",baseVariantName:"Lote 4kg",baseVariantDescription:"Aprox 15 pizzas",totalDuration:0,steps:[{duration:15*60,instruction:"Mezclado y amasado hasta desarrollo de gluten.",type:"active"},{duration:2*60*60,instruction:"Fermentacin en bloque (tapar bien).",type:"passive"},{duration:20*60,instruction:"Dividir, pesar y bolear porciones.",type:"active"},{duration:24*60*60,instruction:"Maduracin en refrigeracin (24 a 48 horas).",type:"passive"}],variants:[]}],GS=()=>{const[t,e]=H.useState([]);return H.useEffect(()=>{const a=$t(Zo,Mr("name")),l=or(a,u=>{u.empty;const h=u.docs.map(f=>({id:f.id,...f.data()}));e(h)},u=>{console.error("Error fetching recipes:",u)});return()=>l()},[]),{recipes:t,addRecipe:async a=>{try{await In(Zo,a)}catch(l){console.error("Error adding recipe:",l)}},updateRecipe:async a=>{const{id:l,...u}=a,h=le(Y,"recipes",l);try{await Tt(h,u)}catch(f){console.error("Error updating recipe:",f)}},deleteRecipe:async a=>{const l=le(Y,"recipes",a);try{await Lr(l)}catch(u){console.error("Error deleting recipe:",u)}},resetRecipesToFactory:async()=>{if(window.confirm(` ESTS SEGURO?

Esto BORRAR todas las recetas existentes y volver a cargar las recetas estndar (Pizza, Croissants, Galletas, etc).

Esta accin es ideal si los datos estn desordenados, pero perders recetas personalizadas.`))try{console.log("Resetting recipes...");const a=await qr(Zo),l=Pt(Y);a.docs.forEach(u=>{l.delete(u.ref)}),KS.forEach(u=>{const h=le(Zo);l.set(h,u)}),await l.commit(),alert("Recetas restablecidas de fbrica correctamente."),window.location.reload()}catch(a){console.error("Error resetting recipes:",a),alert("Error al restablecer recetas. Revisa la consola.")}}}},$m=H.lazy(()=>pl(()=>import("./BreadProductionScreen-DHy6s6Qo.js"),__vite__mapDeps([0,1]))),YS=H.lazy(()=>pl(()=>import("./OperationsScreen-DpQqlbIX.js"),__vite__mapDeps([2,1]))),XS=H.lazy(()=>pl(()=>import("./InventoryScreen-C2dVSHor.js"),__vite__mapDeps([3,1]))),JS=H.lazy(()=>pl(()=>import("./SettingsScreen-CxRZU7Vb.js"),__vite__mapDeps([4,1]))),ZS=t=>{const e=new Date,[n,r]=t.split(":").map(Number),s=new Date;return s.setHours(n,r,0,0),Math.round((s.getTime()-e.getTime())/1e3/60)},eA=()=>S.jsx("div",{className:"w-full h-full flex items-center justify-center",children:S.jsx(Ut,{name:"refresh-cw",className:"animate-spin text-blue-500",size:48})}),tA=()=>{const[t,e]=H.useState(Le.Baking),[n,r]=H.useState(!1),[s,i]=H.useState(new Date),[a,l]=H.useState(null),u=zS(),h=MS(),f=OS(),g=jS(),v=$S(),T=qS(),k=WS(),x=GS(),{processes:D,playNotification:A,isSuspended:I,unlockAudio:C}=u,{tasks:N}=h,{items:F}=f,[j,w]=H.useState({}),m=H.useMemo(()=>{const Z=new Date;return Z.setMinutes(Z.getMinutes()-Z.getTimezoneOffset()),Z.toISOString().split("T")[0]},[]);H.useEffect(()=>{const Z=()=>{const te={};N.forEach(U=>{if(U.date===m&&U.time&&U.status!=="done"){const Q=ZS(U.time);let K="normal";Q<=0?K="due":Q<=15&&(K="imminent"),te[U.id]={diff:Q,status:K}}}),w(te)};Z();const de=setInterval(Z,1e4);return()=>clearInterval(de)},[N,m]);const _=H.useMemo(()=>N.filter(te=>te.date===m&&te.isCritical&&te.status!=="done"&&j[te.id]).map(te=>({task:te,diff:j[te.id].diff})).filter(({diff:te})=>te<=30&&te>=-15).sort((te,U)=>te.diff-U.diff),[N,j,m]),y=H.useRef(new Set);H.useEffect(()=>{const Z=new Set(_.map(de=>`task-${de.task.id}`));Z.forEach(de=>{y.current.has(de)||(A(),y.current.add(de))}),y.current.forEach(de=>{de.startsWith("task-")&&!Z.has(de)&&y.current.delete(de)})},[_,A]);const R=Z=>{if(Z.date){const de=new Date(Z.date);de.setMinutes(de.getMinutes()+de.getTimezoneOffset()),i(de),l(Z.id)}e(Le.Operations)},P=H.useMemo(()=>F.filter(Z=>Z.currentStock<=Z.minStock),[F]),E=H.useMemo(()=>N.filter(Z=>Z.status==="inprogress"),[N]),he=()=>{switch(t){case Le.Baking:return S.jsx($m,{productionHook:u,recipeLogHook:T,recipesHook:x});case Le.Operations:return S.jsx(YS,{kanbanHook:h,criticalTasks:_,users:k.users,selectedDate:s,setSelectedDate:i,highlightedTaskId:a,setHighlightedTaskId:l});case Le.Inventory:return S.jsx(XS,{inventoryHook:f,providers:g.providers,categories:v.categories});case Le.Settings:return S.jsx(JS,{providersHook:g,categoriesHook:v,recipeLogHook:T,usersHook:k,recipesHook:x});default:return S.jsx($m,{productionHook:u,recipeLogHook:T,recipesHook:x})}};return S.jsxs("div",{className:"h-screen w-screen bg-gray-100",children:[S.jsxs("div",{className:"flex h-full w-full max-w-7xl mx-auto bg-gray-50 text-gray-800",children:[S.jsx("div",{className:"hidden md:flex md:flex-shrink-0",children:S.jsx(qp,{activeScreen:t,setActiveScreen:e,processes:D.filter(Z=>Z.state!=="finished"),urgentTasks:_,shoppingListItems:P,inProgressTasks:E,isOpen:!0,onClose:()=>{},users:k.users,onNavigateToTask:R,setOperationsDate:i,setHighlightedTaskId:l})}),S.jsxs("div",{className:"md:hidden",children:[n&&S.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>r(!1),"aria-hidden":"true"}),S.jsx(qp,{activeScreen:t,setActiveScreen:e,processes:D.filter(Z=>Z.state!=="finished"),urgentTasks:_,shoppingListItems:P,inProgressTasks:E,isOpen:n,onClose:()=>r(!1),users:k.users,onNavigateToTask:R,setOperationsDate:i,setHighlightedTaskId:l})]}),S.jsxs("main",{className:"flex-1 flex flex-col relative overflow-hidden",children:[S.jsxs("header",{className:"md:hidden bg-white border-b border-gray-200 p-4 flex justify-start items-center gap-4",children:[S.jsx("button",{onClick:()=>r(!0),children:S.jsx(Ut,{name:"menu",size:24})}),S.jsx("h1",{className:"text-xl font-bold text-blue-600",children:"Cafestesia"})]}),S.jsx("div",{className:"flex-1 overflow-y-auto",children:S.jsx(H.Suspense,{fallback:S.jsx(eA,{}),children:he()})})]})]}),I&&S.jsx(QS,{onUnlock:C})]})},qv=document.getElementById("root");if(!qv)throw new Error("Could not find root element to mount to");const nA=Uu.createRoot(qv);nA.render(S.jsx(j0.StrictMode,{children:S.jsx(tA,{})}));export{Ut as I,aA as O,j0 as R,oA as T,iA as a,sA as b,rA as c,An as d,or as e,Y as f,le as g,Lr as h,In as i,S as j,MS as k,Mr as o,$t as q,H as r,Tt as u};
