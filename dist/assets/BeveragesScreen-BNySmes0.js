import{r as o,j as e,I as i,m as V}from"./index-7f0Z6dSx.js";import{u as E}from"./useBeverages-Dw5O-OkB.js";import{M as T}from"./Modal-C5sr91eM.js";import{S as K,P as U}from"./ProductionCompletionModal-DwlvfLVO.js";import{S as q}from"./StockUpdateModal-DbMlrjzm.js";const Q=({item:a,index:f,onEdit:g,onDelete:y})=>{const[d,m]=o.useState(0),[n,h]=o.useState(!1),w=o.useRef(0),k=o.useRef(0),p=-100,v=s=>{w.current=s,h(!0)},x=s=>{if(!n)return;const b=s-w.current;if(b<0){const S=Math.max(b,-150);k.current=S,m(S)}},N=()=>{h(!1),k.current<p?(m(-500),setTimeout(()=>y(f),200)):(m(0),k.current=0)},C=s=>v(s.touches[0].clientX),M=s=>x(s.touches[0].clientX),c=s=>v(s.clientX),l=s=>n&&x(s.clientX),u=()=>n&&N(),r=()=>n&&N();return e.jsxs("div",{className:"relative overflow-hidden mb-2 select-none touch-pan-y",children:[e.jsx("div",{className:"absolute inset-0 bg-red-500 rounded-lg flex items-center justify-end pr-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-white font-bold",children:[e.jsx("span",{children:"Borrar"}),e.jsx(i,{name:"trash-2",size:20})]})}),e.jsxs("div",{className:"relative bg-white p-2 border-b border-dashed border-gray-200 flex justify-between items-start transition-transform duration-200 ease-out",style:{transform:`translateX(${d}px)`,transition:n?"none":"transform 0.2s ease-out",cursor:n?"grabbing":"grab"},onTouchStart:C,onTouchMove:M,onTouchEnd:N,onMouseDown:c,onMouseMove:l,onMouseUp:u,onMouseLeave:r,children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsx("p",{className:"font-bold text-gray-800 text-sm md:text-base leading-tight truncate",children:a.beverageName}),a.sizeName&&e.jsxs("span",{className:"text-amber-700 text-xs md:text-sm block truncate",children:["(",a.sizeName,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-1 items-center mt-1",children:[e.jsx("span",{className:`text-[10px] px-1 rounded ${a.type==="food"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:a.type==="food"?"COCINA":"BARRA"}),a.notes&&e.jsxs("span",{className:"text-[10px] px-1 rounded bg-yellow-200 text-yellow-900 font-bold flex items-center gap-1 max-w-full truncate",children:[e.jsx(i,{name:"pencil",size:8})," ",a.notes]})]}),a.modifiers.length>0&&e.jsx("p",{className:"text-[10px] md:text-xs text-blue-600 mt-0.5 truncate",children:a.modifiers.join(", ")})]}),e.jsx("div",{className:"flex flex-col gap-1 flex-shrink-0 mt-0.5",children:e.jsx("button",{onClick:s=>{s.stopPropagation(),g(f)},className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Editar Nota",onMouseDown:s=>s.stopPropagation(),onTouchStart:s=>s.stopPropagation(),children:e.jsx(i,{name:"pencil",size:18})})})]})]})},G=()=>{var O;const{beverages:a,createOrder:f}=E(),[g,y]=o.useState("beverage"),[d,m]=o.useState("all"),[n,h]=o.useState([]),[w,k]=o.useState(""),[p,v]=o.useState(""),[x,N]=o.useState(null),[C,M]=o.useState(null),[c,l]=o.useState(""),u=o.useMemo(()=>a.filter(t=>t.type===g||!t.type&&g==="beverage"),[a,g]),r=o.useMemo(()=>{const t=new Set(u.map(j=>j.category));return Array.from(t)},[u]),s=o.useMemo(()=>p.trim()?u.filter(t=>t.name.toLowerCase().includes(p.toLowerCase())):d==="all"?u:u.filter(t=>t.category===d),[u,d,p]),b=t=>{y(t),m("all"),v("")},S=t=>{t.hasSizes&&t.sizes&&t.sizes.length>0?N(t):I(t,void 0,t.recipe),v("")},I=(t,j,z)=>{const F={id:`item-${Date.now()}`,beverageId:t.id,beverageName:t.name,type:t.type||"beverage",sizeName:j,modifiers:[],recipeRef:z||t.recipe};h([...n,F]),N(null)},A=()=>{h(t=>t.slice(0,-1))},P=t=>{const j=[...n];j.splice(t,1),h(j)},R=t=>{if(n.length===0)return;const j=[...n],z=j[j.length-1];z.modifiers.includes(t)||(z.modifiers.push(t),h(j))},B=t=>{M(t),l(n[t].notes||"")},L=()=>{if(C===null)return;const t=[...n];t[C].notes=c.trim(),h(t),M(null),l("")},X=()=>{if(n.length===0)return;const t=w.trim()||"Mostrador";f(t,n),k(""),h([])},$=Array.from(new Set(u.flatMap(t=>t.modifiers||[]))).slice(0,6);return e.jsxs("div",{className:"flex flex-col h-full md:flex-row overflow-hidden",children:[e.jsxs("div",{className:"h-[60%] md:h-auto md:flex-1 flex flex-col bg-gray-100 border-r border-gray-200 min-w-0",children:[e.jsxs("div",{className:"p-1 md:p-2 bg-white flex gap-2 border-b border-gray-200 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>b("beverage"),className:`flex-1 py-2 md:py-3 rounded-lg font-bold flex items-center justify-center gap-2 transition-colors text-xs md:text-base ${g==="beverage"?"bg-blue-600 text-white":"bg-gray-100 text-gray-500"}`,children:[e.jsx(i,{name:"star",size:16,className:"md:w-5 md:h-5"}),"Bebidas"]}),e.jsxs("button",{onClick:()=>b("food"),className:`flex-1 py-2 md:py-3 rounded-lg font-bold flex items-center justify-center gap-2 transition-colors text-xs md:text-base ${g==="food"?"bg-orange-500 text-white":"bg-gray-100 text-gray-500"}`,children:[e.jsx(i,{name:"cake-slice",size:16,className:"md:w-5 md:h-5"}),"Comida"]})]}),e.jsx("div",{className:"px-2 pt-2 pb-1 bg-gray-100 flex-shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 md:pl-3 flex items-center pointer-events-none text-gray-400",children:e.jsx(i,{name:"list",size:16,className:"md:w-[18px]"})}),e.jsx("input",{type:"text",value:p,onChange:t=>v(t.target.value),placeholder:"Buscar...",className:"w-full pl-8 md:pl-10 pr-8 py-1.5 md:py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-sm"}),p&&e.jsx("button",{onClick:()=>v(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:e.jsx(i,{name:"x",size:16})})]})}),!p&&e.jsxs("div",{className:"flex gap-1 md:gap-2 p-1 md:p-2 bg-gray-100 overflow-x-auto flex-shrink-0 custom-scrollbar",children:[e.jsx("button",{onClick:()=>m("all"),className:`px-3 py-1.5 md:px-4 md:py-2 rounded-full font-bold capitalize flex-shrink-0 transition-colors border text-xs md:text-sm ${d==="all"?"bg-gray-700 text-white border-gray-700":"bg-white text-gray-600 border-gray-300"}`,children:"Todos"}),r.map(t=>e.jsx("button",{onClick:()=>m(t),className:`px-3 py-1.5 md:px-4 md:py-2 rounded-full font-bold capitalize flex-shrink-0 transition-colors border text-xs md:text-sm ${d===t?"bg-gray-700 text-white border-gray-700":"bg-white text-gray-600 border-gray-300"}`,children:t},t))]}),e.jsx("div",{className:"p-2 md:p-3 grid grid-cols-3 md:grid-cols-3 lg:grid-cols-4 gap-2 md:gap-3 overflow-y-auto content-start flex-grow",children:s.length>0?s.map(t=>e.jsxs("button",{onClick:()=>S(t),className:"bg-white p-1 md:p-4 h-20 md:h-28 rounded-lg shadow-sm border border-gray-200 hover:border-amber-500 hover:shadow-md transition-all flex flex-col items-center justify-center text-center active:scale-95 relative",children:[e.jsx("span",{className:"font-bold text-gray-800 leading-none text-xs md:text-base line-clamp-3",children:t.name}),t.hasSizes&&e.jsx("span",{className:"absolute top-1 right-1 text-[9px] md:text-[10px] bg-gray-100 text-gray-500 px-1 rounded",children:"Var"})]},t.id)):e.jsx("div",{className:"col-span-full text-center py-10 text-gray-400",children:e.jsx("p",{children:"No se encontraron productos."})})}),n.length>0&&$.length>0&&e.jsx("div",{className:"p-2 bg-gray-200 flex gap-2 overflow-x-auto flex-shrink-0",children:$.map(t=>e.jsxs("button",{onClick:()=>R(t),className:"px-2 py-1.5 md:px-3 md:py-2 bg-white rounded-full text-[10px] md:text-xs font-bold text-gray-700 border border-gray-300 shadow-sm hover:bg-blue-50 active:bg-blue-100 whitespace-nowrap",children:["+ ",t]},t))})]}),e.jsxs("div",{className:"h-[40%] md:h-auto w-full md:w-80 bg-white flex flex-col flex-shrink-0 border-l border-gray-200 shadow-xl z-10 overflow-hidden",children:[e.jsx("div",{className:"p-2 md:p-4 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:e.jsx("input",{type:"text",value:w,onChange:t=>k(t.target.value),placeholder:"Nombre / Mesa",className:"w-full p-2 border border-gray-300 rounded-md text-sm md:text-lg font-semibold"})}),e.jsx("div",{className:"flex-grow overflow-y-auto p-2 md:p-4 custom-scrollbar",children:n.length===0?e.jsxs("div",{className:"text-center text-gray-400 mt-6 md:mt-10",children:[e.jsx(i,{name:"shopping-cart",size:32,className:"mx-auto mb-2 opacity-20"}),e.jsx("p",{className:"text-xs md:text-sm",children:"Ticket vacío"})]}):n.map((t,j)=>e.jsx(Q,{item:t,index:j,onEdit:B,onDelete:P},`${t.id}-${j}`))}),e.jsxs("div",{className:"p-2 md:p-4 bg-gray-50 border-t border-gray-200 grid grid-cols-2 gap-2 md:gap-3 flex-shrink-0",children:[e.jsxs("button",{onClick:A,disabled:n.length===0,className:"py-2 md:py-3 bg-gray-200 text-gray-600 font-bold rounded-lg disabled:opacity-50 flex items-center justify-center text-xs md:text-sm",children:[e.jsx(i,{name:"rotate-ccw",className:"mr-1",size:16}),"Deshacer"]}),e.jsxs("button",{onClick:X,disabled:n.length===0,className:"py-2 md:py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 shadow-md disabled:opacity-50 flex items-center justify-center gap-2 text-sm md:text-base",children:[e.jsx("span",{children:"ENVIAR"}),e.jsx(i,{name:"play-circle",size:18})]})]})]}),x&&e.jsx(T,{isOpen:!!x,onClose:()=>N(null),title:`Variante para: ${x.name}`,children:e.jsxs("div",{className:"flex flex-col gap-3",children:[(O=x.sizes)==null?void 0:O.map((t,j)=>e.jsx("button",{onClick:()=>I(x,t.name,t.recipe),className:"p-4 bg-blue-50 border border-blue-200 rounded-xl text-blue-800 font-bold text-lg hover:bg-blue-100 transition-colors",children:t.name},j)),e.jsx("button",{onClick:()=>N(null),className:"p-3 mt-2 bg-gray-100 text-gray-600 rounded-lg font-semibold",children:"Cancelar"})]})}),C!==null&&e.jsx(T,{isOpen:C!==null,onClose:()=>M(null),title:"Nota para cocina/barra",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Agrega detalles especiales para: ",e.jsx("span",{className:"font-bold",children:n[C].beverageName})]}),e.jsx("input",{type:"text",value:c,onChange:t=>l(t.target.value),placeholder:"Ej: Sin cebolla, leche deslactosada, extra caliente...",autoFocus:!0,className:"w-full p-3 border border-gray-300 rounded-lg text-lg"}),e.jsxs("div",{className:"flex gap-3 mt-2",children:[e.jsx("button",{onClick:()=>M(null),className:"flex-1 py-3 bg-gray-100 text-gray-700 font-bold rounded-lg",children:"Cancelar"}),e.jsx("button",{onClick:L,className:"flex-1 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700",children:"Guardar Nota"})]})]})})]})},_=({timestamp:a})=>{const[f,g]=o.useState(0);o.useEffect(()=>{const d=()=>g(Math.floor((Date.now()-a)/6e4));d();const m=setInterval(d,6e4);return()=>clearInterval(m)},[a]);let y="bg-green-100 text-green-800";return f>=5&&(y="bg-yellow-100 text-yellow-800"),f>=10&&(y="bg-red-100 text-red-800 animate-pulse"),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${y}`,children:[f," min"]})},D=({type:a,inventoryHook:f})=>{const{activeOrders:g,completeOrder:y,cancelOrder:d,beverages:m}=E(),{recordStockChange:n}=f,[h,w]=o.useState(null),{playNotification:k}=V(),p=o.useRef(0),v=o.useRef(!0),x=o.useMemo(()=>g.filter(c=>c.items.some(l=>(l.type||"beverage")===a)),[g,a]);o.useEffect(()=>{if(v.current){v.current=!1,p.current=x.length;return}x.length>p.current&&k(),p.current=x.length},[x.length,k]);const N=c=>{c.items.forEach(l=>{if((l.type||"beverage")!==a)return;const r=m.find(I=>I.id===l.beverageId);if(!(r!=null&&r.stockConfig))return;const{mode:s,directItemId:b,ingredients:S}=r.stockConfig;s==="direct"&&b?n({itemId:b,change:-1,responsible:"KDS System",reason:`Venta: ${l.beverageName}`}):s==="recipe"&&S&&S.forEach(I=>{I.quantity>0&&n({itemId:I.inventoryItemId,change:-I.quantity,responsible:"KDS System",reason:`Insumo Venta: ${l.beverageName}`})})}),y(c.id)},C=a==="food"?"bg-orange-50 border-orange-200":"bg-blue-50 border-blue-200",M=a==="food"?"text-orange-500":"text-blue-600";return e.jsxs("div",{className:"h-full overflow-y-auto p-4 bg-gray-100",children:[x.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[e.jsx(i,{name:a==="food"?"cake-slice":"star",size:64,className:"mb-4 text-gray-300"}),e.jsxs("p",{className:"text-xl font-bold",children:[a==="food"?"Cocina":"Barra"," Limpia"]}),e.jsx("p",{children:"Esperando pedidos..."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:x.map(c=>e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden flex flex-col animate-fadeIn",children:[e.jsxs("div",{className:`p-3 border-b flex justify-between items-center ${C}`,children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg truncate max-w-[150px] text-gray-800",children:c.customerName}),e.jsxs("p",{className:"text-xs text-gray-500",children:["#",c.id.slice(-4)]})]}),e.jsx(_,{timestamp:c.createdAt})]}),e.jsxs("div",{className:"p-4 flex-grow space-y-4",children:[c.items.filter(l=>(l.type||"beverage")===a).map((l,u)=>e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"mt-1",children:e.jsx("button",{onClick:()=>w({name:`${l.beverageName} ${l.sizeName?`(${l.sizeName})`:""}`,text:l.recipeRef||"Sin receta disponible."}),className:`p-1 rounded-full transition-colors hover:bg-gray-100 ${M}`,title:"Ver Instrucción",children:e.jsx(i,{name:"list",size:18})})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-gray-800 text-lg leading-tight",children:[l.beverageName,l.sizeName&&e.jsxs("span",{className:"text-gray-500 ml-1 text-base font-bold",children:["(",l.sizeName,")"]})]}),l.modifiers.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:l.modifiers.map((r,s)=>e.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-0.5 rounded text-xs font-bold border border-gray-200",children:r},s))})]})]}),l.notes&&e.jsxs("div",{className:"ml-8 bg-yellow-100 border-l-4 border-yellow-400 p-2 rounded-r text-sm font-bold text-yellow-900 flex items-start gap-2",children:[e.jsx(i,{name:"message-square",size:16,className:"mt-0.5 flex-shrink-0"}),e.jsx("span",{children:l.notes})]})]},u)),c.items.some(l=>(l.type||"beverage")!==a)&&e.jsx("div",{className:"pt-2 border-t border-dashed border-gray-200",children:e.jsxs("p",{className:"text-xs text-gray-400 italic text-center",children:["+ ",c.items.filter(l=>(l.type||"beverage")!==a).length," items en otra estación"]})})]}),e.jsxs("div",{className:"p-3 border-t border-gray-100 bg-gray-50",children:[e.jsx(K,{onSwipe:()=>N(c),text:"Completar",icon:"check",className:"bg-white border-gray-300 shadow-sm h-12"}),e.jsx("div",{className:"text-center mt-2",children:e.jsx("button",{onClick:()=>{confirm("¿Cancelar ticket entero?")&&d(c.id)},className:"text-xs text-gray-400 hover:text-red-500",children:"Cancelar Ticket"})})]})]},c.id))}),h&&e.jsxs(T,{isOpen:!!h,onClose:()=>w(null),title:h.name,children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 text-gray-800 whitespace-pre-wrap font-medium text-lg",children:h.text}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>w(null),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-bold shadow-md text-lg w-full",children:"¡Entendido!"})})]})]})},J=({inventoryHook:a,recipesHook:f,usersHook:g})=>{const{items:y,recordStockChange:d,produceBatch:m}=a,{recipes:n}=f,{users:h}=g,[w,k]=o.useState(null),[p,v]=o.useState(null),{marketItems:x,prepItems:N,pantryItems:C}=o.useMemo(()=>y.reduce((r,s)=>(s.kitchenStation==="market"?r.marketItems.push(s):s.kitchenStation==="prep"?r.prepItems.push(s):s.kitchenStation==="pantry"&&r.pantryItems.push(s),r),{marketItems:[],prepItems:[],pantryItems:[]}),[y]),M=r=>n.find(s=>s.outputInventoryItemId===r.id),c=r=>{const s=M(r);if(!s)return;const b={id:`quick-prod-${Date.now()}`,name:s.name,type:"baking",recipe:s,recipeId:s.id,state:"finished",currentStepIndex:0,steps:[],totalTime:0,totalTimeLeft:0,stepTimeLeft:0,lastTickTimestamp:Date.now()};k(b)},l=(r,s,b)=>{if(r.recipe){let S=1;r.recipe.outputQuantity&&r.recipe.outputQuantity>0&&(S=s/r.recipe.outputQuantity),m(r.recipe,S,s,b),k(null)}},u=({item:r,theme:s})=>{const b=r.currentStock<=r.minStock,S=s==="prep"?M(r):void 0,I={market:{border:"border-green-200",bg:"bg-white",text:"text-green-800",icon:"shopping-cart"},prep:{border:"border-red-200",bg:"bg-white",text:"text-red-800",icon:"thermometer"},pantry:{border:"border-blue-200",bg:"bg-white",text:"text-blue-800",icon:"archive"}}[s];return e.jsxs("div",{className:`p-3 rounded-lg border shadow-sm flex flex-col gap-2 ${I.bg} ${I.border} ${b?"ring-2 ring-red-400":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:`font-bold text-sm ${I.text}`,children:r.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[r.currentStock.toFixed(2)," ",r.unit," ",e.jsx("span",{className:"text-gray-400 mx-1",children:"/"})," min: ",r.minStock]})]}),b&&e.jsx(i,{name:"alert-triangle",className:"text-red-500",size:16})]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[s==="market"&&b&&e.jsxs("button",{onClick:()=>v({item:r,isAdding:!0}),className:"flex-1 bg-green-100 text-green-700 text-xs font-bold py-1.5 px-2 rounded hover:bg-green-200 flex items-center justify-center gap-1",children:[e.jsx(i,{name:"shopping-cart",size:12})," Comprar"]}),s==="prep"&&S&&e.jsxs("button",{onClick:()=>c(r),className:"flex-1 bg-red-100 text-red-700 text-xs font-bold py-1.5 px-2 rounded hover:bg-red-200 flex items-center justify-center gap-1",children:[e.jsx(i,{name:"play-circle",size:12})," Producir"]}),s==="pantry"&&e.jsxs("button",{onClick:()=>v({item:r,isAdding:!1}),className:"flex-1 bg-blue-100 text-blue-700 text-xs font-bold py-1.5 px-2 rounded hover:bg-blue-200 flex items-center justify-center gap-1",children:[e.jsx(i,{name:"minus",size:12})," Usar"]})]})]})};return e.jsxs("div",{className:"h-full flex flex-col bg-gray-50 overflow-hidden",children:[e.jsx("div",{className:"flex-grow overflow-x-auto",children:e.jsxs("div",{className:"flex h-full min-w-[900px] p-4 gap-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col bg-green-50/50 rounded-xl border border-green-100 overflow-hidden",children:[e.jsxs("div",{className:"p-3 bg-green-100/50 border-b border-green-200 flex items-center gap-2",children:[e.jsx(i,{name:"store",className:"text-green-600",size:20}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-green-900",children:"1. Mercado (Frescos)"}),e.jsx("p",{className:"text-[10px] text-green-700",children:"Compra Diaria / Semanal"})]}),e.jsx("span",{className:"ml-auto bg-white text-green-700 text-xs font-bold px-2 py-0.5 rounded-full",children:x.length})]}),e.jsxs("div",{className:"p-3 overflow-y-auto flex-grow space-y-2",children:[x.map(r=>e.jsx(u,{item:r,theme:"market"},r.id)),x.length===0&&e.jsx("p",{className:"text-center text-sm text-green-400 italic mt-4",children:"Sin items asignados a Mercado"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col bg-red-50/50 rounded-xl border border-red-100 overflow-hidden",children:[e.jsxs("div",{className:"p-3 bg-red-100/50 border-b border-red-200 flex items-center gap-2",children:[e.jsx(i,{name:"thermometer",className:"text-red-600",size:20}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-red-900",children:"2. Prep / Mise en Place"}),e.jsx("p",{className:"text-[10px] text-red-700",children:"Salsas, Rellenos, Cocciones"})]}),e.jsx("span",{className:"ml-auto bg-white text-red-700 text-xs font-bold px-2 py-0.5 rounded-full",children:N.length})]}),e.jsxs("div",{className:"p-3 overflow-y-auto flex-grow space-y-2",children:[N.map(r=>e.jsx(u,{item:r,theme:"prep"},r.id)),N.length===0&&e.jsx("p",{className:"text-center text-sm text-red-400 italic mt-4",children:"Sin items asignados a Prep"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col bg-blue-50/50 rounded-xl border border-blue-100 overflow-hidden",children:[e.jsxs("div",{className:"p-3 bg-blue-100/50 border-b border-blue-200 flex items-center gap-2",children:[e.jsx(i,{name:"archive",className:"text-blue-600",size:20}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-blue-900",children:"3. Almacén / Secos"}),e.jsx("p",{className:"text-[10px] text-blue-700",children:"Stock de seguridad"})]}),e.jsx("span",{className:"ml-auto bg-white text-blue-700 text-xs font-bold px-2 py-0.5 rounded-full",children:C.length})]}),e.jsxs("div",{className:"p-3 overflow-y-auto flex-grow space-y-2",children:[C.map(r=>e.jsx(u,{item:r,theme:"pantry"},r.id)),C.length===0&&e.jsx("p",{className:"text-center text-sm text-blue-400 italic mt-4",children:"Sin items asignados a Almacén"})]})]})]})}),w&&e.jsx(U,{isOpen:!!w,onClose:()=>k(null),process:w,users:h,onConfirm:l}),p&&e.jsx(q,{isOpen:!!p,onClose:()=>v(null),item:p.item,isAdding:p.isAdding,onUpdate:d,providers:[]})]})},te=({inventoryHook:a,onToggleSidebar:f,recipesHook:g,usersHook:y})=>{const[d,m]=o.useState("pos");return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("header",{className:"flex-shrink-0 bg-white border-b border-gray-200 p-2 flex items-center gap-2",children:[f&&e.jsx("button",{onClick:f,className:"p-2 mr-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Abrir Menú",children:e.jsx(i,{name:"menu",size:24})}),e.jsx("div",{className:"flex-grow overflow-x-auto flex justify-center custom-scrollbar",children:e.jsxs("div",{className:"flex gap-2 min-w-max px-2",children:[e.jsxs("button",{onClick:()=>m("pos"),className:`flex items-center gap-2 px-3 py-2 rounded-full font-bold transition-all text-sm whitespace-nowrap ${d==="pos"?"bg-gray-800 text-white shadow-md":"text-gray-500 hover:bg-gray-100"}`,children:[e.jsx(i,{name:"plus-circle",size:16}),"POS"]}),e.jsx("div",{className:"w-px bg-gray-300 mx-1 h-6 self-center hidden sm:block"}),e.jsxs("button",{onClick:()=>m("kds-bar"),className:`flex items-center gap-2 px-3 py-2 rounded-full font-bold transition-all text-sm whitespace-nowrap ${d==="kds-bar"?"bg-blue-600 text-white shadow-md":"text-gray-500 hover:bg-gray-100"}`,children:[e.jsx(i,{name:"star",size:16}),"KDS Barra"]}),e.jsxs("button",{onClick:()=>m("kds-kitchen"),className:`flex items-center gap-2 px-3 py-2 rounded-full font-bold transition-all text-sm whitespace-nowrap ${d==="kds-kitchen"?"bg-orange-500 text-white shadow-md":"text-gray-500 hover:bg-gray-100"}`,children:[e.jsx(i,{name:"cake-slice",size:16}),"KDS Cocina"]}),e.jsxs("button",{onClick:()=>m("stock-kitchen"),className:`flex items-center gap-2 px-3 py-2 rounded-full font-bold transition-all text-sm whitespace-nowrap ${d==="stock-kitchen"?"bg-emerald-600 text-white shadow-md":"text-gray-500 hover:bg-gray-100"}`,children:[e.jsx(i,{name:"archive",size:16}),"Stock Cocina"]})]})})]}),e.jsxs("div",{className:"flex-grow overflow-hidden relative",children:[d==="pos"&&e.jsx(G,{}),d==="kds-bar"&&e.jsx(D,{type:"beverage",inventoryHook:a}),d==="kds-kitchen"&&e.jsx(D,{type:"food",inventoryHook:a}),d==="stock-kitchen"&&g&&y?e.jsx(J,{inventoryHook:a,recipesHook:g,usersHook:y}):d==="stock-kitchen"&&e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Cargando módulos..."})]})]})};export{te as default};
