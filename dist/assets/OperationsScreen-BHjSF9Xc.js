import{r as l,j as e,I as $,T as Te,a as xe,b as fe,O as De}from"./index-eKrIgr9i.js";import{M as ve}from"./Modal-BogO2k8k.js";const Me=[{label:"L",value:"1"},{label:"M",value:"2"},{label:"M",value:"3"},{label:"J",value:"4"},{label:"V",value:"5"},{label:"S",value:"6"},{label:"D",value:"0"}],Ce=({isOpen:s,onClose:g,onSave:b,onDelete:A,task:a,selectedDate:k,users:T,editMode:E,isSaving:C,allTasks:H})=>{const[w,O]=l.useState(""),[P,F]=l.useState(""),[h,N]=l.useState("08"),[S,z]=l.useState("00"),[W,ee]=l.useState("AM"),[X,Y]=l.useState("30"),[r,i]=l.useState("pre-apertura"),[m,M]=l.useState(""),[J,G]=l.useState(!1),[I,ne]=l.useState(""),[n,x]=l.useState("once"),[c,p]=l.useState([]),[v,o]=l.useState("4"),[D,d]=l.useState([]),[y,u]=l.useState(""),[f,L]=l.useState(k),[R,V]=l.useState(!0),[te,oe]=l.useState("");l.useEffect(()=>{if(s){const t=T.length>0?T[0].name:"";V(!!(a!=null&&a.date)||E==="new"),O((a==null?void 0:a.text)||""),F((a==null?void 0:a.employee)||t),oe((a==null?void 0:a.addedBy)||t),L((a==null?void 0:a.date)||k);const j=(a==null?void 0:a.time)||"08:00",[B,Z]=j.split(":").map(Number),pe=B>=12?"PM":"AM";let K=B%12;if(K===0&&(K=12),N(String(K).padStart(2,"0")),z(String(Z).padStart(2,"0")),ee(pe),Y(String((a==null?void 0:a.duration)||"30")),i((a==null?void 0:a.shift)||"pre-apertura"),M((a==null?void 0:a.zone)||""),G((a==null?void 0:a.isCritical)||!1),ne((a==null?void 0:a.notes)||""),d((a==null?void 0:a.subtasks)||[]),u(""),a&&E==="future"&&a.recurrenceId){x("weekly");const _=H.filter(q=>q.recurrenceId===a.recurrenceId),se=new Set;_.forEach(q=>{if(q.date){const Q=new Date(q.date);Q.setMinutes(Q.getMinutes()+Q.getTimezoneOffset());const re=Q.getDay();se.add(String(re))}}),p(Array.from(se))}else x("once"),p([]);o("4")}},[s,a,T,k,E,H]);const ie=t=>{p(j=>j.includes(t)?j.filter(B=>B!==t):[...j,t])},he=()=>{if(y.trim()==="")return;const t={id:`sub-${Date.now()}`,text:y.trim(),isCompleted:!1};d([...D,t]),u("")},ue=t=>{t.key==="Enter"&&(t.preventDefault(),he())},de=t=>{d(D.filter(j=>j.id!==t))},ye=t=>{if(t.preventDefault(),!w||!te){alert("Por favor completa el nombre de la tarea y quién la añadió.");return}if(R&&n==="weekly"&&c.length===0&&E!=="single"){alert("Por favor selecciona al menos un día para la tarea recurrente.");return}let j=parseInt(h,10);W==="PM"&&j!==12?j+=12:W==="AM"&&j===12&&(j=0);const B=`${String(j).padStart(2,"0")}:${S}`,Z={text:w,employee:P,addedBy:te,duration:parseInt(X,10),shift:r,zone:m,isCritical:J,notes:I,subtasks:D,...R&&{time:B,date:f,recurrence:n,selectedDays:c,recurrenceWeeks:v}};b(Z,a==null?void 0:a.id)},ge=()=>{a&&A(a)},ce=!!a;return e.jsx(ve,{isOpen:s,onClose:C?()=>{}:g,title:a?"Editar Tarea":"Añadir Nueva Tarea",children:e.jsxs("form",{onSubmit:ye,className:"flex flex-col gap-4 max-h-[80vh] overflow-y-auto pr-2",children:[e.jsxs("fieldset",{disabled:C,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Nombre de la Tarea"}),e.jsx("input",{type:"text",value:w,onChange:t=>O(t.target.value),required:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Asignada a"}),e.jsx("select",{value:P,onChange:t=>F(t.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:T.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Añadida por"}),e.jsx("select",{value:te,onChange:t=>oe(t.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:T.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))})]})]}),e.jsx("div",{className:"form-group mt-4 p-3 bg-gray-100 rounded-lg",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Planificar fecha y hora"}),e.jsx("div",{className:`w-11 h-6 rounded-full p-1 transition-colors ${R?"bg-blue-600":"bg-gray-300"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-md transform transition-transform ${R?"translate-x-5":""}`})}),e.jsx("input",{type:"checkbox",checked:R,onChange:t=>{const j=t.target.checked;if(V(j),j&&!(a!=null&&a.date)){const B=new Date;B.setMinutes(B.getMinutes()-B.getTimezoneOffset()),L(B.toISOString().split("T")[0])}},className:"hidden"})]})}),R&&e.jsxs("div",{className:"mt-4 flex flex-col gap-4",children:[(E==="single"||E==="new")&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Fecha"}),e.jsx("input",{type:"date",value:f,onChange:t=>L(t.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50"})]}),e.jsxs("fieldset",{disabled:ce&&E!=="future",className:"",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 mb-2 block",children:"Repetición"}),e.jsxs("div",{className:"flex gap-2 bg-gray-200 rounded-lg p-1",children:[e.jsx("button",{type:"button",onClick:()=>x("once"),className:`flex-1 p-2 rounded-md text-sm font-bold transition-colors ${n==="once"?"bg-white shadow-sm":""}`,children:"Una vez"}),e.jsx("button",{type:"button",onClick:()=>x("weekly"),className:`flex-1 p-2 rounded-md text-sm font-bold transition-colors ${n==="weekly"?"bg-white shadow-sm":""}`,children:"Semanalmente"})]}),ce&&E==="single"&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"La repetición no se puede cambiar al editar una sola instancia."}),ce&&E==="future"&&e.jsxs("div",{className:"mt-2 p-3 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 text-sm rounded-r-lg flex items-start gap-3",children:[e.jsx($,{name:"alert-triangle",size:20,className:"flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Atención"}),e.jsx("p",{children:"Cambiar la repetición reemplazará todas las futuras tareas de esta serie."})]})]})]}),n==="weekly"&&e.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 mb-2 block",children:"Días de la semana"}),e.jsx("div",{className:"flex justify-between gap-1",children:Me.map(({label:t,value:j})=>e.jsx("button",{type:"button",onClick:()=>ie(j),className:`w-9 h-9 flex items-center justify-center font-bold rounded-full border-2 transition-colors ${c.includes(j)?"bg-blue-600 text-white border-blue-600":"bg-gray-100 border-gray-300"}`,children:t},j))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Repetir durante"}),e.jsxs("select",{value:v,onChange:t=>o(t.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:[e.jsx("option",{value:"4",children:"4 semanas"}),e.jsx("option",{value:"8",children:"8 semanas"}),e.jsx("option",{value:"12",children:"12 semanas"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Hora"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("select",{value:h,onChange:t=>N(t.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:Array.from({length:12},(t,j)=>j+1).map(t=>e.jsx("option",{value:String(t).padStart(2,"0"),children:String(t).padStart(2,"0")},t))}),e.jsx("select",{value:S,onChange:t=>z(t.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:Array.from({length:60},(t,j)=>j).map(t=>e.jsx("option",{value:String(t).padStart(2,"0"),children:String(t).padStart(2,"0")},t))}),e.jsxs("select",{value:W,onChange:t=>ee(t.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:[e.jsx("option",{children:"AM"}),e.jsx("option",{children:"PM"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Turno"}),e.jsxs("select",{value:r,onChange:t=>i(t.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:[e.jsx("option",{value:"matutino",children:"Matutino"}),e.jsx("option",{value:"pre-apertura",children:"Pre Apertura"}),e.jsx("option",{value:"cierre",children:"Cierre"}),e.jsx("option",{value:"default",children:"Otro"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Duración Estimada"}),e.jsx("select",{value:X,onChange:t=>Y(t.target.value),required:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:Te.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Zona (Opcional)"}),e.jsx("input",{type:"text",value:m,onChange:t=>M(t.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50"})]})]}),e.jsxs("div",{className:"form-group mt-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Notas (Opcional)"}),e.jsx("textarea",{value:I,onChange:t=>ne(t.target.value),rows:3,placeholder:"Añade comentarios o detalles adicionales aquí...",className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50"})]}),e.jsxs("div",{className:"form-group mt-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 mb-2 block",children:"Subtareas"}),e.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg",children:[D.length>0&&e.jsx("ul",{className:"space-y-2 mb-3",children:D.map(t=>e.jsxs("li",{className:"flex items-center justify-between bg-white p-2 rounded",children:[e.jsx("span",{className:"text-sm text-gray-700",children:t.text}),e.jsx("button",{type:"button",onClick:()=>de(t.id),className:"p-1 text-gray-400 hover:text-red-600",children:e.jsx($,{name:"trash-2",size:16})})]},t.id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:y,onChange:t=>u(t.target.value),onKeyDown:ue,placeholder:"Añadir una subtarea...",className:"w-full p-2 border border-gray-300 rounded-md bg-white text-sm"}),e.jsx("button",{type:"button",onClick:he,className:"py-2 px-4 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 text-sm",children:"Añadir"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("input",{type:"checkbox",id:"task-critical",checked:J,onChange:t=>G(t.target.checked),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"task-critical",className:"text-sm font-medium text-gray-600",children:"Es una tarea crítica"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t sticky bottom-0 bg-white",children:[e.jsx("div",{children:a&&e.jsx("button",{type:"button",onClick:ge,disabled:C,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 disabled:bg-red-400",children:"Eliminar"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:g,disabled:C,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300 disabled:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:C,className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 w-36 flex items-center justify-center disabled:bg-blue-400",children:C?e.jsxs(e.Fragment,{children:[e.jsx($,{name:"refresh-cw",className:"animate-spin mr-2",size:16}),"Guardando..."]}):"Guardar"})]})]})]})})},Ee=({selectedDate:s,setSelectedDate:g,tasks:b,users:A})=>{const[a,k]=l.useState(s),[T,E]=l.useState(""),C=l.useRef(0),H=l.useMemo(()=>A.reduce((r,i)=>(r[i.name]=i.color,r),{}),[A]),w=l.useMemo(()=>{const r=new Map;b.forEach(i=>{if(i.date){const m=i.date;r.has(m)||r.set(m,[]),r.get(m).push(i.employee)}});for(const[i,m]of r.entries())r.set(i,Array.from(new Set(m)));return r},[b]);l.useEffect(()=>{k(s)},[s]),l.useEffect(()=>{if(T.startsWith("slide-out")){const r=T.includes("left")?"next":"prev",i=setTimeout(()=>{const m=new Date(a);m.setDate(m.getDate()+(r==="prev"?-7:7)),k(m);const M=new Date(s);M.setDate(M.getDate()+(r==="prev"?-7:7)),g(M),E(r==="next"?"slide-in-from-right":"slide-in-from-left")},200);return()=>clearTimeout(i)}else if(T.startsWith("slide-in")){const r=setTimeout(()=>{E("")},200);return()=>clearTimeout(r)}},[T,a,s,g]);const O=r=>{T||E(r==="next"?"slide-out-left":"slide-out-right")},P=r=>{const i=r.target.value;if(i){const m=new Date(i);m.setMinutes(m.getMinutes()+m.getTimezoneOffset()),g(m)}},F=r=>{C.current=r.targetTouches[0].clientX},h=r=>{const i=r.changedTouches[0].clientX,m=50,M=C.current-i;M>m?O("next"):M<-m&&O("prev")},N=new Date;N.setHours(0,0,0,0);const S=new Date(a),z=a.getDay(),W=a.getDate()-z+(z===0?-6:1);S.setDate(W),S.setHours(0,0,0,0);const ee=[];for(let r=0;r<7;r++){const i=new Date(S);i.setDate(S.getDate()+r),ee.push(i)}const X=(r,i)=>r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()&&r.getDate()===i.getDate(),Y=a.toLocaleDateString("es-ES",{month:"long",year:"numeric"});return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[e.jsx("button",{onClick:()=>O("prev"),className:"p-2 text-gray-500 hover:text-blue-600 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx($,{name:"chevron-left",size:20})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-bold text-gray-700 capitalize text-sm",children:Y}),e.jsxs("div",{className:"relative w-9 h-9 flex items-center justify-center text-gray-500 hover:text-blue-600 rounded-full hover:bg-gray-100 transition-colors cursor-pointer",title:"Seleccionar fecha",children:[e.jsx($,{name:"calendar",size:18}),e.jsx("input",{type:"date",onChange:P,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer","aria-label":"Seleccionar fecha"})]})]}),e.jsx("button",{onClick:()=>O("next"),className:"p-2 text-gray-500 hover:text-blue-600 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx($,{name:"chevron-right",size:20})})]}),e.jsx("div",{className:"p-1 bg-gray-200 rounded-lg overflow-hidden relative touch-pan-y",children:e.jsx("div",{className:`flex justify-between items-center gap-1 md:gap-2 ${T}`,onTouchStart:F,onTouchEnd:h,children:ee.map(r=>{const i=X(r,s),m=X(r,N),M=new Date(r);M.setMinutes(M.getMinutes()-M.getTimezoneOffset());const J=M.toISOString().split("T")[0],G=w.get(J)||[];return e.jsx("button",{onClick:()=>g(r),className:"px-1 py-1 md:px-2 md:py-2 rounded-md transition-all duration-200 text-center flex-1",children:e.jsxs("div",{className:`${i?"bg-white shadow-sm rounded-md":""} py-1`,children:[e.jsx("span",{className:`text-xs uppercase font-bold ${i?"text-blue-600":"text-gray-500"}`,children:r.toLocaleDateString("es-ES",{weekday:"short"}).replace(".","")}),e.jsx("p",{className:`font-bold text-lg ${m?"text-blue-600":i?"text-gray-800":"text-gray-600"}`,children:r.getDate()}),e.jsx("div",{className:"flex justify-center items-center h-2 mt-1 gap-0.5",children:G.slice(0,4).map(I=>e.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:H[I]||"#9ca3af"},title:I},I))})]})},r.toISOString())})})})]})},Ie=s=>{switch(s){case"inprogress":return"opacity-100 animate-pulse-yellow";case"done":return"opacity-50";case"todo":default:return"opacity-100"}},Ae=({task:s,onUpdateStatus:g,onEdit:b,onViewSubtasks:A,style:a,userColor:k,onDragStart:T,onDragOver:E,onDrop:C,onDragEnd:H,onDragLeave:w,onTouchStart:O,onTouchMove:P,onTouchEnd:F,isBeingDragged:h,isDropTarget:N})=>{var J,G;const S=Ie(s.status),z=I=>{I.stopPropagation(),s.status==="todo"?g(s.id,"inprogress"):s.status==="inprogress"?g(s.id,"done"):s.status==="done"&&g(s.id,"todo")},W=new Date(`${s.date}T${s.time}`),X=new Date(W.getTime()+s.duration*6e4).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"}),Y=((J=s.subtasks)==null?void 0:J.length)||0,r=((G=s.subtasks)==null?void 0:G.filter(I=>I.isCompleted).length)||0,i={...a,borderWidth:"2px",borderColor:s.status==="inprogress"?k:"transparent",backgroundColor:"#f9fafb"},m={color:"#374151"},M=`
        absolute rounded-lg p-2 flex gap-2 transition-all duration-300 cursor-grab
        ${S}
        ${h?"opacity-40 scale-105":""}
        ${N?"drop-target-indicator":""}
    `;return e.jsxs("div",{style:i,draggable:!0,"data-task-id":s.id,onDragStart:()=>T(s.id),onDragOver:I=>E(I,s.id),onDrop:()=>C(s.id),onDragEnd:H,onDragLeave:w,onTouchStart:I=>O(I,s.id),onTouchMove:P,onTouchEnd:F,onClick:A,className:M,children:[e.jsx("div",{className:"flex-shrink-0 w-1 h-full rounded-full",style:{backgroundColor:k}}),e.jsxs("div",{className:"flex-grow flex flex-col min-w-0 min-h-0",children:[e.jsxs("div",{className:"flex-grow overflow-hidden",children:[e.jsxs("p",{className:`font-bold text-sm truncate ${s.status==="done"?"line-through":""}`,style:m,children:[s.isCritical&&e.jsx($,{name:"alert-triangle",size:14,className:"inline-block mr-1 text-red-600",title:"Tarea Crítica"}),s.text]}),e.jsxs("p",{className:`text-xs ${s.status==="done"?"line-through":""}`,style:m,children:[s.time," - ",X," (",s.duration," min)"]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1 flex-shrink-0",children:[e.jsx("span",{className:"text-xs font-bold px-2 py-0.5 rounded-full bg-white/60",style:m,children:s.employee}),e.jsxs("div",{className:"flex items-center gap-2",style:m,children:[s.notes&&s.notes.trim()!==""&&e.jsx($,{name:"message-square",size:14,title:"Esta tarea tiene notas"}),Y>0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs font-semibold",children:[e.jsx($,{name:"list",size:14}),e.jsxs("span",{children:[r,"/",Y]})]}),e.jsx("button",{onClick:I=>{I.stopPropagation(),b(s)},className:"p-1 rounded-full hover:bg-black/10 transition-colors",title:"Editar Tarea",children:e.jsx($,{name:"pencil",size:14})})]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("button",{onClick:z,className:"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all",style:{borderColor:s.status==="done"?"#4ade80":"#9ca3af",backgroundColor:s.status==="done"?"#4ade80":"white"},children:[s.status==="inprogress"&&e.jsx("div",{className:"w-2.5 h-2.5 bg-yellow-500 rounded-full"}),s.status==="done"&&e.jsx($,{name:"check",size:16,className:"text-white"})]})})]})},ke=({task:s,onClose:g,onUpdateTask:b})=>{var P,F;const[A,a]=l.useState(""),k=h=>{const N=(s.subtasks||[]).map(S=>S.id===h?{...S,isCompleted:!S.isCompleted}:S);b({...s,subtasks:N})},T=()=>{if(A.trim()==="")return;const h={id:`sub-${Date.now()}`,text:A.trim(),isCompleted:!1},N=[...s.subtasks||[],h];b({...s,subtasks:N}),a("")},E=h=>{const N=(s.subtasks||[]).filter(S=>S.id!==h);b({...s,subtasks:N})},C=h=>{h.key==="Enter"&&(h.preventDefault(),T())},H=((P=s.subtasks)==null?void 0:P.filter(h=>h.isCompleted).length)||0,w=((F=s.subtasks)==null?void 0:F.length)||0,O=w>0?H/w*100:0;return e.jsx("div",{className:"absolute inset-0 bg-gray-900/40 z-50 flex justify-center items-center p-4",onClick:g,children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md flex flex-col",onClick:h=>h.stopPropagation(),children:[e.jsxs("header",{className:"p-4 border-b",children:[e.jsx("h3",{className:"font-bold text-lg text-blue-700",children:s.text}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.time," - ",s.employee]})]}),e.jsxs("div",{className:"p-4 flex-grow overflow-y-auto max-h-[50vh]",children:[s.notes&&s.notes.trim()!==""&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-bold text-gray-700 mb-2",children:"Notas"}),e.jsx("div",{className:"p-3 bg-yellow-50 border-l-4 border-yellow-400 text-gray-800 text-sm rounded-r-lg whitespace-pre-wrap",children:s.notes})]}),w>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[e.jsx("span",{className:"font-semibold text-gray-600",children:"Progreso de Subtareas"}),e.jsxs("span",{children:[H," / ",w]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${O}%`}})})]}),e.jsx("div",{className:"space-y-2",children:(s.subtasks||[]).map(h=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-md group",children:[e.jsx("input",{type:"checkbox",checked:h.isCompleted,onChange:()=>k(h.id),className:"w-5 h-5 rounded text-blue-600 focus:ring-blue-500 flex-shrink-0"}),e.jsx("span",{className:`flex-grow text-gray-800 ${h.isCompleted?"line-through text-gray-400":""}`,children:h.text}),e.jsx("button",{onClick:()=>E(h.id),className:"p-1 text-gray-400 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx($,{name:"trash-2",size:16})})]},h.id))}),w===0&&(!s.notes||s.notes.trim()==="")&&e.jsx("p",{className:"text-center text-gray-500 py-6",children:"No hay subtareas ni notas. ¡Añade la primera!"})]}),e.jsx("div",{className:"p-4 border-t bg-gray-50 rounded-b-xl",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:A,onChange:h=>a(h.target.value),onKeyDown:C,placeholder:"Añadir nueva subtarea...",className:"w-full p-2 border border-gray-300 rounded-md bg-white text-sm focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:T,className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 text-sm",children:"Añadir"})]})})]})})},be=2.5,we=90,Se=15,Oe=70,$e=100,Pe=40,ze=s=>{const g=Math.floor(s/60),b=Math.round(s%60);return`${g}h ${b}min entre tareas`},_e=s=>{const[g,b]=s.split(":").map(Number);return g*60+b},Fe=({tasks:s,onUpdateStatus:g,onEditTask:b,onUpdateTask:A,onReorderTasks:a,users:k})=>{const[T,E]=l.useState(new Date),[C,H]=l.useState(null),[w,O]=l.useState(null),[P,F]=l.useState(null),h=l.useMemo(()=>k.reduce((n,x)=>(n[x.name]=x.color,n),{}),[k]);l.useEffect(()=>{const n=setInterval(()=>E(new Date),6e4);return()=>clearInterval(n)},[]),l.useEffect(()=>{if(C){const n=s.find(x=>x.id===C.id);H(n||null)}},[s,C]);const{timelineItems:N,totalHeight:S,getPositionForMinute:z}=l.useMemo(()=>{const n=[],x=s.filter(d=>d.time).sort((d,y)=>d.time.localeCompare(y.time));let c=fe*60;x.forEach(d=>{const y=_e(d.time),u=y+d.duration,f=y-c;f>we?n.push({type:"gap",startMinute:c,duration:f}):f>=Se?n.push({type:"short_break",startMinute:c,duration:f}):f>0&&n.push({type:"empty",startMinute:c,duration:f}),n.push({type:"task",task:d,startMinute:y,duration:d.duration}),c=Math.max(c,u)});const p=xe*60-c;p>we?n.push({type:"gap",startMinute:c,duration:p}):p>=Se?n.push({type:"short_break",startMinute:c,duration:p}):p>0&&n.push({type:"empty",startMinute:c,duration:p});let v=0;const o=n.map(d=>{const y=v;let u=0;return d.type==="task"?u=Math.max(d.duration*be,$e):d.type==="gap"?u=Oe:d.type==="short_break"?u=Pe:d.type==="empty"&&(u=d.duration*be),v+=u,{...d,top:y,height:u}});return{timelineItems:o,totalHeight:v,getPositionForMinute:d=>{for(const u of o)if(d>=u.startMinute&&d<u.startMinute+u.duration){const f=d-u.startMinute;if(u.type==="task"||u.type==="empty")return u.top+f*be;if(u.type==="gap"||u.type==="short_break")return u.top+f/u.duration*u.height}const y=o[o.length-1];return y?y.top+y.height:(d-fe*60)*be}}},[s]),W=l.useMemo(()=>{const n=N.filter(v=>v.type==="task");if(n.length===0)return[];const x=[],c=new Set,p=[...n].sort((v,o)=>v.startMinute-o.startMinute);for(const v of p){if(c.has(v.task.id))continue;const o=[],D=[v],d=new Set([v.task.id]);for(;D.length>0;){const f=D.shift();o.push(f);const L=f.startMinute,R=L+f.task.duration;for(const V of p)if(!d.has(V.task.id)){const te=V.startMinute,oe=te+V.task.duration;L<oe&&R>te&&(d.add(V.task.id),D.push(V))}}o.forEach(f=>c.add(f.task.id)),o.sort((f,L)=>f.startMinute-L.startMinute);const y=[];for(const f of o){let L=!1;for(const R of y){const V=R[R.length-1],te=V.startMinute+V.task.duration;if(f.startMinute>=te){R.push(f),L=!0;break}}L||y.push([f])}const u=y.length;y.forEach((f,L)=>{f.forEach(R=>{x.push({task:R.task,top:R.top,height:R.height,width:100/u,left:L/u*100,zIndex:L+1})})})}return x},[N]),ee=l.useMemo(()=>{const n=new Map,x=new Map(W.map(o=>[o.task.id,o])),c=new Set;if(N.length===0)for(let o=fe;o<=xe;o++)c.add(o);else N.forEach(o=>{const D=Math.floor(o.startMinute/60),d=o.startMinute+o.duration,y=Math.ceil(d/60);o.type==="gap"?(c.add(D),c.add(y)):(o.type==="task"||(o.type==="empty"||o.type==="short_break")&&o.startMinute%60===0)&&c.add(D)}),c.add(fe),c.add(xe);c.forEach(o=>{o>xe||n.set(o*60,`${String(o).padStart(2,"0")}:00`)}),N.forEach(o=>{if(o.type==="task"){const{startMinute:D,task:d}=o,y=x.get(d.id);if(y&&y.left>0)return;const u=Math.floor(D/60),f=D%60;f!==0&&n.set(D,`${String(u).padStart(2,"0")}:${String(f).padStart(2,"0")}`)}});const p=Array.from(n.entries()).map(([o,D])=>({minute:o,label:D})).sort((o,D)=>o.minute-D.minute);if(p.length<2)return p;const v=[p[0]];for(let o=1;o<p.length;o++){const D=v[v.length-1],d=p[o],y=z(D.minute);z(d.minute)-y>20&&v.push(d)}return v},[N,z,W]),X=T.getHours()*60+T.getMinutes(),Y=z(X),r=n=>{O(n)},i=(n,x)=>{n.preventDefault(),x!==w&&F(x)},m=n=>{w&&n!==w&&a(w,n),O(null),F(null)},M=()=>{O(null),F(null)},J=()=>{F(null)},G=(n,x)=>{O(x)},I=n=>{if(!w)return;n.preventDefault();const x=n.touches[0],c=document.elementFromPoint(x.clientX,x.clientY);if(c){const p=c.closest("[data-task-id]");if(p){const v=p.getAttribute("data-task-id");v&&v!==w&&v!==P&&F(v)}else P&&F(null)}},ne=()=>{w&&P&&a(w,P),O(null),F(null)};return e.jsxs("div",{className:"p-4 md:p-6 h-full relative",children:[e.jsxs("div",{className:"relative z-10",style:{height:`${S}px`},children:[ee.map(({minute:n,label:x})=>{const c=z(n);if(c>S+1||n>xe*60)return null;const p=n%60===0;return e.jsxs("div",{className:"absolute w-full",style:{top:`${c}px`},children:[e.jsx("span",{className:`absolute -top-2.5 left-0 text-xs w-16 text-right pr-4 ${p?"font-semibold text-gray-500":"font-normal text-gray-400"}`,children:x}),e.jsx("div",{className:`h-px ml-16 ${p?"bg-gray-200":"bg-gray-200/60"}`})]},n)}),Y>=0&&Y<=S&&e.jsx("div",{className:"absolute left-16 right-0 h-0.5 bg-red-500 z-20",style:{top:`${Y}px`},children:e.jsx("div",{className:"absolute -left-1.5 -top-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white"})}),e.jsxs("div",{className:"absolute top-0 bottom-0 left-16 right-0",children:[N.filter(n=>n.type==="gap").map(n=>e.jsx("div",{className:"absolute w-full flex items-center",style:{top:`${n.top}px`,height:`${n.height}px`},children:e.jsx("div",{className:"w-full border-t-2 border-dashed border-gray-300 relative",children:e.jsx("span",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-gray-50 px-2 text-xs font-semibold text-gray-500",children:ze(n.duration)})})},`gap-${n.startMinute}`)),N.filter(n=>n.type==="short_break").map(n=>e.jsx("div",{className:"absolute w-full flex items-center",style:{top:`${n.top}px`,height:`${n.height}px`},children:e.jsxs("div",{className:"w-full flex items-center justify-center gap-2 text-gray-400",children:[e.jsx("div",{className:"flex-grow border-t border-dashed border-gray-300"}),e.jsxs("span",{className:"text-xs font-semibold whitespace-nowrap",children:[Math.round(n.duration)," min libres"]}),e.jsx("div",{className:"flex-grow border-t border-dashed border-gray-300"})]})},`break-${n.startMinute}`)),W.map(({task:n,top:x,height:c,left:p,width:v,zIndex:o})=>e.jsx(Ae,{task:n,onUpdateStatus:g,onEdit:b,onViewSubtasks:()=>H(n),userColor:h[n.employee]||"#9ca3af",style:{top:`${x}px`,height:`${c-4}px`,left:`${p}%`,width:`calc(${v}% - 4px)`,zIndex:o},onDragStart:r,onDragOver:i,onDrop:m,onDragEnd:M,onDragLeave:J,onTouchStart:G,onTouchMove:I,onTouchEnd:ne,isBeingDragged:n.id===w,isDropTarget:n.id===P},n.id))]})]}),C&&e.jsx(ke,{task:C,onClose:()=>H(null),onUpdateTask:A})]})},He=s=>s>0?`en ${s} min`:s===0?"¡Ahora!":`hace ${Math.abs(s)} min`,Re=({tasksWithDiff:s})=>e.jsxs("div",{className:"bg-yellow-100 border-b-2 border-yellow-300 p-3 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx($,{name:"alert-triangle",className:"text-yellow-600",size:20}),e.jsx("h3",{className:"font-bold text-yellow-800 text-base",children:"Tareas Críticas Próximas"})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:s.map(({task:g,diff:b})=>e.jsxs("div",{className:"bg-white/70 p-2 rounded-lg border border-yellow-300 flex-shrink-0 w-60",children:[e.jsx("p",{className:"font-bold text-sm text-gray-800 truncate",children:g.text}),e.jsxs("p",{className:`text-xs font-semibold ${b<=0?"text-red-600 animate-pulse":"text-blue-600"}`,children:[g.time," (",He(b),")"]})]},g.id))})]}),We=({isOpen:s,onClose:g,onSelectThisOne:b,onSelectFuture:A,isDelete:a=!1})=>{const T=`¿Qué tareas quieres ${a?"eliminar":"editar"}?`,E=a?"Eliminar solo esta tarea":"Editar solo esta tarea",C="La acción solo se aplicará a esta instancia. El resto de la serie no se verá afectado.",H=a?"Eliminar esta y futuras tareas":"Editar esta y futuras tareas",w="La acción se aplicará a esta y a todas las repeticiones futuras de la serie.",O=a?"trash-2":"pencil";return e.jsx(ve,{isOpen:s,onClose:g,title:T,children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("button",{onClick:b,className:"p-4 bg-gray-100 rounded-lg border-2 border-transparent hover:border-blue-500 transition-all text-left",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($,{name:O,size:24,className:"text-blue-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800",children:E}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C})]})]})}),e.jsx("button",{onClick:A,className:"p-4 bg-gray-100 rounded-lg border-2 border-transparent hover:border-blue-500 transition-all text-left",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($,{name:"calendar",size:24,className:"text-blue-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800",children:H}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w})]})]})}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{type:"button",onClick:g,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"})})]})})},Le=({tasks:s,onEditTask:g,users:b})=>{const A=l.useMemo(()=>b.reduce((a,k)=>(a[k.name]=k.color,a),{}),[b]);return s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500 p-8",children:[e.jsx($,{name:"check-circle",size:48,className:"text-green-500 mb-4"}),e.jsx("h3",{className:"text-xl font-bold",children:"¡Bandeja Limpia!"}),e.jsx("p",{children:"No hay tareas pendientes sin planificar."})]}):e.jsx("div",{className:"p-4 md:p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"hidden md:grid grid-cols-[3fr_1.5fr_1.5fr_1fr] gap-4 px-4 pb-2 border-b border-gray-200",children:[e.jsx("h4",{className:"text-xs font-bold uppercase text-gray-500",children:"Tarea"}),e.jsx("h4",{className:"text-xs font-bold uppercase text-gray-500",children:"Asignado a"}),e.jsx("h4",{className:"text-xs font-bold uppercase text-gray-500",children:"Añadida por"}),e.jsx("h4",{className:"text-xs font-bold uppercase text-gray-500 text-right",children:"Acciones"})]}),s.map(a=>e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm hover:border-blue-400 transition-all grid grid-cols-2 md:grid-cols-[3fr_1.5fr_1.5fr_1fr] gap-x-4 gap-y-2 items-center",children:[e.jsx("div",{className:"col-span-2 md:col-span-1",children:e.jsxs("p",{className:"font-bold text-gray-800 break-words flex items-center gap-2",children:[a.isCritical&&e.jsx($,{name:"alert-triangle",size:16,className:"text-red-500 flex-shrink-0",title:"Tarea Crítica"}),a.text,a.notes&&e.jsx($,{name:"message-square",size:14,className:"text-gray-400 flex-shrink-0",title:"Tiene notas"})]})}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-semibold text-gray-500 md:hidden",children:"Asignado:"}),e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:A[a.employee]||"#9ca3af"}}),e.jsx("span",{className:"text-gray-700",children:a.employee})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-semibold text-gray-500 md:hidden",children:"Añadida:"}),e.jsx("span",{className:"text-gray-700",children:a.addedBy})]}),e.jsx("div",{className:"col-span-2 md:col-span-1 flex justify-end",children:e.jsxs("button",{onClick:()=>g(a),className:"w-full md:w-auto flex-shrink-0 flex items-center justify-center gap-2 bg-blue-100 text-blue-700 font-semibold py-2 px-3 rounded-lg hover:bg-blue-200 transition-colors text-xs",children:[e.jsx($,{name:"calendar",size:14}),"Planificar"]})})]},a.id))]})})},Ke=({kanbanHook:s,criticalTasks:g,users:b})=>{const{tasks:A,addTask:a,addMultipleTasks:k,updateTask:T,updateTaskStatus:E,deleteTask:C,updateFutureTasks:H,deleteFutureTasks:w,reorderDailyTasks:O}=s,[P,F]=l.useState(new Date),[h,N]=l.useState(!1),[S,z]=l.useState(null),[W,ee]=l.useState("All"),[X,Y]=l.useState("agenda"),[r,i]=l.useState(null),[m,M]=l.useState(null),[J,G]=l.useState("new"),[I,ne]=l.useState(null),[n,x]=l.useState(!1),[c,p]=l.useState(""),[v,o]=l.useState(""),[D,d]=l.useState(!1),y=t=>{t.recurrenceId?(M("edit"),i(t)):(G("single"),z(t),N(!0))},u=()=>{N(!1),z(null),G("new")},f=async(t,j)=>{const{recurrence:B,selectedDays:Z,recurrenceWeeks:pe,...K}=t;d(!0);try{if(j&&S)if(!K.date)await T({...K,id:j,status:S.status});else if(J==="future")if(B==="weekly"&&Z&&Z.length>0){await w(S);const _=new Date(S.date);_.setMinutes(_.getMinutes()+_.getTimezoneOffset());const se=parseInt(pe||"4",10),q=[],Q=new Date(_),re=_.getDay(),je=_.getDate()-re+(re===0?-6:1);Q.setDate(je);for(let le=0;le<se;le++){const ae=new Date(Q);ae.setDate(Q.getDate()+le*7),Z.forEach(Ne=>{const me=parseInt(Ne,10),U=new Date(ae);me===0?U.setDate(ae.getDate()+6):U.setDate(ae.getDate()+(me-1)),U.getTime()>=_.getTime()&&(U.setMinutes(U.getMinutes()-U.getTimezoneOffset()),q.push({...K,date:U.toISOString().split("T")[0]}))})}await k(q)}else{const{date:_,time:se,...q}=K;await H(S,q)}else{const{recurrenceId:_,...se}=S,q={...se,...K,id:j};await T(q)}else if(!K.date)await a(K);else{const _=new Date(K.date);if(_.setMinutes(_.getMinutes()+_.getTimezoneOffset()),B==="weekly"&&Z&&Z.length>0){const se=parseInt(pe||"4",10),q=[],Q=new Date(_),re=_.getDay(),je=_.getDate()-re+(re===0?-6:1);Q.setDate(je);for(let le=0;le<se;le++){const ae=new Date(Q);ae.setDate(Q.getDate()+le*7),Z.forEach(Ne=>{const me=parseInt(Ne,10),U=new Date(ae);me===0?U.setDate(ae.getDate()+6):U.setDate(ae.getDate()+(me-1)),U.setMinutes(U.getMinutes()-U.getTimezoneOffset()),q.push({...K,date:U.toISOString().split("T")[0]})})}await k(q)}else await a(K)}u()}catch(_){console.error("Error saving task:",_)}finally{d(!1)}},L=t=>{N(!1),z(null),t.recurrenceId?(M("delete"),i(t)):ie(()=>C(t.id))},R=()=>{r&&(G("single"),z(r),N(!0),i(null),M(null))},V=()=>{r&&(G("future"),z(r),N(!0),i(null),M(null))},te=()=>{r&&(ie(()=>C(r.id)),i(null),M(null))},oe=()=>{r&&(ie(()=>w(r)),i(null),M(null))},ie=t=>{ne(()=>t),x(!0),p(""),o("")},he=()=>{c===De?(I==null||I(),x(!1),ne(null)):(o("PIN incorrecto. Inténtalo de nuevo."),p(""))},ue=l.useMemo(()=>{const t=new Date(P);return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().split("T")[0]},[P]),de=l.useMemo(()=>A.filter(t=>W==="All"||t.employee===W),[A,W]),ye=l.useMemo(()=>de.filter(t=>t.date===ue),[de,ue]),ge=l.useMemo(()=>de.filter(t=>!t.date),[de]),ce=({view:t,label:j,icon:B,count:Z})=>e.jsxs("button",{onClick:()=>Y(t),className:`flex items-center gap-2 py-2 px-4 text-sm md:text-base font-bold border-b-4 transition-colors ${X===t?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-800"}`,children:[e.jsx($,{name:B,size:18}),j,Z>0&&e.jsx("span",{className:"text-xs bg-gray-300 text-gray-700 font-bold rounded-full px-2",children:Z})]});return e.jsxs("div",{className:"flex flex-col h-full bg-gray-50",children:[g.length>0&&e.jsx(Re,{tasksWithDiff:g}),e.jsxs("div",{className:"operations-header flex flex-col p-4 border-b border-gray-200 gap-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex justify-between items-center w-full gap-4",children:[e.jsxs("div",{className:"flex",children:[e.jsx(ce,{view:"agenda",label:"Agenda Diaria",icon:"calendar",count:0}),e.jsx(ce,{view:"pending",label:"Tareas Pendientes",icon:"clipboard-list",count:ge.length})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("button",{onClick:()=>{G("new"),z(null),N(!0)},className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-3 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx($,{name:"plus-circle",size:16}),e.jsx("span",{className:"hidden md:inline",children:"Añadir Tarea"}),e.jsx("span",{className:"md:hidden",children:"Añadir"})]})})]}),X==="agenda"&&e.jsx(Ee,{selectedDate:P,setSelectedDate:F,tasks:A,users:b}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-200 rounded-lg p-1 w-full overflow-x-auto",children:[e.jsx("button",{onClick:()=>ee("All"),className:`px-3 py-1 text-sm font-bold rounded-md transition-colors ${W==="All"?"bg-white shadow-sm":"bg-transparent text-gray-600"}`,children:"Todos"}),b.map(t=>e.jsx("button",{onClick:()=>ee(t.name),className:`px-3 py-1 text-sm font-bold rounded-md transition-colors ${W===t.name?"bg-white shadow-sm":"bg-transparent text-gray-600"}`,children:t.name},t.id))]})]}),e.jsx("div",{className:"flex-grow overflow-auto relative",children:X==="agenda"?e.jsx(Fe,{tasks:ye,onEditTask:y,onUpdateStatus:E,onUpdateTask:T,onReorderTasks:O,users:b}):e.jsx(Le,{tasks:ge,onEditTask:y,users:b})}),e.jsx(Ce,{isOpen:h,onClose:u,onSave:f,onDelete:L,task:S,selectedDate:ue,users:b,editMode:J,isSaving:D,allTasks:A}),e.jsx(We,{isOpen:!!r,onClose:()=>i(null),onSelectThisOne:m==="edit"?R:te,onSelectFuture:m==="edit"?V:oe,isDelete:m==="delete"}),n&&e.jsx(ve,{isOpen:n,onClose:()=>x(!1),title:"Confirmar Acción",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-bold text-lg text-gray-800",children:"Acción Protegida"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2 mb-4",children:"Para continuar, introduce el PIN de operaciones."}),e.jsx("input",{type:"password",value:c,onChange:t=>{p(t.target.value),o("")},placeholder:"PIN de Seguridad",autoFocus:!0,className:"w-full p-2 border border-gray-300 rounded-md text-center"}),v&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:v}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx("button",{onClick:()=>x(!1),className:"flex-1 py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{onClick:he,className:"flex-1 py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Confirmar"})]})]})})]})};export{Ke as default};
