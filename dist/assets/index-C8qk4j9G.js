(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function g_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zm={exports:{}},Qa={},Bm={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $i=Symbol.for("react.element"),y_=Symbol.for("react.portal"),v_=Symbol.for("react.fragment"),__=Symbol.for("react.strict_mode"),w_=Symbol.for("react.profiler"),E_=Symbol.for("react.provider"),x_=Symbol.for("react.context"),T_=Symbol.for("react.forward_ref"),S_=Symbol.for("react.suspense"),I_=Symbol.for("react.memo"),A_=Symbol.for("react.lazy"),kf=Symbol.iterator;function C_(t){return t===null||typeof t!="object"?null:(t=kf&&t[kf]||t["@@iterator"],typeof t=="function"?t:null)}var $m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hm=Object.assign,qm={};function _s(t,e,n){this.props=t,this.context=e,this.refs=qm,this.updater=n||$m}_s.prototype.isReactComponent={};_s.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_s.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wm(){}Wm.prototype=_s.prototype;function Gc(t,e,n){this.props=t,this.context=e,this.refs=qm,this.updater=n||$m}var Yc=Gc.prototype=new Wm;Yc.constructor=Gc;Hm(Yc,_s.prototype);Yc.isPureReactComponent=!0;var Pf=Array.isArray,Qm=Object.prototype.hasOwnProperty,Xc={current:null},Km={key:!0,ref:!0,__self:!0,__source:!0};function Gm(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Qm.call(e,r)&&!Km.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:$i,type:t,key:i,ref:o,props:s,_owner:Xc.current}}function k_(t,e){return{$$typeof:$i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jc(t){return typeof t=="object"&&t!==null&&t.$$typeof===$i}function P_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rf=/\/+/g;function Gl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?P_(""+t.key):e.toString(36)}function Ko(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $i:case y_:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Gl(o,0):r,Pf(s)?(n="",t!=null&&(n=t.replace(Rf,"$&/")+"/"),Ko(s,e,n,"",function(d){return d})):s!=null&&(Jc(s)&&(s=k_(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Rf,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Pf(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Gl(i,l);o+=Ko(i,e,n,u,s)}else if(u=C_(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Gl(i,l++),o+=Ko(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ao(t,e,n){if(t==null)return t;var r=[],s=0;return Ko(t,r,"","",function(i){return e.call(n,i,s++)}),r}function R_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ct={current:null},Go={transition:null},N_={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:Go,ReactCurrentOwner:Xc};function Ym(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Ao,forEach:function(t,e,n){Ao(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ao(t,function(){e++}),e},toArray:function(t){return Ao(t,function(e){return e})||[]},only:function(t){if(!Jc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=_s;ee.Fragment=v_;ee.Profiler=w_;ee.PureComponent=Gc;ee.StrictMode=__;ee.Suspense=S_;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N_;ee.act=Ym;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Hm({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Xc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Qm.call(e,u)&&!Km.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:$i,type:t.type,key:s,ref:i,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:x_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:E_,_context:t},t.Consumer=t};ee.createElement=Gm;ee.createFactory=function(t){var e=Gm.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:T_,render:t}};ee.isValidElement=Jc;ee.lazy=function(t){return{$$typeof:A_,_payload:{_status:-1,_result:t},_init:R_}};ee.memo=function(t,e){return{$$typeof:I_,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Go.transition;Go.transition={};try{t()}finally{Go.transition=e}};ee.unstable_act=Ym;ee.useCallback=function(t,e){return ct.current.useCallback(t,e)};ee.useContext=function(t){return ct.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return ct.current.useDeferredValue(t)};ee.useEffect=function(t,e){return ct.current.useEffect(t,e)};ee.useId=function(){return ct.current.useId()};ee.useImperativeHandle=function(t,e,n){return ct.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return ct.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return ct.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return ct.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return ct.current.useReducer(t,e,n)};ee.useRef=function(t){return ct.current.useRef(t)};ee.useState=function(t){return ct.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return ct.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return ct.current.useTransition()};ee.version="18.3.1";Bm.exports=ee;var O=Bm.exports;const Zc=g_(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_=O,D_=Symbol.for("react.element"),j_=Symbol.for("react.fragment"),V_=Object.prototype.hasOwnProperty,M_=b_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O_={key:!0,ref:!0,__self:!0,__source:!0};function Xm(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)V_.call(e,r)&&!O_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:D_,type:t,key:i,ref:o,props:s,_owner:M_.current}}Qa.Fragment=j_;Qa.jsx=Xm;Qa.jsxs=Xm;zm.exports=Qa;var c=zm.exports,bu={},Jm={exports:{}},Ct={},Zm={exports:{}},eg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Q){var U=$.length;$.push(Q);e:for(;0<U;){var G=U-1>>>1,re=$[G];if(0<s(re,Q))$[G]=Q,$[U]=re,U=G;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],U=$.pop();if(U!==Q){$[0]=U;e:for(var G=0,re=$.length,fe=re>>>1;G<fe;){var wt=2*(G+1)-1,Zt=$[wt],en=wt+1,tn=$[en];if(0>s(Zt,U))en<re&&0>s(tn,Zt)?($[G]=tn,$[en]=U,G=en):($[G]=Zt,$[wt]=U,G=wt);else if(en<re&&0>s(tn,U))$[G]=tn,$[en]=U,G=en;else break e}}return Q}function s($,Q){var U=$.sortIndex-Q.sortIndex;return U!==0?U:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],p=1,m=null,y=3,x=!1,I=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k($){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=$)r(d),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(d)}}function D($){if(P=!1,k($),!I)if(n(u)!==null)I=!0,Ce(F);else{var Q=n(d);Q!==null&&st(D,Q.startTime-$)}}function F($,Q){I=!1,P&&(P=!1,T(g),g=-1),x=!0;var U=y;try{for(k(Q),m=n(u);m!==null&&(!(m.expirationTime>Q)||$&&!C());){var G=m.callback;if(typeof G=="function"){m.callback=null,y=m.priorityLevel;var re=G(m.expirationTime<=Q);Q=t.unstable_now(),typeof re=="function"?m.callback=re:m===n(u)&&r(u),k(Q)}else r(u);m=n(u)}if(m!==null)var fe=!0;else{var wt=n(d);wt!==null&&st(D,wt.startTime-Q),fe=!1}return fe}finally{m=null,y=U,x=!1}}var M=!1,E=null,g=-1,w=5,S=-1;function C(){return!(t.unstable_now()-S<w)}function R(){if(E!==null){var $=t.unstable_now();S=$;var Q=!0;try{Q=E(!0,$)}finally{Q?A():(M=!1,E=null)}}else M=!1}var A;if(typeof _=="function")A=function(){_(R)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,Z=ve.port2;ve.port1.onmessage=R,A=function(){Z.postMessage(null)}}else A=function(){N(R,0)};function Ce($){E=$,M||(M=!0,A())}function st($,Q){g=N(function(){$(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){I||x||(I=!0,Ce(F))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var U=y;y=Q;try{return $()}finally{y=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var U=y;y=$;try{return Q()}finally{y=U}},t.unstable_scheduleCallback=function($,Q,U){var G=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?G+U:G):U=G,$){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=U+re,$={id:p++,callback:Q,priorityLevel:$,startTime:U,expirationTime:re,sortIndex:-1},U>G?($.sortIndex=U,e(d,$),n(u)===null&&$===n(d)&&(P?(T(g),g=-1):P=!0,st(D,U-G))):($.sortIndex=re,e(u,$),I||x||(I=!0,Ce(F))),$},t.unstable_shouldYield=C,t.unstable_wrapCallback=function($){var Q=y;return function(){var U=y;y=Q;try{return $.apply(this,arguments)}finally{y=U}}}})(eg);Zm.exports=eg;var L_=Zm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_=O,At=L_;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tg=new Set,yi={};function xr(t,e){ns(t,e),ns(t+"Capture",e)}function ns(t,e){for(yi[t]=e,t=0;t<e.length;t++)tg.add(e[t])}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Du=Object.prototype.hasOwnProperty,U_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nf={},bf={};function z_(t){return Du.call(bf,t)?!0:Du.call(Nf,t)?!1:U_.test(t)?bf[t]=!0:(Nf[t]=!0,!1)}function B_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $_(t,e,n,r){if(e===null||typeof e>"u"||B_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ht(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];We[e]=new ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var eh=/[\-:]([a-z])/g;function th(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(eh,th);We[e]=new ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(eh,th);We[e]=new ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(eh,th);We[e]=new ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new ht(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function nh(t,e,n,r){var s=We.hasOwnProperty(e)?We[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($_(e,n,s,r)&&(n=null),r||s===null?z_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vn=F_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Co=Symbol.for("react.element"),Mr=Symbol.for("react.portal"),Or=Symbol.for("react.fragment"),rh=Symbol.for("react.strict_mode"),ju=Symbol.for("react.profiler"),ng=Symbol.for("react.provider"),rg=Symbol.for("react.context"),sh=Symbol.for("react.forward_ref"),Vu=Symbol.for("react.suspense"),Mu=Symbol.for("react.suspense_list"),ih=Symbol.for("react.memo"),Sn=Symbol.for("react.lazy"),sg=Symbol.for("react.offscreen"),Df=Symbol.iterator;function zs(t){return t===null||typeof t!="object"?null:(t=Df&&t[Df]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,Yl;function Ys(t){if(Yl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yl=e&&e[1]||""}return`
`+Yl+t}var Xl=!1;function Jl(t,e){if(!t||Xl)return"";Xl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Xl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ys(t):""}function H_(t){switch(t.tag){case 5:return Ys(t.type);case 16:return Ys("Lazy");case 13:return Ys("Suspense");case 19:return Ys("SuspenseList");case 0:case 2:case 15:return t=Jl(t.type,!1),t;case 11:return t=Jl(t.type.render,!1),t;case 1:return t=Jl(t.type,!0),t;default:return""}}function Ou(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Or:return"Fragment";case Mr:return"Portal";case ju:return"Profiler";case rh:return"StrictMode";case Vu:return"Suspense";case Mu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rg:return(t.displayName||"Context")+".Consumer";case ng:return(t._context.displayName||"Context")+".Provider";case sh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ih:return e=t.displayName||null,e!==null?e:Ou(t.type)||"Memo";case Sn:e=t._payload,t=t._init;try{return Ou(t(e))}catch{}}return null}function q_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ou(e);case 8:return e===rh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ig(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function W_(t){var e=ig(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ko(t){t._valueTracker||(t._valueTracker=W_(t))}function og(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ig(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function da(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lu(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function jf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Bn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ag(t,e){e=e.checked,e!=null&&nh(t,"checked",e,!1)}function Fu(t,e){ag(t,e);var n=Bn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Uu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Uu(t,e.type,Bn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Uu(t,e,n){(e!=="number"||da(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xs=Array.isArray;function Kr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Bn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function zu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Xs(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Bn(n)}}function lg(t,e){var n=Bn(e.value),r=Bn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Of(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ug(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ug(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Po,cg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Po=Po||document.createElement("div"),Po.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Po.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q_=["Webkit","ms","Moz","O"];Object.keys(si).forEach(function(t){Q_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),si[e]=si[t]})});function hg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||si.hasOwnProperty(t)&&si[t]?(""+e).trim():e+"px"}function dg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var K_=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $u(t,e){if(e){if(K_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Hu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qu=null;function oh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wu=null,Gr=null,Yr=null;function Lf(t){if(t=Wi(t)){if(typeof Wu!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Ja(e),Wu(t.stateNode,t.type,e))}}function fg(t){Gr?Yr?Yr.push(t):Yr=[t]:Gr=t}function pg(){if(Gr){var t=Gr,e=Yr;if(Yr=Gr=null,Lf(t),e)for(t=0;t<e.length;t++)Lf(e[t])}}function mg(t,e){return t(e)}function gg(){}var Zl=!1;function yg(t,e,n){if(Zl)return t(e,n);Zl=!0;try{return mg(t,e,n)}finally{Zl=!1,(Gr!==null||Yr!==null)&&(gg(),pg())}}function _i(t,e){var n=t.stateNode;if(n===null)return null;var r=Ja(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Qu=!1;if(hn)try{var Bs={};Object.defineProperty(Bs,"passive",{get:function(){Qu=!0}}),window.addEventListener("test",Bs,Bs),window.removeEventListener("test",Bs,Bs)}catch{Qu=!1}function G_(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var ii=!1,fa=null,pa=!1,Ku=null,Y_={onError:function(t){ii=!0,fa=t}};function X_(t,e,n,r,s,i,o,l,u){ii=!1,fa=null,G_.apply(Y_,arguments)}function J_(t,e,n,r,s,i,o,l,u){if(X_.apply(this,arguments),ii){if(ii){var d=fa;ii=!1,fa=null}else throw Error(z(198));pa||(pa=!0,Ku=d)}}function Tr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ff(t){if(Tr(t)!==t)throw Error(z(188))}function Z_(t){var e=t.alternate;if(!e){if(e=Tr(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ff(s),t;if(i===r)return Ff(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function _g(t){return t=Z_(t),t!==null?wg(t):null}function wg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wg(t);if(e!==null)return e;t=t.sibling}return null}var Eg=At.unstable_scheduleCallback,Uf=At.unstable_cancelCallback,ew=At.unstable_shouldYield,tw=At.unstable_requestPaint,Pe=At.unstable_now,nw=At.unstable_getCurrentPriorityLevel,ah=At.unstable_ImmediatePriority,xg=At.unstable_UserBlockingPriority,ma=At.unstable_NormalPriority,rw=At.unstable_LowPriority,Tg=At.unstable_IdlePriority,Ka=null,Kt=null;function sw(t){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Ka,t,void 0,(t.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:aw,iw=Math.log,ow=Math.LN2;function aw(t){return t>>>=0,t===0?32:31-(iw(t)/ow|0)|0}var Ro=64,No=4194304;function Js(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ga(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Js(l):(i&=o,i!==0&&(r=Js(i)))}else o=n&~s,o!==0?r=Js(o):i!==0&&(r=Js(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zt(e),s=1<<n,r|=t[n],e&=~s;return r}function lw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-zt(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=lw(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Gu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sg(){var t=Ro;return Ro<<=1,!(Ro&4194240)&&(Ro=64),t}function eu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zt(e),t[e]=n}function cw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-zt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function lh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ue=0;function Ig(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ag,uh,Cg,kg,Pg,Yu=!1,bo=[],Nn=null,bn=null,Dn=null,wi=new Map,Ei=new Map,An=[],hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zf(t,e){switch(t){case"focusin":case"focusout":Nn=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":wi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ei.delete(e.pointerId)}}function $s(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Wi(e),e!==null&&uh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function dw(t,e,n,r,s){switch(e){case"focusin":return Nn=$s(Nn,t,e,n,r,s),!0;case"dragenter":return bn=$s(bn,t,e,n,r,s),!0;case"mouseover":return Dn=$s(Dn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return wi.set(i,$s(wi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ei.set(i,$s(Ei.get(i)||null,t,e,n,r,s)),!0}return!1}function Rg(t){var e=ir(t.target);if(e!==null){var n=Tr(e);if(n!==null){if(e=n.tag,e===13){if(e=vg(n),e!==null){t.blockedOn=e,Pg(t.priority,function(){Cg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);qu=r,n.target.dispatchEvent(r),qu=null}else return e=Wi(n),e!==null&&uh(e),t.blockedOn=n,!1;e.shift()}return!0}function Bf(t,e,n){Yo(t)&&n.delete(e)}function fw(){Yu=!1,Nn!==null&&Yo(Nn)&&(Nn=null),bn!==null&&Yo(bn)&&(bn=null),Dn!==null&&Yo(Dn)&&(Dn=null),wi.forEach(Bf),Ei.forEach(Bf)}function Hs(t,e){t.blockedOn===e&&(t.blockedOn=null,Yu||(Yu=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,fw)))}function xi(t){function e(s){return Hs(s,t)}if(0<bo.length){Hs(bo[0],t);for(var n=1;n<bo.length;n++){var r=bo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nn!==null&&Hs(Nn,t),bn!==null&&Hs(bn,t),Dn!==null&&Hs(Dn,t),wi.forEach(e),Ei.forEach(e),n=0;n<An.length;n++)r=An[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<An.length&&(n=An[0],n.blockedOn===null);)Rg(n),n.blockedOn===null&&An.shift()}var Xr=vn.ReactCurrentBatchConfig,ya=!0;function pw(t,e,n,r){var s=ue,i=Xr.transition;Xr.transition=null;try{ue=1,ch(t,e,n,r)}finally{ue=s,Xr.transition=i}}function mw(t,e,n,r){var s=ue,i=Xr.transition;Xr.transition=null;try{ue=4,ch(t,e,n,r)}finally{ue=s,Xr.transition=i}}function ch(t,e,n,r){if(ya){var s=Xu(t,e,n,r);if(s===null)cu(t,e,r,va,n),zf(t,r);else if(dw(s,t,e,n,r))r.stopPropagation();else if(zf(t,r),e&4&&-1<hw.indexOf(t)){for(;s!==null;){var i=Wi(s);if(i!==null&&Ag(i),i=Xu(t,e,n,r),i===null&&cu(t,e,r,va,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else cu(t,e,r,null,n)}}var va=null;function Xu(t,e,n,r){if(va=null,t=oh(r),t=ir(t),t!==null)if(e=Tr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return va=t,null}function Ng(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nw()){case ah:return 1;case xg:return 4;case ma:case rw:return 16;case Tg:return 536870912;default:return 16}default:return 16}}var kn=null,hh=null,Xo=null;function bg(){if(Xo)return Xo;var t,e=hh,n=e.length,r,s="value"in kn?kn.value:kn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Xo=s.slice(t,1<r?1-r:void 0)}function Jo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Do(){return!0}function $f(){return!1}function kt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Do:$f,this.isPropagationStopped=$f,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Do)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Do)},persist:function(){},isPersistent:Do}),e}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dh=kt(ws),qi=xe({},ws,{view:0,detail:0}),gw=kt(qi),tu,nu,qs,Ga=xe({},qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qs&&(qs&&t.type==="mousemove"?(tu=t.screenX-qs.screenX,nu=t.screenY-qs.screenY):nu=tu=0,qs=t),tu)},movementY:function(t){return"movementY"in t?t.movementY:nu}}),Hf=kt(Ga),yw=xe({},Ga,{dataTransfer:0}),vw=kt(yw),_w=xe({},qi,{relatedTarget:0}),ru=kt(_w),ww=xe({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),Ew=kt(ww),xw=xe({},ws,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tw=kt(xw),Sw=xe({},ws,{data:0}),qf=kt(Sw),Iw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Aw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Cw[t])?!!e[t]:!1}function fh(){return kw}var Pw=xe({},qi,{key:function(t){if(t.key){var e=Iw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Aw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fh,charCode:function(t){return t.type==="keypress"?Jo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Rw=kt(Pw),Nw=xe({},Ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wf=kt(Nw),bw=xe({},qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fh}),Dw=kt(bw),jw=xe({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vw=kt(jw),Mw=xe({},Ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ow=kt(Mw),Lw=[9,13,27,32],ph=hn&&"CompositionEvent"in window,oi=null;hn&&"documentMode"in document&&(oi=document.documentMode);var Fw=hn&&"TextEvent"in window&&!oi,Dg=hn&&(!ph||oi&&8<oi&&11>=oi),Qf=" ",Kf=!1;function jg(t,e){switch(t){case"keyup":return Lw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lr=!1;function Uw(t,e){switch(t){case"compositionend":return Vg(e);case"keypress":return e.which!==32?null:(Kf=!0,Qf);case"textInput":return t=e.data,t===Qf&&Kf?null:t;default:return null}}function zw(t,e){if(Lr)return t==="compositionend"||!ph&&jg(t,e)?(t=bg(),Xo=hh=kn=null,Lr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dg&&e.locale!=="ko"?null:e.data;default:return null}}var Bw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Bw[t.type]:e==="textarea"}function Mg(t,e,n,r){fg(r),e=_a(e,"onChange"),0<e.length&&(n=new dh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ai=null,Ti=null;function $w(t){Qg(t,0)}function Ya(t){var e=zr(t);if(og(e))return t}function Hw(t,e){if(t==="change")return e}var Og=!1;if(hn){var su;if(hn){var iu="oninput"in document;if(!iu){var Yf=document.createElement("div");Yf.setAttribute("oninput","return;"),iu=typeof Yf.oninput=="function"}su=iu}else su=!1;Og=su&&(!document.documentMode||9<document.documentMode)}function Xf(){ai&&(ai.detachEvent("onpropertychange",Lg),Ti=ai=null)}function Lg(t){if(t.propertyName==="value"&&Ya(Ti)){var e=[];Mg(e,Ti,t,oh(t)),yg($w,e)}}function qw(t,e,n){t==="focusin"?(Xf(),ai=e,Ti=n,ai.attachEvent("onpropertychange",Lg)):t==="focusout"&&Xf()}function Ww(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ya(Ti)}function Qw(t,e){if(t==="click")return Ya(e)}function Kw(t,e){if(t==="input"||t==="change")return Ya(e)}function Gw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $t=typeof Object.is=="function"?Object.is:Gw;function Si(t,e){if($t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Du.call(e,s)||!$t(t[s],e[s]))return!1}return!0}function Jf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zf(t,e){var n=Jf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jf(n)}}function Fg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Fg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ug(){for(var t=window,e=da();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=da(t.document)}return e}function mh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Yw(t){var e=Ug(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Fg(n.ownerDocument.documentElement,n)){if(r!==null&&mh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Zf(n,i);var o=Zf(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Xw=hn&&"documentMode"in document&&11>=document.documentMode,Fr=null,Ju=null,li=null,Zu=!1;function ep(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zu||Fr==null||Fr!==da(r)||(r=Fr,"selectionStart"in r&&mh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),li&&Si(li,r)||(li=r,r=_a(Ju,"onSelect"),0<r.length&&(e=new dh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fr)))}function jo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ur={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionend:jo("Transition","TransitionEnd")},ou={},zg={};hn&&(zg=document.createElement("div").style,"AnimationEvent"in window||(delete Ur.animationend.animation,delete Ur.animationiteration.animation,delete Ur.animationstart.animation),"TransitionEvent"in window||delete Ur.transitionend.transition);function Xa(t){if(ou[t])return ou[t];if(!Ur[t])return t;var e=Ur[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zg)return ou[t]=e[n];return t}var Bg=Xa("animationend"),$g=Xa("animationiteration"),Hg=Xa("animationstart"),qg=Xa("transitionend"),Wg=new Map,tp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qn(t,e){Wg.set(t,e),xr(e,[t])}for(var au=0;au<tp.length;au++){var lu=tp[au],Jw=lu.toLowerCase(),Zw=lu[0].toUpperCase()+lu.slice(1);Qn(Jw,"on"+Zw)}Qn(Bg,"onAnimationEnd");Qn($g,"onAnimationIteration");Qn(Hg,"onAnimationStart");Qn("dblclick","onDoubleClick");Qn("focusin","onFocus");Qn("focusout","onBlur");Qn(qg,"onTransitionEnd");ns("onMouseEnter",["mouseout","mouseover"]);ns("onMouseLeave",["mouseout","mouseover"]);ns("onPointerEnter",["pointerout","pointerover"]);ns("onPointerLeave",["pointerout","pointerover"]);xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zs));function np(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,J_(r,e,void 0,t),t.currentTarget=null}function Qg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;np(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;np(s,l,d),i=u}}}if(pa)throw t=Ku,pa=!1,Ku=null,t}function me(t,e){var n=e[sc];n===void 0&&(n=e[sc]=new Set);var r=t+"__bubble";n.has(r)||(Kg(e,t,2,!1),n.add(r))}function uu(t,e,n){var r=0;e&&(r|=4),Kg(n,t,r,e)}var Vo="_reactListening"+Math.random().toString(36).slice(2);function Ii(t){if(!t[Vo]){t[Vo]=!0,tg.forEach(function(n){n!=="selectionchange"&&(eE.has(n)||uu(n,!1,t),uu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vo]||(e[Vo]=!0,uu("selectionchange",!1,e))}}function Kg(t,e,n,r){switch(Ng(e)){case 1:var s=pw;break;case 4:s=mw;break;default:s=ch}n=s.bind(null,e,n,t),s=void 0,!Qu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function cu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ir(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}yg(function(){var d=i,p=oh(n),m=[];e:{var y=Wg.get(t);if(y!==void 0){var x=dh,I=t;switch(t){case"keypress":if(Jo(n)===0)break e;case"keydown":case"keyup":x=Rw;break;case"focusin":I="focus",x=ru;break;case"focusout":I="blur",x=ru;break;case"beforeblur":case"afterblur":x=ru;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=vw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Dw;break;case Bg:case $g:case Hg:x=Ew;break;case qg:x=Vw;break;case"scroll":x=gw;break;case"wheel":x=Ow;break;case"copy":case"cut":case"paste":x=Tw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Wf}var P=(e&4)!==0,N=!P&&t==="scroll",T=P?y!==null?y+"Capture":null:y;P=[];for(var _=d,k;_!==null;){k=_;var D=k.stateNode;if(k.tag===5&&D!==null&&(k=D,T!==null&&(D=_i(_,T),D!=null&&P.push(Ai(_,D,k)))),N)break;_=_.return}0<P.length&&(y=new x(y,I,null,n,p),m.push({event:y,listeners:P}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",y&&n!==qu&&(I=n.relatedTarget||n.fromElement)&&(ir(I)||I[dn]))break e;if((x||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,x?(I=n.relatedTarget||n.toElement,x=d,I=I?ir(I):null,I!==null&&(N=Tr(I),I!==N||I.tag!==5&&I.tag!==6)&&(I=null)):(x=null,I=d),x!==I)){if(P=Hf,D="onMouseLeave",T="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(P=Wf,D="onPointerLeave",T="onPointerEnter",_="pointer"),N=x==null?y:zr(x),k=I==null?y:zr(I),y=new P(D,_+"leave",x,n,p),y.target=N,y.relatedTarget=k,D=null,ir(p)===d&&(P=new P(T,_+"enter",I,n,p),P.target=k,P.relatedTarget=N,D=P),N=D,x&&I)t:{for(P=x,T=I,_=0,k=P;k;k=Nr(k))_++;for(k=0,D=T;D;D=Nr(D))k++;for(;0<_-k;)P=Nr(P),_--;for(;0<k-_;)T=Nr(T),k--;for(;_--;){if(P===T||T!==null&&P===T.alternate)break t;P=Nr(P),T=Nr(T)}P=null}else P=null;x!==null&&rp(m,y,x,P,!1),I!==null&&N!==null&&rp(m,N,I,P,!0)}}e:{if(y=d?zr(d):window,x=y.nodeName&&y.nodeName.toLowerCase(),x==="select"||x==="input"&&y.type==="file")var F=Hw;else if(Gf(y))if(Og)F=Kw;else{F=Ww;var M=qw}else(x=y.nodeName)&&x.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(F=Qw);if(F&&(F=F(t,d))){Mg(m,F,n,p);break e}M&&M(t,y,d),t==="focusout"&&(M=y._wrapperState)&&M.controlled&&y.type==="number"&&Uu(y,"number",y.value)}switch(M=d?zr(d):window,t){case"focusin":(Gf(M)||M.contentEditable==="true")&&(Fr=M,Ju=d,li=null);break;case"focusout":li=Ju=Fr=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,ep(m,n,p);break;case"selectionchange":if(Xw)break;case"keydown":case"keyup":ep(m,n,p)}var E;if(ph)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Lr?jg(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Dg&&n.locale!=="ko"&&(Lr||g!=="onCompositionStart"?g==="onCompositionEnd"&&Lr&&(E=bg()):(kn=p,hh="value"in kn?kn.value:kn.textContent,Lr=!0)),M=_a(d,g),0<M.length&&(g=new qf(g,t,null,n,p),m.push({event:g,listeners:M}),E?g.data=E:(E=Vg(n),E!==null&&(g.data=E)))),(E=Fw?Uw(t,n):zw(t,n))&&(d=_a(d,"onBeforeInput"),0<d.length&&(p=new qf("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=E))}Qg(m,e)})}function Ai(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _a(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_i(t,n),i!=null&&r.unshift(Ai(t,i,s)),i=_i(t,e),i!=null&&r.push(Ai(t,i,s))),t=t.return}return r}function Nr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=_i(n,i),u!=null&&o.unshift(Ai(n,u,l))):s||(u=_i(n,i),u!=null&&o.push(Ai(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tE=/\r\n?/g,nE=/\u0000|\uFFFD/g;function sp(t){return(typeof t=="string"?t:""+t).replace(tE,`
`).replace(nE,"")}function Mo(t,e,n){if(e=sp(e),sp(t)!==e&&n)throw Error(z(425))}function wa(){}var ec=null,tc=null;function nc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rc=typeof setTimeout=="function"?setTimeout:void 0,rE=typeof clearTimeout=="function"?clearTimeout:void 0,ip=typeof Promise=="function"?Promise:void 0,sE=typeof queueMicrotask=="function"?queueMicrotask:typeof ip<"u"?function(t){return ip.resolve(null).then(t).catch(iE)}:rc;function iE(t){setTimeout(function(){throw t})}function hu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),xi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);xi(e)}function jn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function op(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Es=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Es,Ci="__reactProps$"+Es,dn="__reactContainer$"+Es,sc="__reactEvents$"+Es,oE="__reactListeners$"+Es,aE="__reactHandles$"+Es;function ir(t){var e=t[Qt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dn]||n[Qt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=op(t);t!==null;){if(n=t[Qt])return n;t=op(t)}return e}t=n,n=t.parentNode}return null}function Wi(t){return t=t[Qt]||t[dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Ja(t){return t[Ci]||null}var ic=[],Br=-1;function Kn(t){return{current:t}}function ye(t){0>Br||(t.current=ic[Br],ic[Br]=null,Br--)}function de(t,e){Br++,ic[Br]=t.current,t.current=e}var $n={},rt=Kn($n),mt=Kn(!1),fr=$n;function rs(t,e){var n=t.type.contextTypes;if(!n)return $n;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function gt(t){return t=t.childContextTypes,t!=null}function Ea(){ye(mt),ye(rt)}function ap(t,e,n){if(rt.current!==$n)throw Error(z(168));de(rt,e),de(mt,n)}function Gg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,q_(t)||"Unknown",s));return xe({},n,r)}function xa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$n,fr=rt.current,de(rt,t),de(mt,mt.current),!0}function lp(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=Gg(t,e,fr),r.__reactInternalMemoizedMergedChildContext=t,ye(mt),ye(rt),de(rt,t)):ye(mt),de(mt,n)}var on=null,Za=!1,du=!1;function Yg(t){on===null?on=[t]:on.push(t)}function lE(t){Za=!0,Yg(t)}function Gn(){if(!du&&on!==null){du=!0;var t=0,e=ue;try{var n=on;for(ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}on=null,Za=!1}catch(s){throw on!==null&&(on=on.slice(t+1)),Eg(ah,Gn),s}finally{ue=e,du=!1}}return null}var $r=[],Hr=0,Ta=null,Sa=0,Pt=[],Rt=0,pr=null,an=1,ln="";function nr(t,e){$r[Hr++]=Sa,$r[Hr++]=Ta,Ta=t,Sa=e}function Xg(t,e,n){Pt[Rt++]=an,Pt[Rt++]=ln,Pt[Rt++]=pr,pr=t;var r=an;t=ln;var s=32-zt(r)-1;r&=~(1<<s),n+=1;var i=32-zt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,an=1<<32-zt(e)+s|n<<s|r,ln=i+t}else an=1<<i|n<<s|r,ln=t}function gh(t){t.return!==null&&(nr(t,1),Xg(t,1,0))}function yh(t){for(;t===Ta;)Ta=$r[--Hr],$r[Hr]=null,Sa=$r[--Hr],$r[Hr]=null;for(;t===pr;)pr=Pt[--Rt],Pt[Rt]=null,ln=Pt[--Rt],Pt[Rt]=null,an=Pt[--Rt],Pt[Rt]=null}var It=null,Tt=null,_e=!1,Ut=null;function Jg(t,e){var n=Nt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function up(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,It=t,Tt=jn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,It=t,Tt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=pr!==null?{id:an,overflow:ln}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,It=t,Tt=null,!0):!1;default:return!1}}function oc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ac(t){if(_e){var e=Tt;if(e){var n=e;if(!up(t,e)){if(oc(t))throw Error(z(418));e=jn(n.nextSibling);var r=It;e&&up(t,e)?Jg(r,n):(t.flags=t.flags&-4097|2,_e=!1,It=t)}}else{if(oc(t))throw Error(z(418));t.flags=t.flags&-4097|2,_e=!1,It=t}}}function cp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;It=t}function Oo(t){if(t!==It)return!1;if(!_e)return cp(t),_e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nc(t.type,t.memoizedProps)),e&&(e=Tt)){if(oc(t))throw Zg(),Error(z(418));for(;e;)Jg(t,e),e=jn(e.nextSibling)}if(cp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tt=jn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tt=null}}else Tt=It?jn(t.stateNode.nextSibling):null;return!0}function Zg(){for(var t=Tt;t;)t=jn(t.nextSibling)}function ss(){Tt=It=null,_e=!1}function vh(t){Ut===null?Ut=[t]:Ut.push(t)}var uE=vn.ReactCurrentBatchConfig;function Ws(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Lo(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hp(t){var e=t._init;return e(t._payload)}function ey(t){function e(T,_){if(t){var k=T.deletions;k===null?(T.deletions=[_],T.flags|=16):k.push(_)}}function n(T,_){if(!t)return null;for(;_!==null;)e(T,_),_=_.sibling;return null}function r(T,_){for(T=new Map;_!==null;)_.key!==null?T.set(_.key,_):T.set(_.index,_),_=_.sibling;return T}function s(T,_){return T=Ln(T,_),T.index=0,T.sibling=null,T}function i(T,_,k){return T.index=k,t?(k=T.alternate,k!==null?(k=k.index,k<_?(T.flags|=2,_):k):(T.flags|=2,_)):(T.flags|=1048576,_)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,_,k,D){return _===null||_.tag!==6?(_=_u(k,T.mode,D),_.return=T,_):(_=s(_,k),_.return=T,_)}function u(T,_,k,D){var F=k.type;return F===Or?p(T,_,k.props.children,D,k.key):_!==null&&(_.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Sn&&hp(F)===_.type)?(D=s(_,k.props),D.ref=Ws(T,_,k),D.return=T,D):(D=ia(k.type,k.key,k.props,null,T.mode,D),D.ref=Ws(T,_,k),D.return=T,D)}function d(T,_,k,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==k.containerInfo||_.stateNode.implementation!==k.implementation?(_=wu(k,T.mode,D),_.return=T,_):(_=s(_,k.children||[]),_.return=T,_)}function p(T,_,k,D,F){return _===null||_.tag!==7?(_=cr(k,T.mode,D,F),_.return=T,_):(_=s(_,k),_.return=T,_)}function m(T,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return _=_u(""+_,T.mode,k),_.return=T,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Co:return k=ia(_.type,_.key,_.props,null,T.mode,k),k.ref=Ws(T,null,_),k.return=T,k;case Mr:return _=wu(_,T.mode,k),_.return=T,_;case Sn:var D=_._init;return m(T,D(_._payload),k)}if(Xs(_)||zs(_))return _=cr(_,T.mode,k,null),_.return=T,_;Lo(T,_)}return null}function y(T,_,k,D){var F=_!==null?_.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return F!==null?null:l(T,_,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Co:return k.key===F?u(T,_,k,D):null;case Mr:return k.key===F?d(T,_,k,D):null;case Sn:return F=k._init,y(T,_,F(k._payload),D)}if(Xs(k)||zs(k))return F!==null?null:p(T,_,k,D,null);Lo(T,k)}return null}function x(T,_,k,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return T=T.get(k)||null,l(_,T,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Co:return T=T.get(D.key===null?k:D.key)||null,u(_,T,D,F);case Mr:return T=T.get(D.key===null?k:D.key)||null,d(_,T,D,F);case Sn:var M=D._init;return x(T,_,k,M(D._payload),F)}if(Xs(D)||zs(D))return T=T.get(k)||null,p(_,T,D,F,null);Lo(_,D)}return null}function I(T,_,k,D){for(var F=null,M=null,E=_,g=_=0,w=null;E!==null&&g<k.length;g++){E.index>g?(w=E,E=null):w=E.sibling;var S=y(T,E,k[g],D);if(S===null){E===null&&(E=w);break}t&&E&&S.alternate===null&&e(T,E),_=i(S,_,g),M===null?F=S:M.sibling=S,M=S,E=w}if(g===k.length)return n(T,E),_e&&nr(T,g),F;if(E===null){for(;g<k.length;g++)E=m(T,k[g],D),E!==null&&(_=i(E,_,g),M===null?F=E:M.sibling=E,M=E);return _e&&nr(T,g),F}for(E=r(T,E);g<k.length;g++)w=x(E,T,g,k[g],D),w!==null&&(t&&w.alternate!==null&&E.delete(w.key===null?g:w.key),_=i(w,_,g),M===null?F=w:M.sibling=w,M=w);return t&&E.forEach(function(C){return e(T,C)}),_e&&nr(T,g),F}function P(T,_,k,D){var F=zs(k);if(typeof F!="function")throw Error(z(150));if(k=F.call(k),k==null)throw Error(z(151));for(var M=F=null,E=_,g=_=0,w=null,S=k.next();E!==null&&!S.done;g++,S=k.next()){E.index>g?(w=E,E=null):w=E.sibling;var C=y(T,E,S.value,D);if(C===null){E===null&&(E=w);break}t&&E&&C.alternate===null&&e(T,E),_=i(C,_,g),M===null?F=C:M.sibling=C,M=C,E=w}if(S.done)return n(T,E),_e&&nr(T,g),F;if(E===null){for(;!S.done;g++,S=k.next())S=m(T,S.value,D),S!==null&&(_=i(S,_,g),M===null?F=S:M.sibling=S,M=S);return _e&&nr(T,g),F}for(E=r(T,E);!S.done;g++,S=k.next())S=x(E,T,g,S.value,D),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?g:S.key),_=i(S,_,g),M===null?F=S:M.sibling=S,M=S);return t&&E.forEach(function(R){return e(T,R)}),_e&&nr(T,g),F}function N(T,_,k,D){if(typeof k=="object"&&k!==null&&k.type===Or&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Co:e:{for(var F=k.key,M=_;M!==null;){if(M.key===F){if(F=k.type,F===Or){if(M.tag===7){n(T,M.sibling),_=s(M,k.props.children),_.return=T,T=_;break e}}else if(M.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Sn&&hp(F)===M.type){n(T,M.sibling),_=s(M,k.props),_.ref=Ws(T,M,k),_.return=T,T=_;break e}n(T,M);break}else e(T,M);M=M.sibling}k.type===Or?(_=cr(k.props.children,T.mode,D,k.key),_.return=T,T=_):(D=ia(k.type,k.key,k.props,null,T.mode,D),D.ref=Ws(T,_,k),D.return=T,T=D)}return o(T);case Mr:e:{for(M=k.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===k.containerInfo&&_.stateNode.implementation===k.implementation){n(T,_.sibling),_=s(_,k.children||[]),_.return=T,T=_;break e}else{n(T,_);break}else e(T,_);_=_.sibling}_=wu(k,T.mode,D),_.return=T,T=_}return o(T);case Sn:return M=k._init,N(T,_,M(k._payload),D)}if(Xs(k))return I(T,_,k,D);if(zs(k))return P(T,_,k,D);Lo(T,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,_!==null&&_.tag===6?(n(T,_.sibling),_=s(_,k),_.return=T,T=_):(n(T,_),_=_u(k,T.mode,D),_.return=T,T=_),o(T)):n(T,_)}return N}var is=ey(!0),ty=ey(!1),Ia=Kn(null),Aa=null,qr=null,_h=null;function wh(){_h=qr=Aa=null}function Eh(t){var e=Ia.current;ye(Ia),t._currentValue=e}function lc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Jr(t,e){Aa=t,_h=qr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pt=!0),t.firstContext=null)}function Dt(t){var e=t._currentValue;if(_h!==t)if(t={context:t,memoizedValue:e,next:null},qr===null){if(Aa===null)throw Error(z(308));qr=t,Aa.dependencies={lanes:0,firstContext:t}}else qr=qr.next=t;return e}var or=null;function xh(t){or===null?or=[t]:or.push(t)}function ny(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,xh(e)):(n.next=s.next,s.next=n),e.interleaved=n,fn(t,r)}function fn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var In=!1;function Th(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ry(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ie&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,fn(t,n)}return s=r.interleaved,s===null?(e.next=e,xh(r)):(e.next=s.next,s.next=e),r.interleaved=e,fn(t,n)}function Zo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lh(t,n)}}function dp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ca(t,e,n,r){var s=t.updateQueue;In=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=d=u=null,l=i;do{var y=l.lane,x=l.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var I=t,P=l;switch(y=e,x=n,P.tag){case 1:if(I=P.payload,typeof I=="function"){m=I.call(x,m,y);break e}m=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=P.payload,y=typeof I=="function"?I.call(x,m,y):I,y==null)break e;m=xe({},m,y);break e;case 2:In=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[l]:y.push(l))}else x={eventTime:x,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=x,u=m):p=p.next=x,o|=y;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;y=l,l=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);gr|=o,t.lanes=o,t.memoizedState=m}}function fp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Qi={},Gt=Kn(Qi),ki=Kn(Qi),Pi=Kn(Qi);function ar(t){if(t===Qi)throw Error(z(174));return t}function Sh(t,e){switch(de(Pi,e),de(ki,t),de(Gt,Qi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bu(e,t)}ye(Gt),de(Gt,e)}function os(){ye(Gt),ye(ki),ye(Pi)}function sy(t){ar(Pi.current);var e=ar(Gt.current),n=Bu(e,t.type);e!==n&&(de(ki,t),de(Gt,n))}function Ih(t){ki.current===t&&(ye(Gt),ye(ki))}var we=Kn(0);function ka(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fu=[];function Ah(){for(var t=0;t<fu.length;t++)fu[t]._workInProgressVersionPrimary=null;fu.length=0}var ea=vn.ReactCurrentDispatcher,pu=vn.ReactCurrentBatchConfig,mr=0,Ee=null,De=null,Le=null,Pa=!1,ui=!1,Ri=0,cE=0;function Xe(){throw Error(z(321))}function Ch(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$t(t[n],e[n]))return!1;return!0}function kh(t,e,n,r,s,i){if(mr=i,Ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ea.current=t===null||t.memoizedState===null?pE:mE,t=n(r,s),ui){i=0;do{if(ui=!1,Ri=0,25<=i)throw Error(z(301));i+=1,Le=De=null,e.updateQueue=null,ea.current=gE,t=n(r,s)}while(ui)}if(ea.current=Ra,e=De!==null&&De.next!==null,mr=0,Le=De=Ee=null,Pa=!1,e)throw Error(z(300));return t}function Ph(){var t=Ri!==0;return Ri=0,t}function Wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?Ee.memoizedState=Le=t:Le=Le.next=t,Le}function jt(){if(De===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=De.next;var e=Le===null?Ee.memoizedState:Le.next;if(e!==null)Le=e,De=t;else{if(t===null)throw Error(z(310));De=t,t={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Le===null?Ee.memoizedState=Le=t:Le=Le.next=t}return Le}function Ni(t,e){return typeof e=="function"?e(t):e}function mu(t){var e=jt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=De,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var p=d.lane;if((mr&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ee.lanes|=p,gr|=p}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,$t(r,e.memoizedState)||(pt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ee.lanes|=i,gr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gu(t){var e=jt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);$t(i,e.memoizedState)||(pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function iy(){}function oy(t,e){var n=Ee,r=jt(),s=e(),i=!$t(r.memoizedState,s);if(i&&(r.memoizedState=s,pt=!0),r=r.queue,Rh(uy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,bi(9,ly.bind(null,n,r,s,e),void 0,null),Fe===null)throw Error(z(349));mr&30||ay(n,e,s)}return s}function ay(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ly(t,e,n,r){e.value=n,e.getSnapshot=r,cy(e)&&hy(t)}function uy(t,e,n){return n(function(){cy(e)&&hy(t)})}function cy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$t(t,n)}catch{return!0}}function hy(t){var e=fn(t,1);e!==null&&Bt(e,t,1,-1)}function pp(t){var e=Wt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:t},e.queue=t,t=t.dispatch=fE.bind(null,Ee,t),[e.memoizedState,t]}function bi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function dy(){return jt().memoizedState}function ta(t,e,n,r){var s=Wt();Ee.flags|=t,s.memoizedState=bi(1|e,n,void 0,r===void 0?null:r)}function el(t,e,n,r){var s=jt();r=r===void 0?null:r;var i=void 0;if(De!==null){var o=De.memoizedState;if(i=o.destroy,r!==null&&Ch(r,o.deps)){s.memoizedState=bi(e,n,i,r);return}}Ee.flags|=t,s.memoizedState=bi(1|e,n,i,r)}function mp(t,e){return ta(8390656,8,t,e)}function Rh(t,e){return el(2048,8,t,e)}function fy(t,e){return el(4,2,t,e)}function py(t,e){return el(4,4,t,e)}function my(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gy(t,e,n){return n=n!=null?n.concat([t]):null,el(4,4,my.bind(null,e,t),n)}function Nh(){}function yy(t,e){var n=jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ch(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vy(t,e){var n=jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ch(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function _y(t,e,n){return mr&21?($t(n,e)||(n=Sg(),Ee.lanes|=n,gr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pt=!0),t.memoizedState=n)}function hE(t,e){var n=ue;ue=n!==0&&4>n?n:4,t(!0);var r=pu.transition;pu.transition={};try{t(!1),e()}finally{ue=n,pu.transition=r}}function wy(){return jt().memoizedState}function dE(t,e,n){var r=On(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ey(t))xy(e,n);else if(n=ny(t,e,n,r),n!==null){var s=lt();Bt(n,t,r,s),Ty(n,e,r)}}function fE(t,e,n){var r=On(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ey(t))xy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,$t(l,o)){var u=e.interleaved;u===null?(s.next=s,xh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=ny(t,e,s,r),n!==null&&(s=lt(),Bt(n,t,r,s),Ty(n,e,r))}}function Ey(t){var e=t.alternate;return t===Ee||e!==null&&e===Ee}function xy(t,e){ui=Pa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ty(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lh(t,n)}}var Ra={readContext:Dt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},pE={readContext:Dt,useCallback:function(t,e){return Wt().memoizedState=[t,e===void 0?null:e],t},useContext:Dt,useEffect:mp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ta(4194308,4,my.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ta(4194308,4,t,e)},useInsertionEffect:function(t,e){return ta(4,2,t,e)},useMemo:function(t,e){var n=Wt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dE.bind(null,Ee,t),[r.memoizedState,t]},useRef:function(t){var e=Wt();return t={current:t},e.memoizedState=t},useState:pp,useDebugValue:Nh,useDeferredValue:function(t){return Wt().memoizedState=t},useTransition:function(){var t=pp(!1),e=t[0];return t=hE.bind(null,t[1]),Wt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ee,s=Wt();if(_e){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Fe===null)throw Error(z(349));mr&30||ay(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,mp(uy.bind(null,r,i,t),[t]),r.flags|=2048,bi(9,ly.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Wt(),e=Fe.identifierPrefix;if(_e){var n=ln,r=an;n=(r&~(1<<32-zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ri++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mE={readContext:Dt,useCallback:yy,useContext:Dt,useEffect:Rh,useImperativeHandle:gy,useInsertionEffect:fy,useLayoutEffect:py,useMemo:vy,useReducer:mu,useRef:dy,useState:function(){return mu(Ni)},useDebugValue:Nh,useDeferredValue:function(t){var e=jt();return _y(e,De.memoizedState,t)},useTransition:function(){var t=mu(Ni)[0],e=jt().memoizedState;return[t,e]},useMutableSource:iy,useSyncExternalStore:oy,useId:wy,unstable_isNewReconciler:!1},gE={readContext:Dt,useCallback:yy,useContext:Dt,useEffect:Rh,useImperativeHandle:gy,useInsertionEffect:fy,useLayoutEffect:py,useMemo:vy,useReducer:gu,useRef:dy,useState:function(){return gu(Ni)},useDebugValue:Nh,useDeferredValue:function(t){var e=jt();return De===null?e.memoizedState=t:_y(e,De.memoizedState,t)},useTransition:function(){var t=gu(Ni)[0],e=jt().memoizedState;return[t,e]},useMutableSource:iy,useSyncExternalStore:oy,useId:wy,unstable_isNewReconciler:!1};function Lt(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var tl={isMounted:function(t){return(t=t._reactInternals)?Tr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=lt(),s=On(t),i=un(r,s);i.payload=e,n!=null&&(i.callback=n),e=Vn(t,i,s),e!==null&&(Bt(e,t,s,r),Zo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=lt(),s=On(t),i=un(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Vn(t,i,s),e!==null&&(Bt(e,t,s,r),Zo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=lt(),r=On(t),s=un(n,r);s.tag=2,e!=null&&(s.callback=e),e=Vn(t,s,r),e!==null&&(Bt(e,t,r,n),Zo(e,t,r))}};function gp(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Si(n,r)||!Si(s,i):!0}function Sy(t,e,n){var r=!1,s=$n,i=e.contextType;return typeof i=="object"&&i!==null?i=Dt(i):(s=gt(e)?fr:rt.current,r=e.contextTypes,i=(r=r!=null)?rs(t,s):$n),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function yp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&tl.enqueueReplaceState(e,e.state,null)}function cc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Th(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Dt(i):(i=gt(e)?fr:rt.current,s.context=rs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(uc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&tl.enqueueReplaceState(s,s.state,null),Ca(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function as(t,e){try{var n="",r=e;do n+=H_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function yu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yE=typeof WeakMap=="function"?WeakMap:Map;function Iy(t,e,n){n=un(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ba||(ba=!0,Ec=r),hc(t,e)},n}function Ay(t,e,n){n=un(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){hc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){hc(t,e),typeof r!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function vp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=NE.bind(null,t,e,n),e.then(t,t))}function _p(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=un(-1,1),e.tag=2,Vn(n,e,1))),n.lanes|=1),t)}var vE=vn.ReactCurrentOwner,pt=!1;function at(t,e,n,r){e.child=t===null?ty(e,null,n,r):is(e,t.child,n,r)}function Ep(t,e,n,r,s){n=n.render;var i=e.ref;return Jr(e,s),r=kh(t,e,n,r,i,s),n=Ph(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pn(t,e,s)):(_e&&n&&gh(e),e.flags|=1,at(t,e,r,s),e.child)}function xp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Fh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Cy(t,e,i,r,s)):(t=ia(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Si,n(o,r)&&t.ref===e.ref)return pn(t,e,s)}return e.flags|=1,t=Ln(i,r),t.ref=e.ref,t.return=e,e.child=t}function Cy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Si(i,r)&&t.ref===e.ref)if(pt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(pt=!0);else return e.lanes=t.lanes,pn(t,e,s)}return dc(t,e,n,r,s)}function ky(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(Qr,xt),xt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,de(Qr,xt),xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,de(Qr,xt),xt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,de(Qr,xt),xt|=r;return at(t,e,s,n),e.child}function Py(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dc(t,e,n,r,s){var i=gt(n)?fr:rt.current;return i=rs(e,i),Jr(e,s),n=kh(t,e,n,r,i,s),r=Ph(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pn(t,e,s)):(_e&&r&&gh(e),e.flags|=1,at(t,e,n,s),e.child)}function Tp(t,e,n,r,s){if(gt(n)){var i=!0;xa(e)}else i=!1;if(Jr(e,s),e.stateNode===null)na(t,e),Sy(e,n,r),cc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Dt(d):(d=gt(n)?fr:rt.current,d=rs(e,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&yp(e,o,r,d),In=!1;var y=e.memoizedState;o.state=y,Ca(e,r,o,s),u=e.memoizedState,l!==r||y!==u||mt.current||In?(typeof p=="function"&&(uc(e,n,p,r),u=e.memoizedState),(l=In||gp(e,n,l,r,y,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ry(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Lt(e.type,l),o.props=d,m=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Dt(u):(u=gt(n)?fr:rt.current,u=rs(e,u));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||y!==u)&&yp(e,o,r,u),In=!1,y=e.memoizedState,o.state=y,Ca(e,r,o,s);var I=e.memoizedState;l!==m||y!==I||mt.current||In?(typeof x=="function"&&(uc(e,n,x,r),I=e.memoizedState),(d=In||gp(e,n,d,r,y,I,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return fc(t,e,n,r,i,s)}function fc(t,e,n,r,s,i){Py(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&lp(e,n,!1),pn(t,e,i);r=e.stateNode,vE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=is(e,t.child,null,i),e.child=is(e,null,l,i)):at(t,e,l,i),e.memoizedState=r.state,s&&lp(e,n,!0),e.child}function Ry(t){var e=t.stateNode;e.pendingContext?ap(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ap(t,e.context,!1),Sh(t,e.containerInfo)}function Sp(t,e,n,r,s){return ss(),vh(s),e.flags|=256,at(t,e,n,r),e.child}var pc={dehydrated:null,treeContext:null,retryLane:0};function mc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ny(t,e,n){var r=e.pendingProps,s=we.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),de(we,s&1),t===null)return ac(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=sl(o,r,0,null),t=cr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=mc(n),e.memoizedState=pc,t):bh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return _E(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ln(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ln(l,i):(i=cr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?mc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=pc,r}return i=t.child,t=i.sibling,r=Ln(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bh(t,e){return e=sl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fo(t,e,n,r){return r!==null&&vh(r),is(e,t.child,null,n),t=bh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _E(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=yu(Error(z(422))),Fo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=sl({mode:"visible",children:r.children},s,0,null),i=cr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&is(e,t.child,null,o),e.child.memoizedState=mc(o),e.memoizedState=pc,i);if(!(e.mode&1))return Fo(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(z(419)),r=yu(i,r,void 0),Fo(t,e,o,r)}if(l=(o&t.childLanes)!==0,pt||l){if(r=Fe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,fn(t,s),Bt(r,t,s,-1))}return Lh(),r=yu(Error(z(421))),Fo(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=bE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Tt=jn(s.nextSibling),It=e,_e=!0,Ut=null,t!==null&&(Pt[Rt++]=an,Pt[Rt++]=ln,Pt[Rt++]=pr,an=t.id,ln=t.overflow,pr=e),e=bh(e,r.children),e.flags|=4096,e)}function Ip(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lc(t.return,e,n)}function vu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function by(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(at(t,e,r.children,n),r=we.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ip(t,n,e);else if(t.tag===19)Ip(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(de(we,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ka(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),vu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ka(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}vu(e,!0,n,null,i);break;case"together":vu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function na(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Ln(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ln(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wE(t,e,n){switch(e.tag){case 3:Ry(e),ss();break;case 5:sy(e);break;case 1:gt(e.type)&&xa(e);break;case 4:Sh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;de(Ia,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(de(we,we.current&1),e.flags|=128,null):n&e.child.childLanes?Ny(t,e,n):(de(we,we.current&1),t=pn(t,e,n),t!==null?t.sibling:null);de(we,we.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return by(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(we,we.current),r)break;return null;case 22:case 23:return e.lanes=0,ky(t,e,n)}return pn(t,e,n)}var Dy,gc,jy,Vy;Dy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gc=function(){};jy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ar(Gt.current);var i=null;switch(n){case"input":s=Lu(t,s),r=Lu(t,r),i=[];break;case"select":s=xe({},s,{value:void 0}),r=xe({},r,{value:void 0}),i=[];break;case"textarea":s=zu(t,s),r=zu(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wa)}$u(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(yi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(yi.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&me("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Vy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qs(t,e){if(!_e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function EE(t,e,n){var r=e.pendingProps;switch(yh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(e),null;case 1:return gt(e.type)&&Ea(),Je(e),null;case 3:return r=e.stateNode,os(),ye(mt),ye(rt),Ah(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Oo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ut!==null&&(Sc(Ut),Ut=null))),gc(t,e),Je(e),null;case 5:Ih(e);var s=ar(Pi.current);if(n=e.type,t!==null&&e.stateNode!=null)jy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Je(e),null}if(t=ar(Gt.current),Oo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Qt]=e,r[Ci]=i,t=(e.mode&1)!==0,n){case"dialog":me("cancel",r),me("close",r);break;case"iframe":case"object":case"embed":me("load",r);break;case"video":case"audio":for(s=0;s<Zs.length;s++)me(Zs[s],r);break;case"source":me("error",r);break;case"img":case"image":case"link":me("error",r),me("load",r);break;case"details":me("toggle",r);break;case"input":jf(r,i),me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},me("invalid",r);break;case"textarea":Mf(r,i),me("invalid",r)}$u(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Mo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Mo(r.textContent,l,t),s=["children",""+l]):yi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&me("scroll",r)}switch(n){case"input":ko(r),Vf(r,i,!0);break;case"textarea":ko(r),Of(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=wa)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ug(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qt]=e,t[Ci]=r,Dy(t,e,!1,!1),e.stateNode=t;e:{switch(o=Hu(n,r),n){case"dialog":me("cancel",t),me("close",t),s=r;break;case"iframe":case"object":case"embed":me("load",t),s=r;break;case"video":case"audio":for(s=0;s<Zs.length;s++)me(Zs[s],t);s=r;break;case"source":me("error",t),s=r;break;case"img":case"image":case"link":me("error",t),me("load",t),s=r;break;case"details":me("toggle",t),s=r;break;case"input":jf(t,r),s=Lu(t,r),me("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=xe({},r,{value:void 0}),me("invalid",t);break;case"textarea":Mf(t,r),s=zu(t,r),me("invalid",t);break;default:s=r}$u(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?dg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&cg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&vi(t,u):typeof u=="number"&&vi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(yi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&me("scroll",t):u!=null&&nh(t,i,u,o))}switch(n){case"input":ko(t),Vf(t,r,!1);break;case"textarea":ko(t),Of(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Bn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Kr(t,!!r.multiple,i,!1):r.defaultValue!=null&&Kr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=wa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Je(e),null;case 6:if(t&&e.stateNode!=null)Vy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=ar(Pi.current),ar(Gt.current),Oo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qt]=e,(i=r.nodeValue!==n)&&(t=It,t!==null))switch(t.tag){case 3:Mo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Mo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qt]=e,e.stateNode=r}return Je(e),null;case 13:if(ye(we),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_e&&Tt!==null&&e.mode&1&&!(e.flags&128))Zg(),ss(),e.flags|=98560,i=!1;else if(i=Oo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Qt]=e}else ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Je(e),i=!1}else Ut!==null&&(Sc(Ut),Ut=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||we.current&1?je===0&&(je=3):Lh())),e.updateQueue!==null&&(e.flags|=4),Je(e),null);case 4:return os(),gc(t,e),t===null&&Ii(e.stateNode.containerInfo),Je(e),null;case 10:return Eh(e.type._context),Je(e),null;case 17:return gt(e.type)&&Ea(),Je(e),null;case 19:if(ye(we),i=e.memoizedState,i===null)return Je(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Qs(i,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ka(t),o!==null){for(e.flags|=128,Qs(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return de(we,we.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pe()>ls&&(e.flags|=128,r=!0,Qs(i,!1),e.lanes=4194304)}else{if(!r)if(t=ka(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!_e)return Je(e),null}else 2*Pe()-i.renderingStartTime>ls&&n!==1073741824&&(e.flags|=128,r=!0,Qs(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pe(),e.sibling=null,n=we.current,de(we,r?n&1|2:n&1),e):(Je(e),null);case 22:case 23:return Oh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xt&1073741824&&(Je(e),e.subtreeFlags&6&&(e.flags|=8192)):Je(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function xE(t,e){switch(yh(e),e.tag){case 1:return gt(e.type)&&Ea(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return os(),ye(mt),ye(rt),Ah(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ih(e),null;case 13:if(ye(we),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));ss()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ye(we),null;case 4:return os(),null;case 10:return Eh(e.type._context),null;case 22:case 23:return Oh(),null;case 24:return null;default:return null}}var Uo=!1,tt=!1,TE=typeof WeakSet=="function"?WeakSet:Set,q=null;function Wr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(t,e,r)}else n.current=null}function yc(t,e,n){try{n()}catch(r){Ae(t,e,r)}}var Ap=!1;function SE(t,e){if(ec=ya,t=Ug(),mh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,p=0,m=t,y=null;t:for(;;){for(var x;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(x=m.firstChild)!==null;)y=m,m=x;for(;;){if(m===t)break t;if(y===n&&++d===s&&(l=o),y===i&&++p===r&&(u=o),(x=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=x}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(tc={focusedElem:t,selectionRange:n},ya=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var P=I.memoizedProps,N=I.memoizedState,T=e.stateNode,_=T.getSnapshotBeforeUpdate(e.elementType===e.type?P:Lt(e.type,P),N);T.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(D){Ae(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return I=Ap,Ap=!1,I}function ci(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&yc(e,n,i)}s=s.next}while(s!==r)}}function nl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function My(t){var e=t.alternate;e!==null&&(t.alternate=null,My(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qt],delete e[Ci],delete e[sc],delete e[oE],delete e[aE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Oy(t){return t.tag===5||t.tag===3||t.tag===4}function Cp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Oy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _c(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wa));else if(r!==4&&(t=t.child,t!==null))for(_c(t,e,n),t=t.sibling;t!==null;)_c(t,e,n),t=t.sibling}function wc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wc(t,e,n),t=t.sibling;t!==null;)wc(t,e,n),t=t.sibling}var ze=null,Ft=!1;function Tn(t,e,n){for(n=n.child;n!==null;)Ly(t,e,n),n=n.sibling}function Ly(t,e,n){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Ka,n)}catch{}switch(n.tag){case 5:tt||Wr(n,e);case 6:var r=ze,s=Ft;ze=null,Tn(t,e,n),ze=r,Ft=s,ze!==null&&(Ft?(t=ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ze.removeChild(n.stateNode));break;case 18:ze!==null&&(Ft?(t=ze,n=n.stateNode,t.nodeType===8?hu(t.parentNode,n):t.nodeType===1&&hu(t,n),xi(t)):hu(ze,n.stateNode));break;case 4:r=ze,s=Ft,ze=n.stateNode.containerInfo,Ft=!0,Tn(t,e,n),ze=r,Ft=s;break;case 0:case 11:case 14:case 15:if(!tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yc(n,e,o),s=s.next}while(s!==r)}Tn(t,e,n);break;case 1:if(!tt&&(Wr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ae(n,e,l)}Tn(t,e,n);break;case 21:Tn(t,e,n);break;case 22:n.mode&1?(tt=(r=tt)||n.memoizedState!==null,Tn(t,e,n),tt=r):Tn(t,e,n);break;default:Tn(t,e,n)}}function kp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TE),e.forEach(function(r){var s=DE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ot(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ze=l.stateNode,Ft=!1;break e;case 3:ze=l.stateNode.containerInfo,Ft=!0;break e;case 4:ze=l.stateNode.containerInfo,Ft=!0;break e}l=l.return}if(ze===null)throw Error(z(160));Ly(i,o,s),ze=null,Ft=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ae(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fy(e,t),e=e.sibling}function Fy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ot(e,t),qt(t),r&4){try{ci(3,t,t.return),nl(3,t)}catch(P){Ae(t,t.return,P)}try{ci(5,t,t.return)}catch(P){Ae(t,t.return,P)}}break;case 1:Ot(e,t),qt(t),r&512&&n!==null&&Wr(n,n.return);break;case 5:if(Ot(e,t),qt(t),r&512&&n!==null&&Wr(n,n.return),t.flags&32){var s=t.stateNode;try{vi(s,"")}catch(P){Ae(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ag(s,i),Hu(l,o);var d=Hu(l,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?dg(s,m):p==="dangerouslySetInnerHTML"?cg(s,m):p==="children"?vi(s,m):nh(s,p,m,d)}switch(l){case"input":Fu(s,i);break;case"textarea":lg(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Kr(s,!!i.multiple,x,!1):y!==!!i.multiple&&(i.defaultValue!=null?Kr(s,!!i.multiple,i.defaultValue,!0):Kr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ci]=i}catch(P){Ae(t,t.return,P)}}break;case 6:if(Ot(e,t),qt(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){Ae(t,t.return,P)}}break;case 3:if(Ot(e,t),qt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xi(e.containerInfo)}catch(P){Ae(t,t.return,P)}break;case 4:Ot(e,t),qt(t);break;case 13:Ot(e,t),qt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vh=Pe())),r&4&&kp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(tt=(d=tt)||p,Ot(e,t),tt=d):Ot(e,t),qt(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(q=t,p=t.child;p!==null;){for(m=q=p;q!==null;){switch(y=q,x=y.child,y.tag){case 0:case 11:case 14:case 15:ci(4,y,y.return);break;case 1:Wr(y,y.return);var I=y.stateNode;if(typeof I.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(P){Ae(r,n,P)}}break;case 5:Wr(y,y.return);break;case 22:if(y.memoizedState!==null){Rp(m);continue}}x!==null?(x.return=y,q=x):Rp(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=hg("display",o))}catch(P){Ae(t,t.return,P)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(P){Ae(t,t.return,P)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ot(e,t),qt(t),r&4&&kp(t);break;case 21:break;default:Ot(e,t),qt(t)}}function qt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Oy(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(vi(s,""),r.flags&=-33);var i=Cp(t);wc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Cp(t);_c(t,l,o);break;default:throw Error(z(161))}}catch(u){Ae(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function IE(t,e,n){q=t,Uy(t)}function Uy(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Uo;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||tt;l=Uo;var d=tt;if(Uo=o,(tt=u)&&!d)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?Np(s):u!==null?(u.return=o,q=u):Np(s);for(;i!==null;)q=i,Uy(i),i=i.sibling;q=s,Uo=l,tt=d}Pp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Pp(t)}}function Pp(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tt||nl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Lt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&fp(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&xi(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}tt||e.flags&512&&vc(e)}catch(y){Ae(e,e.return,y)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Rp(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Np(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nl(4,e)}catch(u){Ae(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ae(e,s,u)}}var i=e.return;try{vc(e)}catch(u){Ae(e,i,u)}break;case 5:var o=e.return;try{vc(e)}catch(u){Ae(e,o,u)}}}catch(u){Ae(e,e.return,u)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var AE=Math.ceil,Na=vn.ReactCurrentDispatcher,Dh=vn.ReactCurrentOwner,bt=vn.ReactCurrentBatchConfig,ie=0,Fe=null,Ne=null,He=0,xt=0,Qr=Kn(0),je=0,Di=null,gr=0,rl=0,jh=0,hi=null,dt=null,Vh=0,ls=1/0,sn=null,ba=!1,Ec=null,Mn=null,zo=!1,Pn=null,Da=0,di=0,xc=null,ra=-1,sa=0;function lt(){return ie&6?Pe():ra!==-1?ra:ra=Pe()}function On(t){return t.mode&1?ie&2&&He!==0?He&-He:uE.transition!==null?(sa===0&&(sa=Sg()),sa):(t=ue,t!==0||(t=window.event,t=t===void 0?16:Ng(t.type)),t):1}function Bt(t,e,n,r){if(50<di)throw di=0,xc=null,Error(z(185));Hi(t,n,r),(!(ie&2)||t!==Fe)&&(t===Fe&&(!(ie&2)&&(rl|=n),je===4&&Cn(t,He)),yt(t,r),n===1&&ie===0&&!(e.mode&1)&&(ls=Pe()+500,Za&&Gn()))}function yt(t,e){var n=t.callbackNode;uw(t,e);var r=ga(t,t===Fe?He:0);if(r===0)n!==null&&Uf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Uf(n),e===1)t.tag===0?lE(bp.bind(null,t)):Yg(bp.bind(null,t)),sE(function(){!(ie&6)&&Gn()}),n=null;else{switch(Ig(r)){case 1:n=ah;break;case 4:n=xg;break;case 16:n=ma;break;case 536870912:n=Tg;break;default:n=ma}n=Ky(n,zy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zy(t,e){if(ra=-1,sa=0,ie&6)throw Error(z(327));var n=t.callbackNode;if(Zr()&&t.callbackNode!==n)return null;var r=ga(t,t===Fe?He:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ja(t,r);else{e=r;var s=ie;ie|=2;var i=$y();(Fe!==t||He!==e)&&(sn=null,ls=Pe()+500,ur(t,e));do try{PE();break}catch(l){By(t,l)}while(!0);wh(),Na.current=i,ie=s,Ne!==null?e=0:(Fe=null,He=0,e=je)}if(e!==0){if(e===2&&(s=Gu(t),s!==0&&(r=s,e=Tc(t,s))),e===1)throw n=Di,ur(t,0),Cn(t,r),yt(t,Pe()),n;if(e===6)Cn(t,r);else{if(s=t.current.alternate,!(r&30)&&!CE(s)&&(e=ja(t,r),e===2&&(i=Gu(t),i!==0&&(r=i,e=Tc(t,i))),e===1))throw n=Di,ur(t,0),Cn(t,r),yt(t,Pe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:rr(t,dt,sn);break;case 3:if(Cn(t,r),(r&130023424)===r&&(e=Vh+500-Pe(),10<e)){if(ga(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){lt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=rc(rr.bind(null,t,dt,sn),e);break}rr(t,dt,sn);break;case 4:if(Cn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-zt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AE(r/1960))-r,10<r){t.timeoutHandle=rc(rr.bind(null,t,dt,sn),r);break}rr(t,dt,sn);break;case 5:rr(t,dt,sn);break;default:throw Error(z(329))}}}return yt(t,Pe()),t.callbackNode===n?zy.bind(null,t):null}function Tc(t,e){var n=hi;return t.current.memoizedState.isDehydrated&&(ur(t,e).flags|=256),t=ja(t,e),t!==2&&(e=dt,dt=n,e!==null&&Sc(e)),t}function Sc(t){dt===null?dt=t:dt.push.apply(dt,t)}function CE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!$t(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cn(t,e){for(e&=~jh,e&=~rl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zt(e),r=1<<n;t[n]=-1,e&=~r}}function bp(t){if(ie&6)throw Error(z(327));Zr();var e=ga(t,0);if(!(e&1))return yt(t,Pe()),null;var n=ja(t,e);if(t.tag!==0&&n===2){var r=Gu(t);r!==0&&(e=r,n=Tc(t,r))}if(n===1)throw n=Di,ur(t,0),Cn(t,e),yt(t,Pe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rr(t,dt,sn),yt(t,Pe()),null}function Mh(t,e){var n=ie;ie|=1;try{return t(e)}finally{ie=n,ie===0&&(ls=Pe()+500,Za&&Gn())}}function yr(t){Pn!==null&&Pn.tag===0&&!(ie&6)&&Zr();var e=ie;ie|=1;var n=bt.transition,r=ue;try{if(bt.transition=null,ue=1,t)return t()}finally{ue=r,bt.transition=n,ie=e,!(ie&6)&&Gn()}}function Oh(){xt=Qr.current,ye(Qr)}function ur(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rE(n)),Ne!==null)for(n=Ne.return;n!==null;){var r=n;switch(yh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ea();break;case 3:os(),ye(mt),ye(rt),Ah();break;case 5:Ih(r);break;case 4:os();break;case 13:ye(we);break;case 19:ye(we);break;case 10:Eh(r.type._context);break;case 22:case 23:Oh()}n=n.return}if(Fe=t,Ne=t=Ln(t.current,null),He=xt=e,je=0,Di=null,jh=rl=gr=0,dt=hi=null,or!==null){for(e=0;e<or.length;e++)if(n=or[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}or=null}return t}function By(t,e){do{var n=Ne;try{if(wh(),ea.current=Ra,Pa){for(var r=Ee.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Pa=!1}if(mr=0,Le=De=Ee=null,ui=!1,Ri=0,Dh.current=null,n===null||n.return===null){je=1,Di=e,Ne=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=He,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=_p(o);if(x!==null){x.flags&=-257,wp(x,o,l,i,e),x.mode&1&&vp(i,d,e),e=x,u=d;var I=e.updateQueue;if(I===null){var P=new Set;P.add(u),e.updateQueue=P}else I.add(u);break e}else{if(!(e&1)){vp(i,d,e),Lh();break e}u=Error(z(426))}}else if(_e&&l.mode&1){var N=_p(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),wp(N,o,l,i,e),vh(as(u,l));break e}}i=u=as(u,l),je!==4&&(je=2),hi===null?hi=[i]:hi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=Iy(i,u,e);dp(i,T);break e;case 1:l=u;var _=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Mn===null||!Mn.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=Ay(i,l,e);dp(i,D);break e}}i=i.return}while(i!==null)}qy(n)}catch(F){e=F,Ne===n&&n!==null&&(Ne=n=n.return);continue}break}while(!0)}function $y(){var t=Na.current;return Na.current=Ra,t===null?Ra:t}function Lh(){(je===0||je===3||je===2)&&(je=4),Fe===null||!(gr&268435455)&&!(rl&268435455)||Cn(Fe,He)}function ja(t,e){var n=ie;ie|=2;var r=$y();(Fe!==t||He!==e)&&(sn=null,ur(t,e));do try{kE();break}catch(s){By(t,s)}while(!0);if(wh(),ie=n,Na.current=r,Ne!==null)throw Error(z(261));return Fe=null,He=0,je}function kE(){for(;Ne!==null;)Hy(Ne)}function PE(){for(;Ne!==null&&!ew();)Hy(Ne)}function Hy(t){var e=Qy(t.alternate,t,xt);t.memoizedProps=t.pendingProps,e===null?qy(t):Ne=e,Dh.current=null}function qy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xE(n,e),n!==null){n.flags&=32767,Ne=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,Ne=null;return}}else if(n=EE(n,e,xt),n!==null){Ne=n;return}if(e=e.sibling,e!==null){Ne=e;return}Ne=e=t}while(e!==null);je===0&&(je=5)}function rr(t,e,n){var r=ue,s=bt.transition;try{bt.transition=null,ue=1,RE(t,e,n,r)}finally{bt.transition=s,ue=r}return null}function RE(t,e,n,r){do Zr();while(Pn!==null);if(ie&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(cw(t,i),t===Fe&&(Ne=Fe=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zo||(zo=!0,Ky(ma,function(){return Zr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=bt.transition,bt.transition=null;var o=ue;ue=1;var l=ie;ie|=4,Dh.current=null,SE(t,n),Fy(n,t),Yw(tc),ya=!!ec,tc=ec=null,t.current=n,IE(n),tw(),ie=l,ue=o,bt.transition=i}else t.current=n;if(zo&&(zo=!1,Pn=t,Da=s),i=t.pendingLanes,i===0&&(Mn=null),sw(n.stateNode),yt(t,Pe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ba)throw ba=!1,t=Ec,Ec=null,t;return Da&1&&t.tag!==0&&Zr(),i=t.pendingLanes,i&1?t===xc?di++:(di=0,xc=t):di=0,Gn(),null}function Zr(){if(Pn!==null){var t=Ig(Da),e=bt.transition,n=ue;try{if(bt.transition=null,ue=16>t?16:t,Pn===null)var r=!1;else{if(t=Pn,Pn=null,Da=0,ie&6)throw Error(z(331));var s=ie;for(ie|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(q=d;q!==null;){var p=q;switch(p.tag){case 0:case 11:case 15:ci(8,p,i)}var m=p.child;if(m!==null)m.return=p,q=m;else for(;q!==null;){p=q;var y=p.sibling,x=p.return;if(My(p),p===d){q=null;break}if(y!==null){y.return=x,q=y;break}q=x}}}var I=i.alternate;if(I!==null){var P=I.child;if(P!==null){I.child=null;do{var N=P.sibling;P.sibling=null,P=N}while(P!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ci(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,q=T;break e}q=i.return}}var _=t.current;for(q=_;q!==null;){o=q;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,q=k;else e:for(o=_;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(F){Ae(l,l.return,F)}if(l===o){q=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,q=D;break e}q=l.return}}if(ie=s,Gn(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Ka,t)}catch{}r=!0}return r}finally{ue=n,bt.transition=e}}return!1}function Dp(t,e,n){e=as(n,e),e=Iy(t,e,1),t=Vn(t,e,1),e=lt(),t!==null&&(Hi(t,1,e),yt(t,e))}function Ae(t,e,n){if(t.tag===3)Dp(t,t,n);else for(;e!==null;){if(e.tag===3){Dp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mn===null||!Mn.has(r))){t=as(n,t),t=Ay(e,t,1),e=Vn(e,t,1),t=lt(),e!==null&&(Hi(e,1,t),yt(e,t));break}}e=e.return}}function NE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=lt(),t.pingedLanes|=t.suspendedLanes&n,Fe===t&&(He&n)===n&&(je===4||je===3&&(He&130023424)===He&&500>Pe()-Vh?ur(t,0):jh|=n),yt(t,e)}function Wy(t,e){e===0&&(t.mode&1?(e=No,No<<=1,!(No&130023424)&&(No=4194304)):e=1);var n=lt();t=fn(t,e),t!==null&&(Hi(t,e,n),yt(t,n))}function bE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Wy(t,n)}function DE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),Wy(t,n)}var Qy;Qy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mt.current)pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pt=!1,wE(t,e,n);pt=!!(t.flags&131072)}else pt=!1,_e&&e.flags&1048576&&Xg(e,Sa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;na(t,e),t=e.pendingProps;var s=rs(e,rt.current);Jr(e,n),s=kh(null,e,r,t,s,n);var i=Ph();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gt(r)?(i=!0,xa(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Th(e),s.updater=tl,e.stateNode=s,s._reactInternals=e,cc(e,r,t,n),e=fc(null,e,r,!0,i,n)):(e.tag=0,_e&&i&&gh(e),at(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(na(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=VE(r),t=Lt(r,t),s){case 0:e=dc(null,e,r,t,n);break e;case 1:e=Tp(null,e,r,t,n);break e;case 11:e=Ep(null,e,r,t,n);break e;case 14:e=xp(null,e,r,Lt(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),dc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),Tp(t,e,r,s,n);case 3:e:{if(Ry(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,ry(t,e),Ca(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=as(Error(z(423)),e),e=Sp(t,e,r,n,s);break e}else if(r!==s){s=as(Error(z(424)),e),e=Sp(t,e,r,n,s);break e}else for(Tt=jn(e.stateNode.containerInfo.firstChild),It=e,_e=!0,Ut=null,n=ty(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ss(),r===s){e=pn(t,e,n);break e}at(t,e,r,n)}e=e.child}return e;case 5:return sy(e),t===null&&ac(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,nc(r,s)?o=null:i!==null&&nc(r,i)&&(e.flags|=32),Py(t,e),at(t,e,o,n),e.child;case 6:return t===null&&ac(e),null;case 13:return Ny(t,e,n);case 4:return Sh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=is(e,null,r,n):at(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),Ep(t,e,r,s,n);case 7:return at(t,e,e.pendingProps,n),e.child;case 8:return at(t,e,e.pendingProps.children,n),e.child;case 12:return at(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,de(Ia,r._currentValue),r._currentValue=o,i!==null)if($t(i.value,o)){if(i.children===s.children&&!mt.current){e=pn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=un(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),lc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),lc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}at(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Jr(e,n),s=Dt(s),r=r(s),e.flags|=1,at(t,e,r,n),e.child;case 14:return r=e.type,s=Lt(r,e.pendingProps),s=Lt(r.type,s),xp(t,e,r,s,n);case 15:return Cy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),na(t,e),e.tag=1,gt(r)?(t=!0,xa(e)):t=!1,Jr(e,n),Sy(e,r,s),cc(e,r,s,n),fc(null,e,r,!0,t,n);case 19:return by(t,e,n);case 22:return ky(t,e,n)}throw Error(z(156,e.tag))};function Ky(t,e){return Eg(t,e)}function jE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(t,e,n,r){return new jE(t,e,n,r)}function Fh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function VE(t){if(typeof t=="function")return Fh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sh)return 11;if(t===ih)return 14}return 2}function Ln(t,e){var n=t.alternate;return n===null?(n=Nt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ia(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Fh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Or:return cr(n.children,s,i,e);case rh:o=8,s|=8;break;case ju:return t=Nt(12,n,e,s|2),t.elementType=ju,t.lanes=i,t;case Vu:return t=Nt(13,n,e,s),t.elementType=Vu,t.lanes=i,t;case Mu:return t=Nt(19,n,e,s),t.elementType=Mu,t.lanes=i,t;case sg:return sl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ng:o=10;break e;case rg:o=9;break e;case sh:o=11;break e;case ih:o=14;break e;case Sn:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Nt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function cr(t,e,n,r){return t=Nt(7,t,r,e),t.lanes=n,t}function sl(t,e,n,r){return t=Nt(22,t,r,e),t.elementType=sg,t.lanes=n,t.stateNode={isHidden:!1},t}function _u(t,e,n){return t=Nt(6,t,null,e),t.lanes=n,t}function wu(t,e,n){return e=Nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ME(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eu(0),this.expirationTimes=eu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uh(t,e,n,r,s,i,o,l,u){return t=new ME(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Nt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Th(i),t}function OE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Gy(t){if(!t)return $n;t=t._reactInternals;e:{if(Tr(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(gt(n))return Gg(t,n,e)}return e}function Yy(t,e,n,r,s,i,o,l,u){return t=Uh(n,r,!0,t,s,i,o,l,u),t.context=Gy(null),n=t.current,r=lt(),s=On(n),i=un(r,s),i.callback=e??null,Vn(n,i,s),t.current.lanes=s,Hi(t,s,r),yt(t,r),t}function il(t,e,n,r){var s=e.current,i=lt(),o=On(s);return n=Gy(n),e.context===null?e.context=n:e.pendingContext=n,e=un(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vn(s,e,o),t!==null&&(Bt(t,s,o,i),Zo(t,s,o)),o}function Va(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zh(t,e){jp(t,e),(t=t.alternate)&&jp(t,e)}function LE(){return null}var Xy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bh(t){this._internalRoot=t}ol.prototype.render=Bh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));il(t,e,null,null)};ol.prototype.unmount=Bh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yr(function(){il(null,t,null,null)}),e[dn]=null}};function ol(t){this._internalRoot=t}ol.prototype.unstable_scheduleHydration=function(t){if(t){var e=kg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<An.length&&e!==0&&e<An[n].priority;n++);An.splice(n,0,t),n===0&&Rg(t)}};function $h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function al(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vp(){}function FE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Va(o);i.call(d)}}var o=Yy(e,r,t,0,null,!1,!1,"",Vp);return t._reactRootContainer=o,t[dn]=o.current,Ii(t.nodeType===8?t.parentNode:t),yr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Va(u);l.call(d)}}var u=Uh(t,0,!1,null,null,!1,!1,"",Vp);return t._reactRootContainer=u,t[dn]=u.current,Ii(t.nodeType===8?t.parentNode:t),yr(function(){il(e,u,n,r)}),u}function ll(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Va(o);l.call(u)}}il(e,o,t,s)}else o=FE(n,e,t,s,r);return Va(o)}Ag=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Js(e.pendingLanes);n!==0&&(lh(e,n|1),yt(e,Pe()),!(ie&6)&&(ls=Pe()+500,Gn()))}break;case 13:yr(function(){var r=fn(t,1);if(r!==null){var s=lt();Bt(r,t,1,s)}}),zh(t,1)}};uh=function(t){if(t.tag===13){var e=fn(t,134217728);if(e!==null){var n=lt();Bt(e,t,134217728,n)}zh(t,134217728)}};Cg=function(t){if(t.tag===13){var e=On(t),n=fn(t,e);if(n!==null){var r=lt();Bt(n,t,e,r)}zh(t,e)}};kg=function(){return ue};Pg=function(t,e){var n=ue;try{return ue=t,e()}finally{ue=n}};Wu=function(t,e,n){switch(e){case"input":if(Fu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ja(r);if(!s)throw Error(z(90));og(r),Fu(r,s)}}}break;case"textarea":lg(t,n);break;case"select":e=n.value,e!=null&&Kr(t,!!n.multiple,e,!1)}};mg=Mh;gg=yr;var UE={usingClientEntryPoint:!1,Events:[Wi,zr,Ja,fg,pg,Mh]},Ks={findFiberByHostInstance:ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zE={bundleType:Ks.bundleType,version:Ks.version,rendererPackageName:Ks.rendererPackageName,rendererConfig:Ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_g(t),t===null?null:t.stateNode},findFiberByHostInstance:Ks.findFiberByHostInstance||LE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bo.isDisabled&&Bo.supportsFiber)try{Ka=Bo.inject(zE),Kt=Bo}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UE;Ct.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$h(e))throw Error(z(200));return OE(t,e,null,n)};Ct.createRoot=function(t,e){if(!$h(t))throw Error(z(299));var n=!1,r="",s=Xy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Uh(t,1,!1,null,null,n,!1,r,s),t[dn]=e.current,Ii(t.nodeType===8?t.parentNode:t),new Bh(e)};Ct.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=_g(e),t=t===null?null:t.stateNode,t};Ct.flushSync=function(t){return yr(t)};Ct.hydrate=function(t,e,n){if(!al(e))throw Error(z(200));return ll(null,t,e,!0,n)};Ct.hydrateRoot=function(t,e,n){if(!$h(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Xy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Yy(e,null,t,1,n??null,s,!1,i,o),t[dn]=e.current,Ii(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ol(e)};Ct.render=function(t,e,n){if(!al(e))throw Error(z(200));return ll(null,t,e,!1,n)};Ct.unmountComponentAtNode=function(t){if(!al(t))throw Error(z(40));return t._reactRootContainer?(yr(function(){ll(null,null,t,!1,function(){t._reactRootContainer=null,t[dn]=null})}),!0):!1};Ct.unstable_batchedUpdates=Mh;Ct.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!al(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return ll(t,e,n,!1,r)};Ct.version="18.3.1-next-f1338f8080-20240426";function Jy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jy)}catch(t){console.error(t)}}Jy(),Jm.exports=Ct;var BE=Jm.exports,Mp=BE;bu.createRoot=Mp.createRoot,bu.hydrateRoot=Mp.hydrateRoot;var Ie=(t=>(t.Baking="baking-menu",t.BakingRecipeSelection="baking-recipe-selection",t.BakingProcess="baking-process",t.HeatingTimer="heating-timer",t.Operations="operations",t.Inventory="inventory",t.Settings="settings",t))(Ie||{});const $E={"cake-slice":c.jsx("path",{d:"M11.84 10.51 16.2 6.15a2.42 2.42 0 0 1 3.42 0 2.42 2.42 0 0 1 0 3.42l-4.36 4.36"}),"clipboard-kanban":c.jsxs(c.Fragment,{children:[c.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),c.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),c.jsx("path",{d:"M12 14h.01"}),c.jsx("path",{d:"M16 14h.01"}),c.jsx("path",{d:"M8 14h.01"})]}),archive:c.jsxs(c.Fragment,{children:[c.jsx("rect",{width:"20",height:"5",x:"2",y:"3",rx:"1"}),c.jsx("path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"}),c.jsx("path",{d:"M10 12h4"})]}),bell:c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),c.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),check:c.jsx("path",{d:"M20 6 9 17l-5-5"}),thermometer:c.jsx(c.Fragment,{children:c.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"})}),"thermometer-snowflake":c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"}),c.jsx("path",{d:"M22 12h-3"}),c.jsx("path",{d:"M2 20v-3"}),c.jsx("path",{d:"M20 4v3"}),c.jsx("path",{d:"m22 7-3 3"}),c.jsx("path",{d:"M2 13l3 3"}),c.jsx("path",{d:"M5 4l-3 3"})]}),"thermometer-sun":c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"}),c.jsx("path",{d:"M4 11H2"}),c.jsx("path",{d:"M10 11H8"}),c.jsx("path",{d:"M22 11h-2"}),c.jsx("path",{d:"M16 11h-2"}),c.jsx("path",{d:"M19 8a3 3 0 0 0-6 0"}),c.jsx("path",{d:"M19.3 4.7a3 3 0 0 0-4.25-4.25"})]}),"chevron-right":c.jsx("path",{d:"m9 18 6-6-6-6"}),"rotate-ccw":c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),c.jsx("path",{d:"M3 3v5h5"})]}),x:c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M18 6 6 18"}),c.jsx("path",{d:"m6 6 12 12"})]}),"plus-circle":c.jsxs(c.Fragment,{children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("path",{d:"M8 12h8"}),c.jsx("path",{d:"M12 8v8"})]}),"refresh-cw":c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),c.jsx("path",{d:"M21 3v5h-5"}),c.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),c.jsx("path",{d:"M3 21v-5h5"})]}),list:c.jsxs(c.Fragment,{children:[c.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),c.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),c.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),c.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),c.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),c.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]}),"play-circle":c.jsxs(c.Fragment,{children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]}),"check-circle":c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),c.jsx("path",{d:"m9 11 3 3L22 4"})]}),"alert-triangle":c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),c.jsx("path",{d:"M12 9v4"}),c.jsx("path",{d:"M12 17h.01"})]}),"map-pin":c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),c.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),boxes:c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),c.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),c.jsx("path",{d:"M12 22V12"})]}),"shopping-cart":c.jsxs(c.Fragment,{children:[c.jsx("circle",{cx:"8",cy:"21",r:"1"}),c.jsx("circle",{cx:"19",cy:"21",r:"1"}),c.jsx("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.15"})]}),store:c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"}),c.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),c.jsx("path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"}),c.jsx("path",{d:"M2 7h20"}),c.jsx("path",{d:"M22 7v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7"})]}),plus:c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M5 12h14"}),c.jsx("path",{d:"M12 5v14"})]}),minus:c.jsx("path",{d:"M5 12h14"}),pencil:c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),c.jsx("path",{d:"m15 5 4 4"})]}),settings:c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0 2l.15.08a2 2 0 0 0 .73-2.73l.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),c.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"bar-chart-2":c.jsxs(c.Fragment,{children:[c.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),c.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),c.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),star:c.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}),menu:c.jsx(c.Fragment,{children:c.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})}),"trash-2":c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M3 6h18"}),c.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),c.jsx("path",{d:"M10 11v6"}),c.jsx("path",{d:"M14 11v6"})]})},le=({name:t,className:e="",size:n=24})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:$E[t]}),HE=({activeScreen:t,setActiveScreen:e,processes:n,urgentTasks:r,shoppingListItems:s,inProgressTasks:i,isOpen:o,onClose:l})=>{const u=I=>{e(I),l()},d=({active:I,onClick:P,children:N})=>{const T="w-full flex items-center gap-4 p-4 rounded-lg font-bold text-left cursor-pointer transition-all duration-200",_=I?`${T} bg-blue-600 text-white`:`${T} text-gray-500 hover:bg-gray-100 hover:text-gray-900`;return c.jsx("button",{onClick:P,className:_,children:N})},p=({title:I,children:P,onClick:N,isAlarm:T})=>c.jsxs("div",{className:"mb-4",children:[c.jsx("h3",{className:`text-xs uppercase font-bold mb-2 px-2 ${T?"text-red-600 animate-pulse":"text-blue-600"}`,children:I}),c.jsx("button",{onClick:N,className:`w-full text-left p-3 rounded-lg transition-colors border ${T?"bg-red-50 border-red-400 hover:bg-red-100":"bg-gray-100 border-gray-200 hover:bg-gray-200"}`,children:P})]}),m=n.filter(I=>I.state!=="finished"),y=t===Ie.Baking,x=`
        sidebar-nav flex flex-col bg-white p-4 border-r border-gray-200 overflow-y-auto 
        fixed inset-y-0 left-0 z-50 w-64 transform transition-transform duration-300 ease-in-out 
        md:relative md:w-auto md:translate-x-0
        ${o?"translate-x-0":"-translate-x-full"}
    `;return c.jsxs("nav",{className:x,children:[c.jsxs("header",{className:"sidebar-header text-center mb-6 pt-4 flex-shrink-0",children:[c.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Cafestesia"}),c.jsx("span",{className:"text-sm text-gray-500",children:"Gestor v2.1 (React)"})]}),c.jsxs("div",{className:"flex-grow",children:[m.map(I=>{const P=I.state==="alarm";return c.jsx(p,{title:P?"Accin Requerida!":"En Produccin",onClick:()=>u(Ie.Baking),isAlarm:P,children:c.jsxs("div",{className:"flex items-center gap-3 font-bold text-sm text-gray-800",children:[c.jsx(le,{name:P?"bell":"cake-slice",className:P?"text-red-500":"text-green-600",size:20}),c.jsx("span",{children:I.name})]})},I.id)}),i.length>0&&c.jsx(p,{title:"Tareas en Progreso",onClick:()=>u(Ie.Operations),children:c.jsxs("div",{className:"flex items-center gap-3 font-bold text-sm text-gray-800",children:[c.jsx(le,{name:"play-circle",className:"text-yellow-600",size:20}),c.jsxs("span",{children:[i.length," tarea",i.length>1?"s":""," activa",i.length>1?"s":""]})]})}),r.length>0&&c.jsx(p,{title:"Operaciones Urgentes",onClick:()=>u(Ie.Operations),children:r.map(({task:I,diff:P})=>c.jsxs("div",{className:"text-sm mb-2 last:mb-0",children:[c.jsx("p",{className:"font-bold text-gray-800",children:I.text}),c.jsxs("p",{className:`text-xs font-semibold ${P<=0?"text-red-600 animate-pulse":"text-blue-600"}`,children:[I.time," ",P<=0?"(AHORA!)":`(en ${P} min)`]})]},I.id))}),s.length>0&&c.jsx(p,{title:"Inventario Crtico",onClick:()=>u(Ie.Inventory),children:c.jsxs("div",{className:"flex items-center gap-3 font-bold text-sm text-gray-800",children:[c.jsx(le,{name:"shopping-cart",className:"text-red-500",size:20}),c.jsxs("span",{children:[s.length," producto",s.length>1?"s":""," en la lista de compras"]})]})})]}),c.jsxs("div",{className:"nav-buttons flex flex-col gap-2 mt-auto flex-shrink-0",children:[c.jsxs(d,{active:y,onClick:()=>u(Ie.Baking),children:[c.jsx(le,{name:"cake-slice",size:20}),c.jsx("span",{children:"Produccin de Pan"})]}),c.jsxs(d,{active:t===Ie.Operations,onClick:()=>u(Ie.Operations),children:[c.jsx(le,{name:"clipboard-kanban",size:20}),c.jsx("span",{children:"Operaciones"})]}),c.jsxs(d,{active:t===Ie.Inventory,onClick:()=>u(Ie.Inventory),children:[c.jsx(le,{name:"archive",size:20}),c.jsx("span",{children:"Inventario"})]}),c.jsxs(d,{active:t===Ie.Settings,onClick:()=>u(Ie.Settings),children:[c.jsx(le,{name:"settings",size:20}),c.jsx("span",{children:"Configuracin"})]})]})]})},_n=({isOpen:t,onClose:e,title:n,children:r})=>t?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 animate-fadeIn",onClick:e,children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg",onClick:s=>s.stopPropagation(),children:[c.jsx("div",{className:"p-6 border-b border-gray-200",children:c.jsx("h3",{className:"text-xl font-bold text-blue-600",children:n})}),c.jsx("div",{className:"p-6",children:r})]})}):null,ul={roles:{id:"roles",name:"Roles de Canela",pluralName:"Roles de Canela listos",setupInstruction:"Configura el horno a 230C y programa 16 minutos.",totalDuration:14*60,steps:[{duration:2*60,instruction:"Coloca los roles en los niveles 1 y 3. Deja que el calor eleve el producto sin presionar INICIO.",isPauseStep:!0},{duration:6*60,instruction:"Baja la temperatura a 210C y comienza el horneado."},{duration:4*60,instruction:"Gira las charolas 180 grados."},{duration:2*60,instruction:"Agrega 20 ml de leche y gira cada rol 1/3 de vuelta en sentido contrario del reloj."},{duration:2*60,instruction:"Vuelve a girar cada rol 1/3 de vuelta para finalizar."}]},ciabattas:{id:"ciabattas",name:"Ciabattas",pluralName:"Ciabattas listas",setupInstruction:"Configura el horno a 230C y programa 30 minutos.",totalDuration:28*60,steps:[{duration:2*60,instruction:"Coloca las charolas (niveles 1 y 3) y pulveriza agua 12 veces. Deja que el calor eleve el producto sin presionar INICIO.",isPauseStep:!0},{duration:8*60,instruction:"Baja la temperatura a 210C y comienza el horneado."},{duration:8*60,instruction:"Gira las charolas 180 grados y vuelve a pulverizar agua 12 veces."},{duration:6*60,instruction:"Intercambia las charolas de nivel y da vuelta a cada pieza 180 grados."},{duration:6*60,instruction:"Gira las charolas 180 grados por ltima vez."}]},croissants:{id:"croissants",name:"Croissants",pluralName:"Croissants listos",setupInstruction:"Configura el horno a 230C y programa 21 minutos.",totalDuration:21*60,steps:[{duration:3*60,instruction:"Coloca las charolas en los niveles 1 y 3. Pulveriza agua 12 veces."},{duration:6*60,instruction:"Baja la temperatura a 200C y continua horneando. (Nota: Si horneas solo 1 charola, baja a 180C)"},{duration:5*60,instruction:"Gira las charolas 180 grados."},{duration:5*60,instruction:"Intercambia las charolas de nivel y gralas 180 grados."},{duration:2*60,instruction:"Gira las charolas 180 grados por ltima vez."}]}},qE=new Date,tr=qE.toISOString().split("T")[0],Zy=[{text:"Roles: Descongelar en refrigeracin",employee:"Ali",shift:"matutino",date:tr,time:"08:00",duration:30,isCritical:!0,zone:"Panadera",status:"todo"},{text:"Checar ingredientes diarios y comprarlos",employee:"Ali",shift:"pre-apertura",date:tr,time:"15:00",duration:60,isCritical:!0,zone:"Cocina",status:"todo"},{text:"Hornear Roles",employee:"Claudia",shift:"pre-apertura",date:tr,time:"16:00",duration:45,isCritical:!0,zone:"Panadera",status:"todo"},{text:"Hornear Croissants",employee:"Claudia",shift:"pre-apertura",date:tr,time:"16:30",duration:45,isCritical:!0,zone:"Panadera",status:"todo"},{text:"Corte de caja",employee:"Fer",shift:"cierre",date:tr,time:"21:50",duration:20,isCritical:!0,zone:"Admin",status:"todo"},{text:"Limpiar barra y area de barismo",employee:"Claudia",shift:"pre-apertura",date:tr,time:"17:00",duration:30,isCritical:!0,zone:"Barra",status:"todo"},{text:"Hacer masa para ciabatta (da siguiente)",employee:"Fer",shift:"cierre",date:tr,time:"21:40",duration:20,isCritical:!0,zone:"Panadera",status:"todo"}],ev=[{name:"Harina de Trigo",category:"Secos",currentStock:50,unit:"kg",minStock:10,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Levadura Fresca",category:"Refrigerados",currentStock:1,unit:"kg",minStock:.5,providerPreferido:"Proveedor B",purchaseHistory:[]},{name:"Mantequilla sin Sal",category:"Refrigerados",currentStock:5,unit:"kg",minStock:2,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Chocolate Amargo 70%",category:"Secos",currentStock:3,unit:"kg",minStock:1,providerPreferido:"Proveedor C",purchaseHistory:[]},{name:"Leche Entera",category:"Lcteos",currentStock:8,unit:"lt",minStock:4,providerPreferido:"Supermercado",purchaseHistory:[]},{name:"Caf en Grano",category:"Bebidas",currentStock:10,unit:"kg",minStock:5,providerPreferido:"Tostador Local",purchaseHistory:[]},{name:"Azcar Morena",category:"Secos",currentStock:15,unit:"kg",minStock:5,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Canela en Polvo",category:"Secos",currentStock:.4,unit:"kg",minStock:.5,providerPreferido:"Proveedor C",purchaseHistory:[]}],Eu=["kg","lt","pz","g","ml","unidad(es)"],WE=8,QE=22,KE=[{value:5,label:"5 min"},{value:10,label:"10 min"},{value:15,label:"15 min"},{value:30,label:"30 min"},{value:60,label:"1 hora"},{value:120,label:"2 horas"}],GE=({isOpen:t,onClose:e,onSelectRecipe:n,onSelectHeating:r})=>{const s=o=>{n(o),e()},i=(o,l)=>{r(o,l),e()};return c.jsx(_n,{isOpen:t,onClose:e,title:"Iniciar un Nuevo Proceso",children:c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-blue-700 mb-2",children:"Recetas de Horneado"}),c.jsx("div",{className:"flex flex-col gap-3",children:Object.values(ul).map(o=>c.jsxs("button",{onClick:()=>s(o.id),className:"w-full p-4 bg-gray-100 text-gray-800 font-bold rounded-lg border border-gray-200 hover:bg-gray-200 hover:border-gray-300 transition-colors text-left",children:["Hornear ",o.name]},o.id))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-blue-700 mb-2",children:"Procesos de Calentamiento"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsxs("button",{onClick:()=>i(15*60,"Precalentar (15 min)"),className:"w-full p-4 flex items-center justify-center gap-2 bg-gray-100 text-gray-800 font-bold rounded-lg border border-gray-200 hover:bg-gray-200 hover:border-gray-300 transition-colors",children:[c.jsx(le,{name:"thermometer-snowflake",size:20})," Precalentar"]}),c.jsxs("button",{onClick:()=>i(7*60,"Recalentar (7 min)"),className:"w-full p-4 flex items-center justify-center gap-2 bg-gray-100 text-gray-800 font-bold rounded-lg border border-gray-200 hover:bg-gray-200 hover:border-gray-300 transition-colors",children:[c.jsx(le,{name:"thermometer-sun",size:20})," Recalentar"]})]})]})]})})},Op=t=>{(isNaN(t)||t<0)&&(t=0);const e=Math.floor(t/60),n=t%60;return`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}`},YE=({step:t,isCompleted:e,isCurrent:n})=>{let r="text-gray-500";return n&&(r="font-bold text-blue-700"),e&&(r="text-gray-400 line-through"),c.jsxs("div",{className:"flex items-start gap-3 py-2",children:[c.jsx("div",{className:"flex-shrink-0 mt-1",children:e?c.jsx(le,{name:"check-circle",size:16,className:"text-green-500"}):c.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${n?"border-blue-500 bg-blue-100":"border-gray-300"}`})}),c.jsx("p",{className:`text-sm ${r}`,children:t.instruction})]})},Lp=({process:t,onAdvance:e,onTogglePause:n,onCancel:r,onAcknowledgeFinish:s})=>{const{state:i,name:o,steps:l,currentStepIndex:u,totalTimeLeft:d,stepTimeLeft:p}=t,[m,y]=O.useState(!1),x=()=>{switch(i){case"running":return"border-green-500";case"alarm":return"border-red-500 animate-pulse-red";case"finished":return"border-blue-500";case"paused":return"border-gray-300";default:return"border-gray-300"}},I=()=>{switch(i){case"running":return"bg-green-100 text-green-800";case"alarm":return"bg-red-100 text-red-800";case"finished":return"bg-blue-100 text-blue-800";case"paused":return"bg-gray-100 text-gray-800";default:return"bg-gray-100"}},P=()=>{switch(i){case"paused":return c.jsx("button",{onClick:()=>n(t.id),className:"w-full bg-green-500 text-white font-bold py-3 rounded-lg hover:bg-green-600 transition-colors",children:"INICIAR"});case"running":return c.jsx("button",{onClick:()=>n(t.id),className:"w-full bg-yellow-500 text-white font-bold py-3 rounded-lg hover:bg-yellow-600 transition-colors",children:"PAUSAR"});case"alarm":return c.jsx("button",{onClick:()=>e(t.id),className:"w-full bg-blue-500 text-white font-bold py-3 rounded-lg hover:bg-blue-600 transition-colors animate-pulse",children:"SIGUIENTE PASO"});case"finished":return c.jsx("button",{onClick:()=>s(t),className:"w-full bg-gray-500 text-white font-bold py-3 rounded-lg hover:bg-gray-600 transition-colors",children:"LIMPIAR"})}};return m?c.jsxs("div",{className:"flex flex-col bg-white rounded-lg border-2 border-red-400 shadow-lg p-4 justify-center items-center text-center",children:[c.jsx("h4",{className:"font-bold text-lg mb-2 text-gray-800",children:"Ests seguro?"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Se perder todo el progreso de este proceso."}),c.jsxs("div",{className:"flex gap-4 w-full",children:[c.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"No, volver"}),c.jsx("button",{onClick:()=>r(t.id),className:"flex-1 py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"S, cancelar"})]})]}):c.jsxs("div",{className:`flex flex-col bg-white rounded-lg border-2 shadow-sm ${x()}`,children:[c.jsx("header",{className:"p-3 rounded-t-md",children:c.jsx("h3",{className:`font-bold text-lg ${I().split(" ")[1]}`,children:o})}),c.jsxs("div",{className:"p-4 flex-grow flex flex-col justify-between",children:[c.jsxs("div",{className:"timers flex justify-around text-center mb-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Restante"}),c.jsx("p",{className:"text-3xl font-bold",children:Op(d)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:"Paso Actual"}),c.jsx("p",{className:"text-3xl font-bold",children:Op(p)})]})]}),c.jsxs("div",{className:"steps-list mb-4 p-3 bg-gray-50 rounded-lg max-h-40 overflow-y-auto border border-gray-200",children:[l.map((N,T)=>c.jsx(YE,{step:N,isCompleted:T<u,isCurrent:T===u&&i!=="finished"},T)),i==="finished"&&c.jsxs("div",{className:"flex items-start gap-3 py-2 text-green-700 font-bold",children:[c.jsx(le,{name:"check-circle",size:16,className:"mt-1"}),c.jsx("p",{className:"text-sm",children:"Proceso completado!"})]})]}),c.jsxs("div",{className:"action-buttons space-y-2",children:[P(),i!=="finished"&&c.jsx("button",{onClick:()=>y(!0),className:"w-full text-center text-xs text-gray-500 hover:text-red-600 font-semibold py-1 transition-colors",children:"Cancelar Proceso"})]})]})]})},XE=({rating:t,setRating:e})=>c.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(n=>c.jsx("button",{type:"button",onClick:()=>e(n),onMouseEnter:()=>{},onMouseLeave:()=>{},className:"transition-transform transform hover:scale-125",children:c.jsx(le,{name:"star",size:40,className:`cursor-pointer ${n<=t?"text-yellow-400 fill-current":"text-gray-300"}`})},n))}),JE=({isOpen:t,processName:e,onSave:n,onSkip:r})=>{const[s,i]=O.useState(3),[o,l]=O.useState(""),u=()=>{n(s,o)};return c.jsx(_n,{isOpen:t,onClose:r,title:`Feedback para: ${e}`,children:c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Qu tal sali el resultado?"}),c.jsx(XE,{rating:s,setRating:i})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"feedback-notes",className:"block text-sm font-medium text-gray-600 mb-1",children:"Notas (Opcional)"}),c.jsx("textarea",{id:"feedback-notes",value:o,onChange:d=>l(d.target.value),rows:4,placeholder:"Ej: El color fue perfecto, pero la prxima vez intentar con 1 minuto menos...",className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"flex justify-between items-center mt-4",children:[c.jsx("button",{type:"button",onClick:r,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Omitir"}),c.jsx("button",{type:"button",onClick:u,className:"py-2 px-6 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})})},Fp=({productionHook:t,recipeLogHook:e})=>{const[n,r]=O.useState(!1),[s,i]=O.useState(null),{processes:o,startBakingProcess:l,startHeatingProcess:u,advanceProcess:d,togglePauseProcess:p,cancelProcess:m}=t,{addFeedback:y}=e,x=_=>{_.type==="baking"&&_.recipeId?i(_):m(_.id)},I=(_,k)=>{s&&s.recipeId&&(y({recipeId:s.recipeId,rating:_,notes:k}),m(s.id)),i(null)},P=()=>{s&&m(s.id),i(null)},N=o.filter(_=>_.state!=="finished"),T=o.filter(_=>_.state==="finished");return c.jsxs("div",{className:"p-4 md:p-6 h-full flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[c.jsx("h2",{className:"text-xl font-bold text-blue-700",children:"Procesos Activos"}),c.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[c.jsx(le,{name:"plus-circle",size:16}),"Iniciar Proceso"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto",children:[N.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(_=>c.jsx(Lp,{process:_,onAdvance:d,onTogglePause:p,onCancel:m,onAcknowledgeFinish:()=>{}},_.id))}):c.jsxs("div",{className:"text-center py-16 text-gray-500",children:[c.jsx("p",{children:"No hay procesos activos en este momento."}),c.jsx("p",{children:'Haz clic en "Iniciar Proceso" para comenzar.'})]}),T.length>0&&c.jsxs("div",{className:"mt-8",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-600",children:"Finalizados Recientemente"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:T.map(_=>c.jsx(Lp,{process:_,onAdvance:d,onTogglePause:()=>{},onCancel:m,onAcknowledgeFinish:()=>x(_)},_.id))})]})]}),c.jsx(GE,{isOpen:n,onClose:()=>r(!1),onSelectRecipe:l,onSelectHeating:u}),s&&c.jsx(JE,{isOpen:!!s,processName:s.name,onSave:I,onSkip:P})]})},ZE=[{label:"L",value:"1"},{label:"M",value:"2"},{label:"M",value:"3"},{label:"J",value:"4"},{label:"V",value:"5"},{label:"S",value:"6"},{label:"D",value:"0"}],ex=({isOpen:t,onClose:e,onSave:n,task:r,selectedDate:s})=>{const[i,o]=O.useState(""),[l,u]=O.useState("Ali"),[d,p]=O.useState("08"),[m,y]=O.useState("00"),[x,I]=O.useState("AM"),[P,N]=O.useState("30"),[T,_]=O.useState("pre-apertura"),[k,D]=O.useState(""),[F,M]=O.useState(!1),[E,g]=O.useState("once"),[w,S]=O.useState([]),[C,R]=O.useState([]),[A,ve]=O.useState("");O.useEffect(()=>{if(t){o((r==null?void 0:r.text)||""),u((r==null?void 0:r.employee)||"Ali");const U=(r==null?void 0:r.time)||"08:00",[G,re]=U.split(":").map(Number),fe=G>=12?"PM":"AM";let wt=G%12;wt===0&&(wt=12),p(String(wt).padStart(2,"0")),y(String(re).padStart(2,"0")),I(fe),N(String((r==null?void 0:r.duration)||"30")),_((r==null?void 0:r.shift)||"pre-apertura"),D((r==null?void 0:r.zone)||""),M((r==null?void 0:r.isCritical)||!1),g("once"),S([]),R((r==null?void 0:r.subtasks)||[]),ve("")}},[t,r]);const Z=U=>{S(G=>G.includes(U)?G.filter(re=>re!==U):[...G,U])},Ce=()=>{if(A.trim()==="")return;const U={id:`sub-${Date.now()}`,text:A.trim(),isCompleted:!1};R([...C,U]),ve("")},st=U=>{U.key==="Enter"&&(U.preventDefault(),Ce())},$=U=>{R(C.filter(G=>G.id!==U))},Q=U=>{if(U.preventDefault(),!i){alert("Por favor completa el nombre de la tarea.");return}if(E==="weekly"&&w.length===0){alert("Por favor selecciona al menos un da para la tarea recurrente.");return}let G=parseInt(d,10);x==="PM"&&G!==12?G+=12:x==="AM"&&G===12&&(G=0);const re=`${String(G).padStart(2,"0")}:${m}`,fe={text:i,employee:l,time:re,duration:parseInt(P,10),shift:T,zone:k,isCritical:F,date:(r==null?void 0:r.date)||s,recurrence:E,selectedDays:w,subtasks:C};n(fe,r==null?void 0:r.id),e()};return c.jsx(_n,{isOpen:t,onClose:e,title:r?"Editar Tarea":"Aadir Nueva Tarea",children:c.jsxs("form",{onSubmit:Q,className:"flex flex-col gap-4 max-h-[80vh] overflow-y-auto pr-2",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Nombre de la Tarea"}),c.jsx("input",{type:"text",value:i,onChange:U=>o(U.target.value),required:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"text-sm font-medium text-gray-600 mb-2 block",children:"Repeticin"}),c.jsxs("div",{className:"flex gap-2 bg-gray-200 rounded-lg p-1",children:[c.jsx("button",{type:"button",onClick:()=>g("once"),className:`flex-1 p-2 rounded-md text-sm font-bold transition-colors ${E==="once"?"bg-white shadow-sm":""}`,children:"Una vez"}),c.jsx("button",{type:"button",onClick:()=>g("weekly"),className:`flex-1 p-2 rounded-md text-sm font-bold transition-colors ${E==="weekly"?"bg-white shadow-sm":""}`,children:"Semanalmente"})]})]}),E==="weekly"&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"text-sm font-medium text-gray-600 mb-2 block",children:"Das de la semana"}),c.jsx("div",{className:"flex justify-between gap-1",children:ZE.map(({label:U,value:G})=>c.jsx("button",{type:"button",onClick:()=>Z(G),className:`w-9 h-9 flex items-center justify-center font-bold rounded-full border-2 transition-colors ${w.includes(G)?"bg-blue-600 text-white border-blue-600":"bg-gray-100 border-gray-300"}`,children:U},G))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Empleado"}),c.jsxs("select",{value:l,onChange:U=>u(U.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:[c.jsx("option",{children:"Ali"}),c.jsx("option",{children:"Fer"}),c.jsx("option",{children:"Claudia"}),c.jsx("option",{children:"Admin"})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Turno"}),c.jsxs("select",{value:T,onChange:U=>_(U.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:[c.jsx("option",{value:"matutino",children:"Matutino"}),c.jsx("option",{value:"pre-apertura",children:"Pre Apertura"}),c.jsx("option",{value:"cierre",children:"Cierre"}),c.jsx("option",{value:"default",children:"Otro"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Hora"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("select",{value:d,onChange:U=>p(U.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:Array.from({length:12},(U,G)=>G+1).map(U=>c.jsx("option",{value:String(U).padStart(2,"0"),children:String(U).padStart(2,"0")},U))}),c.jsx("select",{value:m,onChange:U=>y(U.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:Array.from({length:60},(U,G)=>G).map(U=>c.jsx("option",{value:String(U).padStart(2,"0"),children:String(U).padStart(2,"0")},U))}),c.jsxs("select",{value:x,onChange:U=>I(U.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:[c.jsx("option",{children:"AM"}),c.jsx("option",{children:"PM"})]})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Duracin"}),c.jsx("select",{value:P,onChange:U=>N(U.target.value),required:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:KE.map(U=>c.jsx("option",{value:U.value,children:U.label},U.value))})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Zona (Opcional)"}),c.jsx("input",{type:"text",value:k,onChange:U=>D(U.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50"})]}),c.jsxs("div",{className:"form-group mt-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-600 mb-2 block",children:"Subtareas"}),c.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg",children:[C.length>0&&c.jsx("ul",{className:"space-y-2 mb-3",children:C.map(U=>c.jsxs("li",{className:"flex items-center justify-between bg-white p-2 rounded",children:[c.jsx("span",{className:"text-sm text-gray-700",children:U.text}),c.jsx("button",{type:"button",onClick:()=>$(U.id),className:"p-1 text-gray-400 hover:text-red-600",children:c.jsx(le,{name:"trash-2",size:16})})]},U.id))}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:A,onChange:U=>ve(U.target.value),onKeyDown:st,placeholder:"Aadir una subtarea...",className:"w-full p-2 border border-gray-300 rounded-md bg-white text-sm"}),c.jsx("button",{type:"button",onClick:Ce,className:"py-2 px-4 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 text-sm",children:"Aadir"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsx("input",{type:"checkbox",id:"task-critical",checked:F,onChange:U=>M(U.target.checked),className:"w-4 h-4"}),c.jsx("label",{htmlFor:"task-critical",className:"text-sm font-medium text-gray-600",children:"Es una tarea crtica"})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-4 pt-4 border-t sticky bottom-0 bg-white",children:[c.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar Cambios"})]})]})})},tx=({selectedDate:t,setSelectedDate:e})=>{const n=new Date;n.setHours(0,0,0,0);const r=new Date(t),s=t.getDay(),i=t.getDate()-s+(s===0?-6:1);r.setDate(i),r.setHours(0,0,0,0);const o=[];for(let u=0;u<7;u++){const d=new Date(r);d.setDate(r.getDate()+u),o.push(d)}const l=(u,d)=>u.getFullYear()===d.getFullYear()&&u.getMonth()===d.getMonth()&&u.getDate()===d.getDate();return c.jsx("div",{className:"flex justify-center items-center gap-1 md:gap-2 p-1 bg-gray-200 rounded-lg",children:o.map(u=>{const d=l(u,t),p=l(u,n);return c.jsxs("button",{onClick:()=>e(u),className:`px-2 py-1 md:px-4 md:py-2 rounded-md transition-all duration-200 w-full text-center ${d?"bg-white shadow-sm":"bg-transparent"}`,children:[c.jsx("span",{className:`text-xs uppercase font-bold ${d?"text-blue-600":"text-gray-500"}`,children:u.toLocaleDateString("es-ES",{weekday:"short"})}),c.jsx("p",{className:`font-bold text-lg ${p?"text-blue-600":d?"text-gray-800":"text-gray-600"}`,children:u.getDate()})]},u.toISOString())})})},Up={Ali:{bg:"bg-pink-100",border:"border-pink-500",text:"text-pink-800"},Fer:{bg:"bg-purple-100",border:"border-purple-500",text:"text-purple-800"},Claudia:{bg:"bg-teal-100",border:"border-teal-500",text:"text-teal-800"},Admin:{bg:"bg-yellow-100",border:"border-yellow-600",text:"text-yellow-900"}},nx=t=>{switch(t){case"inprogress":return"opacity-100 animate-pulse-yellow";case"done":return"opacity-50";case"todo":default:return"opacity-100"}},rx=({task:t,onUpdateStatus:e,onEdit:n,onViewSubtasks:r,style:s})=>{var P,N;const{bg:i,border:o,text:l}=Up[t.employee]||Up.Admin,u=nx(t.status),d=T=>{T.stopPropagation(),t.status==="todo"?e(t.id,"inprogress"):t.status==="inprogress"?e(t.id,"done"):t.status==="done"&&e(t.id,"todo")},p=new Date(`${t.date}T${t.time}`),y=new Date(p.getTime()+t.duration*6e4).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"}),x=((P=t.subtasks)==null?void 0:P.length)||0,I=((N=t.subtasks)==null?void 0:N.filter(T=>T.isCompleted).length)||0;return c.jsxs("div",{style:s,onClick:r,className:`absolute rounded-lg p-2 flex gap-2 transition-all duration-300 cursor-pointer ${i} border-2 ${u} ${t.status==="inprogress"?o:"border-transparent"}`,children:[c.jsx("div",{className:`flex-shrink-0 w-1 h-full ${o.replace("border-","bg-")} rounded-full`}),c.jsxs("div",{className:"flex-grow flex flex-col min-w-0 min-h-0",children:[c.jsxs("div",{className:"flex-grow overflow-hidden",children:[c.jsx("p",{className:`font-bold text-sm break-words ${l} ${t.status==="done"?"line-through":""}`,children:t.text}),c.jsxs("p",{className:`text-xs ${l} ${t.status==="done"?"line-through":""}`,children:[t.time," - ",y," (",t.duration," min)"]})]}),c.jsxs("div",{className:"flex items-center justify-between mt-1 flex-shrink-0",children:[c.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full bg-white/60 ${l}`,children:t.employee}),c.jsxs("div",{className:"flex items-center gap-2",children:[x>0&&c.jsxs("div",{className:`flex items-center gap-1 text-xs font-semibold ${l}`,children:[c.jsx(le,{name:"list",size:14}),c.jsxs("span",{children:[I,"/",x]})]}),c.jsx("button",{onClick:T=>{T.stopPropagation(),n(t)},className:`p-1 rounded-full hover:bg-black/10 transition-colors ${l}`,title:"Editar Tarea",children:c.jsx(le,{name:"pencil",size:14})})]})]})]}),c.jsx("div",{className:"flex-shrink-0",children:c.jsxs("button",{onClick:d,className:"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all",style:{borderColor:t.status==="done"?"#4ade80":"#9ca3af",backgroundColor:t.status==="done"?"#4ade80":"white"},children:[t.status==="inprogress"&&c.jsx("div",{className:"w-2.5 h-2.5 bg-yellow-500 rounded-full"}),t.status==="done"&&c.jsx(le,{name:"check",size:16,className:"text-white"})]})})]})},sx=({task:t,onClose:e,onUpdateTask:n})=>{var y,x;const[r,s]=O.useState(""),i=I=>{const P=(t.subtasks||[]).map(N=>N.id===I?{...N,isCompleted:!N.isCompleted}:N);n({...t,subtasks:P})},o=()=>{if(r.trim()==="")return;const I={id:`sub-${Date.now()}`,text:r.trim(),isCompleted:!1},P=[...t.subtasks||[],I];n({...t,subtasks:P}),s("")},l=I=>{const P=(t.subtasks||[]).filter(N=>N.id!==I);n({...t,subtasks:P})},u=I=>{I.key==="Enter"&&(I.preventDefault(),o())},d=((y=t.subtasks)==null?void 0:y.filter(I=>I.isCompleted).length)||0,p=((x=t.subtasks)==null?void 0:x.length)||0,m=p>0?d/p*100:0;return c.jsx("div",{className:"absolute inset-0 bg-gray-900/40 z-50 flex justify-center items-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md flex flex-col",onClick:I=>I.stopPropagation(),children:[c.jsxs("header",{className:"p-4 border-b",children:[c.jsx("h3",{className:"font-bold text-lg text-blue-700",children:t.text}),c.jsxs("p",{className:"text-sm text-gray-500",children:[t.time," - ",t.employee]})]}),c.jsxs("div",{className:"p-4 flex-grow overflow-y-auto max-h-[50vh]",children:[p>0&&c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-semibold text-gray-600",children:"Progreso"}),c.jsxs("span",{children:[d," / ",p]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:c.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${m}%`}})})]}),c.jsx("div",{className:"space-y-2",children:(t.subtasks||[]).map(I=>c.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-md group",children:[c.jsx("input",{type:"checkbox",checked:I.isCompleted,onChange:()=>i(I.id),className:"w-5 h-5 rounded text-blue-600 focus:ring-blue-500 flex-shrink-0"}),c.jsx("span",{className:`flex-grow text-gray-800 ${I.isCompleted?"line-through text-gray-400":""}`,children:I.text}),c.jsx("button",{onClick:()=>l(I.id),className:"p-1 text-gray-400 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(le,{name:"trash-2",size:16})})]},I.id))}),p===0&&c.jsx("p",{className:"text-center text-gray-500 py-6",children:"No hay subtareas. Aade la primera!"})]}),c.jsx("div",{className:"p-4 border-t bg-gray-50 rounded-b-xl",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:r,onChange:I=>s(I.target.value),onKeyDown:u,placeholder:"Aadir nueva subtarea...",className:"w-full p-2 border border-gray-300 rounded-md bg-white text-sm focus:ring-2 focus:ring-blue-500"}),c.jsx("button",{onClick:o,className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 text-sm",children:"Aadir"})]})})]})})},zp=120,ix=30,ox=({tasks:t,onUpdateStatus:e,onEditTask:n,onUpdateTask:r})=>{const[s,i]=O.useState(new Date),[o,l]=O.useState(null);O.useEffect(()=>{const I=setInterval(()=>i(new Date),6e4);return()=>clearInterval(I)},[]),O.useEffect(()=>{if(o){const I=t.find(P=>P.id===o.id);l(I||null)}},[t]);const u=O.useMemo(()=>{const I={};return t.forEach(P=>{const N=parseInt(P.time.split(":")[0],10);I[N]=!0}),I},[t]),d=O.useMemo(()=>{let I=0;const P=[];for(let N=WE;N<=QE;N++){const _=!!u[N]?zp:ix;P.push({hour:N,top:I,height:_}),I+=_}return P},[u]),p=d.length>0?d[d.length-1].top+d[d.length-1].height:0,m=I=>{const[P,N]=I.split(":").map(Number),T=d.find(k=>k.hour===P);if(!T)return 0;const _=N/60*T.height;return T.top+_},y=O.useMemo(()=>{const I=[...t].sort((N,T)=>N.time.localeCompare(T.time)||T.duration-N.duration),P=[];for(const N of I){const T=m(N.time),_=new Date(`${N.date}T${N.time}`).getTime(),k=_+N.duration*6e4,D=d.find(w=>w.hour===parseInt(N.time.split(":")[0],10)),F=D?D.height:zp,M=N.duration/60*F,E=[];for(const w of P){const S=new Date(`${w.task.date}T${w.task.time}`).getTime(),C=S+w.task.duration*6e4;_<C&&k>S&&E.push(w)}let g=0;for(;E.some(w=>w.left===g);)g++;P.push({task:N,top:T,height:M,left:g,width:1,zIndex:g})}return P.map((N,T,_)=>{const{task:k}=N,D=new Date(`${k.date}T${k.time}`).getTime(),F=D+k.duration*6e4,M=_.filter(C=>{const R=new Date(`${C.task.date}T${C.task.time}`).getTime(),A=R+C.task.duration*6e4;return D<A&&F>R}),E=new Set(M.map(C=>C.left)),g=E.size;let w=0;return w=Array.from(E).sort((C,R)=>C-R).indexOf(N.left),{...N,width:100/g,left:w/g*100}})},[t,d]),x=m(`${s.getHours()}:${s.getMinutes()}`);return c.jsxs("div",{className:"p-4 md:p-6 h-full relative",children:[c.jsxs("div",{className:"relative z-10",style:{height:`${p}px`},children:[d.map(({hour:I,top:P,height:N})=>c.jsxs("div",{className:"absolute w-full",style:{top:`${P}px`,height:`${N}px`},children:[c.jsxs("span",{className:"absolute -top-3 left-0 text-sm font-semibold text-gray-400 w-16 text-right pr-4",children:[I,":00"]}),c.jsx("div",{className:"h-px bg-gray-200 ml-16"})]},I)),x>=0&&x<=p&&c.jsx("div",{className:"absolute left-16 right-0 h-0.5 bg-red-500 z-20",style:{top:`${x}px`},children:c.jsx("div",{className:"absolute -left-1.5 -top-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white"})}),c.jsx("div",{className:"absolute top-0 bottom-0 left-16 right-0",children:y.map(({task:I,top:P,height:N,left:T,width:_,zIndex:k})=>c.jsx(rx,{task:I,onUpdateStatus:e,onEdit:n,onViewSubtasks:()=>l(I),style:{top:`${P}px`,height:`${Math.max(N-4,80)}px`,left:`${T}%`,width:`calc(${_}% - 4px)`,zIndex:k}},I.id))})]}),o&&c.jsx(sx,{task:o,onClose:()=>l(null),onUpdateTask:r})]})},ax=t=>t>0?`en ${t} min`:t===0?"Ahora!":`hace ${Math.abs(t)} min`,lx=({tasksWithDiff:t})=>c.jsxs("div",{className:"bg-yellow-100 border-b-2 border-yellow-300 p-3 flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx(le,{name:"alert-triangle",className:"text-yellow-600",size:20}),c.jsx("h3",{className:"font-bold text-yellow-800 text-base",children:"Tareas Crticas Prximas"})]}),c.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:t.map(({task:e,diff:n})=>c.jsxs("div",{className:"bg-white/70 p-2 rounded-lg border border-yellow-300 flex-shrink-0 w-60",children:[c.jsx("p",{className:"font-bold text-sm text-gray-800 truncate",children:e.text}),c.jsxs("p",{className:`text-xs font-semibold ${n<=0?"text-red-600 animate-pulse":"text-blue-600"}`,children:[e.time," (",ax(n),")"]})]},e.id))})]}),ux=["Ali","Fer","Claudia","Admin"],cx=({kanbanHook:t,criticalTasks:e})=>{const{tasks:n,addTask:r,addMultipleTasks:s,updateTask:i,updateTaskStatus:o}=t,[l,u]=O.useState(new Date),[d,p]=O.useState(!1),[m,y]=O.useState(null),[x,I]=O.useState("All"),P=D=>{y(D),p(!0)},N=()=>{p(!1),y(null)},T=(D,F)=>{const{recurrence:M,selectedDays:E,...g}=D,w=new Date(g.date);if(w.setMinutes(w.getMinutes()+w.getTimezoneOffset()),F){const S=n.find(R=>R.id===F);if(!S)return;const C={...S,...g,id:F};if(i(C),M==="weekly"&&E&&E.length>0){const R=new Date(w),A=w.getDay(),ve=w.getDate()-A+(A===0?-6:1);R.setDate(ve);const Z=w.getDay(),Ce=[];E.forEach(st=>{const $=parseInt(st,10);if($===Z)return;const Q=new Date(R);$===0?Q.setDate(R.getDate()+6):Q.setDate(R.getDate()+($-1)),Q.setMinutes(Q.getMinutes()-Q.getTimezoneOffset()),Ce.push({...g,date:Q.toISOString().split("T")[0]})}),Ce.length>0&&s(Ce)}}else if(M==="weekly"&&E&&E.length>0){const S=new Date(w),C=w.getDay(),R=w.getDate()-C+(C===0?-6:1);S.setDate(R);const A=[];E.forEach(ve=>{const Z=parseInt(ve,10),Ce=new Date(S);Z===0?Ce.setDate(S.getDate()+6):Ce.setDate(S.getDate()+(Z-1)),Ce.setMinutes(Ce.getMinutes()-Ce.getTimezoneOffset()),A.push({...g,date:Ce.toISOString().split("T")[0]})}),s(A)}else r(g)},_=O.useMemo(()=>{const D=new Date(l);return D.setMinutes(D.getMinutes()-D.getTimezoneOffset()),D.toISOString().split("T")[0]},[l]),k=O.useMemo(()=>n.filter(D=>{const F=D.date===_,M=x==="All"||D.employee===x;return F&&M}),[n,_,x]);return c.jsxs("div",{className:"flex flex-col h-full bg-gray-50",children:[e.length>0&&c.jsx(lx,{tasksWithDiff:e}),c.jsxs("div",{className:"operations-header flex flex-col p-4 border-b border-gray-200 gap-4 flex-shrink-0",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center w-full gap-4",children:[c.jsx(tx,{selectedDate:l,setSelectedDate:u}),c.jsx("div",{className:"flex gap-2 w-full md:w-auto",children:c.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm w-full justify-center",children:[c.jsx(le,{name:"plus-circle",size:16}),"Aadir Tarea"]})})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-gray-200 rounded-lg p-1 w-full overflow-x-auto",children:[c.jsx("button",{onClick:()=>I("All"),className:`px-3 py-1 text-sm font-bold rounded-md transition-colors ${x==="All"?"bg-white shadow-sm":"bg-transparent text-gray-600"}`,children:"Todos"}),ux.map(D=>c.jsx("button",{onClick:()=>I(D),className:`px-3 py-1 text-sm font-bold rounded-md transition-colors ${x===D?"bg-white shadow-sm":"bg-transparent text-gray-600"}`,children:D},D))]})]}),c.jsx("div",{className:"flex-grow overflow-auto relative",children:c.jsx(ox,{tasks:k,onEditTask:P,onUpdateStatus:o,onUpdateTask:i})}),c.jsx(ex,{isOpen:d,onClose:N,onSave:T,task:m,selectedDate:_})]})},tv=({isOpen:t,onClose:e,onUpdate:n,item:r,isAdding:s,providers:i})=>{const[o,l]=O.useState(""),[u,d]=O.useState(""),[p,m]=O.useState(""),[y,x]=O.useState(""),I=s?"Aadir":"Usar";O.useEffect(()=>{t&&(l(""),d(""),m(r.providerPreferido||(i.length>0?i[0].name:"")),x(""))},[t,r,i]);const P=N=>{N.preventDefault(),x("");const T=parseFloat(o);if(isNaN(T)||T<=0){x("Introduce una cantidad vlida mayor que 0.");return}if(s){const _=parseFloat(u);if(isNaN(_)||_<0){x("Introduce un precio total vlido.");return}n({itemId:r.id,change:T,purchaseDetails:{totalPrice:_,providerName:p}})}else n({itemId:r.id,change:-T});e()};return c.jsx(_n,{isOpen:t,onClose:e,title:`${I} Stock`,children:c.jsxs("form",{onSubmit:P,className:"flex flex-col gap-4",children:[c.jsxs("div",{children:[c.jsxs("p",{children:["Producto: ",c.jsx("span",{className:"font-bold",children:r.name})]}),c.jsxs("p",{children:["Stock Actual: ",r.currentStock," ",r.unit]})]}),c.jsx(xu,{label:`Cantidad a ${I.toLowerCase()}`,children:c.jsx("input",{type:"number",value:o,onChange:N=>l(N.target.value),step:"any",min:"0.01",required:!0,autoFocus:!0})}),s&&c.jsxs(c.Fragment,{children:[c.jsx(xu,{label:"Precio Total de la Compra ($)",children:c.jsx("input",{type:"number",value:u,onChange:N=>d(N.target.value),step:"any",min:"0",required:!0})}),c.jsx(xu,{label:"Proveedor",children:c.jsxs("select",{value:p,onChange:N=>m(N.target.value),required:!0,children:[i.map(N=>c.jsx("option",{value:N.name,children:N.name},N.id)),c.jsx("option",{value:"Otro",children:"Otro"})]})})]}),y&&c.jsx("p",{className:"text-sm text-red-600 text-center",children:y}),c.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:I})]})]})})},xu=({label:t,children:e})=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:t}),Zc.cloneElement(e,{className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),$o=({icon:t,onClick:e,colorClass:n,title:r})=>c.jsx("button",{title:r,onClick:e,className:`w-10 h-10 flex items-center justify-center bg-gray-100 border border-gray-200 rounded-full transition-colors ${n}`,children:c.jsx(le,{name:t,size:20})}),hx=({item:t,onEdit:e,onAddStock:n,onUseStock:r,onViewHistory:s})=>{const i=t.currentStock<=t.minStock,o=t.purchaseHistory&&t.purchaseHistory.length>0?t.purchaseHistory[t.purchaseHistory.length-1]:null,l=o?(o.totalPrice/o.quantity).toFixed(2):null;return c.jsxs("div",{className:`p-4 bg-white rounded-lg border flex flex-col md:flex-row md:items-center justify-between gap-4 ${i?"border-red-300 bg-red-50":"border-gray-200"}`,children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("p",{className:"font-bold text-lg",children:t.name}),c.jsxs("div",{className:"flex flex-wrap items-baseline gap-x-4 gap-y-1 text-sm",children:[c.jsxs("p",{children:["Stock: ",c.jsx("span",{className:"font-semibold",children:t.currentStock.toFixed(2)})," ",t.unit]}),c.jsxs("p",{className:"text-gray-500",children:["(Mn: ",t.minStock," ",t.unit,")"]}),l&&c.jsxs("p",{className:"text-gray-500 font-semibold",children:["ltimo Precio: $",l," / ",t.unit]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 justify-end",children:[c.jsx($o,{icon:"plus",onClick:n,colorClass:"hover:bg-green-100 hover:text-green-600",title:"Aadir Stock"}),c.jsx($o,{icon:"minus",onClick:r,colorClass:"hover:bg-red-100 hover:text-red-600",title:"Usar Stock"}),c.jsx($o,{icon:"bar-chart-2",onClick:s,colorClass:"hover:bg-yellow-100 hover:text-yellow-600",title:"Historial de Precios"}),c.jsx($o,{icon:"pencil",onClick:()=>e(t),colorClass:"hover:bg-blue-100 hover:text-blue-600",title:"Editar Producto"})]})]})},dx=({isOpen:t,onClose:e,item:n})=>{const r=O.useMemo(()=>n.purchaseHistory?[...n.purchaseHistory].sort((i,o)=>new Date(o.date).getTime()-new Date(i.date).getTime()):[],[n.purchaseHistory]),s=O.useMemo(()=>!r||r.length===0?null:r.reduce((i,o)=>{const l=o.totalPrice/o.quantity;return l<i?l:i},1/0),[r]);return c.jsxs(_n,{isOpen:t,onClose:e,title:`Historial de Precios: ${n.name}`,children:[c.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[s&&s!==1/0&&c.jsx("div",{className:"p-3 mb-4 bg-green-100 border border-green-300 rounded-lg text-center",children:c.jsxs("p",{className:"font-bold text-green-800",children:["Mejor Precio Histrico: $",s.toFixed(2)," / ",n.unit]})}),r.length>0?c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"bg-gray-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2",children:"Fecha"}),c.jsx("th",{className:"p-2",children:"Proveedor"}),c.jsx("th",{className:"p-2",children:"Cant."}),c.jsx("th",{className:"p-2",children:"Total"}),c.jsx("th",{className:"p-2",children:"Unitario"})]})}),c.jsx("tbody",{children:r.map(i=>{const o=i.totalPrice/i.quantity,l=o.toFixed(2)===(s==null?void 0:s.toFixed(2));return c.jsxs("tr",{className:`border-b ${l?"bg-green-50":""}`,children:[c.jsx("td",{className:"p-2",children:new Date(i.date).toLocaleDateString()}),c.jsx("td",{className:"p-2",children:i.providerName}),c.jsxs("td",{className:"p-2",children:[i.quantity," ",n.unit]}),c.jsxs("td",{className:"p-2",children:["$",i.totalPrice.toFixed(2)]}),c.jsxs("td",{className:`p-2 font-bold ${l?"text-green-700":""}`,children:["$",o.toFixed(2)]})]},i.id)})})]}):c.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay historial de compras para este producto."})]}),c.jsx("div",{className:"flex justify-end mt-6",children:c.jsx("button",{onClick:e,className:"py-2 px-6 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cerrar"})})]})},fx=({items:t,onEdit:e,onRecordStockChange:n,providers:r})=>{const[s,i]=O.useState(null),[o,l]=O.useState(null);if(t.length===0)return c.jsx("p",{className:"text-center text-gray-500 mt-8",children:"No se encontraron productos."});const u=t.reduce((p,m)=>{const y=m.category||"Sin Categora";return p[y]||(p[y]=[]),p[y].push(m),p},{}),d=Object.keys(u).sort();return c.jsxs("div",{className:"space-y-6",children:[d.map(p=>c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-blue-700 pb-2 border-b border-gray-300 mb-4",children:p}),c.jsx("div",{className:"space-y-3",children:u[p].map(m=>c.jsx(hx,{item:m,onEdit:e,onAddStock:()=>i({item:m,isAdding:!0}),onUseStock:()=>i({item:m,isAdding:!1}),onViewHistory:()=>l(m)},m.id))})]},p)),s&&c.jsx(tv,{isOpen:!!s,onClose:()=>i(null),item:s.item,isAdding:s.isAdding,onUpdate:n,providers:r}),o&&c.jsx(dx,{isOpen:!!o,onClose:()=>l(null),item:o})]})},px=({items:t,onRecordStockChange:e,providers:n})=>{const[r,s]=O.useState(null),i=t.filter(u=>u.currentStock<=u.minStock);if(i.length===0)return c.jsx("p",{className:"text-center text-gray-500 mt-8",children:"Todo en orden! No hay nada en la lista de compras."});const o=i.reduce((u,d)=>{const p=d.providerPreferido||"Sin Proveedor";return u[p]||(u[p]=[]),u[p].push(d),u},{}),l=Object.keys(o).sort((u,d)=>u==="Sin Proveedor"?1:d==="Sin Proveedor"?-1:u.localeCompare(d));return c.jsxs("div",{className:"space-y-6",children:[l.map(u=>c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold text-blue-700 pb-2 border-b border-gray-300 mb-4 flex items-center gap-2",children:[c.jsx(le,{name:"store",size:20}),u]}),c.jsx("div",{className:"space-y-3",children:o[u].map(d=>c.jsxs("div",{className:"p-4 bg-red-50 border border-red-300 rounded-lg flex flex-col md:flex-row justify-between md:items-center gap-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:d.name}),c.jsxs("p",{className:"text-sm text-red-700 font-semibold",children:["Quedan: ",d.currentStock," ",d.unit," (Mn: ",d.minStock," ",d.unit,")"]})]}),c.jsxs("button",{onClick:()=>s(d),className:"flex-shrink-0 flex items-center justify-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm self-start md:self-center",children:[c.jsx(le,{name:"plus-circle",size:16}),"Registrar Compra"]})]},d.id))})]},u)),r&&c.jsx(tv,{isOpen:!!r,onClose:()=>s(null),item:r,isAdding:!0,onUpdate:e,providers:n})]})},mx=({isOpen:t,onClose:e,onSave:n,onDelete:r,item:s,providers:i,categories:o})=>{const[l,u]=O.useState(""),[d,p]=O.useState(""),[m,y]=O.useState(""),[x,I]=O.useState("0"),[P,N]=O.useState(Eu[0]),[T,_]=O.useState("0"),[k,D]=O.useState("");O.useEffect(()=>{t&&(u((s==null?void 0:s.name)||""),p((s==null?void 0:s.category)||(o.length>0?o[0].name:"")),y((s==null?void 0:s.providerPreferido)||""),I(String((s==null?void 0:s.currentStock)||0)),N((s==null?void 0:s.unit)||Eu[0]),_(String((s==null?void 0:s.minStock)||0)),D(""))},[t,s,o]);const F=E=>{E.preventDefault(),D("");const g=parseFloat(x),w=parseFloat(T);if(!l.trim()){D("El nombre es obligatorio.");return}if(!P.trim()){D("La unidad es obligatoria.");return}if(isNaN(g)||g<0){D("Stock debe ser un nmero positivo.");return}if(isNaN(w)||w<0){D("Nivel mnimo debe ser un nmero positivo.");return}if(s){const S={...s,name:l.trim(),category:d.trim()||"Sin Categora",providerPreferido:m.trim(),currentStock:g,unit:P.trim(),minStock:w};n(S)}else{const S={name:l.trim(),category:d.trim()||"Sin Categora",providerPreferido:m.trim(),currentStock:g,unit:P.trim(),minStock:w};n(S)}e()},M=()=>{s&&window.confirm(`Ests seguro de que quieres eliminar "${s.name}"?`)&&(r(s.id),e())};return c.jsx(_n,{isOpen:t,onClose:e,title:s?"Editar Producto":"Aadir Producto",children:c.jsxs("form",{onSubmit:F,className:"flex flex-col gap-4",children:[c.jsx(br,{label:"Nombre del Producto",children:c.jsx("input",{type:"text",value:l,onChange:E=>u(E.target.value),required:!0})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(br,{label:"Categora",children:c.jsxs("select",{value:d,onChange:E=>p(E.target.value),children:[c.jsx("option",{value:"",children:"Sin Categora"}),o.map(E=>c.jsx("option",{value:E.name,children:E.name},E.id))]})}),c.jsx(br,{label:"Proveedor Preferido",children:c.jsxs("select",{value:m,onChange:E=>y(E.target.value),children:[c.jsx("option",{value:"",children:"Sin Proveedor"}),i.map(E=>c.jsx("option",{value:E.name,children:E.name},E.id))]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(br,{label:"Stock Actual",children:c.jsx("input",{type:"number",value:x,onChange:E=>I(E.target.value),step:"any",min:"0",required:!0})}),c.jsx(br,{label:"Unidad",children:c.jsx("select",{value:P,onChange:E=>N(E.target.value),required:!0,children:Eu.map(E=>c.jsx("option",{value:E,children:E},E))})})]}),c.jsx(br,{label:"Nivel Mnimo (para Alertas)",children:c.jsx("input",{type:"number",value:T,onChange:E=>_(E.target.value),step:"any",min:"0",required:!0})}),k&&c.jsx("p",{className:"text-sm text-red-600 text-center",children:k}),c.jsxs("div",{className:"flex justify-between items-center mt-4",children:[c.jsx("div",{children:s&&c.jsx("button",{type:"button",onClick:M,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Eliminar"})}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})]})})},br=({label:t,children:e})=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:t}),Zc.cloneElement(e,{className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),gx=({inventoryHook:t,providers:e,categories:n})=>{const{items:r,addItem:s,updateItem:i,deleteItem:o,recordStockChange:l}=t,[u,d]=O.useState("general"),[p,m]=O.useState(""),[y,x]=O.useState(!1),[I,P]=O.useState(null),N=M=>{P(M),x(!0)},T=()=>{P(null),x(!0)},_=()=>{x(!1),P(null)},k=M=>{"id"in M?i(M):s(M)},D=O.useMemo(()=>r.filter(M=>M.name.toLowerCase().includes(p.toLowerCase())),[r,p]),F=({view:M,label:E,icon:g})=>c.jsxs("button",{onClick:()=>d(M),className:`flex items-center gap-2 py-2 px-4 text-sm md:text-base font-bold border-b-4 transition-colors ${u===M?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-800"}`,children:[c.jsx(le,{name:g,size:18}),E]});return c.jsxs("div",{className:"flex flex-col h-full bg-gray-50",children:[c.jsxs("div",{className:"operations-header flex flex-col md:flex-row md:flex-wrap justify-between items-center p-4 border-b border-gray-200 gap-4 flex-shrink-0",children:[c.jsx("div",{className:"operations-actions",children:c.jsxs("button",{onClick:T,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[c.jsx(le,{name:"plus-circle",size:16}),"Aadir Producto"]})}),c.jsxs("div",{className:"inventory-tabs flex gap-4",children:[c.jsx(F,{view:"general",label:"Inventario General",icon:"boxes"}),c.jsx(F,{view:"shopping-list",label:"Lista de Compras",icon:"shopping-cart"})]})]}),c.jsx("div",{className:"search-bar-container p-4 flex-shrink-0",children:c.jsx("input",{type:"search",value:p,onChange:M=>m(M.target.value),placeholder:"Buscar producto...",className:"w-full p-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),c.jsx("div",{className:"flex-grow overflow-y-auto px-4 pb-4",children:u==="general"?c.jsx(fx,{items:D,onEdit:N,onRecordStockChange:l,providers:e}):c.jsx(px,{items:D,onRecordStockChange:l,providers:e})}),c.jsx(mx,{isOpen:y,onClose:_,onSave:k,onDelete:o,item:I,providers:e,categories:n})]})};var Bp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},yx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},rv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let y=(l&15)<<2|d>>6,x=d&63;u||(x=64,o||(y=64)),r.push(n[p],n[m],n[y],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new vx;const y=i<<2|l>>4;if(r.push(y),d!==64){const x=l<<4&240|d>>2;if(r.push(x),m!==64){const I=d<<6&192|m;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _x=function(t){const e=nv(t);return rv.encodeByteArray(e,!0)},Ma=function(t){return _x(t).replace(/\./g,"")},wx=function(t){try{return rv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=()=>Ex().__FIREBASE_DEFAULTS__,Tx=()=>{if(typeof process>"u"||typeof Bp>"u")return;const t=Bp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Sx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wx(t[1]);return e&&JSON.parse(e)},Hh=()=>{try{return xx()||Tx()||Sx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ix=t=>{var e,n;return(n=(e=Hh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ax=t=>{const e=Ix(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sv=()=>{var t;return(t=Hh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ma(JSON.stringify(n)),Ma(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rx(){var t;const e=(t=Hh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nx(){return!Rx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bx(){try{return typeof indexedDB=="object"}catch{return!1}}function Dx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="FirebaseError";class xs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jx,Object.setPrototypeOf(this,xs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,iv.prototype.create)}}class iv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Vx(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new xs(s,l,r)}}function Vx(t,e){return t.replace(Mx,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Mx=/\{\$([^}]+)}/g;function Oa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if($p(i)&&$p(o)){if(!Oa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function $p(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class ji{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Cx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Fx(e))try{this.getOrInitializeService({instanceIdentifier:sr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=sr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sr){return this.instances.has(e)}getOptions(e=sr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Lx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sr){return this.component?this.component.multipleInstances?e:sr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Lx(t){return t===sr?void 0:t}function Fx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ox(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const zx={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},Bx=se.INFO,$x={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},Hx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=$x[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ov{constructor(e){this.name=e,this._logLevel=Bx,this._logHandler=Hx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const qx=(t,e)=>e.some(n=>t instanceof n);let Hp,qp;function Wx(){return Hp||(Hp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qx(){return qp||(qp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const av=new WeakMap,Ic=new WeakMap,lv=new WeakMap,Tu=new WeakMap,qh=new WeakMap;function Kx(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Fn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&av.set(n,t)}).catch(()=>{}),qh.set(e,t),e}function Gx(t){if(Ic.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ic.set(t,e)}let Ac={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ic.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Yx(t){Ac=t(Ac)}function Xx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Su(this),e,...n);return lv.set(r,e.sort?e.sort():[e]),Fn(r)}:Qx().includes(t)?function(...e){return t.apply(Su(this),e),Fn(av.get(this))}:function(...e){return Fn(t.apply(Su(this),e))}}function Jx(t){return typeof t=="function"?Xx(t):(t instanceof IDBTransaction&&Gx(t),qx(t,Wx())?new Proxy(t,Ac):t)}function Fn(t){if(t instanceof IDBRequest)return Kx(t);if(Tu.has(t))return Tu.get(t);const e=Jx(t);return e!==t&&(Tu.set(t,e),qh.set(e,t)),e}const Su=t=>qh.get(t);function Zx(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Fn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Fn(o.result),u.oldVersion,u.newVersion,Fn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const e1=["get","getKey","getAll","getAllKeys","count"],t1=["put","add","delete","clear"],Iu=new Map;function Wp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Iu.get(e))return Iu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=t1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||e1.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Iu.set(e,i),i}Yx(t=>({...t,get:(e,n,r)=>Wp(e,n)||t.get(e,n,r),has:(e,n)=>!!Wp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(r1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function r1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cc="@firebase/app",Qp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn=new ov("@firebase/app"),s1="@firebase/app-compat",i1="@firebase/analytics-compat",o1="@firebase/analytics",a1="@firebase/app-check-compat",l1="@firebase/app-check",u1="@firebase/auth",c1="@firebase/auth-compat",h1="@firebase/database",d1="@firebase/data-connect",f1="@firebase/database-compat",p1="@firebase/functions",m1="@firebase/functions-compat",g1="@firebase/installations",y1="@firebase/installations-compat",v1="@firebase/messaging",_1="@firebase/messaging-compat",w1="@firebase/performance",E1="@firebase/performance-compat",x1="@firebase/remote-config",T1="@firebase/remote-config-compat",S1="@firebase/storage",I1="@firebase/storage-compat",A1="@firebase/firestore",C1="@firebase/vertexai-preview",k1="@firebase/firestore-compat",P1="firebase",R1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="[DEFAULT]",N1={[Cc]:"fire-core",[s1]:"fire-core-compat",[o1]:"fire-analytics",[i1]:"fire-analytics-compat",[l1]:"fire-app-check",[a1]:"fire-app-check-compat",[u1]:"fire-auth",[c1]:"fire-auth-compat",[h1]:"fire-rtdb",[d1]:"fire-data-connect",[f1]:"fire-rtdb-compat",[p1]:"fire-fn",[m1]:"fire-fn-compat",[g1]:"fire-iid",[y1]:"fire-iid-compat",[v1]:"fire-fcm",[_1]:"fire-fcm-compat",[w1]:"fire-perf",[E1]:"fire-perf-compat",[x1]:"fire-rc",[T1]:"fire-rc-compat",[S1]:"fire-gcs",[I1]:"fire-gcs-compat",[A1]:"fire-fst",[k1]:"fire-fst-compat",[C1]:"fire-vertex","fire-js":"fire-js",[P1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=new Map,b1=new Map,Pc=new Map;function Kp(t,e){try{t.container.addComponent(e)}catch(n){mn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fa(t){const e=t.name;if(Pc.has(e))return mn.debug(`There were multiple attempts to register component ${e}.`),!1;Pc.set(e,t);for(const n of La.values())Kp(n,t);for(const n of b1.values())Kp(n,t);return!0}function D1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Un=new iv("app","Firebase",j1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=R1;function uv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:kc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Un.create("bad-app-name",{appName:String(s)});if(n||(n=sv()),!n)throw Un.create("no-options");const i=La.get(s);if(i){if(Oa(n,i.options)&&Oa(r,i.config))return i;throw Un.create("duplicate-app",{appName:s})}const o=new Ux(s);for(const u of Pc.values())o.addComponent(u);const l=new V1(n,r,o);return La.set(s,l),l}function O1(t=kc){const e=La.get(t);if(!e&&t===kc&&sv())return uv();if(!e)throw Un.create("no-app",{appName:t});return e}function es(t,e,n){var r;let s=(r=N1[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mn.warn(l.join(" "));return}Fa(new ji(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="firebase-heartbeat-database",F1=1,Vi="firebase-heartbeat-store";let Au=null;function cv(){return Au||(Au=Zx(L1,F1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Vi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Un.create("idb-open",{originalErrorMessage:t.message})})),Au}async function U1(t){try{const n=(await cv()).transaction(Vi),r=await n.objectStore(Vi).get(hv(t));return await n.done,r}catch(e){if(e instanceof xs)mn.warn(e.message);else{const n=Un.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mn.warn(n.message)}}}async function Gp(t,e){try{const r=(await cv()).transaction(Vi,"readwrite");await r.objectStore(Vi).put(e,hv(t)),await r.done}catch(n){if(n instanceof xs)mn.warn(n.message);else{const r=Un.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mn.warn(r.message)}}}function hv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=1024,B1=30*24*60*60*1e3;class $1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new q1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Yp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=B1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){mn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Yp(),{heartbeatsToSend:r,unsentEntries:s}=H1(this._heartbeatsCache.heartbeats),i=Ma(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return mn.warn(n),""}}}function Yp(){return new Date().toISOString().substring(0,10)}function H1(t,e=z1){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Xp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Xp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class q1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bx()?Dx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await U1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Gp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Gp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Xp(t){return Ma(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t){Fa(new ji("platform-logger",e=>new n1(e),"PRIVATE")),Fa(new ji("heartbeat",e=>new $1(e),"PRIVATE")),es(Cc,Qp,t),es(Cc,Qp,"esm2017"),es("fire-js","")}W1("");var Q1="firebase",K1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es(Q1,K1,"app");var Jp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hr,dv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,g){function w(){}w.prototype=g.prototype,E.D=g.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(S,C,R){for(var A=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)A[ve-2]=arguments[ve];return g.prototype[C].apply(S,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,g,w){w||(w=0);var S=Array(16);if(typeof g=="string")for(var C=0;16>C;++C)S[C]=g.charCodeAt(w++)|g.charCodeAt(w++)<<8|g.charCodeAt(w++)<<16|g.charCodeAt(w++)<<24;else for(C=0;16>C;++C)S[C]=g[w++]|g[w++]<<8|g[w++]<<16|g[w++]<<24;g=E.g[0],w=E.g[1],C=E.g[2];var R=E.g[3],A=g+(R^w&(C^R))+S[0]+3614090360&4294967295;g=w+(A<<7&4294967295|A>>>25),A=R+(C^g&(w^C))+S[1]+3905402710&4294967295,R=g+(A<<12&4294967295|A>>>20),A=C+(w^R&(g^w))+S[2]+606105819&4294967295,C=R+(A<<17&4294967295|A>>>15),A=w+(g^C&(R^g))+S[3]+3250441966&4294967295,w=C+(A<<22&4294967295|A>>>10),A=g+(R^w&(C^R))+S[4]+4118548399&4294967295,g=w+(A<<7&4294967295|A>>>25),A=R+(C^g&(w^C))+S[5]+1200080426&4294967295,R=g+(A<<12&4294967295|A>>>20),A=C+(w^R&(g^w))+S[6]+2821735955&4294967295,C=R+(A<<17&4294967295|A>>>15),A=w+(g^C&(R^g))+S[7]+4249261313&4294967295,w=C+(A<<22&4294967295|A>>>10),A=g+(R^w&(C^R))+S[8]+1770035416&4294967295,g=w+(A<<7&4294967295|A>>>25),A=R+(C^g&(w^C))+S[9]+2336552879&4294967295,R=g+(A<<12&4294967295|A>>>20),A=C+(w^R&(g^w))+S[10]+4294925233&4294967295,C=R+(A<<17&4294967295|A>>>15),A=w+(g^C&(R^g))+S[11]+2304563134&4294967295,w=C+(A<<22&4294967295|A>>>10),A=g+(R^w&(C^R))+S[12]+1804603682&4294967295,g=w+(A<<7&4294967295|A>>>25),A=R+(C^g&(w^C))+S[13]+4254626195&4294967295,R=g+(A<<12&4294967295|A>>>20),A=C+(w^R&(g^w))+S[14]+2792965006&4294967295,C=R+(A<<17&4294967295|A>>>15),A=w+(g^C&(R^g))+S[15]+1236535329&4294967295,w=C+(A<<22&4294967295|A>>>10),A=g+(C^R&(w^C))+S[1]+4129170786&4294967295,g=w+(A<<5&4294967295|A>>>27),A=R+(w^C&(g^w))+S[6]+3225465664&4294967295,R=g+(A<<9&4294967295|A>>>23),A=C+(g^w&(R^g))+S[11]+643717713&4294967295,C=R+(A<<14&4294967295|A>>>18),A=w+(R^g&(C^R))+S[0]+3921069994&4294967295,w=C+(A<<20&4294967295|A>>>12),A=g+(C^R&(w^C))+S[5]+3593408605&4294967295,g=w+(A<<5&4294967295|A>>>27),A=R+(w^C&(g^w))+S[10]+38016083&4294967295,R=g+(A<<9&4294967295|A>>>23),A=C+(g^w&(R^g))+S[15]+3634488961&4294967295,C=R+(A<<14&4294967295|A>>>18),A=w+(R^g&(C^R))+S[4]+3889429448&4294967295,w=C+(A<<20&4294967295|A>>>12),A=g+(C^R&(w^C))+S[9]+568446438&4294967295,g=w+(A<<5&4294967295|A>>>27),A=R+(w^C&(g^w))+S[14]+3275163606&4294967295,R=g+(A<<9&4294967295|A>>>23),A=C+(g^w&(R^g))+S[3]+4107603335&4294967295,C=R+(A<<14&4294967295|A>>>18),A=w+(R^g&(C^R))+S[8]+1163531501&4294967295,w=C+(A<<20&4294967295|A>>>12),A=g+(C^R&(w^C))+S[13]+2850285829&4294967295,g=w+(A<<5&4294967295|A>>>27),A=R+(w^C&(g^w))+S[2]+4243563512&4294967295,R=g+(A<<9&4294967295|A>>>23),A=C+(g^w&(R^g))+S[7]+1735328473&4294967295,C=R+(A<<14&4294967295|A>>>18),A=w+(R^g&(C^R))+S[12]+2368359562&4294967295,w=C+(A<<20&4294967295|A>>>12),A=g+(w^C^R)+S[5]+4294588738&4294967295,g=w+(A<<4&4294967295|A>>>28),A=R+(g^w^C)+S[8]+2272392833&4294967295,R=g+(A<<11&4294967295|A>>>21),A=C+(R^g^w)+S[11]+1839030562&4294967295,C=R+(A<<16&4294967295|A>>>16),A=w+(C^R^g)+S[14]+4259657740&4294967295,w=C+(A<<23&4294967295|A>>>9),A=g+(w^C^R)+S[1]+2763975236&4294967295,g=w+(A<<4&4294967295|A>>>28),A=R+(g^w^C)+S[4]+1272893353&4294967295,R=g+(A<<11&4294967295|A>>>21),A=C+(R^g^w)+S[7]+4139469664&4294967295,C=R+(A<<16&4294967295|A>>>16),A=w+(C^R^g)+S[10]+3200236656&4294967295,w=C+(A<<23&4294967295|A>>>9),A=g+(w^C^R)+S[13]+681279174&4294967295,g=w+(A<<4&4294967295|A>>>28),A=R+(g^w^C)+S[0]+3936430074&4294967295,R=g+(A<<11&4294967295|A>>>21),A=C+(R^g^w)+S[3]+3572445317&4294967295,C=R+(A<<16&4294967295|A>>>16),A=w+(C^R^g)+S[6]+76029189&4294967295,w=C+(A<<23&4294967295|A>>>9),A=g+(w^C^R)+S[9]+3654602809&4294967295,g=w+(A<<4&4294967295|A>>>28),A=R+(g^w^C)+S[12]+3873151461&4294967295,R=g+(A<<11&4294967295|A>>>21),A=C+(R^g^w)+S[15]+530742520&4294967295,C=R+(A<<16&4294967295|A>>>16),A=w+(C^R^g)+S[2]+3299628645&4294967295,w=C+(A<<23&4294967295|A>>>9),A=g+(C^(w|~R))+S[0]+4096336452&4294967295,g=w+(A<<6&4294967295|A>>>26),A=R+(w^(g|~C))+S[7]+1126891415&4294967295,R=g+(A<<10&4294967295|A>>>22),A=C+(g^(R|~w))+S[14]+2878612391&4294967295,C=R+(A<<15&4294967295|A>>>17),A=w+(R^(C|~g))+S[5]+4237533241&4294967295,w=C+(A<<21&4294967295|A>>>11),A=g+(C^(w|~R))+S[12]+1700485571&4294967295,g=w+(A<<6&4294967295|A>>>26),A=R+(w^(g|~C))+S[3]+2399980690&4294967295,R=g+(A<<10&4294967295|A>>>22),A=C+(g^(R|~w))+S[10]+4293915773&4294967295,C=R+(A<<15&4294967295|A>>>17),A=w+(R^(C|~g))+S[1]+2240044497&4294967295,w=C+(A<<21&4294967295|A>>>11),A=g+(C^(w|~R))+S[8]+1873313359&4294967295,g=w+(A<<6&4294967295|A>>>26),A=R+(w^(g|~C))+S[15]+4264355552&4294967295,R=g+(A<<10&4294967295|A>>>22),A=C+(g^(R|~w))+S[6]+2734768916&4294967295,C=R+(A<<15&4294967295|A>>>17),A=w+(R^(C|~g))+S[13]+1309151649&4294967295,w=C+(A<<21&4294967295|A>>>11),A=g+(C^(w|~R))+S[4]+4149444226&4294967295,g=w+(A<<6&4294967295|A>>>26),A=R+(w^(g|~C))+S[11]+3174756917&4294967295,R=g+(A<<10&4294967295|A>>>22),A=C+(g^(R|~w))+S[2]+718787259&4294967295,C=R+(A<<15&4294967295|A>>>17),A=w+(R^(C|~g))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+g&4294967295,E.g[1]=E.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+R&4294967295}r.prototype.u=function(E,g){g===void 0&&(g=E.length);for(var w=g-this.blockSize,S=this.B,C=this.h,R=0;R<g;){if(C==0)for(;R<=w;)s(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<g;)if(S[C++]=E.charCodeAt(R++),C==this.blockSize){s(this,S),C=0;break}}else for(;R<g;)if(S[C++]=E[R++],C==this.blockSize){s(this,S),C=0;break}}this.h=C,this.o+=g},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var g=1;g<E.length-8;++g)E[g]=0;var w=8*this.o;for(g=E.length-8;g<E.length;++g)E[g]=w&255,w/=256;for(this.u(E),E=Array(16),g=w=0;4>g;++g)for(var S=0;32>S;S+=8)E[w++]=this.g[g]>>>S&255;return E};function i(E,g){var w=l;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=g(E)}function o(E,g){this.h=g;for(var w=[],S=!0,C=E.length-1;0<=C;C--){var R=E[C]|0;S&&R==g||(w[C]=R,S=!1)}this.g=w}var l={};function u(E){return-128<=E&&128>E?i(E,function(g){return new o([g|0],0>g?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return N(d(-E));for(var g=[],w=1,S=0;E>=w;S++)g[S]=E/w|0,w*=4294967296;return new o(g,0)}function p(E,g){if(E.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(E.charAt(0)=="-")return N(p(E.substring(1),g));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=d(Math.pow(g,8)),S=m,C=0;C<E.length;C+=8){var R=Math.min(8,E.length-C),A=parseInt(E.substring(C,C+R),g);8>R?(R=d(Math.pow(g,R)),S=S.j(R).add(d(A))):(S=S.j(w),S=S.add(d(A)))}return S}var m=u(0),y=u(1),x=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-N(this).m();for(var E=0,g=1,w=0;w<this.g.length;w++){var S=this.i(w);E+=(0<=S?S:4294967296+S)*g,g*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(I(this))return"0";if(P(this))return"-"+N(this).toString(E);for(var g=d(Math.pow(E,6)),w=this,S="";;){var C=D(w,g).g;w=T(w,C.j(g));var R=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=C,I(w))return R+S;for(;6>R.length;)R="0"+R;S=R+S}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function I(E){if(E.h!=0)return!1;for(var g=0;g<E.g.length;g++)if(E.g[g]!=0)return!1;return!0}function P(E){return E.h==-1}t.l=function(E){return E=T(this,E),P(E)?-1:I(E)?0:1};function N(E){for(var g=E.g.length,w=[],S=0;S<g;S++)w[S]=~E.g[S];return new o(w,~E.h).add(y)}t.abs=function(){return P(this)?N(this):this},t.add=function(E){for(var g=Math.max(this.g.length,E.g.length),w=[],S=0,C=0;C<=g;C++){var R=S+(this.i(C)&65535)+(E.i(C)&65535),A=(R>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);S=A>>>16,R&=65535,A&=65535,w[C]=A<<16|R}return new o(w,w[w.length-1]&-2147483648?-1:0)};function T(E,g){return E.add(N(g))}t.j=function(E){if(I(this)||I(E))return m;if(P(this))return P(E)?N(this).j(N(E)):N(N(this).j(E));if(P(E))return N(this.j(N(E)));if(0>this.l(x)&&0>E.l(x))return d(this.m()*E.m());for(var g=this.g.length+E.g.length,w=[],S=0;S<2*g;S++)w[S]=0;for(S=0;S<this.g.length;S++)for(var C=0;C<E.g.length;C++){var R=this.i(S)>>>16,A=this.i(S)&65535,ve=E.i(C)>>>16,Z=E.i(C)&65535;w[2*S+2*C]+=A*Z,_(w,2*S+2*C),w[2*S+2*C+1]+=R*Z,_(w,2*S+2*C+1),w[2*S+2*C+1]+=A*ve,_(w,2*S+2*C+1),w[2*S+2*C+2]+=R*ve,_(w,2*S+2*C+2)}for(S=0;S<g;S++)w[S]=w[2*S+1]<<16|w[2*S];for(S=g;S<2*g;S++)w[S]=0;return new o(w,0)};function _(E,g){for(;(E[g]&65535)!=E[g];)E[g+1]+=E[g]>>>16,E[g]&=65535,g++}function k(E,g){this.g=E,this.h=g}function D(E,g){if(I(g))throw Error("division by zero");if(I(E))return new k(m,m);if(P(E))return g=D(N(E),g),new k(N(g.g),N(g.h));if(P(g))return g=D(E,N(g)),new k(N(g.g),g.h);if(30<E.g.length){if(P(E)||P(g))throw Error("slowDivide_ only works with positive integers.");for(var w=y,S=g;0>=S.l(E);)w=F(w),S=F(S);var C=M(w,1),R=M(S,1);for(S=M(S,2),w=M(w,2);!I(S);){var A=R.add(S);0>=A.l(E)&&(C=C.add(w),R=A),S=M(S,1),w=M(w,1)}return g=T(E,C.j(g)),new k(C,g)}for(C=m;0<=E.l(g);){for(w=Math.max(1,Math.floor(E.m()/g.m())),S=Math.ceil(Math.log(w)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),R=d(w),A=R.j(g);P(A)||0<A.l(E);)w-=S,R=d(w),A=R.j(g);I(R)&&(R=y),C=C.add(R),E=T(E,A)}return new k(C,E)}t.A=function(E){return D(this,E).h},t.and=function(E){for(var g=Math.max(this.g.length,E.g.length),w=[],S=0;S<g;S++)w[S]=this.i(S)&E.i(S);return new o(w,this.h&E.h)},t.or=function(E){for(var g=Math.max(this.g.length,E.g.length),w=[],S=0;S<g;S++)w[S]=this.i(S)|E.i(S);return new o(w,this.h|E.h)},t.xor=function(E){for(var g=Math.max(this.g.length,E.g.length),w=[],S=0;S<g;S++)w[S]=this.i(S)^E.i(S);return new o(w,this.h^E.h)};function F(E){for(var g=E.g.length+1,w=[],S=0;S<g;S++)w[S]=E.i(S)<<1|E.i(S-1)>>>31;return new o(w,E.h)}function M(E,g){var w=g>>5;g%=32;for(var S=E.g.length-w,C=[],R=0;R<S;R++)C[R]=0<g?E.i(R+w)>>>g|E.i(R+w+1)<<32-g:E.i(R+w);return new o(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,hr=o}).apply(typeof Jp<"u"?Jp:typeof self<"u"?self:typeof window<"u"?window:{});var Ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fv,ei,pv,oa,Rc,mv,gv,yv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ho=="object"&&Ho];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var b=a[v];if(!(b in f))break e;f=f[b]}a=a[a.length-1],v=f[a],h=h(v),h!=v&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var f=0,v=!1,b={next:function(){if(!v&&f<a.length){var j=f++;return{value:h(j,a[j]),done:!1}}return v=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function p(a,h,f){return a.call.apply(a.bind,arguments)}function m(a,h,f){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,v),a.apply(h,b)}}return function(){return a.apply(h,arguments)}}function y(a,h,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function x(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function I(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(v,b,j){for(var B=Array(arguments.length-2),he=2;he<arguments.length;he++)B[he-2]=arguments[he];return h.prototype[b].apply(v,B)}}function P(a){const h=a.length;if(0<h){const f=Array(h);for(let v=0;v<h;v++)f[v]=a[v];return f}return[]}function N(a,h){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(u(v)){const b=a.length||0,j=v.length||0;a.length=b+j;for(let B=0;B<j;B++)a[b+B]=v[B]}else a.push(v)}}class T{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function _(a){return/^[\s\xa0]*$/.test(a)}function k(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var F=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function M(a,h,f){for(const v in a)h.call(f,a[v],v,a)}function E(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function g(a){const h={};for(const f in a)h[f]=a[f];return h}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,h){let f,v;for(let b=1;b<arguments.length;b++){v=arguments[b];for(f in v)a[f]=v[f];for(let j=0;j<w.length;j++)f=w[j],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function C(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function R(a){l.setTimeout(()=>{throw a},0)}function A(){var a=Q;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class ve{constructor(){this.h=this.g=null}add(h,f){const v=Z.get();v.set(h,f),this.h?this.h.next=v:this.g=v,this.h=v}}var Z=new T(()=>new Ce,a=>a.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let st,$=!1,Q=new ve,U=()=>{const a=l.Promise.resolve(void 0);st=()=>{a.then(G)}};var G=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(f){R(f)}var h=Z;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}$=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var wt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,h),l.removeEventListener("test",f,h)}catch{}return a}();function Zt(a,h){if(fe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(F){e:{try{D(h.nodeName);var b=!0;break e}catch{}b=!1}b||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:en[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Zt.aa.h.call(this)}}I(Zt,fe);var en={2:"touch",3:"pen",4:"mouse"};Zt.prototype.h=function(){Zt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var tn="closure_listenable_"+(1e6*Math.random()|0),F0=0;function U0(a,h,f,v,b){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!v,this.ha=b,this.key=++F0,this.da=this.fa=!1}function ao(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function lo(a){this.src=a,this.g={},this.h=0}lo.prototype.add=function(a,h,f,v,b){var j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);var B=Cl(a,h,v,b);return-1<B?(h=a[B],f||(h.fa=!1)):(h=new U0(h,this.src,j,!!v,b),h.fa=f,a.push(h)),h};function Al(a,h){var f=h.type;if(f in a.g){var v=a.g[f],b=Array.prototype.indexOf.call(v,h,void 0),j;(j=0<=b)&&Array.prototype.splice.call(v,b,1),j&&(ao(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Cl(a,h,f,v){for(var b=0;b<a.length;++b){var j=a[b];if(!j.da&&j.listener==h&&j.capture==!!f&&j.ha==v)return b}return-1}var kl="closure_lm_"+(1e6*Math.random()|0),Pl={};function kd(a,h,f,v,b){if(Array.isArray(h)){for(var j=0;j<h.length;j++)kd(a,h[j],f,v,b);return null}return f=Nd(f),a&&a[tn]?a.K(h,f,d(v)?!!v.capture:!1,b):z0(a,h,f,!1,v,b)}function z0(a,h,f,v,b,j){if(!h)throw Error("Invalid event type");var B=d(b)?!!b.capture:!!b,he=Nl(a);if(he||(a[kl]=he=new lo(a)),f=he.add(h,f,v,B,j),f.proxy)return f;if(v=B0(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)wt||(b=B),b===void 0&&(b=!1),a.addEventListener(h.toString(),v,b);else if(a.attachEvent)a.attachEvent(Rd(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function B0(){function a(f){return h.call(a.src,a.listener,f)}const h=$0;return a}function Pd(a,h,f,v,b){if(Array.isArray(h))for(var j=0;j<h.length;j++)Pd(a,h[j],f,v,b);else v=d(v)?!!v.capture:!!v,f=Nd(f),a&&a[tn]?(a=a.i,h=String(h).toString(),h in a.g&&(j=a.g[h],f=Cl(j,f,v,b),-1<f&&(ao(j[f]),Array.prototype.splice.call(j,f,1),j.length==0&&(delete a.g[h],a.h--)))):a&&(a=Nl(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Cl(h,f,v,b)),(f=-1<a?h[a]:null)&&Rl(f))}function Rl(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[tn])Al(h.i,a);else{var f=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(f,v,a.capture):h.detachEvent?h.detachEvent(Rd(f),v):h.addListener&&h.removeListener&&h.removeListener(v),(f=Nl(h))?(Al(f,a),f.h==0&&(f.src=null,h[kl]=null)):ao(a)}}}function Rd(a){return a in Pl?Pl[a]:Pl[a]="on"+a}function $0(a,h){if(a.da)a=!0;else{h=new Zt(h,this);var f=a.listener,v=a.ha||a.src;a.fa&&Rl(a),a=f.call(v,h)}return a}function Nl(a){return a=a[kl],a instanceof lo?a:null}var bl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nd(a){return typeof a=="function"?a:(a[bl]||(a[bl]=function(h){return a.handleEvent(h)}),a[bl])}function Ke(){re.call(this),this.i=new lo(this),this.M=this,this.F=null}I(Ke,re),Ke.prototype[tn]=!0,Ke.prototype.removeEventListener=function(a,h,f,v){Pd(this,a,h,f,v)};function it(a,h){var f,v=a.F;if(v)for(f=[];v;v=v.F)f.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new fe(h,a);else if(h instanceof fe)h.target=h.target||a;else{var b=h;h=new fe(v,a),S(h,b)}if(b=!0,f)for(var j=f.length-1;0<=j;j--){var B=h.g=f[j];b=uo(B,v,!0,h)&&b}if(B=h.g=a,b=uo(B,v,!0,h)&&b,b=uo(B,v,!1,h)&&b,f)for(j=0;j<f.length;j++)B=h.g=f[j],b=uo(B,v,!1,h)&&b}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],v=0;v<f.length;v++)ao(f[v]);delete a.g[h],a.h--}}this.F=null},Ke.prototype.K=function(a,h,f,v){return this.i.add(String(a),h,!1,f,v)},Ke.prototype.L=function(a,h,f,v){return this.i.add(String(a),h,!0,f,v)};function uo(a,h,f,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var b=!0,j=0;j<h.length;++j){var B=h[j];if(B&&!B.da&&B.capture==f){var he=B.listener,Ue=B.ha||B.src;B.fa&&Al(a.i,B),b=he.call(Ue,v)!==!1&&b}}return b&&!v.defaultPrevented}function bd(a,h,f){if(typeof a=="function")f&&(a=y(a,f));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Dd(a){a.g=bd(()=>{a.g=null,a.i&&(a.i=!1,Dd(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class H0 extends re{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Dd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ks(a){re.call(this),this.h=a,this.g={}}I(ks,re);var jd=[];function Vd(a){M(a.g,function(h,f){this.g.hasOwnProperty(f)&&Rl(h)},a),a.g={}}ks.prototype.N=function(){ks.aa.N.call(this),Vd(this)},ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dl=l.JSON.stringify,q0=l.JSON.parse,W0=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function jl(){}jl.prototype.h=null;function Md(a){return a.h||(a.h=a.i())}function Od(){}var Ps={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vl(){fe.call(this,"d")}I(Vl,fe);function Ml(){fe.call(this,"c")}I(Ml,fe);var Xn={},Ld=null;function co(){return Ld=Ld||new Ke}Xn.La="serverreachability";function Fd(a){fe.call(this,Xn.La,a)}I(Fd,fe);function Rs(a){const h=co();it(h,new Fd(h))}Xn.STAT_EVENT="statevent";function Ud(a,h){fe.call(this,Xn.STAT_EVENT,a),this.stat=h}I(Ud,fe);function ot(a){const h=co();it(h,new Ud(h,a))}Xn.Ma="timingevent";function zd(a,h){fe.call(this,Xn.Ma,a),this.size=h}I(zd,fe);function Ns(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function bs(){this.g=!0}bs.prototype.xa=function(){this.g=!1};function Q0(a,h,f,v,b,j){a.info(function(){if(a.g)if(j)for(var B="",he=j.split("&"),Ue=0;Ue<he.length;Ue++){var oe=he[Ue].split("=");if(1<oe.length){var Ge=oe[0];oe=oe[1];var Ye=Ge.split("_");B=2<=Ye.length&&Ye[1]=="type"?B+(Ge+"="+oe+"&"):B+(Ge+"=redacted&")}}else B=null;else B=j;return"XMLHTTP REQ ("+v+") [attempt "+b+"]: "+h+`
`+f+`
`+B})}function K0(a,h,f,v,b,j,B){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+b+"]: "+h+`
`+f+`
`+j+" "+B})}function Cr(a,h,f,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+Y0(a,f)+(v?" "+v:"")})}function G0(a,h){a.info(function(){return"TIMEOUT: "+h})}bs.prototype.info=function(){};function Y0(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var v=f[a];if(!(2>v.length)){var b=v[1];if(Array.isArray(b)&&!(1>b.length)){var j=b[0];if(j!="noop"&&j!="stop"&&j!="close")for(var B=1;B<b.length;B++)b[B]=""}}}}return Dl(f)}catch{return h}}var ho={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ol;function fo(){}I(fo,jl),fo.prototype.g=function(){return new XMLHttpRequest},fo.prototype.i=function(){return{}},Ol=new fo;function wn(a,h,f,v){this.j=a,this.i=h,this.l=f,this.R=v||1,this.U=new ks(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $d}function $d(){this.i=null,this.g="",this.h=!1}var Hd={},Ll={};function Fl(a,h,f){a.L=1,a.v=yo(nn(h)),a.m=f,a.P=!0,qd(a,null)}function qd(a,h){a.F=Date.now(),po(a),a.A=nn(a.v);var f=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),of(f.i,"t",v),a.C=0,f=a.j.J,a.h=new $d,a.g=Sf(a.j,f?h:null,!a.m),0<a.O&&(a.M=new H0(y(a.Y,a,a.g),a.O)),h=a.U,f=a.g,v=a.ca;var b="readystatechange";Array.isArray(b)||(b&&(jd[0]=b.toString()),b=jd);for(var j=0;j<b.length;j++){var B=kd(f,b[j],v||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Rs(),Q0(a.i,a.u,a.A,a.l,a.R,a.m)}wn.prototype.ca=function(a){a=a.target;const h=this.M;h&&rn(a)==3?h.j():this.Y(a)},wn.prototype.Y=function(a){try{if(a==this.g)e:{const Ye=rn(this.g);var h=this.g.Ba();const Rr=this.g.Z();if(!(3>Ye)&&(Ye!=3||this.g&&(this.h.h||this.g.oa()||ff(this.g)))){this.J||Ye!=4||h==7||(h==8||0>=Rr?Rs(3):Rs(2)),Ul(this);var f=this.g.Z();this.X=f;t:if(Wd(this)){var v=ff(this.g);a="";var b=v.length,j=rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jn(this),Ds(this);var B="";break t}this.h.i=new l.TextDecoder}for(h=0;h<b;h++)this.h.h=!0,a+=this.h.i.decode(v[h],{stream:!(j&&h==b-1)});v.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=f==200,K0(this.i,this.u,this.A,this.l,this.R,Ye,f),this.o){if(this.T&&!this.K){t:{if(this.g){var he,Ue=this.g;if((he=Ue.g?Ue.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(he)){var oe=he;break t}}oe=null}if(f=oe)Cr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zl(this,f);else{this.o=!1,this.s=3,ot(12),Jn(this),Ds(this);break e}}if(this.P){f=!0;let Mt;for(;!this.J&&this.C<B.length;)if(Mt=X0(this,B),Mt==Ll){Ye==4&&(this.s=4,ot(14),f=!1),Cr(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Hd){this.s=4,ot(15),Cr(this.i,this.l,B,"[Invalid Chunk]"),f=!1;break}else Cr(this.i,this.l,Mt,null),zl(this,Mt);if(Wd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||B.length!=0||this.h.h||(this.s=1,ot(16),f=!1),this.o=this.o&&f,!f)Cr(this.i,this.l,B,"[Invalid Chunked Response]"),Jn(this),Ds(this);else if(0<B.length&&!this.W){this.W=!0;var Ge=this.j;Ge.g==this&&Ge.ba&&!Ge.M&&(Ge.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Ql(Ge),Ge.M=!0,ot(11))}}else Cr(this.i,this.l,B,null),zl(this,B);Ye==4&&Jn(this),this.o&&!this.J&&(Ye==4?wf(this.j,this):(this.o=!1,po(this)))}else p_(this.g),f==400&&0<B.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Jn(this),Ds(this)}}}catch{}finally{}};function Wd(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function X0(a,h){var f=a.C,v=h.indexOf(`
`,f);return v==-1?Ll:(f=Number(h.substring(f,v)),isNaN(f)?Hd:(v+=1,v+f>h.length?Ll:(h=h.slice(v,v+f),a.C=v+f,h)))}wn.prototype.cancel=function(){this.J=!0,Jn(this)};function po(a){a.S=Date.now()+a.I,Qd(a,a.I)}function Qd(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ns(y(a.ba,a),h)}function Ul(a){a.B&&(l.clearTimeout(a.B),a.B=null)}wn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(G0(this.i,this.A),this.L!=2&&(Rs(),ot(17)),Jn(this),this.s=2,Ds(this)):Qd(this,this.S-a)};function Ds(a){a.j.G==0||a.J||wf(a.j,a)}function Jn(a){Ul(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Vd(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function zl(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||Bl(f.h,a))){if(!a.K&&Bl(f.h,a)&&f.G==3){try{var v=f.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var b=v;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)To(f),Eo(f);else break e;Wl(f),ot(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ns(y(f.Za,f),6e3));if(1>=Yd(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else er(f,11)}else if((a.K||f.g==a)&&To(f),!_(h))for(b=f.Da.g.parse(h),h=0;h<b.length;h++){let oe=b[h];if(f.T=oe[0],oe=oe[1],f.G==2)if(oe[0]=="c"){f.K=oe[1],f.ia=oe[2];const Ge=oe[3];Ge!=null&&(f.la=Ge,f.j.info("VER="+f.la));const Ye=oe[4];Ye!=null&&(f.Aa=Ye,f.j.info("SVER="+f.Aa));const Rr=oe[5];Rr!=null&&typeof Rr=="number"&&0<Rr&&(v=1.5*Rr,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Mt=a.g;if(Mt){const Io=Mt.g?Mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Io){var j=v.h;j.g||Io.indexOf("spdy")==-1&&Io.indexOf("quic")==-1&&Io.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&($l(j,j.h),j.h=null))}if(v.D){const Kl=Mt.g?Mt.g.getResponseHeader("X-HTTP-Session-Id"):null;Kl&&(v.ya=Kl,pe(v.I,v.D,Kl))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var B=a;if(v.qa=Tf(v,v.J?v.ia:null,v.W),B.K){Xd(v.h,B);var he=B,Ue=v.L;Ue&&(he.I=Ue),he.B&&(Ul(he),po(he)),v.g=B}else vf(v);0<f.i.length&&xo(f)}else oe[0]!="stop"&&oe[0]!="close"||er(f,7);else f.G==3&&(oe[0]=="stop"||oe[0]=="close"?oe[0]=="stop"?er(f,7):ql(f):oe[0]!="noop"&&f.l&&f.l.ta(oe),f.v=0)}}Rs(4)}catch{}}var J0=class{constructor(a,h){this.g=a,this.map=h}};function Kd(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gd(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Yd(a){return a.h?1:a.g?a.g.size:0}function Bl(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function $l(a,h){a.g?a.g.add(h):a.h=h}function Xd(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Kd.prototype.cancel=function(){if(this.i=Jd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Jd(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return P(a.i)}function Z0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],f=a.length,v=0;v<f;v++)h.push(a[v]);return h}h=[],f=0;for(v in a)h[f++]=a[v];return h}function e_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const v in a)h[f++]=v;return h}}}function Zd(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=e_(a),v=Z0(a),b=v.length,j=0;j<b;j++)h.call(void 0,v[j],f&&f[j],a)}var ef=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function t_(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var v=a[f].indexOf("="),b=null;if(0<=v){var j=a[f].substring(0,v);b=a[f].substring(v+1)}else j=a[f];h(j,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Zn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Zn){this.h=a.h,mo(this,a.j),this.o=a.o,this.g=a.g,go(this,a.s),this.l=a.l;var h=a.i,f=new Ms;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),tf(this,f),this.m=a.m}else a&&(h=String(a).match(ef))?(this.h=!1,mo(this,h[1]||"",!0),this.o=js(h[2]||""),this.g=js(h[3]||"",!0),go(this,h[4]),this.l=js(h[5]||"",!0),tf(this,h[6]||"",!0),this.m=js(h[7]||"")):(this.h=!1,this.i=new Ms(null,this.h))}Zn.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Vs(h,nf,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Vs(h,nf,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Vs(f,f.charAt(0)=="/"?s_:r_,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Vs(f,o_)),a.join("")};function nn(a){return new Zn(a)}function mo(a,h,f){a.j=f?js(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function go(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function tf(a,h,f){h instanceof Ms?(a.i=h,a_(a.i,a.h)):(f||(h=Vs(h,i_)),a.i=new Ms(h,a.h))}function pe(a,h,f){a.i.set(h,f)}function yo(a){return pe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function js(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Vs(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,n_),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function n_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var nf=/[#\/\?@]/g,r_=/[#\?:]/g,s_=/[#\?]/g,i_=/[#\?@]/g,o_=/#/g;function Ms(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function En(a){a.g||(a.g=new Map,a.h=0,a.i&&t_(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=Ms.prototype,t.add=function(a,h){En(this),this.i=null,a=kr(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function rf(a,h){En(a),h=kr(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function sf(a,h){return En(a),h=kr(a,h),a.g.has(h)}t.forEach=function(a,h){En(this),this.g.forEach(function(f,v){f.forEach(function(b){a.call(h,b,v,this)},this)},this)},t.na=function(){En(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let v=0;v<h.length;v++){const b=a[v];for(let j=0;j<b.length;j++)f.push(h[v])}return f},t.V=function(a){En(this);let h=[];if(typeof a=="string")sf(this,a)&&(h=h.concat(this.g.get(kr(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},t.set=function(a,h){return En(this),this.i=null,a=kr(this,a),sf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function of(a,h,f){rf(a,h),0<f.length&&(a.i=null,a.g.set(kr(a,h),P(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var v=h[f];const j=encodeURIComponent(String(v)),B=this.V(v);for(v=0;v<B.length;v++){var b=j;B[v]!==""&&(b+="="+encodeURIComponent(String(B[v]))),a.push(b)}}return this.i=a.join("&")};function kr(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function a_(a,h){h&&!a.j&&(En(a),a.i=null,a.g.forEach(function(f,v){var b=v.toLowerCase();v!=b&&(rf(this,v),of(this,b,f))},a)),a.j=h}function l_(a,h){const f=new bs;if(l.Image){const v=new Image;v.onload=x(xn,f,"TestLoadImage: loaded",!0,h,v),v.onerror=x(xn,f,"TestLoadImage: error",!1,h,v),v.onabort=x(xn,f,"TestLoadImage: abort",!1,h,v),v.ontimeout=x(xn,f,"TestLoadImage: timeout",!1,h,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function u_(a,h){const f=new bs,v=new AbortController,b=setTimeout(()=>{v.abort(),xn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(j=>{clearTimeout(b),j.ok?xn(f,"TestPingServer: ok",!0,h):xn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(b),xn(f,"TestPingServer: error",!1,h)})}function xn(a,h,f,v,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),v(f)}catch{}}function c_(){this.g=new W0}function h_(a,h,f){const v=f||"";try{Zd(a,function(b,j){let B=b;d(b)&&(B=Dl(b)),h.push(v+j+"="+encodeURIComponent(B))})}catch(b){throw h.push(v+"type="+encodeURIComponent("_badmap")),b}}function vo(a){this.l=a.Ub||null,this.j=a.eb||!1}I(vo,jl),vo.prototype.g=function(){return new _o(this.l,this.j)},vo.prototype.i=function(a){return function(){return a}}({});function _o(a,h){Ke.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(_o,Ke),t=_o.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Ls(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ls(this)),this.g&&(this.readyState=3,Ls(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;af(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function af(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Os(this):Ls(this),this.readyState==3&&af(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Os(this))},t.Qa=function(a){this.g&&(this.response=a,Os(this))},t.ga=function(){this.g&&Os(this)};function Os(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ls(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function Ls(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function lf(a){let h="";return M(a,function(f,v){h+=v,h+=":",h+=f,h+=`\r
`}),h}function Hl(a,h,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=lf(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):pe(a,h,f))}function Se(a){Ke.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Se,Ke);var d_=/^https?$/i,f_=["POST","PUT"];t=Se.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ol.g(),this.v=this.o?Md(this.o):Md(Ol),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(j){uf(this,j);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var b in v)f.set(b,v[b]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const j of v.keys())f.set(j,v.get(j));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(j=>j.toLowerCase()=="content-type"),b=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(f_,h,void 0))||v||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,B]of f)this.g.setRequestHeader(j,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{df(this),this.u=!0,this.g.send(a),this.u=!1}catch(j){uf(this,j)}};function uf(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,cf(a),wo(a)}function cf(a){a.A||(a.A=!0,it(a,"complete"),it(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,it(this,"complete"),it(this,"abort"),wo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wo(this,!0)),Se.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?hf(this):this.bb())},t.bb=function(){hf(this)};function hf(a){if(a.h&&typeof o<"u"&&(!a.v[1]||rn(a)!=4||a.Z()!=2)){if(a.u&&rn(a)==4)bd(a.Ea,0,a);else if(it(a,"readystatechange"),rn(a)==4){a.h=!1;try{const B=a.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var v;if(v=B===0){var b=String(a.D).match(ef)[1]||null;!b&&l.self&&l.self.location&&(b=l.self.location.protocol.slice(0,-1)),v=!d_.test(b?b.toLowerCase():"")}f=v}if(f)it(a,"complete"),it(a,"success");else{a.m=6;try{var j=2<rn(a)?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.Z()+"]",cf(a)}}finally{wo(a)}}}}function wo(a,h){if(a.g){df(a);const f=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||it(a,"ready");try{f.onreadystatechange=v}catch{}}}function df(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function rn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),q0(h)}};function ff(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function p_(a){const h={};a=(a.g&&2<=rn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(_(a[v]))continue;var f=C(a[v]);const b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const j=h[b]||[];h[b]=j,j.push(f)}E(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fs(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function pf(a){this.Aa=0,this.i=[],this.j=new bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fs("baseRetryDelayMs",5e3,a),this.cb=Fs("retryDelaySeedMs",1e4,a),this.Wa=Fs("forwardChannelMaxRetries",2,a),this.wa=Fs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Kd(a&&a.concurrentRequestLimit),this.Da=new c_,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=pf.prototype,t.la=8,t.G=1,t.connect=function(a,h,f,v){ot(0),this.W=a,this.H=h||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=Tf(this,null,this.W),xo(this)};function ql(a){if(mf(a),a.G==3){var h=a.U++,f=nn(a.I);if(pe(f,"SID",a.K),pe(f,"RID",h),pe(f,"TYPE","terminate"),Us(a,f),h=new wn(a,a.j,h),h.L=2,h.v=yo(nn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=h.v,f=!0),f||(h.g=Sf(h.j,null),h.g.ea(h.v)),h.F=Date.now(),po(h)}xf(a)}function Eo(a){a.g&&(Ql(a),a.g.cancel(),a.g=null)}function mf(a){Eo(a),a.u&&(l.clearTimeout(a.u),a.u=null),To(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function xo(a){if(!Gd(a.h)&&!a.s){a.s=!0;var h=a.Ga;st||U(),$||(st(),$=!0),Q.add(h,a),a.B=0}}function m_(a,h){return Yd(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ns(y(a.Ga,a,h),Ef(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const b=new wn(this,this.j,a);let j=this.o;if(this.S&&(j?(j=g(j),S(j,this.S)):j=this.S),this.m!==null||this.O||(b.H=j,j=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=yf(this,b,h),f=nn(this.I),pe(f,"RID",a),pe(f,"CVER",22),this.D&&pe(f,"X-HTTP-Session-Id",this.D),Us(this,f),j&&(this.O?h="headers="+encodeURIComponent(String(lf(j)))+"&"+h:this.m&&Hl(f,this.m,j)),$l(this.h,b),this.Ua&&pe(f,"TYPE","init"),this.P?(pe(f,"$req",h),pe(f,"SID","null"),b.T=!0,Fl(b,f,null)):Fl(b,f,h),this.G=2}}else this.G==3&&(a?gf(this,a):this.i.length==0||Gd(this.h)||gf(this))};function gf(a,h){var f;h?f=h.l:f=a.U++;const v=nn(a.I);pe(v,"SID",a.K),pe(v,"RID",f),pe(v,"AID",a.T),Us(a,v),a.m&&a.o&&Hl(v,a.m,a.o),f=new wn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=yf(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),$l(a.h,f),Fl(f,v,h)}function Us(a,h){a.H&&M(a.H,function(f,v){pe(h,v,f)}),a.l&&Zd({},function(f,v){pe(h,v,f)})}function yf(a,h,f){f=Math.min(a.i.length,f);var v=a.l?y(a.l.Na,a.l,a):null;e:{var b=a.i;let j=-1;for(;;){const B=["count="+f];j==-1?0<f?(j=b[0].g,B.push("ofs="+j)):j=0:B.push("ofs="+j);let he=!0;for(let Ue=0;Ue<f;Ue++){let oe=b[Ue].g;const Ge=b[Ue].map;if(oe-=j,0>oe)j=Math.max(0,b[Ue].g-100),he=!1;else try{h_(Ge,B,"req"+oe+"_")}catch{v&&v(Ge)}}if(he){v=B.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,v}function vf(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;st||U(),$||(st(),$=!0),Q.add(h,a),a.v=0}}function Wl(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ns(y(a.Fa,a),Ef(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,_f(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ns(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),Eo(this),_f(this))};function Ql(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function _f(a){a.g=new wn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=nn(a.qa);pe(h,"RID","rpc"),pe(h,"SID",a.K),pe(h,"AID",a.T),pe(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&pe(h,"TO",a.ja),pe(h,"TYPE","xmlhttp"),Us(a,h),a.m&&a.o&&Hl(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=yo(nn(h)),f.m=null,f.P=!0,qd(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Eo(this),Wl(this),ot(19))};function To(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function wf(a,h){var f=null;if(a.g==h){To(a),Ql(a),a.g=null;var v=2}else if(Bl(a.h,h))f=h.D,Xd(a.h,h),v=1;else return;if(a.G!=0){if(h.o)if(v==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var b=a.B;v=co(),it(v,new zd(v,f)),xo(a)}else vf(a);else if(b=h.s,b==3||b==0&&0<h.X||!(v==1&&m_(a,h)||v==2&&Wl(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),b){case 1:er(a,5);break;case 4:er(a,10);break;case 3:er(a,6);break;default:er(a,2)}}}function Ef(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function er(a,h){if(a.j.info("Error code "+h),h==2){var f=y(a.fb,a),v=a.Xa;const b=!v;v=new Zn(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||mo(v,"https"),yo(v),b?l_(v.toString(),f):u_(v.toString(),f)}else ot(2);a.G=0,a.l&&a.l.sa(h),xf(a),mf(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function xf(a){if(a.G=0,a.ka=[],a.l){const h=Jd(a.h);(h.length!=0||a.i.length!=0)&&(N(a.ka,h),N(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Tf(a,h,f){var v=f instanceof Zn?nn(f):new Zn(f);if(v.g!="")h&&(v.g=h+"."+v.g),go(v,v.s);else{var b=l.location;v=b.protocol,h=h?h+"."+b.hostname:b.hostname,b=+b.port;var j=new Zn(null);v&&mo(j,v),h&&(j.g=h),b&&go(j,b),f&&(j.l=f),v=j}return f=a.D,h=a.ya,f&&h&&pe(v,f,h),pe(v,"VER",a.la),Us(a,v),v}function Sf(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Se(new vo({eb:f})):new Se(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function If(){}t=If.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function So(){}So.prototype.g=function(a,h){return new Et(a,h)};function Et(a,h){Ke.call(this),this.g=new pf(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!_(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Pr(this)}I(Et,Ke),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){ql(this.g)},Et.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Dl(a),a=f);h.i.push(new J0(h.Ya++,a)),h.G==3&&xo(h)},Et.prototype.N=function(){this.g.l=null,delete this.j,ql(this.g),delete this.g,Et.aa.N.call(this)};function Af(a){Vl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}I(Af,Vl);function Cf(){Ml.call(this),this.status=1}I(Cf,Ml);function Pr(a){this.g=a}I(Pr,If),Pr.prototype.ua=function(){it(this.g,"a")},Pr.prototype.ta=function(a){it(this.g,new Af(a))},Pr.prototype.sa=function(a){it(this.g,new Cf)},Pr.prototype.ra=function(){it(this.g,"b")},So.prototype.createWebChannel=So.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,yv=function(){return new So},gv=function(){return co()},mv=Xn,Rc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ho.NO_ERROR=0,ho.TIMEOUT=8,ho.HTTP_ERROR=6,oa=ho,Bd.COMPLETE="complete",pv=Bd,Od.EventType=Ps,Ps.OPEN="a",Ps.CLOSE="b",Ps.ERROR="c",Ps.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,ei=Od,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,fv=Se}).apply(typeof Ho<"u"?Ho:typeof self<"u"?self:typeof window<"u"?window:{});const Zp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ts="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr=new ov("@firebase/firestore");function Gs(){return vr.logLevel}function W(t,...e){if(vr.logLevel<=se.DEBUG){const n=e.map(Wh);vr.debug(`Firestore (${Ts}): ${t}`,...n)}}function gn(t,...e){if(vr.logLevel<=se.ERROR){const n=e.map(Wh);vr.error(`Firestore (${Ts}): ${t}`,...n)}}function us(t,...e){if(vr.logLevel<=se.WARN){const n=e.map(Wh);vr.warn(`Firestore (${Ts}): ${t}`,...n)}}function Wh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${Ts}) INTERNAL ASSERTION FAILED: `+t;throw gn(e),new Error(e)}function ce(t,e){t||Y()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends xs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class G1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(et.UNAUTHENTICATED))}shutdown(){}}class Y1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class X1{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new dr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new dr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string"),new vv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string"),new et(e)}}class J1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Z1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new J1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ce(this.o===void 0);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string"),this.R=n.token,new eT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=nT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function cs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ve(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new Ve(0,0))}static max(){return new X(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ge extends Mi{construct(e,n,r){return new ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ge(n)}static emptyPath(){return new ge([])}}const rT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends Mi{construct(e,n,r){return new $e(e,n,r)}static isValidIdentifier(e){return rT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $e(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new H(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new H(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $e(n)}static emptyPath(){return new $e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(ge.fromString(e))}static fromName(e){return new K(ge.fromString(e).popFirst(5))}static empty(){return new K(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new ge(e.slice()))}}function sT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new Ve(n+1,0):new Ve(n,r));return new Hn(s,K.empty(),e)}function iT(t){return new Hn(t.readTime,t.key,-1)}class Hn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hn(X.min(),K.empty(),-1)}static max(){return new Hn(X.max(),K.empty(),-1)}}function oT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ki(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==aT)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{o[d]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function uT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Qh.oe=-1;function cl(t){return t==null}function Ua(t){return t===0&&1/t==-1/0}function cT(t){return typeof t=="number"&&Number.isInteger(t)&&!Ua(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Sr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){this.comparator=e,this.root=n||Be.EMPTY}insert(e,n){return new Te(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(e){return new Te(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Be.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qo(this.root,e,this.comparator,!1)}getReverseIterator(){return new qo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qo(this.root,e,this.comparator,!0)}}class qo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Be{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Be.RED,this.left=s??Be.EMPTY,this.right=i??Be.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Be(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Be.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Be.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Be(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new tm(this.data.getIterator())}getIteratorFrom(e){return new tm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qe(this.comparator);return n.data=e,n}}class tm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new St([])}unionWith(e){let n=new qe($e.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new St(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ev("Invalid base64 string: "+i):i}}(e);return new Qe(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Qe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const hT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qn(t){if(ce(!!t),typeof t=="string"){let e=0;const n=hT.exec(t);if(ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(t.seconds),nanos:ke(t.nanos)}}function ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _r(t){return typeof t=="string"?Qe.fromBase64String(t):Qe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gh(t){const e=t.mapValue.fields.__previous_value__;return Kh(e)?Gh(e):e}function Oi(t){const e=qn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Li{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Li("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Li&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo={mapValue:{}};function wr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kh(t)?4:pT(t)?9007199254740991:fT(t)?10:11:Y()}function Jt(t,e){if(t===e)return!0;const n=wr(t);if(n!==wr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oi(t).isEqual(Oi(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=qn(s.timestampValue),l=qn(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return _r(s.bytesValue).isEqual(_r(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ke(s.geoPointValue.latitude)===ke(i.geoPointValue.latitude)&&ke(s.geoPointValue.longitude)===ke(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ke(s.integerValue)===ke(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ke(s.doubleValue),l=ke(i.doubleValue);return o===l?Ua(o)===Ua(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return cs(t.arrayValue.values||[],e.arrayValue.values||[],Jt);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(em(o)!==em(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Jt(o[u],l[u])))return!1;return!0}(t,e);default:return Y()}}function Fi(t,e){return(t.values||[]).find(n=>Jt(n,e))!==void 0}function hs(t,e){if(t===e)return 0;const n=wr(t),r=wr(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=ke(i.integerValue||i.doubleValue),u=ke(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return nm(t.timestampValue,e.timestampValue);case 4:return nm(Oi(t),Oi(e));case 5:return ae(t.stringValue,e.stringValue);case 6:return function(i,o){const l=_r(i),u=_r(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const p=ae(l[d],u[d]);if(p!==0)return p}return ae(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ae(ke(i.latitude),ke(o.latitude));return l!==0?l:ae(ke(i.longitude),ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return rm(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,p;const m=i.fields||{},y=o.fields||{},x=(l=m.value)===null||l===void 0?void 0:l.arrayValue,I=(u=y.value)===null||u===void 0?void 0:u.arrayValue,P=ae(((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0,((p=I==null?void 0:I.values)===null||p===void 0?void 0:p.length)||0);return P!==0?P:rm(x,I)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Wo.mapValue&&o===Wo.mapValue)return 0;if(i===Wo.mapValue)return 1;if(o===Wo.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const y=ae(u[m],p[m]);if(y!==0)return y;const x=hs(l[u[m]],d[p[m]]);if(x!==0)return x}return ae(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Y()}}function nm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=qn(t),r=qn(e),s=ae(n.seconds,r.seconds);return s!==0?s:ae(n.nanos,r.nanos)}function rm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=hs(n[s],r[s]);if(i)return i}return ae(n.length,r.length)}function ds(t){return Nc(t)}function Nc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _r(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Nc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Nc(n.fields[o])}`;return s+"}"}(t.mapValue):Y()}function sm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bc(t){return!!t&&"integerValue"in t}function Yh(t){return!!t&&"arrayValue"in t}function im(t){return!!t&&"nullValue"in t}function om(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function aa(t){return!!t&&"mapValue"in t}function fT(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function fi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Sr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.value=e}static empty(){return new ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!aa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fi(n)}setAll(e){let n=$e.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=fi(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());aa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Jt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];aa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Sr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ft(fi(this.value))}}function xv(t){const e=[];return Sr(t.fields,(n,r)=>{const s=new $e([n]);if(aa(r)){const i=xv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new St(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new nt(e,0,X.min(),X.min(),X.min(),ft.empty(),0)}static newFoundDocument(e,n,r,s){return new nt(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new nt(e,2,n,X.min(),X.min(),ft.empty(),0)}static newUnknownDocument(e,n){return new nt(e,3,n,X.min(),X.min(),ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n){this.position=e,this.inclusive=n}}function am(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=hs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function lm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Jt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n="asc"){this.field=e,this.dir=n}}function mT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{}class be extends Tv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new yT(e,n,r):n==="array-contains"?new wT(e,r):n==="in"?new ET(e,r):n==="not-in"?new xT(e,r):n==="array-contains-any"?new TT(e,r):new be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vT(e,r):new _T(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hs(n,this.value)):n!==null&&wr(this.value)===wr(n)&&this.matchesComparison(hs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends Tv{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ht(e,n)}matches(e){return Sv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Sv(t){return t.op==="and"}function Iv(t){return gT(t)&&Sv(t)}function gT(t){for(const e of t.filters)if(e instanceof Ht)return!1;return!0}function Dc(t){if(t instanceof be)return t.field.canonicalString()+t.op.toString()+ds(t.value);if(Iv(t))return t.filters.map(e=>Dc(e)).join(",");{const e=t.filters.map(n=>Dc(n)).join(",");return`${t.op}(${e})`}}function Av(t,e){return t instanceof be?function(r,s){return s instanceof be&&r.op===s.op&&r.field.isEqual(s.field)&&Jt(r.value,s.value)}(t,e):t instanceof Ht?function(r,s){return s instanceof Ht&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&Av(o,s.filters[l]),!0):!1}(t,e):void Y()}function Cv(t){return t instanceof be?function(n){return`${n.field.canonicalString()} ${n.op} ${ds(n.value)}`}(t):t instanceof Ht?function(n){return n.op.toString()+" {"+n.getFilters().map(Cv).join(" ,")+"}"}(t):"Filter"}class yT extends be{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class vT extends be{constructor(e,n){super(e,"in",n),this.keys=kv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _T extends be{constructor(e,n){super(e,"not-in",n),this.keys=kv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class wT extends be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yh(n)&&Fi(n.arrayValue,this.value)}}class ET extends be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fi(this.value.arrayValue,n)}}class xT extends be{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fi(this.value.arrayValue,n)}}class TT extends be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Fi(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function um(t,e=null,n=[],r=[],s=null,i=null,o=null){return new ST(t,e,n,r,s,i,o)}function Xh(t){const e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Dc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),cl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ds(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ds(r)).join(",")),e.ue=n}return e.ue}function Jh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Av(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lm(t.startAt,e.startAt)&&lm(t.endAt,e.endAt)}function jc(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function IT(t,e,n,r,s,i,o,l){return new Ss(t,e,n,r,s,i,o,l)}function Zh(t){return new Ss(t)}function cm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Pv(t){return t.collectionGroup!==null}function pi(t){const e=J(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new qe($e.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ui(i,r))}),n.has($e.keyField().canonicalString())||e.ce.push(new Ui($e.keyField(),r))}return e.ce}function Yt(t){const e=J(t);return e.le||(e.le=AT(e,pi(t))),e.le}function AT(t,e){if(t.limitType==="F")return um(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ui(s.field,i)});const n=t.endAt?new za(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new za(t.startAt.position,t.startAt.inclusive):null;return um(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vc(t,e){const n=t.filters.concat([e]);return new Ss(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mc(t,e,n){return new Ss(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hl(t,e){return Jh(Yt(t),Yt(e))&&t.limitType===e.limitType}function Rv(t){return`${Xh(Yt(t))}|lt:${t.limitType}`}function Dr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Cv(s)).join(", ")}]`),cl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ds(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ds(s)).join(",")),`Target(${r})`}(Yt(t))}; limitType=${t.limitType})`}function dl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of pi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=am(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,pi(r),s)||r.endAt&&!function(o,l,u){const d=am(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,pi(r),s))}(t,e)}function CT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Nv(t){return(e,n)=>{let r=!1;for(const s of pi(t)){const i=kT(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function kT(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?hs(u,d):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Sr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return wv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=new Te(K.comparator);function yn(){return PT}const bv=new Te(K.comparator);function ti(...t){let e=bv;for(const n of t)e=e.insert(n.key,n);return e}function Dv(t){let e=bv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function lr(){return mi()}function jv(){return mi()}function mi(){return new Is(t=>t.toString(),(t,e)=>t.isEqual(e))}const RT=new Te(K.comparator),NT=new qe(K.comparator);function te(...t){let e=NT;for(const n of t)e=e.add(n);return e}const bT=new qe(ae);function DT(){return bT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ua(e)?"-0":e}}function Vv(t){return{integerValue:""+t}}function Mv(t,e){return cT(e)?Vv(e):ed(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this._=void 0}}function jT(t,e,n){return t instanceof Ba?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Kh(i)&&(i=Gh(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof fs?Lv(t,e):t instanceof zi?Fv(t,e):function(s,i){const o=Ov(s,i),l=hm(o)+hm(s.Pe);return bc(o)&&bc(s.Pe)?Vv(l):ed(s.serializer,l)}(t,e)}function VT(t,e,n){return t instanceof fs?Lv(t,e):t instanceof zi?Fv(t,e):n}function Ov(t,e){return t instanceof Bi?function(r){return bc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ba extends fl{}class fs extends fl{constructor(e){super(),this.elements=e}}function Lv(t,e){const n=Uv(e);for(const r of t.elements)n.some(s=>Jt(s,r))||n.push(r);return{arrayValue:{values:n}}}class zi extends fl{constructor(e){super(),this.elements=e}}function Fv(t,e){let n=Uv(e);for(const r of t.elements)n=n.filter(s=>!Jt(s,r));return{arrayValue:{values:n}}}class Bi extends fl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function hm(t){return ke(t.integerValue||t.doubleValue)}function Uv(t){return Yh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n){this.field=e,this.transform=n}}function MT(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof fs&&s instanceof fs||r instanceof zi&&s instanceof zi?cs(r.elements,s.elements,Jt):r instanceof Bi&&s instanceof Bi?Jt(r.Pe,s.Pe):r instanceof Ba&&s instanceof Ba}(t.transform,e.transform)}class OT{constructor(e,n){this.version=e,this.transformResults=n}}class vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function la(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pl{}function Bv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ml(t.key,vt.none()):new Yi(t.key,t.data,vt.none());{const n=t.data,r=ft.empty();let s=new qe($e.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Yn(t.key,r,new St(s.toArray()),vt.none())}}function LT(t,e,n){t instanceof Yi?function(s,i,o){const l=s.value.clone(),u=fm(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Yn?function(s,i,o){if(!la(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=fm(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll($v(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function gi(t,e,n,r){return t instanceof Yi?function(i,o,l,u){if(!la(i.precondition,o))return l;const d=i.value.clone(),p=pm(i.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yn?function(i,o,l,u){if(!la(i.precondition,o))return l;const d=pm(i.fieldTransforms,u,o),p=o.data;return p.setAll($v(i)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return la(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function FT(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Ov(r.transform,s||null);i!=null&&(n===null&&(n=ft.empty()),n.set(r.field,i))}return n||null}function dm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&cs(r,s,(i,o)=>MT(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yi extends pl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yn extends pl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function $v(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function fm(t,e,n){const r=new Map;ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,VT(o,l,n[s]))}return r}function pm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,jT(i,o,e))}return r}class ml extends pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UT extends pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&LT(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=Bv(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&cs(this.mutations,e.mutations,(n,r)=>dm(n,r))&&cs(this.baseMutations,e.baseMutations,(n,r)=>dm(n,r))}}class td{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length);let s=function(){return RT}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new td(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,ne;function HT(t){switch(t){default:return Y();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function Hv(t){if(t===void 0)return gn("GRPC error has no .code"),V.UNKNOWN;switch(t){case Re.OK:return V.OK;case Re.CANCELLED:return V.CANCELLED;case Re.UNKNOWN:return V.UNKNOWN;case Re.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Re.INTERNAL:return V.INTERNAL;case Re.UNAVAILABLE:return V.UNAVAILABLE;case Re.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Re.NOT_FOUND:return V.NOT_FOUND;case Re.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Re.ABORTED:return V.ABORTED;case Re.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Re.DATA_LOSS:return V.DATA_LOSS;default:return Y()}}(ne=Re||(Re={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=new hr([4294967295,4294967295],0);function mm(t){const e=qT().encode(t),n=new dv;return n.update(e),new Uint8Array(n.digest())}function gm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new hr([n,r],0),new hr([s,i],0)]}class nd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ni(`Invalid padding: ${n}`);if(r<0)throw new ni(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ni(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ni(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=hr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(hr.fromNumber(r)));return s.compare(WT)===1&&(s=new hr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=mm(e),[r,s]=gm(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new nd(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=mm(e),[r,s]=gm(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ni extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Xi.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gl(X.min(),s,new Te(ae),yn(),te())}}class Xi{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xi(r,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class qv{constructor(e,n){this.targetId=e,this.me=n}}class Wv{constructor(e,n,r=Qe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ym{constructor(){this.fe=0,this.ge=_m(),this.pe=Qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=te(),n=te(),r=te();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y()}}),new Xi(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=_m()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class QT{constructor(e){this.Le=e,this.Be=new Map,this.ke=yn(),this.qe=vm(),this.Qe=new Te(ae)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(jc(i))if(r===0){const o=new K(i.path);this.Ue(n,o,nt.newNoDocument(o,X.min()))}else ce(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=_r(r).toUint8Array()}catch(u){if(u instanceof Ev)return us("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new nd(o,s,i)}catch(u){return us(u instanceof ni?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&jc(l.target)){const u=new K(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,nt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=te();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new gl(e,n,this.Qe,this.ke,r);return this.ke=yn(),this.qe=vm(),this.Qe=new Te(ae),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ym,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new qe(ae),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ym),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function vm(){return new Te(K.comparator)}function _m(){return new Te(K.comparator)}const KT={asc:"ASCENDING",desc:"DESCENDING"},GT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YT={and:"AND",or:"OR"};class XT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Oc(t,e){return t.useProto3Json||cl(e)?e:{value:e}}function $a(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JT(t,e){return $a(t,e.toTimestamp())}function Xt(t){return ce(!!t),X.fromTimestamp(function(n){const r=qn(n);return new Ve(r.seconds,r.nanos)}(t))}function rd(t,e){return Lc(t,e).canonicalString()}function Lc(t,e){const n=function(s){return new ge(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Kv(t){const e=ge.fromString(t);return ce(Zv(e)),e}function Fc(t,e){return rd(t.databaseId,e.path)}function Cu(t,e){const n=Kv(e);if(n.get(1)!==t.databaseId.projectId)throw new H(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(Yv(n))}function Gv(t,e){return rd(t.databaseId,e)}function ZT(t){const e=Kv(t);return e.length===4?ge.emptyPath():Yv(e)}function Uc(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Yv(t){return ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function wm(t,e,n){return{name:Fc(t,e),fields:n.value.mapValue.fields}}function eS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(ce(p===void 0||typeof p=="string"),Qe.fromBase64String(p||"")):(ce(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Qe.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const p=d.code===void 0?V.UNKNOWN:Hv(d.code);return new H(p,d.message||"")}(o);n=new Wv(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Cu(t,r.document.name),i=Xt(r.document.updateTime),o=r.document.createTime?Xt(r.document.createTime):X.min(),l=new ft({mapValue:{fields:r.document.fields}}),u=nt.newFoundDocument(s,i,o,l),d=r.targetIds||[],p=r.removedTargetIds||[];n=new ua(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Cu(t,r.document),i=r.readTime?Xt(r.readTime):X.min(),o=nt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ua([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Cu(t,r.document),i=r.removedTargetIds||[];n=new ua([],i,s,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new $T(s,i),l=r.targetId;n=new qv(l,o)}}return n}function tS(t,e){let n;if(e instanceof Yi)n={update:wm(t,e.key,e.value)};else if(e instanceof ml)n={delete:Fc(t,e.key)};else if(e instanceof Yn)n={update:wm(t,e.key,e.data),updateMask:cS(e.fieldMask)};else{if(!(e instanceof UT))return Y();n={verify:Fc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Ba)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof zi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Bi)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:JT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y()}(t,e.precondition)),n}function nS(t,e){return t&&t.length>0?(ce(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Xt(s.updateTime):Xt(i);return o.isEqual(X.min())&&(o=Xt(i)),new OT(o,s.transformResults||[])}(n,e))):[]}function rS(t,e){return{documents:[Gv(t,e.path)]}}function sS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Gv(t,s);const i=function(d){if(d.length!==0)return Jv(Ht.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(p=>function(y){return{field:jr(y.field),direction:aS(y.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Oc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function iS(t){let e=ZT(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const y=Xv(m);return y instanceof Ht&&Iv(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(y=>function(I){return new Ui(Vr(I.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(m){let y;return y=typeof m=="object"?m.value:m,cl(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(m){const y=!!m.before,x=m.values||[];return new za(x,y)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const y=!m.before,x=m.values||[];return new za(x,y)}(n.endAt)),IT(e,s,o,i,l,"F",u,d)}function oS(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Xv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vr(n.unaryFilter.field);return be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Vr(n.unaryFilter.field);return be.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vr(n.unaryFilter.field);return be.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vr(n.unaryFilter.field);return be.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return be.create(Vr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ht.create(n.compositeFilter.filters.map(r=>Xv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function aS(t){return KT[t]}function lS(t){return GT[t]}function uS(t){return YT[t]}function jr(t){return{fieldPath:t.canonicalString()}}function Vr(t){return $e.fromServerFormat(t.fieldPath)}function Jv(t){return t instanceof be?function(n){if(n.op==="=="){if(om(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NAN"}};if(im(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(om(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NOT_NAN"}};if(im(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jr(n.field),op:lS(n.op),value:n.value}}}(t):t instanceof Ht?function(n){const r=n.getFilters().map(s=>Jv(s));return r.length===1?r[0]:{compositeFilter:{op:uS(n.op),filters:r}}}(t):Y()}function cS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Zv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n,r,s,i=X.min(),o=X.min(),l=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Rn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Rn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.ct=e}}function dS(t){const e=iS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.un=new pS}addToCollectionParentIndex(e,n){return this.un.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Hn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Hn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class pS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new qe(ge.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new qe(ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ps(0)}static kn(){return new ps(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this.changes=new Is(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&gi(r.mutation,s,St.empty(),Ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){const s=lr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ti();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=lr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=yn();const o=mi(),l=function(){return mi()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof Yn)?i=i.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),gi(p.mutation,d,p.mutation.getFieldMask(),Ve.now())):o.set(d.key,St.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>{var m;return l.set(d,new gS(p,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=mi();let s=new Te((o,l)=>o-l),i=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||St.empty();p=l.applyToLocalView(d,p),r.set(u,p);const m=(s.get(l.batchId)||te()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,p=u.value,m=jv();p.forEach(y=>{if(!i.has(y)){const x=Bv(n.get(y),r.get(y));x!==null&&m.set(y,x),i=i.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Pv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(lr());let l=-1,u=i;return o.next(d=>L.forEach(d,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?L.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{u=u.insert(p,y)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,te())).next(p=>({batchId:l,changes:Dv(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=ti();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ti();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const d=function(m,y){return new Ss(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,nt.newInvalidDocument(p)))});let l=ti();return o.forEach((u,d)=>{const p=i.get(u);p!==void 0&&gi(p.mutation,d,St.empty(),Ve.now()),dl(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return L.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Xt(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:dS(s.bundledQuery),readTime:Xt(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(){this.overlays=new Te(K.comparator),this.Ir=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=lr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=lr(),i=n.length+1,o=new K(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Te((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=lr(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=lr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=s)););return L.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new BT(n,r));let i=this.Ir.get(n);i===void 0&&(i=te(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this.Tr=new qe(Oe.Er),this.dr=new qe(Oe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Oe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Oe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new ge([])),r=new Oe(n,e),s=new Oe(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new ge([])),r=new Oe(n,e),s=new Oe(n,e+1);let i=te();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Oe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Oe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||ae(e.wr,n.wr)}static Ar(e,n){return ae(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new qe(Oe.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zT(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Oe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Oe(n,0),s=new Oe(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(ae);return n.forEach(s=>{const i=new Oe(s,0),o=new Oe(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const o=new Oe(new K(i),0);let l=new qe(ae);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),L.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return L.forEach(n.mutations,s=>{const i=new Oe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Oe(n,0),s=this.br.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.Mr=e,this.docs=function(){return new Te(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(n))}getEntries(e,n){let r=yn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():nt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=yn();const o=n.path,l=new K(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||oT(iT(p),r)<=0||(s.has(p.key)||dl(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y()}Or(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new TS(this)}getSize(e){return L.resolve(this.size)}}class TS extends mS{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.persistence=e,this.Nr=new Is(n=>Xh(n),Jh),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new sd,this.targetCount=0,this.kr=ps.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),L.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ps(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Kn(n),L.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Qh(0),this.Kr=!1,this.Kr=!0,this.$r=new wS,this.referenceDelegate=e(this),this.Ur=new SS(this),this.indexManager=new fS,this.remoteDocumentCache=function(s){return new xS(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new hS(n),this.Gr=new vS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _S,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new ES(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new AS(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return L.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class AS extends lT{constructor(e){super(),this.currentSequenceNumber=e}}class id{constructor(e){this.persistence=e,this.Jr=new sd,this.Yr=null}static Zr(e){return new id(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),L.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,r=>{const s=K.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return L.or([()=>L.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=te(),s=te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new od(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Nx()?8:uT(Px())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new CS;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Gs()<=se.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Dr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(Gs()<=se.DEBUG&&W("QueryEngine","Query:",Dr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Gs()<=se.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Dr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yt(n))):L.resolve())}Yi(e,n){if(cm(n))return L.resolve(null);let r=Yt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Mc(n,null,"F"),r=Yt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=te(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,Mc(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return cm(n)||s.isEqual(X.min())?L.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?L.resolve(null):(Gs()<=se.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Dr(n)),this.rs(e,o,n,sT(s,-1)).next(l=>l))})}ts(e,n){let r=new qe(Nv(e));return n.forEach((s,i)=>{dl(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Gs()<=se.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Dr(n)),this.Ji.getDocumentsMatchingQuery(e,n,Hn.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Te(ae),this._s=new Is(i=>Xh(i),Jh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yS(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function RS(t,e,n,r){return new PS(t,e,n,r)}async function e0(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=te();for(const d of s){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){l.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function NS(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,p){const m=d.batch,y=m.keys();let x=L.resolve();return y.forEach(I=>{x=x.next(()=>p.getEntry(u,I)).next(P=>{const N=d.docVersions.get(I);ce(N!==null),P.version.compareTo(N)<0&&(m.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),p.addEntry(P)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=te();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function t0(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function bS(t,e){const n=J(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const y=s.get(m);if(!y)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let x=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(Qe.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,r)),s=s.insert(m,x),function(P,N,T){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(y,x,p)&&l.push(n.Ur.updateTargetData(i,x))});let u=yn(),d=te();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(DS(i,o,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(X.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return L.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function DS(t,e,n){let r=te(),s=te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=yn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function jS(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function VS(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Rn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function zc(t,e,n){const r=J(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Gi(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Em(t,e,n){const r=J(t);let s=X.min(),i=te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const m=J(u),y=m._s.get(p);return y!==void 0?L.resolve(m.os.get(y)):m.Ur.getTargetData(d,p)}(r,o,Yt(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:X.min(),n?i:te())).next(l=>(MS(r,CT(e),l),{documents:l,Ts:i})))}function MS(t,e,n){let r=t.us.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class xm{constructor(){this.activeTargetIds=DT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OS{constructor(){this.so=new xm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo=null;function ku(){return Qo===null?Qo=function(){return 268435456+Math.round(2147483648*Math.random())}():Qo++,"0x"+Qo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class zS extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=ku(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(p=>(W("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw us("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ts}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=FS[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=ku();return new Promise((o,l)=>{const u=new fv;u.setWithCredentials(!0),u.listenOnce(pv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case oa.NO_ERROR:const p=u.getResponseJson();W(Ze,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case oa.TIMEOUT:W(Ze,`RPC '${e}' ${i} timed out`),l(new H(V.DEADLINE_EXCEEDED,"Request time out"));break;case oa.HTTP_ERROR:const m=u.getStatus();if(W(Ze,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const I=function(N){const T=N.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(T)>=0?T:V.UNKNOWN}(x.status);l(new H(I,x.message))}else l(new H(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new H(V.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{W(Ze,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);W(Ze,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=ku(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=yv(),l=gv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");W(Ze,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=o.createWebChannel(p,u);let y=!1,x=!1;const I=new US({Io:N=>{x?W(Ze,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(y||(W(Ze,`Opening RPC '${e}' stream ${s} transport.`),m.open(),y=!0),W(Ze,`RPC '${e}' stream ${s} sending:`,N),m.send(N))},To:()=>m.close()}),P=(N,T,_)=>{N.listen(T,k=>{try{_(k)}catch(D){setTimeout(()=>{throw D},0)}})};return P(m,ei.EventType.OPEN,()=>{x||(W(Ze,`RPC '${e}' stream ${s} transport opened.`),I.yo())}),P(m,ei.EventType.CLOSE,()=>{x||(x=!0,W(Ze,`RPC '${e}' stream ${s} transport closed`),I.So())}),P(m,ei.EventType.ERROR,N=>{x||(x=!0,us(Ze,`RPC '${e}' stream ${s} transport errored:`,N),I.So(new H(V.UNAVAILABLE,"The operation could not be completed")))}),P(m,ei.EventType.MESSAGE,N=>{var T;if(!x){const _=N.data[0];ce(!!_);const k=_,D=k.error||((T=k[0])===null||T===void 0?void 0:T.error);if(D){W(Ze,`RPC '${e}' stream ${s} received error:`,D);const F=D.status;let M=function(w){const S=Re[w];if(S!==void 0)return Hv(S)}(F),E=D.message;M===void 0&&(M=V.INTERNAL,E="Unknown error status: "+F+" with message "+D.message),x=!0,I.So(new H(M,E)),m.close()}else W(Ze,`RPC '${e}' stream ${s} received:`,_),I.bo(_)}}),P(l,mv.STAT_EVENT,N=>{N.stat===Rc.PROXY?W(Ze,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===Rc.NOPROXY&&W(Ze,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}}function Pu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t){return new XT(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new n0(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(gn(n.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new H(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BS extends r0{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=eS(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?Xt(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Uc(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=jc(u)?{documents:rS(i,u)}:{query:sS(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Qv(i,o.resumeToken);const d=Oc(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(X.min())>0){l.readTime=$a(i,o.snapshotVersion.toTimestamp());const d=Oc(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=oS(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Uc(this.serializer),n.removeTarget=e,this.a_(n)}}class $S extends r0{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ce(!!e.streamToken),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=nS(e.writeResults,e.commitTime),r=Xt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Uc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>tS(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new H(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Lc(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Lc(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class qS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ir(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=J(u);d.L_.add(4),await Ji(d),d.q_.set("Unknown"),d.L_.delete(4),await vl(d)}(this))})}),this.q_=new qS(r,s)}}async function vl(t){if(Ir(t))for(const e of t.B_)await e(!0)}async function Ji(t){for(const e of t.B_)await e(!1)}function s0(t,e){const n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),cd(n)?ud(n):As(n).r_()&&ld(n,e))}function ad(t,e){const n=J(t),r=As(n);n.N_.delete(e),r.r_()&&i0(n,e),n.N_.size===0&&(r.r_()?r.o_():Ir(n)&&n.q_.set("Unknown"))}function ld(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}As(t).A_(e)}function i0(t,e){t.Q_.xe(e),As(t).R_(e)}function ud(t){t.Q_=new QT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),As(t).start(),t.q_.v_()}function cd(t){return Ir(t)&&!As(t).n_()&&t.N_.size>0}function Ir(t){return J(t).L_.size===0}function o0(t){t.Q_=void 0}async function QS(t){t.q_.set("Online")}async function KS(t){t.N_.forEach((e,n)=>{ld(t,e)})}async function GS(t,e){o0(t),cd(t)?(t.q_.M_(e),ud(t)):t.q_.set("Unknown")}async function YS(t,e,n){if(t.q_.set("Online"),e instanceof Wv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ha(t,r)}else if(e instanceof ua?t.Q_.Ke(e):e instanceof qv?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{const r=await t0(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(d);p&&i.N_.set(d,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(Qe.EMPTY_BYTE_STRING,p.snapshotVersion)),i0(i,u);const m=new Rn(p.target,u,d,p.sequenceNumber);ld(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await Ha(t,r)}}async function Ha(t,e,n){if(!Gi(e))throw e;t.L_.add(1),await Ji(t),t.q_.set("Offline"),n||(n=()=>t0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await vl(t)})}function a0(t,e){return e().catch(n=>Ha(t,n,e))}async function _l(t){const e=J(t),n=Wn(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;XS(e);)try{const s=await jS(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,JS(e,s)}catch(s){await Ha(e,s)}l0(e)&&u0(e)}function XS(t){return Ir(t)&&t.O_.length<10}function JS(t,e){t.O_.push(e);const n=Wn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function l0(t){return Ir(t)&&!Wn(t).n_()&&t.O_.length>0}function u0(t){Wn(t).start()}async function ZS(t){Wn(t).p_()}async function eI(t){const e=Wn(t);for(const n of t.O_)e.m_(n.mutations)}async function tI(t,e,n){const r=t.O_.shift(),s=td.from(r,e,n);await a0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await _l(t)}async function nI(t,e){e&&Wn(t).V_&&await async function(r,s){if(function(o){return HT(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();Wn(r).s_(),await a0(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await _l(r)}}(t,e),l0(t)&&u0(t)}async function Sm(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Ir(n);n.L_.add(3),await Ji(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await vl(n)}async function rI(t,e){const n=J(t);e?(n.L_.delete(2),await vl(n)):e||(n.L_.add(2),await Ji(n),n.q_.set("Unknown"))}function As(t){return t.K_||(t.K_=function(n,r,s){const i=J(n);return i.w_(),new BS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:QS.bind(null,t),Ro:KS.bind(null,t),mo:GS.bind(null,t),d_:YS.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),cd(t)?ud(t):t.q_.set("Unknown")):(await t.K_.stop(),o0(t))})),t.K_}function Wn(t){return t.U_||(t.U_=function(n,r,s){const i=J(n);return i.w_(),new $S(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ZS.bind(null,t),mo:nI.bind(null,t),f_:eI.bind(null,t),g_:tI.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await _l(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new hd(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dd(t,e){if(gn("AsyncQueue",`${e}: ${t}`),Gi(t))return new H(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=ti(),this.sortedSet=new Te(this.comparator)}static emptySet(e){return new ts(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ts)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ts;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this.W_=new Te(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ms{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ms(e,n,ts.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class iI{constructor(){this.queries=Am(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=J(n),i=s.queries;s.queries=Am(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new H(V.ABORTED,"Firestore shutting down"))}}function Am(){return new Is(t=>Rv(t),hl)}async function oI(t,e){const n=J(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new sI,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=dd(o,`Initialization of query '${Dr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&fd(n)}async function aI(t,e){const n=J(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lI(t,e){const n=J(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&fd(n)}function uI(t,e,n){const r=J(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function fd(t){t.Y_.forEach(e=>{e.next()})}var Bc,Cm;(Cm=Bc||(Bc={})).ea="default",Cm.Cache="cache";class cI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ms(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ms.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Bc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e){this.key=e}}class h0{constructor(e){this.key=e}}class hI{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=te(),this.mutatedKeys=te(),this.Aa=Nv(e),this.Ra=new ts(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Im,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const y=s.get(p),x=dl(this.query,m)?m:null,I=!!y&&this.mutatedKeys.has(y.key),P=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let N=!1;y&&x?y.data.isEqual(x.data)?I!==P&&(r.track({type:3,doc:x}),N=!0):this.ga(y,x)||(r.track({type:2,doc:x}),N=!0,(u&&this.Aa(x,u)>0||d&&this.Aa(x,d)<0)&&(l=!0)):!y&&x?(r.track({type:0,doc:x}),N=!0):y&&!x&&(r.track({type:1,doc:y}),N=!0,(u||d)&&(l=!0)),N&&(x?(o=o.add(x),i=P?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(x,I){const P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return P(x)-P(I)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new ms(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Im,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new h0(r))}),this.da.forEach(r=>{e.has(r)||n.push(new c0(r))}),n}ba(e){this.Ta=e.Ts,this.da=te();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ms.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class dI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fI{constructor(e){this.key=e,this.va=!1}}class pI{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Is(l=>Rv(l),hl),this.Ma=new Map,this.xa=new Set,this.Oa=new Te(K.comparator),this.Na=new Map,this.La=new sd,this.Ba={},this.ka=new Map,this.qa=ps.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function mI(t,e,n=!0){const r=y0(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await d0(r,e,n,!0),s}async function gI(t,e){const n=y0(t);await d0(n,e,!0,!1)}async function d0(t,e,n,r){const s=await VS(t.localStore,Yt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await yI(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&s0(t.remoteStore,s),l}async function yI(t,e,n,r,s){t.Ka=(m,y,x)=>async function(P,N,T,_){let k=N.view.ma(T);k.ns&&(k=await Em(P.localStore,N.query,!1).then(({documents:E})=>N.view.ma(E,k)));const D=_&&_.targetChanges.get(N.targetId),F=_&&_.targetMismatches.get(N.targetId)!=null,M=N.view.applyChanges(k,P.isPrimaryClient,D,F);return Pm(P,N.targetId,M.wa),M.snapshot}(t,m,y,x);const i=await Em(t.localStore,e,!0),o=new hI(e,i.Ts),l=o.ma(i.documents),u=Xi.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Pm(t,n,d.wa);const p=new dI(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function vI(t,e,n){const r=J(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!hl(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await zc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ad(r.remoteStore,s.targetId),$c(r,s.targetId)}).catch(Ki)):($c(r,s.targetId),await zc(r.localStore,s.targetId,!0))}async function _I(t,e){const n=J(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ad(n.remoteStore,r.targetId))}async function wI(t,e,n){const r=CI(t);try{const s=await function(o,l){const u=J(o),d=Ve.now(),p=l.reduce((x,I)=>x.add(I.key),te());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let I=yn(),P=te();return u.cs.getEntries(x,p).next(N=>{I=N,I.forEach((T,_)=>{_.isValidDocument()||(P=P.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,I)).next(N=>{m=N;const T=[];for(const _ of l){const k=FT(_,m.get(_.key).overlayedDocument);k!=null&&T.push(new Yn(_.key,k,xv(k.value.mapValue),vt.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,T,l)}).next(N=>{y=N;const T=N.applyToLocalDocumentSet(m,P);return u.documentOverlayCache.saveOverlays(x,N.batchId,T)})}).then(()=>({batchId:y.batchId,changes:Dv(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Te(ae)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Zi(r,s.changes),await _l(r.remoteStore)}catch(s){const i=dd(s,"Failed to persist write");n.reject(i)}}async function f0(t,e){const n=J(t);try{const r=await bS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ce(o.va):s.removedDocuments.size>0&&(ce(o.va),o.va=!1))}),await Zi(n,r,e)}catch(r){await Ki(r)}}function km(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=J(o);u.onlineState=l;let d=!1;u.queries.forEach((p,m)=>{for(const y of m.j_)y.Z_(l)&&(d=!0)}),d&&fd(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function EI(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Te(K.comparator);o=o.insert(i,nt.newNoDocument(i,X.min()));const l=te().add(i),u=new gl(X.min(),new Map,new Te(ae),o,l);await f0(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),pd(r)}else await zc(r.localStore,e,!1).then(()=>$c(r,e,n)).catch(Ki)}async function xI(t,e){const n=J(t),r=e.batch.batchId;try{const s=await NS(n.localStore,e);m0(n,r,null),p0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zi(n,s)}catch(s){await Ki(s)}}async function TI(t,e,n){const r=J(t);try{const s=await function(o,l){const u=J(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(ce(m!==null),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);m0(r,e,n),p0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Zi(r,s)}catch(s){await Ki(s)}}function p0(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function m0(t,e,n){const r=J(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function $c(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||g0(t,r)})}function g0(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ad(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),pd(t))}function Pm(t,e,n){for(const r of n)r instanceof c0?(t.La.addReference(r.key,e),SI(t,r)):r instanceof h0?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||g0(t,r.key)):Y()}function SI(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),pd(t))}function pd(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(ge.fromString(e)),r=t.qa.next();t.Na.set(r,new fI(n)),t.Oa=t.Oa.insert(n,r),s0(t.remoteStore,new Rn(Yt(Zh(n.path)),r,"TargetPurposeLimboResolution",Qh.oe))}}async function Zi(t,e,n){const r=J(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=od.Wi(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const p=J(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>L.forEach(d,y=>L.forEach(y.$i,x=>p.persistence.referenceDelegate.addReference(m,y.targetId,x)).next(()=>L.forEach(y.Ui,x=>p.persistence.referenceDelegate.removeReference(m,y.targetId,x)))))}catch(m){if(!Gi(m))throw m;W("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const y=m.targetId;if(!m.fromCache){const x=p.os.get(y),I=x.snapshotVersion,P=x.withLastLimboFreeSnapshotVersion(I);p.os=p.os.insert(y,P)}}}(r.localStore,i))}async function II(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await e0(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new H(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Zi(n,r.hs)}}function AI(t,e){const n=J(t),r=n.Na.get(e);if(r&&r.va)return te().add(r.key);{let s=te();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function y0(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=f0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EI.bind(null,e),e.Ca.d_=lI.bind(null,e.eventManager),e.Ca.$a=uI.bind(null,e.eventManager),e}function CI(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TI.bind(null,e),e}class qa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return RS(this.persistence,new kS,e.initialUser,this.serializer)}Ga(e){return new IS(id.Zr,this.serializer)}Wa(e){return new OS}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qa.provider={build:()=>new qa};class Hc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>km(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=II.bind(null,this.syncEngine),await rI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iI}()}createDatastore(e){const n=yl(e.databaseInfo.databaseId),r=function(i){return new zS(i)}(e.databaseInfo);return function(i,o,l,u){return new HS(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new WS(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>km(this.syncEngine,n,0),function(){return Tm.D()?new Tm:new LS}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,p){const m=new pI(s,i,o,l,u,d);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=J(s);W("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ji(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Hc.provider={build:()=>new Hc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):gn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=et.UNAUTHENTICATED,this.clientId=_v.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=dd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ru(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await e0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Rm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await RI(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Sm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Sm(e.remoteStore,s)),t._onlineComponents=e}async function RI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ru(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;us("Error using user provided cache. Falling back to memory cache: "+n),await Ru(t,new qa)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await Ru(t,new qa);return t._offlineComponents}async function v0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Rm(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Rm(t,new Hc))),t._onlineComponents}function NI(t){return v0(t).then(e=>e.syncEngine)}async function Nm(t){const e=await v0(t),n=e.eventManager;return n.onListen=mI.bind(null,e.syncEngine),n.onUnlisten=vI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_I.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t,e,n){if(!n)throw new H(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bI(t,e,n,r){if(e===!0&&r===!0)throw new H(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Dm(t){if(!K.isDocumentKey(t))throw new H(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jm(t){if(K.isDocumentKey(t))throw new H(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wl(t);throw new H(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class El{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new G1;switch(r.type){case"firstParty":return new Z1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=bm.get(n);r&&(W("ComponentProvider","Removing Datastore"),bm.delete(n),r.terminate())}(this),Promise.resolve()}}function DI(t,e,n,r={}){var s;const i=(t=cn(t,El))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&us("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=et.MOCK_USER;else{l=kx(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new H(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new et(d)}t._authCredentials=new Y1(new vv(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ar(this.firestore,e,this._query)}}class _t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}}class zn extends Ar{constructor(e,n,r){super(e,n,Zh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new K(e))}withConverter(e){return new zn(this.firestore,e,this._path)}}function eo(t,e,...n){if(t=Vt(t),w0("collection","path",e),t instanceof El){const r=ge.fromString(e,...n);return jm(r),new zn(t,null,r)}{if(!(t instanceof _t||t instanceof zn))throw new H(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return jm(r),new zn(t.firestore,null,r)}}function ut(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=_v.newId()),w0("doc","path",e),t instanceof El){const r=ge.fromString(e,...n);return Dm(r),new _t(t,null,new K(r))}{if(!(t instanceof _t||t instanceof zn))throw new H(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return Dm(r),new _t(t.firestore,t instanceof zn?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new n0(this,"async_queue_retry"),this.Vu=()=>{const r=Pu();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Pu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Pu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new dr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Gi(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw gn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=hd.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Om(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Er extends El{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Mm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mm(e),this._firestoreClient=void 0,await e}}}function jI(t,e){const n=typeof t=="object"?t:O1(),r=typeof t=="string"?t:"(default)",s=D1(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Ax("firestore");i&&DI(s,...i)}return s}function md(t){if(t._terminated)throw new H(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||VI(t),t._firestoreClient}function VI(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,p){return new dT(l,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,_0(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new PI(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gs(Qe.fromBase64String(e))}catch(n){throw new H(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gs(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=/^__.*__$/;class OI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yi(e,this.data,n,this.fieldTransforms)}}class E0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function x0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class xl{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new xl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Wa(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(x0(this.Cu)&&MI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class LI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yl(e)}Qu(e,n,r,s=!1){return new xl({Cu:e,methodName:n,qu:r,path:$e.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tl(t){const e=t._freezeSettings(),n=yl(t._databaseId);return new LI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function T0(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);wd("Data must be an object, but it was:",o,r);const l=A0(r,o);let u,d;if(i.merge)u=new St(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const y=qc(e,m,n);if(!o.contains(y))throw new H(V.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);k0(p,y)||p.push(y)}u=new St(p),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new OI(new ft(l),u,d)}class Sl extends no{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sl}}function FI(t,e,n){return new xl({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vd extends no{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=FI(this,e,!0),r=this.Ku.map(i=>Cs(i,n)),s=new fs(r);return new zv(e.path,s)}isEqual(e){return e instanceof vd&&Oa(this.Ku,e.Ku)}}class _d extends no{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Bi(e.serializer,Mv(e.serializer,this.$u));return new zv(e.path,n)}isEqual(e){return e instanceof _d&&this.$u===e.$u}}function S0(t,e,n,r){const s=t.Qu(1,e,n);wd("Data must be an object, but it was:",s,r);const i=[],o=ft.empty();Sr(r,(u,d)=>{const p=Ed(e,u,n);d=Vt(d);const m=s.Nu(p);if(d instanceof Sl)i.push(p);else{const y=Cs(d,m);y!=null&&(i.push(p),o.set(p,y))}});const l=new St(i);return new E0(o,l,s.fieldTransforms)}function I0(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[qc(e,r,n)],u=[s];if(i.length%2!=0)throw new H(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)l.push(qc(e,i[y])),u.push(i[y+1]);const d=[],p=ft.empty();for(let y=l.length-1;y>=0;--y)if(!k0(d,l[y])){const x=l[y];let I=u[y];I=Vt(I);const P=o.Nu(x);if(I instanceof Sl)d.push(x);else{const N=Cs(I,P);N!=null&&(d.push(x),p.set(x,N))}}const m=new St(d);return new E0(p,m,o.fieldTransforms)}function UI(t,e,n,r=!1){return Cs(n,t.Qu(r?4:3,e))}function Cs(t,e){if(C0(t=Vt(t)))return wd("Unsupported field value:",e,t),A0(t,e);if(t instanceof no)return function(r,s){if(!x0(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Cs(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Mv(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ve.fromDate(r);return{timestampValue:$a(s.serializer,i)}}if(r instanceof Ve){const i=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$a(s.serializer,i)}}if(r instanceof gd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gs)return{bytesValue:Qv(s.serializer,r._byteString)};if(r instanceof _t){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof yd)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return ed(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${wl(r)}`)}(t,e)}function A0(t,e){const n={};return wv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sr(t,(r,s)=>{const i=Cs(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function C0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof gd||t instanceof gs||t instanceof _t||t instanceof no||t instanceof yd)}function wd(t,e,n){if(!C0(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=wl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function qc(t,e,n){if((e=Vt(e))instanceof to)return e._internalPath;if(typeof e=="string")return Ed(t,e);throw Wa("Field path arguments must be of type string or ",t,!1,void 0,n)}const zI=new RegExp("[~\\*/\\[\\]]");function Ed(t,e,n){if(e.search(zI)>=0)throw Wa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new to(...e.split("."))._internalPath}catch{throw Wa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wa(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new H(V.INVALID_ARGUMENT,l+t+u)}function k0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BI extends P0{data(){return super.data()}}function xd(t,e){return typeof e=="string"?Ed(t,e):e instanceof to?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Td{}class R0 extends Td{}function ro(t,e,...n){let r=[];e instanceof Td&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Id).length,l=i.filter(u=>u instanceof Sd).length;if(o>1||o>0&&l>0)throw new H(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Sd extends R0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sd(e,n,r)}_apply(e){const n=this._parse(e);return N0(e._query,n),new Ar(e.firestore,e.converter,Vc(e._query,n))}_parse(e){const n=Tl(e.firestore);return function(i,o,l,u,d,p,m){let y;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new H(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Fm(m,p);const x=[];for(const I of m)x.push(Lm(u,i,I));y={arrayValue:{values:x}}}else y=Lm(u,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Fm(m,p),y=UI(l,o,m,p==="in"||p==="not-in");return be.create(d,p,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Id extends Td{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Id(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ht.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)N0(o,u),o=Vc(o,u)}(e._query,n),new Ar(e.firestore,e.converter,Vc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ad extends R0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ad(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new H(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new H(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ui(i,o)}(e._query,this._field,this._direction);return new Ar(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ss(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ys(t,e="asc"){const n=e,r=xd("orderBy",t);return Ad._create(r,n)}function Lm(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new H(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pv(e)&&n.indexOf("/")!==-1)throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ge.fromString(n));if(!K.isDocumentKey(r))throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sm(t,new K(r))}if(n instanceof _t)return sm(t,n._key);throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wl(n)}.`)}function Fm(t,e){if(!Array.isArray(t)||t.length===0)throw new H(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function N0(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class HI{convertValue(e,n="none"){switch(wr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Sr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ke(o.doubleValue));return new yd(i)}convertGeoPoint(e){return new gd(ke(e.latitude),ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oi(e));default:return null}}convertTimestamp(e){const n=qn(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ge.fromString(e);ce(Zv(r));const s=new Li(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class D0 extends P0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ca(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ca extends D0{data(e={}){return super.data(e)}}class qI{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ri(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ca(this._firestore,this._userDataWriter,r.key,r,new ri(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new ca(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ri(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new ca(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ri(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:WI(l.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function WI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}class j0 extends HI{constructor(e){super(),this.firestore=e}convertBytes(e){return new gs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function vs(t,e,n,...r){t=cn(t,_t);const s=cn(t.firestore,Er),i=Tl(s);let o;return o=typeof(e=Vt(e))=="string"||e instanceof to?I0(i,"updateDoc",t._key,e,n,r):S0(i,"updateDoc",t._key,e),Il(s,[o.toMutation(t._key,vt.exists(!0))])}function Cd(t){return Il(cn(t.firestore,Er),[new ml(t._key,vt.none())])}function so(t,e){const n=cn(t.firestore,Er),r=ut(t),s=b0(t.converter,e);return Il(n,[T0(Tl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,vt.exists(!1))]).then(()=>r)}function io(t,...e){var n,r,s;t=Vt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Om(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Om(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,p;if(t instanceof _t)d=cn(t.firestore,Er),p=Zh(t._key.path),u={next:m=>{e[o]&&e[o](QI(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=cn(t,Ar);d=cn(m.firestore,Er),p=m._query;const y=new j0(d);u={next:x=>{e[o]&&e[o](new qI(d,y,m,x))},error:e[o+1],complete:e[o+2]},$I(t._query)}return function(y,x,I,P){const N=new kI(P),T=new cI(x,N,I);return y.asyncQueue.enqueueAndForget(async()=>oI(await Nm(y),T)),()=>{N.Za(),y.asyncQueue.enqueueAndForget(async()=>aI(await Nm(y),T))}}(md(d),p,l,u)}function Il(t,e){return function(r,s){const i=new dr;return r.asyncQueue.enqueueAndForget(async()=>wI(await NI(r),s,i)),i.promise}(md(t),e)}function QI(t,e,n){const r=n.docs.get(e._key),s=new j0(t);return new D0(t,s,e._key,r,new ri(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Tl(e)}set(e,n,r){this._verifyNotCommitted();const s=Nu(e,this._firestore),i=b0(s.converter,n,r),o=T0(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,vt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Nu(e,this._firestore);let o;return o=typeof(n=Vt(n))=="string"||n instanceof to?I0(this._dataReader,"WriteBatch.update",i._key,n,r,s):S0(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,vt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Nu(e,this._firestore);return this._mutations=this._mutations.concat(new ml(n._key,vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new H(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nu(t,e){if((t=Vt(t)).firestore!==e)throw new H(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function GI(...t){return new vd("arrayUnion",t)}function YI(t){return new _d("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(t){return md(t=cn(t,Er)),new KI(t,e=>Il(t,e))}(function(e,n=!0){(function(s){Ts=s})(M1),Fa(new ji("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Er(new X1(r.getProvider("auth-internal")),new tT(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new H(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Li(d.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),es(Zp,"4.7.3",e),es(Zp,"4.7.3","esm2017")})();const XI={apiKey:"AIzaSyB6-Z_XRfCHWQ3ujGzkj4ck1WtI9gX6O_k",authDomain:"cafestesiaapp.firebaseapp.com",projectId:"cafestesiaapp",storageBucket:"cafestesiaapp.firebasestorage.app",messagingSenderId:"639191492553",appId:"1:639191492553:web:dc6ce00f5622dc686faa18",measurementId:"G-Z52JP10C1R"},JI=uv(XI),Me=jI(JI),ha=eo(Me,"tasks"),ZI=async()=>{console.log("Seeding initial tasks to Firestore...");const t=oo(Me);Zy.forEach(e=>{const n=ut(ha);t.set(n,e)}),await t.commit(),console.log("Initial tasks seeded.")},e2=()=>{const[t,e]=O.useState([]);return O.useEffect(()=>{const o=ro(ha,ys("date"),ys("time")),l=io(o,u=>{if(u.empty&&Zy.length>0){ZI();return}const d=u.docs.map(p=>({id:p.id,...p.data()}));e(d)},u=>{console.error("Error fetching Kanban tasks:",u)});return()=>l()},[]),{tasks:t,updateTaskStatus:async(o,l)=>{const u=ut(Me,"tasks",o);try{await vs(u,{status:l})}catch(d){console.error("Error updating task status:",d)}},addTask:async o=>{try{await so(ha,{...o,status:"todo"})}catch(l){console.error("Error adding task:",l)}},addMultipleTasks:async o=>{try{const l=oo(Me);o.forEach(u=>{const d=ut(ha);l.set(d,{...u,status:"todo"})}),await l.commit()}catch(l){console.error("Error adding multiple tasks:",l)}},updateTask:async o=>{const{id:l,...u}=o,d=ut(Me,"tasks",l);try{await vs(d,u)}catch(p){console.error("Error updating task:",p)}}}},Wc=eo(Me,"inventory"),t2=async()=>{console.log("Seeding initial inventory to Firestore...");const t=oo(Me);ev.forEach(e=>{const n=ut(Wc);t.set(n,{...e,purchaseHistory:[]})}),await t.commit(),console.log("Initial inventory seeded.")},n2=()=>{const[t,e]=O.useState([]);return O.useEffect(()=>{const o=ro(Wc,ys("name")),l=io(o,u=>{if(u.empty&&ev.length>0){t2();return}const d=u.docs.map(p=>({id:p.id,...p.data()}));e(d)},u=>{console.error("Error fetching inventory items:",u)});return()=>l()},[]),{items:t,addItem:async o=>{try{await so(Wc,{...o,purchaseHistory:[]})}catch(l){console.error("Error adding inventory item:",l)}},updateItem:async o=>{const{id:l,...u}=o,d=ut(Me,"inventory",l);try{await vs(d,u)}catch(p){console.error("Error updating item:",p)}},deleteItem:async o=>{const l=ut(Me,"inventory",o);try{await Cd(l)}catch(u){console.error("Error deleting item:",u)}},recordStockChange:async({itemId:o,change:l,purchaseDetails:u})=>{const d=ut(Me,"inventory",o);try{const p={currentStock:YI(l)};if(u&&l>0){const m={id:`pur-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,date:new Date().toISOString(),quantity:l,totalPrice:u.totalPrice,providerName:u.providerName};p.purchaseHistory=GI(m)}await vs(d,p)}catch(p){console.error("Error recording stock change:",p)}}}},Qc=eo(Me,"providers"),V0=[{name:"Proveedor A"},{name:"Proveedor B"},{name:"Proveedor C"},{name:"Supermercado"},{name:"Tostador Local"}],r2=async()=>{console.log("Seeding initial providers to Firestore...");const t=oo(Me);V0.forEach(e=>{const n=ut(Qc);t.set(n,e)}),await t.commit(),console.log("Initial providers seeded.")},s2=()=>{const[t,e]=O.useState([]);return O.useEffect(()=>{const i=ro(Qc,ys("name")),o=io(i,l=>{if(l.empty&&V0.length>0){r2();return}const u=l.docs.map(d=>({id:d.id,...d.data()}));e(u)},l=>{console.error("Error fetching providers:",l)});return()=>o()},[]),{providers:t,addProvider:async i=>{try{await so(Qc,i)}catch(o){console.error("Error adding provider:",o)}},updateProvider:async i=>{const{id:o,...l}=i,u=ut(Me,"providers",o);try{await vs(u,l)}catch(d){console.error("Error updating provider:",d)}},deleteProvider:async i=>{const o=ut(Me,"providers",i);try{await Cd(o)}catch(l){console.error("Error deleting provider:",l)}}}},i2=({isOpen:t,onClose:e,onSave:n,onDelete:r,provider:s})=>{const[i,o]=O.useState("");O.useEffect(()=>{t&&o((s==null?void 0:s.name)||"")},[t,s]);const l=d=>{if(d.preventDefault(),!i.trim())return;const p={name:i.trim()};n(s?{...p,id:s.id}:p),e()},u=()=>{s&&window.confirm(`Ests seguro de que quieres eliminar al proveedor "${s.name}"?`)&&(r(s.id),e())};return c.jsx(_n,{isOpen:t,onClose:e,title:s?"Editar Proveedor":"Aadir Proveedor",children:c.jsxs("form",{onSubmit:l,className:"flex flex-col gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre del Proveedor"}),c.jsx("input",{type:"text",value:i,onChange:d=>o(d.target.value),required:!0,autoFocus:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"flex justify-between items-center mt-4",children:[c.jsx("div",{children:s&&c.jsx("button",{type:"button",onClick:u,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Eliminar"})}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})]})})},o2=({isOpen:t,onClose:e,onSave:n,onDelete:r,category:s})=>{const[i,o]=O.useState("");O.useEffect(()=>{t&&o((s==null?void 0:s.name)||"")},[t,s]);const l=d=>{if(d.preventDefault(),!i.trim())return;const p={name:i.trim()};n(s?{...p,id:s.id}:p),e()},u=()=>{s&&window.confirm(`Ests seguro de que quieres eliminar la categora "${s.name}"?`)&&(r(s.id),e())};return c.jsx(_n,{isOpen:t,onClose:e,title:s?"Editar Categora":"Aadir Categora",children:c.jsxs("form",{onSubmit:l,className:"flex flex-col gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre de la Categora"}),c.jsx("input",{type:"text",value:i,onChange:d=>o(d.target.value),required:!0,autoFocus:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"flex justify-between items-center mt-4",children:[c.jsx("div",{children:s&&c.jsx("button",{type:"button",onClick:u,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Eliminar"})}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})]})})},a2=({rating:t})=>c.jsx("div",{className:"flex",children:[...Array(5)].map((e,n)=>c.jsx(le,{name:"star",size:16,className:n<t?"text-yellow-400 fill-current":"text-gray-300"},n))}),l2=({isOpen:t,onClose:e,recipe:n,feedbackLog:r})=>{const s=[...r].sort((i,o)=>new Date(o.date).getTime()-new Date(i.date).getTime());return c.jsxs(_n,{isOpen:t,onClose:e,title:`Bitcora de: ${n.name}`,children:[c.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:s.length>0?c.jsx("div",{className:"space-y-4",children:s.map(i=>c.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:new Date(i.date).toLocaleString("es-ES",{dateStyle:"long",timeStyle:"short"})}),c.jsx(a2,{rating:i.rating})]}),c.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:i.notes||"Sin notas."})]},i.id))}):c.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay feedback registrado para esta receta todava."})}),c.jsx("div",{className:"flex justify-end mt-6",children:c.jsx("button",{onClick:e,className:"py-2 px-6 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cerrar"})})]})},u2=({providersHook:t,categoriesHook:e,recipeLogHook:n})=>{const[r,s]=O.useState("production"),{providers:i,addProvider:o,updateProvider:l,deleteProvider:u}=t,[d,p]=O.useState(!1),[m,y]=O.useState(null),{categories:x,addCategory:I,updateCategory:P,deleteCategory:N}=e,[T,_]=O.useState(!1),[k,D]=O.useState(null),{feedbackLog:F}=n,[M,E]=O.useState(null),g=Z=>{y(Z),p(!0)},w=()=>{y(null),p(!0)},S=Z=>{"id"in Z?l(Z):o(Z)},C=Z=>{D(Z),_(!0)},R=()=>{D(null),_(!0)},A=Z=>{"id"in Z?P(Z):I(Z)},ve=({tab:Z,label:Ce,icon:st})=>c.jsxs("button",{onClick:()=>s(Z),className:`flex items-center gap-2 py-3 px-4 text-sm md:text-base font-bold border-b-4 transition-colors ${r===Z?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-800"}`,children:[c.jsx(le,{name:st,size:18}),Ce]});return c.jsxs("div",{className:"p-4 md:p-6 bg-gray-50 h-full overflow-y-auto",children:[c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsx("div",{className:"border-b border-gray-200",children:c.jsxs("div",{className:"flex gap-4",children:[c.jsx(ve,{tab:"production",label:"Produccin",icon:"cake-slice"}),c.jsx(ve,{tab:"inventory",label:"Inventario",icon:"archive"}),c.jsx(ve,{tab:"operations",label:"Operaciones",icon:"clipboard-kanban"})]})}),c.jsxs("div",{className:"mt-6",children:[r==="production"&&c.jsxs("section",{children:[c.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-4",children:"Bitcora de Recetas"}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:c.jsx("ul",{className:"divide-y divide-gray-200",children:Object.values(ul).map(Z=>c.jsxs("li",{className:"p-4 flex justify-between items-center",children:[c.jsx("span",{className:"font-medium text-gray-800",children:Z.name}),c.jsx("button",{onClick:()=>E(Z),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Ver Historial"})]},Z.id))})})]}),r==="inventory"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("section",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-blue-700",children:"Proveedores de Inventario"}),c.jsxs("button",{onClick:w,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[c.jsx(le,{name:"plus-circle",size:16}),"Aadir Proveedor"]})]}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:c.jsx("ul",{className:"divide-y divide-gray-200",children:i.length>0?i.map(Z=>c.jsxs("li",{className:"p-4 flex justify-between items-center",children:[c.jsx("span",{className:"font-medium text-gray-800",children:Z.name}),c.jsx("button",{onClick:()=>g(Z),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Editar"})]},Z.id)):c.jsx("li",{className:"p-4 text-center text-gray-500",children:"No hay proveedores. Aade el primero!"})})})]}),c.jsxs("section",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-blue-700",children:"Categoras de Inventario"}),c.jsxs("button",{onClick:R,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[c.jsx(le,{name:"plus-circle",size:16}),"Aadir Categora"]})]}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:c.jsx("ul",{className:"divide-y divide-gray-200",children:x.length>0?x.map(Z=>c.jsxs("li",{className:"p-4 flex justify-between items-center",children:[c.jsx("span",{className:"font-medium text-gray-800",children:Z.name}),c.jsx("button",{onClick:()=>C(Z),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Editar"})]},Z.id)):c.jsx("li",{className:"p-4 text-center text-gray-500",children:"No hay categoras. Aade la primera!"})})})]})]}),r==="operations"&&c.jsxs("div",{className:"text-center py-16 text-gray-500 bg-white rounded-lg border border-gray-200 shadow-sm",children:[c.jsx("p",{className:"font-bold",children:"Prximamente"}),c.jsx("p",{children:"Aqu encontrars las configuraciones para las operaciones diarias."})]})]})]}),c.jsx(i2,{isOpen:d,onClose:()=>p(!1),onSave:S,onDelete:u,provider:m}),c.jsx(o2,{isOpen:T,onClose:()=>_(!1),onSave:A,onDelete:N,category:k}),M&&c.jsx(l2,{isOpen:!!M,onClose:()=>E(null),recipe:M,feedbackLog:F.filter(Z=>Z.recipeId===M.id)})]})},M0="productionState_v2",c2=()=>{try{const t=localStorage.getItem(M0);if(t)return JSON.parse(t).map(n=>({...n,recipe:n.recipeId?ul[n.recipeId]:void 0}))}catch(t){console.error("Error loading production state:",t)}return[]},h2=t=>{try{const e=t.map(({recipe:n,...r})=>r);localStorage.setItem(M0,JSON.stringify(e))}catch(e){console.error("Error saving production state:",e)}},d2=()=>{const[t,e]=O.useState(c2),n=O.useRef(null),r=O.useCallback(()=>{n.current&&(clearInterval(n.current),n.current=null)},[]),s=O.useCallback(()=>{e(m=>{const y=Date.now();let x=!1;const I=m.map(P=>{if(P.state!=="running")return P;x=!0;const N=Math.round((y-P.lastTickTimestamp)/1e3),T=Math.max(0,P.stepTimeLeft-N),_=Math.max(0,P.totalTimeLeft-N);return T===0?{...P,stepTimeLeft:0,totalTimeLeft:_,state:"alarm",lastTickTimestamp:y}:{...P,stepTimeLeft:T,totalTimeLeft:_,lastTickTimestamp:y}});return x?I:m})},[]),i=O.useCallback(()=>{r(),n.current=window.setInterval(s,1e3)},[r,s]);O.useEffect(()=>{e(m=>{const y=Date.now();return m.map(x=>{if(x.state!=="running")return x;const I=Math.round((y-x.lastTickTimestamp)/1e3),P=Math.max(0,x.stepTimeLeft-I),N=Math.max(0,x.totalTimeLeft-I);return P===0?{...x,state:"alarm",stepTimeLeft:0,totalTimeLeft:N}:{...x,stepTimeLeft:P,totalTimeLeft:N,lastTickTimestamp:y}})})},[]),O.useEffect(()=>(h2(t),t.some(y=>y.state==="running")?i():r(),r),[t,i,r]);const o=O.useCallback(m=>{const y=ul[m];if(!y)return;const x={id:`baking-${Date.now()}`,name:y.name,recipeId:m,recipe:y,type:"baking",state:"paused",currentStepIndex:0,steps:y.steps,totalTime:y.totalDuration,totalTimeLeft:y.totalDuration,stepTimeLeft:y.steps[0].duration,lastTickTimestamp:Date.now()};e(I=>[...I,x])},[]),l=O.useCallback((m,y)=>{const x=[{instruction:y,duration:m,isPauseStep:!1}],I={id:`heating-${Date.now()}`,name:y,type:"heating",state:"paused",currentStepIndex:0,steps:x,totalTime:m,totalTimeLeft:m,stepTimeLeft:m,lastTickTimestamp:Date.now()};e(P=>[...P,I])},[]),u=O.useCallback(m=>{e(y=>y.map(x=>{if(x.id!==m)return x;if(x.state==="finished")return{...x,state:"paused"};if(x.currentStepIndex<x.steps.length-1){const I=x.currentStepIndex+1,P=x.steps[I];return{...x,state:"paused",currentStepIndex:I,stepTimeLeft:P.duration,lastTickTimestamp:Date.now()}}else return{...x,state:"finished",stepTimeLeft:0,lastTickTimestamp:Date.now()}}))},[]),d=O.useCallback(m=>{e(y=>y.map(x=>x.id!==m||x.state==="alarm"||x.state==="finished"?x:x.state==="running"?{...x,state:"paused"}:{...x,state:"running",lastTickTimestamp:Date.now()}))},[]),p=O.useCallback(m=>{e(y=>y.filter(x=>x.id!==m))},[]);return{processes:t,startBakingProcess:o,startHeatingProcess:l,advanceProcess:u,togglePauseProcess:d,cancelProcess:p}},Kc=eo(Me,"categories"),O0=[{name:"Secos"},{name:"Refrigerados"},{name:"Lcteos"},{name:"Bebidas"},{name:"Carnes"},{name:"Frutas y Verduras"}],f2=async()=>{console.log("Seeding initial categories to Firestore...");const t=oo(Me);O0.forEach(e=>{const n=ut(Kc);t.set(n,e)}),await t.commit(),console.log("Initial categories seeded.")},p2=()=>{const[t,e]=O.useState([]);return O.useEffect(()=>{const i=ro(Kc,ys("name")),o=io(i,l=>{if(l.empty&&O0.length>0){f2();return}const u=l.docs.map(d=>({id:d.id,...d.data()}));e(u)},l=>{console.error("Error fetching categories:",l)});return()=>o()},[]),{categories:t,addCategory:async i=>{try{await so(Kc,i)}catch(o){console.error("Error adding category:",o)}},updateCategory:async i=>{const{id:o,...l}=i,u=ut(Me,"categories",o);try{await vs(u,l)}catch(d){console.error("Error updating category:",d)}},deleteCategory:async i=>{const o=ut(Me,"categories",i);try{await Cd(o)}catch(l){console.error("Error deleting category:",l)}}}},Um=eo(Me,"recipeFeedback"),m2=()=>{const[t,e]=O.useState([]);return O.useEffect(()=>{const r=ro(Um,ys("date","desc")),s=io(r,i=>{const o=i.docs.map(l=>({id:l.id,...l.data()}));e(o)},i=>{console.error("Error fetching recipe feedback:",i)});return()=>s()},[]),{feedbackLog:t,addFeedback:async r=>{try{await so(Um,{...r,date:new Date().toISOString()})}catch(s){console.error("Error adding feedback:",s)}}}},g2="data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU",y2=()=>{const t=O.useRef(null),e=O.useCallback(()=>{t.current||(t.current=new Audio(g2))},[]);return{playAlert:O.useCallback(()=>{e(),t.current&&(t.current.currentTime=0,t.current.play().catch(r=>{console.warn("Audio playback failed:",r)}))},[e])}},v2=t=>{const e=new Date,[n,r]=t.split(":").map(Number),s=new Date;return s.setHours(n,r,0,0),Math.round((s.getTime()-e.getTime())/1e3/60)},_2=()=>{const[t,e]=O.useState(Ie.Baking),[n,r]=O.useState(!1),s=d2(),i=e2(),o=n2(),l=s2(),u=p2(),d=m2(),{playAlert:p}=y2(),{processes:m}=s,{tasks:y}=i,{items:x}=o,[I,P]=O.useState({}),N=O.useMemo(()=>{const g=new Date;return g.setMinutes(g.getMinutes()-g.getTimezoneOffset()),g.toISOString().split("T")[0]},[]);O.useEffect(()=>{const g=()=>{const S={};y.forEach(C=>{if(C.date===N&&C.status!=="done"){const R=v2(C.time);let A="normal";R<=0?A="due":R<=15&&(A="imminent"),S[C.id]={diff:R,status:A}}}),P(S)};g();const w=setInterval(g,1e4);return()=>clearInterval(w)},[y,N]);const T=O.useMemo(()=>y.filter(S=>S.date===N&&S.isCritical&&S.status!=="done"&&I[S.id]).map(S=>({task:S,diff:I[S.id].diff})).filter(({diff:S})=>S<=30&&S>=-15).sort((S,C)=>S.diff-C.diff),[y,I,N]),_=O.useRef(new Set);O.useEffect(()=>{m.forEach(g=>{const w=`proc-${g.id}`;g.state==="alarm"&&!_.current.has(w)?(p(),_.current.add(w)):g.state!=="alarm"&&_.current.has(w)&&_.current.delete(w)})},[m,p]),O.useEffect(()=>{const g=new Set(T.map(w=>`task-${w.task.id}`));g.forEach(w=>{_.current.has(w)||(p(),_.current.add(w))}),_.current.forEach(w=>{w.startsWith("task-")&&!g.has(w)&&_.current.delete(w)})},[T,p]);const k=O.useMemo(()=>T.slice(0,3),[T]),D=O.useMemo(()=>y.filter(g=>g.status==="inprogress"),[y]),F=O.useMemo(()=>x.filter(g=>g.currentStock<=g.minStock),[x]),M=()=>{switch(t){case Ie.Baking:return c.jsx(Fp,{productionHook:s,recipeLogHook:d});case Ie.Operations:return c.jsx(cx,{kanbanHook:i,criticalTasks:T});case Ie.Inventory:return c.jsx(gx,{inventoryHook:o,providers:l.providers,categories:u.categories});case Ie.Settings:return c.jsx(u2,{providersHook:l,categoriesHook:u,recipeLogHook:d});default:return c.jsx(Fp,{productionHook:s,recipeLogHook:d})}},E=()=>{switch(t){case Ie.Baking:return"Produccin de Pan";case Ie.Operations:return"Operaciones";case Ie.Inventory:return"Inventario";case Ie.Settings:return"Configuracin";default:return"Cafestesia"}};return c.jsx("div",{className:"w-full min-h-screen md:p-4 flex items-center justify-center bg-gray-100 text-gray-800",children:c.jsxs("div",{className:"app-container w-full h-screen max-w-5xl bg-white md:rounded-xl shadow-lg overflow-hidden relative border border-gray-200",children:[n&&c.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 z-40",onClick:()=>r(!1),"aria-hidden":"true"}),c.jsxs("div",{className:"grid md:grid-cols-[240px_1fr] h-full",children:[c.jsx(HE,{activeScreen:t,setActiveScreen:e,processes:m,urgentTasks:k,shoppingListItems:F,inProgressTasks:D,isOpen:n,onClose:()=>r(!1)}),c.jsxs("main",{className:"main-content flex flex-col overflow-y-auto h-full",children:[c.jsxs("header",{className:"main-content-header p-4 md:p-6 border-b border-gray-200 flex justify-between items-center flex-shrink-0",children:[c.jsx("button",{className:"md:hidden p-2 -ml-2 text-gray-600 hover:text-blue-600",onClick:()=>r(!0),children:c.jsx(le,{name:"menu",size:24})}),c.jsx("h2",{className:"text-xl md:text-3xl font-bold text-blue-600",children:E()}),c.jsx("div",{className:"md:hidden w-8"})," "]}),c.jsx("div",{className:"flex-grow relative",children:c.jsx("div",{className:"absolute inset-0 overflow-y-auto relative",children:M()})})]})]})]})})},L0=document.getElementById("root");if(!L0)throw new Error("Could not find root element to mount to");const w2=bu.createRoot(L0);w2.render(c.jsx(Zc.StrictMode,{children:c.jsx(_2,{})}));
