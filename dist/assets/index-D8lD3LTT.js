(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function g_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zm={exports:{}},Qa={},Bm={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $i=Symbol.for("react.element"),y_=Symbol.for("react.portal"),v_=Symbol.for("react.fragment"),__=Symbol.for("react.strict_mode"),w_=Symbol.for("react.profiler"),E_=Symbol.for("react.provider"),x_=Symbol.for("react.context"),T_=Symbol.for("react.forward_ref"),I_=Symbol.for("react.suspense"),S_=Symbol.for("react.memo"),A_=Symbol.for("react.lazy"),kf=Symbol.iterator;function C_(t){return t===null||typeof t!="object"?null:(t=kf&&t[kf]||t["@@iterator"],typeof t=="function"?t:null)}var $m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hm=Object.assign,qm={};function _s(t,e,n){this.props=t,this.context=e,this.refs=qm,this.updater=n||$m}_s.prototype.isReactComponent={};_s.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_s.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wm(){}Wm.prototype=_s.prototype;function Gc(t,e,n){this.props=t,this.context=e,this.refs=qm,this.updater=n||$m}var Yc=Gc.prototype=new Wm;Yc.constructor=Gc;Hm(Yc,_s.prototype);Yc.isPureReactComponent=!0;var Pf=Array.isArray,Qm=Object.prototype.hasOwnProperty,Xc={current:null},Km={key:!0,ref:!0,__self:!0,__source:!0};function Gm(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Qm.call(e,r)&&!Km.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:$i,type:t,key:i,ref:o,props:s,_owner:Xc.current}}function k_(t,e){return{$$typeof:$i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jc(t){return typeof t=="object"&&t!==null&&t.$$typeof===$i}function P_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rf=/\/+/g;function Gl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?P_(""+t.key):e.toString(36)}function Ko(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $i:case y_:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Gl(o,0):r,Pf(s)?(n="",t!=null&&(n=t.replace(Rf,"$&/")+"/"),Ko(s,e,n,"",function(d){return d})):s!=null&&(Jc(s)&&(s=k_(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Rf,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Pf(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Gl(i,l);o+=Ko(i,e,n,u,s)}else if(u=C_(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Gl(i,l++),o+=Ko(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ao(t,e,n){if(t==null)return t;var r=[],s=0;return Ko(t,r,"","",function(i){return e.call(n,i,s++)}),r}function R_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ut={current:null},Go={transition:null},N_={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:Go,ReactCurrentOwner:Xc};function Ym(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Ao,forEach:function(t,e,n){Ao(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ao(t,function(){e++}),e},toArray:function(t){return Ao(t,function(e){return e})||[]},only:function(t){if(!Jc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=_s;ee.Fragment=v_;ee.Profiler=w_;ee.PureComponent=Gc;ee.StrictMode=__;ee.Suspense=I_;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N_;ee.act=Ym;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Hm({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Xc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Qm.call(e,u)&&!Km.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:$i,type:t.type,key:s,ref:i,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:x_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:E_,_context:t},t.Consumer=t};ee.createElement=Gm;ee.createFactory=function(t){var e=Gm.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:T_,render:t}};ee.isValidElement=Jc;ee.lazy=function(t){return{$$typeof:A_,_payload:{_status:-1,_result:t},_init:R_}};ee.memo=function(t,e){return{$$typeof:S_,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Go.transition;Go.transition={};try{t()}finally{Go.transition=e}};ee.unstable_act=Ym;ee.useCallback=function(t,e){return ut.current.useCallback(t,e)};ee.useContext=function(t){return ut.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return ut.current.useDeferredValue(t)};ee.useEffect=function(t,e){return ut.current.useEffect(t,e)};ee.useId=function(){return ut.current.useId()};ee.useImperativeHandle=function(t,e,n){return ut.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return ut.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return ut.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return ut.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return ut.current.useReducer(t,e,n)};ee.useRef=function(t){return ut.current.useRef(t)};ee.useState=function(t){return ut.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return ut.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return ut.current.useTransition()};ee.version="18.3.1";Bm.exports=ee;var O=Bm.exports;const Zc=g_(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_=O,D_=Symbol.for("react.element"),V_=Symbol.for("react.fragment"),j_=Object.prototype.hasOwnProperty,M_=b_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O_={key:!0,ref:!0,__self:!0,__source:!0};function Xm(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)j_.call(e,r)&&!O_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:D_,type:t,key:i,ref:o,props:s,_owner:M_.current}}Qa.Fragment=V_;Qa.jsx=Xm;Qa.jsxs=Xm;zm.exports=Qa;var h=zm.exports,bu={},Jm={exports:{}},St={},Zm={exports:{}},eg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,K){var Z=B.length;B.push(K);e:for(;0<Z;){var ve=Z-1>>>1,ue=B[ve];if(0<s(ue,K))B[ve]=K,B[Z]=ue,Z=ve;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var K=B[0],Z=B.pop();if(Z!==K){B[0]=Z;e:for(var ve=0,ue=B.length,Ae=ue>>>1;ve<Ae;){var Jt=2*(ve+1)-1,Zt=B[Jt],en=Jt+1,tn=B[en];if(0>s(Zt,Z))en<ue&&0>s(tn,Zt)?(B[ve]=tn,B[en]=Z,ve=en):(B[ve]=Zt,B[Jt]=Z,ve=Jt);else if(en<ue&&0>s(tn,Z))B[ve]=tn,B[en]=Z,ve=en;else break e}}return K}function s(B,K){var Z=B.sortIndex-K.sortIndex;return Z!==0?Z:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],p=1,g=null,m=3,x=!1,A=!1,P=!1,b=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(B){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=B)r(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(d)}}function D(B){if(P=!1,C(B),!A)if(n(u)!==null)A=!0,Ct(F);else{var K=n(d);K!==null&&rt(D,K.startTime-B)}}function F(B,K){A=!1,P&&(P=!1,I(y),y=-1),x=!0;var Z=m;try{for(C(K),g=n(u);g!==null&&(!(g.expirationTime>K)||B&&!k());){var ve=g.callback;if(typeof ve=="function"){g.callback=null,m=g.priorityLevel;var ue=ve(g.expirationTime<=K);K=t.unstable_now(),typeof ue=="function"?g.callback=ue:g===n(u)&&r(u),C(K)}else r(u);g=n(u)}if(g!==null)var Ae=!0;else{var Jt=n(d);Jt!==null&&rt(D,Jt.startTime-K),Ae=!1}return Ae}finally{g=null,m=Z,x=!1}}var M=!1,E=null,y=-1,T=5,S=-1;function k(){return!(t.unstable_now()-S<T)}function R(){if(E!==null){var B=t.unstable_now();S=B;var K=!0;try{K=E(!0,B)}finally{K?w():(M=!1,E=null)}}else M=!1}var w;if(typeof _=="function")w=function(){_(R)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,J=G.port2;G.port1.onmessage=R,w=function(){J.postMessage(null)}}else w=function(){b(R,0)};function Ct(B){E=B,M||(M=!0,w())}function rt(B,K){y=b(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){A||x||(A=!0,Ct(F))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var Z=m;m=K;try{return B()}finally{m=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=m;m=B;try{return K()}finally{m=Z}},t.unstable_scheduleCallback=function(B,K,Z){var ve=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ve+Z:ve):Z=ve,B){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Z+ue,B={id:p++,callback:K,priorityLevel:B,startTime:Z,expirationTime:ue,sortIndex:-1},Z>ve?(B.sortIndex=Z,e(d,B),n(u)===null&&B===n(d)&&(P?(I(y),y=-1):P=!0,rt(D,Z-ve))):(B.sortIndex=ue,e(u,B),A||x||(A=!0,Ct(F))),B},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(B){var K=m;return function(){var Z=m;m=K;try{return B.apply(this,arguments)}finally{m=Z}}}})(eg);Zm.exports=eg;var L_=Zm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_=O,It=L_;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tg=new Set,yi={};function xr(t,e){ns(t,e),ns(t+"Capture",e)}function ns(t,e){for(yi[t]=e,t=0;t<e.length;t++)tg.add(e[t])}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Du=Object.prototype.hasOwnProperty,U_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nf={},bf={};function z_(t){return Du.call(bf,t)?!0:Du.call(Nf,t)?!1:U_.test(t)?bf[t]=!0:(Nf[t]=!0,!1)}function B_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $_(t,e,n,r){if(e===null||typeof e>"u"||B_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ct(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qe[t]=new ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qe[e]=new ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qe[t]=new ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qe[t]=new ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qe[t]=new ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qe[t]=new ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qe[t]=new ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qe[t]=new ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qe[t]=new ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var eh=/[\-:]([a-z])/g;function th(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(eh,th);qe[e]=new ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(eh,th);qe[e]=new ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(eh,th);qe[e]=new ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qe[t]=new ct(t,1,!1,t.toLowerCase(),null,!1,!1)});qe.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qe[t]=new ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function nh(t,e,n,r){var s=qe.hasOwnProperty(e)?qe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($_(e,n,s,r)&&(n=null),r||s===null?z_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vn=F_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Co=Symbol.for("react.element"),Mr=Symbol.for("react.portal"),Or=Symbol.for("react.fragment"),rh=Symbol.for("react.strict_mode"),Vu=Symbol.for("react.profiler"),ng=Symbol.for("react.provider"),rg=Symbol.for("react.context"),sh=Symbol.for("react.forward_ref"),ju=Symbol.for("react.suspense"),Mu=Symbol.for("react.suspense_list"),ih=Symbol.for("react.memo"),In=Symbol.for("react.lazy"),sg=Symbol.for("react.offscreen"),Df=Symbol.iterator;function zs(t){return t===null||typeof t!="object"?null:(t=Df&&t[Df]||t["@@iterator"],typeof t=="function"?t:null)}var Ee=Object.assign,Yl;function Ys(t){if(Yl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yl=e&&e[1]||""}return`
`+Yl+t}var Xl=!1;function Jl(t,e){if(!t||Xl)return"";Xl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Xl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ys(t):""}function H_(t){switch(t.tag){case 5:return Ys(t.type);case 16:return Ys("Lazy");case 13:return Ys("Suspense");case 19:return Ys("SuspenseList");case 0:case 2:case 15:return t=Jl(t.type,!1),t;case 11:return t=Jl(t.type.render,!1),t;case 1:return t=Jl(t.type,!0),t;default:return""}}function Ou(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Or:return"Fragment";case Mr:return"Portal";case Vu:return"Profiler";case rh:return"StrictMode";case ju:return"Suspense";case Mu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rg:return(t.displayName||"Context")+".Consumer";case ng:return(t._context.displayName||"Context")+".Provider";case sh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ih:return e=t.displayName||null,e!==null?e:Ou(t.type)||"Memo";case In:e=t._payload,t=t._init;try{return Ou(t(e))}catch{}}return null}function q_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ou(e);case 8:return e===rh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ig(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function W_(t){var e=ig(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ko(t){t._valueTracker||(t._valueTracker=W_(t))}function og(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ig(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function da(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lu(t,e){var n=e.checked;return Ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Vf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Bn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ag(t,e){e=e.checked,e!=null&&nh(t,"checked",e,!1)}function Fu(t,e){ag(t,e);var n=Bn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Uu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Uu(t,e.type,Bn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Uu(t,e,n){(e!=="number"||da(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xs=Array.isArray;function Kr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Bn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function zu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Xs(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Bn(n)}}function lg(t,e){var n=Bn(e.value),r=Bn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Of(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ug(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ug(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Po,cg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Po=Po||document.createElement("div"),Po.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Po.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q_=["Webkit","ms","Moz","O"];Object.keys(si).forEach(function(t){Q_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),si[e]=si[t]})});function hg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||si.hasOwnProperty(t)&&si[t]?(""+e).trim():e+"px"}function dg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var K_=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $u(t,e){if(e){if(K_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Hu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qu=null;function oh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wu=null,Gr=null,Yr=null;function Lf(t){if(t=Wi(t)){if(typeof Wu!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Ja(e),Wu(t.stateNode,t.type,e))}}function fg(t){Gr?Yr?Yr.push(t):Yr=[t]:Gr=t}function pg(){if(Gr){var t=Gr,e=Yr;if(Yr=Gr=null,Lf(t),e)for(t=0;t<e.length;t++)Lf(e[t])}}function mg(t,e){return t(e)}function gg(){}var Zl=!1;function yg(t,e,n){if(Zl)return t(e,n);Zl=!0;try{return mg(t,e,n)}finally{Zl=!1,(Gr!==null||Yr!==null)&&(gg(),pg())}}function _i(t,e){var n=t.stateNode;if(n===null)return null;var r=Ja(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Qu=!1;if(hn)try{var Bs={};Object.defineProperty(Bs,"passive",{get:function(){Qu=!0}}),window.addEventListener("test",Bs,Bs),window.removeEventListener("test",Bs,Bs)}catch{Qu=!1}function G_(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var ii=!1,fa=null,pa=!1,Ku=null,Y_={onError:function(t){ii=!0,fa=t}};function X_(t,e,n,r,s,i,o,l,u){ii=!1,fa=null,G_.apply(Y_,arguments)}function J_(t,e,n,r,s,i,o,l,u){if(X_.apply(this,arguments),ii){if(ii){var d=fa;ii=!1,fa=null}else throw Error(U(198));pa||(pa=!0,Ku=d)}}function Tr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ff(t){if(Tr(t)!==t)throw Error(U(188))}function Z_(t){var e=t.alternate;if(!e){if(e=Tr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ff(s),t;if(i===r)return Ff(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function _g(t){return t=Z_(t),t!==null?wg(t):null}function wg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wg(t);if(e!==null)return e;t=t.sibling}return null}var Eg=It.unstable_scheduleCallback,Uf=It.unstable_cancelCallback,ew=It.unstable_shouldYield,tw=It.unstable_requestPaint,ke=It.unstable_now,nw=It.unstable_getCurrentPriorityLevel,ah=It.unstable_ImmediatePriority,xg=It.unstable_UserBlockingPriority,ma=It.unstable_NormalPriority,rw=It.unstable_LowPriority,Tg=It.unstable_IdlePriority,Ka=null,Qt=null;function sw(t){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Ka,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:aw,iw=Math.log,ow=Math.LN2;function aw(t){return t>>>=0,t===0?32:31-(iw(t)/ow|0)|0}var Ro=64,No=4194304;function Js(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ga(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Js(l):(i&=o,i!==0&&(r=Js(i)))}else o=n&~s,o!==0?r=Js(o):i!==0&&(r=Js(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ut(e),s=1<<n,r|=t[n],e&=~s;return r}function lw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ut(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=lw(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Gu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ig(){var t=Ro;return Ro<<=1,!(Ro&4194240)&&(Ro=64),t}function eu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ut(e),t[e]=n}function cw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ut(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function lh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ut(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ae=0;function Sg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ag,uh,Cg,kg,Pg,Yu=!1,bo=[],Nn=null,bn=null,Dn=null,wi=new Map,Ei=new Map,An=[],hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zf(t,e){switch(t){case"focusin":case"focusout":Nn=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":wi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ei.delete(e.pointerId)}}function $s(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Wi(e),e!==null&&uh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function dw(t,e,n,r,s){switch(e){case"focusin":return Nn=$s(Nn,t,e,n,r,s),!0;case"dragenter":return bn=$s(bn,t,e,n,r,s),!0;case"mouseover":return Dn=$s(Dn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return wi.set(i,$s(wi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ei.set(i,$s(Ei.get(i)||null,t,e,n,r,s)),!0}return!1}function Rg(t){var e=ir(t.target);if(e!==null){var n=Tr(e);if(n!==null){if(e=n.tag,e===13){if(e=vg(n),e!==null){t.blockedOn=e,Pg(t.priority,function(){Cg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);qu=r,n.target.dispatchEvent(r),qu=null}else return e=Wi(n),e!==null&&uh(e),t.blockedOn=n,!1;e.shift()}return!0}function Bf(t,e,n){Yo(t)&&n.delete(e)}function fw(){Yu=!1,Nn!==null&&Yo(Nn)&&(Nn=null),bn!==null&&Yo(bn)&&(bn=null),Dn!==null&&Yo(Dn)&&(Dn=null),wi.forEach(Bf),Ei.forEach(Bf)}function Hs(t,e){t.blockedOn===e&&(t.blockedOn=null,Yu||(Yu=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,fw)))}function xi(t){function e(s){return Hs(s,t)}if(0<bo.length){Hs(bo[0],t);for(var n=1;n<bo.length;n++){var r=bo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nn!==null&&Hs(Nn,t),bn!==null&&Hs(bn,t),Dn!==null&&Hs(Dn,t),wi.forEach(e),Ei.forEach(e),n=0;n<An.length;n++)r=An[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<An.length&&(n=An[0],n.blockedOn===null);)Rg(n),n.blockedOn===null&&An.shift()}var Xr=vn.ReactCurrentBatchConfig,ya=!0;function pw(t,e,n,r){var s=ae,i=Xr.transition;Xr.transition=null;try{ae=1,ch(t,e,n,r)}finally{ae=s,Xr.transition=i}}function mw(t,e,n,r){var s=ae,i=Xr.transition;Xr.transition=null;try{ae=4,ch(t,e,n,r)}finally{ae=s,Xr.transition=i}}function ch(t,e,n,r){if(ya){var s=Xu(t,e,n,r);if(s===null)cu(t,e,r,va,n),zf(t,r);else if(dw(s,t,e,n,r))r.stopPropagation();else if(zf(t,r),e&4&&-1<hw.indexOf(t)){for(;s!==null;){var i=Wi(s);if(i!==null&&Ag(i),i=Xu(t,e,n,r),i===null&&cu(t,e,r,va,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else cu(t,e,r,null,n)}}var va=null;function Xu(t,e,n,r){if(va=null,t=oh(r),t=ir(t),t!==null)if(e=Tr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return va=t,null}function Ng(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nw()){case ah:return 1;case xg:return 4;case ma:case rw:return 16;case Tg:return 536870912;default:return 16}default:return 16}}var kn=null,hh=null,Xo=null;function bg(){if(Xo)return Xo;var t,e=hh,n=e.length,r,s="value"in kn?kn.value:kn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Xo=s.slice(t,1<r?1-r:void 0)}function Jo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Do(){return!0}function $f(){return!1}function At(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Do:$f,this.isPropagationStopped=$f,this}return Ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Do)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Do)},persist:function(){},isPersistent:Do}),e}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dh=At(ws),qi=Ee({},ws,{view:0,detail:0}),gw=At(qi),tu,nu,qs,Ga=Ee({},qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qs&&(qs&&t.type==="mousemove"?(tu=t.screenX-qs.screenX,nu=t.screenY-qs.screenY):nu=tu=0,qs=t),tu)},movementY:function(t){return"movementY"in t?t.movementY:nu}}),Hf=At(Ga),yw=Ee({},Ga,{dataTransfer:0}),vw=At(yw),_w=Ee({},qi,{relatedTarget:0}),ru=At(_w),ww=Ee({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),Ew=At(ww),xw=Ee({},ws,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tw=At(xw),Iw=Ee({},ws,{data:0}),qf=At(Iw),Sw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Aw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Cw[t])?!!e[t]:!1}function fh(){return kw}var Pw=Ee({},qi,{key:function(t){if(t.key){var e=Sw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Aw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fh,charCode:function(t){return t.type==="keypress"?Jo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Rw=At(Pw),Nw=Ee({},Ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wf=At(Nw),bw=Ee({},qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fh}),Dw=At(bw),Vw=Ee({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),jw=At(Vw),Mw=Ee({},Ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ow=At(Mw),Lw=[9,13,27,32],ph=hn&&"CompositionEvent"in window,oi=null;hn&&"documentMode"in document&&(oi=document.documentMode);var Fw=hn&&"TextEvent"in window&&!oi,Dg=hn&&(!ph||oi&&8<oi&&11>=oi),Qf=" ",Kf=!1;function Vg(t,e){switch(t){case"keyup":return Lw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lr=!1;function Uw(t,e){switch(t){case"compositionend":return jg(e);case"keypress":return e.which!==32?null:(Kf=!0,Qf);case"textInput":return t=e.data,t===Qf&&Kf?null:t;default:return null}}function zw(t,e){if(Lr)return t==="compositionend"||!ph&&Vg(t,e)?(t=bg(),Xo=hh=kn=null,Lr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dg&&e.locale!=="ko"?null:e.data;default:return null}}var Bw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Bw[t.type]:e==="textarea"}function Mg(t,e,n,r){fg(r),e=_a(e,"onChange"),0<e.length&&(n=new dh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ai=null,Ti=null;function $w(t){Qg(t,0)}function Ya(t){var e=zr(t);if(og(e))return t}function Hw(t,e){if(t==="change")return e}var Og=!1;if(hn){var su;if(hn){var iu="oninput"in document;if(!iu){var Yf=document.createElement("div");Yf.setAttribute("oninput","return;"),iu=typeof Yf.oninput=="function"}su=iu}else su=!1;Og=su&&(!document.documentMode||9<document.documentMode)}function Xf(){ai&&(ai.detachEvent("onpropertychange",Lg),Ti=ai=null)}function Lg(t){if(t.propertyName==="value"&&Ya(Ti)){var e=[];Mg(e,Ti,t,oh(t)),yg($w,e)}}function qw(t,e,n){t==="focusin"?(Xf(),ai=e,Ti=n,ai.attachEvent("onpropertychange",Lg)):t==="focusout"&&Xf()}function Ww(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ya(Ti)}function Qw(t,e){if(t==="click")return Ya(e)}function Kw(t,e){if(t==="input"||t==="change")return Ya(e)}function Gw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bt=typeof Object.is=="function"?Object.is:Gw;function Ii(t,e){if(Bt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Du.call(e,s)||!Bt(t[s],e[s]))return!1}return!0}function Jf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zf(t,e){var n=Jf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jf(n)}}function Fg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Fg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ug(){for(var t=window,e=da();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=da(t.document)}return e}function mh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Yw(t){var e=Ug(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Fg(n.ownerDocument.documentElement,n)){if(r!==null&&mh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Zf(n,i);var o=Zf(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Xw=hn&&"documentMode"in document&&11>=document.documentMode,Fr=null,Ju=null,li=null,Zu=!1;function ep(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zu||Fr==null||Fr!==da(r)||(r=Fr,"selectionStart"in r&&mh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),li&&Ii(li,r)||(li=r,r=_a(Ju,"onSelect"),0<r.length&&(e=new dh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fr)))}function Vo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ur={animationend:Vo("Animation","AnimationEnd"),animationiteration:Vo("Animation","AnimationIteration"),animationstart:Vo("Animation","AnimationStart"),transitionend:Vo("Transition","TransitionEnd")},ou={},zg={};hn&&(zg=document.createElement("div").style,"AnimationEvent"in window||(delete Ur.animationend.animation,delete Ur.animationiteration.animation,delete Ur.animationstart.animation),"TransitionEvent"in window||delete Ur.transitionend.transition);function Xa(t){if(ou[t])return ou[t];if(!Ur[t])return t;var e=Ur[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zg)return ou[t]=e[n];return t}var Bg=Xa("animationend"),$g=Xa("animationiteration"),Hg=Xa("animationstart"),qg=Xa("transitionend"),Wg=new Map,tp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qn(t,e){Wg.set(t,e),xr(e,[t])}for(var au=0;au<tp.length;au++){var lu=tp[au],Jw=lu.toLowerCase(),Zw=lu[0].toUpperCase()+lu.slice(1);Qn(Jw,"on"+Zw)}Qn(Bg,"onAnimationEnd");Qn($g,"onAnimationIteration");Qn(Hg,"onAnimationStart");Qn("dblclick","onDoubleClick");Qn("focusin","onFocus");Qn("focusout","onBlur");Qn(qg,"onTransitionEnd");ns("onMouseEnter",["mouseout","mouseover"]);ns("onMouseLeave",["mouseout","mouseover"]);ns("onPointerEnter",["pointerout","pointerover"]);ns("onPointerLeave",["pointerout","pointerover"]);xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zs));function np(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,J_(r,e,void 0,t),t.currentTarget=null}function Qg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;np(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;np(s,l,d),i=u}}}if(pa)throw t=Ku,pa=!1,Ku=null,t}function pe(t,e){var n=e[sc];n===void 0&&(n=e[sc]=new Set);var r=t+"__bubble";n.has(r)||(Kg(e,t,2,!1),n.add(r))}function uu(t,e,n){var r=0;e&&(r|=4),Kg(n,t,r,e)}var jo="_reactListening"+Math.random().toString(36).slice(2);function Si(t){if(!t[jo]){t[jo]=!0,tg.forEach(function(n){n!=="selectionchange"&&(eE.has(n)||uu(n,!1,t),uu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jo]||(e[jo]=!0,uu("selectionchange",!1,e))}}function Kg(t,e,n,r){switch(Ng(e)){case 1:var s=pw;break;case 4:s=mw;break;default:s=ch}n=s.bind(null,e,n,t),s=void 0,!Qu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function cu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ir(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}yg(function(){var d=i,p=oh(n),g=[];e:{var m=Wg.get(t);if(m!==void 0){var x=dh,A=t;switch(t){case"keypress":if(Jo(n)===0)break e;case"keydown":case"keyup":x=Rw;break;case"focusin":A="focus",x=ru;break;case"focusout":A="blur",x=ru;break;case"beforeblur":case"afterblur":x=ru;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=vw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Dw;break;case Bg:case $g:case Hg:x=Ew;break;case qg:x=jw;break;case"scroll":x=gw;break;case"wheel":x=Ow;break;case"copy":case"cut":case"paste":x=Tw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Wf}var P=(e&4)!==0,b=!P&&t==="scroll",I=P?m!==null?m+"Capture":null:m;P=[];for(var _=d,C;_!==null;){C=_;var D=C.stateNode;if(C.tag===5&&D!==null&&(C=D,I!==null&&(D=_i(_,I),D!=null&&P.push(Ai(_,D,C)))),b)break;_=_.return}0<P.length&&(m=new x(m,A,null,n,p),g.push({event:m,listeners:P}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",m&&n!==qu&&(A=n.relatedTarget||n.fromElement)&&(ir(A)||A[dn]))break e;if((x||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,x?(A=n.relatedTarget||n.toElement,x=d,A=A?ir(A):null,A!==null&&(b=Tr(A),A!==b||A.tag!==5&&A.tag!==6)&&(A=null)):(x=null,A=d),x!==A)){if(P=Hf,D="onMouseLeave",I="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(P=Wf,D="onPointerLeave",I="onPointerEnter",_="pointer"),b=x==null?m:zr(x),C=A==null?m:zr(A),m=new P(D,_+"leave",x,n,p),m.target=b,m.relatedTarget=C,D=null,ir(p)===d&&(P=new P(I,_+"enter",A,n,p),P.target=C,P.relatedTarget=b,D=P),b=D,x&&A)t:{for(P=x,I=A,_=0,C=P;C;C=Nr(C))_++;for(C=0,D=I;D;D=Nr(D))C++;for(;0<_-C;)P=Nr(P),_--;for(;0<C-_;)I=Nr(I),C--;for(;_--;){if(P===I||I!==null&&P===I.alternate)break t;P=Nr(P),I=Nr(I)}P=null}else P=null;x!==null&&rp(g,m,x,P,!1),A!==null&&b!==null&&rp(g,b,A,P,!0)}}e:{if(m=d?zr(d):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var F=Hw;else if(Gf(m))if(Og)F=Kw;else{F=Ww;var M=qw}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(F=Qw);if(F&&(F=F(t,d))){Mg(g,F,n,p);break e}M&&M(t,m,d),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Uu(m,"number",m.value)}switch(M=d?zr(d):window,t){case"focusin":(Gf(M)||M.contentEditable==="true")&&(Fr=M,Ju=d,li=null);break;case"focusout":li=Ju=Fr=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,ep(g,n,p);break;case"selectionchange":if(Xw)break;case"keydown":case"keyup":ep(g,n,p)}var E;if(ph)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Lr?Vg(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Dg&&n.locale!=="ko"&&(Lr||y!=="onCompositionStart"?y==="onCompositionEnd"&&Lr&&(E=bg()):(kn=p,hh="value"in kn?kn.value:kn.textContent,Lr=!0)),M=_a(d,y),0<M.length&&(y=new qf(y,t,null,n,p),g.push({event:y,listeners:M}),E?y.data=E:(E=jg(n),E!==null&&(y.data=E)))),(E=Fw?Uw(t,n):zw(t,n))&&(d=_a(d,"onBeforeInput"),0<d.length&&(p=new qf("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:d}),p.data=E))}Qg(g,e)})}function Ai(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _a(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_i(t,n),i!=null&&r.unshift(Ai(t,i,s)),i=_i(t,e),i!=null&&r.push(Ai(t,i,s))),t=t.return}return r}function Nr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=_i(n,i),u!=null&&o.unshift(Ai(n,u,l))):s||(u=_i(n,i),u!=null&&o.push(Ai(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tE=/\r\n?/g,nE=/\u0000|\uFFFD/g;function sp(t){return(typeof t=="string"?t:""+t).replace(tE,`
`).replace(nE,"")}function Mo(t,e,n){if(e=sp(e),sp(t)!==e&&n)throw Error(U(425))}function wa(){}var ec=null,tc=null;function nc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rc=typeof setTimeout=="function"?setTimeout:void 0,rE=typeof clearTimeout=="function"?clearTimeout:void 0,ip=typeof Promise=="function"?Promise:void 0,sE=typeof queueMicrotask=="function"?queueMicrotask:typeof ip<"u"?function(t){return ip.resolve(null).then(t).catch(iE)}:rc;function iE(t){setTimeout(function(){throw t})}function hu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),xi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);xi(e)}function Vn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function op(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Es=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Es,Ci="__reactProps$"+Es,dn="__reactContainer$"+Es,sc="__reactEvents$"+Es,oE="__reactListeners$"+Es,aE="__reactHandles$"+Es;function ir(t){var e=t[Wt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dn]||n[Wt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=op(t);t!==null;){if(n=t[Wt])return n;t=op(t)}return e}t=n,n=t.parentNode}return null}function Wi(t){return t=t[Wt]||t[dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Ja(t){return t[Ci]||null}var ic=[],Br=-1;function Kn(t){return{current:t}}function ge(t){0>Br||(t.current=ic[Br],ic[Br]=null,Br--)}function de(t,e){Br++,ic[Br]=t.current,t.current=e}var $n={},nt=Kn($n),pt=Kn(!1),fr=$n;function rs(t,e){var n=t.type.contextTypes;if(!n)return $n;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mt(t){return t=t.childContextTypes,t!=null}function Ea(){ge(pt),ge(nt)}function ap(t,e,n){if(nt.current!==$n)throw Error(U(168));de(nt,e),de(pt,n)}function Gg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,q_(t)||"Unknown",s));return Ee({},n,r)}function xa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$n,fr=nt.current,de(nt,t),de(pt,pt.current),!0}function lp(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Gg(t,e,fr),r.__reactInternalMemoizedMergedChildContext=t,ge(pt),ge(nt),de(nt,t)):ge(pt),de(pt,n)}var on=null,Za=!1,du=!1;function Yg(t){on===null?on=[t]:on.push(t)}function lE(t){Za=!0,Yg(t)}function Gn(){if(!du&&on!==null){du=!0;var t=0,e=ae;try{var n=on;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}on=null,Za=!1}catch(s){throw on!==null&&(on=on.slice(t+1)),Eg(ah,Gn),s}finally{ae=e,du=!1}}return null}var $r=[],Hr=0,Ta=null,Ia=0,kt=[],Pt=0,pr=null,an=1,ln="";function nr(t,e){$r[Hr++]=Ia,$r[Hr++]=Ta,Ta=t,Ia=e}function Xg(t,e,n){kt[Pt++]=an,kt[Pt++]=ln,kt[Pt++]=pr,pr=t;var r=an;t=ln;var s=32-Ut(r)-1;r&=~(1<<s),n+=1;var i=32-Ut(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,an=1<<32-Ut(e)+s|n<<s|r,ln=i+t}else an=1<<i|n<<s|r,ln=t}function gh(t){t.return!==null&&(nr(t,1),Xg(t,1,0))}function yh(t){for(;t===Ta;)Ta=$r[--Hr],$r[Hr]=null,Ia=$r[--Hr],$r[Hr]=null;for(;t===pr;)pr=kt[--Pt],kt[Pt]=null,ln=kt[--Pt],kt[Pt]=null,an=kt[--Pt],kt[Pt]=null}var Tt=null,Et=null,ye=!1,Ft=null;function Jg(t,e){var n=Rt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function up(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tt=t,Et=Vn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tt=t,Et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=pr!==null?{id:an,overflow:ln}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tt=t,Et=null,!0):!1;default:return!1}}function oc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ac(t){if(ye){var e=Et;if(e){var n=e;if(!up(t,e)){if(oc(t))throw Error(U(418));e=Vn(n.nextSibling);var r=Tt;e&&up(t,e)?Jg(r,n):(t.flags=t.flags&-4097|2,ye=!1,Tt=t)}}else{if(oc(t))throw Error(U(418));t.flags=t.flags&-4097|2,ye=!1,Tt=t}}}function cp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tt=t}function Oo(t){if(t!==Tt)return!1;if(!ye)return cp(t),ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nc(t.type,t.memoizedProps)),e&&(e=Et)){if(oc(t))throw Zg(),Error(U(418));for(;e;)Jg(t,e),e=Vn(e.nextSibling)}if(cp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Et=Vn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Et=null}}else Et=Tt?Vn(t.stateNode.nextSibling):null;return!0}function Zg(){for(var t=Et;t;)t=Vn(t.nextSibling)}function ss(){Et=Tt=null,ye=!1}function vh(t){Ft===null?Ft=[t]:Ft.push(t)}var uE=vn.ReactCurrentBatchConfig;function Ws(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Lo(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hp(t){var e=t._init;return e(t._payload)}function ey(t){function e(I,_){if(t){var C=I.deletions;C===null?(I.deletions=[_],I.flags|=16):C.push(_)}}function n(I,_){if(!t)return null;for(;_!==null;)e(I,_),_=_.sibling;return null}function r(I,_){for(I=new Map;_!==null;)_.key!==null?I.set(_.key,_):I.set(_.index,_),_=_.sibling;return I}function s(I,_){return I=Ln(I,_),I.index=0,I.sibling=null,I}function i(I,_,C){return I.index=C,t?(C=I.alternate,C!==null?(C=C.index,C<_?(I.flags|=2,_):C):(I.flags|=2,_)):(I.flags|=1048576,_)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,_,C,D){return _===null||_.tag!==6?(_=_u(C,I.mode,D),_.return=I,_):(_=s(_,C),_.return=I,_)}function u(I,_,C,D){var F=C.type;return F===Or?p(I,_,C.props.children,D,C.key):_!==null&&(_.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===In&&hp(F)===_.type)?(D=s(_,C.props),D.ref=Ws(I,_,C),D.return=I,D):(D=ia(C.type,C.key,C.props,null,I.mode,D),D.ref=Ws(I,_,C),D.return=I,D)}function d(I,_,C,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==C.containerInfo||_.stateNode.implementation!==C.implementation?(_=wu(C,I.mode,D),_.return=I,_):(_=s(_,C.children||[]),_.return=I,_)}function p(I,_,C,D,F){return _===null||_.tag!==7?(_=cr(C,I.mode,D,F),_.return=I,_):(_=s(_,C),_.return=I,_)}function g(I,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return _=_u(""+_,I.mode,C),_.return=I,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Co:return C=ia(_.type,_.key,_.props,null,I.mode,C),C.ref=Ws(I,null,_),C.return=I,C;case Mr:return _=wu(_,I.mode,C),_.return=I,_;case In:var D=_._init;return g(I,D(_._payload),C)}if(Xs(_)||zs(_))return _=cr(_,I.mode,C,null),_.return=I,_;Lo(I,_)}return null}function m(I,_,C,D){var F=_!==null?_.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return F!==null?null:l(I,_,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Co:return C.key===F?u(I,_,C,D):null;case Mr:return C.key===F?d(I,_,C,D):null;case In:return F=C._init,m(I,_,F(C._payload),D)}if(Xs(C)||zs(C))return F!==null?null:p(I,_,C,D,null);Lo(I,C)}return null}function x(I,_,C,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return I=I.get(C)||null,l(_,I,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Co:return I=I.get(D.key===null?C:D.key)||null,u(_,I,D,F);case Mr:return I=I.get(D.key===null?C:D.key)||null,d(_,I,D,F);case In:var M=D._init;return x(I,_,C,M(D._payload),F)}if(Xs(D)||zs(D))return I=I.get(C)||null,p(_,I,D,F,null);Lo(_,D)}return null}function A(I,_,C,D){for(var F=null,M=null,E=_,y=_=0,T=null;E!==null&&y<C.length;y++){E.index>y?(T=E,E=null):T=E.sibling;var S=m(I,E,C[y],D);if(S===null){E===null&&(E=T);break}t&&E&&S.alternate===null&&e(I,E),_=i(S,_,y),M===null?F=S:M.sibling=S,M=S,E=T}if(y===C.length)return n(I,E),ye&&nr(I,y),F;if(E===null){for(;y<C.length;y++)E=g(I,C[y],D),E!==null&&(_=i(E,_,y),M===null?F=E:M.sibling=E,M=E);return ye&&nr(I,y),F}for(E=r(I,E);y<C.length;y++)T=x(E,I,y,C[y],D),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?y:T.key),_=i(T,_,y),M===null?F=T:M.sibling=T,M=T);return t&&E.forEach(function(k){return e(I,k)}),ye&&nr(I,y),F}function P(I,_,C,D){var F=zs(C);if(typeof F!="function")throw Error(U(150));if(C=F.call(C),C==null)throw Error(U(151));for(var M=F=null,E=_,y=_=0,T=null,S=C.next();E!==null&&!S.done;y++,S=C.next()){E.index>y?(T=E,E=null):T=E.sibling;var k=m(I,E,S.value,D);if(k===null){E===null&&(E=T);break}t&&E&&k.alternate===null&&e(I,E),_=i(k,_,y),M===null?F=k:M.sibling=k,M=k,E=T}if(S.done)return n(I,E),ye&&nr(I,y),F;if(E===null){for(;!S.done;y++,S=C.next())S=g(I,S.value,D),S!==null&&(_=i(S,_,y),M===null?F=S:M.sibling=S,M=S);return ye&&nr(I,y),F}for(E=r(I,E);!S.done;y++,S=C.next())S=x(E,I,y,S.value,D),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?y:S.key),_=i(S,_,y),M===null?F=S:M.sibling=S,M=S);return t&&E.forEach(function(R){return e(I,R)}),ye&&nr(I,y),F}function b(I,_,C,D){if(typeof C=="object"&&C!==null&&C.type===Or&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Co:e:{for(var F=C.key,M=_;M!==null;){if(M.key===F){if(F=C.type,F===Or){if(M.tag===7){n(I,M.sibling),_=s(M,C.props.children),_.return=I,I=_;break e}}else if(M.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===In&&hp(F)===M.type){n(I,M.sibling),_=s(M,C.props),_.ref=Ws(I,M,C),_.return=I,I=_;break e}n(I,M);break}else e(I,M);M=M.sibling}C.type===Or?(_=cr(C.props.children,I.mode,D,C.key),_.return=I,I=_):(D=ia(C.type,C.key,C.props,null,I.mode,D),D.ref=Ws(I,_,C),D.return=I,I=D)}return o(I);case Mr:e:{for(M=C.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===C.containerInfo&&_.stateNode.implementation===C.implementation){n(I,_.sibling),_=s(_,C.children||[]),_.return=I,I=_;break e}else{n(I,_);break}else e(I,_);_=_.sibling}_=wu(C,I.mode,D),_.return=I,I=_}return o(I);case In:return M=C._init,b(I,_,M(C._payload),D)}if(Xs(C))return A(I,_,C,D);if(zs(C))return P(I,_,C,D);Lo(I,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,_!==null&&_.tag===6?(n(I,_.sibling),_=s(_,C),_.return=I,I=_):(n(I,_),_=_u(C,I.mode,D),_.return=I,I=_),o(I)):n(I,_)}return b}var is=ey(!0),ty=ey(!1),Sa=Kn(null),Aa=null,qr=null,_h=null;function wh(){_h=qr=Aa=null}function Eh(t){var e=Sa.current;ge(Sa),t._currentValue=e}function lc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Jr(t,e){Aa=t,_h=qr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ft=!0),t.firstContext=null)}function bt(t){var e=t._currentValue;if(_h!==t)if(t={context:t,memoizedValue:e,next:null},qr===null){if(Aa===null)throw Error(U(308));qr=t,Aa.dependencies={lanes:0,firstContext:t}}else qr=qr.next=t;return e}var or=null;function xh(t){or===null?or=[t]:or.push(t)}function ny(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,xh(e)):(n.next=s.next,s.next=n),e.interleaved=n,fn(t,r)}function fn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Sn=!1;function Th(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ry(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,fn(t,n)}return s=r.interleaved,s===null?(e.next=e,xh(r)):(e.next=s.next,s.next=e),r.interleaved=e,fn(t,n)}function Zo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lh(t,n)}}function dp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ca(t,e,n,r){var s=t.updateQueue;Sn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;o=0,p=d=u=null,l=i;do{var m=l.lane,x=l.eventTime;if((r&m)===m){p!==null&&(p=p.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=t,P=l;switch(m=e,x=n,P.tag){case 1:if(A=P.payload,typeof A=="function"){g=A.call(x,g,m);break e}g=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=P.payload,m=typeof A=="function"?A.call(x,g,m):A,m==null)break e;g=Ee({},g,m);break e;case 2:Sn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else x={eventTime:x,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=x,u=g):p=p.next=x,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(p===null&&(u=g),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);gr|=o,t.lanes=o,t.memoizedState=g}}function fp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Qi={},Kt=Kn(Qi),ki=Kn(Qi),Pi=Kn(Qi);function ar(t){if(t===Qi)throw Error(U(174));return t}function Ih(t,e){switch(de(Pi,e),de(ki,t),de(Kt,Qi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bu(e,t)}ge(Kt),de(Kt,e)}function os(){ge(Kt),ge(ki),ge(Pi)}function sy(t){ar(Pi.current);var e=ar(Kt.current),n=Bu(e,t.type);e!==n&&(de(ki,t),de(Kt,n))}function Sh(t){ki.current===t&&(ge(Kt),ge(ki))}var _e=Kn(0);function ka(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fu=[];function Ah(){for(var t=0;t<fu.length;t++)fu[t]._workInProgressVersionPrimary=null;fu.length=0}var ea=vn.ReactCurrentDispatcher,pu=vn.ReactCurrentBatchConfig,mr=0,we=null,be=null,Oe=null,Pa=!1,ui=!1,Ri=0,cE=0;function Ye(){throw Error(U(321))}function Ch(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Bt(t[n],e[n]))return!1;return!0}function kh(t,e,n,r,s,i){if(mr=i,we=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ea.current=t===null||t.memoizedState===null?pE:mE,t=n(r,s),ui){i=0;do{if(ui=!1,Ri=0,25<=i)throw Error(U(301));i+=1,Oe=be=null,e.updateQueue=null,ea.current=gE,t=n(r,s)}while(ui)}if(ea.current=Ra,e=be!==null&&be.next!==null,mr=0,Oe=be=we=null,Pa=!1,e)throw Error(U(300));return t}function Ph(){var t=Ri!==0;return Ri=0,t}function qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?we.memoizedState=Oe=t:Oe=Oe.next=t,Oe}function Dt(){if(be===null){var t=we.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=Oe===null?we.memoizedState:Oe.next;if(e!==null)Oe=e,be=t;else{if(t===null)throw Error(U(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Oe===null?we.memoizedState=Oe=t:Oe=Oe.next=t}return Oe}function Ni(t,e){return typeof e=="function"?e(t):e}function mu(t){var e=Dt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=be,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var p=d.lane;if((mr&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=g,o=r):u=u.next=g,we.lanes|=p,gr|=p}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,Bt(r,e.memoizedState)||(ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,we.lanes|=i,gr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gu(t){var e=Dt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Bt(i,e.memoizedState)||(ft=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function iy(){}function oy(t,e){var n=we,r=Dt(),s=e(),i=!Bt(r.memoizedState,s);if(i&&(r.memoizedState=s,ft=!0),r=r.queue,Rh(uy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,bi(9,ly.bind(null,n,r,s,e),void 0,null),Le===null)throw Error(U(349));mr&30||ay(n,e,s)}return s}function ay(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ly(t,e,n,r){e.value=n,e.getSnapshot=r,cy(e)&&hy(t)}function uy(t,e,n){return n(function(){cy(e)&&hy(t)})}function cy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bt(t,n)}catch{return!0}}function hy(t){var e=fn(t,1);e!==null&&zt(e,t,1,-1)}function pp(t){var e=qt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:t},e.queue=t,t=t.dispatch=fE.bind(null,we,t),[e.memoizedState,t]}function bi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function dy(){return Dt().memoizedState}function ta(t,e,n,r){var s=qt();we.flags|=t,s.memoizedState=bi(1|e,n,void 0,r===void 0?null:r)}function el(t,e,n,r){var s=Dt();r=r===void 0?null:r;var i=void 0;if(be!==null){var o=be.memoizedState;if(i=o.destroy,r!==null&&Ch(r,o.deps)){s.memoizedState=bi(e,n,i,r);return}}we.flags|=t,s.memoizedState=bi(1|e,n,i,r)}function mp(t,e){return ta(8390656,8,t,e)}function Rh(t,e){return el(2048,8,t,e)}function fy(t,e){return el(4,2,t,e)}function py(t,e){return el(4,4,t,e)}function my(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gy(t,e,n){return n=n!=null?n.concat([t]):null,el(4,4,my.bind(null,e,t),n)}function Nh(){}function yy(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ch(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vy(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ch(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function _y(t,e,n){return mr&21?(Bt(n,e)||(n=Ig(),we.lanes|=n,gr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ft=!0),t.memoizedState=n)}function hE(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=pu.transition;pu.transition={};try{t(!1),e()}finally{ae=n,pu.transition=r}}function wy(){return Dt().memoizedState}function dE(t,e,n){var r=On(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ey(t))xy(e,n);else if(n=ny(t,e,n,r),n!==null){var s=at();zt(n,t,r,s),Ty(n,e,r)}}function fE(t,e,n){var r=On(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ey(t))xy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Bt(l,o)){var u=e.interleaved;u===null?(s.next=s,xh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=ny(t,e,s,r),n!==null&&(s=at(),zt(n,t,r,s),Ty(n,e,r))}}function Ey(t){var e=t.alternate;return t===we||e!==null&&e===we}function xy(t,e){ui=Pa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ty(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lh(t,n)}}var Ra={readContext:bt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},pE={readContext:bt,useCallback:function(t,e){return qt().memoizedState=[t,e===void 0?null:e],t},useContext:bt,useEffect:mp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ta(4194308,4,my.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ta(4194308,4,t,e)},useInsertionEffect:function(t,e){return ta(4,2,t,e)},useMemo:function(t,e){var n=qt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dE.bind(null,we,t),[r.memoizedState,t]},useRef:function(t){var e=qt();return t={current:t},e.memoizedState=t},useState:pp,useDebugValue:Nh,useDeferredValue:function(t){return qt().memoizedState=t},useTransition:function(){var t=pp(!1),e=t[0];return t=hE.bind(null,t[1]),qt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=we,s=qt();if(ye){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Le===null)throw Error(U(349));mr&30||ay(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,mp(uy.bind(null,r,i,t),[t]),r.flags|=2048,bi(9,ly.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=qt(),e=Le.identifierPrefix;if(ye){var n=ln,r=an;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ri++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mE={readContext:bt,useCallback:yy,useContext:bt,useEffect:Rh,useImperativeHandle:gy,useInsertionEffect:fy,useLayoutEffect:py,useMemo:vy,useReducer:mu,useRef:dy,useState:function(){return mu(Ni)},useDebugValue:Nh,useDeferredValue:function(t){var e=Dt();return _y(e,be.memoizedState,t)},useTransition:function(){var t=mu(Ni)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:iy,useSyncExternalStore:oy,useId:wy,unstable_isNewReconciler:!1},gE={readContext:bt,useCallback:yy,useContext:bt,useEffect:Rh,useImperativeHandle:gy,useInsertionEffect:fy,useLayoutEffect:py,useMemo:vy,useReducer:gu,useRef:dy,useState:function(){return gu(Ni)},useDebugValue:Nh,useDeferredValue:function(t){var e=Dt();return be===null?e.memoizedState=t:_y(e,be.memoizedState,t)},useTransition:function(){var t=gu(Ni)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:iy,useSyncExternalStore:oy,useId:wy,unstable_isNewReconciler:!1};function Ot(t,e){if(t&&t.defaultProps){e=Ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var tl={isMounted:function(t){return(t=t._reactInternals)?Tr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=at(),s=On(t),i=un(r,s);i.payload=e,n!=null&&(i.callback=n),e=jn(t,i,s),e!==null&&(zt(e,t,s,r),Zo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=at(),s=On(t),i=un(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=jn(t,i,s),e!==null&&(zt(e,t,s,r),Zo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=at(),r=On(t),s=un(n,r);s.tag=2,e!=null&&(s.callback=e),e=jn(t,s,r),e!==null&&(zt(e,t,r,n),Zo(e,t,r))}};function gp(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ii(n,r)||!Ii(s,i):!0}function Iy(t,e,n){var r=!1,s=$n,i=e.contextType;return typeof i=="object"&&i!==null?i=bt(i):(s=mt(e)?fr:nt.current,r=e.contextTypes,i=(r=r!=null)?rs(t,s):$n),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function yp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&tl.enqueueReplaceState(e,e.state,null)}function cc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Th(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=bt(i):(i=mt(e)?fr:nt.current,s.context=rs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(uc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&tl.enqueueReplaceState(s,s.state,null),Ca(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function as(t,e){try{var n="",r=e;do n+=H_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function yu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yE=typeof WeakMap=="function"?WeakMap:Map;function Sy(t,e,n){n=un(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ba||(ba=!0,Ec=r),hc(t,e)},n}function Ay(t,e,n){n=un(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){hc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){hc(t,e),typeof r!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function vp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=NE.bind(null,t,e,n),e.then(t,t))}function _p(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=un(-1,1),e.tag=2,jn(n,e,1))),n.lanes|=1),t)}var vE=vn.ReactCurrentOwner,ft=!1;function ot(t,e,n,r){e.child=t===null?ty(e,null,n,r):is(e,t.child,n,r)}function Ep(t,e,n,r,s){n=n.render;var i=e.ref;return Jr(e,s),r=kh(t,e,n,r,i,s),n=Ph(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pn(t,e,s)):(ye&&n&&gh(e),e.flags|=1,ot(t,e,r,s),e.child)}function xp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Fh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Cy(t,e,i,r,s)):(t=ia(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ii,n(o,r)&&t.ref===e.ref)return pn(t,e,s)}return e.flags|=1,t=Ln(i,r),t.ref=e.ref,t.return=e,e.child=t}function Cy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ii(i,r)&&t.ref===e.ref)if(ft=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ft=!0);else return e.lanes=t.lanes,pn(t,e,s)}return dc(t,e,n,r,s)}function ky(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(Qr,wt),wt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,de(Qr,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,de(Qr,wt),wt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,de(Qr,wt),wt|=r;return ot(t,e,s,n),e.child}function Py(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dc(t,e,n,r,s){var i=mt(n)?fr:nt.current;return i=rs(e,i),Jr(e,s),n=kh(t,e,n,r,i,s),r=Ph(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pn(t,e,s)):(ye&&r&&gh(e),e.flags|=1,ot(t,e,n,s),e.child)}function Tp(t,e,n,r,s){if(mt(n)){var i=!0;xa(e)}else i=!1;if(Jr(e,s),e.stateNode===null)na(t,e),Iy(e,n,r),cc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=bt(d):(d=mt(n)?fr:nt.current,d=rs(e,d));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&yp(e,o,r,d),Sn=!1;var m=e.memoizedState;o.state=m,Ca(e,r,o,s),u=e.memoizedState,l!==r||m!==u||pt.current||Sn?(typeof p=="function"&&(uc(e,n,p,r),u=e.memoizedState),(l=Sn||gp(e,n,l,r,m,u,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ry(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Ot(e.type,l),o.props=d,g=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=bt(u):(u=mt(n)?fr:nt.current,u=rs(e,u));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||m!==u)&&yp(e,o,r,u),Sn=!1,m=e.memoizedState,o.state=m,Ca(e,r,o,s);var A=e.memoizedState;l!==g||m!==A||pt.current||Sn?(typeof x=="function"&&(uc(e,n,x,r),A=e.memoizedState),(d=Sn||gp(e,n,d,r,m,A,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return fc(t,e,n,r,i,s)}function fc(t,e,n,r,s,i){Py(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&lp(e,n,!1),pn(t,e,i);r=e.stateNode,vE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=is(e,t.child,null,i),e.child=is(e,null,l,i)):ot(t,e,l,i),e.memoizedState=r.state,s&&lp(e,n,!0),e.child}function Ry(t){var e=t.stateNode;e.pendingContext?ap(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ap(t,e.context,!1),Ih(t,e.containerInfo)}function Ip(t,e,n,r,s){return ss(),vh(s),e.flags|=256,ot(t,e,n,r),e.child}var pc={dehydrated:null,treeContext:null,retryLane:0};function mc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ny(t,e,n){var r=e.pendingProps,s=_e.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),de(_e,s&1),t===null)return ac(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=sl(o,r,0,null),t=cr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=mc(n),e.memoizedState=pc,t):bh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return _E(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ln(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ln(l,i):(i=cr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?mc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=pc,r}return i=t.child,t=i.sibling,r=Ln(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bh(t,e){return e=sl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fo(t,e,n,r){return r!==null&&vh(r),is(e,t.child,null,n),t=bh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _E(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=yu(Error(U(422))),Fo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=sl({mode:"visible",children:r.children},s,0,null),i=cr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&is(e,t.child,null,o),e.child.memoizedState=mc(o),e.memoizedState=pc,i);if(!(e.mode&1))return Fo(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=yu(i,r,void 0),Fo(t,e,o,r)}if(l=(o&t.childLanes)!==0,ft||l){if(r=Le,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,fn(t,s),zt(r,t,s,-1))}return Lh(),r=yu(Error(U(421))),Fo(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=bE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Et=Vn(s.nextSibling),Tt=e,ye=!0,Ft=null,t!==null&&(kt[Pt++]=an,kt[Pt++]=ln,kt[Pt++]=pr,an=t.id,ln=t.overflow,pr=e),e=bh(e,r.children),e.flags|=4096,e)}function Sp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lc(t.return,e,n)}function vu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function by(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ot(t,e,r.children,n),r=_e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sp(t,n,e);else if(t.tag===19)Sp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(de(_e,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ka(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),vu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ka(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}vu(e,!0,n,null,i);break;case"together":vu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function na(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Ln(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ln(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wE(t,e,n){switch(e.tag){case 3:Ry(e),ss();break;case 5:sy(e);break;case 1:mt(e.type)&&xa(e);break;case 4:Ih(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;de(Sa,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(de(_e,_e.current&1),e.flags|=128,null):n&e.child.childLanes?Ny(t,e,n):(de(_e,_e.current&1),t=pn(t,e,n),t!==null?t.sibling:null);de(_e,_e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return by(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(_e,_e.current),r)break;return null;case 22:case 23:return e.lanes=0,ky(t,e,n)}return pn(t,e,n)}var Dy,gc,Vy,jy;Dy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gc=function(){};Vy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ar(Kt.current);var i=null;switch(n){case"input":s=Lu(t,s),r=Lu(t,r),i=[];break;case"select":s=Ee({},s,{value:void 0}),r=Ee({},r,{value:void 0}),i=[];break;case"textarea":s=zu(t,s),r=zu(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wa)}$u(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(yi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(yi.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&pe("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};jy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qs(t,e){if(!ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function EE(t,e,n){var r=e.pendingProps;switch(yh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(e),null;case 1:return mt(e.type)&&Ea(),Xe(e),null;case 3:return r=e.stateNode,os(),ge(pt),ge(nt),Ah(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Oo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ft!==null&&(Ic(Ft),Ft=null))),gc(t,e),Xe(e),null;case 5:Sh(e);var s=ar(Pi.current);if(n=e.type,t!==null&&e.stateNode!=null)Vy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Xe(e),null}if(t=ar(Kt.current),Oo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Wt]=e,r[Ci]=i,t=(e.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(s=0;s<Zs.length;s++)pe(Zs[s],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":Vf(r,i),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},pe("invalid",r);break;case"textarea":Mf(r,i),pe("invalid",r)}$u(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Mo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Mo(r.textContent,l,t),s=["children",""+l]):yi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&pe("scroll",r)}switch(n){case"input":ko(r),jf(r,i,!0);break;case"textarea":ko(r),Of(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=wa)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ug(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Wt]=e,t[Ci]=r,Dy(t,e,!1,!1),e.stateNode=t;e:{switch(o=Hu(n,r),n){case"dialog":pe("cancel",t),pe("close",t),s=r;break;case"iframe":case"object":case"embed":pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Zs.length;s++)pe(Zs[s],t);s=r;break;case"source":pe("error",t),s=r;break;case"img":case"image":case"link":pe("error",t),pe("load",t),s=r;break;case"details":pe("toggle",t),s=r;break;case"input":Vf(t,r),s=Lu(t,r),pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ee({},r,{value:void 0}),pe("invalid",t);break;case"textarea":Mf(t,r),s=zu(t,r),pe("invalid",t);break;default:s=r}$u(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?dg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&cg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&vi(t,u):typeof u=="number"&&vi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(yi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&pe("scroll",t):u!=null&&nh(t,i,u,o))}switch(n){case"input":ko(t),jf(t,r,!1);break;case"textarea":ko(t),Of(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Bn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Kr(t,!!r.multiple,i,!1):r.defaultValue!=null&&Kr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=wa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xe(e),null;case 6:if(t&&e.stateNode!=null)jy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=ar(Pi.current),ar(Kt.current),Oo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wt]=e,(i=r.nodeValue!==n)&&(t=Tt,t!==null))switch(t.tag){case 3:Mo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Mo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wt]=e,e.stateNode=r}return Xe(e),null;case 13:if(ge(_e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ye&&Et!==null&&e.mode&1&&!(e.flags&128))Zg(),ss(),e.flags|=98560,i=!1;else if(i=Oo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Wt]=e}else ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xe(e),i=!1}else Ft!==null&&(Ic(Ft),Ft=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||_e.current&1?De===0&&(De=3):Lh())),e.updateQueue!==null&&(e.flags|=4),Xe(e),null);case 4:return os(),gc(t,e),t===null&&Si(e.stateNode.containerInfo),Xe(e),null;case 10:return Eh(e.type._context),Xe(e),null;case 17:return mt(e.type)&&Ea(),Xe(e),null;case 19:if(ge(_e),i=e.memoizedState,i===null)return Xe(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Qs(i,!1);else{if(De!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ka(t),o!==null){for(e.flags|=128,Qs(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return de(_e,_e.current&1|2),e.child}t=t.sibling}i.tail!==null&&ke()>ls&&(e.flags|=128,r=!0,Qs(i,!1),e.lanes=4194304)}else{if(!r)if(t=ka(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ye)return Xe(e),null}else 2*ke()-i.renderingStartTime>ls&&n!==1073741824&&(e.flags|=128,r=!0,Qs(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ke(),e.sibling=null,n=_e.current,de(_e,r?n&1|2:n&1),e):(Xe(e),null);case 22:case 23:return Oh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wt&1073741824&&(Xe(e),e.subtreeFlags&6&&(e.flags|=8192)):Xe(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function xE(t,e){switch(yh(e),e.tag){case 1:return mt(e.type)&&Ea(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return os(),ge(pt),ge(nt),Ah(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sh(e),null;case 13:if(ge(_e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));ss()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ge(_e),null;case 4:return os(),null;case 10:return Eh(e.type._context),null;case 22:case 23:return Oh(),null;case 24:return null;default:return null}}var Uo=!1,et=!1,TE=typeof WeakSet=="function"?WeakSet:Set,H=null;function Wr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Se(t,e,r)}else n.current=null}function yc(t,e,n){try{n()}catch(r){Se(t,e,r)}}var Ap=!1;function IE(t,e){if(ec=ya,t=Ug(),mh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,p=0,g=t,m=null;t:for(;;){for(var x;g!==n||s!==0&&g.nodeType!==3||(l=o+s),g!==i||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(x=g.firstChild)!==null;)m=g,g=x;for(;;){if(g===t)break t;if(m===n&&++d===s&&(l=o),m===i&&++p===r&&(u=o),(x=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=x}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(tc={focusedElem:t,selectionRange:n},ya=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var P=A.memoizedProps,b=A.memoizedState,I=e.stateNode,_=I.getSnapshotBeforeUpdate(e.elementType===e.type?P:Ot(e.type,P),b);I.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(D){Se(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return A=Ap,Ap=!1,A}function ci(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&yc(e,n,i)}s=s.next}while(s!==r)}}function nl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function My(t){var e=t.alternate;e!==null&&(t.alternate=null,My(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wt],delete e[Ci],delete e[sc],delete e[oE],delete e[aE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Oy(t){return t.tag===5||t.tag===3||t.tag===4}function Cp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Oy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _c(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wa));else if(r!==4&&(t=t.child,t!==null))for(_c(t,e,n),t=t.sibling;t!==null;)_c(t,e,n),t=t.sibling}function wc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wc(t,e,n),t=t.sibling;t!==null;)wc(t,e,n),t=t.sibling}var Ue=null,Lt=!1;function Tn(t,e,n){for(n=n.child;n!==null;)Ly(t,e,n),n=n.sibling}function Ly(t,e,n){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Ka,n)}catch{}switch(n.tag){case 5:et||Wr(n,e);case 6:var r=Ue,s=Lt;Ue=null,Tn(t,e,n),Ue=r,Lt=s,Ue!==null&&(Lt?(t=Ue,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ue.removeChild(n.stateNode));break;case 18:Ue!==null&&(Lt?(t=Ue,n=n.stateNode,t.nodeType===8?hu(t.parentNode,n):t.nodeType===1&&hu(t,n),xi(t)):hu(Ue,n.stateNode));break;case 4:r=Ue,s=Lt,Ue=n.stateNode.containerInfo,Lt=!0,Tn(t,e,n),Ue=r,Lt=s;break;case 0:case 11:case 14:case 15:if(!et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yc(n,e,o),s=s.next}while(s!==r)}Tn(t,e,n);break;case 1:if(!et&&(Wr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Se(n,e,l)}Tn(t,e,n);break;case 21:Tn(t,e,n);break;case 22:n.mode&1?(et=(r=et)||n.memoizedState!==null,Tn(t,e,n),et=r):Tn(t,e,n);break;default:Tn(t,e,n)}}function kp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TE),e.forEach(function(r){var s=DE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Mt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ue=l.stateNode,Lt=!1;break e;case 3:Ue=l.stateNode.containerInfo,Lt=!0;break e;case 4:Ue=l.stateNode.containerInfo,Lt=!0;break e}l=l.return}if(Ue===null)throw Error(U(160));Ly(i,o,s),Ue=null,Lt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Se(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fy(e,t),e=e.sibling}function Fy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mt(e,t),Ht(t),r&4){try{ci(3,t,t.return),nl(3,t)}catch(P){Se(t,t.return,P)}try{ci(5,t,t.return)}catch(P){Se(t,t.return,P)}}break;case 1:Mt(e,t),Ht(t),r&512&&n!==null&&Wr(n,n.return);break;case 5:if(Mt(e,t),Ht(t),r&512&&n!==null&&Wr(n,n.return),t.flags&32){var s=t.stateNode;try{vi(s,"")}catch(P){Se(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ag(s,i),Hu(l,o);var d=Hu(l,i);for(o=0;o<u.length;o+=2){var p=u[o],g=u[o+1];p==="style"?dg(s,g):p==="dangerouslySetInnerHTML"?cg(s,g):p==="children"?vi(s,g):nh(s,p,g,d)}switch(l){case"input":Fu(s,i);break;case"textarea":lg(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Kr(s,!!i.multiple,x,!1):m!==!!i.multiple&&(i.defaultValue!=null?Kr(s,!!i.multiple,i.defaultValue,!0):Kr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ci]=i}catch(P){Se(t,t.return,P)}}break;case 6:if(Mt(e,t),Ht(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){Se(t,t.return,P)}}break;case 3:if(Mt(e,t),Ht(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xi(e.containerInfo)}catch(P){Se(t,t.return,P)}break;case 4:Mt(e,t),Ht(t);break;case 13:Mt(e,t),Ht(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(jh=ke())),r&4&&kp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(et=(d=et)||p,Mt(e,t),et=d):Mt(e,t),Ht(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(H=t,p=t.child;p!==null;){for(g=H=p;H!==null;){switch(m=H,x=m.child,m.tag){case 0:case 11:case 14:case 15:ci(4,m,m.return);break;case 1:Wr(m,m.return);var A=m.stateNode;if(typeof A.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(P){Se(r,n,P)}}break;case 5:Wr(m,m.return);break;case 22:if(m.memoizedState!==null){Rp(g);continue}}x!==null?(x.return=m,H=x):Rp(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=hg("display",o))}catch(P){Se(t,t.return,P)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(P){Se(t,t.return,P)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Mt(e,t),Ht(t),r&4&&kp(t);break;case 21:break;default:Mt(e,t),Ht(t)}}function Ht(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Oy(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(vi(s,""),r.flags&=-33);var i=Cp(t);wc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Cp(t);_c(t,l,o);break;default:throw Error(U(161))}}catch(u){Se(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SE(t,e,n){H=t,Uy(t)}function Uy(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Uo;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||et;l=Uo;var d=et;if(Uo=o,(et=u)&&!d)for(H=s;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?Np(s):u!==null?(u.return=o,H=u):Np(s);for(;i!==null;)H=i,Uy(i),i=i.sibling;H=s,Uo=l,et=d}Pp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Pp(t)}}function Pp(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:et||nl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!et)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ot(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&fp(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&xi(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}et||e.flags&512&&vc(e)}catch(m){Se(e,e.return,m)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Rp(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Np(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nl(4,e)}catch(u){Se(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Se(e,s,u)}}var i=e.return;try{vc(e)}catch(u){Se(e,i,u)}break;case 5:var o=e.return;try{vc(e)}catch(u){Se(e,o,u)}}}catch(u){Se(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var AE=Math.ceil,Na=vn.ReactCurrentDispatcher,Dh=vn.ReactCurrentOwner,Nt=vn.ReactCurrentBatchConfig,se=0,Le=null,Re=null,$e=0,wt=0,Qr=Kn(0),De=0,Di=null,gr=0,rl=0,Vh=0,hi=null,ht=null,jh=0,ls=1/0,sn=null,ba=!1,Ec=null,Mn=null,zo=!1,Pn=null,Da=0,di=0,xc=null,ra=-1,sa=0;function at(){return se&6?ke():ra!==-1?ra:ra=ke()}function On(t){return t.mode&1?se&2&&$e!==0?$e&-$e:uE.transition!==null?(sa===0&&(sa=Ig()),sa):(t=ae,t!==0||(t=window.event,t=t===void 0?16:Ng(t.type)),t):1}function zt(t,e,n,r){if(50<di)throw di=0,xc=null,Error(U(185));Hi(t,n,r),(!(se&2)||t!==Le)&&(t===Le&&(!(se&2)&&(rl|=n),De===4&&Cn(t,$e)),gt(t,r),n===1&&se===0&&!(e.mode&1)&&(ls=ke()+500,Za&&Gn()))}function gt(t,e){var n=t.callbackNode;uw(t,e);var r=ga(t,t===Le?$e:0);if(r===0)n!==null&&Uf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Uf(n),e===1)t.tag===0?lE(bp.bind(null,t)):Yg(bp.bind(null,t)),sE(function(){!(se&6)&&Gn()}),n=null;else{switch(Sg(r)){case 1:n=ah;break;case 4:n=xg;break;case 16:n=ma;break;case 536870912:n=Tg;break;default:n=ma}n=Ky(n,zy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zy(t,e){if(ra=-1,sa=0,se&6)throw Error(U(327));var n=t.callbackNode;if(Zr()&&t.callbackNode!==n)return null;var r=ga(t,t===Le?$e:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Va(t,r);else{e=r;var s=se;se|=2;var i=$y();(Le!==t||$e!==e)&&(sn=null,ls=ke()+500,ur(t,e));do try{PE();break}catch(l){By(t,l)}while(!0);wh(),Na.current=i,se=s,Re!==null?e=0:(Le=null,$e=0,e=De)}if(e!==0){if(e===2&&(s=Gu(t),s!==0&&(r=s,e=Tc(t,s))),e===1)throw n=Di,ur(t,0),Cn(t,r),gt(t,ke()),n;if(e===6)Cn(t,r);else{if(s=t.current.alternate,!(r&30)&&!CE(s)&&(e=Va(t,r),e===2&&(i=Gu(t),i!==0&&(r=i,e=Tc(t,i))),e===1))throw n=Di,ur(t,0),Cn(t,r),gt(t,ke()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:rr(t,ht,sn);break;case 3:if(Cn(t,r),(r&130023424)===r&&(e=jh+500-ke(),10<e)){if(ga(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){at(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=rc(rr.bind(null,t,ht,sn),e);break}rr(t,ht,sn);break;case 4:if(Cn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ut(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AE(r/1960))-r,10<r){t.timeoutHandle=rc(rr.bind(null,t,ht,sn),r);break}rr(t,ht,sn);break;case 5:rr(t,ht,sn);break;default:throw Error(U(329))}}}return gt(t,ke()),t.callbackNode===n?zy.bind(null,t):null}function Tc(t,e){var n=hi;return t.current.memoizedState.isDehydrated&&(ur(t,e).flags|=256),t=Va(t,e),t!==2&&(e=ht,ht=n,e!==null&&Ic(e)),t}function Ic(t){ht===null?ht=t:ht.push.apply(ht,t)}function CE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Bt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cn(t,e){for(e&=~Vh,e&=~rl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ut(e),r=1<<n;t[n]=-1,e&=~r}}function bp(t){if(se&6)throw Error(U(327));Zr();var e=ga(t,0);if(!(e&1))return gt(t,ke()),null;var n=Va(t,e);if(t.tag!==0&&n===2){var r=Gu(t);r!==0&&(e=r,n=Tc(t,r))}if(n===1)throw n=Di,ur(t,0),Cn(t,e),gt(t,ke()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rr(t,ht,sn),gt(t,ke()),null}function Mh(t,e){var n=se;se|=1;try{return t(e)}finally{se=n,se===0&&(ls=ke()+500,Za&&Gn())}}function yr(t){Pn!==null&&Pn.tag===0&&!(se&6)&&Zr();var e=se;se|=1;var n=Nt.transition,r=ae;try{if(Nt.transition=null,ae=1,t)return t()}finally{ae=r,Nt.transition=n,se=e,!(se&6)&&Gn()}}function Oh(){wt=Qr.current,ge(Qr)}function ur(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rE(n)),Re!==null)for(n=Re.return;n!==null;){var r=n;switch(yh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ea();break;case 3:os(),ge(pt),ge(nt),Ah();break;case 5:Sh(r);break;case 4:os();break;case 13:ge(_e);break;case 19:ge(_e);break;case 10:Eh(r.type._context);break;case 22:case 23:Oh()}n=n.return}if(Le=t,Re=t=Ln(t.current,null),$e=wt=e,De=0,Di=null,Vh=rl=gr=0,ht=hi=null,or!==null){for(e=0;e<or.length;e++)if(n=or[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}or=null}return t}function By(t,e){do{var n=Re;try{if(wh(),ea.current=Ra,Pa){for(var r=we.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Pa=!1}if(mr=0,Oe=be=we=null,ui=!1,Ri=0,Dh.current=null,n===null||n.return===null){De=1,Di=e,Re=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=$e,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=l,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=_p(o);if(x!==null){x.flags&=-257,wp(x,o,l,i,e),x.mode&1&&vp(i,d,e),e=x,u=d;var A=e.updateQueue;if(A===null){var P=new Set;P.add(u),e.updateQueue=P}else A.add(u);break e}else{if(!(e&1)){vp(i,d,e),Lh();break e}u=Error(U(426))}}else if(ye&&l.mode&1){var b=_p(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),wp(b,o,l,i,e),vh(as(u,l));break e}}i=u=as(u,l),De!==4&&(De=2),hi===null?hi=[i]:hi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=Sy(i,u,e);dp(i,I);break e;case 1:l=u;var _=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Mn===null||!Mn.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=Ay(i,l,e);dp(i,D);break e}}i=i.return}while(i!==null)}qy(n)}catch(F){e=F,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function $y(){var t=Na.current;return Na.current=Ra,t===null?Ra:t}function Lh(){(De===0||De===3||De===2)&&(De=4),Le===null||!(gr&268435455)&&!(rl&268435455)||Cn(Le,$e)}function Va(t,e){var n=se;se|=2;var r=$y();(Le!==t||$e!==e)&&(sn=null,ur(t,e));do try{kE();break}catch(s){By(t,s)}while(!0);if(wh(),se=n,Na.current=r,Re!==null)throw Error(U(261));return Le=null,$e=0,De}function kE(){for(;Re!==null;)Hy(Re)}function PE(){for(;Re!==null&&!ew();)Hy(Re)}function Hy(t){var e=Qy(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?qy(t):Re=e,Dh.current=null}function qy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xE(n,e),n!==null){n.flags&=32767,Re=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{De=6,Re=null;return}}else if(n=EE(n,e,wt),n!==null){Re=n;return}if(e=e.sibling,e!==null){Re=e;return}Re=e=t}while(e!==null);De===0&&(De=5)}function rr(t,e,n){var r=ae,s=Nt.transition;try{Nt.transition=null,ae=1,RE(t,e,n,r)}finally{Nt.transition=s,ae=r}return null}function RE(t,e,n,r){do Zr();while(Pn!==null);if(se&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(cw(t,i),t===Le&&(Re=Le=null,$e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zo||(zo=!0,Ky(ma,function(){return Zr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nt.transition,Nt.transition=null;var o=ae;ae=1;var l=se;se|=4,Dh.current=null,IE(t,n),Fy(n,t),Yw(tc),ya=!!ec,tc=ec=null,t.current=n,SE(n),tw(),se=l,ae=o,Nt.transition=i}else t.current=n;if(zo&&(zo=!1,Pn=t,Da=s),i=t.pendingLanes,i===0&&(Mn=null),sw(n.stateNode),gt(t,ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ba)throw ba=!1,t=Ec,Ec=null,t;return Da&1&&t.tag!==0&&Zr(),i=t.pendingLanes,i&1?t===xc?di++:(di=0,xc=t):di=0,Gn(),null}function Zr(){if(Pn!==null){var t=Sg(Da),e=Nt.transition,n=ae;try{if(Nt.transition=null,ae=16>t?16:t,Pn===null)var r=!1;else{if(t=Pn,Pn=null,Da=0,se&6)throw Error(U(331));var s=se;for(se|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(H=d;H!==null;){var p=H;switch(p.tag){case 0:case 11:case 15:ci(8,p,i)}var g=p.child;if(g!==null)g.return=p,H=g;else for(;H!==null;){p=H;var m=p.sibling,x=p.return;if(My(p),p===d){H=null;break}if(m!==null){m.return=x,H=m;break}H=x}}}var A=i.alternate;if(A!==null){var P=A.child;if(P!==null){A.child=null;do{var b=P.sibling;P.sibling=null,P=b}while(P!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ci(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,H=I;break e}H=i.return}}var _=t.current;for(H=_;H!==null;){o=H;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,H=C;else e:for(o=_;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(F){Se(l,l.return,F)}if(l===o){H=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,H=D;break e}H=l.return}}if(se=s,Gn(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Ka,t)}catch{}r=!0}return r}finally{ae=n,Nt.transition=e}}return!1}function Dp(t,e,n){e=as(n,e),e=Sy(t,e,1),t=jn(t,e,1),e=at(),t!==null&&(Hi(t,1,e),gt(t,e))}function Se(t,e,n){if(t.tag===3)Dp(t,t,n);else for(;e!==null;){if(e.tag===3){Dp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mn===null||!Mn.has(r))){t=as(n,t),t=Ay(e,t,1),e=jn(e,t,1),t=at(),e!==null&&(Hi(e,1,t),gt(e,t));break}}e=e.return}}function NE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=at(),t.pingedLanes|=t.suspendedLanes&n,Le===t&&($e&n)===n&&(De===4||De===3&&($e&130023424)===$e&&500>ke()-jh?ur(t,0):Vh|=n),gt(t,e)}function Wy(t,e){e===0&&(t.mode&1?(e=No,No<<=1,!(No&130023424)&&(No=4194304)):e=1);var n=at();t=fn(t,e),t!==null&&(Hi(t,e,n),gt(t,n))}function bE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Wy(t,n)}function DE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),Wy(t,n)}var Qy;Qy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pt.current)ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ft=!1,wE(t,e,n);ft=!!(t.flags&131072)}else ft=!1,ye&&e.flags&1048576&&Xg(e,Ia,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;na(t,e),t=e.pendingProps;var s=rs(e,nt.current);Jr(e,n),s=kh(null,e,r,t,s,n);var i=Ph();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mt(r)?(i=!0,xa(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Th(e),s.updater=tl,e.stateNode=s,s._reactInternals=e,cc(e,r,t,n),e=fc(null,e,r,!0,i,n)):(e.tag=0,ye&&i&&gh(e),ot(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(na(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=jE(r),t=Ot(r,t),s){case 0:e=dc(null,e,r,t,n);break e;case 1:e=Tp(null,e,r,t,n);break e;case 11:e=Ep(null,e,r,t,n);break e;case 14:e=xp(null,e,r,Ot(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),dc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),Tp(t,e,r,s,n);case 3:e:{if(Ry(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,ry(t,e),Ca(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=as(Error(U(423)),e),e=Ip(t,e,r,n,s);break e}else if(r!==s){s=as(Error(U(424)),e),e=Ip(t,e,r,n,s);break e}else for(Et=Vn(e.stateNode.containerInfo.firstChild),Tt=e,ye=!0,Ft=null,n=ty(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ss(),r===s){e=pn(t,e,n);break e}ot(t,e,r,n)}e=e.child}return e;case 5:return sy(e),t===null&&ac(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,nc(r,s)?o=null:i!==null&&nc(r,i)&&(e.flags|=32),Py(t,e),ot(t,e,o,n),e.child;case 6:return t===null&&ac(e),null;case 13:return Ny(t,e,n);case 4:return Ih(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=is(e,null,r,n):ot(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),Ep(t,e,r,s,n);case 7:return ot(t,e,e.pendingProps,n),e.child;case 8:return ot(t,e,e.pendingProps.children,n),e.child;case 12:return ot(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,de(Sa,r._currentValue),r._currentValue=o,i!==null)if(Bt(i.value,o)){if(i.children===s.children&&!pt.current){e=pn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=un(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),lc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),lc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ot(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Jr(e,n),s=bt(s),r=r(s),e.flags|=1,ot(t,e,r,n),e.child;case 14:return r=e.type,s=Ot(r,e.pendingProps),s=Ot(r.type,s),xp(t,e,r,s,n);case 15:return Cy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),na(t,e),e.tag=1,mt(r)?(t=!0,xa(e)):t=!1,Jr(e,n),Iy(e,r,s),cc(e,r,s,n),fc(null,e,r,!0,t,n);case 19:return by(t,e,n);case 22:return ky(t,e,n)}throw Error(U(156,e.tag))};function Ky(t,e){return Eg(t,e)}function VE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(t,e,n,r){return new VE(t,e,n,r)}function Fh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jE(t){if(typeof t=="function")return Fh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sh)return 11;if(t===ih)return 14}return 2}function Ln(t,e){var n=t.alternate;return n===null?(n=Rt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ia(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Fh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Or:return cr(n.children,s,i,e);case rh:o=8,s|=8;break;case Vu:return t=Rt(12,n,e,s|2),t.elementType=Vu,t.lanes=i,t;case ju:return t=Rt(13,n,e,s),t.elementType=ju,t.lanes=i,t;case Mu:return t=Rt(19,n,e,s),t.elementType=Mu,t.lanes=i,t;case sg:return sl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ng:o=10;break e;case rg:o=9;break e;case sh:o=11;break e;case ih:o=14;break e;case In:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Rt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function cr(t,e,n,r){return t=Rt(7,t,r,e),t.lanes=n,t}function sl(t,e,n,r){return t=Rt(22,t,r,e),t.elementType=sg,t.lanes=n,t.stateNode={isHidden:!1},t}function _u(t,e,n){return t=Rt(6,t,null,e),t.lanes=n,t}function wu(t,e,n){return e=Rt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ME(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eu(0),this.expirationTimes=eu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uh(t,e,n,r,s,i,o,l,u){return t=new ME(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Rt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Th(i),t}function OE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Gy(t){if(!t)return $n;t=t._reactInternals;e:{if(Tr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(mt(n))return Gg(t,n,e)}return e}function Yy(t,e,n,r,s,i,o,l,u){return t=Uh(n,r,!0,t,s,i,o,l,u),t.context=Gy(null),n=t.current,r=at(),s=On(n),i=un(r,s),i.callback=e??null,jn(n,i,s),t.current.lanes=s,Hi(t,s,r),gt(t,r),t}function il(t,e,n,r){var s=e.current,i=at(),o=On(s);return n=Gy(n),e.context===null?e.context=n:e.pendingContext=n,e=un(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jn(s,e,o),t!==null&&(zt(t,s,o,i),Zo(t,s,o)),o}function ja(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zh(t,e){Vp(t,e),(t=t.alternate)&&Vp(t,e)}function LE(){return null}var Xy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bh(t){this._internalRoot=t}ol.prototype.render=Bh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));il(t,e,null,null)};ol.prototype.unmount=Bh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yr(function(){il(null,t,null,null)}),e[dn]=null}};function ol(t){this._internalRoot=t}ol.prototype.unstable_scheduleHydration=function(t){if(t){var e=kg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<An.length&&e!==0&&e<An[n].priority;n++);An.splice(n,0,t),n===0&&Rg(t)}};function $h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function al(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jp(){}function FE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=ja(o);i.call(d)}}var o=Yy(e,r,t,0,null,!1,!1,"",jp);return t._reactRootContainer=o,t[dn]=o.current,Si(t.nodeType===8?t.parentNode:t),yr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=ja(u);l.call(d)}}var u=Uh(t,0,!1,null,null,!1,!1,"",jp);return t._reactRootContainer=u,t[dn]=u.current,Si(t.nodeType===8?t.parentNode:t),yr(function(){il(e,u,n,r)}),u}function ll(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=ja(o);l.call(u)}}il(e,o,t,s)}else o=FE(n,e,t,s,r);return ja(o)}Ag=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Js(e.pendingLanes);n!==0&&(lh(e,n|1),gt(e,ke()),!(se&6)&&(ls=ke()+500,Gn()))}break;case 13:yr(function(){var r=fn(t,1);if(r!==null){var s=at();zt(r,t,1,s)}}),zh(t,1)}};uh=function(t){if(t.tag===13){var e=fn(t,134217728);if(e!==null){var n=at();zt(e,t,134217728,n)}zh(t,134217728)}};Cg=function(t){if(t.tag===13){var e=On(t),n=fn(t,e);if(n!==null){var r=at();zt(n,t,e,r)}zh(t,e)}};kg=function(){return ae};Pg=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};Wu=function(t,e,n){switch(e){case"input":if(Fu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ja(r);if(!s)throw Error(U(90));og(r),Fu(r,s)}}}break;case"textarea":lg(t,n);break;case"select":e=n.value,e!=null&&Kr(t,!!n.multiple,e,!1)}};mg=Mh;gg=yr;var UE={usingClientEntryPoint:!1,Events:[Wi,zr,Ja,fg,pg,Mh]},Ks={findFiberByHostInstance:ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zE={bundleType:Ks.bundleType,version:Ks.version,rendererPackageName:Ks.rendererPackageName,rendererConfig:Ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_g(t),t===null?null:t.stateNode},findFiberByHostInstance:Ks.findFiberByHostInstance||LE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bo.isDisabled&&Bo.supportsFiber)try{Ka=Bo.inject(zE),Qt=Bo}catch{}}St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UE;St.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$h(e))throw Error(U(200));return OE(t,e,null,n)};St.createRoot=function(t,e){if(!$h(t))throw Error(U(299));var n=!1,r="",s=Xy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Uh(t,1,!1,null,null,n,!1,r,s),t[dn]=e.current,Si(t.nodeType===8?t.parentNode:t),new Bh(e)};St.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=_g(e),t=t===null?null:t.stateNode,t};St.flushSync=function(t){return yr(t)};St.hydrate=function(t,e,n){if(!al(e))throw Error(U(200));return ll(null,t,e,!0,n)};St.hydrateRoot=function(t,e,n){if(!$h(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Xy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Yy(e,null,t,1,n??null,s,!1,i,o),t[dn]=e.current,Si(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ol(e)};St.render=function(t,e,n){if(!al(e))throw Error(U(200));return ll(null,t,e,!1,n)};St.unmountComponentAtNode=function(t){if(!al(t))throw Error(U(40));return t._reactRootContainer?(yr(function(){ll(null,null,t,!1,function(){t._reactRootContainer=null,t[dn]=null})}),!0):!1};St.unstable_batchedUpdates=Mh;St.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!al(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return ll(t,e,n,!1,r)};St.version="18.3.1-next-f1338f8080-20240426";function Jy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jy)}catch(t){console.error(t)}}Jy(),Jm.exports=St;var BE=Jm.exports,Mp=BE;bu.createRoot=Mp.createRoot,bu.hydrateRoot=Mp.hydrateRoot;var Ie=(t=>(t.Baking="baking-menu",t.BakingRecipeSelection="baking-recipe-selection",t.BakingProcess="baking-process",t.HeatingTimer="heating-timer",t.Operations="operations",t.Inventory="inventory",t.Settings="settings",t))(Ie||{});const $E={"cake-slice":h.jsx("path",{d:"M11.84 10.51 16.2 6.15a2.42 2.42 0 0 1 3.42 0 2.42 2.42 0 0 1 0 3.42l-4.36 4.36"}),"clipboard-kanban":h.jsxs(h.Fragment,{children:[h.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),h.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),h.jsx("path",{d:"M12 14h.01"}),h.jsx("path",{d:"M16 14h.01"}),h.jsx("path",{d:"M8 14h.01"})]}),archive:h.jsxs(h.Fragment,{children:[h.jsx("rect",{width:"20",height:"5",x:"2",y:"3",rx:"1"}),h.jsx("path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"}),h.jsx("path",{d:"M10 12h4"})]}),bell:h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),h.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),check:h.jsx("path",{d:"M20 6 9 17l-5-5"}),thermometer:h.jsx(h.Fragment,{children:h.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"})}),"thermometer-snowflake":h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"}),h.jsx("path",{d:"M22 12h-3"}),h.jsx("path",{d:"M2 20v-3"}),h.jsx("path",{d:"M20 4v3"}),h.jsx("path",{d:"m22 7-3 3"}),h.jsx("path",{d:"M2 13l3 3"}),h.jsx("path",{d:"M5 4l-3 3"})]}),"thermometer-sun":h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"}),h.jsx("path",{d:"M4 11H2"}),h.jsx("path",{d:"M10 11H8"}),h.jsx("path",{d:"M22 11h-2"}),h.jsx("path",{d:"M16 11h-2"}),h.jsx("path",{d:"M19 8a3 3 0 0 0-6 0"}),h.jsx("path",{d:"M19.3 4.7a3 3 0 0 0-4.25-4.25"})]}),"chevron-right":h.jsx("path",{d:"m9 18 6-6-6-6"}),"rotate-ccw":h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),h.jsx("path",{d:"M3 3v5h5"})]}),x:h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M18 6 6 18"}),h.jsx("path",{d:"m6 6 12 12"})]}),"plus-circle":h.jsxs(h.Fragment,{children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("path",{d:"M8 12h8"}),h.jsx("path",{d:"M12 8v8"})]}),"refresh-cw":h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),h.jsx("path",{d:"M21 3v5h-5"}),h.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),h.jsx("path",{d:"M3 21v-5h5"})]}),list:h.jsxs(h.Fragment,{children:[h.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),h.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),h.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),h.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),h.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),h.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]}),"play-circle":h.jsxs(h.Fragment,{children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]}),"check-circle":h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),h.jsx("path",{d:"m9 11 3 3L22 4"})]}),"alert-triangle":h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),h.jsx("path",{d:"M12 9v4"}),h.jsx("path",{d:"M12 17h.01"})]}),"map-pin":h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),h.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),boxes:h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),h.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),h.jsx("path",{d:"M12 22V12"})]}),"shopping-cart":h.jsxs(h.Fragment,{children:[h.jsx("circle",{cx:"8",cy:"21",r:"1"}),h.jsx("circle",{cx:"19",cy:"21",r:"1"}),h.jsx("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.15"})]}),store:h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"}),h.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),h.jsx("path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"}),h.jsx("path",{d:"M2 7h20"}),h.jsx("path",{d:"M22 7v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7"})]}),plus:h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M5 12h14"}),h.jsx("path",{d:"M12 5v14"})]}),minus:h.jsx("path",{d:"M5 12h14"}),pencil:h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),h.jsx("path",{d:"m15 5 4 4"})]}),settings:h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0 2l.15.08a2 2 0 0 0 .73-2.73l.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),h.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"bar-chart-2":h.jsxs(h.Fragment,{children:[h.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),h.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),h.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),star:h.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}),menu:h.jsx(h.Fragment,{children:h.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})},he=({name:t,className:e="",size:n=24})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:$E[t]}),HE=({activeScreen:t,setActiveScreen:e,processes:n,urgentTasks:r,shoppingListItems:s,inProgressTasks:i,isOpen:o,onClose:l})=>{const u=A=>{e(A),l()},d=({active:A,onClick:P,children:b})=>{const I="w-full flex items-center gap-4 p-4 rounded-lg font-bold text-left cursor-pointer transition-all duration-200",_=A?`${I} bg-blue-600 text-white`:`${I} text-gray-500 hover:bg-gray-100 hover:text-gray-900`;return h.jsx("button",{onClick:P,className:_,children:b})},p=({title:A,children:P,onClick:b,isAlarm:I})=>h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:`text-xs uppercase font-bold mb-2 px-2 ${I?"text-red-600 animate-pulse":"text-blue-600"}`,children:A}),h.jsx("button",{onClick:b,className:`w-full text-left p-3 rounded-lg transition-colors border ${I?"bg-red-50 border-red-400 hover:bg-red-100":"bg-gray-100 border-gray-200 hover:bg-gray-200"}`,children:P})]}),g=n.filter(A=>A.state!=="finished"),m=t===Ie.Baking,x=`
        sidebar-nav flex flex-col bg-white p-4 border-r border-gray-200 overflow-y-auto 
        fixed inset-y-0 left-0 z-50 w-64 transform transition-transform duration-300 ease-in-out 
        md:relative md:w-auto md:translate-x-0
        ${o?"translate-x-0":"-translate-x-full"}
    `;return h.jsxs("nav",{className:x,children:[h.jsxs("header",{className:"sidebar-header text-center mb-6 pt-4 flex-shrink-0",children:[h.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Cafestesia"}),h.jsx("span",{className:"text-sm text-gray-500",children:"Gestor v2.1 (React)"})]}),h.jsxs("div",{className:"flex-grow",children:[g.map(A=>{const P=A.state==="alarm";return h.jsx(p,{title:P?"Accin Requerida!":"En Produccin",onClick:()=>u(Ie.Baking),isAlarm:P,children:h.jsxs("div",{className:"flex items-center gap-3 font-bold text-sm text-gray-800",children:[h.jsx(he,{name:P?"bell":"cake-slice",className:P?"text-red-500":"text-green-600",size:20}),h.jsx("span",{children:A.name})]})},A.id)}),i.length>0&&h.jsx(p,{title:"Tareas en Progreso",onClick:()=>u(Ie.Operations),children:h.jsxs("div",{className:"flex items-center gap-3 font-bold text-sm text-gray-800",children:[h.jsx(he,{name:"play-circle",className:"text-yellow-600",size:20}),h.jsxs("span",{children:[i.length," tarea",i.length>1?"s":""," activa",i.length>1?"s":""]})]})}),r.length>0&&h.jsx(p,{title:"Operaciones Urgentes",onClick:()=>u(Ie.Operations),children:r.map(({task:A,diff:P})=>h.jsxs("div",{className:"text-sm mb-2 last:mb-0",children:[h.jsx("p",{className:"font-bold text-gray-800",children:A.text}),h.jsxs("p",{className:`text-xs font-semibold ${P<=0?"text-red-600 animate-pulse":"text-blue-600"}`,children:[A.time," ",P<=0?"(AHORA!)":`(en ${P} min)`]})]},A.id))}),s.length>0&&h.jsx(p,{title:"Inventario Crtico",onClick:()=>u(Ie.Inventory),children:h.jsxs("div",{className:"flex items-center gap-3 font-bold text-sm text-gray-800",children:[h.jsx(he,{name:"shopping-cart",className:"text-red-500",size:20}),h.jsxs("span",{children:[s.length," producto",s.length>1?"s":""," en la lista de compras"]})]})})]}),h.jsxs("div",{className:"nav-buttons flex flex-col gap-2 mt-auto flex-shrink-0",children:[h.jsxs(d,{active:m,onClick:()=>u(Ie.Baking),children:[h.jsx(he,{name:"cake-slice",size:20}),h.jsx("span",{children:"Produccin de Pan"})]}),h.jsxs(d,{active:t===Ie.Operations,onClick:()=>u(Ie.Operations),children:[h.jsx(he,{name:"clipboard-kanban",size:20}),h.jsx("span",{children:"Operaciones"})]}),h.jsxs(d,{active:t===Ie.Inventory,onClick:()=>u(Ie.Inventory),children:[h.jsx(he,{name:"archive",size:20}),h.jsx("span",{children:"Inventario"})]}),h.jsxs(d,{active:t===Ie.Settings,onClick:()=>u(Ie.Settings),children:[h.jsx(he,{name:"settings",size:20}),h.jsx("span",{children:"Configuracin"})]})]})]})},_n=({isOpen:t,onClose:e,title:n,children:r})=>t?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 animate-fadeIn",onClick:e,children:h.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg",onClick:s=>s.stopPropagation(),children:[h.jsx("div",{className:"p-6 border-b border-gray-200",children:h.jsx("h3",{className:"text-xl font-bold text-blue-600",children:n})}),h.jsx("div",{className:"p-6",children:r})]})}):null,ul={roles:{id:"roles",name:"Roles de Canela",pluralName:"Roles de Canela listos",setupInstruction:"Configura el horno a 230C y programa 16 minutos.",totalDuration:14*60,steps:[{duration:2*60,instruction:"Coloca los roles en los niveles 1 y 3. Deja que el calor eleve el producto sin presionar INICIO.",isPauseStep:!0},{duration:6*60,instruction:"Baja la temperatura a 210C y comienza el horneado."},{duration:4*60,instruction:"Gira las charolas 180 grados."},{duration:2*60,instruction:"Agrega 20 ml de leche y gira cada rol 1/3 de vuelta en sentido contrario del reloj."},{duration:2*60,instruction:"Vuelve a girar cada rol 1/3 de vuelta para finalizar."}]},ciabattas:{id:"ciabattas",name:"Ciabattas",pluralName:"Ciabattas listas",setupInstruction:"Configura el horno a 230C y programa 30 minutos.",totalDuration:28*60,steps:[{duration:2*60,instruction:"Coloca las charolas (niveles 1 y 3) y pulveriza agua 12 veces. Deja que el calor eleve el producto sin presionar INICIO.",isPauseStep:!0},{duration:8*60,instruction:"Baja la temperatura a 210C y comienza el horneado."},{duration:8*60,instruction:"Gira las charolas 180 grados y vuelve a pulverizar agua 12 veces."},{duration:6*60,instruction:"Intercambia las charolas de nivel y da vuelta a cada pieza 180 grados."},{duration:6*60,instruction:"Gira las charolas 180 grados por ltima vez."}]},croissants:{id:"croissants",name:"Croissants",pluralName:"Croissants listos",setupInstruction:"Configura el horno a 230C y programa 21 minutos.",totalDuration:21*60,steps:[{duration:3*60,instruction:"Coloca las charolas en los niveles 1 y 3. Pulveriza agua 12 veces."},{duration:6*60,instruction:"Baja la temperatura a 200C y continua horneando. (Nota: Si horneas solo 1 charola, baja a 180C)"},{duration:5*60,instruction:"Gira las charolas 180 grados."},{duration:5*60,instruction:"Intercambia las charolas de nivel y gralas 180 grados."},{duration:2*60,instruction:"Gira las charolas 180 grados por ltima vez."}]}},qE=new Date,tr=qE.toISOString().split("T")[0],Zy=[{text:"Roles: Descongelar en refrigeracin",employee:"Ali",shift:"matutino",date:tr,time:"08:00",duration:30,isCritical:!0,zone:"Panadera",status:"todo"},{text:"Checar ingredientes diarios y comprarlos",employee:"Ali",shift:"pre-apertura",date:tr,time:"15:00",duration:60,isCritical:!0,zone:"Cocina",status:"todo"},{text:"Hornear Roles",employee:"Claudia",shift:"pre-apertura",date:tr,time:"16:00",duration:45,isCritical:!0,zone:"Panadera",status:"todo"},{text:"Hornear Croissants",employee:"Claudia",shift:"pre-apertura",date:tr,time:"16:30",duration:45,isCritical:!0,zone:"Panadera",status:"todo"},{text:"Corte de caja",employee:"Fer",shift:"cierre",date:tr,time:"21:50",duration:20,isCritical:!0,zone:"Admin",status:"todo"},{text:"Limpiar barra y area de barismo",employee:"Claudia",shift:"pre-apertura",date:tr,time:"17:00",duration:30,isCritical:!0,zone:"Barra",status:"todo"},{text:"Hacer masa para ciabatta (da siguiente)",employee:"Fer",shift:"cierre",date:tr,time:"21:40",duration:20,isCritical:!0,zone:"Panadera",status:"todo"}],ev=[{name:"Harina de Trigo",category:"Secos",currentStock:50,unit:"kg",minStock:10,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Levadura Fresca",category:"Refrigerados",currentStock:1,unit:"kg",minStock:.5,providerPreferido:"Proveedor B",purchaseHistory:[]},{name:"Mantequilla sin Sal",category:"Refrigerados",currentStock:5,unit:"kg",minStock:2,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Chocolate Amargo 70%",category:"Secos",currentStock:3,unit:"kg",minStock:1,providerPreferido:"Proveedor C",purchaseHistory:[]},{name:"Leche Entera",category:"Lcteos",currentStock:8,unit:"lt",minStock:4,providerPreferido:"Supermercado",purchaseHistory:[]},{name:"Caf en Grano",category:"Bebidas",currentStock:10,unit:"kg",minStock:5,providerPreferido:"Tostador Local",purchaseHistory:[]},{name:"Azcar Morena",category:"Secos",currentStock:15,unit:"kg",minStock:5,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Canela en Polvo",category:"Secos",currentStock:.4,unit:"kg",minStock:.5,providerPreferido:"Proveedor C",purchaseHistory:[]}],Eu=["kg","lt","pz","g","ml","unidad(es)"],WE=8,QE=22,KE=[{value:5,label:"5 min"},{value:10,label:"10 min"},{value:15,label:"15 min"},{value:30,label:"30 min"},{value:60,label:"1 hora"},{value:120,label:"2 horas"}],GE=({isOpen:t,onClose:e,onSelectRecipe:n,onSelectHeating:r})=>{const s=o=>{n(o),e()},i=(o,l)=>{r(o,l),e()};return h.jsx(_n,{isOpen:t,onClose:e,title:"Iniciar un Nuevo Proceso",children:h.jsxs("div",{className:"flex flex-col gap-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-lg text-blue-700 mb-2",children:"Recetas de Horneado"}),h.jsx("div",{className:"flex flex-col gap-3",children:Object.values(ul).map(o=>h.jsxs("button",{onClick:()=>s(o.id),className:"w-full p-4 bg-gray-100 text-gray-800 font-bold rounded-lg border border-gray-200 hover:bg-gray-200 hover:border-gray-300 transition-colors text-left",children:["Hornear ",o.name]},o.id))})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-lg text-blue-700 mb-2",children:"Procesos de Calentamiento"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[h.jsxs("button",{onClick:()=>i(15*60,"Precalentar (15 min)"),className:"w-full p-4 flex items-center justify-center gap-2 bg-gray-100 text-gray-800 font-bold rounded-lg border border-gray-200 hover:bg-gray-200 hover:border-gray-300 transition-colors",children:[h.jsx(he,{name:"thermometer-snowflake",size:20})," Precalentar"]}),h.jsxs("button",{onClick:()=>i(7*60,"Recalentar (7 min)"),className:"w-full p-4 flex items-center justify-center gap-2 bg-gray-100 text-gray-800 font-bold rounded-lg border border-gray-200 hover:bg-gray-200 hover:border-gray-300 transition-colors",children:[h.jsx(he,{name:"thermometer-sun",size:20})," Recalentar"]})]})]})]})})},Op=t=>{(isNaN(t)||t<0)&&(t=0);const e=Math.floor(t/60),n=t%60;return`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}`},YE=({step:t,isCompleted:e,isCurrent:n})=>{let r="text-gray-500";return n&&(r="font-bold text-blue-700"),e&&(r="text-gray-400 line-through"),h.jsxs("div",{className:"flex items-start gap-3 py-2",children:[h.jsx("div",{className:"flex-shrink-0 mt-1",children:e?h.jsx(he,{name:"check-circle",size:16,className:"text-green-500"}):h.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${n?"border-blue-500 bg-blue-100":"border-gray-300"}`})}),h.jsx("p",{className:`text-sm ${r}`,children:t.instruction})]})},Lp=({process:t,onAdvance:e,onTogglePause:n,onCancel:r,onAcknowledgeFinish:s})=>{const{state:i,name:o,steps:l,currentStepIndex:u,totalTimeLeft:d,stepTimeLeft:p}=t,[g,m]=O.useState(!1),x=()=>{switch(i){case"running":return"border-green-500";case"alarm":return"border-red-500 animate-pulse-red";case"finished":return"border-blue-500";case"paused":return"border-gray-300";default:return"border-gray-300"}},A=()=>{switch(i){case"running":return"bg-green-100 text-green-800";case"alarm":return"bg-red-100 text-red-800";case"finished":return"bg-blue-100 text-blue-800";case"paused":return"bg-gray-100 text-gray-800";default:return"bg-gray-100"}},P=()=>{switch(i){case"paused":return h.jsx("button",{onClick:()=>n(t.id),className:"w-full bg-green-500 text-white font-bold py-3 rounded-lg hover:bg-green-600 transition-colors",children:"INICIAR"});case"running":return h.jsx("button",{onClick:()=>n(t.id),className:"w-full bg-yellow-500 text-white font-bold py-3 rounded-lg hover:bg-yellow-600 transition-colors",children:"PAUSAR"});case"alarm":return h.jsx("button",{onClick:()=>e(t.id),className:"w-full bg-blue-500 text-white font-bold py-3 rounded-lg hover:bg-blue-600 transition-colors animate-pulse",children:"SIGUIENTE PASO"});case"finished":return h.jsx("button",{onClick:()=>s(t),className:"w-full bg-gray-500 text-white font-bold py-3 rounded-lg hover:bg-gray-600 transition-colors",children:"LIMPIAR"})}};return g?h.jsxs("div",{className:"flex flex-col bg-white rounded-lg border-2 border-red-400 shadow-lg p-4 justify-center items-center text-center",children:[h.jsx("h4",{className:"font-bold text-lg mb-2 text-gray-800",children:"Ests seguro?"}),h.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Se perder todo el progreso de este proceso."}),h.jsxs("div",{className:"flex gap-4 w-full",children:[h.jsx("button",{onClick:()=>m(!1),className:"flex-1 py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"No, volver"}),h.jsx("button",{onClick:()=>r(t.id),className:"flex-1 py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"S, cancelar"})]})]}):h.jsxs("div",{className:`flex flex-col bg-white rounded-lg border-2 shadow-sm ${x()}`,children:[h.jsx("header",{className:"p-3 rounded-t-md",children:h.jsx("h3",{className:`font-bold text-lg ${A().split(" ")[1]}`,children:o})}),h.jsxs("div",{className:"p-4 flex-grow flex flex-col justify-between",children:[h.jsxs("div",{className:"timers flex justify-around text-center mb-4",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Restante"}),h.jsx("p",{className:"text-3xl font-bold",children:Op(d)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:"Paso Actual"}),h.jsx("p",{className:"text-3xl font-bold",children:Op(p)})]})]}),h.jsxs("div",{className:"steps-list mb-4 p-3 bg-gray-50 rounded-lg max-h-40 overflow-y-auto border border-gray-200",children:[l.map((b,I)=>h.jsx(YE,{step:b,isCompleted:I<u,isCurrent:I===u&&i!=="finished"},I)),i==="finished"&&h.jsxs("div",{className:"flex items-start gap-3 py-2 text-green-700 font-bold",children:[h.jsx(he,{name:"check-circle",size:16,className:"mt-1"}),h.jsx("p",{className:"text-sm",children:"Proceso completado!"})]})]}),h.jsxs("div",{className:"action-buttons space-y-2",children:[P(),i!=="finished"&&h.jsx("button",{onClick:()=>m(!0),className:"w-full text-center text-xs text-gray-500 hover:text-red-600 font-semibold py-1 transition-colors",children:"Cancelar Proceso"})]})]})]})},XE=({rating:t,setRating:e})=>h.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(n=>h.jsx("button",{type:"button",onClick:()=>e(n),onMouseEnter:()=>{},onMouseLeave:()=>{},className:"transition-transform transform hover:scale-125",children:h.jsx(he,{name:"star",size:40,className:`cursor-pointer ${n<=t?"text-yellow-400 fill-current":"text-gray-300"}`})},n))}),JE=({isOpen:t,processName:e,onSave:n,onSkip:r})=>{const[s,i]=O.useState(3),[o,l]=O.useState(""),u=()=>{n(s,o)};return h.jsx(_n,{isOpen:t,onClose:r,title:`Feedback para: ${e}`,children:h.jsxs("div",{className:"flex flex-col gap-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Qu tal sali el resultado?"}),h.jsx(XE,{rating:s,setRating:i})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"feedback-notes",className:"block text-sm font-medium text-gray-600 mb-1",children:"Notas (Opcional)"}),h.jsx("textarea",{id:"feedback-notes",value:o,onChange:d=>l(d.target.value),rows:4,placeholder:"Ej: El color fue perfecto, pero la prxima vez intentar con 1 minuto menos...",className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),h.jsxs("div",{className:"flex justify-between items-center mt-4",children:[h.jsx("button",{type:"button",onClick:r,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Omitir"}),h.jsx("button",{type:"button",onClick:u,className:"py-2 px-6 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})})},Fp=({productionHook:t,recipeLogHook:e})=>{const[n,r]=O.useState(!1),[s,i]=O.useState(null),{processes:o,startBakingProcess:l,startHeatingProcess:u,advanceProcess:d,togglePauseProcess:p,cancelProcess:g}=t,{addFeedback:m}=e,x=_=>{_.type==="baking"&&_.recipeId?i(_):g(_.id)},A=(_,C)=>{s&&s.recipeId&&(m({recipeId:s.recipeId,rating:_,notes:C}),g(s.id)),i(null)},P=()=>{s&&g(s.id),i(null)},b=o.filter(_=>_.state!=="finished"),I=o.filter(_=>_.state==="finished");return h.jsxs("div",{className:"p-4 md:p-6 h-full flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[h.jsx("h2",{className:"text-xl font-bold text-blue-700",children:"Procesos Activos"}),h.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[h.jsx(he,{name:"plus-circle",size:16}),"Iniciar Proceso"]})]}),h.jsxs("div",{className:"flex-grow overflow-y-auto",children:[b.length>0?h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(_=>h.jsx(Lp,{process:_,onAdvance:d,onTogglePause:p,onCancel:g,onAcknowledgeFinish:()=>{}},_.id))}):h.jsxs("div",{className:"text-center py-16 text-gray-500",children:[h.jsx("p",{children:"No hay procesos activos en este momento."}),h.jsx("p",{children:'Haz clic en "Iniciar Proceso" para comenzar.'})]}),I.length>0&&h.jsxs("div",{className:"mt-8",children:[h.jsx("h3",{className:"text-lg font-bold text-gray-600",children:"Finalizados Recientemente"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:I.map(_=>h.jsx(Lp,{process:_,onAdvance:d,onTogglePause:()=>{},onCancel:g,onAcknowledgeFinish:()=>x(_)},_.id))})]})]}),h.jsx(GE,{isOpen:n,onClose:()=>r(!1),onSelectRecipe:l,onSelectHeating:u}),s&&h.jsx(JE,{isOpen:!!s,processName:s.name,onSave:A,onSkip:P})]})},ZE=[{label:"L",value:"1"},{label:"M",value:"2"},{label:"M",value:"3"},{label:"J",value:"4"},{label:"V",value:"5"},{label:"S",value:"6"},{label:"D",value:"0"}],ex=({isOpen:t,onClose:e,onSave:n,task:r,selectedDate:s})=>{const[i,o]=O.useState(""),[l,u]=O.useState("Ali"),[d,p]=O.useState("08"),[g,m]=O.useState("00"),[x,A]=O.useState("AM"),[P,b]=O.useState("30"),[I,_]=O.useState("pre-apertura"),[C,D]=O.useState(""),[F,M]=O.useState(!1),[E,y]=O.useState("once"),[T,S]=O.useState([]);O.useEffect(()=>{if(t){o((r==null?void 0:r.text)||""),u((r==null?void 0:r.employee)||"Ali");const w=(r==null?void 0:r.time)||"08:00",[G,J]=w.split(":").map(Number),Ct=G>=12?"PM":"AM";let rt=G%12;rt===0&&(rt=12),p(String(rt).padStart(2,"0")),m(String(J).padStart(2,"0")),A(Ct),b(String((r==null?void 0:r.duration)||"30")),_((r==null?void 0:r.shift)||"pre-apertura"),D((r==null?void 0:r.zone)||""),M((r==null?void 0:r.isCritical)||!1),y("once"),S([])}},[t,r]);const k=w=>{S(G=>G.includes(w)?G.filter(J=>J!==w):[...G,w])},R=w=>{if(w.preventDefault(),!i){alert("Por favor completa el nombre de la tarea.");return}if(E==="weekly"&&T.length===0){alert("Por favor selecciona al menos un da para la tarea recurrente.");return}let G=parseInt(d,10);x==="PM"&&G!==12?G+=12:x==="AM"&&G===12&&(G=0);const J=`${String(G).padStart(2,"0")}:${g}`,Ct={text:i,employee:l,time:J,duration:parseInt(P,10),shift:I,zone:C,isCritical:F};n(r?{...r,...Ct}:{...Ct,date:s,recurrence:E,selectedDays:T}),e()};return h.jsx(_n,{isOpen:t,onClose:e,title:r?"Editar Tarea":"Aadir Nueva Tarea",children:h.jsxs("form",{onSubmit:R,className:"flex flex-col gap-4",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Nombre de la Tarea"}),h.jsx("input",{type:"text",value:i,onChange:w=>o(w.target.value),required:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50"})]}),!r&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"text-sm font-medium text-gray-600 mb-2 block",children:"Repeticin"}),h.jsxs("div",{className:"flex gap-2 bg-gray-200 rounded-lg p-1",children:[h.jsx("button",{type:"button",onClick:()=>y("once"),className:`flex-1 p-2 rounded-md text-sm font-bold transition-colors ${E==="once"?"bg-white shadow-sm":""}`,children:"Una vez"}),h.jsx("button",{type:"button",onClick:()=>y("weekly"),className:`flex-1 p-2 rounded-md text-sm font-bold transition-colors ${E==="weekly"?"bg-white shadow-sm":""}`,children:"Semanalmente"})]})]}),E==="weekly"&&!r&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"text-sm font-medium text-gray-600 mb-2 block",children:"Das de la semana"}),h.jsx("div",{className:"flex justify-between gap-1",children:ZE.map(({label:w,value:G})=>h.jsx("button",{type:"button",onClick:()=>k(G),className:`w-9 h-9 flex items-center justify-center font-bold rounded-full border-2 transition-colors ${T.includes(G)?"bg-blue-600 text-white border-blue-600":"bg-gray-100 border-gray-300"}`,children:w},G))})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Empleado"}),h.jsxs("select",{value:l,onChange:w=>u(w.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:[h.jsx("option",{children:"Ali"}),h.jsx("option",{children:"Fer"}),h.jsx("option",{children:"Claudia"}),h.jsx("option",{children:"Admin"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Turno"}),h.jsxs("select",{value:I,onChange:w=>_(w.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:[h.jsx("option",{value:"matutino",children:"Matutino"}),h.jsx("option",{value:"pre-apertura",children:"Pre Apertura"}),h.jsx("option",{value:"cierre",children:"Cierre"}),h.jsx("option",{value:"default",children:"Otro"})]})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Hora"}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("select",{value:d,onChange:w=>p(w.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:Array.from({length:12},(w,G)=>G+1).map(w=>h.jsx("option",{value:String(w).padStart(2,"0"),children:String(w).padStart(2,"0")},w))}),h.jsx("select",{value:g,onChange:w=>m(w.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:Array.from({length:60},(w,G)=>G).map(w=>h.jsx("option",{value:String(w).padStart(2,"0"),children:String(w).padStart(2,"0")},w))}),h.jsxs("select",{value:x,onChange:w=>A(w.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:[h.jsx("option",{children:"AM"}),h.jsx("option",{children:"PM"})]})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Duracin"}),h.jsx("select",{value:P,onChange:w=>b(w.target.value),required:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50",children:KE.map(w=>h.jsx("option",{value:w.value,children:w.label},w.value))})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Zona (Opcional)"}),h.jsx("input",{type:"text",value:C,onChange:w=>D(w.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50"})]}),h.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h.jsx("input",{type:"checkbox",id:"task-critical",checked:F,onChange:w=>M(w.target.checked),className:"w-4 h-4"}),h.jsx("label",{htmlFor:"task-critical",className:"text-sm font-medium text-gray-600",children:"Es una tarea crtica"})]}),h.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[h.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),h.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar Cambios"})]})]})})},tx=({selectedDate:t,setSelectedDate:e})=>{const n=new Date;n.setHours(0,0,0,0);const r=new Date(t),s=t.getDay(),i=t.getDate()-s+(s===0?-6:1);r.setDate(i),r.setHours(0,0,0,0);const o=[];for(let u=0;u<7;u++){const d=new Date(r);d.setDate(r.getDate()+u),o.push(d)}const l=(u,d)=>u.getFullYear()===d.getFullYear()&&u.getMonth()===d.getMonth()&&u.getDate()===d.getDate();return h.jsx("div",{className:"flex justify-center items-center gap-1 md:gap-2 p-1 bg-gray-200 rounded-lg",children:o.map(u=>{const d=l(u,t),p=l(u,n);return h.jsxs("button",{onClick:()=>e(u),className:`px-2 py-1 md:px-4 md:py-2 rounded-md transition-all duration-200 w-full text-center ${d?"bg-white shadow-sm":"bg-transparent"}`,children:[h.jsx("span",{className:`text-xs uppercase font-bold ${d?"text-blue-600":"text-gray-500"}`,children:u.toLocaleDateString("es-ES",{weekday:"short"})}),h.jsx("p",{className:`font-bold text-lg ${p?"text-blue-600":d?"text-gray-800":"text-gray-600"}`,children:u.getDate()})]},u.toISOString())})})},Up={Ali:{bg:"bg-pink-100",border:"border-pink-500",text:"text-pink-800"},Fer:{bg:"bg-purple-100",border:"border-purple-500",text:"text-purple-800"},Claudia:{bg:"bg-teal-100",border:"border-teal-500",text:"text-teal-800"},Admin:{bg:"bg-yellow-100",border:"border-yellow-600",text:"text-yellow-900"}},nx=t=>{switch(t){case"inprogress":return"opacity-100 animate-pulse-yellow";case"done":return"opacity-50";case"todo":default:return"opacity-100"}},rx=({task:t,onUpdateStatus:e,onEdit:n,style:r})=>{const{bg:s,border:i,text:o}=Up[t.employee]||Up.Admin,l=nx(t.status),u=()=>{t.status==="todo"?e(t.id,"inprogress"):t.status==="inprogress"&&e(t.id,"done")},d=new Date(`${t.date}T${t.time}`),g=new Date(d.getTime()+t.duration*6e4).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"});return h.jsxs("div",{style:r,className:`absolute rounded-lg p-3 flex gap-3 transition-all duration-300 ${s} border-2 ${l} ${t.status==="inprogress"?i:"border-transparent"}`,children:[h.jsx("div",{className:`flex-shrink-0 w-1.5 h-full ${i.replace("border-","bg-")} rounded-full`}),h.jsxs("div",{className:"flex-grow flex flex-col min-h-0",children:[h.jsxs("div",{className:"flex-grow overflow-hidden",children:[h.jsx("p",{className:`font-bold text-sm ${o} ${t.status==="done"?"line-through":""}`,children:t.text}),h.jsxs("p",{className:`text-xs ${o} ${t.status==="done"?"line-through":""}`,children:[t.time," - ",g," (",t.duration," min)"]})]}),h.jsxs("div",{className:"flex items-center justify-between mt-1 flex-shrink-0",children:[h.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full bg-white/60 ${o}`,children:t.employee}),h.jsx("button",{onClick:m=>{m.stopPropagation(),n(t)},className:`p-1 rounded-full hover:bg-black/10 transition-colors ${o}`,title:"Editar Tarea",children:h.jsx(he,{name:"pencil",size:14})})]})]}),h.jsx("div",{className:"flex-shrink-0",children:h.jsxs("button",{onClick:u,className:"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all",style:{borderColor:t.status==="done"?"#4ade80":"#9ca3af",backgroundColor:t.status==="done"?"#4ade80":"white"},children:[t.status==="inprogress"&&h.jsx("div",{className:"w-2.5 h-2.5 bg-yellow-500 rounded-full"}),t.status==="done"&&h.jsx(he,{name:"check",size:16,className:"text-white"})]})})]})},zp=120,sx=30,ix=({tasks:t,onUpdateStatus:e,onEditTask:n})=>{const[r,s]=O.useState(new Date);O.useEffect(()=>{const m=setInterval(()=>s(new Date),6e4);return()=>clearInterval(m)},[]);const i=O.useMemo(()=>{const m={};return t.forEach(x=>{const A=parseInt(x.time.split(":")[0],10);m[A]=!0}),m},[t]),o=O.useMemo(()=>{let m=0;const x=[];for(let A=WE;A<=QE;A++){const b=!!i[A]?zp:sx;x.push({hour:A,top:m,height:b}),m+=b}return x},[i]),l=o.length>0?o[o.length-1].top+o[o.length-1].height:0,u=m=>{const[x,A]=m.split(":").map(Number),P=o.find(I=>I.hour===x);if(!P)return 0;const b=A/60*P.height;return P.top+b},d=(m,x)=>{const A=parseInt(x.split(":")[0],10),P=o.find(I=>I.hour===A),b=P?P.height:zp;return m/60*b},p=u(`${r.getHours()}:${r.getMinutes()}`),g=O.useMemo(()=>{const m=[...t].sort((b,I)=>b.time.localeCompare(I.time)),x=[],A=[];m.forEach(b=>{let I=!1;for(let _=0;_<A.length;_++){const C=A[_][A[_].length-1],D=new Date(`${b.date}T${b.time}`),F=new Date(`${C.date}T${C.time}`);if(F.setMinutes(F.getMinutes()+C.duration),D>=F){A[_].push(b),I=!0;break}}I||A.push([b])});const P=A.length;return A.forEach((b,I)=>{b.forEach(_=>{x.push({task:_,top:u(_.time),height:d(_.duration,_.time),left:I/P*100,width:1/P*100})})}),x},[t,o]);return h.jsx("div",{className:"p-4 md:p-6 h-full",children:h.jsxs("div",{className:"relative",style:{height:`${l}px`},children:[o.map(({hour:m,top:x,height:A})=>h.jsxs("div",{className:"absolute w-full",style:{top:`${x}px`,height:`${A}px`},children:[h.jsxs("span",{className:"absolute -top-3 left-0 text-sm font-semibold text-gray-400 w-16 text-right pr-4",children:[m,":00"]}),h.jsx("div",{className:"h-px bg-gray-200 ml-16"})]},m)),p>=0&&p<=l&&h.jsx("div",{className:"absolute left-16 right-0 h-0.5 bg-red-500 z-20",style:{top:`${p}px`},children:h.jsx("div",{className:"absolute -left-1.5 -top-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white"})}),h.jsx("div",{className:"absolute top-0 bottom-0 left-16 right-0",children:g.map(({task:m,top:x,height:A,left:P,width:b})=>h.jsx(rx,{task:m,onUpdateStatus:e,onEdit:n,style:{top:`${x}px`,height:`${Math.max(A-8,80)}px`,left:`${P}%`,width:`${b}%`,paddingLeft:"0.5rem"}},m.id))})]})})},ox=t=>t>0?`en ${t} min`:t===0?"Ahora!":`hace ${Math.abs(t)} min`,ax=({tasksWithDiff:t})=>h.jsxs("div",{className:"bg-yellow-100 border-b-2 border-yellow-300 p-3 flex-shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(he,{name:"alert-triangle",className:"text-yellow-600",size:20}),h.jsx("h3",{className:"font-bold text-yellow-800 text-base",children:"Tareas Crticas Prximas"})]}),h.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:t.map(({task:e,diff:n})=>h.jsxs("div",{className:"bg-white/70 p-2 rounded-lg border border-yellow-300 flex-shrink-0 w-60",children:[h.jsx("p",{className:"font-bold text-sm text-gray-800 truncate",children:e.text}),h.jsxs("p",{className:`text-xs font-semibold ${n<=0?"text-red-600 animate-pulse":"text-blue-600"}`,children:[e.time," (",ox(n),")"]})]},e.id))})]}),lx=["Ali","Fer","Claudia","Admin"],ux=({kanbanHook:t,criticalTasks:e})=>{const{tasks:n,addTask:r,addMultipleTasks:s,updateTask:i,updateTaskStatus:o}=t,[l,u]=O.useState(new Date),[d,p]=O.useState(!1),[g,m]=O.useState(null),[x,A]=O.useState("All"),P=D=>{m(D),p(!0)},b=()=>{p(!1),m(null)},I=D=>{if("id"in D)i(D);else{const{recurrence:F,selectedDays:M,...E}=D;if(F==="weekly"&&M&&M.length>0){const y=new Date(l),T=l.getDay(),S=l.getDate()-T+(T===0?-6:1);y.setDate(S);const k=[];M.forEach(R=>{const w=parseInt(R,10),G=new Date(y);w===0?G.setDate(y.getDate()+6):G.setDate(y.getDate()+(w-1)),G.setMinutes(G.getMinutes()-G.getTimezoneOffset()),k.push({...E,date:G.toISOString().split("T")[0]})}),s(k)}else r({...E,date:_})}},_=O.useMemo(()=>{const D=new Date(l);return D.setMinutes(D.getMinutes()-D.getTimezoneOffset()),D.toISOString().split("T")[0]},[l]),C=O.useMemo(()=>n.filter(D=>{const F=D.date===_,M=x==="All"||D.employee===x;return F&&M}),[n,_,x]);return h.jsxs("div",{className:"flex flex-col h-full bg-gray-50",children:[e.length>0&&h.jsx(ax,{tasksWithDiff:e}),h.jsxs("div",{className:"operations-header flex flex-col p-4 border-b border-gray-200 gap-4 flex-shrink-0",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center w-full gap-4",children:[h.jsx(tx,{selectedDate:l,setSelectedDate:u}),h.jsx("div",{className:"flex gap-2 w-full md:w-auto",children:h.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm w-full justify-center",children:[h.jsx(he,{name:"plus-circle",size:16}),"Aadir Tarea"]})})]}),h.jsxs("div",{className:"flex items-center gap-2 bg-gray-200 rounded-lg p-1 w-full overflow-x-auto",children:[h.jsx("button",{onClick:()=>A("All"),className:`px-3 py-1 text-sm font-bold rounded-md transition-colors ${x==="All"?"bg-white shadow-sm":"bg-transparent text-gray-600"}`,children:"Todos"}),lx.map(D=>h.jsx("button",{onClick:()=>A(D),className:`px-3 py-1 text-sm font-bold rounded-md transition-colors ${x===D?"bg-white shadow-sm":"bg-transparent text-gray-600"}`,children:D},D))]})]}),h.jsx("div",{className:"flex-grow overflow-auto relative",children:h.jsx(ix,{tasks:C,onEditTask:P,onUpdateStatus:o})}),h.jsx(ex,{isOpen:d,onClose:b,onSave:I,task:g,selectedDate:_})]})},tv=({isOpen:t,onClose:e,onUpdate:n,item:r,isAdding:s,providers:i})=>{const[o,l]=O.useState(""),[u,d]=O.useState(""),[p,g]=O.useState(""),[m,x]=O.useState(""),A=s?"Aadir":"Usar";O.useEffect(()=>{t&&(l(""),d(""),g(r.providerPreferido||(i.length>0?i[0].name:"")),x(""))},[t,r,i]);const P=b=>{b.preventDefault(),x("");const I=parseFloat(o),_=parseFloat(u);if(isNaN(I)||I<=0){x("Introduce una cantidad vlida mayor que 0.");return}if(s&&(isNaN(_)||_<0)){x("Introduce un precio total vlido.");return}const C={itemId:r.id,change:s?I:-I};s&&(C.purchaseDetails={totalPrice:_,providerName:p}),n(C),e()};return h.jsx(_n,{isOpen:t,onClose:e,title:`${A} Stock`,children:h.jsxs("form",{onSubmit:P,className:"flex flex-col gap-4",children:[h.jsxs("div",{children:[h.jsxs("p",{children:["Producto: ",h.jsx("span",{className:"font-bold",children:r.name})]}),h.jsxs("p",{children:["Stock Actual: ",r.currentStock," ",r.unit]})]}),h.jsx(xu,{label:`Cantidad a ${A.toLowerCase()}`,children:h.jsx("input",{type:"number",value:o,onChange:b=>l(b.target.value),step:"any",min:"0.01",required:!0,autoFocus:!0})}),s&&h.jsxs(h.Fragment,{children:[h.jsx(xu,{label:"Precio Total de la Compra ($)",children:h.jsx("input",{type:"number",value:u,onChange:b=>d(b.target.value),step:"any",min:"0",required:!0})}),h.jsx(xu,{label:"Proveedor",children:h.jsxs("select",{value:p,onChange:b=>g(b.target.value),required:!0,children:[i.map(b=>h.jsx("option",{value:b.name,children:b.name},b.id)),h.jsx("option",{value:"Otro",children:"Otro"})]})})]}),m&&h.jsx("p",{className:"text-sm text-red-600 text-center",children:m}),h.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[h.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),h.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:A})]})]})})},xu=({label:t,children:e})=>h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:t}),Zc.cloneElement(e,{className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),$o=({icon:t,onClick:e,colorClass:n,title:r})=>h.jsx("button",{title:r,onClick:e,className:`w-10 h-10 flex items-center justify-center bg-gray-100 border border-gray-200 rounded-full transition-colors ${n}`,children:h.jsx(he,{name:t,size:20})}),cx=({item:t,onEdit:e,onAddStock:n,onUseStock:r,onViewHistory:s})=>{const i=t.currentStock<=t.minStock,o=t.purchaseHistory&&t.purchaseHistory.length>0?t.purchaseHistory[t.purchaseHistory.length-1]:null,l=o?(o.totalPrice/o.quantity).toFixed(2):null;return h.jsxs("div",{className:`p-4 bg-white rounded-lg border flex flex-col md:flex-row md:items-center justify-between gap-4 ${i?"border-red-300 bg-red-50":"border-gray-200"}`,children:[h.jsxs("div",{className:"flex-grow",children:[h.jsx("p",{className:"font-bold text-lg",children:t.name}),h.jsxs("div",{className:"flex flex-wrap items-baseline gap-x-4 gap-y-1 text-sm",children:[h.jsxs("p",{children:["Stock: ",h.jsx("span",{className:"font-semibold",children:t.currentStock.toFixed(2)})," ",t.unit]}),h.jsxs("p",{className:"text-gray-500",children:["(Mn: ",t.minStock," ",t.unit,")"]}),l&&h.jsxs("p",{className:"text-gray-500 font-semibold",children:["ltimo Precio: $",l," / ",t.unit]})]})]}),h.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 justify-end",children:[h.jsx($o,{icon:"plus",onClick:n,colorClass:"hover:bg-green-100 hover:text-green-600",title:"Aadir Stock"}),h.jsx($o,{icon:"minus",onClick:r,colorClass:"hover:bg-red-100 hover:text-red-600",title:"Usar Stock"}),h.jsx($o,{icon:"bar-chart-2",onClick:s,colorClass:"hover:bg-yellow-100 hover:text-yellow-600",title:"Historial de Precios"}),h.jsx($o,{icon:"pencil",onClick:()=>e(t),colorClass:"hover:bg-blue-100 hover:text-blue-600",title:"Editar Producto"})]})]})},hx=({isOpen:t,onClose:e,item:n})=>{const r=O.useMemo(()=>n.purchaseHistory?[...n.purchaseHistory].sort((i,o)=>new Date(o.date).getTime()-new Date(i.date).getTime()):[],[n.purchaseHistory]),s=O.useMemo(()=>!r||r.length===0?null:r.reduce((i,o)=>{const l=o.totalPrice/o.quantity;return l<i?l:i},1/0),[r]);return h.jsxs(_n,{isOpen:t,onClose:e,title:`Historial de Precios: ${n.name}`,children:[h.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[s&&s!==1/0&&h.jsx("div",{className:"p-3 mb-4 bg-green-100 border border-green-300 rounded-lg text-center",children:h.jsxs("p",{className:"font-bold text-green-800",children:["Mejor Precio Histrico: $",s.toFixed(2)," / ",n.unit]})}),r.length>0?h.jsxs("table",{className:"w-full text-sm text-left",children:[h.jsx("thead",{className:"bg-gray-100",children:h.jsxs("tr",{children:[h.jsx("th",{className:"p-2",children:"Fecha"}),h.jsx("th",{className:"p-2",children:"Proveedor"}),h.jsx("th",{className:"p-2",children:"Cant."}),h.jsx("th",{className:"p-2",children:"Total"}),h.jsx("th",{className:"p-2",children:"Unitario"})]})}),h.jsx("tbody",{children:r.map(i=>{const o=i.totalPrice/i.quantity,l=o.toFixed(2)===(s==null?void 0:s.toFixed(2));return h.jsxs("tr",{className:`border-b ${l?"bg-green-50":""}`,children:[h.jsx("td",{className:"p-2",children:new Date(i.date).toLocaleDateString()}),h.jsx("td",{className:"p-2",children:i.providerName}),h.jsxs("td",{className:"p-2",children:[i.quantity," ",n.unit]}),h.jsxs("td",{className:"p-2",children:["$",i.totalPrice.toFixed(2)]}),h.jsxs("td",{className:`p-2 font-bold ${l?"text-green-700":""}`,children:["$",o.toFixed(2)]})]},i.id)})})]}):h.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay historial de compras para este producto."})]}),h.jsx("div",{className:"flex justify-end mt-6",children:h.jsx("button",{onClick:e,className:"py-2 px-6 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cerrar"})})]})},dx=({items:t,onEdit:e,onRecordStockChange:n,providers:r})=>{const[s,i]=O.useState(null),[o,l]=O.useState(null);if(t.length===0)return h.jsx("p",{className:"text-center text-gray-500 mt-8",children:"No se encontraron productos."});const u=t.reduce((p,g)=>{const m=g.category||"Sin Categora";return p[m]||(p[m]=[]),p[m].push(g),p},{}),d=Object.keys(u).sort();return h.jsxs("div",{className:"space-y-6",children:[d.map(p=>h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-bold text-blue-700 pb-2 border-b border-gray-300 mb-4",children:p}),h.jsx("div",{className:"space-y-3",children:u[p].map(g=>h.jsx(cx,{item:g,onEdit:e,onAddStock:()=>i({item:g,isAdding:!0}),onUseStock:()=>i({item:g,isAdding:!1}),onViewHistory:()=>l(g)},g.id))})]},p)),s&&h.jsx(tv,{isOpen:!!s,onClose:()=>i(null),item:s.item,isAdding:s.isAdding,onUpdate:n,providers:r}),o&&h.jsx(hx,{isOpen:!!o,onClose:()=>l(null),item:o})]})},fx=({items:t,onRecordStockChange:e,providers:n})=>{const[r,s]=O.useState(null),i=t.filter(u=>u.currentStock<=u.minStock);if(i.length===0)return h.jsx("p",{className:"text-center text-gray-500 mt-8",children:"Todo en orden! No hay nada en la lista de compras."});const o=i.reduce((u,d)=>{const p=d.providerPreferido||"Sin Proveedor";return u[p]||(u[p]=[]),u[p].push(d),u},{}),l=Object.keys(o).sort((u,d)=>u==="Sin Proveedor"?1:d==="Sin Proveedor"?-1:u.localeCompare(d));return h.jsxs("div",{className:"space-y-6",children:[l.map(u=>h.jsxs("div",{children:[h.jsxs("h3",{className:"text-lg font-bold text-blue-700 pb-2 border-b border-gray-300 mb-4 flex items-center gap-2",children:[h.jsx(he,{name:"store",size:20}),u]}),h.jsx("div",{className:"space-y-3",children:o[u].map(d=>h.jsxs("div",{className:"p-4 bg-red-50 border border-red-300 rounded-lg flex flex-col md:flex-row justify-between md:items-center gap-3",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-bold",children:d.name}),h.jsxs("p",{className:"text-sm text-red-700 font-semibold",children:["Quedan: ",d.currentStock," ",d.unit," (Mn: ",d.minStock," ",d.unit,")"]})]}),h.jsxs("button",{onClick:()=>s(d),className:"flex-shrink-0 flex items-center justify-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm self-start md:self-center",children:[h.jsx(he,{name:"plus-circle",size:16}),"Registrar Compra"]})]},d.id))})]},u)),r&&h.jsx(tv,{isOpen:!!r,onClose:()=>s(null),item:r,isAdding:!0,onUpdate:e,providers:n})]})},px=({isOpen:t,onClose:e,onSave:n,onDelete:r,item:s,providers:i,categories:o})=>{const[l,u]=O.useState(""),[d,p]=O.useState(""),[g,m]=O.useState(""),[x,A]=O.useState("0"),[P,b]=O.useState(Eu[0]),[I,_]=O.useState("0"),[C,D]=O.useState("");O.useEffect(()=>{t&&(u((s==null?void 0:s.name)||""),p((s==null?void 0:s.category)||(o.length>0?o[0].name:"")),m((s==null?void 0:s.providerPreferido)||""),A(String((s==null?void 0:s.currentStock)||0)),b((s==null?void 0:s.unit)||Eu[0]),_(String((s==null?void 0:s.minStock)||0)),D(""))},[t,s,o]);const F=E=>{E.preventDefault(),D("");const y=parseFloat(x),T=parseFloat(I);if(!l.trim()){D("El nombre es obligatorio.");return}if(!P.trim()){D("La unidad es obligatoria.");return}if(isNaN(y)||y<0){D("Stock debe ser un nmero positivo.");return}if(isNaN(T)||T<0){D("Nivel mnimo debe ser un nmero positivo.");return}if(s){const S={...s,name:l.trim(),category:d.trim()||"Sin Categora",providerPreferido:g.trim(),currentStock:y,unit:P.trim(),minStock:T};n(S)}else{const S={name:l.trim(),category:d.trim()||"Sin Categora",providerPreferido:g.trim(),currentStock:y,unit:P.trim(),minStock:T};n(S)}e()},M=()=>{s&&window.confirm(`Ests seguro de que quieres eliminar "${s.name}"?`)&&(r(s.id),e())};return h.jsx(_n,{isOpen:t,onClose:e,title:s?"Editar Producto":"Aadir Producto",children:h.jsxs("form",{onSubmit:F,className:"flex flex-col gap-4",children:[h.jsx(br,{label:"Nombre del Producto",children:h.jsx("input",{type:"text",value:l,onChange:E=>u(E.target.value),required:!0})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsx(br,{label:"Categora",children:h.jsxs("select",{value:d,onChange:E=>p(E.target.value),children:[h.jsx("option",{value:"",children:"Sin Categora"}),o.map(E=>h.jsx("option",{value:E.name,children:E.name},E.id))]})}),h.jsx(br,{label:"Proveedor Preferido",children:h.jsxs("select",{value:g,onChange:E=>m(E.target.value),children:[h.jsx("option",{value:"",children:"Sin Proveedor"}),i.map(E=>h.jsx("option",{value:E.name,children:E.name},E.id))]})})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsx(br,{label:"Stock Actual",children:h.jsx("input",{type:"number",value:x,onChange:E=>A(E.target.value),step:"any",min:"0",required:!0})}),h.jsx(br,{label:"Unidad",children:h.jsx("select",{value:P,onChange:E=>b(E.target.value),required:!0,children:Eu.map(E=>h.jsx("option",{value:E,children:E},E))})})]}),h.jsx(br,{label:"Nivel Mnimo (para Alertas)",children:h.jsx("input",{type:"number",value:I,onChange:E=>_(E.target.value),step:"any",min:"0",required:!0})}),C&&h.jsx("p",{className:"text-sm text-red-600 text-center",children:C}),h.jsxs("div",{className:"flex justify-between items-center mt-4",children:[h.jsx("div",{children:s&&h.jsx("button",{type:"button",onClick:M,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Eliminar"})}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),h.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})]})})},br=({label:t,children:e})=>h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:t}),Zc.cloneElement(e,{className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),mx=({inventoryHook:t,providers:e,categories:n})=>{const{items:r,addItem:s,updateItem:i,deleteItem:o,recordStockChange:l}=t,[u,d]=O.useState("general"),[p,g]=O.useState(""),[m,x]=O.useState(!1),[A,P]=O.useState(null),b=M=>{P(M),x(!0)},I=()=>{P(null),x(!0)},_=()=>{x(!1),P(null)},C=M=>{"id"in M?i(M):s(M)},D=O.useMemo(()=>r.filter(M=>M.name.toLowerCase().includes(p.toLowerCase())),[r,p]),F=({view:M,label:E,icon:y})=>h.jsxs("button",{onClick:()=>d(M),className:`flex items-center gap-2 py-2 px-4 text-sm md:text-base font-bold border-b-4 transition-colors ${u===M?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-800"}`,children:[h.jsx(he,{name:y,size:18}),E]});return h.jsxs("div",{className:"flex flex-col h-full bg-gray-50",children:[h.jsxs("div",{className:"operations-header flex flex-col md:flex-row md:flex-wrap justify-between items-center p-4 border-b border-gray-200 gap-4 flex-shrink-0",children:[h.jsx("div",{className:"operations-actions",children:h.jsxs("button",{onClick:I,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[h.jsx(he,{name:"plus-circle",size:16}),"Aadir Producto"]})}),h.jsxs("div",{className:"inventory-tabs flex gap-4",children:[h.jsx(F,{view:"general",label:"Inventario General",icon:"boxes"}),h.jsx(F,{view:"shopping-list",label:"Lista de Compras",icon:"shopping-cart"})]})]}),h.jsx("div",{className:"search-bar-container p-4 flex-shrink-0",children:h.jsx("input",{type:"search",value:p,onChange:M=>g(M.target.value),placeholder:"Buscar producto...",className:"w-full p-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),h.jsx("div",{className:"flex-grow overflow-y-auto px-4 pb-4",children:u==="general"?h.jsx(dx,{items:D,onEdit:b,onRecordStockChange:l,providers:e}):h.jsx(fx,{items:D,onRecordStockChange:l,providers:e})}),h.jsx(px,{isOpen:m,onClose:_,onSave:C,onDelete:o,item:A,providers:e,categories:n})]})};var Bp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},gx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},rv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,g=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,x=d&63;u||(x=64,o||(m=64)),r.push(n[p],n[g],n[m],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||g==null)throw new yx;const m=i<<2|l>>4;if(r.push(m),d!==64){const x=l<<4&240|d>>2;if(r.push(x),g!==64){const A=d<<6&192|g;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vx=function(t){const e=nv(t);return rv.encodeByteArray(e,!0)},Ma=function(t){return vx(t).replace(/\./g,"")},_x=function(t){try{return rv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=()=>wx().__FIREBASE_DEFAULTS__,xx=()=>{if(typeof process>"u"||typeof Bp>"u")return;const t=Bp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Tx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_x(t[1]);return e&&JSON.parse(e)},Hh=()=>{try{return Ex()||xx()||Tx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ix=t=>{var e,n;return(n=(e=Hh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Sx=t=>{const e=Ix(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sv=()=>{var t;return(t=Hh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ma(JSON.stringify(n)),Ma(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Px(){var t;const e=(t=Hh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Rx(){return!Px()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nx(){try{return typeof indexedDB=="object"}catch{return!1}}function bx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="FirebaseError";class xs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Dx,Object.setPrototypeOf(this,xs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,iv.prototype.create)}}class iv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Vx(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new xs(s,l,r)}}function Vx(t,e){return t.replace(jx,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const jx=/\{\$([^}]+)}/g;function Oa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if($p(i)&&$p(o)){if(!Oa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function $p(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class Vi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ax;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Lx(e))try{this.getOrInitializeService({instanceIdentifier:sr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=sr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sr){return this.instances.has(e)}getOptions(e=sr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ox(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sr){return this.component?this.component.multipleInstances?e:sr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ox(t){return t===sr?void 0:t}function Lx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Mx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const Ux={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},zx=re.INFO,Bx={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},$x=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Bx[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ov{constructor(e){this.name=e,this._logLevel=zx,this._logHandler=$x,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ux[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const Hx=(t,e)=>e.some(n=>t instanceof n);let Hp,qp;function qx(){return Hp||(Hp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wx(){return qp||(qp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const av=new WeakMap,Sc=new WeakMap,lv=new WeakMap,Tu=new WeakMap,qh=new WeakMap;function Qx(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Fn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&av.set(n,t)}).catch(()=>{}),qh.set(e,t),e}function Kx(t){if(Sc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Sc.set(t,e)}let Ac={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Gx(t){Ac=t(Ac)}function Yx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Iu(this),e,...n);return lv.set(r,e.sort?e.sort():[e]),Fn(r)}:Wx().includes(t)?function(...e){return t.apply(Iu(this),e),Fn(av.get(this))}:function(...e){return Fn(t.apply(Iu(this),e))}}function Xx(t){return typeof t=="function"?Yx(t):(t instanceof IDBTransaction&&Kx(t),Hx(t,qx())?new Proxy(t,Ac):t)}function Fn(t){if(t instanceof IDBRequest)return Qx(t);if(Tu.has(t))return Tu.get(t);const e=Xx(t);return e!==t&&(Tu.set(t,e),qh.set(e,t)),e}const Iu=t=>qh.get(t);function Jx(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Fn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Fn(o.result),u.oldVersion,u.newVersion,Fn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Zx=["get","getKey","getAll","getAllKeys","count"],eT=["put","add","delete","clear"],Su=new Map;function Wp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Su.get(e))return Su.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=eT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Zx.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Su.set(e,i),i}Gx(t=>({...t,get:(e,n,r)=>Wp(e,n)||t.get(e,n,r),has:(e,n)=>!!Wp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cc="@firebase/app",Qp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn=new ov("@firebase/app"),rT="@firebase/app-compat",sT="@firebase/analytics-compat",iT="@firebase/analytics",oT="@firebase/app-check-compat",aT="@firebase/app-check",lT="@firebase/auth",uT="@firebase/auth-compat",cT="@firebase/database",hT="@firebase/data-connect",dT="@firebase/database-compat",fT="@firebase/functions",pT="@firebase/functions-compat",mT="@firebase/installations",gT="@firebase/installations-compat",yT="@firebase/messaging",vT="@firebase/messaging-compat",_T="@firebase/performance",wT="@firebase/performance-compat",ET="@firebase/remote-config",xT="@firebase/remote-config-compat",TT="@firebase/storage",IT="@firebase/storage-compat",ST="@firebase/firestore",AT="@firebase/vertexai-preview",CT="@firebase/firestore-compat",kT="firebase",PT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="[DEFAULT]",RT={[Cc]:"fire-core",[rT]:"fire-core-compat",[iT]:"fire-analytics",[sT]:"fire-analytics-compat",[aT]:"fire-app-check",[oT]:"fire-app-check-compat",[lT]:"fire-auth",[uT]:"fire-auth-compat",[cT]:"fire-rtdb",[hT]:"fire-data-connect",[dT]:"fire-rtdb-compat",[fT]:"fire-fn",[pT]:"fire-fn-compat",[mT]:"fire-iid",[gT]:"fire-iid-compat",[yT]:"fire-fcm",[vT]:"fire-fcm-compat",[_T]:"fire-perf",[wT]:"fire-perf-compat",[ET]:"fire-rc",[xT]:"fire-rc-compat",[TT]:"fire-gcs",[IT]:"fire-gcs-compat",[ST]:"fire-fst",[CT]:"fire-fst-compat",[AT]:"fire-vertex","fire-js":"fire-js",[kT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=new Map,NT=new Map,Pc=new Map;function Kp(t,e){try{t.container.addComponent(e)}catch(n){mn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fa(t){const e=t.name;if(Pc.has(e))return mn.debug(`There were multiple attempts to register component ${e}.`),!1;Pc.set(e,t);for(const n of La.values())Kp(n,t);for(const n of NT.values())Kp(n,t);return!0}function bT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Un=new iv("app","Firebase",DT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=PT;function uv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:kc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Un.create("bad-app-name",{appName:String(s)});if(n||(n=sv()),!n)throw Un.create("no-options");const i=La.get(s);if(i){if(Oa(n,i.options)&&Oa(r,i.config))return i;throw Un.create("duplicate-app",{appName:s})}const o=new Fx(s);for(const u of Pc.values())o.addComponent(u);const l=new VT(n,r,o);return La.set(s,l),l}function MT(t=kc){const e=La.get(t);if(!e&&t===kc&&sv())return uv();if(!e)throw Un.create("no-app",{appName:t});return e}function es(t,e,n){var r;let s=(r=RT[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mn.warn(l.join(" "));return}Fa(new Vi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="firebase-heartbeat-database",LT=1,ji="firebase-heartbeat-store";let Au=null;function cv(){return Au||(Au=Jx(OT,LT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ji)}catch(n){console.warn(n)}}}}).catch(t=>{throw Un.create("idb-open",{originalErrorMessage:t.message})})),Au}async function FT(t){try{const n=(await cv()).transaction(ji),r=await n.objectStore(ji).get(hv(t));return await n.done,r}catch(e){if(e instanceof xs)mn.warn(e.message);else{const n=Un.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mn.warn(n.message)}}}async function Gp(t,e){try{const r=(await cv()).transaction(ji,"readwrite");await r.objectStore(ji).put(e,hv(t)),await r.done}catch(n){if(n instanceof xs)mn.warn(n.message);else{const r=Un.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mn.warn(r.message)}}}function hv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=1024,zT=30*24*60*60*1e3;class BT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Yp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=zT}),this._storage.overwrite(this._heartbeatsCache))}catch(r){mn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Yp(),{heartbeatsToSend:r,unsentEntries:s}=$T(this._heartbeatsCache.heartbeats),i=Ma(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return mn.warn(n),""}}}function Yp(){return new Date().toISOString().substring(0,10)}function $T(t,e=UT){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Xp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Xp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nx()?bx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Gp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Gp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Xp(t){return Ma(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t){Fa(new Vi("platform-logger",e=>new tT(e),"PRIVATE")),Fa(new Vi("heartbeat",e=>new BT(e),"PRIVATE")),es(Cc,Qp,t),es(Cc,Qp,"esm2017"),es("fire-js","")}qT("");var WT="firebase",QT="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es(WT,QT,"app");var Jp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hr,dv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function T(){}T.prototype=y.prototype,E.D=y.prototype,E.prototype=new T,E.prototype.constructor=E,E.C=function(S,k,R){for(var w=Array(arguments.length-2),G=2;G<arguments.length;G++)w[G-2]=arguments[G];return y.prototype[k].apply(S,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,y,T){T||(T=0);var S=Array(16);if(typeof y=="string")for(var k=0;16>k;++k)S[k]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(k=0;16>k;++k)S[k]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=E.g[0],T=E.g[1],k=E.g[2];var R=E.g[3],w=y+(R^T&(k^R))+S[0]+3614090360&4294967295;y=T+(w<<7&4294967295|w>>>25),w=R+(k^y&(T^k))+S[1]+3905402710&4294967295,R=y+(w<<12&4294967295|w>>>20),w=k+(T^R&(y^T))+S[2]+606105819&4294967295,k=R+(w<<17&4294967295|w>>>15),w=T+(y^k&(R^y))+S[3]+3250441966&4294967295,T=k+(w<<22&4294967295|w>>>10),w=y+(R^T&(k^R))+S[4]+4118548399&4294967295,y=T+(w<<7&4294967295|w>>>25),w=R+(k^y&(T^k))+S[5]+1200080426&4294967295,R=y+(w<<12&4294967295|w>>>20),w=k+(T^R&(y^T))+S[6]+2821735955&4294967295,k=R+(w<<17&4294967295|w>>>15),w=T+(y^k&(R^y))+S[7]+4249261313&4294967295,T=k+(w<<22&4294967295|w>>>10),w=y+(R^T&(k^R))+S[8]+1770035416&4294967295,y=T+(w<<7&4294967295|w>>>25),w=R+(k^y&(T^k))+S[9]+2336552879&4294967295,R=y+(w<<12&4294967295|w>>>20),w=k+(T^R&(y^T))+S[10]+4294925233&4294967295,k=R+(w<<17&4294967295|w>>>15),w=T+(y^k&(R^y))+S[11]+2304563134&4294967295,T=k+(w<<22&4294967295|w>>>10),w=y+(R^T&(k^R))+S[12]+1804603682&4294967295,y=T+(w<<7&4294967295|w>>>25),w=R+(k^y&(T^k))+S[13]+4254626195&4294967295,R=y+(w<<12&4294967295|w>>>20),w=k+(T^R&(y^T))+S[14]+2792965006&4294967295,k=R+(w<<17&4294967295|w>>>15),w=T+(y^k&(R^y))+S[15]+1236535329&4294967295,T=k+(w<<22&4294967295|w>>>10),w=y+(k^R&(T^k))+S[1]+4129170786&4294967295,y=T+(w<<5&4294967295|w>>>27),w=R+(T^k&(y^T))+S[6]+3225465664&4294967295,R=y+(w<<9&4294967295|w>>>23),w=k+(y^T&(R^y))+S[11]+643717713&4294967295,k=R+(w<<14&4294967295|w>>>18),w=T+(R^y&(k^R))+S[0]+3921069994&4294967295,T=k+(w<<20&4294967295|w>>>12),w=y+(k^R&(T^k))+S[5]+3593408605&4294967295,y=T+(w<<5&4294967295|w>>>27),w=R+(T^k&(y^T))+S[10]+38016083&4294967295,R=y+(w<<9&4294967295|w>>>23),w=k+(y^T&(R^y))+S[15]+3634488961&4294967295,k=R+(w<<14&4294967295|w>>>18),w=T+(R^y&(k^R))+S[4]+3889429448&4294967295,T=k+(w<<20&4294967295|w>>>12),w=y+(k^R&(T^k))+S[9]+568446438&4294967295,y=T+(w<<5&4294967295|w>>>27),w=R+(T^k&(y^T))+S[14]+3275163606&4294967295,R=y+(w<<9&4294967295|w>>>23),w=k+(y^T&(R^y))+S[3]+4107603335&4294967295,k=R+(w<<14&4294967295|w>>>18),w=T+(R^y&(k^R))+S[8]+1163531501&4294967295,T=k+(w<<20&4294967295|w>>>12),w=y+(k^R&(T^k))+S[13]+2850285829&4294967295,y=T+(w<<5&4294967295|w>>>27),w=R+(T^k&(y^T))+S[2]+4243563512&4294967295,R=y+(w<<9&4294967295|w>>>23),w=k+(y^T&(R^y))+S[7]+1735328473&4294967295,k=R+(w<<14&4294967295|w>>>18),w=T+(R^y&(k^R))+S[12]+2368359562&4294967295,T=k+(w<<20&4294967295|w>>>12),w=y+(T^k^R)+S[5]+4294588738&4294967295,y=T+(w<<4&4294967295|w>>>28),w=R+(y^T^k)+S[8]+2272392833&4294967295,R=y+(w<<11&4294967295|w>>>21),w=k+(R^y^T)+S[11]+1839030562&4294967295,k=R+(w<<16&4294967295|w>>>16),w=T+(k^R^y)+S[14]+4259657740&4294967295,T=k+(w<<23&4294967295|w>>>9),w=y+(T^k^R)+S[1]+2763975236&4294967295,y=T+(w<<4&4294967295|w>>>28),w=R+(y^T^k)+S[4]+1272893353&4294967295,R=y+(w<<11&4294967295|w>>>21),w=k+(R^y^T)+S[7]+4139469664&4294967295,k=R+(w<<16&4294967295|w>>>16),w=T+(k^R^y)+S[10]+3200236656&4294967295,T=k+(w<<23&4294967295|w>>>9),w=y+(T^k^R)+S[13]+681279174&4294967295,y=T+(w<<4&4294967295|w>>>28),w=R+(y^T^k)+S[0]+3936430074&4294967295,R=y+(w<<11&4294967295|w>>>21),w=k+(R^y^T)+S[3]+3572445317&4294967295,k=R+(w<<16&4294967295|w>>>16),w=T+(k^R^y)+S[6]+76029189&4294967295,T=k+(w<<23&4294967295|w>>>9),w=y+(T^k^R)+S[9]+3654602809&4294967295,y=T+(w<<4&4294967295|w>>>28),w=R+(y^T^k)+S[12]+3873151461&4294967295,R=y+(w<<11&4294967295|w>>>21),w=k+(R^y^T)+S[15]+530742520&4294967295,k=R+(w<<16&4294967295|w>>>16),w=T+(k^R^y)+S[2]+3299628645&4294967295,T=k+(w<<23&4294967295|w>>>9),w=y+(k^(T|~R))+S[0]+4096336452&4294967295,y=T+(w<<6&4294967295|w>>>26),w=R+(T^(y|~k))+S[7]+1126891415&4294967295,R=y+(w<<10&4294967295|w>>>22),w=k+(y^(R|~T))+S[14]+2878612391&4294967295,k=R+(w<<15&4294967295|w>>>17),w=T+(R^(k|~y))+S[5]+4237533241&4294967295,T=k+(w<<21&4294967295|w>>>11),w=y+(k^(T|~R))+S[12]+1700485571&4294967295,y=T+(w<<6&4294967295|w>>>26),w=R+(T^(y|~k))+S[3]+2399980690&4294967295,R=y+(w<<10&4294967295|w>>>22),w=k+(y^(R|~T))+S[10]+4293915773&4294967295,k=R+(w<<15&4294967295|w>>>17),w=T+(R^(k|~y))+S[1]+2240044497&4294967295,T=k+(w<<21&4294967295|w>>>11),w=y+(k^(T|~R))+S[8]+1873313359&4294967295,y=T+(w<<6&4294967295|w>>>26),w=R+(T^(y|~k))+S[15]+4264355552&4294967295,R=y+(w<<10&4294967295|w>>>22),w=k+(y^(R|~T))+S[6]+2734768916&4294967295,k=R+(w<<15&4294967295|w>>>17),w=T+(R^(k|~y))+S[13]+1309151649&4294967295,T=k+(w<<21&4294967295|w>>>11),w=y+(k^(T|~R))+S[4]+4149444226&4294967295,y=T+(w<<6&4294967295|w>>>26),w=R+(T^(y|~k))+S[11]+3174756917&4294967295,R=y+(w<<10&4294967295|w>>>22),w=k+(y^(R|~T))+S[2]+718787259&4294967295,k=R+(w<<15&4294967295|w>>>17),w=T+(R^(k|~y))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(k+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+k&4294967295,E.g[3]=E.g[3]+R&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var T=y-this.blockSize,S=this.B,k=this.h,R=0;R<y;){if(k==0)for(;R<=T;)s(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<y;)if(S[k++]=E.charCodeAt(R++),k==this.blockSize){s(this,S),k=0;break}}else for(;R<y;)if(S[k++]=E[R++],k==this.blockSize){s(this,S),k=0;break}}this.h=k,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var T=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=T&255,T/=256;for(this.u(E),E=Array(16),y=T=0;4>y;++y)for(var S=0;32>S;S+=8)E[T++]=this.g[y]>>>S&255;return E};function i(E,y){var T=l;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=y(E)}function o(E,y){this.h=y;for(var T=[],S=!0,k=E.length-1;0<=k;k--){var R=E[k]|0;S&&R==y||(T[k]=R,S=!1)}this.g=T}var l={};function u(E){return-128<=E&&128>E?i(E,function(y){return new o([y|0],0>y?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return b(d(-E));for(var y=[],T=1,S=0;E>=T;S++)y[S]=E/T|0,T*=4294967296;return new o(y,0)}function p(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return b(p(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(y,8)),S=g,k=0;k<E.length;k+=8){var R=Math.min(8,E.length-k),w=parseInt(E.substring(k,k+R),y);8>R?(R=d(Math.pow(y,R)),S=S.j(R).add(d(w))):(S=S.j(T),S=S.add(d(w)))}return S}var g=u(0),m=u(1),x=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-b(this).m();for(var E=0,y=1,T=0;T<this.g.length;T++){var S=this.i(T);E+=(0<=S?S:4294967296+S)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A(this))return"0";if(P(this))return"-"+b(this).toString(E);for(var y=d(Math.pow(E,6)),T=this,S="";;){var k=D(T,y).g;T=I(T,k.j(y));var R=((0<T.g.length?T.g[0]:T.h)>>>0).toString(E);if(T=k,A(T))return R+S;for(;6>R.length;)R="0"+R;S=R+S}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function A(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function P(E){return E.h==-1}t.l=function(E){return E=I(this,E),P(E)?-1:A(E)?0:1};function b(E){for(var y=E.g.length,T=[],S=0;S<y;S++)T[S]=~E.g[S];return new o(T,~E.h).add(m)}t.abs=function(){return P(this)?b(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0,k=0;k<=y;k++){var R=S+(this.i(k)&65535)+(E.i(k)&65535),w=(R>>>16)+(this.i(k)>>>16)+(E.i(k)>>>16);S=w>>>16,R&=65535,w&=65535,T[k]=w<<16|R}return new o(T,T[T.length-1]&-2147483648?-1:0)};function I(E,y){return E.add(b(y))}t.j=function(E){if(A(this)||A(E))return g;if(P(this))return P(E)?b(this).j(b(E)):b(b(this).j(E));if(P(E))return b(this.j(b(E)));if(0>this.l(x)&&0>E.l(x))return d(this.m()*E.m());for(var y=this.g.length+E.g.length,T=[],S=0;S<2*y;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var k=0;k<E.g.length;k++){var R=this.i(S)>>>16,w=this.i(S)&65535,G=E.i(k)>>>16,J=E.i(k)&65535;T[2*S+2*k]+=w*J,_(T,2*S+2*k),T[2*S+2*k+1]+=R*J,_(T,2*S+2*k+1),T[2*S+2*k+1]+=w*G,_(T,2*S+2*k+1),T[2*S+2*k+2]+=R*G,_(T,2*S+2*k+2)}for(S=0;S<y;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=y;S<2*y;S++)T[S]=0;return new o(T,0)};function _(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function C(E,y){this.g=E,this.h=y}function D(E,y){if(A(y))throw Error("division by zero");if(A(E))return new C(g,g);if(P(E))return y=D(b(E),y),new C(b(y.g),b(y.h));if(P(y))return y=D(E,b(y)),new C(b(y.g),y.h);if(30<E.g.length){if(P(E)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var T=m,S=y;0>=S.l(E);)T=F(T),S=F(S);var k=M(T,1),R=M(S,1);for(S=M(S,2),T=M(T,2);!A(S);){var w=R.add(S);0>=w.l(E)&&(k=k.add(T),R=w),S=M(S,1),T=M(T,1)}return y=I(E,k.j(y)),new C(k,y)}for(k=g;0<=E.l(y);){for(T=Math.max(1,Math.floor(E.m()/y.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),R=d(T),w=R.j(y);P(w)||0<w.l(E);)T-=S,R=d(T),w=R.j(y);A(R)&&(R=m),k=k.add(R),E=I(E,w)}return new C(k,E)}t.A=function(E){return D(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)&E.i(S);return new o(T,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)|E.i(S);return new o(T,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)^E.i(S);return new o(T,this.h^E.h)};function F(E){for(var y=E.g.length+1,T=[],S=0;S<y;S++)T[S]=E.i(S)<<1|E.i(S-1)>>>31;return new o(T,E.h)}function M(E,y){var T=y>>5;y%=32;for(var S=E.g.length-T,k=[],R=0;R<S;R++)k[R]=0<y?E.i(R+T)>>>y|E.i(R+T+1)<<32-y:E.i(R+T);return new o(k,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,hr=o}).apply(typeof Jp<"u"?Jp:typeof self<"u"?self:typeof window<"u"?window:{});var Ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fv,ei,pv,oa,Rc,mv,gv,yv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,f){return a==Array.prototype||a==Object.prototype||(a[c]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ho=="object"&&Ho];for(var c=0;c<a.length;++c){var f=a[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,c){if(c)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var N=a[v];if(!(N in f))break e;f=f[N]}a=a[a.length-1],v=f[a],c=c(v),c!=v&&c!=null&&e(f,a,{configurable:!0,writable:!0,value:c})}}function i(a,c){a instanceof String&&(a+="");var f=0,v=!1,N={next:function(){if(!v&&f<a.length){var V=f++;return{value:c(V,a[V]),done:!1}}return v=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}s("Array.prototype.values",function(a){return a||function(){return i(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function d(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function p(a,c,f){return a.call.apply(a.bind,arguments)}function g(a,c,f){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,v),a.apply(c,N)}}return function(){return a.apply(c,arguments)}}function m(a,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,m.apply(null,arguments)}function x(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function A(a,c){function f(){}f.prototype=c.prototype,a.aa=c.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(v,N,V){for(var z=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)z[ce-2]=arguments[ce];return c.prototype[N].apply(v,z)}}function P(a){const c=a.length;if(0<c){const f=Array(c);for(let v=0;v<c;v++)f[v]=a[v];return f}return[]}function b(a,c){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(u(v)){const N=a.length||0,V=v.length||0;a.length=N+V;for(let z=0;z<V;z++)a[N+z]=v[z]}else a.push(v)}}class I{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function _(a){return/^[\s\xa0]*$/.test(a)}function C(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var F=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function M(a,c,f){for(const v in a)c.call(f,a[v],v,a)}function E(a,c){for(const f in a)c.call(void 0,a[f],f,a)}function y(a){const c={};for(const f in a)c[f]=a[f];return c}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,c){let f,v;for(let N=1;N<arguments.length;N++){v=arguments[N];for(f in v)a[f]=v[f];for(let V=0;V<T.length;V++)f=T[V],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function k(a){var c=1;a=a.split(":");const f=[];for(;0<c&&a.length;)f.push(a.shift()),c--;return a.length&&f.push(a.join(":")),f}function R(a){l.setTimeout(()=>{throw a},0)}function w(){var a=K;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class G{constructor(){this.h=this.g=null}add(c,f){const v=J.get();v.set(c,f),this.h?this.h.next=v:this.g=v,this.h=v}}var J=new I(()=>new Ct,a=>a.reset());class Ct{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,B=!1,K=new G,Z=()=>{const a=l.Promise.resolve(void 0);rt=()=>{a.then(ve)}};var ve=()=>{for(var a;a=w();){try{a.h.call(a.g)}catch(f){R(f)}var c=J;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}B=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var Jt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return a}();function Zt(a,c){if(Ae.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(F){e:{try{D(c.nodeName);var N=!0;break e}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=a.fromElement:f=="mouseout"&&(c=a.toElement);this.relatedTarget=c,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:en[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Zt.aa.h.call(this)}}A(Zt,Ae);var en={2:"touch",3:"pen",4:"mouse"};Zt.prototype.h=function(){Zt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var tn="closure_listenable_"+(1e6*Math.random()|0),F0=0;function U0(a,c,f,v,N){this.listener=a,this.proxy=null,this.src=c,this.type=f,this.capture=!!v,this.ha=N,this.key=++F0,this.da=this.fa=!1}function ao(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function lo(a){this.src=a,this.g={},this.h=0}lo.prototype.add=function(a,c,f,v,N){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var z=Cl(a,c,v,N);return-1<z?(c=a[z],f||(c.fa=!1)):(c=new U0(c,this.src,V,!!v,N),c.fa=f,a.push(c)),c};function Al(a,c){var f=c.type;if(f in a.g){var v=a.g[f],N=Array.prototype.indexOf.call(v,c,void 0),V;(V=0<=N)&&Array.prototype.splice.call(v,N,1),V&&(ao(c),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Cl(a,c,f,v){for(var N=0;N<a.length;++N){var V=a[N];if(!V.da&&V.listener==c&&V.capture==!!f&&V.ha==v)return N}return-1}var kl="closure_lm_"+(1e6*Math.random()|0),Pl={};function kd(a,c,f,v,N){if(Array.isArray(c)){for(var V=0;V<c.length;V++)kd(a,c[V],f,v,N);return null}return f=Nd(f),a&&a[tn]?a.K(c,f,d(v)?!!v.capture:!1,N):z0(a,c,f,!1,v,N)}function z0(a,c,f,v,N,V){if(!c)throw Error("Invalid event type");var z=d(N)?!!N.capture:!!N,ce=Nl(a);if(ce||(a[kl]=ce=new lo(a)),f=ce.add(c,f,v,z,V),f.proxy)return f;if(v=B0(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)Jt||(N=z),N===void 0&&(N=!1),a.addEventListener(c.toString(),v,N);else if(a.attachEvent)a.attachEvent(Rd(c.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function B0(){function a(f){return c.call(a.src,a.listener,f)}const c=$0;return a}function Pd(a,c,f,v,N){if(Array.isArray(c))for(var V=0;V<c.length;V++)Pd(a,c[V],f,v,N);else v=d(v)?!!v.capture:!!v,f=Nd(f),a&&a[tn]?(a=a.i,c=String(c).toString(),c in a.g&&(V=a.g[c],f=Cl(V,f,v,N),-1<f&&(ao(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete a.g[c],a.h--)))):a&&(a=Nl(a))&&(c=a.g[c.toString()],a=-1,c&&(a=Cl(c,f,v,N)),(f=-1<a?c[a]:null)&&Rl(f))}function Rl(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[tn])Al(c.i,a);else{var f=a.type,v=a.proxy;c.removeEventListener?c.removeEventListener(f,v,a.capture):c.detachEvent?c.detachEvent(Rd(f),v):c.addListener&&c.removeListener&&c.removeListener(v),(f=Nl(c))?(Al(f,a),f.h==0&&(f.src=null,c[kl]=null)):ao(a)}}}function Rd(a){return a in Pl?Pl[a]:Pl[a]="on"+a}function $0(a,c){if(a.da)a=!0;else{c=new Zt(c,this);var f=a.listener,v=a.ha||a.src;a.fa&&Rl(a),a=f.call(v,c)}return a}function Nl(a){return a=a[kl],a instanceof lo?a:null}var bl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nd(a){return typeof a=="function"?a:(a[bl]||(a[bl]=function(c){return a.handleEvent(c)}),a[bl])}function Qe(){ue.call(this),this.i=new lo(this),this.M=this,this.F=null}A(Qe,ue),Qe.prototype[tn]=!0,Qe.prototype.removeEventListener=function(a,c,f,v){Pd(this,a,c,f,v)};function st(a,c){var f,v=a.F;if(v)for(f=[];v;v=v.F)f.push(v);if(a=a.M,v=c.type||c,typeof c=="string")c=new Ae(c,a);else if(c instanceof Ae)c.target=c.target||a;else{var N=c;c=new Ae(v,a),S(c,N)}if(N=!0,f)for(var V=f.length-1;0<=V;V--){var z=c.g=f[V];N=uo(z,v,!0,c)&&N}if(z=c.g=a,N=uo(z,v,!0,c)&&N,N=uo(z,v,!1,c)&&N,f)for(V=0;V<f.length;V++)z=c.g=f[V],N=uo(z,v,!1,c)&&N}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var f=a.g[c],v=0;v<f.length;v++)ao(f[v]);delete a.g[c],a.h--}}this.F=null},Qe.prototype.K=function(a,c,f,v){return this.i.add(String(a),c,!1,f,v)},Qe.prototype.L=function(a,c,f,v){return this.i.add(String(a),c,!0,f,v)};function uo(a,c,f,v){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,V=0;V<c.length;++V){var z=c[V];if(z&&!z.da&&z.capture==f){var ce=z.listener,Fe=z.ha||z.src;z.fa&&Al(a.i,z),N=ce.call(Fe,v)!==!1&&N}}return N&&!v.defaultPrevented}function bd(a,c,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function Dd(a){a.g=bd(()=>{a.g=null,a.i&&(a.i=!1,Dd(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class H0 extends ue{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Dd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ks(a){ue.call(this),this.h=a,this.g={}}A(ks,ue);var Vd=[];function jd(a){M(a.g,function(c,f){this.g.hasOwnProperty(f)&&Rl(c)},a),a.g={}}ks.prototype.N=function(){ks.aa.N.call(this),jd(this)},ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dl=l.JSON.stringify,q0=l.JSON.parse,W0=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Vl(){}Vl.prototype.h=null;function Md(a){return a.h||(a.h=a.i())}function Od(){}var Ps={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jl(){Ae.call(this,"d")}A(jl,Ae);function Ml(){Ae.call(this,"c")}A(Ml,Ae);var Xn={},Ld=null;function co(){return Ld=Ld||new Qe}Xn.La="serverreachability";function Fd(a){Ae.call(this,Xn.La,a)}A(Fd,Ae);function Rs(a){const c=co();st(c,new Fd(c))}Xn.STAT_EVENT="statevent";function Ud(a,c){Ae.call(this,Xn.STAT_EVENT,a),this.stat=c}A(Ud,Ae);function it(a){const c=co();st(c,new Ud(c,a))}Xn.Ma="timingevent";function zd(a,c){Ae.call(this,Xn.Ma,a),this.size=c}A(zd,Ae);function Ns(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function bs(){this.g=!0}bs.prototype.xa=function(){this.g=!1};function Q0(a,c,f,v,N,V){a.info(function(){if(a.g)if(V)for(var z="",ce=V.split("&"),Fe=0;Fe<ce.length;Fe++){var ie=ce[Fe].split("=");if(1<ie.length){var Ke=ie[0];ie=ie[1];var Ge=Ke.split("_");z=2<=Ge.length&&Ge[1]=="type"?z+(Ke+"="+ie+"&"):z+(Ke+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+v+") [attempt "+N+"]: "+c+`
`+f+`
`+z})}function K0(a,c,f,v,N,V,z){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+N+"]: "+c+`
`+f+`
`+V+" "+z})}function Cr(a,c,f,v){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+Y0(a,f)+(v?" "+v:"")})}function G0(a,c){a.info(function(){return"TIMEOUT: "+c})}bs.prototype.info=function(){};function Y0(a,c){if(!a.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var v=f[a];if(!(2>v.length)){var N=v[1];if(Array.isArray(N)&&!(1>N.length)){var V=N[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return Dl(f)}catch{return c}}var ho={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ol;function fo(){}A(fo,Vl),fo.prototype.g=function(){return new XMLHttpRequest},fo.prototype.i=function(){return{}},Ol=new fo;function wn(a,c,f,v){this.j=a,this.i=c,this.l=f,this.R=v||1,this.U=new ks(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $d}function $d(){this.i=null,this.g="",this.h=!1}var Hd={},Ll={};function Fl(a,c,f){a.L=1,a.v=yo(nn(c)),a.m=f,a.P=!0,qd(a,null)}function qd(a,c){a.F=Date.now(),po(a),a.A=nn(a.v);var f=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),of(f.i,"t",v),a.C=0,f=a.j.J,a.h=new $d,a.g=If(a.j,f?c:null,!a.m),0<a.O&&(a.M=new H0(m(a.Y,a,a.g),a.O)),c=a.U,f=a.g,v=a.ca;var N="readystatechange";Array.isArray(N)||(N&&(Vd[0]=N.toString()),N=Vd);for(var V=0;V<N.length;V++){var z=kd(f,N[V],v||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),Rs(),Q0(a.i,a.u,a.A,a.l,a.R,a.m)}wn.prototype.ca=function(a){a=a.target;const c=this.M;c&&rn(a)==3?c.j():this.Y(a)},wn.prototype.Y=function(a){try{if(a==this.g)e:{const Ge=rn(this.g);var c=this.g.Ba();const Rr=this.g.Z();if(!(3>Ge)&&(Ge!=3||this.g&&(this.h.h||this.g.oa()||ff(this.g)))){this.J||Ge!=4||c==7||(c==8||0>=Rr?Rs(3):Rs(2)),Ul(this);var f=this.g.Z();this.X=f;t:if(Wd(this)){var v=ff(this.g);a="";var N=v.length,V=rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jn(this),Ds(this);var z="";break t}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,a+=this.h.i.decode(v[c],{stream:!(V&&c==N-1)});v.length=0,this.h.g+=a,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,K0(this.i,this.u,this.A,this.l,this.R,Ge,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ce,Fe=this.g;if((ce=Fe.g?Fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ce)){var ie=ce;break t}}ie=null}if(f=ie)Cr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zl(this,f);else{this.o=!1,this.s=3,it(12),Jn(this),Ds(this);break e}}if(this.P){f=!0;let jt;for(;!this.J&&this.C<z.length;)if(jt=X0(this,z),jt==Ll){Ge==4&&(this.s=4,it(14),f=!1),Cr(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Hd){this.s=4,it(15),Cr(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else Cr(this.i,this.l,jt,null),zl(this,jt);if(Wd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||z.length!=0||this.h.h||(this.s=1,it(16),f=!1),this.o=this.o&&f,!f)Cr(this.i,this.l,z,"[Invalid Chunked Response]"),Jn(this),Ds(this);else if(0<z.length&&!this.W){this.W=!0;var Ke=this.j;Ke.g==this&&Ke.ba&&!Ke.M&&(Ke.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Ql(Ke),Ke.M=!0,it(11))}}else Cr(this.i,this.l,z,null),zl(this,z);Ge==4&&Jn(this),this.o&&!this.J&&(Ge==4?wf(this.j,this):(this.o=!1,po(this)))}else p_(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,it(12)):(this.s=0,it(13)),Jn(this),Ds(this)}}}catch{}finally{}};function Wd(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function X0(a,c){var f=a.C,v=c.indexOf(`
`,f);return v==-1?Ll:(f=Number(c.substring(f,v)),isNaN(f)?Hd:(v+=1,v+f>c.length?Ll:(c=c.slice(v,v+f),a.C=v+f,c)))}wn.prototype.cancel=function(){this.J=!0,Jn(this)};function po(a){a.S=Date.now()+a.I,Qd(a,a.I)}function Qd(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ns(m(a.ba,a),c)}function Ul(a){a.B&&(l.clearTimeout(a.B),a.B=null)}wn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(G0(this.i,this.A),this.L!=2&&(Rs(),it(17)),Jn(this),this.s=2,Ds(this)):Qd(this,this.S-a)};function Ds(a){a.j.G==0||a.J||wf(a.j,a)}function Jn(a){Ul(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,jd(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function zl(a,c){try{var f=a.j;if(f.G!=0&&(f.g==a||Bl(f.h,a))){if(!a.K&&Bl(f.h,a)&&f.G==3){try{var v=f.Da.g.parse(c)}catch{v=null}if(Array.isArray(v)&&v.length==3){var N=v;if(N[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)To(f),Eo(f);else break e;Wl(f),it(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ns(m(f.Za,f),6e3));if(1>=Yd(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else er(f,11)}else if((a.K||f.g==a)&&To(f),!_(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let ie=N[c];if(f.T=ie[0],ie=ie[1],f.G==2)if(ie[0]=="c"){f.K=ie[1],f.ia=ie[2];const Ke=ie[3];Ke!=null&&(f.la=Ke,f.j.info("VER="+f.la));const Ge=ie[4];Ge!=null&&(f.Aa=Ge,f.j.info("SVER="+f.Aa));const Rr=ie[5];Rr!=null&&typeof Rr=="number"&&0<Rr&&(v=1.5*Rr,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const jt=a.g;if(jt){const So=jt.g?jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(So){var V=v.h;V.g||So.indexOf("spdy")==-1&&So.indexOf("quic")==-1&&So.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&($l(V,V.h),V.h=null))}if(v.D){const Kl=jt.g?jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Kl&&(v.ya=Kl,fe(v.I,v.D,Kl))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var z=a;if(v.qa=Tf(v,v.J?v.ia:null,v.W),z.K){Xd(v.h,z);var ce=z,Fe=v.L;Fe&&(ce.I=Fe),ce.B&&(Ul(ce),po(ce)),v.g=z}else vf(v);0<f.i.length&&xo(f)}else ie[0]!="stop"&&ie[0]!="close"||er(f,7);else f.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?er(f,7):ql(f):ie[0]!="noop"&&f.l&&f.l.ta(ie),f.v=0)}}Rs(4)}catch{}}var J0=class{constructor(a,c){this.g=a,this.map=c}};function Kd(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gd(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Yd(a){return a.h?1:a.g?a.g.size:0}function Bl(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function $l(a,c){a.g?a.g.add(c):a.h=c}function Xd(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}Kd.prototype.cancel=function(){if(this.i=Jd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Jd(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const f of a.g.values())c=c.concat(f.D);return c}return P(a.i)}function Z0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],f=a.length,v=0;v<f;v++)c.push(a[v]);return c}c=[],f=0;for(v in a)c[f++]=a[v];return c}function e_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var f=0;f<a;f++)c.push(f);return c}c=[],f=0;for(const v in a)c[f++]=v;return c}}}function Zd(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var f=e_(a),v=Z0(a),N=v.length,V=0;V<N;V++)c.call(void 0,v[V],f&&f[V],a)}var ef=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function t_(a,c){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var v=a[f].indexOf("="),N=null;if(0<=v){var V=a[f].substring(0,v);N=a[f].substring(v+1)}else V=a[f];c(V,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Zn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Zn){this.h=a.h,mo(this,a.j),this.o=a.o,this.g=a.g,go(this,a.s),this.l=a.l;var c=a.i,f=new Ms;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),tf(this,f),this.m=a.m}else a&&(c=String(a).match(ef))?(this.h=!1,mo(this,c[1]||"",!0),this.o=Vs(c[2]||""),this.g=Vs(c[3]||"",!0),go(this,c[4]),this.l=Vs(c[5]||"",!0),tf(this,c[6]||"",!0),this.m=Vs(c[7]||"")):(this.h=!1,this.i=new Ms(null,this.h))}Zn.prototype.toString=function(){var a=[],c=this.j;c&&a.push(js(c,nf,!0),":");var f=this.g;return(f||c=="file")&&(a.push("//"),(c=this.o)&&a.push(js(c,nf,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(js(f,f.charAt(0)=="/"?s_:r_,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",js(f,o_)),a.join("")};function nn(a){return new Zn(a)}function mo(a,c,f){a.j=f?Vs(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function go(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function tf(a,c,f){c instanceof Ms?(a.i=c,a_(a.i,a.h)):(f||(c=js(c,i_)),a.i=new Ms(c,a.h))}function fe(a,c,f){a.i.set(c,f)}function yo(a){return fe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Vs(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function js(a,c,f){return typeof a=="string"?(a=encodeURI(a).replace(c,n_),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function n_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var nf=/[#\/\?@]/g,r_=/[#\?:]/g,s_=/[#\?]/g,i_=/[#\?@]/g,o_=/#/g;function Ms(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function En(a){a.g||(a.g=new Map,a.h=0,a.i&&t_(a.i,function(c,f){a.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=Ms.prototype,t.add=function(a,c){En(this),this.i=null,a=kr(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(c),this.h+=1,this};function rf(a,c){En(a),c=kr(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function sf(a,c){return En(a),c=kr(a,c),a.g.has(c)}t.forEach=function(a,c){En(this),this.g.forEach(function(f,v){f.forEach(function(N){a.call(c,N,v,this)},this)},this)},t.na=function(){En(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let v=0;v<c.length;v++){const N=a[v];for(let V=0;V<N.length;V++)f.push(c[v])}return f},t.V=function(a){En(this);let c=[];if(typeof a=="string")sf(this,a)&&(c=c.concat(this.g.get(kr(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)c=c.concat(a[f])}return c},t.set=function(a,c){return En(this),this.i=null,a=kr(this,a),sf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function of(a,c,f){rf(a,c),0<f.length&&(a.i=null,a.g.set(kr(a,c),P(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var v=c[f];const V=encodeURIComponent(String(v)),z=this.V(v);for(v=0;v<z.length;v++){var N=V;z[v]!==""&&(N+="="+encodeURIComponent(String(z[v]))),a.push(N)}}return this.i=a.join("&")};function kr(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function a_(a,c){c&&!a.j&&(En(a),a.i=null,a.g.forEach(function(f,v){var N=v.toLowerCase();v!=N&&(rf(this,v),of(this,N,f))},a)),a.j=c}function l_(a,c){const f=new bs;if(l.Image){const v=new Image;v.onload=x(xn,f,"TestLoadImage: loaded",!0,c,v),v.onerror=x(xn,f,"TestLoadImage: error",!1,c,v),v.onabort=x(xn,f,"TestLoadImage: abort",!1,c,v),v.ontimeout=x(xn,f,"TestLoadImage: timeout",!1,c,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else c(!1)}function u_(a,c){const f=new bs,v=new AbortController,N=setTimeout(()=>{v.abort(),xn(f,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:v.signal}).then(V=>{clearTimeout(N),V.ok?xn(f,"TestPingServer: ok",!0,c):xn(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),xn(f,"TestPingServer: error",!1,c)})}function xn(a,c,f,v,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),v(f)}catch{}}function c_(){this.g=new W0}function h_(a,c,f){const v=f||"";try{Zd(a,function(N,V){let z=N;d(N)&&(z=Dl(N)),c.push(v+V+"="+encodeURIComponent(z))})}catch(N){throw c.push(v+"type="+encodeURIComponent("_badmap")),N}}function vo(a){this.l=a.Ub||null,this.j=a.eb||!1}A(vo,Vl),vo.prototype.g=function(){return new _o(this.l,this.j)},vo.prototype.i=function(a){return function(){return a}}({});function _o(a,c){Qe.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(_o,Qe),t=_o.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,Ls(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ls(this)),this.g&&(this.readyState=3,Ls(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;af(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function af(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?Os(this):Ls(this),this.readyState==3&&af(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Os(this))},t.Qa=function(a){this.g&&(this.response=a,Os(this))},t.ga=function(){this.g&&Os(this)};function Os(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ls(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=c.next();return a.join(`\r
`)};function Ls(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function lf(a){let c="";return M(a,function(f,v){c+=v,c+=":",c+=f,c+=`\r
`}),c}function Hl(a,c,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=lf(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):fe(a,c,f))}function Te(a){Qe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Te,Qe);var d_=/^https?$/i,f_=["POST","PUT"];t=Te.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ol.g(),this.v=this.o?Md(this.o):Md(Ol),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(V){uf(this,V);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var N in v)f.set(N,v[N]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const V of v.keys())f.set(V,v.get(V));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),N=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(f_,c,void 0))||v||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of f)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{df(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){uf(this,V)}};function uf(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,cf(a),wo(a)}function cf(a){a.A||(a.A=!0,st(a,"complete"),st(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,st(this,"complete"),st(this,"abort"),wo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wo(this,!0)),Te.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?hf(this):this.bb())},t.bb=function(){hf(this)};function hf(a){if(a.h&&typeof o<"u"&&(!a.v[1]||rn(a)!=4||a.Z()!=2)){if(a.u&&rn(a)==4)bd(a.Ea,0,a);else if(st(a,"readystatechange"),rn(a)==4){a.h=!1;try{const z=a.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var v;if(v=z===0){var N=String(a.D).match(ef)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),v=!d_.test(N?N.toLowerCase():"")}f=v}if(f)st(a,"complete"),st(a,"success");else{a.m=6;try{var V=2<rn(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",cf(a)}}finally{wo(a)}}}}function wo(a,c){if(a.g){df(a);const f=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||st(a,"ready");try{f.onreadystatechange=v}catch{}}}function df(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function rn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),q0(c)}};function ff(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function p_(a){const c={};a=(a.g&&2<=rn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(_(a[v]))continue;var f=k(a[v]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=c[N]||[];c[N]=V,V.push(f)}E(c,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fs(a,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||c}function pf(a){this.Aa=0,this.i=[],this.j=new bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fs("baseRetryDelayMs",5e3,a),this.cb=Fs("retryDelaySeedMs",1e4,a),this.Wa=Fs("forwardChannelMaxRetries",2,a),this.wa=Fs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Kd(a&&a.concurrentRequestLimit),this.Da=new c_,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=pf.prototype,t.la=8,t.G=1,t.connect=function(a,c,f,v){it(0),this.W=a,this.H=c||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=Tf(this,null,this.W),xo(this)};function ql(a){if(mf(a),a.G==3){var c=a.U++,f=nn(a.I);if(fe(f,"SID",a.K),fe(f,"RID",c),fe(f,"TYPE","terminate"),Us(a,f),c=new wn(a,a.j,c),c.L=2,c.v=yo(nn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=If(c.j,null),c.g.ea(c.v)),c.F=Date.now(),po(c)}xf(a)}function Eo(a){a.g&&(Ql(a),a.g.cancel(),a.g=null)}function mf(a){Eo(a),a.u&&(l.clearTimeout(a.u),a.u=null),To(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function xo(a){if(!Gd(a.h)&&!a.s){a.s=!0;var c=a.Ga;rt||Z(),B||(rt(),B=!0),K.add(c,a),a.B=0}}function m_(a,c){return Yd(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ns(m(a.Ga,a,c),Ef(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const N=new wn(this,this.j,a);let V=this.o;if(this.S&&(V?(V=y(V),S(V,this.S)):V=this.S),this.m!==null||this.O||(N.H=V,V=null),this.P)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(c+=v,4096<c){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=yf(this,N,c),f=nn(this.I),fe(f,"RID",a),fe(f,"CVER",22),this.D&&fe(f,"X-HTTP-Session-Id",this.D),Us(this,f),V&&(this.O?c="headers="+encodeURIComponent(String(lf(V)))+"&"+c:this.m&&Hl(f,this.m,V)),$l(this.h,N),this.Ua&&fe(f,"TYPE","init"),this.P?(fe(f,"$req",c),fe(f,"SID","null"),N.T=!0,Fl(N,f,null)):Fl(N,f,c),this.G=2}}else this.G==3&&(a?gf(this,a):this.i.length==0||Gd(this.h)||gf(this))};function gf(a,c){var f;c?f=c.l:f=a.U++;const v=nn(a.I);fe(v,"SID",a.K),fe(v,"RID",f),fe(v,"AID",a.T),Us(a,v),a.m&&a.o&&Hl(v,a.m,a.o),f=new wn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),c&&(a.i=c.D.concat(a.i)),c=yf(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),$l(a.h,f),Fl(f,v,c)}function Us(a,c){a.H&&M(a.H,function(f,v){fe(c,v,f)}),a.l&&Zd({},function(f,v){fe(c,v,f)})}function yf(a,c,f){f=Math.min(a.i.length,f);var v=a.l?m(a.l.Na,a.l,a):null;e:{var N=a.i;let V=-1;for(;;){const z=["count="+f];V==-1?0<f?(V=N[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let ce=!0;for(let Fe=0;Fe<f;Fe++){let ie=N[Fe].g;const Ke=N[Fe].map;if(ie-=V,0>ie)V=Math.max(0,N[Fe].g-100),ce=!1;else try{h_(Ke,z,"req"+ie+"_")}catch{v&&v(Ke)}}if(ce){v=z.join("&");break e}}}return a=a.i.splice(0,f),c.D=a,v}function vf(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;rt||Z(),B||(rt(),B=!0),K.add(c,a),a.v=0}}function Wl(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ns(m(a.Fa,a),Ef(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,_f(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ns(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,it(10),Eo(this),_f(this))};function Ql(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function _f(a){a.g=new wn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=nn(a.qa);fe(c,"RID","rpc"),fe(c,"SID",a.K),fe(c,"AID",a.T),fe(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&fe(c,"TO",a.ja),fe(c,"TYPE","xmlhttp"),Us(a,c),a.m&&a.o&&Hl(c,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=yo(nn(c)),f.m=null,f.P=!0,qd(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Eo(this),Wl(this),it(19))};function To(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function wf(a,c){var f=null;if(a.g==c){To(a),Ql(a),a.g=null;var v=2}else if(Bl(a.h,c))f=c.D,Xd(a.h,c),v=1;else return;if(a.G!=0){if(c.o)if(v==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=a.B;v=co(),st(v,new zd(v,f)),xo(a)}else vf(a);else if(N=c.s,N==3||N==0&&0<c.X||!(v==1&&m_(a,c)||v==2&&Wl(a)))switch(f&&0<f.length&&(c=a.h,c.i=c.i.concat(f)),N){case 1:er(a,5);break;case 4:er(a,10);break;case 3:er(a,6);break;default:er(a,2)}}}function Ef(a,c){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*c}function er(a,c){if(a.j.info("Error code "+c),c==2){var f=m(a.fb,a),v=a.Xa;const N=!v;v=new Zn(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||mo(v,"https"),yo(v),N?l_(v.toString(),f):u_(v.toString(),f)}else it(2);a.G=0,a.l&&a.l.sa(c),xf(a),mf(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function xf(a){if(a.G=0,a.ka=[],a.l){const c=Jd(a.h);(c.length!=0||a.i.length!=0)&&(b(a.ka,c),b(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Tf(a,c,f){var v=f instanceof Zn?nn(f):new Zn(f);if(v.g!="")c&&(v.g=c+"."+v.g),go(v,v.s);else{var N=l.location;v=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var V=new Zn(null);v&&mo(V,v),c&&(V.g=c),N&&go(V,N),f&&(V.l=f),v=V}return f=a.D,c=a.ya,f&&c&&fe(v,f,c),fe(v,"VER",a.la),Us(a,v),v}function If(a,c,f){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new Te(new vo({eb:f})):new Te(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sf(){}t=Sf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Io(){}Io.prototype.g=function(a,c){return new _t(a,c)};function _t(a,c){Qe.call(this),this.g=new pf(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!_(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!_(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new Pr(this)}A(_t,Qe),_t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_t.prototype.close=function(){ql(this.g)},_t.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Dl(a),a=f);c.i.push(new J0(c.Ya++,a)),c.G==3&&xo(c)},_t.prototype.N=function(){this.g.l=null,delete this.j,ql(this.g),delete this.g,_t.aa.N.call(this)};function Af(a){jl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const f in c){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}A(Af,jl);function Cf(){Ml.call(this),this.status=1}A(Cf,Ml);function Pr(a){this.g=a}A(Pr,Sf),Pr.prototype.ua=function(){st(this.g,"a")},Pr.prototype.ta=function(a){st(this.g,new Af(a))},Pr.prototype.sa=function(a){st(this.g,new Cf)},Pr.prototype.ra=function(){st(this.g,"b")},Io.prototype.createWebChannel=Io.prototype.g,_t.prototype.send=_t.prototype.o,_t.prototype.open=_t.prototype.m,_t.prototype.close=_t.prototype.close,yv=function(){return new Io},gv=function(){return co()},mv=Xn,Rc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ho.NO_ERROR=0,ho.TIMEOUT=8,ho.HTTP_ERROR=6,oa=ho,Bd.COMPLETE="complete",pv=Bd,Od.EventType=Ps,Ps.OPEN="a",Ps.CLOSE="b",Ps.ERROR="c",Ps.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,ei=Od,Te.prototype.listenOnce=Te.prototype.L,Te.prototype.getLastError=Te.prototype.Ka,Te.prototype.getLastErrorCode=Te.prototype.Ba,Te.prototype.getStatus=Te.prototype.Z,Te.prototype.getResponseJson=Te.prototype.Oa,Te.prototype.getResponseText=Te.prototype.oa,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Ha,fv=Te}).apply(typeof Ho<"u"?Ho:typeof self<"u"?self:typeof window<"u"?window:{});const Zp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ts="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr=new ov("@firebase/firestore");function Gs(){return vr.logLevel}function q(t,...e){if(vr.logLevel<=re.DEBUG){const n=e.map(Wh);vr.debug(`Firestore (${Ts}): ${t}`,...n)}}function gn(t,...e){if(vr.logLevel<=re.ERROR){const n=e.map(Wh);vr.error(`Firestore (${Ts}): ${t}`,...n)}}function us(t,...e){if(vr.logLevel<=re.WARN){const n=e.map(Wh);vr.warn(`Firestore (${Ts}): ${t}`,...n)}}function Wh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${Ts}) INTERNAL ASSERTION FAILED: `+t;throw gn(e),new Error(e)}function le(t,e){t||Q()}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends xs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ze.UNAUTHENTICATED))}shutdown(){}}class GT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class YT{constructor(e){this.t=e,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new dr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new dr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new vv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new Ze(e)}}class XT{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class JT{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new XT(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class e1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){le(this.o===void 0);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new ZT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=t1(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function cs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ve(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new Ve(0,0))}static max(){return new Y(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class me extends Mi{construct(e,n,r){return new me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new me(n)}static emptyPath(){return new me([])}}const n1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends Mi{construct(e,n,r){return new Be(e,n,r)}static isValidIdentifier(e){return n1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Be(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new $(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new $(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Be(n)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(me.fromString(e))}static fromName(e){return new W(me.fromString(e).popFirst(5))}static empty(){return new W(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new me(e.slice()))}}function r1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Y.fromTimestamp(r===1e9?new Ve(n+1,0):new Ve(n,r));return new Hn(s,W.empty(),e)}function s1(t){return new Hn(t.readTime,t.key,-1)}class Hn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hn(Y.min(),W.empty(),-1)}static max(){return new Hn(Y.max(),W.empty(),-1)}}function i1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ki(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==o1)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{o[d]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function l1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Qh.oe=-1;function cl(t){return t==null}function Ua(t){return t===0&&1/t==-1/0}function u1(t){return typeof t=="number"&&Number.isInteger(t)&&!Ua(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ir(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,n){this.comparator=e,this.root=n||ze.EMPTY}insert(e,n){return new xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ze.BLACK,null,null))}remove(e){return new xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qo(this.root,e,this.comparator,!1)}getReverseIterator(){return new qo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qo(this.root,e,this.comparator,!0)}}class qo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ze{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ze.RED,this.left=s??ze.EMPTY,this.right=i??ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ze(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ze.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}ze.EMPTY=null,ze.RED=!0,ze.BLACK=!1;ze.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new tm(this.data.getIterator())}getIteratorFrom(e){return new tm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new He(this.comparator);return n.data=e,n}}class tm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new xt([])}unionWith(e){let n=new He(Be.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ev("Invalid base64 string: "+i):i}}(e);return new We(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new We(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}We.EMPTY_BYTE_STRING=new We("");const c1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qn(t){if(le(!!t),typeof t=="string"){let e=0;const n=c1.exec(t);if(le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _r(t){return typeof t=="string"?We.fromBase64String(t):We.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gh(t){const e=t.mapValue.fields.__previous_value__;return Kh(e)?Gh(e):e}function Oi(t){const e=qn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Li{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Li("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Li&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo={mapValue:{}};function wr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kh(t)?4:f1(t)?9007199254740991:d1(t)?10:11:Q()}function Xt(t,e){if(t===e)return!0;const n=wr(t);if(n!==wr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oi(t).isEqual(Oi(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=qn(s.timestampValue),l=qn(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return _r(s.bytesValue).isEqual(_r(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ce(s.geoPointValue.latitude)===Ce(i.geoPointValue.latitude)&&Ce(s.geoPointValue.longitude)===Ce(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ce(s.integerValue)===Ce(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ce(s.doubleValue),l=Ce(i.doubleValue);return o===l?Ua(o)===Ua(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return cs(t.arrayValue.values||[],e.arrayValue.values||[],Xt);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(em(o)!==em(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Xt(o[u],l[u])))return!1;return!0}(t,e);default:return Q()}}function Fi(t,e){return(t.values||[]).find(n=>Xt(n,e))!==void 0}function hs(t,e){if(t===e)return 0;const n=wr(t),r=wr(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ce(i.integerValue||i.doubleValue),u=Ce(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return nm(t.timestampValue,e.timestampValue);case 4:return nm(Oi(t),Oi(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(i,o){const l=_r(i),u=_r(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const p=oe(l[d],u[d]);if(p!==0)return p}return oe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=oe(Ce(i.latitude),Ce(o.latitude));return l!==0?l:oe(Ce(i.longitude),Ce(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return rm(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,p;const g=i.fields||{},m=o.fields||{},x=(l=g.value)===null||l===void 0?void 0:l.arrayValue,A=(u=m.value)===null||u===void 0?void 0:u.arrayValue,P=oe(((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0,((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0);return P!==0?P:rm(x,A)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Wo.mapValue&&o===Wo.mapValue)return 0;if(i===Wo.mapValue)return 1;if(o===Wo.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const m=oe(u[g],p[g]);if(m!==0)return m;const x=hs(l[u[g]],d[p[g]]);if(x!==0)return x}return oe(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Q()}}function nm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=qn(t),r=qn(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function rm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=hs(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function ds(t){return Nc(t)}function Nc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _r(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Nc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Nc(n.fields[o])}`;return s+"}"}(t.mapValue):Q()}function sm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bc(t){return!!t&&"integerValue"in t}function Yh(t){return!!t&&"arrayValue"in t}function im(t){return!!t&&"nullValue"in t}function om(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function aa(t){return!!t&&"mapValue"in t}function d1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function fi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ir(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function f1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.value=e}static empty(){return new dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!aa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fi(n)}setAll(e){let n=Be.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=fi(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());aa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];aa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ir(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new dt(fi(this.value))}}function xv(t){const e=[];return Ir(t.fields,(n,r)=>{const s=new Be([n]);if(aa(r)){const i=xv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new xt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new tt(e,0,Y.min(),Y.min(),Y.min(),dt.empty(),0)}static newFoundDocument(e,n,r,s){return new tt(e,1,n,Y.min(),r,s,0)}static newNoDocument(e,n){return new tt(e,2,n,Y.min(),Y.min(),dt.empty(),0)}static newUnknownDocument(e,n){return new tt(e,3,n,Y.min(),Y.min(),dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n){this.position=e,this.inclusive=n}}function am(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=hs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function lm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n="asc"){this.field=e,this.dir=n}}function p1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{}class Ne extends Tv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new g1(e,n,r):n==="array-contains"?new _1(e,r):n==="in"?new w1(e,r):n==="not-in"?new E1(e,r):n==="array-contains-any"?new x1(e,r):new Ne(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new y1(e,r):new v1(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hs(n,this.value)):n!==null&&wr(this.value)===wr(n)&&this.matchesComparison(hs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $t extends Tv{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new $t(e,n)}matches(e){return Iv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Iv(t){return t.op==="and"}function Sv(t){return m1(t)&&Iv(t)}function m1(t){for(const e of t.filters)if(e instanceof $t)return!1;return!0}function Dc(t){if(t instanceof Ne)return t.field.canonicalString()+t.op.toString()+ds(t.value);if(Sv(t))return t.filters.map(e=>Dc(e)).join(",");{const e=t.filters.map(n=>Dc(n)).join(",");return`${t.op}(${e})`}}function Av(t,e){return t instanceof Ne?function(r,s){return s instanceof Ne&&r.op===s.op&&r.field.isEqual(s.field)&&Xt(r.value,s.value)}(t,e):t instanceof $t?function(r,s){return s instanceof $t&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&Av(o,s.filters[l]),!0):!1}(t,e):void Q()}function Cv(t){return t instanceof Ne?function(n){return`${n.field.canonicalString()} ${n.op} ${ds(n.value)}`}(t):t instanceof $t?function(n){return n.op.toString()+" {"+n.getFilters().map(Cv).join(" ,")+"}"}(t):"Filter"}class g1 extends Ne{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class y1 extends Ne{constructor(e,n){super(e,"in",n),this.keys=kv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class v1 extends Ne{constructor(e,n){super(e,"not-in",n),this.keys=kv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class _1 extends Ne{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yh(n)&&Fi(n.arrayValue,this.value)}}class w1 extends Ne{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fi(this.value.arrayValue,n)}}class E1 extends Ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fi(this.value.arrayValue,n)}}class x1 extends Ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Fi(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function um(t,e=null,n=[],r=[],s=null,i=null,o=null){return new T1(t,e,n,r,s,i,o)}function Xh(t){const e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Dc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),cl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ds(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ds(r)).join(",")),e.ue=n}return e.ue}function Jh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!p1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Av(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lm(t.startAt,e.startAt)&&lm(t.endAt,e.endAt)}function Vc(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function I1(t,e,n,r,s,i,o,l){return new Is(t,e,n,r,s,i,o,l)}function Zh(t){return new Is(t)}function cm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Pv(t){return t.collectionGroup!==null}function pi(t){const e=X(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new He(Be.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ui(i,r))}),n.has(Be.keyField().canonicalString())||e.ce.push(new Ui(Be.keyField(),r))}return e.ce}function Gt(t){const e=X(t);return e.le||(e.le=S1(e,pi(t))),e.le}function S1(t,e){if(t.limitType==="F")return um(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ui(s.field,i)});const n=t.endAt?new za(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new za(t.startAt.position,t.startAt.inclusive):null;return um(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function jc(t,e){const n=t.filters.concat([e]);return new Is(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mc(t,e,n){return new Is(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hl(t,e){return Jh(Gt(t),Gt(e))&&t.limitType===e.limitType}function Rv(t){return`${Xh(Gt(t))}|lt:${t.limitType}`}function Dr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Cv(s)).join(", ")}]`),cl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ds(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ds(s)).join(",")),`Target(${r})`}(Gt(t))}; limitType=${t.limitType})`}function dl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of pi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=am(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,pi(r),s)||r.endAt&&!function(o,l,u){const d=am(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,pi(r),s))}(t,e)}function A1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Nv(t){return(e,n)=>{let r=!1;for(const s of pi(t)){const i=C1(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function C1(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?hs(u,d):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ir(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return wv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=new xe(W.comparator);function yn(){return k1}const bv=new xe(W.comparator);function ti(...t){let e=bv;for(const n of t)e=e.insert(n.key,n);return e}function Dv(t){let e=bv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function lr(){return mi()}function Vv(){return mi()}function mi(){return new Ss(t=>t.toString(),(t,e)=>t.isEqual(e))}const P1=new xe(W.comparator),R1=new He(W.comparator);function te(...t){let e=R1;for(const n of t)e=e.add(n);return e}const N1=new He(oe);function b1(){return N1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ua(e)?"-0":e}}function jv(t){return{integerValue:""+t}}function Mv(t,e){return u1(e)?jv(e):ed(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this._=void 0}}function D1(t,e,n){return t instanceof Ba?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Kh(i)&&(i=Gh(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof fs?Lv(t,e):t instanceof zi?Fv(t,e):function(s,i){const o=Ov(s,i),l=hm(o)+hm(s.Pe);return bc(o)&&bc(s.Pe)?jv(l):ed(s.serializer,l)}(t,e)}function V1(t,e,n){return t instanceof fs?Lv(t,e):t instanceof zi?Fv(t,e):n}function Ov(t,e){return t instanceof Bi?function(r){return bc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ba extends fl{}class fs extends fl{constructor(e){super(),this.elements=e}}function Lv(t,e){const n=Uv(e);for(const r of t.elements)n.some(s=>Xt(s,r))||n.push(r);return{arrayValue:{values:n}}}class zi extends fl{constructor(e){super(),this.elements=e}}function Fv(t,e){let n=Uv(e);for(const r of t.elements)n=n.filter(s=>!Xt(s,r));return{arrayValue:{values:n}}}class Bi extends fl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function hm(t){return Ce(t.integerValue||t.doubleValue)}function Uv(t){return Yh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n){this.field=e,this.transform=n}}function j1(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof fs&&s instanceof fs||r instanceof zi&&s instanceof zi?cs(r.elements,s.elements,Xt):r instanceof Bi&&s instanceof Bi?Xt(r.Pe,s.Pe):r instanceof Ba&&s instanceof Ba}(t.transform,e.transform)}class M1{constructor(e,n){this.version=e,this.transformResults=n}}class yt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yt}static exists(e){return new yt(void 0,e)}static updateTime(e){return new yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function la(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pl{}function Bv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ml(t.key,yt.none()):new Yi(t.key,t.data,yt.none());{const n=t.data,r=dt.empty();let s=new He(Be.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Yn(t.key,r,new xt(s.toArray()),yt.none())}}function O1(t,e,n){t instanceof Yi?function(s,i,o){const l=s.value.clone(),u=fm(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Yn?function(s,i,o){if(!la(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=fm(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll($v(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function gi(t,e,n,r){return t instanceof Yi?function(i,o,l,u){if(!la(i.precondition,o))return l;const d=i.value.clone(),p=pm(i.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yn?function(i,o,l,u){if(!la(i.precondition,o))return l;const d=pm(i.fieldTransforms,u,o),p=o.data;return p.setAll($v(i)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,l){return la(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function L1(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Ov(r.transform,s||null);i!=null&&(n===null&&(n=dt.empty()),n.set(r.field,i))}return n||null}function dm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&cs(r,s,(i,o)=>j1(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yi extends pl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yn extends pl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function $v(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function fm(t,e,n){const r=new Map;le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,V1(o,l,n[s]))}return r}function pm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,D1(i,o,e))}return r}class ml extends pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class F1 extends pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&O1(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Vv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=Bv(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&cs(this.mutations,e.mutations,(n,r)=>dm(n,r))&&cs(this.baseMutations,e.baseMutations,(n,r)=>dm(n,r))}}class td{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){le(e.mutations.length===r.length);let s=function(){return P1}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new td(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe,ne;function $1(t){switch(t){default:return Q();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function Hv(t){if(t===void 0)return gn("GRPC error has no .code"),j.UNKNOWN;switch(t){case Pe.OK:return j.OK;case Pe.CANCELLED:return j.CANCELLED;case Pe.UNKNOWN:return j.UNKNOWN;case Pe.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Pe.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Pe.INTERNAL:return j.INTERNAL;case Pe.UNAVAILABLE:return j.UNAVAILABLE;case Pe.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Pe.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Pe.NOT_FOUND:return j.NOT_FOUND;case Pe.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Pe.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Pe.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Pe.ABORTED:return j.ABORTED;case Pe.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Pe.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Pe.DATA_LOSS:return j.DATA_LOSS;default:return Q()}}(ne=Pe||(Pe={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=new hr([4294967295,4294967295],0);function mm(t){const e=H1().encode(t),n=new dv;return n.update(e),new Uint8Array(n.digest())}function gm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new hr([n,r],0),new hr([s,i],0)]}class nd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ni(`Invalid padding: ${n}`);if(r<0)throw new ni(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ni(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ni(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=hr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(hr.fromNumber(r)));return s.compare(q1)===1&&(s=new hr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=mm(e),[r,s]=gm(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new nd(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=mm(e),[r,s]=gm(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ni extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Xi.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gl(Y.min(),s,new xe(oe),yn(),te())}}class Xi{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xi(r,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class qv{constructor(e,n){this.targetId=e,this.me=n}}class Wv{constructor(e,n,r=We.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ym{constructor(){this.fe=0,this.ge=_m(),this.pe=We.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=te(),n=te(),r=te();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Q()}}),new Xi(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=_m()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class W1{constructor(e){this.Le=e,this.Be=new Map,this.ke=yn(),this.qe=vm(),this.Qe=new xe(oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Vc(i))if(r===0){const o=new W(i.path);this.Ue(n,o,tt.newNoDocument(o,Y.min()))}else le(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=_r(r).toUint8Array()}catch(u){if(u instanceof Ev)return us("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new nd(o,s,i)}catch(u){return us(u instanceof ni?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Vc(l.target)){const u=new W(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,tt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=te();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new gl(e,n,this.Qe,this.ke,r);return this.ke=yn(),this.qe=vm(),this.Qe=new xe(oe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ym,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new He(oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ym),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function vm(){return new xe(W.comparator)}function _m(){return new xe(W.comparator)}const Q1={asc:"ASCENDING",desc:"DESCENDING"},K1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},G1={and:"AND",or:"OR"};class Y1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Oc(t,e){return t.useProto3Json||cl(e)?e:{value:e}}function $a(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function X1(t,e){return $a(t,e.toTimestamp())}function Yt(t){return le(!!t),Y.fromTimestamp(function(n){const r=qn(n);return new Ve(r.seconds,r.nanos)}(t))}function rd(t,e){return Lc(t,e).canonicalString()}function Lc(t,e){const n=function(s){return new me(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Kv(t){const e=me.fromString(t);return le(Zv(e)),e}function Fc(t,e){return rd(t.databaseId,e.path)}function Cu(t,e){const n=Kv(e);if(n.get(1)!==t.databaseId.projectId)throw new $(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(Yv(n))}function Gv(t,e){return rd(t.databaseId,e)}function J1(t){const e=Kv(t);return e.length===4?me.emptyPath():Yv(e)}function Uc(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Yv(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function wm(t,e,n){return{name:Fc(t,e),fields:n.value.mapValue.fields}}function Z1(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(le(p===void 0||typeof p=="string"),We.fromBase64String(p||"")):(le(p===void 0||p instanceof Buffer||p instanceof Uint8Array),We.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const p=d.code===void 0?j.UNKNOWN:Hv(d.code);return new $(p,d.message||"")}(o);n=new Wv(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Cu(t,r.document.name),i=Yt(r.document.updateTime),o=r.document.createTime?Yt(r.document.createTime):Y.min(),l=new dt({mapValue:{fields:r.document.fields}}),u=tt.newFoundDocument(s,i,o,l),d=r.targetIds||[],p=r.removedTargetIds||[];n=new ua(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Cu(t,r.document),i=r.readTime?Yt(r.readTime):Y.min(),o=tt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ua([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Cu(t,r.document),i=r.removedTargetIds||[];n=new ua([],i,s,null)}else{if(!("filter"in e))return Q();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new B1(s,i),l=r.targetId;n=new qv(l,o)}}return n}function eI(t,e){let n;if(e instanceof Yi)n={update:wm(t,e.key,e.value)};else if(e instanceof ml)n={delete:Fc(t,e.key)};else if(e instanceof Yn)n={update:wm(t,e.key,e.data),updateMask:uI(e.fieldMask)};else{if(!(e instanceof F1))return Q();n={verify:Fc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Ba)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof zi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Bi)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:X1(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Q()}(t,e.precondition)),n}function tI(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Yt(s.updateTime):Yt(i);return o.isEqual(Y.min())&&(o=Yt(i)),new M1(o,s.transformResults||[])}(n,e))):[]}function nI(t,e){return{documents:[Gv(t,e.path)]}}function rI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Gv(t,s);const i=function(d){if(d.length!==0)return Jv($t.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(p=>function(m){return{field:Vr(m.field),direction:oI(m.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Oc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function sI(t){let e=J1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){le(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(g){const m=Xv(g);return m instanceof $t&&Sv(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(m=>function(A){return new Ui(jr(A.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,cl(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,x=g.values||[];return new za(x,m)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const m=!g.before,x=g.values||[];return new za(x,m)}(n.endAt)),I1(e,s,o,i,l,"F",u,d)}function iI(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Xv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=jr(n.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=jr(n.unaryFilter.field);return Ne.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=jr(n.unaryFilter.field);return Ne.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=jr(n.unaryFilter.field);return Ne.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return Ne.create(jr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $t.create(n.compositeFilter.filters.map(r=>Xv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function oI(t){return Q1[t]}function aI(t){return K1[t]}function lI(t){return G1[t]}function Vr(t){return{fieldPath:t.canonicalString()}}function jr(t){return Be.fromServerFormat(t.fieldPath)}function Jv(t){return t instanceof Ne?function(n){if(n.op==="=="){if(om(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NAN"}};if(im(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(om(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NOT_NAN"}};if(im(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vr(n.field),op:aI(n.op),value:n.value}}}(t):t instanceof $t?function(n){const r=n.getFilters().map(s=>Jv(s));return r.length===1?r[0]:{compositeFilter:{op:lI(n.op),filters:r}}}(t):Q()}function uI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Zv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n,r,s,i=Y.min(),o=Y.min(),l=We.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Rn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Rn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.ct=e}}function hI(t){const e=sI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.un=new fI}addToCollectionParentIndex(e,n){return this.un.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Hn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Hn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class fI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new He(me.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new He(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ps(0)}static kn(){return new ps(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.changes=new Ss(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&gi(r.mutation,s,xt.empty(),Ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){const s=lr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ti();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=lr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=yn();const o=mi(),l=function(){return mi()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof Yn)?i=i.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),gi(p.mutation,d,p.mutation.getFieldMask(),Ve.now())):o.set(d.key,xt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>{var g;return l.set(d,new mI(p,(g=o.get(d))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=mi();let s=new xe((o,l)=>o-l),i=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||xt.empty();p=l.applyToLocalView(d,p),r.set(u,p);const g=(s.get(l.batchId)||te()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,p=u.value,g=Vv();p.forEach(m=>{if(!i.has(m)){const x=Bv(n.get(m),r.get(m));x!==null&&g.set(m,x),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Pv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(lr());let l=-1,u=i;return o.next(d=>L.forEach(d,(p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(p)?L.resolve():this.remoteDocumentCache.getEntry(e,p).next(m=>{u=u.insert(p,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,te())).next(p=>({batchId:l,changes:Dv(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=ti();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ti();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const d=function(g,m){return new Is(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,tt.newInvalidDocument(p)))});let l=ti();return o.forEach((u,d)=>{const p=i.get(u);p!==void 0&&gi(p.mutation,d,xt.empty(),Ve.now()),dl(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return L.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Yt(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:hI(s.bundledQuery),readTime:Yt(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.overlays=new xe(W.comparator),this.Ir=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=lr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=lr(),i=n.length+1,o=new W(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new xe((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=lr(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=lr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=s)););return L.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new z1(n,r));let i=this.Ir.get(n);i===void 0&&(i=te(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.sessionToken=We.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this.Tr=new He(Me.Er),this.dr=new He(Me.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Me(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Me(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new W(new me([])),r=new Me(n,e),s=new Me(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new W(new me([])),r=new Me(n,e),s=new Me(n,e+1);let i=te();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Me(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Me{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||oe(e.wr,n.wr)}static Ar(e,n){return oe(e.wr,n.wr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new He(Me.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new U1(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Me(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Me(n,0),s=new Me(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(oe);return n.forEach(s=>{const i=new Me(s,0),o=new Me(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const o=new Me(new W(i),0);let l=new He(oe);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),L.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return L.forEach(n.mutations,s=>{const i=new Me(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Me(n,0),s=this.br.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e){this.Mr=e,this.docs=function(){return new xe(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(n))}getEntries(e,n){let r=yn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():tt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=yn();const o=n.path,l=new W(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||i1(s1(p),r)<=0||(s.has(p.key)||dl(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Q()}Or(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xI(this)}getSize(e){return L.resolve(this.size)}}class xI extends pI{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.persistence=e,this.Nr=new Ss(n=>Xh(n),Jh),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Lr=0,this.Br=new sd,this.targetCount=0,this.kr=ps.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),L.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ps(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Kn(n),L.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Qh(0),this.Kr=!1,this.Kr=!0,this.$r=new _I,this.referenceDelegate=e(this),this.Ur=new TI(this),this.indexManager=new dI,this.remoteDocumentCache=function(s){return new EI(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new cI(n),this.Gr=new yI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new wI(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new SI(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return L.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class SI extends a1{constructor(e){super(),this.currentSequenceNumber=e}}class id{constructor(e){this.persistence=e,this.Jr=new sd,this.Yr=null}static Zr(e){return new id(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),L.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,r=>{const s=W.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Y.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return L.or([()=>L.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=te(),s=te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new od(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Rx()?8:l1(kx())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new AI;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Gs()<=re.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Dr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(Gs()<=re.DEBUG&&q("QueryEngine","Query:",Dr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Gs()<=re.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Dr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gt(n))):L.resolve())}Yi(e,n){if(cm(n))return L.resolve(null);let r=Gt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Mc(n,null,"F"),r=Gt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=te(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,Mc(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return cm(n)||s.isEqual(Y.min())?L.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?L.resolve(null):(Gs()<=re.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Dr(n)),this.rs(e,o,n,r1(s,-1)).next(l=>l))})}ts(e,n){let r=new He(Nv(e));return n.forEach((s,i)=>{dl(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Gs()<=re.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Dr(n)),this.Ji.getDocumentsMatchingQuery(e,n,Hn.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new xe(oe),this._s=new Ss(i=>Xh(i),Jh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function PI(t,e,n,r){return new kI(t,e,n,r)}async function e0(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=te();for(const d of s){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){l.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function RI(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,p){const g=d.batch,m=g.keys();let x=L.resolve();return m.forEach(A=>{x=x.next(()=>p.getEntry(u,A)).next(P=>{const b=d.docVersions.get(A);le(b!==null),P.version.compareTo(b)<0&&(g.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),p.addEntry(P)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=te();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function t0(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function NI(t,e){const n=X(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,g)=>{const m=s.get(g);if(!m)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,g)));let x=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?x=x.withResumeToken(We.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,r)),s=s.insert(g,x),function(P,b,I){return P.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(m,x,p)&&l.push(n.Ur.updateTargetData(i,x))});let u=yn(),d=te();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(bI(i,o,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(Y.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return L.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function bI(t,e,n){let r=te(),s=te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=yn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function DI(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function VI(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Rn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function zc(t,e,n){const r=X(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Gi(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Em(t,e,n){const r=X(t);let s=Y.min(),i=te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const g=X(u),m=g._s.get(p);return m!==void 0?L.resolve(g.os.get(m)):g.Ur.getTargetData(d,p)}(r,o,Gt(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Y.min(),n?i:te())).next(l=>(jI(r,A1(e),l),{documents:l,Ts:i})))}function jI(t,e,n){let r=t.us.get(e)||Y.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class xm{constructor(){this.activeTargetIds=b1()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MI{constructor(){this.so=new xm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo=null;function ku(){return Qo===null?Qo=function(){return 268435456+Math.round(2147483648*Math.random())}():Qo++,"0x"+Qo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je="WebChannelConnection";class UI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=ku(),u=this.xo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(p=>(q("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw us("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ts}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=LI[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=ku();return new Promise((o,l)=>{const u=new fv;u.setWithCredentials(!0),u.listenOnce(pv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case oa.NO_ERROR:const p=u.getResponseJson();q(Je,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case oa.TIMEOUT:q(Je,`RPC '${e}' ${i} timed out`),l(new $(j.DEADLINE_EXCEEDED,"Request time out"));break;case oa.HTTP_ERROR:const g=u.getStatus();if(q(Je,`RPC '${e}' ${i} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const x=m==null?void 0:m.error;if(x&&x.status&&x.message){const A=function(b){const I=b.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(I)>=0?I:j.UNKNOWN}(x.status);l(new $(A,x.message))}else l(new $(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new $(j.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{q(Je,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);q(Je,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=ku(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=yv(),l=gv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");q(Je,`Creating RPC '${e}' stream ${s}: ${p}`,u);const g=o.createWebChannel(p,u);let m=!1,x=!1;const A=new FI({Io:b=>{x?q(Je,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(m||(q(Je,`Opening RPC '${e}' stream ${s} transport.`),g.open(),m=!0),q(Je,`RPC '${e}' stream ${s} sending:`,b),g.send(b))},To:()=>g.close()}),P=(b,I,_)=>{b.listen(I,C=>{try{_(C)}catch(D){setTimeout(()=>{throw D},0)}})};return P(g,ei.EventType.OPEN,()=>{x||(q(Je,`RPC '${e}' stream ${s} transport opened.`),A.yo())}),P(g,ei.EventType.CLOSE,()=>{x||(x=!0,q(Je,`RPC '${e}' stream ${s} transport closed`),A.So())}),P(g,ei.EventType.ERROR,b=>{x||(x=!0,us(Je,`RPC '${e}' stream ${s} transport errored:`,b),A.So(new $(j.UNAVAILABLE,"The operation could not be completed")))}),P(g,ei.EventType.MESSAGE,b=>{var I;if(!x){const _=b.data[0];le(!!_);const C=_,D=C.error||((I=C[0])===null||I===void 0?void 0:I.error);if(D){q(Je,`RPC '${e}' stream ${s} received error:`,D);const F=D.status;let M=function(T){const S=Pe[T];if(S!==void 0)return Hv(S)}(F),E=D.message;M===void 0&&(M=j.INTERNAL,E="Unknown error status: "+F+" with message "+D.message),x=!0,A.So(new $(M,E)),g.close()}else q(Je,`RPC '${e}' stream ${s} received:`,_),A.bo(_)}}),P(l,mv.STAT_EVENT,b=>{b.stat===Rc.PROXY?q(Je,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Rc.NOPROXY&&q(Je,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function Pu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t){return new Y1(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new n0(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(gn(n.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new $(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zI extends r0{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Z1(this.serializer,e),r=function(i){if(!("targetChange"in i))return Y.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?Yt(o.readTime):Y.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Uc(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Vc(u)?{documents:nI(i,u)}:{query:rI(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Qv(i,o.resumeToken);const d=Oc(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(Y.min())>0){l.readTime=$a(i,o.snapshotVersion.toTimestamp());const d=Oc(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=iI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Uc(this.serializer),n.removeTarget=e,this.a_(n)}}class BI extends r0{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return le(!!e.streamToken),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=tI(e.writeResults,e.commitTime),r=Yt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Uc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>eI(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new $(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Lc(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(j.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Lc(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(j.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class HI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gn(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Sr(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=X(u);d.L_.add(4),await Ji(d),d.q_.set("Unknown"),d.L_.delete(4),await vl(d)}(this))})}),this.q_=new HI(r,s)}}async function vl(t){if(Sr(t))for(const e of t.B_)await e(!0)}async function Ji(t){for(const e of t.B_)await e(!1)}function s0(t,e){const n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),cd(n)?ud(n):As(n).r_()&&ld(n,e))}function ad(t,e){const n=X(t),r=As(n);n.N_.delete(e),r.r_()&&i0(n,e),n.N_.size===0&&(r.r_()?r.o_():Sr(n)&&n.q_.set("Unknown"))}function ld(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}As(t).A_(e)}function i0(t,e){t.Q_.xe(e),As(t).R_(e)}function ud(t){t.Q_=new W1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),As(t).start(),t.q_.v_()}function cd(t){return Sr(t)&&!As(t).n_()&&t.N_.size>0}function Sr(t){return X(t).L_.size===0}function o0(t){t.Q_=void 0}async function WI(t){t.q_.set("Online")}async function QI(t){t.N_.forEach((e,n)=>{ld(t,e)})}async function KI(t,e){o0(t),cd(t)?(t.q_.M_(e),ud(t)):t.q_.set("Unknown")}async function GI(t,e,n){if(t.q_.set("Online"),e instanceof Wv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ha(t,r)}else if(e instanceof ua?t.Q_.Ke(e):e instanceof qv?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Y.min()))try{const r=await t0(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(d);p&&i.N_.set(d,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(We.EMPTY_BYTE_STRING,p.snapshotVersion)),i0(i,u);const g=new Rn(p.target,u,d,p.sequenceNumber);ld(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await Ha(t,r)}}async function Ha(t,e,n){if(!Gi(e))throw e;t.L_.add(1),await Ji(t),t.q_.set("Offline"),n||(n=()=>t0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await vl(t)})}function a0(t,e){return e().catch(n=>Ha(t,n,e))}async function _l(t){const e=X(t),n=Wn(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;YI(e);)try{const s=await DI(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,XI(e,s)}catch(s){await Ha(e,s)}l0(e)&&u0(e)}function YI(t){return Sr(t)&&t.O_.length<10}function XI(t,e){t.O_.push(e);const n=Wn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function l0(t){return Sr(t)&&!Wn(t).n_()&&t.O_.length>0}function u0(t){Wn(t).start()}async function JI(t){Wn(t).p_()}async function ZI(t){const e=Wn(t);for(const n of t.O_)e.m_(n.mutations)}async function eS(t,e,n){const r=t.O_.shift(),s=td.from(r,e,n);await a0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await _l(t)}async function tS(t,e){e&&Wn(t).V_&&await async function(r,s){if(function(o){return $1(o)&&o!==j.ABORTED}(s.code)){const i=r.O_.shift();Wn(r).s_(),await a0(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await _l(r)}}(t,e),l0(t)&&u0(t)}async function Im(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=Sr(n);n.L_.add(3),await Ji(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await vl(n)}async function nS(t,e){const n=X(t);e?(n.L_.delete(2),await vl(n)):e||(n.L_.add(2),await Ji(n),n.q_.set("Unknown"))}function As(t){return t.K_||(t.K_=function(n,r,s){const i=X(n);return i.w_(),new zI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:WI.bind(null,t),Ro:QI.bind(null,t),mo:KI.bind(null,t),d_:GI.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),cd(t)?ud(t):t.q_.set("Unknown")):(await t.K_.stop(),o0(t))})),t.K_}function Wn(t){return t.U_||(t.U_=function(n,r,s){const i=X(n);return i.w_(),new BI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:JI.bind(null,t),mo:tS.bind(null,t),f_:ZI.bind(null,t),g_:eS.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await _l(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new hd(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dd(t,e){if(gn("AsyncQueue",`${e}: ${t}`),Gi(t))return new $(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=ti(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new ts(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ts)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ts;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this.W_=new xe(W.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ms{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ms(e,n,ts.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class sS{constructor(){this.queries=Am(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=Am(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new $(j.ABORTED,"Firestore shutting down"))}}function Am(){return new Ss(t=>Rv(t),hl)}async function iS(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new rS,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=dd(o,`Initialization of query '${Dr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&fd(n)}async function oS(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aS(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&fd(n)}function lS(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function fd(t){t.Y_.forEach(e=>{e.next()})}var Bc,Cm;(Cm=Bc||(Bc={})).ea="default",Cm.Cache="cache";class uS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ms(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ms.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Bc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e){this.key=e}}class h0{constructor(e){this.key=e}}class cS{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=te(),this.mutatedKeys=te(),this.Aa=Nv(e),this.Ra=new ts(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Sm,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,g)=>{const m=s.get(p),x=dl(this.query,g)?g:null,A=!!m&&this.mutatedKeys.has(m.key),P=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let b=!1;m&&x?m.data.isEqual(x.data)?A!==P&&(r.track({type:3,doc:x}),b=!0):this.ga(m,x)||(r.track({type:2,doc:x}),b=!0,(u&&this.Aa(x,u)>0||d&&this.Aa(x,d)<0)&&(l=!0)):!m&&x?(r.track({type:0,doc:x}),b=!0):m&&!x&&(r.track({type:1,doc:m}),b=!0,(u||d)&&(l=!0)),b&&(x?(o=o.add(x),i=P?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,g)=>function(x,A){const P=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return P(x)-P(A)}(p.type,g.type)||this.Aa(p.doc,g.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new ms(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Sm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new h0(r))}),this.da.forEach(r=>{e.has(r)||n.push(new c0(r))}),n}ba(e){this.Ta=e.Ts,this.da=te();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ms.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class hS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dS{constructor(e){this.key=e,this.va=!1}}class fS{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ss(l=>Rv(l),hl),this.Ma=new Map,this.xa=new Set,this.Oa=new xe(W.comparator),this.Na=new Map,this.La=new sd,this.Ba={},this.ka=new Map,this.qa=ps.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function pS(t,e,n=!0){const r=y0(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await d0(r,e,n,!0),s}async function mS(t,e){const n=y0(t);await d0(n,e,!0,!1)}async function d0(t,e,n,r){const s=await VI(t.localStore,Gt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await gS(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&s0(t.remoteStore,s),l}async function gS(t,e,n,r,s){t.Ka=(g,m,x)=>async function(P,b,I,_){let C=b.view.ma(I);C.ns&&(C=await Em(P.localStore,b.query,!1).then(({documents:E})=>b.view.ma(E,C)));const D=_&&_.targetChanges.get(b.targetId),F=_&&_.targetMismatches.get(b.targetId)!=null,M=b.view.applyChanges(C,P.isPrimaryClient,D,F);return Pm(P,b.targetId,M.wa),M.snapshot}(t,g,m,x);const i=await Em(t.localStore,e,!0),o=new cS(e,i.Ts),l=o.ma(i.documents),u=Xi.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Pm(t,n,d.wa);const p=new hS(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function yS(t,e,n){const r=X(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!hl(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await zc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ad(r.remoteStore,s.targetId),$c(r,s.targetId)}).catch(Ki)):($c(r,s.targetId),await zc(r.localStore,s.targetId,!0))}async function vS(t,e){const n=X(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ad(n.remoteStore,r.targetId))}async function _S(t,e,n){const r=AS(t);try{const s=await function(o,l){const u=X(o),d=Ve.now(),p=l.reduce((x,A)=>x.add(A.key),te());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let A=yn(),P=te();return u.cs.getEntries(x,p).next(b=>{A=b,A.forEach((I,_)=>{_.isValidDocument()||(P=P.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,A)).next(b=>{g=b;const I=[];for(const _ of l){const C=L1(_,g.get(_.key).overlayedDocument);C!=null&&I.push(new Yn(_.key,C,xv(C.value.mapValue),yt.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,I,l)}).next(b=>{m=b;const I=b.applyToLocalDocumentSet(g,P);return u.documentOverlayCache.saveOverlays(x,b.batchId,I)})}).then(()=>({batchId:m.batchId,changes:Dv(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new xe(oe)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Zi(r,s.changes),await _l(r.remoteStore)}catch(s){const i=dd(s,"Failed to persist write");n.reject(i)}}async function f0(t,e){const n=X(t);try{const r=await NI(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?le(o.va):s.removedDocuments.size>0&&(le(o.va),o.va=!1))}),await Zi(n,r,e)}catch(r){await Ki(r)}}function km(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=X(o);u.onlineState=l;let d=!1;u.queries.forEach((p,g)=>{for(const m of g.j_)m.Z_(l)&&(d=!0)}),d&&fd(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wS(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new xe(W.comparator);o=o.insert(i,tt.newNoDocument(i,Y.min()));const l=te().add(i),u=new gl(Y.min(),new Map,new xe(oe),o,l);await f0(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),pd(r)}else await zc(r.localStore,e,!1).then(()=>$c(r,e,n)).catch(Ki)}async function ES(t,e){const n=X(t),r=e.batch.batchId;try{const s=await RI(n.localStore,e);m0(n,r,null),p0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zi(n,s)}catch(s){await Ki(s)}}async function xS(t,e,n){const r=X(t);try{const s=await function(o,l){const u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,l).next(g=>(le(g!==null),p=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);m0(r,e,n),p0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Zi(r,s)}catch(s){await Ki(s)}}function p0(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function m0(t,e,n){const r=X(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function $c(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||g0(t,r)})}function g0(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ad(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),pd(t))}function Pm(t,e,n){for(const r of n)r instanceof c0?(t.La.addReference(r.key,e),TS(t,r)):r instanceof h0?(q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||g0(t,r.key)):Q()}function TS(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(r),pd(t))}function pd(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new W(me.fromString(e)),r=t.qa.next();t.Na.set(r,new dS(n)),t.Oa=t.Oa.insert(n,r),s0(t.remoteStore,new Rn(Gt(Zh(n.path)),r,"TargetPurposeLimboResolution",Qh.oe))}}async function Zi(t,e,n){const r=X(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){s.push(d);const g=od.Wi(u.targetId,d);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const p=X(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>L.forEach(d,m=>L.forEach(m.$i,x=>p.persistence.referenceDelegate.addReference(g,m.targetId,x)).next(()=>L.forEach(m.Ui,x=>p.persistence.referenceDelegate.removeReference(g,m.targetId,x)))))}catch(g){if(!Gi(g))throw g;q("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const m=g.targetId;if(!g.fromCache){const x=p.os.get(m),A=x.snapshotVersion,P=x.withLastLimboFreeSnapshotVersion(A);p.os=p.os.insert(m,P)}}}(r.localStore,i))}async function IS(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await e0(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new $(j.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Zi(n,r.hs)}}function SS(t,e){const n=X(t),r=n.Na.get(e);if(r&&r.va)return te().add(r.key);{let s=te();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function y0(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=f0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wS.bind(null,e),e.Ca.d_=aS.bind(null,e.eventManager),e.Ca.$a=lS.bind(null,e.eventManager),e}function AS(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ES.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xS.bind(null,e),e}class qa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return PI(this.persistence,new CI,e.initialUser,this.serializer)}Ga(e){return new II(id.Zr,this.serializer)}Wa(e){return new MI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qa.provider={build:()=>new qa};class Hc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>km(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IS.bind(null,this.syncEngine),await nS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sS}()}createDatastore(e){const n=yl(e.databaseInfo.databaseId),r=function(i){return new UI(i)}(e.databaseInfo);return function(i,o,l,u){return new $I(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new qI(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>km(this.syncEngine,n,0),function(){return Tm.D()?new Tm:new OI}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,p){const g=new fS(s,i,o,l,u,d);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=X(s);q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ji(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Hc.provider={build:()=>new Hc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):gn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ze.UNAUTHENTICATED,this.clientId=_v.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=dd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ru(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await e0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Rm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await PS(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Im(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Im(e.remoteStore,s)),t._onlineComponents=e}async function PS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ru(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;us("Error using user provided cache. Falling back to memory cache: "+n),await Ru(t,new qa)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await Ru(t,new qa);return t._offlineComponents}async function v0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await Rm(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await Rm(t,new Hc))),t._onlineComponents}function RS(t){return v0(t).then(e=>e.syncEngine)}async function Nm(t){const e=await v0(t),n=e.eventManager;return n.onListen=pS.bind(null,e.syncEngine),n.onUnlisten=yS.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vS.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t,e,n){if(!n)throw new $(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NS(t,e,n,r){if(e===!0&&r===!0)throw new $(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Dm(t){if(!W.isDocumentKey(t))throw new $(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Vm(t){if(W.isDocumentKey(t))throw new $(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wl(t);throw new $(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new $(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new $(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new $(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class El{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new KT;switch(r.type){case"firstParty":return new JT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=bm.get(n);r&&(q("ComponentProvider","Removing Datastore"),bm.delete(n),r.terminate())}(this),Promise.resolve()}}function bS(t,e,n,r={}){var s;const i=(t=cn(t,El))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&us("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Ze.MOCK_USER;else{l=Cx(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new $(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ze(d)}t._authCredentials=new GT(new vv(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ar(this.firestore,e,this._query)}}class vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}}class zn extends Ar{constructor(e,n,r){super(e,n,Zh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new W(e))}withConverter(e){return new zn(this.firestore,e,this._path)}}function eo(t,e,...n){if(t=Vt(t),w0("collection","path",e),t instanceof El){const r=me.fromString(e,...n);return Vm(r),new zn(t,null,r)}{if(!(t instanceof vt||t instanceof zn))throw new $(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return Vm(r),new zn(t.firestore,null,r)}}function lt(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=_v.newId()),w0("doc","path",e),t instanceof El){const r=me.fromString(e,...n);return Dm(r),new vt(t,null,new W(r))}{if(!(t instanceof vt||t instanceof zn))throw new $(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return Dm(r),new vt(t.firestore,t instanceof zn?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new n0(this,"async_queue_retry"),this.Vu=()=>{const r=Pu();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Pu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Pu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new dr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Gi(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw gn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=hd.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Q()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Om(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Er extends El{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Mm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mm(e),this._firestoreClient=void 0,await e}}}function DS(t,e){const n=typeof t=="object"?t:MT(),r=typeof t=="string"?t:"(default)",s=bT(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Sx("firestore");i&&bS(s,...i)}return s}function md(t){if(t._terminated)throw new $(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||VS(t),t._firestoreClient}function VS(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,p){return new h1(l,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,_0(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new kS(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gs(We.fromBase64String(e))}catch(n){throw new $(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gs(We.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=/^__.*__$/;class MS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yi(e,this.data,n,this.fieldTransforms)}}class E0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function x0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class xl{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new xl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Wa(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(x0(this.Cu)&&jS.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class OS{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yl(e)}Qu(e,n,r,s=!1){return new xl({Cu:e,methodName:n,qu:r,path:Be.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tl(t){const e=t._freezeSettings(),n=yl(t._databaseId);return new OS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function T0(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);wd("Data must be an object, but it was:",o,r);const l=A0(r,o);let u,d;if(i.merge)u=new xt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const g of i.mergeFields){const m=qc(e,g,n);if(!o.contains(m))throw new $(j.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);k0(p,m)||p.push(m)}u=new xt(p),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new MS(new dt(l),u,d)}class Il extends no{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Il}}function LS(t,e,n){return new xl({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vd extends no{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=LS(this,e,!0),r=this.Ku.map(i=>Cs(i,n)),s=new fs(r);return new zv(e.path,s)}isEqual(e){return e instanceof vd&&Oa(this.Ku,e.Ku)}}class _d extends no{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Bi(e.serializer,Mv(e.serializer,this.$u));return new zv(e.path,n)}isEqual(e){return e instanceof _d&&this.$u===e.$u}}function I0(t,e,n,r){const s=t.Qu(1,e,n);wd("Data must be an object, but it was:",s,r);const i=[],o=dt.empty();Ir(r,(u,d)=>{const p=Ed(e,u,n);d=Vt(d);const g=s.Nu(p);if(d instanceof Il)i.push(p);else{const m=Cs(d,g);m!=null&&(i.push(p),o.set(p,m))}});const l=new xt(i);return new E0(o,l,s.fieldTransforms)}function S0(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[qc(e,r,n)],u=[s];if(i.length%2!=0)throw new $(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(qc(e,i[m])),u.push(i[m+1]);const d=[],p=dt.empty();for(let m=l.length-1;m>=0;--m)if(!k0(d,l[m])){const x=l[m];let A=u[m];A=Vt(A);const P=o.Nu(x);if(A instanceof Il)d.push(x);else{const b=Cs(A,P);b!=null&&(d.push(x),p.set(x,b))}}const g=new xt(d);return new E0(p,g,o.fieldTransforms)}function FS(t,e,n,r=!1){return Cs(n,t.Qu(r?4:3,e))}function Cs(t,e){if(C0(t=Vt(t)))return wd("Unsupported field value:",e,t),A0(t,e);if(t instanceof no)return function(r,s){if(!x0(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Cs(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Mv(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ve.fromDate(r);return{timestampValue:$a(s.serializer,i)}}if(r instanceof Ve){const i=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$a(s.serializer,i)}}if(r instanceof gd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gs)return{bytesValue:Qv(s.serializer,r._byteString)};if(r instanceof vt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof yd)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return ed(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${wl(r)}`)}(t,e)}function A0(t,e){const n={};return wv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ir(t,(r,s)=>{const i=Cs(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function C0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof gd||t instanceof gs||t instanceof vt||t instanceof no||t instanceof yd)}function wd(t,e,n){if(!C0(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=wl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function qc(t,e,n){if((e=Vt(e))instanceof to)return e._internalPath;if(typeof e=="string")return Ed(t,e);throw Wa("Field path arguments must be of type string or ",t,!1,void 0,n)}const US=new RegExp("[~\\*/\\[\\]]");function Ed(t,e,n){if(e.search(US)>=0)throw Wa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new to(...e.split("."))._internalPath}catch{throw Wa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wa(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new $(j.INVALID_ARGUMENT,l+t+u)}function k0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zS extends P0{data(){return super.data()}}function xd(t,e){return typeof e=="string"?Ed(t,e):e instanceof to?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Td{}class R0 extends Td{}function ro(t,e,...n){let r=[];e instanceof Td&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Sd).length,l=i.filter(u=>u instanceof Id).length;if(o>1||o>0&&l>0)throw new $(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Id extends R0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Id(e,n,r)}_apply(e){const n=this._parse(e);return N0(e._query,n),new Ar(e.firestore,e.converter,jc(e._query,n))}_parse(e){const n=Tl(e.firestore);return function(i,o,l,u,d,p,g){let m;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new $(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Fm(g,p);const x=[];for(const A of g)x.push(Lm(u,i,A));m={arrayValue:{values:x}}}else m=Lm(u,i,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Fm(g,p),m=FS(l,o,g,p==="in"||p==="not-in");return Ne.create(d,p,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Sd extends Td{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$t.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)N0(o,u),o=jc(o,u)}(e._query,n),new Ar(e.firestore,e.converter,jc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ad extends R0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ad(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new $(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ui(i,o)}(e._query,this._field,this._direction);return new Ar(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Is(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ys(t,e="asc"){const n=e,r=xd("orderBy",t);return Ad._create(r,n)}function Lm(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new $(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pv(e)&&n.indexOf("/")!==-1)throw new $(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(me.fromString(n));if(!W.isDocumentKey(r))throw new $(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sm(t,new W(r))}if(n instanceof vt)return sm(t,n._key);throw new $(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wl(n)}.`)}function Fm(t,e){if(!Array.isArray(t)||t.length===0)throw new $(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function N0(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $S{convertValue(e,n="none"){switch(wr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ir(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ce(o.doubleValue));return new yd(i)}convertGeoPoint(e){return new gd(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oi(e));default:return null}}convertTimestamp(e){const n=qn(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=me.fromString(e);le(Zv(r));const s=new Li(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class D0 extends P0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ca(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ca extends D0{data(e={}){return super.data(e)}}class HS{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ri(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ca(this._firestore,this._userDataWriter,r.key,r,new ri(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new ca(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ri(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new ca(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ri(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:qS(l.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function qS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}class V0 extends $S{constructor(e){super(),this.firestore=e}convertBytes(e){return new gs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}function vs(t,e,n,...r){t=cn(t,vt);const s=cn(t.firestore,Er),i=Tl(s);let o;return o=typeof(e=Vt(e))=="string"||e instanceof to?S0(i,"updateDoc",t._key,e,n,r):I0(i,"updateDoc",t._key,e),Sl(s,[o.toMutation(t._key,yt.exists(!0))])}function Cd(t){return Sl(cn(t.firestore,Er),[new ml(t._key,yt.none())])}function so(t,e){const n=cn(t.firestore,Er),r=lt(t),s=b0(t.converter,e);return Sl(n,[T0(Tl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,yt.exists(!1))]).then(()=>r)}function io(t,...e){var n,r,s;t=Vt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Om(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Om(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let u,d,p;if(t instanceof vt)d=cn(t.firestore,Er),p=Zh(t._key.path),u={next:g=>{e[o]&&e[o](WS(d,t,g))},error:e[o+1],complete:e[o+2]};else{const g=cn(t,Ar);d=cn(g.firestore,Er),p=g._query;const m=new V0(d);u={next:x=>{e[o]&&e[o](new HS(d,m,g,x))},error:e[o+1],complete:e[o+2]},BS(t._query)}return function(m,x,A,P){const b=new CS(P),I=new uS(x,b,A);return m.asyncQueue.enqueueAndForget(async()=>iS(await Nm(m),I)),()=>{b.Za(),m.asyncQueue.enqueueAndForget(async()=>oS(await Nm(m),I))}}(md(d),p,l,u)}function Sl(t,e){return function(r,s){const i=new dr;return r.asyncQueue.enqueueAndForget(async()=>_S(await RS(r),s,i)),i.promise}(md(t),e)}function WS(t,e,n){const r=n.docs.get(e._key),s=new V0(t);return new D0(t,s,e._key,r,new ri(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Tl(e)}set(e,n,r){this._verifyNotCommitted();const s=Nu(e,this._firestore),i=b0(s.converter,n,r),o=T0(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,yt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Nu(e,this._firestore);let o;return o=typeof(n=Vt(n))=="string"||n instanceof to?S0(this._dataReader,"WriteBatch.update",i._key,n,r,s):I0(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,yt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Nu(e,this._firestore);return this._mutations=this._mutations.concat(new ml(n._key,yt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nu(t,e){if((t=Vt(t)).firestore!==e)throw new $(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function KS(...t){return new vd("arrayUnion",t)}function GS(t){return new _d("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(t){return md(t=cn(t,Er)),new QS(t,e=>Sl(t,e))}(function(e,n=!0){(function(s){Ts=s})(jT),Fa(new Vi("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Er(new YT(r.getProvider("auth-internal")),new e1(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new $(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Li(d.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),es(Zp,"4.7.3",e),es(Zp,"4.7.3","esm2017")})();const YS={apiKey:"AIzaSyB6-Z_XRfCHWQ3ujGzkj4ck1WtI9gX6O_k",authDomain:"cafestesiaapp.firebaseapp.com",projectId:"cafestesiaapp",storageBucket:"cafestesiaapp.firebasestorage.app",messagingSenderId:"639191492553",appId:"1:639191492553:web:dc6ce00f5622dc686faa18",measurementId:"G-Z52JP10C1R"},XS=uv(YS),je=DS(XS),ha=eo(je,"tasks"),JS=async()=>{console.log("Seeding initial tasks to Firestore...");const t=oo(je);Zy.forEach(e=>{const n=lt(ha);t.set(n,e)}),await t.commit(),console.log("Initial tasks seeded.")},ZS=()=>{const[t,e]=O.useState([]);return O.useEffect(()=>{const o=ro(ha,ys("date"),ys("time")),l=io(o,u=>{if(u.empty&&Zy.length>0){JS();return}const d=u.docs.map(p=>({id:p.id,...p.data()}));e(d)},u=>{console.error("Error fetching Kanban tasks:",u)});return()=>l()},[]),{tasks:t,updateTaskStatus:async(o,l)=>{const u=lt(je,"tasks",o);try{await vs(u,{status:l})}catch(d){console.error("Error updating task status:",d)}},addTask:async o=>{try{await so(ha,{...o,status:"todo"})}catch(l){console.error("Error adding task:",l)}},addMultipleTasks:async o=>{try{const l=oo(je);o.forEach(u=>{const d=lt(ha);l.set(d,{...u,status:"todo"})}),await l.commit()}catch(l){console.error("Error adding multiple tasks:",l)}},updateTask:async o=>{const{id:l,...u}=o,d=lt(je,"tasks",l);try{await vs(d,u)}catch(p){console.error("Error updating task:",p)}}}},Wc=eo(je,"inventory"),e2=async()=>{console.log("Seeding initial inventory to Firestore...");const t=oo(je);ev.forEach(e=>{const n=lt(Wc);t.set(n,{...e,purchaseHistory:[]})}),await t.commit(),console.log("Initial inventory seeded.")},t2=()=>{const[t,e]=O.useState([]);return O.useEffect(()=>{const o=ro(Wc,ys("name")),l=io(o,u=>{if(u.empty&&ev.length>0){e2();return}const d=u.docs.map(p=>({id:p.id,...p.data()}));e(d)},u=>{console.error("Error fetching inventory items:",u)});return()=>l()},[]),{items:t,addItem:async o=>{try{await so(Wc,{...o,purchaseHistory:[]})}catch(l){console.error("Error adding inventory item:",l)}},updateItem:async o=>{const{id:l,...u}=o,d=lt(je,"inventory",l);try{await vs(d,u)}catch(p){console.error("Error updating item:",p)}},deleteItem:async o=>{const l=lt(je,"inventory",o);try{await Cd(l)}catch(u){console.error("Error deleting item:",u)}},recordStockChange:async({itemId:o,change:l,purchaseDetails:u})=>{const d=lt(je,"inventory",o);try{const p={currentStock:GS(l)};if(u&&l>0){const g={id:`pur-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,date:new Date().toISOString(),quantity:l,totalPrice:u.totalPrice,providerName:u.providerName};p.purchaseHistory=KS(g)}await vs(d,p)}catch(p){console.error("Error recording stock change:",p)}}}},Qc=eo(je,"providers"),j0=[{name:"Proveedor A"},{name:"Proveedor B"},{name:"Proveedor C"},{name:"Supermercado"},{name:"Tostador Local"}],n2=async()=>{console.log("Seeding initial providers to Firestore...");const t=oo(je);j0.forEach(e=>{const n=lt(Qc);t.set(n,e)}),await t.commit(),console.log("Initial providers seeded.")},r2=()=>{const[t,e]=O.useState([]);return O.useEffect(()=>{const i=ro(Qc,ys("name")),o=io(i,l=>{if(l.empty&&j0.length>0){n2();return}const u=l.docs.map(d=>({id:d.id,...d.data()}));e(u)},l=>{console.error("Error fetching providers:",l)});return()=>o()},[]),{providers:t,addProvider:async i=>{try{await so(Qc,i)}catch(o){console.error("Error adding provider:",o)}},updateProvider:async i=>{const{id:o,...l}=i,u=lt(je,"providers",o);try{await vs(u,l)}catch(d){console.error("Error updating provider:",d)}},deleteProvider:async i=>{const o=lt(je,"providers",i);try{await Cd(o)}catch(l){console.error("Error deleting provider:",l)}}}},s2=({isOpen:t,onClose:e,onSave:n,onDelete:r,provider:s})=>{const[i,o]=O.useState("");O.useEffect(()=>{t&&o((s==null?void 0:s.name)||"")},[t,s]);const l=d=>{if(d.preventDefault(),!i.trim())return;const p={name:i.trim()};n(s?{...p,id:s.id}:p),e()},u=()=>{s&&window.confirm(`Ests seguro de que quieres eliminar al proveedor "${s.name}"?`)&&(r(s.id),e())};return h.jsx(_n,{isOpen:t,onClose:e,title:s?"Editar Proveedor":"Aadir Proveedor",children:h.jsxs("form",{onSubmit:l,className:"flex flex-col gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre del Proveedor"}),h.jsx("input",{type:"text",value:i,onChange:d=>o(d.target.value),required:!0,autoFocus:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),h.jsxs("div",{className:"flex justify-between items-center mt-4",children:[h.jsx("div",{children:s&&h.jsx("button",{type:"button",onClick:u,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Eliminar"})}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),h.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})]})})},i2=({isOpen:t,onClose:e,onSave:n,onDelete:r,category:s})=>{const[i,o]=O.useState("");O.useEffect(()=>{t&&o((s==null?void 0:s.name)||"")},[t,s]);const l=d=>{if(d.preventDefault(),!i.trim())return;const p={name:i.trim()};n(s?{...p,id:s.id}:p),e()},u=()=>{s&&window.confirm(`Ests seguro de que quieres eliminar la categora "${s.name}"?`)&&(r(s.id),e())};return h.jsx(_n,{isOpen:t,onClose:e,title:s?"Editar Categora":"Aadir Categora",children:h.jsxs("form",{onSubmit:l,className:"flex flex-col gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre de la Categora"}),h.jsx("input",{type:"text",value:i,onChange:d=>o(d.target.value),required:!0,autoFocus:!0,className:"w-full p-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),h.jsxs("div",{className:"flex justify-between items-center mt-4",children:[h.jsx("div",{children:s&&h.jsx("button",{type:"button",onClick:u,className:"py-2 px-4 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Eliminar"})}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cancelar"}),h.jsx("button",{type:"submit",className:"py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})]})})},o2=({rating:t})=>h.jsx("div",{className:"flex",children:[...Array(5)].map((e,n)=>h.jsx(he,{name:"star",size:16,className:n<t?"text-yellow-400 fill-current":"text-gray-300"},n))}),a2=({isOpen:t,onClose:e,recipe:n,feedbackLog:r})=>{const s=[...r].sort((i,o)=>new Date(o.date).getTime()-new Date(i.date).getTime());return h.jsxs(_n,{isOpen:t,onClose:e,title:`Bitcora de: ${n.name}`,children:[h.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:s.length>0?h.jsx("div",{className:"space-y-4",children:s.map(i=>h.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("span",{className:"font-semibold text-gray-700",children:new Date(i.date).toLocaleString("es-ES",{dateStyle:"long",timeStyle:"short"})}),h.jsx(o2,{rating:i.rating})]}),h.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:i.notes||"Sin notas."})]},i.id))}):h.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay feedback registrado para esta receta todava."})}),h.jsx("div",{className:"flex justify-end mt-6",children:h.jsx("button",{onClick:e,className:"py-2 px-6 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300",children:"Cerrar"})})]})},l2=({providersHook:t,categoriesHook:e,recipeLogHook:n})=>{const[r,s]=O.useState("production"),{providers:i,addProvider:o,updateProvider:l,deleteProvider:u}=t,[d,p]=O.useState(!1),[g,m]=O.useState(null),{categories:x,addCategory:A,updateCategory:P,deleteCategory:b}=e,[I,_]=O.useState(!1),[C,D]=O.useState(null),{feedbackLog:F}=n,[M,E]=O.useState(null),y=J=>{m(J),p(!0)},T=()=>{m(null),p(!0)},S=J=>{"id"in J?l(J):o(J)},k=J=>{D(J),_(!0)},R=()=>{D(null),_(!0)},w=J=>{"id"in J?P(J):A(J)},G=({tab:J,label:Ct,icon:rt})=>h.jsxs("button",{onClick:()=>s(J),className:`flex items-center gap-2 py-3 px-4 text-sm md:text-base font-bold border-b-4 transition-colors ${r===J?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-800"}`,children:[h.jsx(he,{name:rt,size:18}),Ct]});return h.jsxs("div",{className:"p-4 md:p-6 bg-gray-50 h-full overflow-y-auto",children:[h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsx("div",{className:"border-b border-gray-200",children:h.jsxs("div",{className:"flex gap-4",children:[h.jsx(G,{tab:"production",label:"Produccin",icon:"cake-slice"}),h.jsx(G,{tab:"inventory",label:"Inventario",icon:"archive"}),h.jsx(G,{tab:"operations",label:"Operaciones",icon:"clipboard-kanban"})]})}),h.jsxs("div",{className:"mt-6",children:[r==="production"&&h.jsxs("section",{children:[h.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-4",children:"Bitcora de Recetas"}),h.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:h.jsx("ul",{className:"divide-y divide-gray-200",children:Object.values(ul).map(J=>h.jsxs("li",{className:"p-4 flex justify-between items-center",children:[h.jsx("span",{className:"font-medium text-gray-800",children:J.name}),h.jsx("button",{onClick:()=>E(J),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Ver Historial"})]},J.id))})})]}),r==="inventory"&&h.jsxs("div",{className:"space-y-8",children:[h.jsxs("section",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-bold text-blue-700",children:"Proveedores de Inventario"}),h.jsxs("button",{onClick:T,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[h.jsx(he,{name:"plus-circle",size:16}),"Aadir Proveedor"]})]}),h.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:h.jsx("ul",{className:"divide-y divide-gray-200",children:i.length>0?i.map(J=>h.jsxs("li",{className:"p-4 flex justify-between items-center",children:[h.jsx("span",{className:"font-medium text-gray-800",children:J.name}),h.jsx("button",{onClick:()=>y(J),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Editar"})]},J.id)):h.jsx("li",{className:"p-4 text-center text-gray-500",children:"No hay proveedores. Aade el primero!"})})})]}),h.jsxs("section",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-bold text-blue-700",children:"Categoras de Inventario"}),h.jsxs("button",{onClick:R,className:"flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[h.jsx(he,{name:"plus-circle",size:16}),"Aadir Categora"]})]}),h.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:h.jsx("ul",{className:"divide-y divide-gray-200",children:x.length>0?x.map(J=>h.jsxs("li",{className:"p-4 flex justify-between items-center",children:[h.jsx("span",{className:"font-medium text-gray-800",children:J.name}),h.jsx("button",{onClick:()=>k(J),className:"text-sm text-blue-600 hover:underline font-semibold",children:"Editar"})]},J.id)):h.jsx("li",{className:"p-4 text-center text-gray-500",children:"No hay categoras. Aade la primera!"})})})]})]}),r==="operations"&&h.jsxs("div",{className:"text-center py-16 text-gray-500 bg-white rounded-lg border border-gray-200 shadow-sm",children:[h.jsx("p",{className:"font-bold",children:"Prximamente"}),h.jsx("p",{children:"Aqu encontrars las configuraciones para las operaciones diarias."})]})]})]}),h.jsx(s2,{isOpen:d,onClose:()=>p(!1),onSave:S,onDelete:u,provider:g}),h.jsx(i2,{isOpen:I,onClose:()=>_(!1),onSave:w,onDelete:b,category:C}),M&&h.jsx(a2,{isOpen:!!M,onClose:()=>E(null),recipe:M,feedbackLog:F.filter(J=>J.recipeId===M.id)})]})},M0="productionState_v2",u2=()=>{try{const t=localStorage.getItem(M0);if(t)return JSON.parse(t).map(n=>({...n,recipe:n.recipeId?ul[n.recipeId]:void 0}))}catch(t){console.error("Error loading production state:",t)}return[]},c2=t=>{try{const e=t.map(({recipe:n,...r})=>r);localStorage.setItem(M0,JSON.stringify(e))}catch(e){console.error("Error saving production state:",e)}},h2=()=>{const[t,e]=O.useState(u2),n=O.useRef(null),r=O.useCallback(()=>{n.current&&(clearInterval(n.current),n.current=null)},[]),s=O.useCallback(()=>{e(g=>{const m=Date.now();let x=!1;const A=g.map(P=>{if(P.state!=="running")return P;x=!0;const b=Math.round((m-P.lastTickTimestamp)/1e3),I=Math.max(0,P.stepTimeLeft-b),_=Math.max(0,P.totalTimeLeft-b);return I===0?{...P,stepTimeLeft:0,totalTimeLeft:_,state:"alarm",lastTickTimestamp:m}:{...P,stepTimeLeft:I,totalTimeLeft:_,lastTickTimestamp:m}});return x?A:g})},[]),i=O.useCallback(()=>{r(),n.current=window.setInterval(s,1e3)},[r,s]);O.useEffect(()=>{e(g=>{const m=Date.now();return g.map(x=>{if(x.state!=="running")return x;const A=Math.round((m-x.lastTickTimestamp)/1e3),P=Math.max(0,x.stepTimeLeft-A),b=Math.max(0,x.totalTimeLeft-A);return P===0?{...x,state:"alarm",stepTimeLeft:0,totalTimeLeft:b}:{...x,stepTimeLeft:P,totalTimeLeft:b,lastTickTimestamp:m}})})},[]),O.useEffect(()=>(c2(t),t.some(m=>m.state==="running")?i():r(),r),[t,i,r]);const o=O.useCallback(g=>{const m=ul[g];if(!m)return;const x={id:`baking-${Date.now()}`,name:m.name,recipeId:g,recipe:m,type:"baking",state:"paused",currentStepIndex:0,steps:m.steps,totalTime:m.totalDuration,totalTimeLeft:m.totalDuration,stepTimeLeft:m.steps[0].duration,lastTickTimestamp:Date.now()};e(A=>[...A,x])},[]),l=O.useCallback((g,m)=>{const x=[{instruction:m,duration:g,isPauseStep:!1}],A={id:`heating-${Date.now()}`,name:m,type:"heating",state:"paused",currentStepIndex:0,steps:x,totalTime:g,totalTimeLeft:g,stepTimeLeft:g,lastTickTimestamp:Date.now()};e(P=>[...P,A])},[]),u=O.useCallback(g=>{e(m=>m.map(x=>{if(x.id!==g)return x;if(x.state==="finished")return{...x,state:"paused"};if(x.currentStepIndex<x.steps.length-1){const A=x.currentStepIndex+1,P=x.steps[A];return{...x,state:"paused",currentStepIndex:A,stepTimeLeft:P.duration,lastTickTimestamp:Date.now()}}else return{...x,state:"finished",stepTimeLeft:0,lastTickTimestamp:Date.now()}}))},[]),d=O.useCallback(g=>{e(m=>m.map(x=>x.id!==g||x.state==="alarm"||x.state==="finished"?x:x.state==="running"?{...x,state:"paused"}:{...x,state:"running",lastTickTimestamp:Date.now()}))},[]),p=O.useCallback(g=>{e(m=>m.filter(x=>x.id!==g))},[]);return{processes:t,startBakingProcess:o,startHeatingProcess:l,advanceProcess:u,togglePauseProcess:d,cancelProcess:p}},Kc=eo(je,"categories"),O0=[{name:"Secos"},{name:"Refrigerados"},{name:"Lcteos"},{name:"Bebidas"},{name:"Carnes"},{name:"Frutas y Verduras"}],d2=async()=>{console.log("Seeding initial categories to Firestore...");const t=oo(je);O0.forEach(e=>{const n=lt(Kc);t.set(n,e)}),await t.commit(),console.log("Initial categories seeded.")},f2=()=>{const[t,e]=O.useState([]);return O.useEffect(()=>{const i=ro(Kc,ys("name")),o=io(i,l=>{if(l.empty&&O0.length>0){d2();return}const u=l.docs.map(d=>({id:d.id,...d.data()}));e(u)},l=>{console.error("Error fetching categories:",l)});return()=>o()},[]),{categories:t,addCategory:async i=>{try{await so(Kc,i)}catch(o){console.error("Error adding category:",o)}},updateCategory:async i=>{const{id:o,...l}=i,u=lt(je,"categories",o);try{await vs(u,l)}catch(d){console.error("Error updating category:",d)}},deleteCategory:async i=>{const o=lt(je,"categories",i);try{await Cd(o)}catch(l){console.error("Error deleting category:",l)}}}},Um=eo(je,"recipeFeedback"),p2=()=>{const[t,e]=O.useState([]);return O.useEffect(()=>{const r=ro(Um,ys("date","desc")),s=io(r,i=>{const o=i.docs.map(l=>({id:l.id,...l.data()}));e(o)},i=>{console.error("Error fetching recipe feedback:",i)});return()=>s()},[]),{feedbackLog:t,addFeedback:async r=>{try{await so(Um,{...r,date:new Date().toISOString()})}catch(s){console.error("Error adding feedback:",s)}}}},m2="data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU",g2=()=>{const t=O.useRef(null),e=O.useCallback(()=>{t.current||(t.current=new Audio(m2))},[]);return{playAlert:O.useCallback(()=>{e(),t.current&&(t.current.currentTime=0,t.current.play().catch(r=>{console.warn("Audio playback failed:",r)}))},[e])}},y2=t=>{const e=new Date,[n,r]=t.split(":").map(Number),s=new Date;return s.setHours(n,r,0,0),Math.round((s.getTime()-e.getTime())/1e3/60)},v2=()=>{const[t,e]=O.useState(Ie.Baking),[n,r]=O.useState(!1),s=h2(),i=ZS(),o=t2(),l=r2(),u=f2(),d=p2(),{playAlert:p}=g2(),{processes:g}=s,{tasks:m}=i,{items:x}=o,[A,P]=O.useState({}),b=O.useMemo(()=>{const y=new Date;return y.setMinutes(y.getMinutes()-y.getTimezoneOffset()),y.toISOString().split("T")[0]},[]);O.useEffect(()=>{const y=()=>{const S={};m.forEach(k=>{if(k.date===b&&k.status!=="done"){const R=y2(k.time);let w="normal";R<=0?w="due":R<=15&&(w="imminent"),S[k.id]={diff:R,status:w}}}),P(S)};y();const T=setInterval(y,1e4);return()=>clearInterval(T)},[m,b]);const I=O.useMemo(()=>m.filter(S=>S.date===b&&S.isCritical&&S.status!=="done"&&A[S.id]).map(S=>({task:S,diff:A[S.id].diff})).filter(({diff:S})=>S<=30&&S>=-15).sort((S,k)=>S.diff-k.diff),[m,A,b]),_=O.useRef(new Set);O.useEffect(()=>{g.forEach(y=>{const T=`proc-${y.id}`;y.state==="alarm"&&!_.current.has(T)?(p(),_.current.add(T)):y.state!=="alarm"&&_.current.has(T)&&_.current.delete(T)})},[g,p]),O.useEffect(()=>{const y=new Set(I.map(T=>`task-${T.task.id}`));y.forEach(T=>{_.current.has(T)||(p(),_.current.add(T))}),_.current.forEach(T=>{T.startsWith("task-")&&!y.has(T)&&_.current.delete(T)})},[I,p]);const C=O.useMemo(()=>I.slice(0,3),[I]),D=O.useMemo(()=>m.filter(y=>y.status==="inprogress"),[m]),F=O.useMemo(()=>x.filter(y=>y.currentStock<=y.minStock),[x]),M=()=>{switch(t){case Ie.Baking:return h.jsx(Fp,{productionHook:s,recipeLogHook:d});case Ie.Operations:return h.jsx(ux,{kanbanHook:i,criticalTasks:I});case Ie.Inventory:return h.jsx(mx,{inventoryHook:o,providers:l.providers,categories:u.categories});case Ie.Settings:return h.jsx(l2,{providersHook:l,categoriesHook:u,recipeLogHook:d});default:return h.jsx(Fp,{productionHook:s,recipeLogHook:d})}},E=()=>{switch(t){case Ie.Baking:return"Produccin de Pan";case Ie.Operations:return"Operaciones";case Ie.Inventory:return"Inventario";case Ie.Settings:return"Configuracin";default:return"Cafestesia"}};return h.jsx("div",{className:"w-full min-h-screen md:p-4 flex items-center justify-center bg-gray-100 text-gray-800",children:h.jsxs("div",{className:"app-container w-full h-screen max-w-5xl bg-white md:rounded-xl shadow-lg overflow-hidden relative border border-gray-200",children:[n&&h.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 z-40",onClick:()=>r(!1),"aria-hidden":"true"}),h.jsxs("div",{className:"grid md:grid-cols-[240px_1fr] h-full",children:[h.jsx(HE,{activeScreen:t,setActiveScreen:e,processes:g,urgentTasks:C,shoppingListItems:F,inProgressTasks:D,isOpen:n,onClose:()=>r(!1)}),h.jsxs("main",{className:"main-content flex flex-col overflow-y-auto h-full",children:[h.jsxs("header",{className:"main-content-header p-4 md:p-6 border-b border-gray-200 flex justify-between items-center flex-shrink-0",children:[h.jsx("button",{className:"md:hidden p-2 -ml-2 text-gray-600 hover:text-blue-600",onClick:()=>r(!0),children:h.jsx(he,{name:"menu",size:24})}),h.jsx("h2",{className:"text-xl md:text-3xl font-bold text-blue-600",children:E()}),h.jsx("div",{className:"md:hidden w-8"})," "]}),h.jsx("div",{className:"flex-grow relative",children:h.jsx("div",{className:"absolute inset-0 overflow-y-auto",children:M()})})]})]})]})})},L0=document.getElementById("root");if(!L0)throw new Error("Could not find root element to mount to");const _2=bu.createRoot(L0);_2.render(h.jsx(Zc.StrictMode,{children:h.jsx(v2,{})}));
