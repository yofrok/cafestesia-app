const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BreadProductionScreen-HdY6BktS.js","assets/Modal-dsQ9zPJa.js","assets/SwipeButton-CJC_Jtfy.js","assets/StockHistoryLog-DEV4cyK8.js","assets/OperationsScreen-CdwQVA_Q.js","assets/InventoryScreen-BvslYbFN.js","assets/SettingsScreen-lDgjx_YS.js","assets/useBeverages-BdwPV319.js","assets/BeveragesScreen-CbjcTp1G.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function S0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ym={exports:{}},nl={},Xm={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zi=Symbol.for("react.element"),A0=Symbol.for("react.portal"),R0=Symbol.for("react.fragment"),C0=Symbol.for("react.strict_mode"),k0=Symbol.for("react.profiler"),P0=Symbol.for("react.provider"),x0=Symbol.for("react.context"),V0=Symbol.for("react.forward_ref"),N0=Symbol.for("react.suspense"),D0=Symbol.for("react.memo"),M0=Symbol.for("react.lazy"),jf=Symbol.iterator;function L0(t){return t===null||typeof t!="object"?null:(t=jf&&t[jf]||t["@@iterator"],typeof t=="function"?t:null)}var Jm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zm=Object.assign,eg={};function Rs(t,e,n){this.props=t,this.context=e,this.refs=eg,this.updater=n||Jm}Rs.prototype.isReactComponent={};Rs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tg(){}tg.prototype=Rs.prototype;function ih(t,e,n){this.props=t,this.context=e,this.refs=eg,this.updater=n||Jm}var oh=ih.prototype=new tg;oh.constructor=ih;Zm(oh,Rs.prototype);oh.isPureReactComponent=!0;var bf=Array.isArray,ng=Object.prototype.hasOwnProperty,ah={current:null},rg={key:!0,ref:!0,__self:!0,__source:!0};function sg(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)ng.call(e,r)&&!rg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Zi,type:t,key:i,ref:a,props:s,_owner:ah.current}}function O0(t,e){return{$$typeof:Zi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zi}function F0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Uf=/\/+/g;function ru(t,e){return typeof t=="object"&&t!==null&&t.key!=null?F0(""+t.key):e.toString(36)}function ra(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Zi:case A0:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+ru(a,0):r,bf(s)?(n="",t!=null&&(n=t.replace(Uf,"$&/")+"/"),ra(s,e,n,"",function(h){return h})):s!=null&&(lh(s)&&(s=O0(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Uf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",bf(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+ru(i,l);a+=ra(i,e,n,u,s)}else if(u=L0(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+ru(i,l++),a+=ra(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Lo(t,e,n){if(t==null)return t;var r=[],s=0;return ra(t,r,"","",function(i){return e.call(n,i,s++)}),r}function j0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dt={current:null},sa={transition:null},b0={ReactCurrentDispatcher:dt,ReactCurrentBatchConfig:sa,ReactCurrentOwner:ah};function ig(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Lo,forEach:function(t,e,n){Lo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lo(t,function(){e++}),e},toArray:function(t){return Lo(t,function(e){return e})||[]},only:function(t){if(!lh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Rs;te.Fragment=R0;te.Profiler=k0;te.PureComponent=ih;te.StrictMode=C0;te.Suspense=N0;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b0;te.act=ig;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Zm({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=ah.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)ng.call(e,u)&&!rg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Zi,type:t.type,key:s,ref:i,props:r,_owner:a}};te.createContext=function(t){return t={$$typeof:x0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:P0,_context:t},t.Consumer=t};te.createElement=sg;te.createFactory=function(t){var e=sg.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:V0,render:t}};te.isValidElement=lh;te.lazy=function(t){return{$$typeof:M0,_payload:{_status:-1,_result:t},_init:j0}};te.memo=function(t,e){return{$$typeof:D0,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=sa.transition;sa.transition={};try{t()}finally{sa.transition=e}};te.unstable_act=ig;te.useCallback=function(t,e){return dt.current.useCallback(t,e)};te.useContext=function(t){return dt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return dt.current.useDeferredValue(t)};te.useEffect=function(t,e){return dt.current.useEffect(t,e)};te.useId=function(){return dt.current.useId()};te.useImperativeHandle=function(t,e,n){return dt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return dt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return dt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return dt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return dt.current.useReducer(t,e,n)};te.useRef=function(t){return dt.current.useRef(t)};te.useState=function(t){return dt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return dt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return dt.current.useTransition()};te.version="18.3.1";Xm.exports=te;var q=Xm.exports;const U0=S0(q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0=q,B0=Symbol.for("react.element"),$0=Symbol.for("react.fragment"),q0=Object.prototype.hasOwnProperty,H0=z0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,W0={key:!0,ref:!0,__self:!0,__source:!0};function og(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)q0.call(e,r)&&!W0.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:B0,type:t,key:i,ref:a,props:s,_owner:H0.current}}nl.Fragment=$0;nl.jsx=og;nl.jsxs=og;Ym.exports=nl;var A=Ym.exports,Bu={},ag={exports:{}},kt={},lg={exports:{}},ug={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,W){var G=U.length;U.push(W);e:for(;0<G;){var ge=G-1>>>1,ce=U[ge];if(0<s(ce,W))U[ge]=W,U[G]=ce,G=ge;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var W=U[0],G=U.pop();if(G!==W){U[0]=G;e:for(var ge=0,ce=U.length,xe=ce>>>1;ge<xe;){var sn=2*(ge+1)-1,on=U[sn],an=sn+1,ln=U[an];if(0>s(on,G))an<ce&&0>s(ln,on)?(U[ge]=ln,U[an]=G,ge=an):(U[ge]=on,U[sn]=G,ge=sn);else if(an<ce&&0>s(ln,G))U[ge]=ln,U[an]=G,ge=an;else break e}}return W}function s(U,W){var G=U.sortIndex-W.sortIndex;return G!==0?G:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],f=1,m=null,g=3,E=!1,C=!1,x=!1,D=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(U){for(var W=n(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=U)r(h),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(h)}}function N(U){if(x=!1,k(U),!C)if(n(u)!==null)C=!0,fe(O);else{var W=n(h);W!==null&&ue(N,W.startTime-U)}}function O(U,W){C=!1,x&&(x=!1,S(y),y=-1),E=!0;var G=g;try{for(k(W),m=n(u);m!==null&&(!(m.expirationTime>W)||U&&!R());){var ge=m.callback;if(typeof ge=="function"){m.callback=null,g=m.priorityLevel;var ce=ge(m.expirationTime<=W);W=t.unstable_now(),typeof ce=="function"?m.callback=ce:m===n(u)&&r(u),k(W)}else r(u);m=n(u)}if(m!==null)var xe=!0;else{var sn=n(h);sn!==null&&ue(N,sn.startTime-W),xe=!1}return xe}finally{m=null,g=G,E=!1}}var j=!1,T=null,y=-1,I=5,_=-1;function R(){return!(t.unstable_now()-_<I)}function P(){if(T!==null){var U=t.unstable_now();_=U;var W=!0;try{W=T(!0,U)}finally{W?w():(j=!1,T=null)}}else j=!1}var w;if(typeof v=="function")w=function(){v(P)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,J=K.port2;K.port1.onmessage=P,w=function(){J.postMessage(null)}}else w=function(){D(P,0)};function fe(U){T=U,j||(j=!0,w())}function ue(U,W){y=D(function(){U(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){C||E||(C=!0,fe(O))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var G=g;g=W;try{return U()}finally{g=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var G=g;g=U;try{return W()}finally{g=G}},t.unstable_scheduleCallback=function(U,W,G){var ge=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ge+G:ge):G=ge,U){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=G+ce,U={id:f++,callback:W,priorityLevel:U,startTime:G,expirationTime:ce,sortIndex:-1},G>ge?(U.sortIndex=G,e(h,U),n(u)===null&&U===n(h)&&(x?(S(y),y=-1):x=!0,ue(N,G-ge))):(U.sortIndex=ce,e(u,U),C||E||(C=!0,fe(O))),U},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(U){var W=g;return function(){var G=g;g=W;try{return U.apply(this,arguments)}finally{g=G}}}})(ug);lg.exports=ug;var Q0=lg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0=q,Ct=Q0;function b(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cg=new Set,Ci={};function Vr(t,e){hs(t,e),hs(t+"Capture",e)}function hs(t,e){for(Ci[t]=e,t=0;t<e.length;t++)cg.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$u=Object.prototype.hasOwnProperty,G0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zf={},Bf={};function Y0(t){return $u.call(Bf,t)?!0:$u.call(zf,t)?!1:G0.test(t)?Bf[t]=!0:(zf[t]=!0,!1)}function X0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function J0(t,e,n,r){if(e===null||typeof e>"u"||X0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ft(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ke[t]=new ft(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ke[e]=new ft(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ke[t]=new ft(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ke[t]=new ft(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ke[t]=new ft(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ke[t]=new ft(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ke[t]=new ft(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ke[t]=new ft(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ke[t]=new ft(t,5,!1,t.toLowerCase(),null,!1,!1)});var uh=/[\-:]([a-z])/g;function ch(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uh,ch);Ke[e]=new ft(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uh,ch);Ke[e]=new ft(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uh,ch);Ke[e]=new ft(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ke[t]=new ft(t,1,!1,t.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ke[t]=new ft(t,1,!1,t.toLowerCase(),null,!0,!0)});function hh(t,e,n,r){var s=Ke.hasOwnProperty(e)?Ke[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(J0(e,n,s,r)&&(n=null),r||s===null?Y0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Cn=K0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oo=Symbol.for("react.element"),Hr=Symbol.for("react.portal"),Wr=Symbol.for("react.fragment"),dh=Symbol.for("react.strict_mode"),qu=Symbol.for("react.profiler"),hg=Symbol.for("react.provider"),dg=Symbol.for("react.context"),fh=Symbol.for("react.forward_ref"),Hu=Symbol.for("react.suspense"),Wu=Symbol.for("react.suspense_list"),ph=Symbol.for("react.memo"),Dn=Symbol.for("react.lazy"),fg=Symbol.for("react.offscreen"),$f=Symbol.iterator;function Ks(t){return t===null||typeof t!="object"?null:(t=$f&&t[$f]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Object.assign,su;function si(t){if(su===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);su=e&&e[1]||""}return`
`+su+t}var iu=!1;function ou(t,e){if(!t||iu)return"";iu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{iu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?si(t):""}function Z0(t){switch(t.tag){case 5:return si(t.type);case 16:return si("Lazy");case 13:return si("Suspense");case 19:return si("SuspenseList");case 0:case 2:case 15:return t=ou(t.type,!1),t;case 11:return t=ou(t.type.render,!1),t;case 1:return t=ou(t.type,!0),t;default:return""}}function Qu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wr:return"Fragment";case Hr:return"Portal";case qu:return"Profiler";case dh:return"StrictMode";case Hu:return"Suspense";case Wu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dg:return(t.displayName||"Context")+".Consumer";case hg:return(t._context.displayName||"Context")+".Provider";case fh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ph:return e=t.displayName||null,e!==null?e:Qu(t.type)||"Memo";case Dn:e=t._payload,t=t._init;try{return Qu(t(e))}catch{}}return null}function eE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qu(e);case 8:return e===dh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tE(t){var e=pg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fo(t){t._valueTracker||(t._valueTracker=tE(t))}function mg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=pg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ea(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ku(t,e){var n=e.checked;return Se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Jn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gg(t,e){e=e.checked,e!=null&&hh(t,"checked",e,!1)}function Gu(t,e){gg(t,e);var n=Jn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yu(t,e.type,Jn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yu(t,e,n){(e!=="number"||Ea(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ii=Array.isArray;function rs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Jn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Xu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(b(91));return Se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(b(92));if(ii(n)){if(1<n.length)throw Error(b(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jn(n)}}function yg(t,e){var n=Jn(e.value),r=Jn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _g(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ju(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_g(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jo,vg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(jo=jo||document.createElement("div"),jo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ki(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nE=["Webkit","ms","Moz","O"];Object.keys(pi).forEach(function(t){nE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pi[e]=pi[t]})});function Eg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pi.hasOwnProperty(t)&&pi[t]?(""+e).trim():e+"px"}function wg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Eg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var rE=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zu(t,e){if(e){if(rE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(b(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(b(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(b(61))}if(e.style!=null&&typeof e.style!="object")throw Error(b(62))}}function ec(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tc=null;function mh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nc=null,ss=null,is=null;function Kf(t){if(t=no(t)){if(typeof nc!="function")throw Error(b(280));var e=t.stateNode;e&&(e=al(e),nc(t.stateNode,t.type,e))}}function Tg(t){ss?is?is.push(t):is=[t]:ss=t}function Ig(){if(ss){var t=ss,e=is;if(is=ss=null,Kf(t),e)for(t=0;t<e.length;t++)Kf(e[t])}}function Sg(t,e){return t(e)}function Ag(){}var au=!1;function Rg(t,e,n){if(au)return t(e,n);au=!0;try{return Sg(t,e,n)}finally{au=!1,(ss!==null||is!==null)&&(Ag(),Ig())}}function Pi(t,e){var n=t.stateNode;if(n===null)return null;var r=al(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(b(231,e,typeof n));return n}var rc=!1;if(yn)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){rc=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{rc=!1}function sE(t,e,n,r,s,i,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var mi=!1,wa=null,Ta=!1,sc=null,iE={onError:function(t){mi=!0,wa=t}};function oE(t,e,n,r,s,i,a,l,u){mi=!1,wa=null,sE.apply(iE,arguments)}function aE(t,e,n,r,s,i,a,l,u){if(oE.apply(this,arguments),mi){if(mi){var h=wa;mi=!1,wa=null}else throw Error(b(198));Ta||(Ta=!0,sc=h)}}function Nr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Cg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gf(t){if(Nr(t)!==t)throw Error(b(188))}function lE(t){var e=t.alternate;if(!e){if(e=Nr(t),e===null)throw Error(b(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Gf(s),t;if(i===r)return Gf(s),e;i=i.sibling}throw Error(b(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(b(189))}}if(n.alternate!==r)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?t:e}function kg(t){return t=lE(t),t!==null?Pg(t):null}function Pg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Pg(t);if(e!==null)return e;t=t.sibling}return null}var xg=Ct.unstable_scheduleCallback,Yf=Ct.unstable_cancelCallback,uE=Ct.unstable_shouldYield,cE=Ct.unstable_requestPaint,Ne=Ct.unstable_now,hE=Ct.unstable_getCurrentPriorityLevel,gh=Ct.unstable_ImmediatePriority,Vg=Ct.unstable_UserBlockingPriority,Ia=Ct.unstable_NormalPriority,dE=Ct.unstable_LowPriority,Ng=Ct.unstable_IdlePriority,rl=null,Jt=null;function fE(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(rl,t,void 0,(t.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:gE,pE=Math.log,mE=Math.LN2;function gE(t){return t>>>=0,t===0?32:31-(pE(t)/mE|0)|0}var bo=64,Uo=4194304;function oi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=oi(l):(i&=a,i!==0&&(r=oi(i)))}else a=n&~s,a!==0?r=oi(a):i!==0&&(r=oi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ht(e),s=1<<n,r|=t[n],e&=~s;return r}function yE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _E(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Ht(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=yE(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function ic(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Dg(){var t=bo;return bo<<=1,!(bo&4194240)&&(bo=64),t}function lu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function eo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ht(e),t[e]=n}function vE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ht(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function yh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ht(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var he=0;function Mg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Lg,_h,Og,Fg,jg,oc=!1,zo=[],Un=null,zn=null,Bn=null,xi=new Map,Vi=new Map,Ln=[],EE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xf(t,e){switch(t){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":xi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vi.delete(e.pointerId)}}function Ys(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=no(e),e!==null&&_h(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function wE(t,e,n,r,s){switch(e){case"focusin":return Un=Ys(Un,t,e,n,r,s),!0;case"dragenter":return zn=Ys(zn,t,e,n,r,s),!0;case"mouseover":return Bn=Ys(Bn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return xi.set(i,Ys(xi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vi.set(i,Ys(Vi.get(i)||null,t,e,n,r,s)),!0}return!1}function bg(t){var e=gr(t.target);if(e!==null){var n=Nr(e);if(n!==null){if(e=n.tag,e===13){if(e=Cg(n),e!==null){t.blockedOn=e,jg(t.priority,function(){Og(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ia(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ac(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);tc=r,n.target.dispatchEvent(r),tc=null}else return e=no(n),e!==null&&_h(e),t.blockedOn=n,!1;e.shift()}return!0}function Jf(t,e,n){ia(t)&&n.delete(e)}function TE(){oc=!1,Un!==null&&ia(Un)&&(Un=null),zn!==null&&ia(zn)&&(zn=null),Bn!==null&&ia(Bn)&&(Bn=null),xi.forEach(Jf),Vi.forEach(Jf)}function Xs(t,e){t.blockedOn===e&&(t.blockedOn=null,oc||(oc=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,TE)))}function Ni(t){function e(s){return Xs(s,t)}if(0<zo.length){Xs(zo[0],t);for(var n=1;n<zo.length;n++){var r=zo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Un!==null&&Xs(Un,t),zn!==null&&Xs(zn,t),Bn!==null&&Xs(Bn,t),xi.forEach(e),Vi.forEach(e),n=0;n<Ln.length;n++)r=Ln[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ln.length&&(n=Ln[0],n.blockedOn===null);)bg(n),n.blockedOn===null&&Ln.shift()}var os=Cn.ReactCurrentBatchConfig,Aa=!0;function IE(t,e,n,r){var s=he,i=os.transition;os.transition=null;try{he=1,vh(t,e,n,r)}finally{he=s,os.transition=i}}function SE(t,e,n,r){var s=he,i=os.transition;os.transition=null;try{he=4,vh(t,e,n,r)}finally{he=s,os.transition=i}}function vh(t,e,n,r){if(Aa){var s=ac(t,e,n,r);if(s===null)_u(t,e,r,Ra,n),Xf(t,r);else if(wE(s,t,e,n,r))r.stopPropagation();else if(Xf(t,r),e&4&&-1<EE.indexOf(t)){for(;s!==null;){var i=no(s);if(i!==null&&Lg(i),i=ac(t,e,n,r),i===null&&_u(t,e,r,Ra,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else _u(t,e,r,null,n)}}var Ra=null;function ac(t,e,n,r){if(Ra=null,t=mh(r),t=gr(t),t!==null)if(e=Nr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Cg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ra=t,null}function Ug(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hE()){case gh:return 1;case Vg:return 4;case Ia:case dE:return 16;case Ng:return 536870912;default:return 16}default:return 16}}var Fn=null,Eh=null,oa=null;function zg(){if(oa)return oa;var t,e=Eh,n=e.length,r,s="value"in Fn?Fn.value:Fn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return oa=s.slice(t,1<r?1-r:void 0)}function aa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bo(){return!0}function Zf(){return!1}function Pt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bo:Zf,this.isPropagationStopped=Zf,this}return Se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),e}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wh=Pt(Cs),to=Se({},Cs,{view:0,detail:0}),AE=Pt(to),uu,cu,Js,sl=Se({},to,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Th,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Js&&(Js&&t.type==="mousemove"?(uu=t.screenX-Js.screenX,cu=t.screenY-Js.screenY):cu=uu=0,Js=t),uu)},movementY:function(t){return"movementY"in t?t.movementY:cu}}),ep=Pt(sl),RE=Se({},sl,{dataTransfer:0}),CE=Pt(RE),kE=Se({},to,{relatedTarget:0}),hu=Pt(kE),PE=Se({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),xE=Pt(PE),VE=Se({},Cs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NE=Pt(VE),DE=Se({},Cs,{data:0}),tp=Pt(DE),ME={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OE[t])?!!e[t]:!1}function Th(){return FE}var jE=Se({},to,{key:function(t){if(t.key){var e=ME[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=aa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?LE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Th,charCode:function(t){return t.type==="keypress"?aa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?aa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bE=Pt(jE),UE=Se({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),np=Pt(UE),zE=Se({},to,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Th}),BE=Pt(zE),$E=Se({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),qE=Pt($E),HE=Se({},sl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),WE=Pt(HE),QE=[9,13,27,32],Ih=yn&&"CompositionEvent"in window,gi=null;yn&&"documentMode"in document&&(gi=document.documentMode);var KE=yn&&"TextEvent"in window&&!gi,Bg=yn&&(!Ih||gi&&8<gi&&11>=gi),rp=" ",sp=!1;function $g(t,e){switch(t){case"keyup":return QE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qr=!1;function GE(t,e){switch(t){case"compositionend":return qg(e);case"keypress":return e.which!==32?null:(sp=!0,rp);case"textInput":return t=e.data,t===rp&&sp?null:t;default:return null}}function YE(t,e){if(Qr)return t==="compositionend"||!Ih&&$g(t,e)?(t=zg(),oa=Eh=Fn=null,Qr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bg&&e.locale!=="ko"?null:e.data;default:return null}}var XE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ip(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XE[t.type]:e==="textarea"}function Hg(t,e,n,r){Tg(r),e=Ca(e,"onChange"),0<e.length&&(n=new wh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yi=null,Di=null;function JE(t){ny(t,0)}function il(t){var e=Yr(t);if(mg(e))return t}function ZE(t,e){if(t==="change")return e}var Wg=!1;if(yn){var du;if(yn){var fu="oninput"in document;if(!fu){var op=document.createElement("div");op.setAttribute("oninput","return;"),fu=typeof op.oninput=="function"}du=fu}else du=!1;Wg=du&&(!document.documentMode||9<document.documentMode)}function ap(){yi&&(yi.detachEvent("onpropertychange",Qg),Di=yi=null)}function Qg(t){if(t.propertyName==="value"&&il(Di)){var e=[];Hg(e,Di,t,mh(t)),Rg(JE,e)}}function ew(t,e,n){t==="focusin"?(ap(),yi=e,Di=n,yi.attachEvent("onpropertychange",Qg)):t==="focusout"&&ap()}function tw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return il(Di)}function nw(t,e){if(t==="click")return il(e)}function rw(t,e){if(t==="input"||t==="change")return il(e)}function sw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qt=typeof Object.is=="function"?Object.is:sw;function Mi(t,e){if(Qt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!$u.call(e,s)||!Qt(t[s],e[s]))return!1}return!0}function lp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function up(t,e){var n=lp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lp(n)}}function Kg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Kg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Gg(){for(var t=window,e=Ea();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ea(t.document)}return e}function Sh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iw(t){var e=Gg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Kg(n.ownerDocument.documentElement,n)){if(r!==null&&Sh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=up(n,i);var a=up(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ow=yn&&"documentMode"in document&&11>=document.documentMode,Kr=null,lc=null,_i=null,uc=!1;function cp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uc||Kr==null||Kr!==Ea(r)||(r=Kr,"selectionStart"in r&&Sh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_i&&Mi(_i,r)||(_i=r,r=Ca(lc,"onSelect"),0<r.length&&(e=new wh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Kr)))}function $o(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gr={animationend:$o("Animation","AnimationEnd"),animationiteration:$o("Animation","AnimationIteration"),animationstart:$o("Animation","AnimationStart"),transitionend:$o("Transition","TransitionEnd")},pu={},Yg={};yn&&(Yg=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function ol(t){if(pu[t])return pu[t];if(!Gr[t])return t;var e=Gr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Yg)return pu[t]=e[n];return t}var Xg=ol("animationend"),Jg=ol("animationiteration"),Zg=ol("animationstart"),ey=ol("transitionend"),ty=new Map,hp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sr(t,e){ty.set(t,e),Vr(e,[t])}for(var mu=0;mu<hp.length;mu++){var gu=hp[mu],aw=gu.toLowerCase(),lw=gu[0].toUpperCase()+gu.slice(1);sr(aw,"on"+lw)}sr(Xg,"onAnimationEnd");sr(Jg,"onAnimationIteration");sr(Zg,"onAnimationStart");sr("dblclick","onDoubleClick");sr("focusin","onFocus");sr("focusout","onBlur");sr(ey,"onTransitionEnd");hs("onMouseEnter",["mouseout","mouseover"]);hs("onMouseLeave",["mouseout","mouseover"]);hs("onPointerEnter",["pointerout","pointerover"]);hs("onPointerLeave",["pointerout","pointerover"]);Vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ai));function dp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,aE(r,e,void 0,t),t.currentTarget=null}function ny(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;dp(s,l,h),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;dp(s,l,h),i=u}}}if(Ta)throw t=sc,Ta=!1,sc=null,t}function _e(t,e){var n=e[pc];n===void 0&&(n=e[pc]=new Set);var r=t+"__bubble";n.has(r)||(ry(e,t,2,!1),n.add(r))}function yu(t,e,n){var r=0;e&&(r|=4),ry(n,t,r,e)}var qo="_reactListening"+Math.random().toString(36).slice(2);function Li(t){if(!t[qo]){t[qo]=!0,cg.forEach(function(n){n!=="selectionchange"&&(uw.has(n)||yu(n,!1,t),yu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qo]||(e[qo]=!0,yu("selectionchange",!1,e))}}function ry(t,e,n,r){switch(Ug(e)){case 1:var s=IE;break;case 4:s=SE;break;default:s=vh}n=s.bind(null,e,n,t),s=void 0,!rc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function _u(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=gr(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Rg(function(){var h=i,f=mh(n),m=[];e:{var g=ty.get(t);if(g!==void 0){var E=wh,C=t;switch(t){case"keypress":if(aa(n)===0)break e;case"keydown":case"keyup":E=bE;break;case"focusin":C="focus",E=hu;break;case"focusout":C="blur",E=hu;break;case"beforeblur":case"afterblur":E=hu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=ep;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=CE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=BE;break;case Xg:case Jg:case Zg:E=xE;break;case ey:E=qE;break;case"scroll":E=AE;break;case"wheel":E=WE;break;case"copy":case"cut":case"paste":E=NE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=np}var x=(e&4)!==0,D=!x&&t==="scroll",S=x?g!==null?g+"Capture":null:g;x=[];for(var v=h,k;v!==null;){k=v;var N=k.stateNode;if(k.tag===5&&N!==null&&(k=N,S!==null&&(N=Pi(v,S),N!=null&&x.push(Oi(v,N,k)))),D)break;v=v.return}0<x.length&&(g=new E(g,C,null,n,f),m.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",g&&n!==tc&&(C=n.relatedTarget||n.fromElement)&&(gr(C)||C[_n]))break e;if((E||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,E?(C=n.relatedTarget||n.toElement,E=h,C=C?gr(C):null,C!==null&&(D=Nr(C),C!==D||C.tag!==5&&C.tag!==6)&&(C=null)):(E=null,C=h),E!==C)){if(x=ep,N="onMouseLeave",S="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(x=np,N="onPointerLeave",S="onPointerEnter",v="pointer"),D=E==null?g:Yr(E),k=C==null?g:Yr(C),g=new x(N,v+"leave",E,n,f),g.target=D,g.relatedTarget=k,N=null,gr(f)===h&&(x=new x(S,v+"enter",C,n,f),x.target=k,x.relatedTarget=D,N=x),D=N,E&&C)t:{for(x=E,S=C,v=0,k=x;k;k=Ur(k))v++;for(k=0,N=S;N;N=Ur(N))k++;for(;0<v-k;)x=Ur(x),v--;for(;0<k-v;)S=Ur(S),k--;for(;v--;){if(x===S||S!==null&&x===S.alternate)break t;x=Ur(x),S=Ur(S)}x=null}else x=null;E!==null&&fp(m,g,E,x,!1),C!==null&&D!==null&&fp(m,D,C,x,!0)}}e:{if(g=h?Yr(h):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var O=ZE;else if(ip(g))if(Wg)O=rw;else{O=tw;var j=ew}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=nw);if(O&&(O=O(t,h))){Hg(m,O,n,f);break e}j&&j(t,g,h),t==="focusout"&&(j=g._wrapperState)&&j.controlled&&g.type==="number"&&Yu(g,"number",g.value)}switch(j=h?Yr(h):window,t){case"focusin":(ip(j)||j.contentEditable==="true")&&(Kr=j,lc=h,_i=null);break;case"focusout":_i=lc=Kr=null;break;case"mousedown":uc=!0;break;case"contextmenu":case"mouseup":case"dragend":uc=!1,cp(m,n,f);break;case"selectionchange":if(ow)break;case"keydown":case"keyup":cp(m,n,f)}var T;if(Ih)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Qr?$g(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Bg&&n.locale!=="ko"&&(Qr||y!=="onCompositionStart"?y==="onCompositionEnd"&&Qr&&(T=zg()):(Fn=f,Eh="value"in Fn?Fn.value:Fn.textContent,Qr=!0)),j=Ca(h,y),0<j.length&&(y=new tp(y,t,null,n,f),m.push({event:y,listeners:j}),T?y.data=T:(T=qg(n),T!==null&&(y.data=T)))),(T=KE?GE(t,n):YE(t,n))&&(h=Ca(h,"onBeforeInput"),0<h.length&&(f=new tp("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:h}),f.data=T))}ny(m,e)})}function Oi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ca(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Pi(t,n),i!=null&&r.unshift(Oi(t,i,s)),i=Pi(t,e),i!=null&&r.push(Oi(t,i,s))),t=t.return}return r}function Ur(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fp(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Pi(n,i),u!=null&&a.unshift(Oi(n,u,l))):s||(u=Pi(n,i),u!=null&&a.push(Oi(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var cw=/\r\n?/g,hw=/\u0000|\uFFFD/g;function pp(t){return(typeof t=="string"?t:""+t).replace(cw,`
`).replace(hw,"")}function Ho(t,e,n){if(e=pp(e),pp(t)!==e&&n)throw Error(b(425))}function ka(){}var cc=null,hc=null;function dc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fc=typeof setTimeout=="function"?setTimeout:void 0,dw=typeof clearTimeout=="function"?clearTimeout:void 0,mp=typeof Promise=="function"?Promise:void 0,fw=typeof queueMicrotask=="function"?queueMicrotask:typeof mp<"u"?function(t){return mp.resolve(null).then(t).catch(pw)}:fc;function pw(t){setTimeout(function(){throw t})}function vu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ni(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ni(e)}function $n(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ks=Math.random().toString(36).slice(2),Xt="__reactFiber$"+ks,Fi="__reactProps$"+ks,_n="__reactContainer$"+ks,pc="__reactEvents$"+ks,mw="__reactListeners$"+ks,gw="__reactHandles$"+ks;function gr(t){var e=t[Xt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_n]||n[Xt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gp(t);t!==null;){if(n=t[Xt])return n;t=gp(t)}return e}t=n,n=t.parentNode}return null}function no(t){return t=t[Xt]||t[_n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(b(33))}function al(t){return t[Fi]||null}var mc=[],Xr=-1;function ir(t){return{current:t}}function Ee(t){0>Xr||(t.current=mc[Xr],mc[Xr]=null,Xr--)}function me(t,e){Xr++,mc[Xr]=t.current,t.current=e}var Zn={},it=ir(Zn),yt=ir(!1),Ir=Zn;function ds(t,e){var n=t.type.contextTypes;if(!n)return Zn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function _t(t){return t=t.childContextTypes,t!=null}function Pa(){Ee(yt),Ee(it)}function yp(t,e,n){if(it.current!==Zn)throw Error(b(168));me(it,e),me(yt,n)}function sy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(b(108,eE(t)||"Unknown",s));return Se({},n,r)}function xa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zn,Ir=it.current,me(it,t),me(yt,yt.current),!0}function _p(t,e,n){var r=t.stateNode;if(!r)throw Error(b(169));n?(t=sy(t,e,Ir),r.__reactInternalMemoizedMergedChildContext=t,Ee(yt),Ee(it),me(it,t)):Ee(yt),me(yt,n)}var fn=null,ll=!1,Eu=!1;function iy(t){fn===null?fn=[t]:fn.push(t)}function yw(t){ll=!0,iy(t)}function or(){if(!Eu&&fn!==null){Eu=!0;var t=0,e=he;try{var n=fn;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fn=null,ll=!1}catch(s){throw fn!==null&&(fn=fn.slice(t+1)),xg(gh,or),s}finally{he=e,Eu=!1}}return null}var Jr=[],Zr=0,Va=null,Na=0,Vt=[],Nt=0,Sr=null,pn=1,mn="";function fr(t,e){Jr[Zr++]=Na,Jr[Zr++]=Va,Va=t,Na=e}function oy(t,e,n){Vt[Nt++]=pn,Vt[Nt++]=mn,Vt[Nt++]=Sr,Sr=t;var r=pn;t=mn;var s=32-Ht(r)-1;r&=~(1<<s),n+=1;var i=32-Ht(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,pn=1<<32-Ht(e)+s|n<<s|r,mn=i+t}else pn=1<<i|n<<s|r,mn=t}function Ah(t){t.return!==null&&(fr(t,1),oy(t,1,0))}function Rh(t){for(;t===Va;)Va=Jr[--Zr],Jr[Zr]=null,Na=Jr[--Zr],Jr[Zr]=null;for(;t===Sr;)Sr=Vt[--Nt],Vt[Nt]=null,mn=Vt[--Nt],Vt[Nt]=null,pn=Vt[--Nt],Vt[Nt]=null}var At=null,It=null,we=!1,qt=null;function ay(t,e){var n=Mt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,At=t,It=$n(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,At=t,It=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Sr!==null?{id:pn,overflow:mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,At=t,It=null,!0):!1;default:return!1}}function gc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yc(t){if(we){var e=It;if(e){var n=e;if(!vp(t,e)){if(gc(t))throw Error(b(418));e=$n(n.nextSibling);var r=At;e&&vp(t,e)?ay(r,n):(t.flags=t.flags&-4097|2,we=!1,At=t)}}else{if(gc(t))throw Error(b(418));t.flags=t.flags&-4097|2,we=!1,At=t}}}function Ep(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;At=t}function Wo(t){if(t!==At)return!1;if(!we)return Ep(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dc(t.type,t.memoizedProps)),e&&(e=It)){if(gc(t))throw ly(),Error(b(418));for(;e;)ay(t,e),e=$n(e.nextSibling)}if(Ep(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(b(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){It=$n(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}It=null}}else It=At?$n(t.stateNode.nextSibling):null;return!0}function ly(){for(var t=It;t;)t=$n(t.nextSibling)}function fs(){It=At=null,we=!1}function Ch(t){qt===null?qt=[t]:qt.push(t)}var _w=Cn.ReactCurrentBatchConfig;function Zs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(b(309));var r=n.stateNode}if(!r)throw Error(b(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(b(284));if(!n._owner)throw Error(b(290,t))}return t}function Qo(t,e){throw t=Object.prototype.toString.call(e),Error(b(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wp(t){var e=t._init;return e(t._payload)}function uy(t){function e(S,v){if(t){var k=S.deletions;k===null?(S.deletions=[v],S.flags|=16):k.push(v)}}function n(S,v){if(!t)return null;for(;v!==null;)e(S,v),v=v.sibling;return null}function r(S,v){for(S=new Map;v!==null;)v.key!==null?S.set(v.key,v):S.set(v.index,v),v=v.sibling;return S}function s(S,v){return S=Qn(S,v),S.index=0,S.sibling=null,S}function i(S,v,k){return S.index=k,t?(k=S.alternate,k!==null?(k=k.index,k<v?(S.flags|=2,v):k):(S.flags|=2,v)):(S.flags|=1048576,v)}function a(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,v,k,N){return v===null||v.tag!==6?(v=Cu(k,S.mode,N),v.return=S,v):(v=s(v,k),v.return=S,v)}function u(S,v,k,N){var O=k.type;return O===Wr?f(S,v,k.props.children,N,k.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Dn&&wp(O)===v.type)?(N=s(v,k.props),N.ref=Zs(S,v,k),N.return=S,N):(N=pa(k.type,k.key,k.props,null,S.mode,N),N.ref=Zs(S,v,k),N.return=S,N)}function h(S,v,k,N){return v===null||v.tag!==4||v.stateNode.containerInfo!==k.containerInfo||v.stateNode.implementation!==k.implementation?(v=ku(k,S.mode,N),v.return=S,v):(v=s(v,k.children||[]),v.return=S,v)}function f(S,v,k,N,O){return v===null||v.tag!==7?(v=wr(k,S.mode,N,O),v.return=S,v):(v=s(v,k),v.return=S,v)}function m(S,v,k){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Cu(""+v,S.mode,k),v.return=S,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Oo:return k=pa(v.type,v.key,v.props,null,S.mode,k),k.ref=Zs(S,null,v),k.return=S,k;case Hr:return v=ku(v,S.mode,k),v.return=S,v;case Dn:var N=v._init;return m(S,N(v._payload),k)}if(ii(v)||Ks(v))return v=wr(v,S.mode,k,null),v.return=S,v;Qo(S,v)}return null}function g(S,v,k,N){var O=v!==null?v.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return O!==null?null:l(S,v,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Oo:return k.key===O?u(S,v,k,N):null;case Hr:return k.key===O?h(S,v,k,N):null;case Dn:return O=k._init,g(S,v,O(k._payload),N)}if(ii(k)||Ks(k))return O!==null?null:f(S,v,k,N,null);Qo(S,k)}return null}function E(S,v,k,N,O){if(typeof N=="string"&&N!==""||typeof N=="number")return S=S.get(k)||null,l(v,S,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Oo:return S=S.get(N.key===null?k:N.key)||null,u(v,S,N,O);case Hr:return S=S.get(N.key===null?k:N.key)||null,h(v,S,N,O);case Dn:var j=N._init;return E(S,v,k,j(N._payload),O)}if(ii(N)||Ks(N))return S=S.get(k)||null,f(v,S,N,O,null);Qo(v,N)}return null}function C(S,v,k,N){for(var O=null,j=null,T=v,y=v=0,I=null;T!==null&&y<k.length;y++){T.index>y?(I=T,T=null):I=T.sibling;var _=g(S,T,k[y],N);if(_===null){T===null&&(T=I);break}t&&T&&_.alternate===null&&e(S,T),v=i(_,v,y),j===null?O=_:j.sibling=_,j=_,T=I}if(y===k.length)return n(S,T),we&&fr(S,y),O;if(T===null){for(;y<k.length;y++)T=m(S,k[y],N),T!==null&&(v=i(T,v,y),j===null?O=T:j.sibling=T,j=T);return we&&fr(S,y),O}for(T=r(S,T);y<k.length;y++)I=E(T,S,y,k[y],N),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?y:I.key),v=i(I,v,y),j===null?O=I:j.sibling=I,j=I);return t&&T.forEach(function(R){return e(S,R)}),we&&fr(S,y),O}function x(S,v,k,N){var O=Ks(k);if(typeof O!="function")throw Error(b(150));if(k=O.call(k),k==null)throw Error(b(151));for(var j=O=null,T=v,y=v=0,I=null,_=k.next();T!==null&&!_.done;y++,_=k.next()){T.index>y?(I=T,T=null):I=T.sibling;var R=g(S,T,_.value,N);if(R===null){T===null&&(T=I);break}t&&T&&R.alternate===null&&e(S,T),v=i(R,v,y),j===null?O=R:j.sibling=R,j=R,T=I}if(_.done)return n(S,T),we&&fr(S,y),O;if(T===null){for(;!_.done;y++,_=k.next())_=m(S,_.value,N),_!==null&&(v=i(_,v,y),j===null?O=_:j.sibling=_,j=_);return we&&fr(S,y),O}for(T=r(S,T);!_.done;y++,_=k.next())_=E(T,S,y,_.value,N),_!==null&&(t&&_.alternate!==null&&T.delete(_.key===null?y:_.key),v=i(_,v,y),j===null?O=_:j.sibling=_,j=_);return t&&T.forEach(function(P){return e(S,P)}),we&&fr(S,y),O}function D(S,v,k,N){if(typeof k=="object"&&k!==null&&k.type===Wr&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Oo:e:{for(var O=k.key,j=v;j!==null;){if(j.key===O){if(O=k.type,O===Wr){if(j.tag===7){n(S,j.sibling),v=s(j,k.props.children),v.return=S,S=v;break e}}else if(j.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Dn&&wp(O)===j.type){n(S,j.sibling),v=s(j,k.props),v.ref=Zs(S,j,k),v.return=S,S=v;break e}n(S,j);break}else e(S,j);j=j.sibling}k.type===Wr?(v=wr(k.props.children,S.mode,N,k.key),v.return=S,S=v):(N=pa(k.type,k.key,k.props,null,S.mode,N),N.ref=Zs(S,v,k),N.return=S,S=N)}return a(S);case Hr:e:{for(j=k.key;v!==null;){if(v.key===j)if(v.tag===4&&v.stateNode.containerInfo===k.containerInfo&&v.stateNode.implementation===k.implementation){n(S,v.sibling),v=s(v,k.children||[]),v.return=S,S=v;break e}else{n(S,v);break}else e(S,v);v=v.sibling}v=ku(k,S.mode,N),v.return=S,S=v}return a(S);case Dn:return j=k._init,D(S,v,j(k._payload),N)}if(ii(k))return C(S,v,k,N);if(Ks(k))return x(S,v,k,N);Qo(S,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,v!==null&&v.tag===6?(n(S,v.sibling),v=s(v,k),v.return=S,S=v):(n(S,v),v=Cu(k,S.mode,N),v.return=S,S=v),a(S)):n(S,v)}return D}var ps=uy(!0),cy=uy(!1),Da=ir(null),Ma=null,es=null,kh=null;function Ph(){kh=es=Ma=null}function xh(t){var e=Da.current;Ee(Da),t._currentValue=e}function _c(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function as(t,e){Ma=t,kh=es=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gt=!0),t.firstContext=null)}function Ft(t){var e=t._currentValue;if(kh!==t)if(t={context:t,memoizedValue:e,next:null},es===null){if(Ma===null)throw Error(b(308));es=t,Ma.dependencies={lanes:0,firstContext:t}}else es=es.next=t;return e}var yr=null;function Vh(t){yr===null?yr=[t]:yr.push(t)}function hy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Vh(e)):(n.next=s.next,s.next=n),e.interleaved=n,vn(t,r)}function vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Mn=!1;function Nh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,vn(t,n)}return s=r.interleaved,s===null?(e.next=e,Vh(r)):(e.next=s.next,s.next=e),r.interleaved=e,vn(t,n)}function la(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}function Tp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function La(t,e,n,r){var s=t.updateQueue;Mn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?i=h:a.next=h,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,f=h=u=null,l=i;do{var g=l.lane,E=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:E,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,x=l;switch(g=e,E=n,x.tag){case 1:if(C=x.payload,typeof C=="function"){m=C.call(E,m,g);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=x.payload,g=typeof C=="function"?C.call(E,m,g):C,g==null)break e;m=Se({},m,g);break e;case 2:Mn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else E={eventTime:E,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=E,u=m):f=f.next=E,a|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Rr|=a,t.lanes=a,t.memoizedState=m}}function Ip(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(b(191,s));s.call(r)}}}var ro={},Zt=ir(ro),ji=ir(ro),bi=ir(ro);function _r(t){if(t===ro)throw Error(b(174));return t}function Dh(t,e){switch(me(bi,e),me(ji,t),me(Zt,ro),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ju(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ju(e,t)}Ee(Zt),me(Zt,e)}function ms(){Ee(Zt),Ee(ji),Ee(bi)}function fy(t){_r(bi.current);var e=_r(Zt.current),n=Ju(e,t.type);e!==n&&(me(ji,t),me(Zt,n))}function Mh(t){ji.current===t&&(Ee(Zt),Ee(ji))}var Te=ir(0);function Oa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wu=[];function Lh(){for(var t=0;t<wu.length;t++)wu[t]._workInProgressVersionPrimary=null;wu.length=0}var ua=Cn.ReactCurrentDispatcher,Tu=Cn.ReactCurrentBatchConfig,Ar=0,Ie=null,Oe=null,Ue=null,Fa=!1,vi=!1,Ui=0,vw=0;function Ze(){throw Error(b(321))}function Oh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qt(t[n],e[n]))return!1;return!0}function Fh(t,e,n,r,s,i){if(Ar=i,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ua.current=t===null||t.memoizedState===null?Iw:Sw,t=n(r,s),vi){i=0;do{if(vi=!1,Ui=0,25<=i)throw Error(b(301));i+=1,Ue=Oe=null,e.updateQueue=null,ua.current=Aw,t=n(r,s)}while(vi)}if(ua.current=ja,e=Oe!==null&&Oe.next!==null,Ar=0,Ue=Oe=Ie=null,Fa=!1,e)throw Error(b(300));return t}function jh(){var t=Ui!==0;return Ui=0,t}function Yt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Ie.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function jt(){if(Oe===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Oe.next;var e=Ue===null?Ie.memoizedState:Ue.next;if(e!==null)Ue=e,Oe=t;else{if(t===null)throw Error(b(310));Oe=t,t={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Ue===null?Ie.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function zi(t,e){return typeof e=="function"?e(t):e}function Iu(t){var e=jt(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=Oe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,h=i;do{var f=h.lane;if((Ar&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,a=r):u=u.next=m,Ie.lanes|=f,Rr|=f}h=h.next}while(h!==null&&h!==i);u===null?a=r:u.next=l,Qt(r,e.memoizedState)||(gt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ie.lanes|=i,Rr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Su(t){var e=jt(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Qt(i,e.memoizedState)||(gt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function py(){}function my(t,e){var n=Ie,r=jt(),s=e(),i=!Qt(r.memoizedState,s);if(i&&(r.memoizedState=s,gt=!0),r=r.queue,bh(_y.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,Bi(9,yy.bind(null,n,r,s,e),void 0,null),ze===null)throw Error(b(349));Ar&30||gy(n,e,s)}return s}function gy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yy(t,e,n,r){e.value=n,e.getSnapshot=r,vy(e)&&Ey(t)}function _y(t,e,n){return n(function(){vy(e)&&Ey(t)})}function vy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qt(t,n)}catch{return!0}}function Ey(t){var e=vn(t,1);e!==null&&Wt(e,t,1,-1)}function Sp(t){var e=Yt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:t},e.queue=t,t=t.dispatch=Tw.bind(null,Ie,t),[e.memoizedState,t]}function Bi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wy(){return jt().memoizedState}function ca(t,e,n,r){var s=Yt();Ie.flags|=t,s.memoizedState=Bi(1|e,n,void 0,r===void 0?null:r)}function ul(t,e,n,r){var s=jt();r=r===void 0?null:r;var i=void 0;if(Oe!==null){var a=Oe.memoizedState;if(i=a.destroy,r!==null&&Oh(r,a.deps)){s.memoizedState=Bi(e,n,i,r);return}}Ie.flags|=t,s.memoizedState=Bi(1|e,n,i,r)}function Ap(t,e){return ca(8390656,8,t,e)}function bh(t,e){return ul(2048,8,t,e)}function Ty(t,e){return ul(4,2,t,e)}function Iy(t,e){return ul(4,4,t,e)}function Sy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ay(t,e,n){return n=n!=null?n.concat([t]):null,ul(4,4,Sy.bind(null,e,t),n)}function Uh(){}function Ry(t,e){var n=jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Oh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Cy(t,e){var n=jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Oh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ky(t,e,n){return Ar&21?(Qt(n,e)||(n=Dg(),Ie.lanes|=n,Rr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gt=!0),t.memoizedState=n)}function Ew(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=Tu.transition;Tu.transition={};try{t(!1),e()}finally{he=n,Tu.transition=r}}function Py(){return jt().memoizedState}function ww(t,e,n){var r=Wn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xy(t))Vy(e,n);else if(n=hy(t,e,n,r),n!==null){var s=ut();Wt(n,t,r,s),Ny(n,e,r)}}function Tw(t,e,n){var r=Wn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xy(t))Vy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Qt(l,a)){var u=e.interleaved;u===null?(s.next=s,Vh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=hy(t,e,s,r),n!==null&&(s=ut(),Wt(n,t,r,s),Ny(n,e,r))}}function xy(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function Vy(t,e){vi=Fa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ny(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}var ja={readContext:Ft,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},Iw={readContext:Ft,useCallback:function(t,e){return Yt().memoizedState=[t,e===void 0?null:e],t},useContext:Ft,useEffect:Ap,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ca(4194308,4,Sy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ca(4194308,4,t,e)},useInsertionEffect:function(t,e){return ca(4,2,t,e)},useMemo:function(t,e){var n=Yt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ww.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=Yt();return t={current:t},e.memoizedState=t},useState:Sp,useDebugValue:Uh,useDeferredValue:function(t){return Yt().memoizedState=t},useTransition:function(){var t=Sp(!1),e=t[0];return t=Ew.bind(null,t[1]),Yt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,s=Yt();if(we){if(n===void 0)throw Error(b(407));n=n()}else{if(n=e(),ze===null)throw Error(b(349));Ar&30||gy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ap(_y.bind(null,r,i,t),[t]),r.flags|=2048,Bi(9,yy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Yt(),e=ze.identifierPrefix;if(we){var n=mn,r=pn;n=(r&~(1<<32-Ht(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ui++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Sw={readContext:Ft,useCallback:Ry,useContext:Ft,useEffect:bh,useImperativeHandle:Ay,useInsertionEffect:Ty,useLayoutEffect:Iy,useMemo:Cy,useReducer:Iu,useRef:wy,useState:function(){return Iu(zi)},useDebugValue:Uh,useDeferredValue:function(t){var e=jt();return ky(e,Oe.memoizedState,t)},useTransition:function(){var t=Iu(zi)[0],e=jt().memoizedState;return[t,e]},useMutableSource:py,useSyncExternalStore:my,useId:Py,unstable_isNewReconciler:!1},Aw={readContext:Ft,useCallback:Ry,useContext:Ft,useEffect:bh,useImperativeHandle:Ay,useInsertionEffect:Ty,useLayoutEffect:Iy,useMemo:Cy,useReducer:Su,useRef:wy,useState:function(){return Su(zi)},useDebugValue:Uh,useDeferredValue:function(t){var e=jt();return Oe===null?e.memoizedState=t:ky(e,Oe.memoizedState,t)},useTransition:function(){var t=Su(zi)[0],e=jt().memoizedState;return[t,e]},useMutableSource:py,useSyncExternalStore:my,useId:Py,unstable_isNewReconciler:!1};function Bt(t,e){if(t&&t.defaultProps){e=Se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cl={isMounted:function(t){return(t=t._reactInternals)?Nr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ut(),s=Wn(t),i=gn(r,s);i.payload=e,n!=null&&(i.callback=n),e=qn(t,i,s),e!==null&&(Wt(e,t,s,r),la(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ut(),s=Wn(t),i=gn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=qn(t,i,s),e!==null&&(Wt(e,t,s,r),la(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ut(),r=Wn(t),s=gn(n,r);s.tag=2,e!=null&&(s.callback=e),e=qn(t,s,r),e!==null&&(Wt(e,t,r,n),la(e,t,r))}};function Rp(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Mi(n,r)||!Mi(s,i):!0}function Dy(t,e,n){var r=!1,s=Zn,i=e.contextType;return typeof i=="object"&&i!==null?i=Ft(i):(s=_t(e)?Ir:it.current,r=e.contextTypes,i=(r=r!=null)?ds(t,s):Zn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Cp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cl.enqueueReplaceState(e,e.state,null)}function Ec(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Nh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ft(i):(i=_t(e)?Ir:it.current,s.context=ds(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(vc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&cl.enqueueReplaceState(s,s.state,null),La(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function gs(t,e){try{var n="",r=e;do n+=Z0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Au(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Rw=typeof WeakMap=="function"?WeakMap:Map;function My(t,e,n){n=gn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ua||(Ua=!0,Vc=r),wc(t,e)},n}function Ly(t,e,n){n=gn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){wc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){wc(t,e),typeof r!="function"&&(Hn===null?Hn=new Set([this]):Hn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function kp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Rw;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Uw.bind(null,t,e,n),e.then(t,t))}function Pp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gn(-1,1),e.tag=2,qn(n,e,1))),n.lanes|=1),t)}var Cw=Cn.ReactCurrentOwner,gt=!1;function lt(t,e,n,r){e.child=t===null?cy(e,null,n,r):ps(e,t.child,n,r)}function Vp(t,e,n,r,s){n=n.render;var i=e.ref;return as(e,s),r=Fh(t,e,n,r,i,s),n=jh(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,En(t,e,s)):(we&&n&&Ah(e),e.flags|=1,lt(t,e,r,s),e.child)}function Np(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Kh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Oy(t,e,i,r,s)):(t=pa(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Mi,n(a,r)&&t.ref===e.ref)return En(t,e,s)}return e.flags|=1,t=Qn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Oy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Mi(i,r)&&t.ref===e.ref)if(gt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(gt=!0);else return e.lanes=t.lanes,En(t,e,s)}return Tc(t,e,n,r,s)}function Fy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(ns,wt),wt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(ns,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,me(ns,wt),wt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,me(ns,wt),wt|=r;return lt(t,e,s,n),e.child}function jy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tc(t,e,n,r,s){var i=_t(n)?Ir:it.current;return i=ds(e,i),as(e,s),n=Fh(t,e,n,r,i,s),r=jh(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,En(t,e,s)):(we&&r&&Ah(e),e.flags|=1,lt(t,e,n,s),e.child)}function Dp(t,e,n,r,s){if(_t(n)){var i=!0;xa(e)}else i=!1;if(as(e,s),e.stateNode===null)ha(t,e),Dy(e,n,r),Ec(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ft(h):(h=_t(n)?Ir:it.current,h=ds(e,h));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Cp(e,a,r,h),Mn=!1;var g=e.memoizedState;a.state=g,La(e,r,a,s),u=e.memoizedState,l!==r||g!==u||yt.current||Mn?(typeof f=="function"&&(vc(e,n,f,r),u=e.memoizedState),(l=Mn||Rp(e,n,l,r,g,u,h))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,dy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Bt(e.type,l),a.props=h,m=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ft(u):(u=_t(n)?Ir:it.current,u=ds(e,u));var E=n.getDerivedStateFromProps;(f=typeof E=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Cp(e,a,r,u),Mn=!1,g=e.memoizedState,a.state=g,La(e,r,a,s);var C=e.memoizedState;l!==m||g!==C||yt.current||Mn?(typeof E=="function"&&(vc(e,n,E,r),C=e.memoizedState),(h=Mn||Rp(e,n,h,r,g,C,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),a.props=r,a.state=C,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Ic(t,e,n,r,i,s)}function Ic(t,e,n,r,s,i){jy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&_p(e,n,!1),En(t,e,i);r=e.stateNode,Cw.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=ps(e,t.child,null,i),e.child=ps(e,null,l,i)):lt(t,e,l,i),e.memoizedState=r.state,s&&_p(e,n,!0),e.child}function by(t){var e=t.stateNode;e.pendingContext?yp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yp(t,e.context,!1),Dh(t,e.containerInfo)}function Mp(t,e,n,r,s){return fs(),Ch(s),e.flags|=256,lt(t,e,n,r),e.child}var Sc={dehydrated:null,treeContext:null,retryLane:0};function Ac(t){return{baseLanes:t,cachePool:null,transitions:null}}function Uy(t,e,n){var r=e.pendingProps,s=Te.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),me(Te,s&1),t===null)return yc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=fl(a,r,0,null),t=wr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ac(n),e.memoizedState=Sc,t):zh(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return kw(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Qn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Qn(l,i):(i=wr(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Ac(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Sc,r}return i=t.child,t=i.sibling,r=Qn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zh(t,e){return e=fl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ko(t,e,n,r){return r!==null&&Ch(r),ps(e,t.child,null,n),t=zh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kw(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Au(Error(b(422))),Ko(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=fl({mode:"visible",children:r.children},s,0,null),i=wr(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ps(e,t.child,null,a),e.child.memoizedState=Ac(a),e.memoizedState=Sc,i);if(!(e.mode&1))return Ko(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(b(419)),r=Au(i,r,void 0),Ko(t,e,a,r)}if(l=(a&t.childLanes)!==0,gt||l){if(r=ze,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,vn(t,s),Wt(r,t,s,-1))}return Qh(),r=Au(Error(b(421))),Ko(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=zw.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,It=$n(s.nextSibling),At=e,we=!0,qt=null,t!==null&&(Vt[Nt++]=pn,Vt[Nt++]=mn,Vt[Nt++]=Sr,pn=t.id,mn=t.overflow,Sr=e),e=zh(e,r.children),e.flags|=4096,e)}function Lp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),_c(t.return,e,n)}function Ru(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function zy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(lt(t,e,r.children,n),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lp(t,n,e);else if(t.tag===19)Lp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(me(Te,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Oa(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ru(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Oa(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ru(e,!0,n,null,i);break;case"together":Ru(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ha(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function En(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(b(153));if(e.child!==null){for(t=e.child,n=Qn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Pw(t,e,n){switch(e.tag){case 3:by(e),fs();break;case 5:fy(e);break;case 1:_t(e.type)&&xa(e);break;case 4:Dh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;me(Da,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(me(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?Uy(t,e,n):(me(Te,Te.current&1),t=En(t,e,n),t!==null?t.sibling:null);me(Te,Te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),me(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,Fy(t,e,n)}return En(t,e,n)}var By,Rc,$y,qy;By=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rc=function(){};$y=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,_r(Zt.current);var i=null;switch(n){case"input":s=Ku(t,s),r=Ku(t,r),i=[];break;case"select":s=Se({},s,{value:void 0}),r=Se({},r,{value:void 0}),i=[];break;case"textarea":s=Xu(t,s),r=Xu(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ka)}Zu(n,r);var a;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ci.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ci.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&_e("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};qy=function(t,e,n,r){n!==r&&(e.flags|=4)};function ei(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function xw(t,e,n){var r=e.pendingProps;switch(Rh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(e),null;case 1:return _t(e.type)&&Pa(),et(e),null;case 3:return r=e.stateNode,ms(),Ee(yt),Ee(it),Lh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qt!==null&&(Mc(qt),qt=null))),Rc(t,e),et(e),null;case 5:Mh(e);var s=_r(bi.current);if(n=e.type,t!==null&&e.stateNode!=null)$y(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(b(166));return et(e),null}if(t=_r(Zt.current),Wo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Xt]=e,r[Fi]=i,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<ai.length;s++)_e(ai[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":qf(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":Wf(r,i),_e("invalid",r)}Zu(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ho(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ho(r.textContent,l,t),s=["children",""+l]):Ci.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&_e("scroll",r)}switch(n){case"input":Fo(r),Hf(r,i,!0);break;case"textarea":Fo(r),Qf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ka)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_g(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Xt]=e,t[Fi]=r,By(t,e,!1,!1),e.stateNode=t;e:{switch(a=ec(n,r),n){case"dialog":_e("cancel",t),_e("close",t),s=r;break;case"iframe":case"object":case"embed":_e("load",t),s=r;break;case"video":case"audio":for(s=0;s<ai.length;s++)_e(ai[s],t);s=r;break;case"source":_e("error",t),s=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=r;break;case"details":_e("toggle",t),s=r;break;case"input":qf(t,r),s=Ku(t,r),_e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Se({},r,{value:void 0}),_e("invalid",t);break;case"textarea":Wf(t,r),s=Xu(t,r),_e("invalid",t);break;default:s=r}Zu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?wg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&vg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ki(t,u):typeof u=="number"&&ki(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ci.hasOwnProperty(i)?u!=null&&i==="onScroll"&&_e("scroll",t):u!=null&&hh(t,i,u,a))}switch(n){case"input":Fo(t),Hf(t,r,!1);break;case"textarea":Fo(t),Qf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Jn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?rs(t,!!r.multiple,i,!1):r.defaultValue!=null&&rs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ka)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return et(e),null;case 6:if(t&&e.stateNode!=null)qy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(b(166));if(n=_r(bi.current),_r(Zt.current),Wo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xt]=e,(i=r.nodeValue!==n)&&(t=At,t!==null))switch(t.tag){case 3:Ho(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ho(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xt]=e,e.stateNode=r}return et(e),null;case 13:if(Ee(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&It!==null&&e.mode&1&&!(e.flags&128))ly(),fs(),e.flags|=98560,i=!1;else if(i=Wo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(b(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(b(317));i[Xt]=e}else fs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;et(e),i=!1}else qt!==null&&(Mc(qt),qt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Fe===0&&(Fe=3):Qh())),e.updateQueue!==null&&(e.flags|=4),et(e),null);case 4:return ms(),Rc(t,e),t===null&&Li(e.stateNode.containerInfo),et(e),null;case 10:return xh(e.type._context),et(e),null;case 17:return _t(e.type)&&Pa(),et(e),null;case 19:if(Ee(Te),i=e.memoizedState,i===null)return et(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)ei(i,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Oa(t),a!==null){for(e.flags|=128,ei(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(Te,Te.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ne()>ys&&(e.flags|=128,r=!0,ei(i,!1),e.lanes=4194304)}else{if(!r)if(t=Oa(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ei(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!we)return et(e),null}else 2*Ne()-i.renderingStartTime>ys&&n!==1073741824&&(e.flags|=128,r=!0,ei(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ne(),e.sibling=null,n=Te.current,me(Te,r?n&1|2:n&1),e):(et(e),null);case 22:case 23:return Wh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wt&1073741824&&(et(e),e.subtreeFlags&6&&(e.flags|=8192)):et(e),null;case 24:return null;case 25:return null}throw Error(b(156,e.tag))}function Vw(t,e){switch(Rh(e),e.tag){case 1:return _t(e.type)&&Pa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ms(),Ee(yt),Ee(it),Lh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mh(e),null;case 13:if(Ee(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(b(340));fs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Te),null;case 4:return ms(),null;case 10:return xh(e.type._context),null;case 22:case 23:return Wh(),null;case 24:return null;default:return null}}var Go=!1,rt=!1,Nw=typeof WeakSet=="function"?WeakSet:Set,$=null;function ts(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function Cc(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var Op=!1;function Dw(t,e){if(cc=Aa,t=Gg(),Sh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,f=0,m=t,g=null;t:for(;;){for(var E;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==i||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(E=m.firstChild)!==null;)g=m,m=E;for(;;){if(m===t)break t;if(g===n&&++h===s&&(l=a),g===i&&++f===r&&(u=a),(E=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=E}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(hc={focusedElem:t,selectionRange:n},Aa=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var x=C.memoizedProps,D=C.memoizedState,S=e.stateNode,v=S.getSnapshotBeforeUpdate(e.elementType===e.type?x:Bt(e.type,x),D);S.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(N){Pe(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return C=Op,Op=!1,C}function Ei(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Cc(e,n,i)}s=s.next}while(s!==r)}}function hl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function kc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Hy(t){var e=t.alternate;e!==null&&(t.alternate=null,Hy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xt],delete e[Fi],delete e[pc],delete e[mw],delete e[gw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Wy(t){return t.tag===5||t.tag===3||t.tag===4}function Fp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ka));else if(r!==4&&(t=t.child,t!==null))for(Pc(t,e,n),t=t.sibling;t!==null;)Pc(t,e,n),t=t.sibling}function xc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xc(t,e,n),t=t.sibling;t!==null;)xc(t,e,n),t=t.sibling}var $e=null,$t=!1;function Nn(t,e,n){for(n=n.child;n!==null;)Qy(t,e,n),n=n.sibling}function Qy(t,e,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(rl,n)}catch{}switch(n.tag){case 5:rt||ts(n,e);case 6:var r=$e,s=$t;$e=null,Nn(t,e,n),$e=r,$t=s,$e!==null&&($t?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&($t?(t=$e,n=n.stateNode,t.nodeType===8?vu(t.parentNode,n):t.nodeType===1&&vu(t,n),Ni(t)):vu($e,n.stateNode));break;case 4:r=$e,s=$t,$e=n.stateNode.containerInfo,$t=!0,Nn(t,e,n),$e=r,$t=s;break;case 0:case 11:case 14:case 15:if(!rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Cc(n,e,a),s=s.next}while(s!==r)}Nn(t,e,n);break;case 1:if(!rt&&(ts(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pe(n,e,l)}Nn(t,e,n);break;case 21:Nn(t,e,n);break;case 22:n.mode&1?(rt=(r=rt)||n.memoizedState!==null,Nn(t,e,n),rt=r):Nn(t,e,n);break;default:Nn(t,e,n)}}function jp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Nw),e.forEach(function(r){var s=Bw.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:$e=l.stateNode,$t=!1;break e;case 3:$e=l.stateNode.containerInfo,$t=!0;break e;case 4:$e=l.stateNode.containerInfo,$t=!0;break e}l=l.return}if($e===null)throw Error(b(160));Qy(i,a,s),$e=null,$t=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Pe(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ky(e,t),e=e.sibling}function Ky(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zt(e,t),Gt(t),r&4){try{Ei(3,t,t.return),hl(3,t)}catch(x){Pe(t,t.return,x)}try{Ei(5,t,t.return)}catch(x){Pe(t,t.return,x)}}break;case 1:zt(e,t),Gt(t),r&512&&n!==null&&ts(n,n.return);break;case 5:if(zt(e,t),Gt(t),r&512&&n!==null&&ts(n,n.return),t.flags&32){var s=t.stateNode;try{ki(s,"")}catch(x){Pe(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&gg(s,i),ec(l,a);var h=ec(l,i);for(a=0;a<u.length;a+=2){var f=u[a],m=u[a+1];f==="style"?wg(s,m):f==="dangerouslySetInnerHTML"?vg(s,m):f==="children"?ki(s,m):hh(s,f,m,h)}switch(l){case"input":Gu(s,i);break;case"textarea":yg(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?rs(s,!!i.multiple,E,!1):g!==!!i.multiple&&(i.defaultValue!=null?rs(s,!!i.multiple,i.defaultValue,!0):rs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Fi]=i}catch(x){Pe(t,t.return,x)}}break;case 6:if(zt(e,t),Gt(t),r&4){if(t.stateNode===null)throw Error(b(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){Pe(t,t.return,x)}}break;case 3:if(zt(e,t),Gt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ni(e.containerInfo)}catch(x){Pe(t,t.return,x)}break;case 4:zt(e,t),Gt(t);break;case 13:zt(e,t),Gt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qh=Ne())),r&4&&jp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(rt=(h=rt)||f,zt(e,t),rt=h):zt(e,t),Gt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for($=t,f=t.child;f!==null;){for(m=$=f;$!==null;){switch(g=$,E=g.child,g.tag){case 0:case 11:case 14:case 15:Ei(4,g,g.return);break;case 1:ts(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(x){Pe(r,n,x)}}break;case 5:ts(g,g.return);break;case 22:if(g.memoizedState!==null){Up(m);continue}}E!==null?(E.return=g,$=E):Up(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Eg("display",a))}catch(x){Pe(t,t.return,x)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(x){Pe(t,t.return,x)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:zt(e,t),Gt(t),r&4&&jp(t);break;case 21:break;default:zt(e,t),Gt(t)}}function Gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Wy(n)){var r=n;break e}n=n.return}throw Error(b(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ki(s,""),r.flags&=-33);var i=Fp(t);xc(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Fp(t);Pc(t,l,a);break;default:throw Error(b(161))}}catch(u){Pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Mw(t,e,n){$=t,Gy(t)}function Gy(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Go;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||rt;l=Go;var h=rt;if(Go=a,(rt=u)&&!h)for($=s;$!==null;)a=$,u=a.child,a.tag===22&&a.memoizedState!==null?zp(s):u!==null?(u.return=a,$=u):zp(s);for(;i!==null;)$=i,Gy(i),i=i.sibling;$=s,Go=l,rt=h}bp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):bp(t)}}function bp(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rt||hl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!rt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Bt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ip(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ip(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ni(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}rt||e.flags&512&&kc(e)}catch(g){Pe(e,e.return,g)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Up(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function zp(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hl(4,e)}catch(u){Pe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Pe(e,s,u)}}var i=e.return;try{kc(e)}catch(u){Pe(e,i,u)}break;case 5:var a=e.return;try{kc(e)}catch(u){Pe(e,a,u)}}}catch(u){Pe(e,e.return,u)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var Lw=Math.ceil,ba=Cn.ReactCurrentDispatcher,Bh=Cn.ReactCurrentOwner,Ot=Cn.ReactCurrentBatchConfig,oe=0,ze=null,Me=null,We=0,wt=0,ns=ir(0),Fe=0,$i=null,Rr=0,dl=0,$h=0,wi=null,pt=null,qh=0,ys=1/0,dn=null,Ua=!1,Vc=null,Hn=null,Yo=!1,jn=null,za=0,Ti=0,Nc=null,da=-1,fa=0;function ut(){return oe&6?Ne():da!==-1?da:da=Ne()}function Wn(t){return t.mode&1?oe&2&&We!==0?We&-We:_w.transition!==null?(fa===0&&(fa=Dg()),fa):(t=he,t!==0||(t=window.event,t=t===void 0?16:Ug(t.type)),t):1}function Wt(t,e,n,r){if(50<Ti)throw Ti=0,Nc=null,Error(b(185));eo(t,n,r),(!(oe&2)||t!==ze)&&(t===ze&&(!(oe&2)&&(dl|=n),Fe===4&&On(t,We)),vt(t,r),n===1&&oe===0&&!(e.mode&1)&&(ys=Ne()+500,ll&&or()))}function vt(t,e){var n=t.callbackNode;_E(t,e);var r=Sa(t,t===ze?We:0);if(r===0)n!==null&&Yf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Yf(n),e===1)t.tag===0?yw(Bp.bind(null,t)):iy(Bp.bind(null,t)),fw(function(){!(oe&6)&&or()}),n=null;else{switch(Mg(r)){case 1:n=gh;break;case 4:n=Vg;break;case 16:n=Ia;break;case 536870912:n=Ng;break;default:n=Ia}n=r_(n,Yy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Yy(t,e){if(da=-1,fa=0,oe&6)throw Error(b(327));var n=t.callbackNode;if(ls()&&t.callbackNode!==n)return null;var r=Sa(t,t===ze?We:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ba(t,r);else{e=r;var s=oe;oe|=2;var i=Jy();(ze!==t||We!==e)&&(dn=null,ys=Ne()+500,Er(t,e));do try{jw();break}catch(l){Xy(t,l)}while(!0);Ph(),ba.current=i,oe=s,Me!==null?e=0:(ze=null,We=0,e=Fe)}if(e!==0){if(e===2&&(s=ic(t),s!==0&&(r=s,e=Dc(t,s))),e===1)throw n=$i,Er(t,0),On(t,r),vt(t,Ne()),n;if(e===6)On(t,r);else{if(s=t.current.alternate,!(r&30)&&!Ow(s)&&(e=Ba(t,r),e===2&&(i=ic(t),i!==0&&(r=i,e=Dc(t,i))),e===1))throw n=$i,Er(t,0),On(t,r),vt(t,Ne()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(b(345));case 2:pr(t,pt,dn);break;case 3:if(On(t,r),(r&130023424)===r&&(e=qh+500-Ne(),10<e)){if(Sa(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ut(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=fc(pr.bind(null,t,pt,dn),e);break}pr(t,pt,dn);break;case 4:if(On(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Ht(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Ne()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Lw(r/1960))-r,10<r){t.timeoutHandle=fc(pr.bind(null,t,pt,dn),r);break}pr(t,pt,dn);break;case 5:pr(t,pt,dn);break;default:throw Error(b(329))}}}return vt(t,Ne()),t.callbackNode===n?Yy.bind(null,t):null}function Dc(t,e){var n=wi;return t.current.memoizedState.isDehydrated&&(Er(t,e).flags|=256),t=Ba(t,e),t!==2&&(e=pt,pt=n,e!==null&&Mc(e)),t}function Mc(t){pt===null?pt=t:pt.push.apply(pt,t)}function Ow(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Qt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function On(t,e){for(e&=~$h,e&=~dl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ht(e),r=1<<n;t[n]=-1,e&=~r}}function Bp(t){if(oe&6)throw Error(b(327));ls();var e=Sa(t,0);if(!(e&1))return vt(t,Ne()),null;var n=Ba(t,e);if(t.tag!==0&&n===2){var r=ic(t);r!==0&&(e=r,n=Dc(t,r))}if(n===1)throw n=$i,Er(t,0),On(t,e),vt(t,Ne()),n;if(n===6)throw Error(b(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,pr(t,pt,dn),vt(t,Ne()),null}function Hh(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(ys=Ne()+500,ll&&or())}}function Cr(t){jn!==null&&jn.tag===0&&!(oe&6)&&ls();var e=oe;oe|=1;var n=Ot.transition,r=he;try{if(Ot.transition=null,he=1,t)return t()}finally{he=r,Ot.transition=n,oe=e,!(oe&6)&&or()}}function Wh(){wt=ns.current,Ee(ns)}function Er(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dw(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Rh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pa();break;case 3:ms(),Ee(yt),Ee(it),Lh();break;case 5:Mh(r);break;case 4:ms();break;case 13:Ee(Te);break;case 19:Ee(Te);break;case 10:xh(r.type._context);break;case 22:case 23:Wh()}n=n.return}if(ze=t,Me=t=Qn(t.current,null),We=wt=e,Fe=0,$i=null,$h=dl=Rr=0,pt=wi=null,yr!==null){for(e=0;e<yr.length;e++)if(n=yr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}yr=null}return t}function Xy(t,e){do{var n=Me;try{if(Ph(),ua.current=ja,Fa){for(var r=Ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Fa=!1}if(Ar=0,Ue=Oe=Ie=null,vi=!1,Ui=0,Bh.current=null,n===null||n.return===null){Fe=1,$i=e,Me=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=We,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var E=Pp(a);if(E!==null){E.flags&=-257,xp(E,a,l,i,e),E.mode&1&&kp(i,h,e),e=E,u=h;var C=e.updateQueue;if(C===null){var x=new Set;x.add(u),e.updateQueue=x}else C.add(u);break e}else{if(!(e&1)){kp(i,h,e),Qh();break e}u=Error(b(426))}}else if(we&&l.mode&1){var D=Pp(a);if(D!==null){!(D.flags&65536)&&(D.flags|=256),xp(D,a,l,i,e),Ch(gs(u,l));break e}}i=u=gs(u,l),Fe!==4&&(Fe=2),wi===null?wi=[i]:wi.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=My(i,u,e);Tp(i,S);break e;case 1:l=u;var v=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Hn===null||!Hn.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=Ly(i,l,e);Tp(i,N);break e}}i=i.return}while(i!==null)}e_(n)}catch(O){e=O,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function Jy(){var t=ba.current;return ba.current=ja,t===null?ja:t}function Qh(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),ze===null||!(Rr&268435455)&&!(dl&268435455)||On(ze,We)}function Ba(t,e){var n=oe;oe|=2;var r=Jy();(ze!==t||We!==e)&&(dn=null,Er(t,e));do try{Fw();break}catch(s){Xy(t,s)}while(!0);if(Ph(),oe=n,ba.current=r,Me!==null)throw Error(b(261));return ze=null,We=0,Fe}function Fw(){for(;Me!==null;)Zy(Me)}function jw(){for(;Me!==null&&!uE();)Zy(Me)}function Zy(t){var e=n_(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?e_(t):Me=e,Bh.current=null}function e_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Vw(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,Me=null;return}}else if(n=xw(n,e,wt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Fe===0&&(Fe=5)}function pr(t,e,n){var r=he,s=Ot.transition;try{Ot.transition=null,he=1,bw(t,e,n,r)}finally{Ot.transition=s,he=r}return null}function bw(t,e,n,r){do ls();while(jn!==null);if(oe&6)throw Error(b(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(b(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(vE(t,i),t===ze&&(Me=ze=null,We=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yo||(Yo=!0,r_(Ia,function(){return ls(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ot.transition,Ot.transition=null;var a=he;he=1;var l=oe;oe|=4,Bh.current=null,Dw(t,n),Ky(n,t),iw(hc),Aa=!!cc,hc=cc=null,t.current=n,Mw(n),cE(),oe=l,he=a,Ot.transition=i}else t.current=n;if(Yo&&(Yo=!1,jn=t,za=s),i=t.pendingLanes,i===0&&(Hn=null),fE(n.stateNode),vt(t,Ne()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ua)throw Ua=!1,t=Vc,Vc=null,t;return za&1&&t.tag!==0&&ls(),i=t.pendingLanes,i&1?t===Nc?Ti++:(Ti=0,Nc=t):Ti=0,or(),null}function ls(){if(jn!==null){var t=Mg(za),e=Ot.transition,n=he;try{if(Ot.transition=null,he=16>t?16:t,jn===null)var r=!1;else{if(t=jn,jn=null,za=0,oe&6)throw Error(b(331));var s=oe;for(oe|=4,$=t.current;$!==null;){var i=$,a=i.child;if($.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for($=h;$!==null;){var f=$;switch(f.tag){case 0:case 11:case 15:Ei(8,f,i)}var m=f.child;if(m!==null)m.return=f,$=m;else for(;$!==null;){f=$;var g=f.sibling,E=f.return;if(Hy(f),f===h){$=null;break}if(g!==null){g.return=E,$=g;break}$=E}}}var C=i.alternate;if(C!==null){var x=C.child;if(x!==null){C.child=null;do{var D=x.sibling;x.sibling=null,x=D}while(x!==null)}}$=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,$=a;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ei(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,$=S;break e}$=i.return}}var v=t.current;for($=v;$!==null;){a=$;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,$=k;else e:for(a=v;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:hl(9,l)}}catch(O){Pe(l,l.return,O)}if(l===a){$=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,$=N;break e}$=l.return}}if(oe=s,or(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(rl,t)}catch{}r=!0}return r}finally{he=n,Ot.transition=e}}return!1}function $p(t,e,n){e=gs(n,e),e=My(t,e,1),t=qn(t,e,1),e=ut(),t!==null&&(eo(t,1,e),vt(t,e))}function Pe(t,e,n){if(t.tag===3)$p(t,t,n);else for(;e!==null;){if(e.tag===3){$p(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Hn===null||!Hn.has(r))){t=gs(n,t),t=Ly(e,t,1),e=qn(e,t,1),t=ut(),e!==null&&(eo(e,1,t),vt(e,t));break}}e=e.return}}function Uw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ut(),t.pingedLanes|=t.suspendedLanes&n,ze===t&&(We&n)===n&&(Fe===4||Fe===3&&(We&130023424)===We&&500>Ne()-qh?Er(t,0):$h|=n),vt(t,e)}function t_(t,e){e===0&&(t.mode&1?(e=Uo,Uo<<=1,!(Uo&130023424)&&(Uo=4194304)):e=1);var n=ut();t=vn(t,e),t!==null&&(eo(t,e,n),vt(t,n))}function zw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),t_(t,n)}function Bw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(b(314))}r!==null&&r.delete(e),t_(t,n)}var n_;n_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yt.current)gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gt=!1,Pw(t,e,n);gt=!!(t.flags&131072)}else gt=!1,we&&e.flags&1048576&&oy(e,Na,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ha(t,e),t=e.pendingProps;var s=ds(e,it.current);as(e,n),s=Fh(null,e,r,t,s,n);var i=jh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_t(r)?(i=!0,xa(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Nh(e),s.updater=cl,e.stateNode=s,s._reactInternals=e,Ec(e,r,t,n),e=Ic(null,e,r,!0,i,n)):(e.tag=0,we&&i&&Ah(e),lt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ha(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=qw(r),t=Bt(r,t),s){case 0:e=Tc(null,e,r,t,n);break e;case 1:e=Dp(null,e,r,t,n);break e;case 11:e=Vp(null,e,r,t,n);break e;case 14:e=Np(null,e,r,Bt(r.type,t),n);break e}throw Error(b(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bt(r,s),Tc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bt(r,s),Dp(t,e,r,s,n);case 3:e:{if(by(e),t===null)throw Error(b(387));r=e.pendingProps,i=e.memoizedState,s=i.element,dy(t,e),La(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=gs(Error(b(423)),e),e=Mp(t,e,r,n,s);break e}else if(r!==s){s=gs(Error(b(424)),e),e=Mp(t,e,r,n,s);break e}else for(It=$n(e.stateNode.containerInfo.firstChild),At=e,we=!0,qt=null,n=cy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fs(),r===s){e=En(t,e,n);break e}lt(t,e,r,n)}e=e.child}return e;case 5:return fy(e),t===null&&yc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,dc(r,s)?a=null:i!==null&&dc(r,i)&&(e.flags|=32),jy(t,e),lt(t,e,a,n),e.child;case 6:return t===null&&yc(e),null;case 13:return Uy(t,e,n);case 4:return Dh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ps(e,null,r,n):lt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bt(r,s),Vp(t,e,r,s,n);case 7:return lt(t,e,e.pendingProps,n),e.child;case 8:return lt(t,e,e.pendingProps.children,n),e.child;case 12:return lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,me(Da,r._currentValue),r._currentValue=a,i!==null)if(Qt(i.value,a)){if(i.children===s.children&&!yt.current){e=En(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=gn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),_c(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(b(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),_c(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}lt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,as(e,n),s=Ft(s),r=r(s),e.flags|=1,lt(t,e,r,n),e.child;case 14:return r=e.type,s=Bt(r,e.pendingProps),s=Bt(r.type,s),Np(t,e,r,s,n);case 15:return Oy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bt(r,s),ha(t,e),e.tag=1,_t(r)?(t=!0,xa(e)):t=!1,as(e,n),Dy(e,r,s),Ec(e,r,s,n),Ic(null,e,r,!0,t,n);case 19:return zy(t,e,n);case 22:return Fy(t,e,n)}throw Error(b(156,e.tag))};function r_(t,e){return xg(t,e)}function $w(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(t,e,n,r){return new $w(t,e,n,r)}function Kh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qw(t){if(typeof t=="function")return Kh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fh)return 11;if(t===ph)return 14}return 2}function Qn(t,e){var n=t.alternate;return n===null?(n=Mt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pa(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Kh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Wr:return wr(n.children,s,i,e);case dh:a=8,s|=8;break;case qu:return t=Mt(12,n,e,s|2),t.elementType=qu,t.lanes=i,t;case Hu:return t=Mt(13,n,e,s),t.elementType=Hu,t.lanes=i,t;case Wu:return t=Mt(19,n,e,s),t.elementType=Wu,t.lanes=i,t;case fg:return fl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hg:a=10;break e;case dg:a=9;break e;case fh:a=11;break e;case ph:a=14;break e;case Dn:a=16,r=null;break e}throw Error(b(130,t==null?t:typeof t,""))}return e=Mt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function wr(t,e,n,r){return t=Mt(7,t,r,e),t.lanes=n,t}function fl(t,e,n,r){return t=Mt(22,t,r,e),t.elementType=fg,t.lanes=n,t.stateNode={isHidden:!1},t}function Cu(t,e,n){return t=Mt(6,t,null,e),t.lanes=n,t}function ku(t,e,n){return e=Mt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hw(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lu(0),this.expirationTimes=lu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gh(t,e,n,r,s,i,a,l,u){return t=new Hw(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Mt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nh(i),t}function Ww(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function s_(t){if(!t)return Zn;t=t._reactInternals;e:{if(Nr(t)!==t||t.tag!==1)throw Error(b(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(b(171))}if(t.tag===1){var n=t.type;if(_t(n))return sy(t,n,e)}return e}function i_(t,e,n,r,s,i,a,l,u){return t=Gh(n,r,!0,t,s,i,a,l,u),t.context=s_(null),n=t.current,r=ut(),s=Wn(n),i=gn(r,s),i.callback=e??null,qn(n,i,s),t.current.lanes=s,eo(t,s,r),vt(t,r),t}function pl(t,e,n,r){var s=e.current,i=ut(),a=Wn(s);return n=s_(n),e.context===null?e.context=n:e.pendingContext=n,e=gn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=qn(s,e,a),t!==null&&(Wt(t,s,a,i),la(t,s,a)),a}function $a(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yh(t,e){qp(t,e),(t=t.alternate)&&qp(t,e)}function Qw(){return null}var o_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xh(t){this._internalRoot=t}ml.prototype.render=Xh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(b(409));pl(t,e,null,null)};ml.prototype.unmount=Xh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Cr(function(){pl(null,t,null,null)}),e[_n]=null}};function ml(t){this._internalRoot=t}ml.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ln.length&&e!==0&&e<Ln[n].priority;n++);Ln.splice(n,0,t),n===0&&bg(t)}};function Jh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hp(){}function Kw(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=$a(a);i.call(h)}}var a=i_(e,r,t,0,null,!1,!1,"",Hp);return t._reactRootContainer=a,t[_n]=a.current,Li(t.nodeType===8?t.parentNode:t),Cr(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=$a(u);l.call(h)}}var u=Gh(t,0,!1,null,null,!1,!1,"",Hp);return t._reactRootContainer=u,t[_n]=u.current,Li(t.nodeType===8?t.parentNode:t),Cr(function(){pl(e,u,n,r)}),u}function yl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=$a(a);l.call(u)}}pl(e,a,t,s)}else a=Kw(n,e,t,s,r);return $a(a)}Lg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oi(e.pendingLanes);n!==0&&(yh(e,n|1),vt(e,Ne()),!(oe&6)&&(ys=Ne()+500,or()))}break;case 13:Cr(function(){var r=vn(t,1);if(r!==null){var s=ut();Wt(r,t,1,s)}}),Yh(t,1)}};_h=function(t){if(t.tag===13){var e=vn(t,134217728);if(e!==null){var n=ut();Wt(e,t,134217728,n)}Yh(t,134217728)}};Og=function(t){if(t.tag===13){var e=Wn(t),n=vn(t,e);if(n!==null){var r=ut();Wt(n,t,e,r)}Yh(t,e)}};Fg=function(){return he};jg=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};nc=function(t,e,n){switch(e){case"input":if(Gu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=al(r);if(!s)throw Error(b(90));mg(r),Gu(r,s)}}}break;case"textarea":yg(t,n);break;case"select":e=n.value,e!=null&&rs(t,!!n.multiple,e,!1)}};Sg=Hh;Ag=Cr;var Gw={usingClientEntryPoint:!1,Events:[no,Yr,al,Tg,Ig,Hh]},ti={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yw={bundleType:ti.bundleType,version:ti.version,rendererPackageName:ti.rendererPackageName,rendererConfig:ti.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kg(t),t===null?null:t.stateNode},findFiberByHostInstance:ti.findFiberByHostInstance||Qw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xo.isDisabled&&Xo.supportsFiber)try{rl=Xo.inject(Yw),Jt=Xo}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gw;kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jh(e))throw Error(b(200));return Ww(t,e,null,n)};kt.createRoot=function(t,e){if(!Jh(t))throw Error(b(299));var n=!1,r="",s=o_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Gh(t,1,!1,null,null,n,!1,r,s),t[_n]=e.current,Li(t.nodeType===8?t.parentNode:t),new Xh(e)};kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(b(188)):(t=Object.keys(t).join(","),Error(b(268,t)));return t=kg(e),t=t===null?null:t.stateNode,t};kt.flushSync=function(t){return Cr(t)};kt.hydrate=function(t,e,n){if(!gl(e))throw Error(b(200));return yl(null,t,e,!0,n)};kt.hydrateRoot=function(t,e,n){if(!Jh(t))throw Error(b(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=o_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=i_(e,null,t,1,n??null,s,!1,i,a),t[_n]=e.current,Li(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ml(e)};kt.render=function(t,e,n){if(!gl(e))throw Error(b(200));return yl(null,t,e,!1,n)};kt.unmountComponentAtNode=function(t){if(!gl(t))throw Error(b(40));return t._reactRootContainer?(Cr(function(){yl(null,null,t,!1,function(){t._reactRootContainer=null,t[_n]=null})}),!0):!1};kt.unstable_batchedUpdates=Hh;kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gl(n))throw Error(b(200));if(t==null||t._reactInternals===void 0)throw Error(b(38));return yl(t,e,n,!1,r)};kt.version="18.3.1-next-f1338f8080-20240426";function a_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a_)}catch(t){console.error(t)}}a_(),ag.exports=kt;var Xw=ag.exports,Wp=Xw;Bu.createRoot=Wp.createRoot,Bu.hydrateRoot=Wp.hydrateRoot;const Jw="modulepreload",Zw=function(t){return"/"+t},Qp={},so=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=Zw(u),u in Qp)return;Qp[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":Jw,h||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),h)return new Promise((g,E)=>{m.addEventListener("load",g),m.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var ke=(t=>(t.Baking="baking-menu",t.BakingRecipeSelection="baking-recipe-selection",t.BakingProcess="baking-process",t.HeatingTimer="heating-timer",t.Operations="operations",t.Inventory="inventory",t.Settings="settings",t.Beverages="beverages",t))(ke||{});const e1={"alert-triangle":A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),A.jsx("path",{d:"M12 9v4"}),A.jsx("path",{d:"M12 17h.01"})]}),archive:A.jsxs(A.Fragment,{children:[A.jsx("rect",{width:"20",height:"5",x:"2",y:"3",rx:"1"}),A.jsx("path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"}),A.jsx("path",{d:"M10 12h4"})]}),"bar-chart-2":A.jsxs(A.Fragment,{children:[A.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),A.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),A.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),bell:A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),A.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),boxes:A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),A.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),A.jsx("path",{d:"M12 22V12"})]}),calendar:A.jsxs(A.Fragment,{children:[A.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),A.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),A.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),A.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),"cake-slice":A.jsx("path",{d:"M11.84 10.51 16.2 6.15a2.42 2.42 0 0 1 3.42 0 2.42 2.42 0 0 1 0 3.42l-4.36 4.36"}),check:A.jsx("path",{d:"M20 6 9 17l-5-5"}),"check-circle":A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),A.jsx("path",{d:"m9 11 3 3L22 4"})]}),"chevron-left":A.jsx("path",{d:"m15 18-6-6 6-6"}),"chevron-right":A.jsx("path",{d:"m9 18 6-6-6-6"}),"clipboard-kanban":A.jsxs(A.Fragment,{children:[A.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),A.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),A.jsx("path",{d:"M12 14h.01"}),A.jsx("path",{d:"M16 14h.01"}),A.jsx("path",{d:"M8 14h.01"})]}),"clipboard-list":A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),A.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1"}),A.jsx("path",{d:"M12 11h4"}),A.jsx("path",{d:"M12 16h4"}),A.jsx("path",{d:"M8 11h.01"}),A.jsx("path",{d:"M8 16h.01"})]}),list:A.jsxs(A.Fragment,{children:[A.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),A.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),A.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),A.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),A.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),A.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]}),"map-pin":A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),A.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),menu:A.jsx(A.Fragment,{children:A.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})}),"message-square":A.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),minus:A.jsx("path",{d:"M5 12h14"}),pencil:A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),A.jsx("path",{d:"m15 5 4 4"})]}),"play-circle":A.jsxs(A.Fragment,{children:[A.jsx("circle",{cx:"12",cy:"12",r:"10"}),A.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]}),plus:A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"M5 12h14"}),A.jsx("path",{d:"M12 5v14"})]}),"plus-circle":A.jsxs(A.Fragment,{children:[A.jsx("circle",{cx:"12",cy:"12",r:"10"}),A.jsx("path",{d:"M8 12h8"}),A.jsx("path",{d:"M12 8v8"})]}),"refresh-cw":A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),A.jsx("path",{d:"M21 3v5h-5"}),A.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),A.jsx("path",{d:"M3 21v-5h5"})]}),"rotate-ccw":A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),A.jsx("path",{d:"M3 3v5h5"})]}),settings:A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0 2l.15.08a2 2 0 0 0 .73-2.73l.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),A.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"shopping-cart":A.jsxs(A.Fragment,{children:[A.jsx("circle",{cx:"8",cy:"21",r:"1"}),A.jsx("circle",{cx:"19",cy:"21",r:"1"}),A.jsx("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.15"})]}),star:A.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}),store:A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"}),A.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),A.jsx("path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"}),A.jsx("path",{d:"M2 7h20"}),A.jsx("path",{d:"M22 7v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7"})]}),thermometer:A.jsx(A.Fragment,{children:A.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"})}),"thermometer-snowflake":A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"}),A.jsx("path",{d:"M22 12h-3"}),A.jsx("path",{d:"M2 20v-3"}),A.jsx("path",{d:"M20 4v3"}),A.jsx("path",{d:"m22 7-3 3"}),A.jsx("path",{d:"M2 13l3 3"}),A.jsx("path",{d:"M5 4l-3 3"})]}),"thermometer-sun":A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"}),A.jsx("path",{d:"M4 11H2"}),A.jsx("path",{d:"M10 11H8"}),A.jsx("path",{d:"M22 11h-2"}),A.jsx("path",{d:"M16 11h-2"}),A.jsx("path",{d:"M19 8a3 3 0 0 0-6 0"}),A.jsx("path",{d:"M19.3 4.7a3 3 0 0 0-4.25-4.25"})]}),"trash-2":A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"M3 6h18"}),A.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),A.jsx("path",{d:"M10 11v6"}),A.jsx("path",{d:"M14 11v6"})]}),"volume-2":A.jsxs(A.Fragment,{children:[A.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),A.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"}),A.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]}),"volume-x":A.jsxs(A.Fragment,{children:[A.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),A.jsx("line",{x1:"22",x2:"16",y1:"9",y2:"15"}),A.jsx("line",{x1:"16",x2:"22",y1:"9",y2:"15"})]}),whatsapp:A.jsx("path",{fillRule:"evenodd",d:"M18.4,6.4C16.5,4.4,14,3.4,11.5,3.4C6.5,3.4,2.5,7.4,2.5,12.4c0,1.7,0.5,3.4,1.3,4.9L2.5,21.5l4.3-1.3c1.5,0.8,3.1,1.2,4.8,1.2h0c5,0,9-4,9-9C20.6,9.9,19.6,7.5,18.4,6.4z M11.5,19.9c-1.5,0-3-0.4-4.3-1.2l-0.3-0.2l-3.2,1l1-3.1l-0.2-0.3c-0.8-1.3-1.3-2.8-1.3-4.4c0-4.1,3.3-7.4,7.4-7.4c2,0,3.9,0.8,5.3,2.2c1.4,1.4,2.2,3.3,2.2,5.3C18.9,16.5,15.6,19.9,11.5,19.9z M15.5,13.6c-0.2-0.1-1.3-0.6-1.5-0.7c-0.2-0.1-0.3-0.1-0.5,0.1c-0.2,0.2-0.6,0.7-0.7,0.8c-0.1,0.2-0.2,0.2-0.4,0.1c-0.2-0.1-0.8-0.3-1.6-1c-0.6-0.5-1-1.2-1.2-1.4c-0.1-0.2,0-0.3,0.1-0.4c0.1-0.1,0.2-0.2,0.3-0.3c0.1-0.1,0.1-0.2,0.2-0.4c0.1-0.2,0-0.3,0-0.4c-0.1-0.1-0.5-1.1-0.6-1.5c-0.2-0.4-0.3-0.4-0.5-0.4h-0.4c-0.2,0-0.4,0.1-0.6,0.3c-0.2,0.2-0.7,0.7-0.7,1.6c0,1,0.7,1.9,0.8,2c0.1,0.1,1.3,2,3.2,2.8c0.4,0.2,0.8,0.3,1.1,0.4c0.5,0.2,1,0.1,1.3,0.1c0.4-0.1,1.3-0.5,1.5-1c0.2-0.4,0.2-0.8,0.1-0.9C15.9,13.8,15.7,13.7,15.5,13.6z"}),x:A.jsxs(A.Fragment,{children:[A.jsx("path",{d:"M18 6 6 18"}),A.jsx("path",{d:"m6 6 12 12"})]})},xt=({name:t,className:e="",size:n=24,title:r})=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[r&&A.jsx("title",{children:r}),e1[t]]}),Kp=({activeScreen:t,setActiveScreen:e,processes:n,urgentTasks:r,shoppingListItems:s,inProgressTasks:i,isOpen:a,onClose:l,users:u,onNavigateToTask:h,setOperationsDate:f,setHighlightedTaskId:m})=>{const g=N=>{N===ke.Operations&&(f(new Date),m(null)),e(N),l()},E=N=>{h(N),l()},C=(N,O,j)=>{if(N.stopPropagation(),!j.phone)return;const T=`Hola ${j.name}, tienes una tarea crtica: "${O.text}" programada para las ${O.time}.`,y=`https://wa.me/${j.phone.replace(/\D/g,"")}?text=${encodeURIComponent(T)}`;window.open(y,"_blank")},x=({active:N,onClick:O,children:j})=>{const T="w-full flex items-center gap-4 p-4 rounded-lg font-bold text-left cursor-pointer transition-all duration-200",y=N?`${T} bg-blue-600 text-white`:`${T} text-gray-500 hover:bg-gray-100 hover:text-gray-900`;return A.jsx("button",{onClick:O,className:y,children:j})},D=({title:N,children:O,onClick:j,isAlarm:T})=>A.jsxs("div",{className:"mb-4",children:[A.jsx("h3",{className:`text-xs uppercase font-bold mb-2 px-2 ${T?"text-red-600 animate-pulse":"text-blue-600"}`,children:N}),A.jsx("button",{onClick:j,className:`w-full text-left p-3 rounded-lg transition-colors border ${T?"bg-red-50 border-red-400 hover:bg-red-100":"bg-gray-100 border-gray-200 hover:bg-gray-200"}`,children:O})]}),S=n.filter(N=>N.state!=="finished"),v=t===ke.Baking,k=`
        sidebar-nav flex flex-col bg-white p-4 border-r border-gray-200 overflow-y-auto 
        fixed inset-y-0 left-0 z-50 w-60 transform transition-transform duration-300 ease-in-out 
        md:relative md:w-60 md:translate-x-0
        ${a?"translate-x-0":"-translate-x-full"}
    `;return A.jsxs("nav",{className:k,children:[A.jsxs("header",{className:"sidebar-header text-center mb-6 pt-4 flex-shrink-0",children:[A.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Cafestesia"}),A.jsx("span",{className:"text-sm text-gray-500",children:"Gestor v2.1 (React)"})]}),A.jsxs("div",{className:"flex-grow",children:[S.length>0&&A.jsxs("div",{className:"mb-4",children:[A.jsxs("h3",{className:"text-xs uppercase font-bold mb-2 px-2 text-blue-600",children:["EN PRODUCCIN (",S.length,")"]}),A.jsx("div",{className:"flex flex-col gap-2",children:S.map(N=>{const O=N.state==="alarm";return A.jsxs("button",{onClick:()=>g(ke.Baking),className:`w-full text-left p-2 rounded-lg transition-all border shadow-sm flex items-center gap-3 font-bold text-xs ${O?"bg-red-50 border-red-400 hover:bg-red-100 text-red-900 animate-pulse":"bg-white border-gray-200 hover:bg-blue-50 hover:border-blue-300 text-gray-700"}`,children:[A.jsx(xt,{name:O?"bell":"cake-slice",className:O?"text-red-500":"text-blue-500",size:16}),A.jsx("span",{className:"truncate",children:N.name})]},N.id)})})]}),i.length>0&&A.jsxs("div",{className:"mb-4",children:[A.jsx("h3",{className:"text-xs uppercase font-bold mb-2 px-2 text-blue-600",children:"Tareas en Progreso"}),A.jsx("div",{className:"space-y-1",children:i.slice(0,3).map(N=>A.jsx("button",{onClick:()=>E(N),className:"w-full text-left p-2 rounded-lg transition-colors border-2 bg-yellow-50 animate-pulse-yellow hover:bg-yellow-100",title:`Ver tarea: ${N.text}`,children:A.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-800",children:[A.jsx(xt,{name:"play-circle",className:"text-yellow-600 flex-shrink-0 animate-pulse",size:18}),A.jsxs("div",{className:"flex-grow min-w-0",children:[A.jsx("p",{className:"font-bold truncate",children:N.text}),A.jsxs("p",{className:"text-xs font-normal text-gray-600",children:[N.employee," - ",N.date]})]})]})},N.id))})]}),r.length>0&&A.jsx(D,{title:"Operaciones Urgentes",onClick:()=>g(ke.Operations),children:r.map(({task:N,diff:O})=>{const j=u.find(T=>T.name===N.employee);return A.jsx("div",{className:"text-sm mb-2 last:mb-0",children:A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("div",{className:"flex-grow",children:[A.jsx("p",{className:"font-bold text-gray-800",children:N.text}),A.jsxs("p",{className:`text-xs font-semibold ${O<=0?"text-red-600 animate-pulse":"text-blue-600"}`,children:[N.time," ",O<=0?"(AHORA!)":`(en ${O} min)`]})]}),(j==null?void 0:j.phone)&&A.jsx("button",{onClick:T=>C(T,N,j),className:"p-2 -mr-2 -mt-1 text-green-600 hover:bg-green-100 rounded-full transition-colors flex-shrink-0",title:`Notificar a ${j.name} por WhatsApp`,children:A.jsx(xt,{name:"whatsapp",size:20})})]})},N.id)})}),s.length>0&&A.jsx(D,{title:"Inventario Crtico",onClick:()=>g(ke.Inventory),children:A.jsxs("div",{className:"flex items-center gap-3 font-bold text-sm text-gray-800",children:[A.jsx(xt,{name:"shopping-cart",className:"text-red-500",size:20}),A.jsxs("span",{children:[s.length>1?`${s.length} productos`:"1 producto"," en la lista de compras"]})]})})]}),A.jsxs("div",{className:"nav-buttons flex flex-col gap-2 mt-auto flex-shrink-0",children:[A.jsxs(x,{active:v,onClick:()=>g(ke.Baking),children:[A.jsx(xt,{name:"cake-slice",size:20}),A.jsx("span",{children:"Produccin de Pan"})]}),A.jsxs(x,{active:t===ke.Beverages,onClick:()=>g(ke.Beverages),children:[A.jsx(xt,{name:"list",size:20}),A.jsx("span",{children:"Comandas / KDS"})]}),A.jsxs(x,{active:t===ke.Operations,onClick:()=>g(ke.Operations),children:[A.jsx(xt,{name:"clipboard-kanban",size:20}),A.jsx("span",{children:"Operaciones"})]}),A.jsxs(x,{active:t===ke.Inventory,onClick:()=>g(ke.Inventory),children:[A.jsx(xt,{name:"archive",size:20}),A.jsx("span",{children:"Inventario"})]}),A.jsxs(x,{active:t===ke.Settings,onClick:()=>g(ke.Settings),children:[A.jsx(xt,{name:"settings",size:20}),A.jsx("span",{children:"Configuracin"})]})]})]})},t1=new Date,dr=t1.toISOString().split("T")[0],n1=[{text:"Roles: Descongelar en refrigeracin",employee:"Ali",shift:"matutino",date:dr,time:"08:00",duration:30,isCritical:!0,zone:"Panadera",status:"todo",addedBy:"Admin"},{text:"Checar ingredientes diarios y comprarlos",employee:"Ali",shift:"pre-apertura",date:dr,time:"15:00",duration:60,isCritical:!0,zone:"Cocina",status:"todo",addedBy:"Admin"},{text:"Hornear Roles",employee:"Claudia",shift:"pre-apertura",date:dr,time:"16:00",duration:45,isCritical:!0,zone:"Panadera",status:"todo",addedBy:"Admin"},{text:"Hornear Croissants",employee:"Claudia",shift:"pre-apertura",date:dr,time:"16:30",duration:45,isCritical:!0,zone:"Panadera",status:"todo",addedBy:"Admin"},{text:"Corte de caja",employee:"Fer",shift:"cierre",date:dr,time:"21:50",duration:20,isCritical:!0,zone:"Admin",status:"todo",addedBy:"Admin"},{text:"Limpiar barra y area de barismo",employee:"Claudia",shift:"pre-apertura",date:dr,time:"17:00",duration:30,isCritical:!0,zone:"Barra",status:"todo",addedBy:"Admin"},{text:"Hacer masa para ciabatta (da siguiente)",employee:"Fer",shift:"cierre",date:dr,time:"21:40",duration:20,isCritical:!0,zone:"Panadera",status:"todo",addedBy:"Admin"}],l_=[{name:"Harina de Trigo",category:"Secos",currentStock:50,unit:"kg",minStock:10,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Levadura Fresca",category:"Refrigerados",currentStock:1,unit:"kg",minStock:.5,providerPreferido:"Proveedor B",purchaseHistory:[]},{name:"Mantequilla sin Sal",category:"Refrigerados",currentStock:5,unit:"kg",minStock:2,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Chocolate Amargo 70%",category:"Secos",currentStock:3,unit:"kg",minStock:1,providerPreferido:"Proveedor C",purchaseHistory:[]},{name:"Leche Entera",category:"Lcteos",currentStock:8,unit:"lt",minStock:4,providerPreferido:"Supermercado",purchaseHistory:[]},{name:"Caf en Grano",category:"Bebidas",currentStock:10,unit:"kg",minStock:5,providerPreferido:"Tostador Local",purchaseHistory:[]},{name:"Azcar Morena",category:"Secos",currentStock:15,unit:"kg",minStock:5,providerPreferido:"Proveedor A",purchaseHistory:[]},{name:"Canela en Polvo",category:"Secos",currentStock:.4,unit:"kg",minStock:.5,providerPreferido:"Proveedor C",purchaseHistory:[]}],iA=["kg","lt","pz","g","ml","unidad(es)"],oA=0,aA=24,lA=[{value:5,label:"5 min"},{value:10,label:"10 min"},{value:15,label:"15 min"},{value:30,label:"30 min"},{value:60,label:"1 hora"},{value:120,label:"2 horas"}],uA="1234";var Gp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},r1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},c_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,E=h&63;u||(E=64,a||(g=64)),r.push(n[f],n[m],n[g],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(u_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):r1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new s1;const g=i<<2|l>>4;if(r.push(g),h!==64){const E=l<<4&240|h>>2;if(r.push(E),m!==64){const C=h<<6&192|m;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class s1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i1=function(t){const e=u_(t);return c_.encodeByteArray(e,!0)},qa=function(t){return i1(t).replace(/\./g,"")},o1=function(t){try{return c_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=()=>a1().__FIREBASE_DEFAULTS__,u1=()=>{if(typeof process>"u"||typeof Gp>"u")return;const t=Gp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},c1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&o1(t[1]);return e&&JSON.parse(e)},Zh=()=>{try{return l1()||u1()||c1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},h1=t=>{var e,n;return(n=(e=Zh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},d1=t=>{const e=h1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},h_=()=>{var t;return(t=Zh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qa(JSON.stringify(n)),qa(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g1(){var t;const e=(t=Zh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y1(){return!g1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _1(){try{return typeof indexedDB=="object"}catch{return!1}}function v1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="FirebaseError";class Ps extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=E1,Object.setPrototypeOf(this,Ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,d_.prototype.create)}}class d_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?w1(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ps(s,l,r)}}function w1(t,e){return t.replace(T1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const T1=/\{\$([^}]+)}/g;function Ha(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Yp(i)&&Yp(a)){if(!Ha(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Yp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t){return t&&t._delegate?t._delegate:t}class qi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new f1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(A1(e))try{this.getOrInitializeService({instanceIdentifier:mr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=mr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mr){return this.instances.has(e)}getOptions(e=mr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:S1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mr){return this.component?this.component.multipleInstances?e:mr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function S1(t){return t===mr?void 0:t}function A1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new I1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const C1={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},k1=ie.INFO,P1={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},x1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=P1[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class f_{constructor(e){this.name=e,this._logLevel=k1,this._logHandler=x1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?C1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const V1=(t,e)=>e.some(n=>t instanceof n);let Xp,Jp;function N1(){return Xp||(Xp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function D1(){return Jp||(Jp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const p_=new WeakMap,Lc=new WeakMap,m_=new WeakMap,Pu=new WeakMap,ed=new WeakMap;function M1(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Kn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&p_.set(n,t)}).catch(()=>{}),ed.set(e,t),e}function L1(t){if(Lc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Lc.set(t,e)}let Oc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Lc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||m_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function O1(t){Oc=t(Oc)}function F1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xu(this),e,...n);return m_.set(r,e.sort?e.sort():[e]),Kn(r)}:D1().includes(t)?function(...e){return t.apply(xu(this),e),Kn(p_.get(this))}:function(...e){return Kn(t.apply(xu(this),e))}}function j1(t){return typeof t=="function"?F1(t):(t instanceof IDBTransaction&&L1(t),V1(t,N1())?new Proxy(t,Oc):t)}function Kn(t){if(t instanceof IDBRequest)return M1(t);if(Pu.has(t))return Pu.get(t);const e=j1(t);return e!==t&&(Pu.set(t,e),ed.set(e,t)),e}const xu=t=>ed.get(t);function b1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Kn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Kn(a.result),u.oldVersion,u.newVersion,Kn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const U1=["get","getKey","getAll","getAllKeys","count"],z1=["put","add","delete","clear"],Vu=new Map;function Zp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vu.get(e))return Vu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=z1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||U1.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Vu.set(e,i),i}O1(t=>({...t,get:(e,n,r)=>Zp(e,n)||t.get(e,n,r),has:(e,n)=>!!Zp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fc="@firebase/app",em="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn=new f_("@firebase/app"),q1="@firebase/app-compat",H1="@firebase/analytics-compat",W1="@firebase/analytics",Q1="@firebase/app-check-compat",K1="@firebase/app-check",G1="@firebase/auth",Y1="@firebase/auth-compat",X1="@firebase/database",J1="@firebase/data-connect",Z1="@firebase/database-compat",eT="@firebase/functions",tT="@firebase/functions-compat",nT="@firebase/installations",rT="@firebase/installations-compat",sT="@firebase/messaging",iT="@firebase/messaging-compat",oT="@firebase/performance",aT="@firebase/performance-compat",lT="@firebase/remote-config",uT="@firebase/remote-config-compat",cT="@firebase/storage",hT="@firebase/storage-compat",dT="@firebase/firestore",fT="@firebase/vertexai-preview",pT="@firebase/firestore-compat",mT="firebase",gT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc="[DEFAULT]",yT={[Fc]:"fire-core",[q1]:"fire-core-compat",[W1]:"fire-analytics",[H1]:"fire-analytics-compat",[K1]:"fire-app-check",[Q1]:"fire-app-check-compat",[G1]:"fire-auth",[Y1]:"fire-auth-compat",[X1]:"fire-rtdb",[J1]:"fire-data-connect",[Z1]:"fire-rtdb-compat",[eT]:"fire-fn",[tT]:"fire-fn-compat",[nT]:"fire-iid",[rT]:"fire-iid-compat",[sT]:"fire-fcm",[iT]:"fire-fcm-compat",[oT]:"fire-perf",[aT]:"fire-perf-compat",[lT]:"fire-rc",[uT]:"fire-rc-compat",[cT]:"fire-gcs",[hT]:"fire-gcs-compat",[dT]:"fire-fst",[pT]:"fire-fst-compat",[fT]:"fire-vertex","fire-js":"fire-js",[mT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=new Map,_T=new Map,bc=new Map;function tm(t,e){try{t.container.addComponent(e)}catch(n){wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qa(t){const e=t.name;if(bc.has(e))return wn.debug(`There were multiple attempts to register component ${e}.`),!1;bc.set(e,t);for(const n of Wa.values())tm(n,t);for(const n of _T.values())tm(n,t);return!0}function vT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gn=new d_("app","Firebase",ET);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=gT;function g_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Gn.create("bad-app-name",{appName:String(s)});if(n||(n=h_()),!n)throw Gn.create("no-options");const i=Wa.get(s);if(i){if(Ha(n,i.options)&&Ha(r,i.config))return i;throw Gn.create("duplicate-app",{appName:s})}const a=new R1(s);for(const u of bc.values())a.addComponent(u);const l=new wT(n,r,a);return Wa.set(s,l),l}function IT(t=jc){const e=Wa.get(t);if(!e&&t===jc&&h_())return g_();if(!e)throw Gn.create("no-app",{appName:t});return e}function us(t,e,n){var r;let s=(r=yT[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wn.warn(l.join(" "));return}Qa(new qi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="firebase-heartbeat-database",AT=1,Hi="firebase-heartbeat-store";let Nu=null;function y_(){return Nu||(Nu=b1(ST,AT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gn.create("idb-open",{originalErrorMessage:t.message})})),Nu}async function RT(t){try{const n=(await y_()).transaction(Hi),r=await n.objectStore(Hi).get(__(t));return await n.done,r}catch(e){if(e instanceof Ps)wn.warn(e.message);else{const n=Gn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wn.warn(n.message)}}}async function nm(t,e){try{const r=(await y_()).transaction(Hi,"readwrite");await r.objectStore(Hi).put(e,__(t)),await r.done}catch(n){if(n instanceof Ps)wn.warn(n.message);else{const r=Gn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wn.warn(r.message)}}}function __(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=1024,kT=30*24*60*60*1e3;class PT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new VT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=rm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=kT}),this._storage.overwrite(this._heartbeatsCache))}catch(r){wn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rm(),{heartbeatsToSend:r,unsentEntries:s}=xT(this._heartbeatsCache.heartbeats),i=qa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return wn.warn(n),""}}}function rm(){return new Date().toISOString().substring(0,10)}function xT(t,e=CT){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),sm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),sm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class VT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _1()?v1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return nm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return nm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function sm(t){return qa(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(t){Qa(new qi("platform-logger",e=>new B1(e),"PRIVATE")),Qa(new qi("heartbeat",e=>new PT(e),"PRIVATE")),us(Fc,em,t),us(Fc,em,"esm2017"),us("fire-js","")}NT("");var DT="firebase",MT="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us(DT,MT,"app");var im=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tr,v_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,y){function I(){}I.prototype=y.prototype,T.D=y.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(_,R,P){for(var w=Array(arguments.length-2),K=2;K<arguments.length;K++)w[K-2]=arguments[K];return y.prototype[R].apply(_,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,y,I){I||(I=0);var _=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)_[R]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(R=0;16>R;++R)_[R]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=T.g[0],I=T.g[1],R=T.g[2];var P=T.g[3],w=y+(P^I&(R^P))+_[0]+3614090360&4294967295;y=I+(w<<7&4294967295|w>>>25),w=P+(R^y&(I^R))+_[1]+3905402710&4294967295,P=y+(w<<12&4294967295|w>>>20),w=R+(I^P&(y^I))+_[2]+606105819&4294967295,R=P+(w<<17&4294967295|w>>>15),w=I+(y^R&(P^y))+_[3]+3250441966&4294967295,I=R+(w<<22&4294967295|w>>>10),w=y+(P^I&(R^P))+_[4]+4118548399&4294967295,y=I+(w<<7&4294967295|w>>>25),w=P+(R^y&(I^R))+_[5]+1200080426&4294967295,P=y+(w<<12&4294967295|w>>>20),w=R+(I^P&(y^I))+_[6]+2821735955&4294967295,R=P+(w<<17&4294967295|w>>>15),w=I+(y^R&(P^y))+_[7]+4249261313&4294967295,I=R+(w<<22&4294967295|w>>>10),w=y+(P^I&(R^P))+_[8]+1770035416&4294967295,y=I+(w<<7&4294967295|w>>>25),w=P+(R^y&(I^R))+_[9]+2336552879&4294967295,P=y+(w<<12&4294967295|w>>>20),w=R+(I^P&(y^I))+_[10]+4294925233&4294967295,R=P+(w<<17&4294967295|w>>>15),w=I+(y^R&(P^y))+_[11]+2304563134&4294967295,I=R+(w<<22&4294967295|w>>>10),w=y+(P^I&(R^P))+_[12]+1804603682&4294967295,y=I+(w<<7&4294967295|w>>>25),w=P+(R^y&(I^R))+_[13]+4254626195&4294967295,P=y+(w<<12&4294967295|w>>>20),w=R+(I^P&(y^I))+_[14]+2792965006&4294967295,R=P+(w<<17&4294967295|w>>>15),w=I+(y^R&(P^y))+_[15]+1236535329&4294967295,I=R+(w<<22&4294967295|w>>>10),w=y+(R^P&(I^R))+_[1]+4129170786&4294967295,y=I+(w<<5&4294967295|w>>>27),w=P+(I^R&(y^I))+_[6]+3225465664&4294967295,P=y+(w<<9&4294967295|w>>>23),w=R+(y^I&(P^y))+_[11]+643717713&4294967295,R=P+(w<<14&4294967295|w>>>18),w=I+(P^y&(R^P))+_[0]+3921069994&4294967295,I=R+(w<<20&4294967295|w>>>12),w=y+(R^P&(I^R))+_[5]+3593408605&4294967295,y=I+(w<<5&4294967295|w>>>27),w=P+(I^R&(y^I))+_[10]+38016083&4294967295,P=y+(w<<9&4294967295|w>>>23),w=R+(y^I&(P^y))+_[15]+3634488961&4294967295,R=P+(w<<14&4294967295|w>>>18),w=I+(P^y&(R^P))+_[4]+3889429448&4294967295,I=R+(w<<20&4294967295|w>>>12),w=y+(R^P&(I^R))+_[9]+568446438&4294967295,y=I+(w<<5&4294967295|w>>>27),w=P+(I^R&(y^I))+_[14]+3275163606&4294967295,P=y+(w<<9&4294967295|w>>>23),w=R+(y^I&(P^y))+_[3]+4107603335&4294967295,R=P+(w<<14&4294967295|w>>>18),w=I+(P^y&(R^P))+_[8]+1163531501&4294967295,I=R+(w<<20&4294967295|w>>>12),w=y+(R^P&(I^R))+_[13]+2850285829&4294967295,y=I+(w<<5&4294967295|w>>>27),w=P+(I^R&(y^I))+_[2]+4243563512&4294967295,P=y+(w<<9&4294967295|w>>>23),w=R+(y^I&(P^y))+_[7]+1735328473&4294967295,R=P+(w<<14&4294967295|w>>>18),w=I+(P^y&(R^P))+_[12]+2368359562&4294967295,I=R+(w<<20&4294967295|w>>>12),w=y+(I^R^P)+_[5]+4294588738&4294967295,y=I+(w<<4&4294967295|w>>>28),w=P+(y^I^R)+_[8]+2272392833&4294967295,P=y+(w<<11&4294967295|w>>>21),w=R+(P^y^I)+_[11]+1839030562&4294967295,R=P+(w<<16&4294967295|w>>>16),w=I+(R^P^y)+_[14]+4259657740&4294967295,I=R+(w<<23&4294967295|w>>>9),w=y+(I^R^P)+_[1]+2763975236&4294967295,y=I+(w<<4&4294967295|w>>>28),w=P+(y^I^R)+_[4]+1272893353&4294967295,P=y+(w<<11&4294967295|w>>>21),w=R+(P^y^I)+_[7]+4139469664&4294967295,R=P+(w<<16&4294967295|w>>>16),w=I+(R^P^y)+_[10]+3200236656&4294967295,I=R+(w<<23&4294967295|w>>>9),w=y+(I^R^P)+_[13]+681279174&4294967295,y=I+(w<<4&4294967295|w>>>28),w=P+(y^I^R)+_[0]+3936430074&4294967295,P=y+(w<<11&4294967295|w>>>21),w=R+(P^y^I)+_[3]+3572445317&4294967295,R=P+(w<<16&4294967295|w>>>16),w=I+(R^P^y)+_[6]+76029189&4294967295,I=R+(w<<23&4294967295|w>>>9),w=y+(I^R^P)+_[9]+3654602809&4294967295,y=I+(w<<4&4294967295|w>>>28),w=P+(y^I^R)+_[12]+3873151461&4294967295,P=y+(w<<11&4294967295|w>>>21),w=R+(P^y^I)+_[15]+530742520&4294967295,R=P+(w<<16&4294967295|w>>>16),w=I+(R^P^y)+_[2]+3299628645&4294967295,I=R+(w<<23&4294967295|w>>>9),w=y+(R^(I|~P))+_[0]+4096336452&4294967295,y=I+(w<<6&4294967295|w>>>26),w=P+(I^(y|~R))+_[7]+1126891415&4294967295,P=y+(w<<10&4294967295|w>>>22),w=R+(y^(P|~I))+_[14]+2878612391&4294967295,R=P+(w<<15&4294967295|w>>>17),w=I+(P^(R|~y))+_[5]+4237533241&4294967295,I=R+(w<<21&4294967295|w>>>11),w=y+(R^(I|~P))+_[12]+1700485571&4294967295,y=I+(w<<6&4294967295|w>>>26),w=P+(I^(y|~R))+_[3]+2399980690&4294967295,P=y+(w<<10&4294967295|w>>>22),w=R+(y^(P|~I))+_[10]+4293915773&4294967295,R=P+(w<<15&4294967295|w>>>17),w=I+(P^(R|~y))+_[1]+2240044497&4294967295,I=R+(w<<21&4294967295|w>>>11),w=y+(R^(I|~P))+_[8]+1873313359&4294967295,y=I+(w<<6&4294967295|w>>>26),w=P+(I^(y|~R))+_[15]+4264355552&4294967295,P=y+(w<<10&4294967295|w>>>22),w=R+(y^(P|~I))+_[6]+2734768916&4294967295,R=P+(w<<15&4294967295|w>>>17),w=I+(P^(R|~y))+_[13]+1309151649&4294967295,I=R+(w<<21&4294967295|w>>>11),w=y+(R^(I|~P))+_[4]+4149444226&4294967295,y=I+(w<<6&4294967295|w>>>26),w=P+(I^(y|~R))+_[11]+3174756917&4294967295,P=y+(w<<10&4294967295|w>>>22),w=R+(y^(P|~I))+_[2]+718787259&4294967295,R=P+(w<<15&4294967295|w>>>17),w=I+(P^(R|~y))+_[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(R+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+P&4294967295}r.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var I=y-this.blockSize,_=this.B,R=this.h,P=0;P<y;){if(R==0)for(;P<=I;)s(this,T,P),P+=this.blockSize;if(typeof T=="string"){for(;P<y;)if(_[R++]=T.charCodeAt(P++),R==this.blockSize){s(this,_),R=0;break}}else for(;P<y;)if(_[R++]=T[P++],R==this.blockSize){s(this,_),R=0;break}}this.h=R,this.o+=y},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var I=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=I&255,I/=256;for(this.u(T),T=Array(16),y=I=0;4>y;++y)for(var _=0;32>_;_+=8)T[I++]=this.g[y]>>>_&255;return T};function i(T,y){var I=l;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=y(T)}function a(T,y){this.h=y;for(var I=[],_=!0,R=T.length-1;0<=R;R--){var P=T[R]|0;_&&P==y||(I[R]=P,_=!1)}this.g=I}var l={};function u(T){return-128<=T&&128>T?i(T,function(y){return new a([y|0],0>y?-1:0)}):new a([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return m;if(0>T)return D(h(-T));for(var y=[],I=1,_=0;T>=I;_++)y[_]=T/I|0,I*=4294967296;return new a(y,0)}function f(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return D(f(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=h(Math.pow(y,8)),_=m,R=0;R<T.length;R+=8){var P=Math.min(8,T.length-R),w=parseInt(T.substring(R,R+P),y);8>P?(P=h(Math.pow(y,P)),_=_.j(P).add(h(w))):(_=_.j(I),_=_.add(h(w)))}return _}var m=u(0),g=u(1),E=u(16777216);t=a.prototype,t.m=function(){if(x(this))return-D(this).m();for(var T=0,y=1,I=0;I<this.g.length;I++){var _=this.i(I);T+=(0<=_?_:4294967296+_)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(x(this))return"-"+D(this).toString(T);for(var y=h(Math.pow(T,6)),I=this,_="";;){var R=N(I,y).g;I=S(I,R.j(y));var P=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=R,C(I))return P+_;for(;6>P.length;)P="0"+P;_=P+_}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function x(T){return T.h==-1}t.l=function(T){return T=S(this,T),x(T)?-1:C(T)?0:1};function D(T){for(var y=T.g.length,I=[],_=0;_<y;_++)I[_]=~T.g[_];return new a(I,~T.h).add(g)}t.abs=function(){return x(this)?D(this):this},t.add=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],_=0,R=0;R<=y;R++){var P=_+(this.i(R)&65535)+(T.i(R)&65535),w=(P>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);_=w>>>16,P&=65535,w&=65535,I[R]=w<<16|P}return new a(I,I[I.length-1]&-2147483648?-1:0)};function S(T,y){return T.add(D(y))}t.j=function(T){if(C(this)||C(T))return m;if(x(this))return x(T)?D(this).j(D(T)):D(D(this).j(T));if(x(T))return D(this.j(D(T)));if(0>this.l(E)&&0>T.l(E))return h(this.m()*T.m());for(var y=this.g.length+T.g.length,I=[],_=0;_<2*y;_++)I[_]=0;for(_=0;_<this.g.length;_++)for(var R=0;R<T.g.length;R++){var P=this.i(_)>>>16,w=this.i(_)&65535,K=T.i(R)>>>16,J=T.i(R)&65535;I[2*_+2*R]+=w*J,v(I,2*_+2*R),I[2*_+2*R+1]+=P*J,v(I,2*_+2*R+1),I[2*_+2*R+1]+=w*K,v(I,2*_+2*R+1),I[2*_+2*R+2]+=P*K,v(I,2*_+2*R+2)}for(_=0;_<y;_++)I[_]=I[2*_+1]<<16|I[2*_];for(_=y;_<2*y;_++)I[_]=0;return new a(I,0)};function v(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function k(T,y){this.g=T,this.h=y}function N(T,y){if(C(y))throw Error("division by zero");if(C(T))return new k(m,m);if(x(T))return y=N(D(T),y),new k(D(y.g),D(y.h));if(x(y))return y=N(T,D(y)),new k(D(y.g),y.h);if(30<T.g.length){if(x(T)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var I=g,_=y;0>=_.l(T);)I=O(I),_=O(_);var R=j(I,1),P=j(_,1);for(_=j(_,2),I=j(I,2);!C(_);){var w=P.add(_);0>=w.l(T)&&(R=R.add(I),P=w),_=j(_,1),I=j(I,1)}return y=S(T,R.j(y)),new k(R,y)}for(R=m;0<=T.l(y);){for(I=Math.max(1,Math.floor(T.m()/y.m())),_=Math.ceil(Math.log(I)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),P=h(I),w=P.j(y);x(w)||0<w.l(T);)I-=_,P=h(I),w=P.j(y);C(P)&&(P=g),R=R.add(P),T=S(T,w)}return new k(R,T)}t.A=function(T){return N(this,T).h},t.and=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],_=0;_<y;_++)I[_]=this.i(_)&T.i(_);return new a(I,this.h&T.h)},t.or=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],_=0;_<y;_++)I[_]=this.i(_)|T.i(_);return new a(I,this.h|T.h)},t.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],_=0;_<y;_++)I[_]=this.i(_)^T.i(_);return new a(I,this.h^T.h)};function O(T){for(var y=T.g.length+1,I=[],_=0;_<y;_++)I[_]=T.i(_)<<1|T.i(_-1)>>>31;return new a(I,T.h)}function j(T,y){var I=y>>5;y%=32;for(var _=T.g.length-I,R=[],P=0;P<_;P++)R[P]=0<y?T.i(P+I)>>>y|T.i(P+I+1)<<32-y:T.i(P+I);return new a(R,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,v_=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,Tr=a}).apply(typeof im<"u"?im:typeof self<"u"?self:typeof window<"u"?window:{});var Jo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var E_,li,w_,ma,Uc,T_,I_,S_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,d){return o==Array.prototype||o==Object.prototype||(o[c]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jo=="object"&&Jo];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)e:{var d=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var V=o[p];if(!(V in d))break e;d=d[V]}o=o[o.length-1],p=d[o],c=c(p),c!=p&&c!=null&&e(d,o,{configurable:!0,writable:!0,value:c})}}function i(o,c){o instanceof String&&(o+="");var d=0,p=!1,V={next:function(){if(!p&&d<o.length){var M=d++;return{value:c(M,o[M]),done:!1}}return p=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(o){return o||function(){return i(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function f(o,c,d){return o.call.apply(o.bind,arguments)}function m(o,c,d){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,p),o.apply(c,V)}}return function(){return o.apply(c,arguments)}}function g(o,c,d){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function E(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function C(o,c){function d(){}d.prototype=c.prototype,o.aa=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(p,V,M){for(var z=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)z[pe-2]=arguments[pe];return c.prototype[V].apply(p,z)}}function x(o){const c=o.length;if(0<c){const d=Array(c);for(let p=0;p<c;p++)d[p]=o[p];return d}return[]}function D(o,c){for(let d=1;d<arguments.length;d++){const p=arguments[d];if(u(p)){const V=o.length||0,M=p.length||0;o.length=V+M;for(let z=0;z<M;z++)o[V+z]=p[z]}else o.push(p)}}class S{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function k(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function N(o){return N[" "](o),o}N[" "]=function(){};var O=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function j(o,c,d){for(const p in o)c.call(d,o[p],p,o)}function T(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function y(o){const c={};for(const d in o)c[d]=o[d];return c}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(o,c){let d,p;for(let V=1;V<arguments.length;V++){p=arguments[V];for(d in p)o[d]=p[d];for(let M=0;M<I.length;M++)d=I[M],Object.prototype.hasOwnProperty.call(p,d)&&(o[d]=p[d])}}function R(o){var c=1;o=o.split(":");const d=[];for(;0<c&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function P(o){l.setTimeout(()=>{throw o},0)}function w(){var o=W;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class K{constructor(){this.h=this.g=null}add(c,d){const p=J.get();p.set(c,d),this.h?this.h.next=p:this.g=p,this.h=p}}var J=new S(()=>new fe,o=>o.reset());class fe{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,U=!1,W=new K,G=()=>{const o=l.Promise.resolve(void 0);ue=()=>{o.then(ge)}};var ge=()=>{for(var o;o=w();){try{o.h.call(o.g)}catch(d){P(d)}var c=J;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}U=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var sn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return o}();function on(o,c){if(xe.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(O){e:{try{N(c.nodeName);var V=!0;break e}catch{}V=!1}V||(c=null)}}else d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:an[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&on.aa.h.call(this)}}C(on,xe);var an={2:"touch",3:"pen",4:"mouse"};on.prototype.h=function(){on.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var ln="closure_listenable_"+(1e6*Math.random()|0),Qv=0;function Kv(o,c,d,p,V){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!p,this.ha=V,this.key=++Qv,this.da=this.fa=!1}function yo(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function _o(o){this.src=o,this.g={},this.h=0}_o.prototype.add=function(o,c,d,p,V){var M=o.toString();o=this.g[M],o||(o=this.g[M]=[],this.h++);var z=Ll(o,c,p,V);return-1<z?(c=o[z],d||(c.fa=!1)):(c=new Kv(c,this.src,M,!!p,V),c.fa=d,o.push(c)),c};function Ml(o,c){var d=c.type;if(d in o.g){var p=o.g[d],V=Array.prototype.indexOf.call(p,c,void 0),M;(M=0<=V)&&Array.prototype.splice.call(p,V,1),M&&(yo(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Ll(o,c,d,p){for(var V=0;V<o.length;++V){var M=o[V];if(!M.da&&M.listener==c&&M.capture==!!d&&M.ha==p)return V}return-1}var Ol="closure_lm_"+(1e6*Math.random()|0),Fl={};function jd(o,c,d,p,V){if(Array.isArray(c)){for(var M=0;M<c.length;M++)jd(o,c[M],d,p,V);return null}return d=zd(d),o&&o[ln]?o.K(c,d,h(p)?!!p.capture:!1,V):Gv(o,c,d,!1,p,V)}function Gv(o,c,d,p,V,M){if(!c)throw Error("Invalid event type");var z=h(V)?!!V.capture:!!V,pe=bl(o);if(pe||(o[Ol]=pe=new _o(o)),d=pe.add(c,d,p,z,M),d.proxy)return d;if(p=Yv(),d.proxy=p,p.src=o,p.listener=d,o.addEventListener)sn||(V=z),V===void 0&&(V=!1),o.addEventListener(c.toString(),p,V);else if(o.attachEvent)o.attachEvent(Ud(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Yv(){function o(d){return c.call(o.src,o.listener,d)}const c=Xv;return o}function bd(o,c,d,p,V){if(Array.isArray(c))for(var M=0;M<c.length;M++)bd(o,c[M],d,p,V);else p=h(p)?!!p.capture:!!p,d=zd(d),o&&o[ln]?(o=o.i,c=String(c).toString(),c in o.g&&(M=o.g[c],d=Ll(M,d,p,V),-1<d&&(yo(M[d]),Array.prototype.splice.call(M,d,1),M.length==0&&(delete o.g[c],o.h--)))):o&&(o=bl(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Ll(c,d,p,V)),(d=-1<o?c[o]:null)&&jl(d))}function jl(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[ln])Ml(c.i,o);else{var d=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(d,p,o.capture):c.detachEvent?c.detachEvent(Ud(d),p):c.addListener&&c.removeListener&&c.removeListener(p),(d=bl(c))?(Ml(d,o),d.h==0&&(d.src=null,c[Ol]=null)):yo(o)}}}function Ud(o){return o in Fl?Fl[o]:Fl[o]="on"+o}function Xv(o,c){if(o.da)o=!0;else{c=new on(c,this);var d=o.listener,p=o.ha||o.src;o.fa&&jl(o),o=d.call(p,c)}return o}function bl(o){return o=o[Ol],o instanceof _o?o:null}var Ul="__closure_events_fn_"+(1e9*Math.random()>>>0);function zd(o){return typeof o=="function"?o:(o[Ul]||(o[Ul]=function(c){return o.handleEvent(c)}),o[Ul])}function Ye(){ce.call(this),this.i=new _o(this),this.M=this,this.F=null}C(Ye,ce),Ye.prototype[ln]=!0,Ye.prototype.removeEventListener=function(o,c,d,p){bd(this,o,c,d,p)};function ot(o,c){var d,p=o.F;if(p)for(d=[];p;p=p.F)d.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new xe(c,o);else if(c instanceof xe)c.target=c.target||o;else{var V=c;c=new xe(p,o),_(c,V)}if(V=!0,d)for(var M=d.length-1;0<=M;M--){var z=c.g=d[M];V=vo(z,p,!0,c)&&V}if(z=c.g=o,V=vo(z,p,!0,c)&&V,V=vo(z,p,!1,c)&&V,d)for(M=0;M<d.length;M++)z=c.g=d[M],V=vo(z,p,!1,c)&&V}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var d=o.g[c],p=0;p<d.length;p++)yo(d[p]);delete o.g[c],o.h--}}this.F=null},Ye.prototype.K=function(o,c,d,p){return this.i.add(String(o),c,!1,d,p)},Ye.prototype.L=function(o,c,d,p){return this.i.add(String(o),c,!0,d,p)};function vo(o,c,d,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var V=!0,M=0;M<c.length;++M){var z=c[M];if(z&&!z.da&&z.capture==d){var pe=z.listener,Be=z.ha||z.src;z.fa&&Ml(o.i,z),V=pe.call(Be,p)!==!1&&V}}return V&&!p.defaultPrevented}function Bd(o,c,d){if(typeof o=="function")d&&(o=g(o,d));else if(o&&typeof o.handleEvent=="function")o=g(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function $d(o){o.g=Bd(()=>{o.g=null,o.i&&(o.i=!1,$d(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Jv extends ce{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:$d(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ls(o){ce.call(this),this.h=o,this.g={}}C(Ls,ce);var qd=[];function Hd(o){j(o.g,function(c,d){this.g.hasOwnProperty(d)&&jl(c)},o),o.g={}}Ls.prototype.N=function(){Ls.aa.N.call(this),Hd(this)},Ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zl=l.JSON.stringify,Zv=l.JSON.parse,e0=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Bl(){}Bl.prototype.h=null;function Wd(o){return o.h||(o.h=o.i())}function Qd(){}var Os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $l(){xe.call(this,"d")}C($l,xe);function ql(){xe.call(this,"c")}C(ql,xe);var lr={},Kd=null;function Eo(){return Kd=Kd||new Ye}lr.La="serverreachability";function Gd(o){xe.call(this,lr.La,o)}C(Gd,xe);function Fs(o){const c=Eo();ot(c,new Gd(c))}lr.STAT_EVENT="statevent";function Yd(o,c){xe.call(this,lr.STAT_EVENT,o),this.stat=c}C(Yd,xe);function at(o){const c=Eo();ot(c,new Yd(c,o))}lr.Ma="timingevent";function Xd(o,c){xe.call(this,lr.Ma,o),this.size=c}C(Xd,xe);function js(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function bs(){this.g=!0}bs.prototype.xa=function(){this.g=!1};function t0(o,c,d,p,V,M){o.info(function(){if(o.g)if(M)for(var z="",pe=M.split("&"),Be=0;Be<pe.length;Be++){var ae=pe[Be].split("=");if(1<ae.length){var Xe=ae[0];ae=ae[1];var Je=Xe.split("_");z=2<=Je.length&&Je[1]=="type"?z+(Xe+"="+ae+"&"):z+(Xe+"=redacted&")}}else z=null;else z=M;return"XMLHTTP REQ ("+p+") [attempt "+V+"]: "+c+`
`+d+`
`+z})}function n0(o,c,d,p,V,M,z){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+V+"]: "+c+`
`+d+`
`+M+" "+z})}function Or(o,c,d,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+s0(o,d)+(p?" "+p:"")})}function r0(o,c){o.info(function(){return"TIMEOUT: "+c})}bs.prototype.info=function(){};function s0(o,c){if(!o.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var p=d[o];if(!(2>p.length)){var V=p[1];if(Array.isArray(V)&&!(1>V.length)){var M=V[0];if(M!="noop"&&M!="stop"&&M!="close")for(var z=1;z<V.length;z++)V[z]=""}}}}return zl(d)}catch{return c}}var wo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hl;function To(){}C(To,Bl),To.prototype.g=function(){return new XMLHttpRequest},To.prototype.i=function(){return{}},Hl=new To;function Pn(o,c,d,p){this.j=o,this.i=c,this.l=d,this.R=p||1,this.U=new Ls(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zd}function Zd(){this.i=null,this.g="",this.h=!1}var ef={},Wl={};function Ql(o,c,d){o.L=1,o.v=Ro(un(c)),o.m=d,o.P=!0,tf(o,null)}function tf(o,c){o.F=Date.now(),Io(o),o.A=un(o.v);var d=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),gf(d.i,"t",p),o.C=0,d=o.j.J,o.h=new Zd,o.g=Mf(o.j,d?c:null,!o.m),0<o.O&&(o.M=new Jv(g(o.Y,o,o.g),o.O)),c=o.U,d=o.g,p=o.ca;var V="readystatechange";Array.isArray(V)||(V&&(qd[0]=V.toString()),V=qd);for(var M=0;M<V.length;M++){var z=jd(d,V[M],p||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Fs(),t0(o.i,o.u,o.A,o.l,o.R,o.m)}Pn.prototype.ca=function(o){o=o.target;const c=this.M;c&&cn(o)==3?c.j():this.Y(o)},Pn.prototype.Y=function(o){try{if(o==this.g)e:{const Je=cn(this.g);var c=this.g.Ba();const br=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||If(this.g)))){this.J||Je!=4||c==7||(c==8||0>=br?Fs(3):Fs(2)),Kl(this);var d=this.g.Z();this.X=d;t:if(nf(this)){var p=If(this.g);o="";var V=p.length,M=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ur(this),Us(this);var z="";break t}this.h.i=new l.TextDecoder}for(c=0;c<V;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(M&&c==V-1)});p.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=d==200,n0(this.i,this.u,this.A,this.l,this.R,Je,d),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,Be=this.g;if((pe=Be.g?Be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(pe)){var ae=pe;break t}}ae=null}if(d=ae)Or(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gl(this,d);else{this.o=!1,this.s=3,at(12),ur(this),Us(this);break e}}if(this.P){d=!0;let Ut;for(;!this.J&&this.C<z.length;)if(Ut=i0(this,z),Ut==Wl){Je==4&&(this.s=4,at(14),d=!1),Or(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==ef){this.s=4,at(15),Or(this.i,this.l,z,"[Invalid Chunk]"),d=!1;break}else Or(this.i,this.l,Ut,null),Gl(this,Ut);if(nf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||z.length!=0||this.h.h||(this.s=1,at(16),d=!1),this.o=this.o&&d,!d)Or(this.i,this.l,z,"[Invalid Chunked Response]"),ur(this),Us(this);else if(0<z.length&&!this.W){this.W=!0;var Xe=this.j;Xe.g==this&&Xe.ba&&!Xe.M&&(Xe.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),tu(Xe),Xe.M=!0,at(11))}}else Or(this.i,this.l,z,null),Gl(this,z);Je==4&&ur(this),this.o&&!this.J&&(Je==4?xf(this.j,this):(this.o=!1,Io(this)))}else T0(this.g),d==400&&0<z.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),ur(this),Us(this)}}}catch{}finally{}};function nf(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function i0(o,c){var d=o.C,p=c.indexOf(`
`,d);return p==-1?Wl:(d=Number(c.substring(d,p)),isNaN(d)?ef:(p+=1,p+d>c.length?Wl:(c=c.slice(p,p+d),o.C=p+d,c)))}Pn.prototype.cancel=function(){this.J=!0,ur(this)};function Io(o){o.S=Date.now()+o.I,rf(o,o.I)}function rf(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=js(g(o.ba,o),c)}function Kl(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Pn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(r0(this.i,this.A),this.L!=2&&(Fs(),at(17)),ur(this),this.s=2,Us(this)):rf(this,this.S-o)};function Us(o){o.j.G==0||o.J||xf(o.j,o)}function ur(o){Kl(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Hd(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Gl(o,c){try{var d=o.j;if(d.G!=0&&(d.g==o||Yl(d.h,o))){if(!o.K&&Yl(d.h,o)&&d.G==3){try{var p=d.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var V=p;if(V[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)No(d),xo(d);else break e;eu(d),at(18)}}else d.za=V[1],0<d.za-d.T&&37500>V[2]&&d.F&&d.v==0&&!d.C&&(d.C=js(g(d.Za,d),6e3));if(1>=af(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else hr(d,11)}else if((o.K||d.g==o)&&No(d),!v(c))for(V=d.Da.g.parse(c),c=0;c<V.length;c++){let ae=V[c];if(d.T=ae[0],ae=ae[1],d.G==2)if(ae[0]=="c"){d.K=ae[1],d.ia=ae[2];const Xe=ae[3];Xe!=null&&(d.la=Xe,d.j.info("VER="+d.la));const Je=ae[4];Je!=null&&(d.Aa=Je,d.j.info("SVER="+d.Aa));const br=ae[5];br!=null&&typeof br=="number"&&0<br&&(p=1.5*br,d.L=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;const Ut=o.g;if(Ut){const Mo=Ut.g?Ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mo){var M=p.h;M.g||Mo.indexOf("spdy")==-1&&Mo.indexOf("quic")==-1&&Mo.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Xl(M,M.h),M.h=null))}if(p.D){const nu=Ut.g?Ut.g.getResponseHeader("X-HTTP-Session-Id"):null;nu&&(p.ya=nu,ye(p.I,p.D,nu))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),p=d;var z=o;if(p.qa=Df(p,p.J?p.ia:null,p.W),z.K){lf(p.h,z);var pe=z,Be=p.L;Be&&(pe.I=Be),pe.B&&(Kl(pe),Io(pe)),p.g=z}else kf(p);0<d.i.length&&Vo(d)}else ae[0]!="stop"&&ae[0]!="close"||hr(d,7);else d.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?hr(d,7):Zl(d):ae[0]!="noop"&&d.l&&d.l.ta(ae),d.v=0)}}Fs(4)}catch{}}var o0=class{constructor(o,c){this.g=o,this.map=c}};function sf(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function of(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function af(o){return o.h?1:o.g?o.g.size:0}function Yl(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Xl(o,c){o.g?o.g.add(c):o.h=c}function lf(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}sf.prototype.cancel=function(){if(this.i=uf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function uf(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.D);return c}return x(o.i)}function a0(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],d=o.length,p=0;p<d;p++)c.push(o[p]);return c}c=[],d=0;for(p in o)c[d++]=o[p];return c}function l0(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var d=0;d<o;d++)c.push(d);return c}c=[],d=0;for(const p in o)c[d++]=p;return c}}}function cf(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var d=l0(o),p=a0(o),V=p.length,M=0;M<V;M++)c.call(void 0,p[M],d&&d[M],o)}var hf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function u0(o,c){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var p=o[d].indexOf("="),V=null;if(0<=p){var M=o[d].substring(0,p);V=o[d].substring(p+1)}else M=o[d];c(M,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function cr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof cr){this.h=o.h,So(this,o.j),this.o=o.o,this.g=o.g,Ao(this,o.s),this.l=o.l;var c=o.i,d=new $s;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),df(this,d),this.m=o.m}else o&&(c=String(o).match(hf))?(this.h=!1,So(this,c[1]||"",!0),this.o=zs(c[2]||""),this.g=zs(c[3]||"",!0),Ao(this,c[4]),this.l=zs(c[5]||"",!0),df(this,c[6]||"",!0),this.m=zs(c[7]||"")):(this.h=!1,this.i=new $s(null,this.h))}cr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Bs(c,ff,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Bs(c,ff,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Bs(d,d.charAt(0)=="/"?d0:h0,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Bs(d,p0)),o.join("")};function un(o){return new cr(o)}function So(o,c,d){o.j=d?zs(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Ao(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function df(o,c,d){c instanceof $s?(o.i=c,m0(o.i,o.h)):(d||(c=Bs(c,f0)),o.i=new $s(c,o.h))}function ye(o,c,d){o.i.set(c,d)}function Ro(o){return ye(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function zs(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Bs(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,c0),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function c0(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var ff=/[#\/\?@]/g,h0=/[#\?:]/g,d0=/[#\?]/g,f0=/[#\?@]/g,p0=/#/g;function $s(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function xn(o){o.g||(o.g=new Map,o.h=0,o.i&&u0(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=$s.prototype,t.add=function(o,c){xn(this),this.i=null,o=Fr(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function pf(o,c){xn(o),c=Fr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function mf(o,c){return xn(o),c=Fr(o,c),o.g.has(c)}t.forEach=function(o,c){xn(this),this.g.forEach(function(d,p){d.forEach(function(V){o.call(c,V,p,this)},this)},this)},t.na=function(){xn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let p=0;p<c.length;p++){const V=o[p];for(let M=0;M<V.length;M++)d.push(c[p])}return d},t.V=function(o){xn(this);let c=[];if(typeof o=="string")mf(this,o)&&(c=c.concat(this.g.get(Fr(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)c=c.concat(o[d])}return c},t.set=function(o,c){return xn(this),this.i=null,o=Fr(this,o),mf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function gf(o,c,d){pf(o,c),0<d.length&&(o.i=null,o.g.set(Fr(o,c),x(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var p=c[d];const M=encodeURIComponent(String(p)),z=this.V(p);for(p=0;p<z.length;p++){var V=M;z[p]!==""&&(V+="="+encodeURIComponent(String(z[p]))),o.push(V)}}return this.i=o.join("&")};function Fr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function m0(o,c){c&&!o.j&&(xn(o),o.i=null,o.g.forEach(function(d,p){var V=p.toLowerCase();p!=V&&(pf(this,p),gf(this,V,d))},o)),o.j=c}function g0(o,c){const d=new bs;if(l.Image){const p=new Image;p.onload=E(Vn,d,"TestLoadImage: loaded",!0,c,p),p.onerror=E(Vn,d,"TestLoadImage: error",!1,c,p),p.onabort=E(Vn,d,"TestLoadImage: abort",!1,c,p),p.ontimeout=E(Vn,d,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function y0(o,c){const d=new bs,p=new AbortController,V=setTimeout(()=>{p.abort(),Vn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(M=>{clearTimeout(V),M.ok?Vn(d,"TestPingServer: ok",!0,c):Vn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(V),Vn(d,"TestPingServer: error",!1,c)})}function Vn(o,c,d,p,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),p(d)}catch{}}function _0(){this.g=new e0}function v0(o,c,d){const p=d||"";try{cf(o,function(V,M){let z=V;h(V)&&(z=zl(V)),c.push(p+M+"="+encodeURIComponent(z))})}catch(V){throw c.push(p+"type="+encodeURIComponent("_badmap")),V}}function Co(o){this.l=o.Ub||null,this.j=o.eb||!1}C(Co,Bl),Co.prototype.g=function(){return new ko(this.l,this.j)},Co.prototype.i=function(o){return function(){return o}}({});function ko(o,c){Ye.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(ko,Ye),t=ko.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Hs(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qs(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yf(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function yf(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?qs(this):Hs(this),this.readyState==3&&yf(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,qs(this))},t.Qa=function(o){this.g&&(this.response=o,qs(this))},t.ga=function(){this.g&&qs(this)};function qs(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Hs(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function Hs(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ko.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function _f(o){let c="";return j(o,function(d,p){c+=p,c+=":",c+=d,c+=`\r
`}),c}function Jl(o,c,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=_f(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):ye(o,c,d))}function Re(o){Ye.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Re,Ye);var E0=/^https?$/i,w0=["POST","PUT"];t=Re.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hl.g(),this.v=this.o?Wd(this.o):Wd(Hl),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(M){vf(this,M);return}if(o=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var V in p)d.set(V,p[V]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const M of p.keys())d.set(M,p.get(M));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(M=>M.toLowerCase()=="content-type"),V=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(w0,c,void 0))||p||V||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,z]of d)this.g.setRequestHeader(M,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tf(this),this.u=!0,this.g.send(o),this.u=!1}catch(M){vf(this,M)}};function vf(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Ef(o),Po(o)}function Ef(o){o.A||(o.A=!0,ot(o,"complete"),ot(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ot(this,"complete"),ot(this,"abort"),Po(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Po(this,!0)),Re.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wf(this):this.bb())},t.bb=function(){wf(this)};function wf(o){if(o.h&&typeof a<"u"&&(!o.v[1]||cn(o)!=4||o.Z()!=2)){if(o.u&&cn(o)==4)Bd(o.Ea,0,o);else if(ot(o,"readystatechange"),cn(o)==4){o.h=!1;try{const z=o.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var p;if(p=z===0){var V=String(o.D).match(hf)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),p=!E0.test(V?V.toLowerCase():"")}d=p}if(d)ot(o,"complete"),ot(o,"success");else{o.m=6;try{var M=2<cn(o)?o.g.statusText:""}catch{M=""}o.l=M+" ["+o.Z()+"]",Ef(o)}}finally{Po(o)}}}}function Po(o,c){if(o.g){Tf(o);const d=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||ot(o,"ready");try{d.onreadystatechange=p}catch{}}}function Tf(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function cn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Zv(c)}};function If(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function T0(o){const c={};o=(o.g&&2<=cn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(v(o[p]))continue;var d=R(o[p]);const V=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const M=c[V]||[];c[V]=M,M.push(d)}T(c,function(p){return p.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function Sf(o){this.Aa=0,this.i=[],this.j=new bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ws("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ws("baseRetryDelayMs",5e3,o),this.cb=Ws("retryDelaySeedMs",1e4,o),this.Wa=Ws("forwardChannelMaxRetries",2,o),this.wa=Ws("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new sf(o&&o.concurrentRequestLimit),this.Da=new _0,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Sf.prototype,t.la=8,t.G=1,t.connect=function(o,c,d,p){at(0),this.W=o,this.H=c||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.I=Df(this,null,this.W),Vo(this)};function Zl(o){if(Af(o),o.G==3){var c=o.U++,d=un(o.I);if(ye(d,"SID",o.K),ye(d,"RID",c),ye(d,"TYPE","terminate"),Qs(o,d),c=new Pn(o,o.j,c),c.L=2,c.v=Ro(un(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=Mf(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Io(c)}Nf(o)}function xo(o){o.g&&(tu(o),o.g.cancel(),o.g=null)}function Af(o){xo(o),o.u&&(l.clearTimeout(o.u),o.u=null),No(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Vo(o){if(!of(o.h)&&!o.s){o.s=!0;var c=o.Ga;ue||G(),U||(ue(),U=!0),W.add(c,o),o.B=0}}function I0(o,c){return af(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=js(g(o.Ga,o,c),Vf(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const V=new Pn(this,this.j,o);let M=this.o;if(this.S&&(M?(M=y(M),_(M,this.S)):M=this.S),this.m!==null||this.O||(V.H=M,M=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Cf(this,V,c),d=un(this.I),ye(d,"RID",o),ye(d,"CVER",22),this.D&&ye(d,"X-HTTP-Session-Id",this.D),Qs(this,d),M&&(this.O?c="headers="+encodeURIComponent(String(_f(M)))+"&"+c:this.m&&Jl(d,this.m,M)),Xl(this.h,V),this.Ua&&ye(d,"TYPE","init"),this.P?(ye(d,"$req",c),ye(d,"SID","null"),V.T=!0,Ql(V,d,null)):Ql(V,d,c),this.G=2}}else this.G==3&&(o?Rf(this,o):this.i.length==0||of(this.h)||Rf(this))};function Rf(o,c){var d;c?d=c.l:d=o.U++;const p=un(o.I);ye(p,"SID",o.K),ye(p,"RID",d),ye(p,"AID",o.T),Qs(o,p),o.m&&o.o&&Jl(p,o.m,o.o),d=new Pn(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Cf(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Xl(o.h,d),Ql(d,p,c)}function Qs(o,c){o.H&&j(o.H,function(d,p){ye(c,p,d)}),o.l&&cf({},function(d,p){ye(c,p,d)})}function Cf(o,c,d){d=Math.min(o.i.length,d);var p=o.l?g(o.l.Na,o.l,o):null;e:{var V=o.i;let M=-1;for(;;){const z=["count="+d];M==-1?0<d?(M=V[0].g,z.push("ofs="+M)):M=0:z.push("ofs="+M);let pe=!0;for(let Be=0;Be<d;Be++){let ae=V[Be].g;const Xe=V[Be].map;if(ae-=M,0>ae)M=Math.max(0,V[Be].g-100),pe=!1;else try{v0(Xe,z,"req"+ae+"_")}catch{p&&p(Xe)}}if(pe){p=z.join("&");break e}}}return o=o.i.splice(0,d),c.D=o,p}function kf(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;ue||G(),U||(ue(),U=!0),W.add(c,o),o.v=0}}function eu(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=js(g(o.Fa,o),Vf(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Pf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=js(g(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),xo(this),Pf(this))};function tu(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Pf(o){o.g=new Pn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=un(o.qa);ye(c,"RID","rpc"),ye(c,"SID",o.K),ye(c,"AID",o.T),ye(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&ye(c,"TO",o.ja),ye(c,"TYPE","xmlhttp"),Qs(o,c),o.m&&o.o&&Jl(c,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Ro(un(c)),d.m=null,d.P=!0,tf(d,o)}t.Za=function(){this.C!=null&&(this.C=null,xo(this),eu(this),at(19))};function No(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function xf(o,c){var d=null;if(o.g==c){No(o),tu(o),o.g=null;var p=2}else if(Yl(o.h,c))d=c.D,lf(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var V=o.B;p=Eo(),ot(p,new Xd(p,d)),Vo(o)}else kf(o);else if(V=c.s,V==3||V==0&&0<c.X||!(p==1&&I0(o,c)||p==2&&eu(o)))switch(d&&0<d.length&&(c=o.h,c.i=c.i.concat(d)),V){case 1:hr(o,5);break;case 4:hr(o,10);break;case 3:hr(o,6);break;default:hr(o,2)}}}function Vf(o,c){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*c}function hr(o,c){if(o.j.info("Error code "+c),c==2){var d=g(o.fb,o),p=o.Xa;const V=!p;p=new cr(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||So(p,"https"),Ro(p),V?g0(p.toString(),d):y0(p.toString(),d)}else at(2);o.G=0,o.l&&o.l.sa(c),Nf(o),Af(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function Nf(o){if(o.G=0,o.ka=[],o.l){const c=uf(o.h);(c.length!=0||o.i.length!=0)&&(D(o.ka,c),D(o.ka,o.i),o.h.i.length=0,x(o.i),o.i.length=0),o.l.ra()}}function Df(o,c,d){var p=d instanceof cr?un(d):new cr(d);if(p.g!="")c&&(p.g=c+"."+p.g),Ao(p,p.s);else{var V=l.location;p=V.protocol,c=c?c+"."+V.hostname:V.hostname,V=+V.port;var M=new cr(null);p&&So(M,p),c&&(M.g=c),V&&Ao(M,V),d&&(M.l=d),p=M}return d=o.D,c=o.ya,d&&c&&ye(p,d,c),ye(p,"VER",o.la),Qs(o,p),p}function Mf(o,c,d){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Re(new Co({eb:d})):new Re(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lf(){}t=Lf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Do(){}Do.prototype.g=function(o,c){return new Et(o,c)};function Et(o,c){Ye.call(this),this.g=new Sf(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new jr(this)}C(Et,Ye),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){Zl(this.g)},Et.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=zl(o),o=d);c.i.push(new o0(c.Ya++,o)),c.G==3&&Vo(c)},Et.prototype.N=function(){this.g.l=null,delete this.j,Zl(this.g),delete this.g,Et.aa.N.call(this)};function Of(o){$l.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const d in c){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}C(Of,$l);function Ff(){ql.call(this),this.status=1}C(Ff,ql);function jr(o){this.g=o}C(jr,Lf),jr.prototype.ua=function(){ot(this.g,"a")},jr.prototype.ta=function(o){ot(this.g,new Of(o))},jr.prototype.sa=function(o){ot(this.g,new Ff)},jr.prototype.ra=function(){ot(this.g,"b")},Do.prototype.createWebChannel=Do.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,S_=function(){return new Do},I_=function(){return Eo()},T_=lr,Uc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wo.NO_ERROR=0,wo.TIMEOUT=8,wo.HTTP_ERROR=6,ma=wo,Jd.COMPLETE="complete",w_=Jd,Qd.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,li=Qd,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,E_=Re}).apply(typeof Jo<"u"?Jo:typeof self<"u"?self:typeof window<"u"?window:{});const om="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nt.UNAUTHENTICATED=new nt(null),nt.GOOGLE_CREDENTIALS=new nt("google-credentials-uid"),nt.FIRST_PARTY=new nt("first-party-uid"),nt.MOCK_USER=new nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new f_("@firebase/firestore");function ni(){return kr.logLevel}function H(t,...e){if(kr.logLevel<=ie.DEBUG){const n=e.map(td);kr.debug(`Firestore (${xs}): ${t}`,...n)}}function Tn(t,...e){if(kr.logLevel<=ie.ERROR){const n=e.map(td);kr.error(`Firestore (${xs}): ${t}`,...n)}}function _s(t,...e){if(kr.logLevel<=ie.WARN){const n=e.map(td);kr.warn(`Firestore (${xs}): ${t}`,...n)}}function td(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${xs}) INTERNAL ASSERTION FAILED: `+t;throw Tn(e),new Error(e)}function de(t,e){t||X()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Ps{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nt.UNAUTHENTICATED))}shutdown(){}}class OT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class FT{constructor(e){this.t=e,this.currentUser=nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Yn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Yn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string"),new A_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new nt(e)}}class jT{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=nt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class bT{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new jT(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class UT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){de(this.o===void 0);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string"),this.R=n.token,new UT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=BT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function vs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new je(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new je(0,0))}static max(){return new Z(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Wi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ve extends Wi{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const $T=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends Wi{construct(e,n,r){return new He(e,n,r)}static isValidIdentifier(e){return $T.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new He(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new B(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new B(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new B(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(ve.fromString(e))}static fromName(e){return new Q(ve.fromString(e).popFirst(5))}static empty(){return new Q(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new ve(e.slice()))}}function qT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new er(s,Q.empty(),e)}function HT(t){return new er(t.readTime,t.key,-1)}class er{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new er(Z.min(),Q.empty(),-1)}static max(){return new er(Z.max(),Q.empty(),-1)}}function WT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==QT)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(f=>{a[h]=f,++l,l===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function GT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function oo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}nd.oe=-1;function _l(t){return t==null}function Ka(t){return t===0&&1/t==-1/0}function YT(t){return typeof t=="number"&&Number.isInteger(t)&&!Ka(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Dr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function C_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||qe.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zo(this.root,e,this.comparator,!0)}}class Zo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??qe.RED,this.left=s??qe.EMPTY,this.right=i??qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new qe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return qe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,s,i){return this}insert(e,n,r){return new qe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lm(this.data.getIterator())}getIteratorFrom(e){return new lm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class lm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new St([])}unionWith(e){let n=new Qe(He.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new St(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new k_("Invalid base64 string: "+i):i}}(e);return new Ge(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Ge(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ge.EMPTY_BYTE_STRING=new Ge("");const XT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tr(t){if(de(!!t),typeof t=="string"){let e=0;const n=XT.exec(t);if(de(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Pr(t){return typeof t=="string"?Ge.fromBase64String(t):Ge.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sd(t){const e=t.mapValue.fields.__previous_value__;return rd(e)?sd(e):e}function Qi(t){const e=tr(t.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n,r,s,i,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class Ki{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ki("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ki&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea={mapValue:{}};function xr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rd(t)?4:eI(t)?9007199254740991:ZT(t)?10:11:X()}function nn(t,e){if(t===e)return!0;const n=xr(t);if(n!==xr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qi(t).isEqual(Qi(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=tr(s.timestampValue),l=tr(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Pr(s.bytesValue).isEqual(Pr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ve(s.geoPointValue.latitude)===Ve(i.geoPointValue.latitude)&&Ve(s.geoPointValue.longitude)===Ve(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ve(s.integerValue)===Ve(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ve(s.doubleValue),l=Ve(i.doubleValue);return a===l?Ka(a)===Ka(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return vs(t.arrayValue.values||[],e.arrayValue.values||[],nn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(am(a)!==am(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!nn(a[u],l[u])))return!1;return!0}(t,e);default:return X()}}function Gi(t,e){return(t.values||[]).find(n=>nn(n,e))!==void 0}function Es(t,e){if(t===e)return 0;const n=xr(t),r=xr(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Ve(i.integerValue||i.doubleValue),u=Ve(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return um(t.timestampValue,e.timestampValue);case 4:return um(Qi(t),Qi(e));case 5:return le(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Pr(i),u=Pr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=le(l[h],u[h]);if(f!==0)return f}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=le(Ve(i.latitude),Ve(a.latitude));return l!==0?l:le(Ve(i.longitude),Ve(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return cm(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,u,h,f;const m=i.fields||{},g=a.fields||{},E=(l=m.value)===null||l===void 0?void 0:l.arrayValue,C=(u=g.value)===null||u===void 0?void 0:u.arrayValue,x=le(((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0,((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0);return x!==0?x:cm(E,C)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===ea.mapValue&&a===ea.mapValue)return 0;if(i===ea.mapValue)return 1;if(a===ea.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=a.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=le(u[m],f[m]);if(g!==0)return g;const E=Es(l[u[m]],h[f[m]]);if(E!==0)return E}return le(u.length,f.length)}(t.mapValue,e.mapValue);default:throw X()}}function um(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=tr(t),r=tr(e),s=le(n.seconds,r.seconds);return s!==0?s:le(n.nanos,r.nanos)}function cm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Es(n[s],r[s]);if(i)return i}return le(n.length,r.length)}function ws(t){return zc(t)}function zc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=tr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Pr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=zc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${zc(n.fields[a])}`;return s+"}"}(t.mapValue):X()}function hm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Bc(t){return!!t&&"integerValue"in t}function id(t){return!!t&&"arrayValue"in t}function dm(t){return!!t&&"nullValue"in t}function fm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ga(t){return!!t&&"mapValue"in t}function ZT(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ii(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Dr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ii(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ii(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.value=e}static empty(){return new mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ga(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ii(n)}setAll(e){let n=He.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Ii(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ga(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ga(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Dr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new mt(Ii(this.value))}}function P_(t){const e=[];return Dr(t.fields,(n,r)=>{const s=new He([n]);if(ga(r)){const i=P_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new St(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new st(e,0,Z.min(),Z.min(),Z.min(),mt.empty(),0)}static newFoundDocument(e,n,r,s){return new st(e,1,n,Z.min(),r,s,0)}static newNoDocument(e,n){return new st(e,2,n,Z.min(),Z.min(),mt.empty(),0)}static newUnknownDocument(e,n){return new st(e,3,n,Z.min(),Z.min(),mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof st&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new st(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n){this.position=e,this.inclusive=n}}function pm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(a.referenceValue),n.key):r=Es(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function mm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n="asc"){this.field=e,this.dir=n}}function tI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{}class Le extends x_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new rI(e,n,r):n==="array-contains"?new oI(e,r):n==="in"?new aI(e,r):n==="not-in"?new lI(e,r):n==="array-contains-any"?new uI(e,r):new Le(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new sI(e,r):new iI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Es(n,this.value)):n!==null&&xr(this.value)===xr(n)&&this.matchesComparison(Es(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kt extends x_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Kt(e,n)}matches(e){return V_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function V_(t){return t.op==="and"}function N_(t){return nI(t)&&V_(t)}function nI(t){for(const e of t.filters)if(e instanceof Kt)return!1;return!0}function $c(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+ws(t.value);if(N_(t))return t.filters.map(e=>$c(e)).join(",");{const e=t.filters.map(n=>$c(n)).join(",");return`${t.op}(${e})`}}function D_(t,e){return t instanceof Le?function(r,s){return s instanceof Le&&r.op===s.op&&r.field.isEqual(s.field)&&nn(r.value,s.value)}(t,e):t instanceof Kt?function(r,s){return s instanceof Kt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&D_(a,s.filters[l]),!0):!1}(t,e):void X()}function M_(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${ws(n.value)}`}(t):t instanceof Kt?function(n){return n.op.toString()+" {"+n.getFilters().map(M_).join(" ,")+"}"}(t):"Filter"}class rI extends Le{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class sI extends Le{constructor(e,n){super(e,"in",n),this.keys=L_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class iI extends Le{constructor(e,n){super(e,"not-in",n),this.keys=L_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function L_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class oI extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return id(n)&&Gi(n.arrayValue,this.value)}}class aI extends Le{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gi(this.value.arrayValue,n)}}class lI extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Gi(this.value.arrayValue,n)}}class uI extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!id(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gi(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function gm(t,e=null,n=[],r=[],s=null,i=null,a=null){return new cI(t,e,n,r,s,i,a)}function od(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$c(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),_l(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ws(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ws(r)).join(",")),e.ue=n}return e.ue}function ad(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!D_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mm(t.startAt,e.startAt)&&mm(t.endAt,e.endAt)}function qc(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hI(t,e,n,r,s,i,a,l){return new Vs(t,e,n,r,s,i,a,l)}function ld(t){return new Vs(t)}function ym(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function O_(t){return t.collectionGroup!==null}function Si(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Qe(He.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Yi(i,r))}),n.has(He.keyField().canonicalString())||e.ce.push(new Yi(He.keyField(),r))}return e.ce}function en(t){const e=ee(t);return e.le||(e.le=dI(e,Si(t))),e.le}function dI(t,e){if(t.limitType==="F")return gm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Yi(s.field,i)});const n=t.endAt?new Ga(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ga(t.startAt.position,t.startAt.inclusive):null;return gm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Hc(t,e){const n=t.filters.concat([e]);return new Vs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ya(t,e,n){return new Vs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vl(t,e){return ad(en(t),en(e))&&t.limitType===e.limitType}function F_(t){return`${od(en(t))}|lt:${t.limitType}`}function zr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>M_(s)).join(", ")}]`),_l(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ws(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ws(s)).join(",")),`Target(${r})`}(en(t))}; limitType=${t.limitType})`}function El(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Si(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const h=pm(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,Si(r),s)||r.endAt&&!function(a,l,u){const h=pm(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,Si(r),s))}(t,e)}function fI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function j_(t){return(e,n)=>{let r=!1;for(const s of Si(t)){const i=pI(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function pI(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Es(u,h):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Dr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return C_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new Ae(Q.comparator);function In(){return mI}const b_=new Ae(Q.comparator);function ui(...t){let e=b_;for(const n of t)e=e.insert(n.key,n);return e}function U_(t){let e=b_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function vr(){return Ai()}function z_(){return Ai()}function Ai(){return new Ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const gI=new Ae(Q.comparator),yI=new Qe(Q.comparator);function ne(...t){let e=yI;for(const n of t)e=e.add(n);return e}const _I=new Qe(le);function vI(){return _I}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ka(e)?"-0":e}}function B_(t){return{integerValue:""+t}}function $_(t,e){return YT(e)?B_(e):ud(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(){this._=void 0}}function EI(t,e,n){return t instanceof Xa?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&rd(i)&&(i=sd(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof Ts?H_(t,e):t instanceof Xi?W_(t,e):function(s,i){const a=q_(s,i),l=_m(a)+_m(s.Pe);return Bc(a)&&Bc(s.Pe)?B_(l):ud(s.serializer,l)}(t,e)}function wI(t,e,n){return t instanceof Ts?H_(t,e):t instanceof Xi?W_(t,e):n}function q_(t,e){return t instanceof Ji?function(r){return Bc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Xa extends wl{}class Ts extends wl{constructor(e){super(),this.elements=e}}function H_(t,e){const n=Q_(e);for(const r of t.elements)n.some(s=>nn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Xi extends wl{constructor(e){super(),this.elements=e}}function W_(t,e){let n=Q_(e);for(const r of t.elements)n=n.filter(s=>!nn(s,r));return{arrayValue:{values:n}}}class Ji extends wl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function _m(t){return Ve(t.integerValue||t.doubleValue)}function Q_(t){return id(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,n){this.field=e,this.transform=n}}function TI(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ts&&s instanceof Ts||r instanceof Xi&&s instanceof Xi?vs(r.elements,s.elements,nn):r instanceof Ji&&s instanceof Ji?nn(r.Pe,s.Pe):r instanceof Xa&&s instanceof Xa}(t.transform,e.transform)}class II{constructor(e,n){this.version=e,this.transformResults=n}}class ct{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ct}static exists(e){return new ct(void 0,e)}static updateTime(e){return new ct(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ya(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Tl{}function G_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Il(t.key,ct.none()):new ao(t.key,t.data,ct.none());{const n=t.data,r=mt.empty();let s=new Qe(He.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new ar(t.key,r,new St(s.toArray()),ct.none())}}function SI(t,e,n){t instanceof ao?function(s,i,a){const l=s.value.clone(),u=Em(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ar?function(s,i,a){if(!ya(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Em(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Y_(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ri(t,e,n,r){return t instanceof ao?function(i,a,l,u){if(!ya(i.precondition,a))return l;const h=i.value.clone(),f=wm(i.fieldTransforms,u,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof ar?function(i,a,l,u){if(!ya(i.precondition,a))return l;const h=wm(i.fieldTransforms,u,a),f=a.data;return f.setAll(Y_(i)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,l){return ya(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function AI(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=q_(r.transform,s||null);i!=null&&(n===null&&(n=mt.empty()),n.set(r.field,i))}return n||null}function vm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&vs(r,s,(i,a)=>TI(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ao extends Tl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ar extends Tl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Y_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Em(t,e,n){const r=new Map;de(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,wI(a,l,n[s]))}return r}function wm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,EI(i,a,e))}return r}class Il extends Tl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RI extends Tl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&SI(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ri(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ri(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=z_();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=G_(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&vs(this.mutations,e.mutations,(n,r)=>vm(n,r))&&vs(this.baseMutations,e.baseMutations,(n,r)=>vm(n,r))}}class cd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){de(e.mutations.length===r.length);let s=function(){return gI}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new cd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,re;function xI(t){switch(t){default:return X();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function X_(t){if(t===void 0)return Tn("GRPC error has no .code"),L.UNKNOWN;switch(t){case De.OK:return L.OK;case De.CANCELLED:return L.CANCELLED;case De.UNKNOWN:return L.UNKNOWN;case De.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case De.INTERNAL:return L.INTERNAL;case De.UNAVAILABLE:return L.UNAVAILABLE;case De.UNAUTHENTICATED:return L.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case De.NOT_FOUND:return L.NOT_FOUND;case De.ALREADY_EXISTS:return L.ALREADY_EXISTS;case De.PERMISSION_DENIED:return L.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case De.ABORTED:return L.ABORTED;case De.OUT_OF_RANGE:return L.OUT_OF_RANGE;case De.UNIMPLEMENTED:return L.UNIMPLEMENTED;case De.DATA_LOSS:return L.DATA_LOSS;default:return X()}}(re=De||(De={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=new Tr([4294967295,4294967295],0);function Tm(t){const e=VI().encode(t),n=new v_;return n.update(e),new Uint8Array(n.digest())}function Im(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Tr([n,r],0),new Tr([s,i],0)]}class hd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ci(`Invalid padding: ${n}`);if(r<0)throw new ci(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ci(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ci(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Tr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Tr.fromNumber(r)));return s.compare(NI)===1&&(s=new Tr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Tm(e),[r,s]=Im(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new hd(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=Tm(e),[r,s]=Im(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ci extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,lo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sl(Z.min(),s,new Ae(le),In(),ne())}}class lo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new lo(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class J_{constructor(e,n){this.targetId=e,this.me=n}}class Z_{constructor(e,n,r=Ge.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Sm{constructor(){this.fe=0,this.ge=Rm(),this.pe=Ge.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X()}}),new lo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Rm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class DI{constructor(e){this.Le=e,this.Be=new Map,this.ke=In(),this.qe=Am(),this.Qe=new Ae(le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(qc(i))if(r===0){const a=new Q(i.path);this.Ue(n,a,st.newNoDocument(a,Z.min()))}else de(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Pr(r).toUint8Array()}catch(u){if(u instanceof k_)return _s("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new hd(a,s,i)}catch(u){return _s(u instanceof ci?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const l=this.Je(a);if(l){if(i.current&&qc(l.target)){const u=new Q(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,st.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=ne();this.qe.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Sl(e,n,this.Qe,this.ke,r);return this.ke=In(),this.qe=Am(),this.Qe=new Ae(le),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Sm,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Qe(le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Sm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Am(){return new Ae(Q.comparator)}function Rm(){return new Ae(Q.comparator)}const MI={asc:"ASCENDING",desc:"DESCENDING"},LI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OI={and:"AND",or:"OR"};class FI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wc(t,e){return t.useProto3Json||_l(e)?e:{value:e}}function Ja(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ev(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jI(t,e){return Ja(t,e.toTimestamp())}function tn(t){return de(!!t),Z.fromTimestamp(function(n){const r=tr(n);return new je(r.seconds,r.nanos)}(t))}function dd(t,e){return Qc(t,e).canonicalString()}function Qc(t,e){const n=function(s){return new ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tv(t){const e=ve.fromString(t);return de(ov(e)),e}function Kc(t,e){return dd(t.databaseId,e.path)}function Du(t,e){const n=tv(e);if(n.get(1)!==t.databaseId.projectId)throw new B(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(rv(n))}function nv(t,e){return dd(t.databaseId,e)}function bI(t){const e=tv(t);return e.length===4?ve.emptyPath():rv(e)}function Gc(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rv(t){return de(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Cm(t,e,n){return{name:Kc(t,e),fields:n.value.mapValue.fields}}function UI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(de(f===void 0||typeof f=="string"),Ge.fromBase64String(f||"")):(de(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Ge.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const f=h.code===void 0?L.UNKNOWN:X_(h.code);return new B(f,h.message||"")}(a);n=new Z_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Du(t,r.document.name),i=tn(r.document.updateTime),a=r.document.createTime?tn(r.document.createTime):Z.min(),l=new mt({mapValue:{fields:r.document.fields}}),u=st.newFoundDocument(s,i,a,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new _a(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Du(t,r.document),i=r.readTime?tn(r.readTime):Z.min(),a=st.newNoDocument(s,i),l=r.removedTargetIds||[];n=new _a([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Du(t,r.document),i=r.removedTargetIds||[];n=new _a([],i,s,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new PI(s,i),l=r.targetId;n=new J_(l,a)}}return n}function zI(t,e){let n;if(e instanceof ao)n={update:Cm(t,e.key,e.value)};else if(e instanceof Il)n={delete:Kc(t,e.key)};else if(e instanceof ar)n={update:Cm(t,e.key,e.data),updateMask:YI(e.fieldMask)};else{if(!(e instanceof RI))return X();n={verify:Kc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Xa)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ts)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Xi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ji)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:jI(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:X()}(t,e.precondition)),n}function BI(t,e){return t&&t.length>0?(de(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?tn(s.updateTime):tn(i);return a.isEqual(Z.min())&&(a=tn(i)),new II(a,s.transformResults||[])}(n,e))):[]}function $I(t,e){return{documents:[nv(t,e.path)]}}function qI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nv(t,s);const i=function(h){if(h.length!==0)return iv(Kt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(f=>function(g){return{field:Br(g.field),direction:QI(g.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Wc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function HI(t){let e=bI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){de(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=sv(m);return g instanceof Kt&&N_(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(g=>function(C){return new Yi($r(C.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,_l(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,E=m.values||[];return new Ga(E,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,E=m.values||[];return new Ga(E,g)}(n.endAt)),hI(e,s,a,i,l,"F",u,h)}function WI(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$r(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=$r(n.unaryFilter.field);return Le.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$r(n.unaryFilter.field);return Le.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=$r(n.unaryFilter.field);return Le.create(a,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return Le.create($r(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kt.create(n.compositeFilter.filters.map(r=>sv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function QI(t){return MI[t]}function KI(t){return LI[t]}function GI(t){return OI[t]}function Br(t){return{fieldPath:t.canonicalString()}}function $r(t){return He.fromServerFormat(t.fieldPath)}function iv(t){return t instanceof Le?function(n){if(n.op==="=="){if(fm(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NAN"}};if(dm(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fm(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NOT_NAN"}};if(dm(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Br(n.field),op:KI(n.op),value:n.value}}}(t):t instanceof Kt?function(n){const r=n.getFilters().map(s=>iv(s));return r.length===1?r[0]:{compositeFilter:{op:GI(n.op),filters:r}}}(t):X()}function YI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ov(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n,r,s,i=Z.min(),a=Z.min(),l=Ge.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new bn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.ct=e}}function JI(t){const e=HI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ya(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.un=new e2}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(er.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(er.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class e2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Qe(ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Qe(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Is(0)}static kn(){return new Is(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.changes=new Ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ri(r.mutation,s,St.empty(),je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const s=vr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=ui();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=vr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=In();const a=Ai(),l=function(){return Ai()}();return n.forEach((u,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof ar)?i=i.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),Ri(f.mutation,h,f.mutation.getFieldMask(),je.now())):a.set(h.key,St.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>a.set(h,f)),n.forEach((h,f)=>{var m;return l.set(h,new n2(f,(m=a.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ai();let s=new Ae((a,l)=>a-l),i=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||St.empty();f=l.applyToLocalView(h,f),r.set(u,f);const m=(s.get(l.batchId)||ne()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,m=z_();f.forEach(g=>{if(!i.has(g)){const E=G_(n.get(g),r.get(g));E!==null&&m.set(g,E),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,m))}return F.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):O_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(vr());let l=-1,u=i;return a.next(h=>F.forEach(h,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ne())).next(f=>({batchId:l,changes:U_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=ui();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=ui();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,u=>{const h=function(m,g){return new Vs(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(f=>{f.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,st.newInvalidDocument(f)))});let l=ui();return a.forEach((u,h)=>{const f=i.get(u);f!==void 0&&Ri(f.mutation,h,St.empty(),je.now()),El(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:tn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:JI(s.bundledQuery),readTime:tn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.overlays=new Ae(Q.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=vr();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=vr(),i=n.length+1,a=new Q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ae((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=vr(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=vr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=s)););return F.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new kI(n,r));let i=this.Ir.get(n);i===void 0&&(i=ne(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(){this.Tr=new Qe(be.Er),this.dr=new Qe(be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new be(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new be(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new ve([])),r=new be(n,e),s=new be(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new ve([])),r=new be(n,e),s=new be(n,e+1);let i=ne();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new be(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class be{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||le(e.wr,n.wr)}static Ar(e,n){return le(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Qe(be.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new CI(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new be(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new be(n,0),s=new be(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const l=this.Dr(a.wr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(le);return n.forEach(s=>{const i=new be(s,0),a=new be(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Q.isDocumentKey(i)||(i=i.child(""));const a=new be(new Q(i),0);let l=new Qe(le);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.wr)),!0)},a),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){de(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new be(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new be(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.Mr=e,this.docs=function(){return new Ae(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():st.newInvalidDocument(n))}getEntries(e,n){let r=In();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():st.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=In();const a=n.path,l=new Q(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||WT(HT(f),r)<=0||(s.has(f.key)||El(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){X()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new u2(this)}getSize(e){return F.resolve(this.size)}}class u2 extends t2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.persistence=e,this.Nr=new Ns(n=>od(n),ad),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fd,this.targetCount=0,this.kr=Is.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Is(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new nd(0),this.Kr=!1,this.Kr=!0,this.$r=new o2,this.referenceDelegate=e(this),this.Ur=new c2(this),this.indexManager=new ZI,this.remoteDocumentCache=function(s){return new l2(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new XI(n),this.Gr=new s2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new i2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new a2(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new d2(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class d2 extends KT{constructor(e){super(),this.currentSequenceNumber=e}}class pd{constructor(e){this.persistence=e,this.Jr=new fd,this.Yr=null}static Zr(e){return new pd(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=Q.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ne(),s=ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new md(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return y1()?8:GT(m1())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new f2;return this.Xi(e,n,a).next(l=>{if(i.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ni()<=ie.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",zr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(ni()<=ie.DEBUG&&H("QueryEngine","Query:",zr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ni()<=ie.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",zr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,en(n))):F.resolve())}Yi(e,n){if(ym(n))return F.resolve(null);let r=en(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ya(n,null,"F"),r=en(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ne(...i);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,a,u.readTime)?this.Yi(e,Ya(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return ym(n)||s.isEqual(Z.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?F.resolve(null):(ni()<=ie.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zr(n)),this.rs(e,a,n,qT(s,-1)).next(l=>l))})}ts(e,n){let r=new Qe(j_(e));return n.forEach((s,i)=>{El(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ni()<=ie.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",zr(n)),this.Ji.getDocumentsMatchingQuery(e,n,er.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ae(le),this._s=new Ns(i=>od(i),ad),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new r2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function g2(t,e,n,r){return new m2(t,e,n,r)}async function av(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=ne();for(const h of s){a.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:l}))})})}function y2(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const m=h.batch,g=m.keys();let E=F.resolve();return g.forEach(C=>{E=E.next(()=>f.getEntry(u,C)).next(x=>{const D=h.docVersions.get(C);de(D!==null),x.version.compareTo(D)<0&&(m.applyToRemoteDocument(x,h),x.isValidDocument()&&(x.setReadTime(h.commitVersion),f.addEntry(x)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ne();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function lv(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function _2(t,e){const n=ee(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,m)));let E=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(Ge.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),s=s.insert(m,E),function(x,D,S){return x.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,E,f)&&l.push(n.Ur.updateTargetData(i,E))});let u=In(),h=ne();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(v2(i,a,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(Z.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function v2(t,e,n){let r=ne(),s=ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=In();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):H("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function E2(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function w2(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new bn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Yc(t,e,n){const r=ee(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!oo(a))throw a;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function km(t,e,n){const r=ee(t);let s=Z.min(),i=ne();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,f){const m=ee(u),g=m._s.get(f);return g!==void 0?F.resolve(m.os.get(g)):m.Ur.getTargetData(h,f)}(r,a,en(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:Z.min(),n?i:ne())).next(l=>(T2(r,fI(e),l),{documents:l,Ts:i})))}function T2(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Pm{constructor(){this.activeTargetIds=vI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class I2{constructor(){this.so=new Pm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Pm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ta=null;function Mu(){return ta===null?ta=function(){return 268435456+Math.round(2147483648*Math.random())}():ta++,"0x"+ta.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tt="WebChannelConnection";class C2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const l=Mu(),u=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,a),this.No(n,u,h,s).then(f=>(H("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw _s("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,a,l){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=A2[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Mu();return new Promise((a,l)=>{const u=new E_;u.setWithCredentials(!0),u.listenOnce(w_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ma.NO_ERROR:const f=u.getResponseJson();H(tt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case ma.TIMEOUT:H(tt,`RPC '${e}' ${i} timed out`),l(new B(L.DEADLINE_EXCEEDED,"Request time out"));break;case ma.HTTP_ERROR:const m=u.getStatus();if(H(tt,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const E=g==null?void 0:g.error;if(E&&E.status&&E.message){const C=function(D){const S=D.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(S)>=0?S:L.UNKNOWN}(E.status);l(new B(C,E.message))}else l(new B(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new B(L.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{H(tt,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);H(tt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Mu(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=S_(),l=I_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");H(tt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=a.createWebChannel(f,u);let g=!1,E=!1;const C=new R2({Io:D=>{E?H(tt,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(g||(H(tt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),H(tt,`RPC '${e}' stream ${s} sending:`,D),m.send(D))},To:()=>m.close()}),x=(D,S,v)=>{D.listen(S,k=>{try{v(k)}catch(N){setTimeout(()=>{throw N},0)}})};return x(m,li.EventType.OPEN,()=>{E||(H(tt,`RPC '${e}' stream ${s} transport opened.`),C.yo())}),x(m,li.EventType.CLOSE,()=>{E||(E=!0,H(tt,`RPC '${e}' stream ${s} transport closed`),C.So())}),x(m,li.EventType.ERROR,D=>{E||(E=!0,_s(tt,`RPC '${e}' stream ${s} transport errored:`,D),C.So(new B(L.UNAVAILABLE,"The operation could not be completed")))}),x(m,li.EventType.MESSAGE,D=>{var S;if(!E){const v=D.data[0];de(!!v);const k=v,N=k.error||((S=k[0])===null||S===void 0?void 0:S.error);if(N){H(tt,`RPC '${e}' stream ${s} received error:`,N);const O=N.status;let j=function(I){const _=De[I];if(_!==void 0)return X_(_)}(O),T=N.message;j===void 0&&(j=L.INTERNAL,T="Unknown error status: "+O+" with message "+N.message),E=!0,C.So(new B(j,T)),m.close()}else H(tt,`RPC '${e}' stream ${s} received:`,v),C.bo(v)}}),x(l,T_.STAT_EVENT,D=>{D.stat===Uc.PROXY?H(tt,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===Uc.NOPROXY&&H(tt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function Lu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(t){return new FI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,n,r,s,i,a,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new uv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Tn(n.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new B(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class k2 extends cv{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=UI(this.serializer,e),r=function(i){if(!("targetChange"in i))return Z.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?tn(a.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Gc(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=qc(u)?{documents:$I(i,u)}:{query:qI(i,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=ev(i,a.resumeToken);const h=Wc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(Z.min())>0){l.readTime=Ja(i,a.snapshotVersion.toTimestamp());const h=Wc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=WI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Gc(this.serializer),n.removeTarget=e,this.a_(n)}}class P2 extends cv{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return de(!!e.streamToken),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=BI(e.writeResults,e.commitTime),r=tn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Gc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>zI(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new B(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Qc(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(L.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,Qc(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new B(L.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class V2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Tn(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{Mr(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=ee(u);h.L_.add(4),await uo(h),h.q_.set("Unknown"),h.L_.delete(4),await Rl(h)}(this))})}),this.q_=new V2(r,s)}}async function Rl(t){if(Mr(t))for(const e of t.B_)await e(!0)}async function uo(t){for(const e of t.B_)await e(!1)}function hv(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),vd(n)?_d(n):Ds(n).r_()&&yd(n,e))}function gd(t,e){const n=ee(t),r=Ds(n);n.N_.delete(e),r.r_()&&dv(n,e),n.N_.size===0&&(r.r_()?r.o_():Mr(n)&&n.q_.set("Unknown"))}function yd(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ds(t).A_(e)}function dv(t,e){t.Q_.xe(e),Ds(t).R_(e)}function _d(t){t.Q_=new DI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ds(t).start(),t.q_.v_()}function vd(t){return Mr(t)&&!Ds(t).n_()&&t.N_.size>0}function Mr(t){return ee(t).L_.size===0}function fv(t){t.Q_=void 0}async function D2(t){t.q_.set("Online")}async function M2(t){t.N_.forEach((e,n)=>{yd(t,e)})}async function L2(t,e){fv(t),vd(t)?(t.q_.M_(e),_d(t)):t.q_.set("Unknown")}async function O2(t,e,n){if(t.q_.set("Online"),e instanceof Z_&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Za(t,r)}else if(e instanceof _a?t.Q_.Ke(e):e instanceof J_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const r=await lv(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Q_.rt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(h);f&&i.N_.set(h,f.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(Ge.EMPTY_BYTE_STRING,f.snapshotVersion)),dv(i,u);const m=new bn(f.target,u,h,f.sequenceNumber);yd(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await Za(t,r)}}async function Za(t,e,n){if(!oo(e))throw e;t.L_.add(1),await uo(t),t.q_.set("Offline"),n||(n=()=>lv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Rl(t)})}function pv(t,e){return e().catch(n=>Za(t,n,e))}async function Cl(t){const e=ee(t),n=nr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;F2(e);)try{const s=await E2(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,j2(e,s)}catch(s){await Za(e,s)}mv(e)&&gv(e)}function F2(t){return Mr(t)&&t.O_.length<10}function j2(t,e){t.O_.push(e);const n=nr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function mv(t){return Mr(t)&&!nr(t).n_()&&t.O_.length>0}function gv(t){nr(t).start()}async function b2(t){nr(t).p_()}async function U2(t){const e=nr(t);for(const n of t.O_)e.m_(n.mutations)}async function z2(t,e,n){const r=t.O_.shift(),s=cd.from(r,e,n);await pv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Cl(t)}async function B2(t,e){e&&nr(t).V_&&await async function(r,s){if(function(a){return xI(a)&&a!==L.ABORTED}(s.code)){const i=r.O_.shift();nr(r).s_(),await pv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Cl(r)}}(t,e),mv(t)&&gv(t)}async function Vm(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=Mr(n);n.L_.add(3),await uo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Rl(n)}async function $2(t,e){const n=ee(t);e?(n.L_.delete(2),await Rl(n)):e||(n.L_.add(2),await uo(n),n.q_.set("Unknown"))}function Ds(t){return t.K_||(t.K_=function(n,r,s){const i=ee(n);return i.w_(),new k2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:D2.bind(null,t),Ro:M2.bind(null,t),mo:L2.bind(null,t),d_:O2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),vd(t)?_d(t):t.q_.set("Unknown")):(await t.K_.stop(),fv(t))})),t.K_}function nr(t){return t.U_||(t.U_=function(n,r,s){const i=ee(n);return i.w_(),new P2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:b2.bind(null,t),mo:B2.bind(null,t),f_:U2.bind(null,t),g_:z2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Cl(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Ed(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wd(t,e){if(Tn("AsyncQueue",`${e}: ${t}`),oo(t))return new B(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=ui(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new cs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new cs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(){this.W_=new Ae(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ss{constructor(e,n,r,s,i,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ss(e,n,cs.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class H2{constructor(){this.queries=Dm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ee(n),i=s.queries;s.queries=Dm(),i.forEach((a,l)=>{for(const u of l.j_)u.onError(r)})})(this,new B(L.ABORTED,"Firestore shutting down"))}}function Dm(){return new Ns(t=>F_(t),vl)}async function yv(t,e){const n=ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new q2,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=wd(a,`Initialization of query '${zr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Td(n)}async function _v(t,e){const n=ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function W2(t,e){const n=ee(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.j_)l.X_(s)&&(r=!0);a.z_=s}}r&&Td(n)}function Q2(t,e,n){const r=ee(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Td(t){t.Y_.forEach(e=>{e.next()})}var Xc,Mm;(Mm=Xc||(Xc={})).ea="default",Mm.Cache="cache";class vv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ss(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ss.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Xc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e){this.key=e}}class wv{constructor(e){this.key=e}}class K2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=j_(e),this.Ra=new cs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Nm,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),E=El(this.query,m)?m:null,C=!!g&&this.mutatedKeys.has(g.key),x=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let D=!1;g&&E?g.data.isEqual(E.data)?C!==x&&(r.track({type:3,doc:E}),D=!0):this.ga(g,E)||(r.track({type:2,doc:E}),D=!0,(u&&this.Aa(E,u)>0||h&&this.Aa(E,h)<0)&&(l=!0)):!g&&E?(r.track({type:0,doc:E}),D=!0):g&&!E&&(r.track({type:1,doc:g}),D=!0,(u||h)&&(l=!0)),D&&(E?(a=a.add(E),i=x?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,m)=>function(E,C){const x=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return x(E)-x(C)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,a.length!==0||h?{snapshot:new Ss(this.query,e.Ra,i,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Nm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new wv(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Ev(r))}),n}ba(e){this.Ta=e.Ts,this.da=ne();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ss.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class G2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Y2{constructor(e){this.key=e,this.va=!1}}class X2{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ns(l=>F_(l),vl),this.Ma=new Map,this.xa=new Set,this.Oa=new Ae(Q.comparator),this.Na=new Map,this.La=new fd,this.Ba={},this.ka=new Map,this.qa=Is.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function J2(t,e,n=!0){const r=Cv(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Tv(r,e,n,!0),s}async function Z2(t,e){const n=Cv(t);await Tv(n,e,!0,!1)}async function Tv(t,e,n,r){const s=await w2(t.localStore,en(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await eS(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&hv(t.remoteStore,s),l}async function eS(t,e,n,r,s){t.Ka=(m,g,E)=>async function(x,D,S,v){let k=D.view.ma(S);k.ns&&(k=await km(x.localStore,D.query,!1).then(({documents:T})=>D.view.ma(T,k)));const N=v&&v.targetChanges.get(D.targetId),O=v&&v.targetMismatches.get(D.targetId)!=null,j=D.view.applyChanges(k,x.isPrimaryClient,N,O);return Om(x,D.targetId,j.wa),j.snapshot}(t,m,g,E);const i=await km(t.localStore,e,!0),a=new K2(e,i.Ts),l=a.ma(i.documents),u=lo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=a.applyChanges(l,t.isPrimaryClient,u);Om(t,n,h.wa);const f=new G2(e,n,a);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function tS(t,e,n){const r=ee(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!vl(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Yc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&gd(r.remoteStore,s.targetId),Jc(r,s.targetId)}).catch(io)):(Jc(r,s.targetId),await Yc(r.localStore,s.targetId,!0))}async function nS(t,e){const n=ee(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gd(n.remoteStore,r.targetId))}async function rS(t,e,n){const r=cS(t);try{const s=await function(a,l){const u=ee(a),h=je.now(),f=l.reduce((E,C)=>E.add(C.key),ne());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let C=In(),x=ne();return u.cs.getEntries(E,f).next(D=>{C=D,C.forEach((S,v)=>{v.isValidDocument()||(x=x.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,C)).next(D=>{m=D;const S=[];for(const v of l){const k=AI(v,m.get(v.key).overlayedDocument);k!=null&&S.push(new ar(v.key,k,P_(k.value.mapValue),ct.exists(!0)))}return u.mutationQueue.addMutationBatch(E,h,S,l)}).next(D=>{g=D;const S=D.applyToLocalDocumentSet(m,x);return u.documentOverlayCache.saveOverlays(E,D.batchId,S)})}).then(()=>({batchId:g.batchId,changes:U_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Ba[a.currentUser.toKey()];h||(h=new Ae(le)),h=h.insert(l,u),a.Ba[a.currentUser.toKey()]=h}(r,s.batchId,n),await co(r,s.changes),await Cl(r.remoteStore)}catch(s){const i=wd(s,"Failed to persist write");n.reject(i)}}async function Iv(t,e){const n=ee(t);try{const r=await _2(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(de(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?de(a.va):s.removedDocuments.size>0&&(de(a.va),a.va=!1))}),await co(n,r,e)}catch(r){await io(r)}}function Lm(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const l=a.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=ee(a);u.onlineState=l;let h=!1;u.queries.forEach((f,m)=>{for(const g of m.j_)g.Z_(l)&&(h=!0)}),h&&Td(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sS(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new Ae(Q.comparator);a=a.insert(i,st.newNoDocument(i,Z.min()));const l=ne().add(i),u=new Sl(Z.min(),new Map,new Ae(le),a,l);await Iv(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Id(r)}else await Yc(r.localStore,e,!1).then(()=>Jc(r,e,n)).catch(io)}async function iS(t,e){const n=ee(t),r=e.batch.batchId;try{const s=await y2(n.localStore,e);Av(n,r,null),Sv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await co(n,s)}catch(s){await io(s)}}async function oS(t,e,n){const r=ee(t);try{const s=await function(a,l){const u=ee(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(de(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);Av(r,e,n),Sv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await co(r,s)}catch(s){await io(s)}}function Sv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Av(t,e,n){const r=ee(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Jc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Rv(t,r)})}function Rv(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(gd(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Id(t))}function Om(t,e,n){for(const r of n)r instanceof Ev?(t.La.addReference(r.key,e),aS(t,r)):r instanceof wv?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Rv(t,r.key)):X()}function aS(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),Id(t))}function Id(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(ve.fromString(e)),r=t.qa.next();t.Na.set(r,new Y2(n)),t.Oa=t.Oa.insert(n,r),hv(t.remoteStore,new bn(en(ld(n.path)),r,"TargetPurposeLimboResolution",nd.oe))}}async function co(t,e,n){const r=ee(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{a.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=md.Wi(u.targetId,h);i.push(m)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,h){const f=ee(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(h,g=>F.forEach(g.$i,E=>f.persistence.referenceDelegate.addReference(m,g.targetId,E)).next(()=>F.forEach(g.Ui,E=>f.persistence.referenceDelegate.removeReference(m,g.targetId,E)))))}catch(m){if(!oo(m))throw m;H("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const E=f.os.get(g),C=E.snapshotVersion,x=E.withLastLimboFreeSnapshotVersion(C);f.os=f.os.insert(g,x)}}}(r.localStore,i))}async function lS(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await av(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new B(L.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await co(n,r.hs)}}function uS(t,e){const n=ee(t),r=n.Na.get(e);if(r&&r.va)return ne().add(r.key);{let s=ne();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function Cv(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Iv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sS.bind(null,e),e.Ca.d_=W2.bind(null,e.eventManager),e.Ca.$a=Q2.bind(null,e.eventManager),e}function cS(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oS.bind(null,e),e}class el{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Al(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return g2(this.persistence,new p2,e.initialUser,this.serializer)}Ga(e){return new h2(pd.Zr,this.serializer)}Wa(e){return new I2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}el.provider={build:()=>new el};class Zc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lS.bind(null,this.syncEngine),await $2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new H2}()}createDatastore(e){const n=Al(e.databaseInfo.databaseId),r=function(i){return new C2(i)}(e.databaseInfo);return function(i,a,l,u){return new x2(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new N2(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Lm(this.syncEngine,n,0),function(){return xm.D()?new xm:new S2}())}createSyncEngine(e,n){return function(s,i,a,l,u,h,f){const m=new X2(s,i,a,l,u,h);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ee(s);H("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await uo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Zc.provider={build:()=>new Zc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Tn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=nt.UNAUTHENTICATED,this.clientId=R_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{H("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(H("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=wd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ou(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await av(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Fm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await dS(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Vm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Vm(e.remoteStore,s)),t._onlineComponents=e}async function dS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ou(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;_s("Error using user provided cache. Falling back to memory cache: "+n),await Ou(t,new el)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await Ou(t,new el);return t._offlineComponents}async function Pv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await Fm(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await Fm(t,new Zc))),t._onlineComponents}function fS(t){return Pv(t).then(e=>e.syncEngine)}async function eh(t){const e=await Pv(t),n=e.eventManager;return n.onListen=J2.bind(null,e.syncEngine),n.onUnlisten=tS.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Z2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nS.bind(null,e.syncEngine),n}function pS(t,e,n={}){const r=new Yn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,h){const f=new kv({next:g=>{f.Za(),a.enqueueAndForget(()=>_v(i,m)),g.fromCache&&u.source==="server"?h.reject(new B(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new vv(l,f,{includeMetadataChanges:!0,_a:!0});return yv(i,m)}(await eh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t,e,n){if(!n)throw new B(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mS(t,e,n,r){if(e===!0&&r===!0)throw new B(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bm(t){if(!Q.isDocumentKey(t))throw new B(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Um(t){if(Q.isDocumentKey(t))throw new B(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function Rt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kl(t);throw new B(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new LT;switch(r.type){case"firstParty":return new bT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jm.get(n);r&&(H("ComponentProvider","Removing Datastore"),jm.delete(n),r.terminate())}(this),Promise.resolve()}}function gS(t,e,n,r={}){var s;const i=(t=Rt(t,Pl))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&_s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=nt.MOCK_USER;else{l=p1(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new B(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new nt(h)}t._authCredentials=new OT(new A_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new kn(this.firestore,e,this._query)}}class ht{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}}class Xn extends kn{constructor(e,n,r){super(e,n,ld(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new Q(e))}withConverter(e){return new Xn(this.firestore,e,this._path)}}function rn(t,e,...n){if(t=bt(t),Vv("collection","path",e),t instanceof Pl){const r=ve.fromString(e,...n);return Um(r),new Xn(t,null,r)}{if(!(t instanceof ht||t instanceof Xn))throw new B(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Um(r),new Xn(t.firestore,null,r)}}function se(t,e,...n){if(t=bt(t),arguments.length===1&&(e=R_.newId()),Vv("doc","path",e),t instanceof Pl){const r=ve.fromString(e,...n);return bm(r),new ht(t,null,new Q(r))}{if(!(t instanceof ht||t instanceof Xn))throw new B(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return bm(r),new ht(t.firestore,t instanceof Xn?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new uv(this,"async_queue_retry"),this.Vu=()=>{const r=Lu();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Lu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Lu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Yn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!oo(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw Tn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Ed.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function $m(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Sn extends Pl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Bm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bm(e),this._firestoreClient=void 0,await e}}}function yS(t,e){const n=typeof t=="object"?t:IT(),r=typeof t=="string"?t:"(default)",s=vT(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=d1("firestore");i&&gS(s,...i)}return s}function xl(t){if(t._terminated)throw new B(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_S(t),t._firestoreClient}function _S(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,f){return new JT(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,xv(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new hS(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this._byteString=e}static fromBase64String(e){try{return new As(Ge.fromBase64String(e))}catch(n){throw new B(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new As(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=/^__.*__$/;class ES{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new ao(e,this.data,n,this.fieldTransforms)}}class Nv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ar(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Dv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class Vl{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Vl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return tl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Dv(this.Cu)&&vS.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class wS{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Al(e)}Qu(e,n,r,s=!1){return new Vl({Cu:e,methodName:n,qu:r,path:He.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function po(t){const e=t._freezeSettings(),n=Al(t._databaseId);return new wS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Rd(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Pd("Data must be an object, but it was:",a,r);const l=Ov(r,a);let u,h;if(i.merge)u=new St(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=th(e,m,n);if(!a.contains(g))throw new B(L.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);jv(f,g)||f.push(g)}u=new St(f),h=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=a.fieldTransforms;return new ES(new mt(l),u,h)}class mo extends fo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mo}}function TS(t,e,n){return new Vl({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Cd extends fo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=TS(this,e,!0),r=this.Ku.map(i=>Ms(i,n)),s=new Ts(r);return new K_(e.path,s)}isEqual(e){return e instanceof Cd&&Ha(this.Ku,e.Ku)}}class kd extends fo{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Ji(e.serializer,$_(e.serializer,this.$u));return new K_(e.path,n)}isEqual(e){return e instanceof kd&&this.$u===e.$u}}function Mv(t,e,n,r){const s=t.Qu(1,e,n);Pd("Data must be an object, but it was:",s,r);const i=[],a=mt.empty();Dr(r,(u,h)=>{const f=xd(e,u,n);h=bt(h);const m=s.Nu(f);if(h instanceof mo)i.push(f);else{const g=Ms(h,m);g!=null&&(i.push(f),a.set(f,g))}});const l=new St(i);return new Nv(a,l,s.fieldTransforms)}function Lv(t,e,n,r,s,i){const a=t.Qu(1,e,n),l=[th(e,r,n)],u=[s];if(i.length%2!=0)throw new B(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(th(e,i[g])),u.push(i[g+1]);const h=[],f=mt.empty();for(let g=l.length-1;g>=0;--g)if(!jv(h,l[g])){const E=l[g];let C=u[g];C=bt(C);const x=a.Nu(E);if(C instanceof mo)h.push(E);else{const D=Ms(C,x);D!=null&&(h.push(E),f.set(E,D))}}const m=new St(h);return new Nv(f,m,a.fieldTransforms)}function IS(t,e,n,r=!1){return Ms(n,t.Qu(r?4:3,e))}function Ms(t,e){if(Fv(t=bt(t)))return Pd("Unsupported field value:",e,t),Ov(t,e);if(t instanceof fo)return function(r,s){if(!Dv(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=Ms(l,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $_(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=je.fromDate(r);return{timestampValue:Ja(s.serializer,i)}}if(r instanceof je){const i=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ja(s.serializer,i)}}if(r instanceof Sd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof As)return{bytesValue:ev(s.serializer,r._byteString)};if(r instanceof ht){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:dd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ad)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return ud(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${kl(r)}`)}(t,e)}function Ov(t,e){const n={};return C_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dr(t,(r,s)=>{const i=Ms(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Fv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof Sd||t instanceof As||t instanceof ht||t instanceof fo||t instanceof Ad)}function Pd(t,e,n){if(!Fv(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=kl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function th(t,e,n){if((e=bt(e))instanceof ho)return e._internalPath;if(typeof e=="string")return xd(t,e);throw tl("Field path arguments must be of type string or ",t,!1,void 0,n)}const SS=new RegExp("[~\\*/\\[\\]]");function xd(t,e,n){if(e.search(SS)>=0)throw tl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ho(...e.split("."))._internalPath}catch{throw tl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tl(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new B(L.INVALID_ARGUMENT,l+t+u)}function jv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Nl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AS extends bv{data(){return super.data()}}function Nl(t,e){return typeof e=="string"?xd(t,e):e instanceof ho?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vd{}class Nd extends Vd{}function Lt(t,e,...n){let r=[];e instanceof Vd&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof Dd).length,l=i.filter(u=>u instanceof Dl).length;if(a>1||a>0&&l>0)throw new B(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Dl extends Nd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Dl(e,n,r)}_apply(e){const n=this._parse(e);return zv(e._query,n),new kn(e.firestore,e.converter,Hc(e._query,n))}_parse(e){const n=po(e.firestore);return function(i,a,l,u,h,f,m){let g;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new B(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Hm(m,f);const E=[];for(const C of m)E.push(qm(u,i,C));g={arrayValue:{values:E}}}else g=qm(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Hm(m,f),g=IS(l,a,m,f==="in"||f==="not-in");return Le.create(h,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ri(t,e,n){const r=e,s=Nl("where",t);return Dl._create(s,r,n)}class Dd extends Vd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Kt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)zv(a,u),a=Hc(a,u)}(e._query,n),new kn(e.firestore,e.converter,Hc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Md extends Nd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Md(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new B(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yi(i,a)}(e._query,this._field,this._direction);return new kn(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Vs(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function rr(t,e="asc"){const n=e,r=Nl("orderBy",t);return Md._create(r,n)}class Ld extends Nd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ld(e,n,r)}_apply(e){return new kn(e.firestore,e.converter,Ya(e._query,this._limit,this._limitType))}}function RS(t){return Ld._create("limit",t,"F")}function qm(t,e,n){if(typeof(n=bt(n))=="string"){if(n==="")throw new B(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!O_(e)&&n.indexOf("/")!==-1)throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!Q.isDocumentKey(r))throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hm(t,new Q(r))}if(n instanceof ht)return hm(t,n._key);throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kl(n)}.`)}function Hm(t,e){if(!Array.isArray(t)||t.length===0)throw new B(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zv(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class CS{convertValue(e,n="none"){switch(xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Dr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Ve(a.doubleValue));return new Ad(i)}convertGeoPoint(e){return new Sd(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qi(e));default:return null}}convertTimestamp(e){const n=tr(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);de(ov(r));const s=new Ki(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(n)||Tn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bv extends bv{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new va(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Nl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class va extends Bv{data(e={}){return super.data(e)}}class $v{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new hi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new va(this._firestore,this._userDataWriter,r.key,r,new hi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new va(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new va(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:kS(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function kS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class Fd extends CS{constructor(e){super(),this.firestore=e}convertBytes(e){return new As(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}function qr(t){t=Rt(t,kn);const e=Rt(t.firestore,Sn),n=xl(e),r=new Fd(e);return Uv(t._query),pS(n,t._query).then(s=>new $v(e,r,t,s))}function fA(t,e,n){t=Rt(t,ht);const r=Rt(t.firestore,Sn),s=Od(t.converter,e,n);return go(r,[Rd(po(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ct.none())])}function Dt(t,e,n,...r){t=Rt(t,ht);const s=Rt(t.firestore,Sn),i=po(s);let a;return a=typeof(e=bt(e))=="string"||e instanceof ho?Lv(i,"updateDoc",t._key,e,n,r):Mv(i,"updateDoc",t._key,e),go(s,[a.toMutation(t._key,ct.exists(!0))])}function Lr(t){return go(Rt(t.firestore,Sn),[new Il(t._key,ct.none())])}function An(t,e){const n=Rt(t.firestore,Sn),r=se(t),s=Od(t.converter,e);return go(n,[Rd(po(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ct.exists(!1))]).then(()=>r)}function Rn(t,...e){var n,r,s;t=bt(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||$m(e[a])||(i=e[a],a++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if($m(e[a])){const m=e[a];e[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[a+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[a+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,h,f;if(t instanceof ht)h=Rt(t.firestore,Sn),f=ld(t._key.path),u={next:m=>{e[a]&&e[a](PS(h,t,m))},error:e[a+1],complete:e[a+2]};else{const m=Rt(t,kn);h=Rt(m.firestore,Sn),f=m._query;const g=new Fd(h);u={next:E=>{e[a]&&e[a](new $v(h,g,m,E))},error:e[a+1],complete:e[a+2]},Uv(t._query)}return function(g,E,C,x){const D=new kv(x),S=new vv(E,D,C);return g.asyncQueue.enqueueAndForget(async()=>yv(await eh(g),S)),()=>{D.Za(),g.asyncQueue.enqueueAndForget(async()=>_v(await eh(g),S))}}(xl(h),f,l,u)}function go(t,e){return function(r,s){const i=new Yn;return r.asyncQueue.enqueueAndForget(async()=>rS(await fS(r),s,i)),i.promise}(xl(t),e)}function PS(t,e,n){const r=n.docs.get(e._key),s=new Fd(t);return new Bv(t,s,e._key,r,new hi(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=po(e)}set(e,n,r){this._verifyNotCommitted();const s=Fu(e,this._firestore),i=Od(s.converter,n,r),a=Rd(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,ct.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Fu(e,this._firestore);let a;return a=typeof(n=bt(n))=="string"||n instanceof ho?Lv(this._dataReader,"WriteBatch.update",i._key,n,r,s):Mv(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(a.toMutation(i._key,ct.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Fu(e,this._firestore);return this._mutations=this._mutations.concat(new Il(n._key,ct.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fu(t,e){if((t=bt(t)).firestore!==e)throw new B(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(){return new mo("deleteField")}function NS(...t){return new Cd("arrayUnion",t)}function ju(t){return new kd("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){return xl(t=Rt(t,Sn)),new xS(t,e=>go(t,e))}(function(e,n=!0){(function(s){xs=s})(TT),Qa(new qi("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Sn(new FT(r.getProvider("auth-internal")),new zT(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new B(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ki(h.options.projectId,f)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),us(om,"4.7.3",e),us(om,"4.7.3","esm2017")})();const DS={apiKey:"AIzaSyB6-Z_XRfCHWQ3ujGzkj4ck1WtI9gX6O_k",authDomain:"cafestesiaapp.firebaseapp.com",projectId:"cafestesiaapp",storageBucket:"cafestesiaapp.firebasestorage.app",messagingSenderId:"639191492553",appId:"1:639191492553:web:dc6ce00f5622dc686faa18",measurementId:"G-Z52JP10C1R"},MS=g_(DS),Y=yS(MS),hn=rn(Y,"tasks"),LS=rn(Y,"task_templates"),OS=()=>{const[t,e]=q.useState([]);q.useEffect(()=>{const E=Lt(hn),C=Rn(E,x=>{const D=x.docs.map(S=>({id:S.id,...S.data()}));e(D)},x=>{console.error("Error fetching Kanban tasks:",x)});return()=>C()},[]);const n=async(E,C)=>{const x=se(Y,"tasks",E);try{await Dt(x,{status:C})}catch(D){console.error("Error updating task status:",D)}},r=async E=>{try{await An(hn,{...E,status:"todo"})}catch(C){console.error("Error adding task:",C)}},s=async E=>{try{const C=Tt(Y),x=`rec-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;E.forEach(D=>{const S=se(hn);C.set(S,{...D,status:"todo",recurrenceId:x})}),await C.commit()}catch(C){console.error("Error adding multiple tasks:",C)}},i=async E=>{const{id:C,...x}=E,D=se(Y,"tasks",C),S=x;"recurrenceId"in x||(S.recurrenceId=VS());try{await Dt(D,S)}catch(v){console.error("Error updating task:",v)}},a=async E=>{const C=se(Y,"tasks",E);try{await Lr(C)}catch(x){console.error("Error deleting task:",x)}},l=async(E,C)=>{if(!E.recurrenceId||!E.date)return;const x=Lt(hn,ri("recurrenceId","==",E.recurrenceId),ri("date",">=",E.date));try{const D=await qr(x),S=Tt(Y);D.forEach(v=>{const k=se(Y,"tasks",v.id),{recurrenceId:N,...O}=C;S.update(k,O)}),await S.commit()}catch(D){console.error("Error updating future tasks:",D)}},u=async E=>{if(!E.recurrenceId||!E.date)return;const C=Lt(hn,ri("recurrenceId","==",E.recurrenceId),ri("date",">=",E.date));try{const x=await qr(C),D=Tt(Y);x.forEach(S=>{D.delete(se(Y,"tasks",S.id))}),await D.commit()}catch(x){console.error("Error deleting future tasks:",x)}},h=async(E,C)=>{const x=t.find(k=>k.id===E),D=t.find(k=>k.id===C);if(!x||!D||!x.time||!D.time||x.date!==D.date){console.error("Cannot reorder tasks: invalid tasks or different dates.");return}const S=se(Y,"tasks",E),v=se(Y,"tasks",C);try{const k=Tt(Y);k.update(S,{time:D.time}),k.update(v,{time:x.time}),await k.commit()}catch(k){console.error("Error reordering tasks:",k)}},f=async()=>{try{const E=await qr(hn),C=Tt(Y);E.docs.forEach(x=>{C.delete(x.ref)}),await C.commit(),console.log("All tasks cleared.")}catch(E){throw console.error("Error clearing tasks:",E),E}},m=async()=>{try{await f();const E=Tt(Y);n1.forEach(C=>{const x=se(hn);E.set(x,C)}),await E.commit(),console.log("Tasks reset to default.")}catch(E){throw console.error("Error resetting tasks:",E),E}},g=q.useCallback(async E=>{try{const[C,x,D]=E.split("-").map(Number),v=new Date(C,x-1,D).getDay(),k=await qr(LS);if(k.empty)return;const N=Lt(hn,ri("date","==",E)),O=await qr(N),j=new Set(O.docs.map(I=>I.data().templateId).filter(I=>!!I)),T=Tt(Y);let y=0;k.forEach(I=>{var R;const _={id:I.id,...I.data()};if(_.frequencyDays.includes(v)&&!j.has(_.id)){const P=((R=_.customAssignments)==null?void 0:R[String(v)])||_.defaultEmployee,w={text:_.title,employee:P,date:E,time:_.time,duration:_.duration,shift:_.shift,zone:_.zone,isCritical:_.isCritical,status:"todo",subtasks:_.subtasks||[],notes:_.notes||"",templateId:_.id,addedBy:"Sistema (Rutina)"},K=se(hn);T.set(K,w),y++}}),y>0&&(await T.commit(),console.log(`Generated ${y} routine tasks for ${E}`))}catch(C){console.error("Error generating daily routines:",C)}},[]);return{tasks:t,updateTaskStatus:n,addTask:r,addMultipleTasks:s,updateTask:i,deleteTask:a,updateFutureTasks:l,deleteFutureTasks:u,reorderDailyTasks:h,clearAllTasks:f,resetTasksToDefault:m,generateDailyRoutines:g}},nh=rn(Y,"inventory"),Wm=rn(Y,"stock_logs"),FS=async()=>{console.log("Seeding initial inventory to Firestore...");const t=Tt(Y);l_.forEach(e=>{const n=se(nh);t.set(n,{...e,purchaseHistory:[]})}),await t.commit(),console.log("Initial inventory seeded.")},jS=()=>{const[t,e]=q.useState([]),[n,r]=q.useState([]);q.useEffect(()=>{const f=Lt(nh,rr("name")),m=Rn(f,g=>{if(g.empty&&l_.length>0){FS();return}const E=g.docs.map(C=>({id:C.id,...C.data()}));e(E)},g=>{console.error("Error fetching inventory items:",g)});return()=>m()},[]),q.useEffect(()=>{const f=Lt(Wm,rr("date","desc"),RS(100)),m=Rn(f,g=>{const E=g.docs.map(C=>({id:C.id,...C.data()}));r(E)},g=>{console.error("Error fetching stock logs:",g)});return()=>m()},[]);const s=async f=>{try{await An(nh,{...f,purchaseHistory:[]})}catch(m){console.error("Error adding inventory item:",m)}},i=async f=>{const{id:m,...g}=f,E=se(Y,"inventory",m);try{await Dt(E,g)}catch(C){console.error("Error updating item:",C)}},a=async f=>{const m=se(Y,"inventory",f);try{await Lr(m)}catch(g){console.error("Error deleting item:",g)}},l=(f,m,g,E,C,x,D)=>{const S=se(Wm),v={id:S.id,date:new Date().toISOString(),itemId:m.id,itemName:m.name,quantityChange:g,unit:m.unit,type:E,responsible:C,reason:x||"",recipeName:D},{id:k,...N}=v,O=JSON.parse(JSON.stringify(N));f.set(S,O)};return{items:t,stockLogs:n,addItem:s,updateItem:i,deleteItem:a,recordStockChange:async({itemId:f,change:m,purchaseDetails:g,responsible:E,reason:C})=>{const x=t.find(v=>v.id===f);if(!x)return;const D=se(Y,"inventory",f),S=Tt(Y);try{const v={currentStock:ju(m)};let k="adjustment";if(g&&m>0){k="purchase";const N={id:`pur-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,date:new Date().toISOString(),quantity:m,totalPrice:g.totalPrice,providerName:g.providerName};v.purchaseHistory=NS(N)}else m<0&&(C!=null&&C.toLowerCase().includes("merma"))&&(k="waste");S.update(D,v),l(S,x,m,k,E,C||(k==="purchase"?`Compra a ${g==null?void 0:g.providerName}`:"Ajuste manual")),await S.commit()}catch(v){console.error("Error recording stock change:",v)}},produceBatch:async(f,m,g,E)=>{const C=Tt(Y);let x=!1;if(f.ingredients&&f.ingredients.length>0&&f.ingredients.forEach(D=>{const S=t.find(v=>v.id===D.inventoryItemId);if(S){const v=D.quantity*m,k=se(Y,"inventory",S.id);C.update(k,{currentStock:ju(-v)}),l(C,S,-v,"consumption",E,`Produccin de ${f.name}`,f.name),x=!0}}),f.outputInventoryItemId){const D=t.find(v=>v.id===f.outputInventoryItemId),S=g;if(D&&S>0){const v=se(Y,"inventory",D.id);C.update(v,{currentStock:ju(S)}),l(C,D,S,"production",E,"Lote finalizado",f.name),x=!0}}if(x)try{return await C.commit(),console.log(`Batch produced for ${f.name} by ${E}`),!0}catch(D){return console.error("Error producing batch:",D),!1}return!0}}},rh=rn(Y,"providers"),qv=[{name:"Proveedor A"},{name:"Proveedor B"},{name:"Proveedor C"},{name:"Supermercado"},{name:"Tostador Local"}],bS=async()=>{console.log("Seeding initial providers to Firestore...");const t=Tt(Y);qv.forEach(e=>{const n=se(rh);t.set(n,e)}),await t.commit(),console.log("Initial providers seeded.")},US=()=>{const[t,e]=q.useState([]);return q.useEffect(()=>{const i=Lt(rh,rr("name")),a=Rn(i,l=>{if(l.empty&&qv.length>0){bS();return}const u=l.docs.map(h=>({id:h.id,...h.data()}));e(u)},l=>{console.error("Error fetching providers:",l)});return()=>a()},[]),{providers:t,addProvider:async i=>{try{await An(rh,i)}catch(a){console.error("Error adding provider:",a)}},updateProvider:async i=>{const{id:a,...l}=i,u=se(Y,"providers",a);try{await Dt(u,l)}catch(h){console.error("Error updating provider:",h)}},deleteProvider:async i=>{const a=se(Y,"providers",i);try{await Lr(a)}catch(l){console.error("Error deleting provider:",l)}}}},bu="productionSoundMuted",Uu={start:"/assets/sounds/start.mp3",warning:"/assets/sounds/warning.mp3",alarm:"/assets/sounds/alarm.mp3",success:"/assets/sounds/success.mp3",notification:"/assets/sounds/notification.mp3"};let Ce=null,di={},fi=null;if(typeof window<"u"){if(!window.cafestesiaAudioContext)try{window.cafestesiaAudioContext=new(window.AudioContext||window.webkitAudioContext)}catch(t){console.error("Web Audio API is not supported in this browser.",t)}if(Ce=window.cafestesiaAudioContext||null,Ce&&!window.cafestesiaGainNode){const t=Ce.createGain();t.connect(Ce.destination),window.cafestesiaGainNode=t}fi=window.cafestesiaGainNode||null,window.cafestesiaAudioBuffers||(window.cafestesiaAudioBuffers={}),di=window.cafestesiaAudioBuffers}const zS=()=>{const t=q.useRef(null),[e,n]=q.useState("uninitialized"),[r,s]=q.useState(()=>Object.keys(di).length===Object.keys(Uu).length),[i,a]=q.useState(()=>{try{return localStorage.getItem(bu)==="true"}catch{return!1}});q.useEffect(()=>{localStorage.setItem(bu,String(i)),fi&&Ce&&fi.gain.setTargetAtTime(i?0:1,Ce.currentTime,.01),window.dispatchEvent(new CustomEvent("mute-change",{detail:{isMuted:i}}))},[i]),q.useEffect(()=>{const E=x=>{a(x.detail.isMuted)},C=x=>{x.key===bu&&a(x.newValue==="true")};return window.addEventListener("mute-change",E),window.addEventListener("storage",C),()=>{window.removeEventListener("mute-change",E),window.removeEventListener("storage",C)}},[]),q.useEffect(()=>{let E=!0;return(async()=>{if(!Ce){n("error");return}if(r){n(Ce.state);return}n("loading"),Ce.onstatechange=()=>{E&&n(Ce.state)},n(Ce.state);try{const x=Object.keys(Uu).map(async D=>{if(di[D])return;const S=Uu[D],v=await fetch(S);if(!v.ok)throw new Error(`Failed to fetch sound: ${S}`);const k=await v.arrayBuffer(),N=await Ce.decodeAudioData(k);E&&(di[D]=N)});await Promise.all(x),E&&(s(!0),n(Ce.state))}catch(x){console.error("Error initializing audio buffers:",x),E&&n("error")}})(),()=>{E=!1}},[r]);const l=q.useCallback(async()=>{if(Ce&&Ce.state==="suspended")try{await Ce.resume(),n(Ce.state)}catch(E){console.error("Failed to resume audio context",E),n(Ce.state)}},[]),u=q.useCallback((E,C=!1)=>{if(!Ce||!fi||e==="error"||!r)return;if(Ce.state!=="running"){console.warn(`AudioContext not running (state: ${Ce.state}). Sound '${E}' needs a user gesture.`),l();return}const x=di[E];if(!x){console.warn(`Audio buffer for '${E}' not loaded yet. State: ${e}`);return}C&&h();const D=Ce.createBufferSource();D.buffer=x,D.connect(fi),D.loop=C,D.start(0),C&&(t.current=D)},[e,r,l]),h=q.useCallback(()=>{if(t.current){try{t.current.stop()}catch{}t.current=null}},[]),f=q.useCallback(()=>{l(),a(E=>{const C=!E;return C&&h(),C})},[h,l]);return{isSoundMuted:i,toggleSoundMute:f,unlockAudio:l,isAudioReady:r,isSuspended:e==="suspended",playStart:()=>u("start"),playWarning:()=>u("warning"),playAlarmLoop:()=>u("alarm",!0),stopAlarmLoop:h,playSuccess:()=>u("success"),playNotification:()=>u("notification")}},zu=rn(Y,"production_processes"),BS=(t,e)=>{if(!e||e==="base"||!t.variants)return t.steps;const n=t.variants.find(r=>r.id===e);return n?t.steps.map((r,s)=>{const i=n.stepOverrides[s];return i?{...r,...i}:r}):t.steps},$S=()=>{const[t,e]=q.useState([]),n=q.useRef(null),r=q.useRef(null),{isSoundMuted:s,toggleSoundMute:i,playStart:a,playWarning:l,playAlarmLoop:u,stopAlarmLoop:h,playSuccess:f,unlockAudio:m,isAudioReady:g,playNotification:E,isSuspended:C}=zS(),x=q.useRef(new Set);q.useEffect(()=>{const _=Lt(zu,rr("lastTickTimestamp","asc")),R=Rn(_,P=>{const w=P.docs.map(K=>{const J=K.data();return{id:K.id,...J,_baseStepTimeLeft:J.stepTimeLeft,_baseTotalTimeLeft:J.totalTimeLeft}});e(w)},P=>{console.error("Error syncing production processes:",P)});return()=>R()},[]);const D=q.useCallback(()=>{n.current&&(clearInterval(n.current),n.current=null)},[]),S=q.useCallback(()=>{e(_=>{const R=Date.now();let P=!1;const w=_.map(K=>{if(K.state!=="running")return K;const J=K._baseStepTimeLeft??K.stepTimeLeft,fe=K._baseTotalTimeLeft??K.totalTimeLeft,ue=Math.round((R-K.lastTickTimestamp)/1e3),U=Math.max(0,J-ue),W=Math.max(0,fe-ue);P=!0;const G=`${K.id}-${K.currentStepIndex}`;if(U<=30&&U>28&&!x.current.has(G)&&(l(),setTimeout(()=>l(),700),setTimeout(()=>l(),1400),x.current.add(G)),U===0){if(K.state==="running"){u();const ge=se(Y,"production_processes",K.id);Dt(ge,{state:"alarm",stepTimeLeft:0,totalTimeLeft:W,lastTickTimestamp:R}).catch(ce=>console.error("Error triggering alarm:",ce))}return{...K,state:"alarm",stepTimeLeft:0,totalTimeLeft:W}}return{...K,stepTimeLeft:U,totalTimeLeft:W,_baseStepTimeLeft:J,_baseTotalTimeLeft:fe}});return P?w:_})},[l,u]),v=q.useCallback(()=>{D(),n.current=window.setInterval(S,1e3)},[D,S]),k=t.some(_=>_.state==="running");q.useEffect(()=>(k?v():D(),D),[k,v,D]),q.useEffect(()=>{if(!C&&r.current){const _=r.current;r.current=null;const R=t.find(P=>P.id===_);R&&R.state==="paused"&&R.totalTimeLeft===R.totalTime&&a()}},[C,a,t]);const N=q.useCallback(async(_,R)=>{var U;if(!_)return;const P=BS(_,R),w=P.reduce((W,G)=>W+G.duration,0),K=(U=_.variants)==null?void 0:U.find(W=>W.id===R),J=K?`${_.name} (${K.name})`:_.name,fe=JSON.parse(JSON.stringify(_)),ue={name:J,recipeId:_.id,recipe:fe,type:"baking",state:"paused",currentStepIndex:0,steps:P,totalTime:w,totalTimeLeft:w,stepTimeLeft:P[0].duration,lastTickTimestamp:Date.now(),...R?{variantId:R}:{}};try{await An(zu,ue)}catch(W){console.error("Error starting baking process:",W)}},[]),O=q.useCallback(async(_,R)=>{const w={name:R,type:"heating",state:"paused",currentStepIndex:0,steps:[{instruction:R,duration:_,type:"passive"}],totalTime:_,totalTimeLeft:_,stepTimeLeft:_,lastTickTimestamp:Date.now()};try{await An(zu,w)}catch(K){console.error("Error starting heating process:",K)}},[]),j=q.useCallback(async _=>{h();const R=t.find(K=>K.id===_);if(!R)return;const P=se(Y,"production_processes",_),w={lastTickTimestamp:Date.now()};if(R.state==="finished")w.state="paused";else if(R.currentStepIndex<R.steps.length-1){const K=R.currentStepIndex+1,J=R.steps[K];w.state="intermission",w.currentStepIndex=K,w.stepTimeLeft=J.duration}else f(),w.state="finished",w.stepTimeLeft=0;try{await Dt(P,w)}catch(K){console.error("Error advancing process:",K)}},[t,h,f]),T=q.useCallback(async _=>{h();const R=t.find(P=>P.id===_);if(R&&R.currentStepIndex>0){const P=R.currentStepIndex-1,w=R.steps[P],K=se(Y,"production_processes",_);try{await Dt(K,{state:"paused",currentStepIndex:P,stepTimeLeft:w.duration,lastTickTimestamp:Date.now()})}catch(J){console.error("Error going back:",J)}}},[t,h]),y=q.useCallback(async _=>{const R=t.find(w=>w.id===_);if(!R||R.state==="alarm"||R.state==="finished")return;const P=se(Y,"production_processes",_);if(R.state==="running"){const w=Date.now();try{await Dt(P,{state:"paused",stepTimeLeft:R.stepTimeLeft,totalTimeLeft:R.totalTimeLeft,lastTickTimestamp:w})}catch(K){console.error(K)}}else{C&&(r.current=_,m()),R.state==="paused"&&R.totalTimeLeft===R.totalTime&&a();try{await Dt(P,{state:"running",lastTickTimestamp:Date.now()})}catch(K){console.error(K)}}},[t,C,m,a]),I=q.useCallback(async _=>{h();const R=se(Y,"production_processes",_);try{await Lr(R)}catch(P){console.error("Error deleting process:",P)}},[h]);return{processes:t,startBakingProcess:N,startHeatingProcess:O,advanceProcess:j,goToPreviousStep:T,togglePauseProcess:y,cancelProcess:I,isSoundMuted:s,toggleSoundMute:i,isAudioReady:g,playNotification:E,isSuspended:C,unlockAudio:m}},sh=rn(Y,"categories"),Hv=[{name:"Secos"},{name:"Refrigerados"},{name:"Lcteos"},{name:"Bebidas"},{name:"Carnes"},{name:"Frutas y Verduras"}],qS=async()=>{console.log("Seeding initial categories to Firestore...");const t=Tt(Y);Hv.forEach(e=>{const n=se(sh);t.set(n,e)}),await t.commit(),console.log("Initial categories seeded.")},HS=()=>{const[t,e]=q.useState([]);return q.useEffect(()=>{const i=Lt(sh,rr("name")),a=Rn(i,l=>{if(l.empty&&Hv.length>0){qS();return}const u=l.docs.map(h=>({id:h.id,...h.data()}));e(u)},l=>{console.error("Error fetching categories:",l)});return()=>a()},[]),{categories:t,addCategory:async i=>{try{await An(sh,i)}catch(a){console.error("Error adding category:",a)}},updateCategory:async i=>{const{id:a,...l}=i,u=se(Y,"categories",a);try{await Dt(u,l)}catch(h){console.error("Error updating category:",h)}},deleteCategory:async i=>{const a=se(Y,"categories",i);try{await Lr(a)}catch(l){console.error("Error deleting category:",l)}}}},Qm=rn(Y,"recipeFeedback"),WS=()=>{const[t,e]=q.useState([]);return q.useEffect(()=>{const r=Lt(Qm,rr("date","desc")),s=Rn(r,i=>{const a=i.docs.map(l=>({id:l.id,...l.data()}));e(a)},i=>{console.error("Error fetching recipe feedback:",i)});return()=>s()},[]),{feedbackLog:t,addFeedback:async r=>{try{await An(Qm,{...r,date:new Date().toISOString()})}catch(s){console.error("Error adding feedback:",s)}}}},Km=rn(Y,"users"),QS=()=>{const[t,e]=q.useState([]);return q.useEffect(()=>{const i=Lt(Km,rr("name")),a=Rn(i,l=>{const u=l.docs.map(h=>({id:h.id,...h.data()}));e(u)},l=>{console.error("Error fetching users:",l)});return()=>a()},[]),{users:t,addUser:async i=>{try{await An(Km,i)}catch(a){console.error("Error adding user:",a)}},updateUser:async i=>{const{id:a,...l}=i,u=se(Y,"users",a);try{await Dt(u,l)}catch(h){console.error("Error updating user:",h)}},deleteUser:async i=>{const a=se(Y,"users",i);try{await Lr(a)}catch(l){console.error("Error deleting user:",l)}}}},KS=({onUnlock:t})=>A.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 w-11/12 max-w-md bg-gray-800 text-white rounded-lg shadow-lg p-3 z-50 cursor-pointer transition-transform hover:scale-105 animate-pulse",onClick:t,role:"button",tabIndex:0,"aria-label":"Activar sonidos",children:A.jsxs("div",{className:"flex items-center justify-center gap-3",children:[A.jsx(xt,{name:"volume-x",size:20}),A.jsx("span",{className:"font-semibold text-sm",children:"Toca para activar los sonidos de alerta"})]})}),na=rn(Y,"recipes"),GS=[{name:"Roles de Canela (Horneado)",pluralName:"Roles de Canela listos",setupInstruction:"Configura el horno a 230C y programa 16 minutos.",baseVariantName:"Receta Estndar",baseVariantDescription:"2 charolas (12 piezas)",totalDuration:0,steps:[{duration:2*60,instruction:"Coloca los roles en los niveles 1 y 3. Deja que el calor eleve el producto sin presionar INICIO.",type:"passive"},{duration:6*60,instruction:"Baja la temperatura a 210C y comienza el horneado.",type:"passive"},{duration:4*60,instruction:"Gira las charolas 180 grados.",type:"passive"},{duration:2*60,instruction:"Agrega 20 ml de leche y gira cada rol 1/3 de vuelta en sentido contrario del reloj.",type:"active"},{duration:2*60,instruction:"Vuelve a girar cada rol 1/3 de vuelta para finalizar.",type:"passive"}],variants:[]},{name:"Ciabattas (Horneado)",pluralName:"Ciabattas listas",setupInstruction:"Configura el horno a 230C y programa 30 minutos.",baseVariantName:"Receta Estndar",baseVariantDescription:"2 charolas (8 piezas)",totalDuration:0,steps:[{duration:2*60,instruction:"Coloca las charolas (niveles 1 y 3) y pulveriza agua 12 veces. Deja que el calor eleve el producto sin presionar INICIO.",type:"passive"},{duration:8*60,instruction:"Baja la temperatura a 210C y comienza el horneado.",type:"passive"},{duration:8*60,instruction:"Gira las charolas 180 grados y vuelve a pulverizar agua 12 veces.",type:"passive"},{duration:6*60,instruction:"Intercambia las charolas de nivel y da vuelta a cada pieza 180 grados.",type:"passive"},{duration:6*60,instruction:"Gira las charolas 180 grados por ltima vez.",type:"passive"}],variants:[]},{name:"Croissants (Horneado)",pluralName:"Croissants listos",setupInstruction:"Configura el horno a 230C y programa 21 minutos.",baseVariantName:"Receta Estndar",baseVariantDescription:"2 charolas (12-16 piezas)",totalDuration:0,steps:[{duration:3*60,instruction:"Coloca las charolas en los niveles 1 y 3. Pulveriza agua 12 veces.",type:"passive"},{duration:6*60,instruction:"Baja la temperatura a 200C y continua horneando.",type:"passive"},{duration:5*60,instruction:"Gira las charolas 180 grados.",type:"passive"},{duration:5*60,instruction:"Intercambia las charolas de nivel y gralas 180 grados.",type:"passive"},{duration:2*60,instruction:"Gira las charolas 180 grados por ltima vez.",type:"passive"}],variants:[{id:"var-media-charola",name:"Media Charola",description:"1 charola (6-8 piezas)",stepOverrides:[null,{instruction:"Baja la temperatura a 180C y continua horneando.",type:"passive"},null,null,null]}]},{name:"Masa de Croissants (Proceso Completo)",pluralName:"Masa lista",setupInstruction:"Tener mantequilla fra y laminadora lista.",baseVariantName:"Lote Completo",baseVariantDescription:"22-24 piezas",totalDuration:0,steps:[{duration:15*60,instruction:"Mezclar ingredientes y amasar (fase 1).",type:"active"},{duration:60*60,instruction:"Primera fermentacin / descanso en fro.",type:"passive"},{duration:20*60,instruction:"Laminar mantequilla y dar vueltas (simple y doble).",type:"active"},{duration:45*60,instruction:"Descanso en fro antes de formar.",type:"passive"},{duration:30*60,instruction:"Estirar, cortar tringulos y formar.",type:"active"}],variants:[]},{name:"Galletas (Cookies)",pluralName:"Galletas listas",setupInstruction:"Precalentar horno a 170C. Preparar charolas con papel estrella.",baseVariantName:"Lote Estndar",baseVariantDescription:"20-24 galletas",totalDuration:0,steps:[{duration:10*60,instruction:"Acremar mantequilla y azcares.",type:"active"},{duration:5*60,instruction:"Incorporar huevos y vainilla, luego secos y chocolate.",type:"active"},{duration:15*60,instruction:"Porcionar masa (bolear) y colocar en charolas.",type:"active"},{duration:20*60,instruction:"Congelar las bolas de masa (mejora textura).",type:"passive"},{duration:12*60,instruction:"Hornear a 170C.",type:"passive"},{duration:10*60,instruction:"Dejar enfriar en charola antes de mover.",type:"passive"}],variants:[]},{name:"Masa para Pizza",pluralName:"Masa de Pizza lista",setupInstruction:"Tener harina de fuerza lista y agua fra.",baseVariantName:"Lote 4kg",baseVariantDescription:"Aprox 15 pizzas",totalDuration:0,steps:[{duration:15*60,instruction:"Mezclado y amasado hasta desarrollo de gluten.",type:"active"},{duration:2*60*60,instruction:"Fermentacin en bloque (tapar bien).",type:"passive"},{duration:20*60,instruction:"Dividir, pesar y bolear porciones.",type:"active"},{duration:24*60*60,instruction:"Maduracin en refrigeracin (24 a 48 horas).",type:"passive"}],variants:[]}],YS=()=>{const[t,e]=q.useState([]);return q.useEffect(()=>{const a=Lt(na,rr("name")),l=Rn(a,u=>{u.empty;const h=u.docs.map(f=>({id:f.id,...f.data()}));e(h)},u=>{console.error("Error fetching recipes:",u)});return()=>l()},[]),{recipes:t,addRecipe:async a=>{try{const l=JSON.parse(JSON.stringify(a));await An(na,l)}catch(l){console.error("Error adding recipe:",l)}},updateRecipe:async a=>{const{id:l,...u}=a,h=se(Y,"recipes",l);try{const f=JSON.parse(JSON.stringify(u));await Dt(h,f)}catch(f){console.error("Error updating recipe:",f)}},deleteRecipe:async a=>{const l=se(Y,"recipes",a);try{await Lr(l)}catch(u){console.error("Error deleting recipe:",u)}},resetRecipesToFactory:async()=>{if(window.confirm(` ESTS SEGURO?

Esto BORRAR todas las recetas existentes y volver a cargar las recetas estndar (Pizza, Croissants, Galletas, etc).

Esta accin es ideal si los datos estn desordenados, pero perders recetas personalizadas.`))try{console.log("Resetting recipes...");const a=await qr(na),l=Tt(Y);a.docs.forEach(u=>{l.delete(u.ref)}),GS.forEach(u=>{const h=se(na);l.set(h,u)}),await l.commit(),alert("Recetas restablecidas de fbrica correctamente."),window.location.reload()}catch(a){console.error("Error resetting recipes:",a),alert("Error al restablecer recetas. Revisa la consola.")}}}},Gm=q.lazy(()=>so(()=>import("./BreadProductionScreen-HdY6BktS.js"),__vite__mapDeps([0,1,2,3]))),XS=q.lazy(()=>so(()=>import("./OperationsScreen-CdwQVA_Q.js"),__vite__mapDeps([4,1]))),JS=q.lazy(()=>so(()=>import("./InventoryScreen-BvslYbFN.js"),__vite__mapDeps([5,1,3]))),ZS=q.lazy(()=>so(()=>import("./SettingsScreen-lDgjx_YS.js"),__vite__mapDeps([6,1,7]))),eA=q.lazy(()=>so(()=>import("./BeveragesScreen-CbjcTp1G.js"),__vite__mapDeps([8,7,1,2]))),tA=t=>{const e=new Date,[n,r]=t.split(":").map(Number),s=new Date;return s.setHours(n,r,0,0),Math.round((s.getTime()-e.getTime())/1e3/60)},nA=()=>A.jsx("div",{className:"w-full h-full flex items-center justify-center",children:A.jsx(xt,{name:"refresh-cw",className:"animate-spin text-blue-500",size:48})}),rA=()=>{const[t,e]=q.useState(ke.Baking),[n,r]=q.useState(!1),[s,i]=q.useState(new Date),[a,l]=q.useState(null),u=$S(),h=OS(),f=jS(),m=US(),g=HS(),E=WS(),C=QS(),x=YS(),{processes:D,playNotification:S,isSuspended:v,unlockAudio:k}=u,{tasks:N}=h,{items:O}=f,[j,T]=q.useState({}),y=q.useMemo(()=>{const J=new Date;return J.setMinutes(J.getMinutes()-J.getTimezoneOffset()),J.toISOString().split("T")[0]},[]);q.useEffect(()=>{const J=()=>{const ue={};N.forEach(U=>{if(U.date===y&&U.time&&U.status!=="done"){const W=tA(U.time);let G="normal";W<=0?G="due":W<=15&&(G="imminent"),ue[U.id]={diff:W,status:G}}}),T(ue)};J();const fe=setInterval(J,1e4);return()=>clearInterval(fe)},[N,y]);const I=q.useMemo(()=>N.filter(ue=>ue.date===y&&ue.isCritical&&ue.status!=="done"&&j[ue.id]).map(ue=>({task:ue,diff:j[ue.id].diff})).filter(({diff:ue})=>ue<=30&&ue>=-15).sort((ue,U)=>ue.diff-U.diff),[N,j,y]),_=q.useRef(new Set);q.useEffect(()=>{const J=new Set(I.map(fe=>`task-${fe.task.id}`));J.forEach(fe=>{_.current.has(fe)||(S(),_.current.add(fe))}),_.current.forEach(fe=>{fe.startsWith("task-")&&!J.has(fe)&&_.current.delete(fe)})},[I,S]);const R=J=>{if(J.date){const fe=new Date(J.date);fe.setMinutes(fe.getMinutes()+fe.getTimezoneOffset()),i(fe),l(J.id)}e(ke.Operations)},P=q.useMemo(()=>O.filter(J=>J.currentStock<=J.minStock),[O]),w=q.useMemo(()=>N.filter(J=>J.status==="inprogress"),[N]),K=()=>{switch(t){case ke.Baking:return A.jsx(Gm,{productionHook:u,recipeLogHook:E,recipesHook:x,inventoryHook:f,categoriesHook:g});case ke.Beverages:return A.jsx(eA,{inventoryHook:f});case ke.Operations:return A.jsx(XS,{kanbanHook:h,criticalTasks:I,users:C.users,selectedDate:s,setSelectedDate:i,highlightedTaskId:a,setHighlightedTaskId:l});case ke.Inventory:return A.jsx(JS,{inventoryHook:f,providers:m.providers,categories:g.categories});case ke.Settings:return A.jsx(ZS,{providersHook:m,categoriesHook:g,recipeLogHook:E,usersHook:C,recipesHook:x,inventoryHook:f});default:return A.jsx(Gm,{productionHook:u,recipeLogHook:E,recipesHook:x,inventoryHook:f,categoriesHook:g})}};return A.jsxs("div",{className:"h-screen w-screen bg-gray-100",children:[A.jsxs("div",{className:"flex h-full w-full max-w-7xl mx-auto bg-gray-50 text-gray-800",children:[A.jsx("div",{className:"hidden md:flex md:flex-shrink-0",children:A.jsx(Kp,{activeScreen:t,setActiveScreen:e,processes:D.filter(J=>J.state!=="finished"),urgentTasks:I,shoppingListItems:P,inProgressTasks:w,isOpen:!0,onClose:()=>{},users:C.users,onNavigateToTask:R,setOperationsDate:i,setHighlightedTaskId:l})}),A.jsxs("div",{className:"md:hidden",children:[n&&A.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>r(!1),"aria-hidden":"true"}),A.jsx(Kp,{activeScreen:t,setActiveScreen:e,processes:D.filter(J=>J.state!=="finished"),urgentTasks:I,shoppingListItems:P,inProgressTasks:w,isOpen:n,onClose:()=>r(!1),users:C.users,onNavigateToTask:R,setOperationsDate:i,setHighlightedTaskId:l})]}),A.jsxs("main",{className:"flex-1 flex flex-col relative overflow-hidden",children:[A.jsxs("header",{className:"md:hidden bg-white border-b border-gray-200 p-4 flex justify-start items-center gap-4",children:[A.jsx("button",{onClick:()=>r(!0),children:A.jsx(xt,{name:"menu",size:24})}),A.jsx("h1",{className:"text-xl font-bold text-blue-600",children:"Cafestesia"})]}),A.jsx("div",{className:"flex-1 overflow-y-auto",children:A.jsx(q.Suspense,{fallback:A.jsx(nA,{}),children:K()})})]})]}),v&&A.jsx(KS,{onUnlock:k})]})},Wv=document.getElementById("root");if(!Wv)throw new Error("Could not find root element to mount to");const sA=Bu.createRoot(Wv);sA.render(A.jsx(U0.StrictMode,{children:A.jsx(rA,{})}));export{xt as I,uA as O,U0 as R,lA as T,Y as a,aA as b,oA as c,se as d,iA as e,jS as f,rr as g,rn as h,Lr as i,A as j,Dt as k,An as l,Rn as o,Lt as q,q as r,fA as s,QS as u,ri as w};
