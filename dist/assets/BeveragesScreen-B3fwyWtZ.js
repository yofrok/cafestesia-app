import{r as c,j as e,I as d}from"./index-N136ZzwH.js";import{u as E}from"./useBeverages-oDj8bv5m.js";import{M as T}from"./Modal-CmIz8Wdd.js";import{S as F,P as K}from"./ProductionCompletionModal-DgIqhGg-.js";import{S as U}from"./StockUpdateModal-B4pmG9eM.js";const q=({item:l,index:u,onEdit:m,onDelete:h})=>{const[i,x]=c.useState(0),[o,p]=c.useState(!1),j=c.useRef(0),v=c.useRef(0),b=-100,N=s=>{j.current=s,p(!0)},y=s=>{if(!o)return;const C=s-j.current;if(C<0){const I=Math.max(C,-150);v.current=I,x(I)}},n=()=>{p(!1),v.current<b?(x(-500),setTimeout(()=>h(u),200)):(x(0),v.current=0)},a=s=>N(s.touches[0].clientX),w=s=>y(s.touches[0].clientX),k=s=>N(s.clientX),S=s=>o&&y(s.clientX),g=()=>o&&n(),r=()=>o&&n();return e.jsxs("div",{className:"relative overflow-hidden mb-2 select-none touch-pan-y",children:[e.jsx("div",{className:"absolute inset-0 bg-red-500 rounded-lg flex items-center justify-end pr-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-white font-bold",children:[e.jsx("span",{children:"Borrar"}),e.jsx(d,{name:"trash-2",size:20})]})}),e.jsxs("div",{className:"relative bg-white p-2 border-b border-dashed border-gray-200 flex justify-between items-start transition-transform duration-200 ease-out",style:{transform:`translateX(${i}px)`,transition:o?"none":"transform 0.2s ease-out",cursor:o?"grabbing":"grab"},onTouchStart:a,onTouchMove:w,onTouchEnd:n,onMouseDown:k,onMouseMove:S,onMouseUp:g,onMouseLeave:r,children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsx("p",{className:"font-bold text-gray-800 text-sm md:text-base leading-tight truncate",children:l.beverageName}),l.sizeName&&e.jsxs("span",{className:"text-amber-700 text-xs md:text-sm block truncate",children:["(",l.sizeName,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-1 items-center mt-1",children:[e.jsx("span",{className:`text-[10px] px-1 rounded ${l.type==="food"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:l.type==="food"?"COCINA":"BARRA"}),l.notes&&e.jsxs("span",{className:"text-[10px] px-1 rounded bg-yellow-200 text-yellow-900 font-bold flex items-center gap-1 max-w-full truncate",children:[e.jsx(d,{name:"pencil",size:8})," ",l.notes]})]}),l.modifiers.length>0&&e.jsx("p",{className:"text-[10px] md:text-xs text-blue-600 mt-0.5 truncate",children:l.modifiers.join(", ")})]}),e.jsx("div",{className:"flex flex-col gap-1 flex-shrink-0 mt-0.5",children:e.jsx("button",{onClick:s=>{s.stopPropagation(),m(u)},className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Editar Nota",onMouseDown:s=>s.stopPropagation(),onTouchStart:s=>s.stopPropagation(),children:e.jsx(d,{name:"pencil",size:18})})})]})]})},Q=()=>{var O;const{beverages:l,createOrder:u}=E(),[m,h]=c.useState("beverage"),[i,x]=c.useState("all"),[o,p]=c.useState([]),[j,v]=c.useState(""),[b,N]=c.useState(""),[y,n]=c.useState(null),[a,w]=c.useState(null),[k,S]=c.useState(""),g=c.useMemo(()=>l.filter(t=>t.type===m||!t.type&&m==="beverage"),[l,m]),r=c.useMemo(()=>{const t=new Set(g.map(f=>f.category));return Array.from(t)},[g]),s=c.useMemo(()=>b.trim()?g.filter(t=>t.name.toLowerCase().includes(b.toLowerCase())):i==="all"?g:g.filter(t=>t.category===i),[g,i,b]),C=t=>{h(t),x("all"),N("")},I=t=>{t.hasSizes&&t.sizes&&t.sizes.length>0?n(t):M(t,void 0,t.recipe),N("")},M=(t,f,z)=>{const V={id:`item-${Date.now()}`,beverageId:t.id,beverageName:t.name,type:t.type||"beverage",sizeName:f,modifiers:[],recipeRef:z||t.recipe};p([...o,V]),n(null)},A=()=>{p(t=>t.slice(0,-1))},P=t=>{const f=[...o];f.splice(t,1),p(f)},B=t=>{if(o.length===0)return;const f=[...o],z=f[f.length-1];z.modifiers.includes(t)||(z.modifiers.push(t),p(f))},R=t=>{w(t),S(o[t].notes||"")},L=()=>{if(a===null)return;const t=[...o];t[a].notes=k.trim(),p(t),w(null),S("")},X=()=>{if(o.length===0)return;const t=j.trim()||"Mostrador";u(t,o),v(""),p([])},$=Array.from(new Set(g.flatMap(t=>t.modifiers||[]))).slice(0,6);return e.jsxs("div",{className:"flex flex-col h-full md:flex-row overflow-hidden",children:[e.jsxs("div",{className:"h-[60%] md:h-auto md:flex-1 flex flex-col bg-gray-100 border-r border-gray-200 min-w-0",children:[e.jsxs("div",{className:"p-1 md:p-2 bg-white flex gap-2 border-b border-gray-200 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>C("beverage"),className:`flex-1 py-2 md:py-3 rounded-lg font-bold flex items-center justify-center gap-2 transition-colors text-xs md:text-base ${m==="beverage"?"bg-blue-600 text-white":"bg-gray-100 text-gray-500"}`,children:[e.jsx(d,{name:"star",size:16,className:"md:w-5 md:h-5"}),"Bebidas"]}),e.jsxs("button",{onClick:()=>C("food"),className:`flex-1 py-2 md:py-3 rounded-lg font-bold flex items-center justify-center gap-2 transition-colors text-xs md:text-base ${m==="food"?"bg-orange-500 text-white":"bg-gray-100 text-gray-500"}`,children:[e.jsx(d,{name:"cake-slice",size:16,className:"md:w-5 md:h-5"}),"Comida"]})]}),e.jsx("div",{className:"px-2 pt-2 pb-1 bg-gray-100 flex-shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 md:pl-3 flex items-center pointer-events-none text-gray-400",children:e.jsx(d,{name:"list",size:16,className:"md:w-[18px]"})}),e.jsx("input",{type:"text",value:b,onChange:t=>N(t.target.value),placeholder:"Buscar...",className:"w-full pl-8 md:pl-10 pr-8 py-1.5 md:py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-sm"}),b&&e.jsx("button",{onClick:()=>N(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:e.jsx(d,{name:"x",size:16})})]})}),!b&&e.jsxs("div",{className:"flex gap-1 md:gap-2 p-1 md:p-2 bg-gray-100 overflow-x-auto flex-shrink-0 custom-scrollbar",children:[e.jsx("button",{onClick:()=>x("all"),className:`px-3 py-1.5 md:px-4 md:py-2 rounded-full font-bold capitalize flex-shrink-0 transition-colors border text-xs md:text-sm ${i==="all"?"bg-gray-700 text-white border-gray-700":"bg-white text-gray-600 border-gray-300"}`,children:"Todos"}),r.map(t=>e.jsx("button",{onClick:()=>x(t),className:`px-3 py-1.5 md:px-4 md:py-2 rounded-full font-bold capitalize flex-shrink-0 transition-colors border text-xs md:text-sm ${i===t?"bg-gray-700 text-white border-gray-700":"bg-white text-gray-600 border-gray-300"}`,children:t},t))]}),e.jsx("div",{className:"p-2 md:p-3 grid grid-cols-3 md:grid-cols-3 lg:grid-cols-4 gap-2 md:gap-3 overflow-y-auto content-start flex-grow",children:s.length>0?s.map(t=>e.jsxs("button",{onClick:()=>I(t),className:"bg-white p-1 md:p-4 h-20 md:h-28 rounded-lg shadow-sm border border-gray-200 hover:border-amber-500 hover:shadow-md transition-all flex flex-col items-center justify-center text-center active:scale-95 relative",children:[e.jsx("span",{className:"font-bold text-gray-800 leading-none text-xs md:text-base line-clamp-3",children:t.name}),t.hasSizes&&e.jsx("span",{className:"absolute top-1 right-1 text-[9px] md:text-[10px] bg-gray-100 text-gray-500 px-1 rounded",children:"Var"})]},t.id)):e.jsx("div",{className:"col-span-full text-center py-10 text-gray-400",children:e.jsx("p",{children:"No se encontraron productos."})})}),o.length>0&&$.length>0&&e.jsx("div",{className:"p-2 bg-gray-200 flex gap-2 overflow-x-auto flex-shrink-0",children:$.map(t=>e.jsxs("button",{onClick:()=>B(t),className:"px-2 py-1.5 md:px-3 md:py-2 bg-white rounded-full text-[10px] md:text-xs font-bold text-gray-700 border border-gray-300 shadow-sm hover:bg-blue-50 active:bg-blue-100 whitespace-nowrap",children:["+ ",t]},t))})]}),e.jsxs("div",{className:"h-[40%] md:h-auto w-full md:w-80 bg-white flex flex-col flex-shrink-0 border-l border-gray-200 shadow-xl z-10 overflow-hidden",children:[e.jsx("div",{className:"p-2 md:p-4 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:e.jsx("input",{type:"text",value:j,onChange:t=>v(t.target.value),placeholder:"Nombre / Mesa",className:"w-full p-2 border border-gray-300 rounded-md text-sm md:text-lg font-semibold"})}),e.jsx("div",{className:"flex-grow overflow-y-auto p-2 md:p-4 custom-scrollbar",children:o.length===0?e.jsxs("div",{className:"text-center text-gray-400 mt-6 md:mt-10",children:[e.jsx(d,{name:"shopping-cart",size:32,className:"mx-auto mb-2 opacity-20"}),e.jsx("p",{className:"text-xs md:text-sm",children:"Ticket vacío"})]}):o.map((t,f)=>e.jsx(q,{item:t,index:f,onEdit:R,onDelete:P},`${t.id}-${f}`))}),e.jsxs("div",{className:"p-2 md:p-4 bg-gray-50 border-t border-gray-200 grid grid-cols-2 gap-2 md:gap-3 flex-shrink-0",children:[e.jsxs("button",{onClick:A,disabled:o.length===0,className:"py-2 md:py-3 bg-gray-200 text-gray-600 font-bold rounded-lg disabled:opacity-50 flex items-center justify-center text-xs md:text-sm",children:[e.jsx(d,{name:"rotate-ccw",className:"mr-1",size:16}),"Deshacer"]}),e.jsxs("button",{onClick:X,disabled:o.length===0,className:"py-2 md:py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 shadow-md disabled:opacity-50 flex items-center justify-center gap-2 text-sm md:text-base",children:[e.jsx("span",{children:"ENVIAR"}),e.jsx(d,{name:"play-circle",size:18})]})]})]}),y&&e.jsx(T,{isOpen:!!y,onClose:()=>n(null),title:`Variante para: ${y.name}`,children:e.jsxs("div",{className:"flex flex-col gap-3",children:[(O=y.sizes)==null?void 0:O.map((t,f)=>e.jsx("button",{onClick:()=>M(y,t.name,t.recipe),className:"p-4 bg-blue-50 border border-blue-200 rounded-xl text-blue-800 font-bold text-lg hover:bg-blue-100 transition-colors",children:t.name},f)),e.jsx("button",{onClick:()=>n(null),className:"p-3 mt-2 bg-gray-100 text-gray-600 rounded-lg font-semibold",children:"Cancelar"})]})}),a!==null&&e.jsx(T,{isOpen:a!==null,onClose:()=>w(null),title:"Nota para cocina/barra",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Agrega detalles especiales para: ",e.jsx("span",{className:"font-bold",children:o[a].beverageName})]}),e.jsx("input",{type:"text",value:k,onChange:t=>S(t.target.value),placeholder:"Ej: Sin cebolla, leche deslactosada, extra caliente...",autoFocus:!0,className:"w-full p-3 border border-gray-300 rounded-lg text-lg"}),e.jsxs("div",{className:"flex gap-3 mt-2",children:[e.jsx("button",{onClick:()=>w(null),className:"flex-1 py-3 bg-gray-100 text-gray-700 font-bold rounded-lg",children:"Cancelar"}),e.jsx("button",{onClick:L,className:"flex-1 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700",children:"Guardar Nota"})]})]})})]})},G=({timestamp:l})=>{const[u,m]=c.useState(0);c.useEffect(()=>{const i=()=>m(Math.floor((Date.now()-l)/6e4));i();const x=setInterval(i,6e4);return()=>clearInterval(x)},[l]);let h="bg-green-100 text-green-800";return u>=5&&(h="bg-yellow-100 text-yellow-800"),u>=10&&(h="bg-red-100 text-red-800 animate-pulse"),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${h}`,children:[u," min"]})},D=({type:l,inventoryHook:u})=>{const{activeOrders:m,completeOrder:h,cancelOrder:i,beverages:x}=E(),{recordStockChange:o}=u,[p,j]=c.useState(null),v=c.useMemo(()=>m.filter(n=>n.items.some(a=>(a.type||"beverage")===l)),[m,l]),b=n=>{n.items.forEach(a=>{if((a.type||"beverage")!==l)return;const k=x.find(s=>s.id===a.beverageId);if(!(k!=null&&k.stockConfig))return;const{mode:S,directItemId:g,ingredients:r}=k.stockConfig;S==="direct"&&g?o({itemId:g,change:-1,responsible:"KDS System",reason:`Venta: ${a.beverageName}`}):S==="recipe"&&r&&r.forEach(s=>{s.quantity>0&&o({itemId:s.inventoryItemId,change:-s.quantity,responsible:"KDS System",reason:`Insumo Venta: ${a.beverageName}`})})}),h(n.id)},N=l==="food"?"bg-orange-50 border-orange-200":"bg-blue-50 border-blue-200",y=l==="food"?"text-orange-500":"text-blue-600";return e.jsxs("div",{className:"h-full overflow-y-auto p-4 bg-gray-100",children:[v.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[e.jsx(d,{name:l==="food"?"cake-slice":"star",size:64,className:"mb-4 text-gray-300"}),e.jsxs("p",{className:"text-xl font-bold",children:[l==="food"?"Cocina":"Barra"," Limpia"]}),e.jsx("p",{children:"Esperando pedidos..."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:v.map(n=>e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:`p-3 border-b flex justify-between items-center ${N}`,children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg truncate max-w-[150px] text-gray-800",children:n.customerName}),e.jsxs("p",{className:"text-xs text-gray-500",children:["#",n.id.slice(-4)]})]}),e.jsx(G,{timestamp:n.createdAt})]}),e.jsxs("div",{className:"p-4 flex-grow space-y-4",children:[n.items.filter(a=>(a.type||"beverage")===l).map((a,w)=>e.jsxs("div",{className:"flex flex-col gap-1 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"mt-1",children:e.jsx("button",{onClick:()=>j({name:`${a.beverageName} ${a.sizeName?`(${a.sizeName})`:""}`,text:a.recipeRef||"Sin receta disponible."}),className:`p-1 rounded-full transition-colors hover:bg-gray-100 ${y}`,title:"Ver Instrucción",children:e.jsx(d,{name:"list",size:18})})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-gray-800 text-lg leading-tight",children:[a.beverageName,a.sizeName&&e.jsxs("span",{className:"text-gray-500 ml-1 text-base font-bold",children:["(",a.sizeName,")"]})]}),a.modifiers.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.modifiers.map((k,S)=>e.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-0.5 rounded text-xs font-bold border border-gray-200",children:k},S))})]})]}),a.notes&&e.jsxs("div",{className:"ml-8 bg-yellow-100 border-l-4 border-yellow-400 p-2 rounded-r text-sm font-bold text-yellow-900 flex items-start gap-2",children:[e.jsx(d,{name:"message-square",size:16,className:"mt-0.5 flex-shrink-0"}),e.jsx("span",{children:a.notes})]})]},w)),n.items.some(a=>(a.type||"beverage")!==l)&&e.jsx("div",{className:"pt-2 border-t border-dashed border-gray-200",children:e.jsxs("p",{className:"text-xs text-gray-400 italic text-center",children:["+ ",n.items.filter(a=>(a.type||"beverage")!==l).length," items en otra estación"]})})]}),e.jsxs("div",{className:"p-3 border-t border-gray-100 bg-gray-50",children:[e.jsx(F,{onSwipe:()=>b(n),text:"Completar",icon:"check",className:"bg-white border-gray-300 shadow-sm h-12"}),e.jsx("div",{className:"text-center mt-2",children:e.jsx("button",{onClick:()=>{confirm("¿Cancelar ticket entero?")&&i(n.id)},className:"text-xs text-gray-400 hover:text-red-500",children:"Cancelar Ticket"})})]})]},n.id))}),p&&e.jsxs(T,{isOpen:!!p,onClose:()=>j(null),title:p.name,children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 text-gray-800 whitespace-pre-wrap font-medium text-lg",children:p.text}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>j(null),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-bold shadow-md text-lg w-full",children:"¡Entendido!"})})]})]})},_=({inventoryHook:l,recipesHook:u,usersHook:m})=>{const{items:h,recordStockChange:i,produceBatch:x}=l,{recipes:o}=u,{users:p}=m,[j,v]=c.useState(null),[b,N]=c.useState(null),{marketItems:y,prepItems:n,pantryItems:a}=c.useMemo(()=>h.reduce((r,s)=>(s.kitchenStation==="market"?r.marketItems.push(s):s.kitchenStation==="prep"?r.prepItems.push(s):s.kitchenStation==="pantry"&&r.pantryItems.push(s),r),{marketItems:[],prepItems:[],pantryItems:[]}),[h]),w=r=>o.find(s=>s.outputInventoryItemId===r.id),k=r=>{const s=w(r);if(!s)return;const C={id:`quick-prod-${Date.now()}`,name:s.name,type:"baking",recipe:s,recipeId:s.id,state:"finished",currentStepIndex:0,steps:[],totalTime:0,totalTimeLeft:0,stepTimeLeft:0,lastTickTimestamp:Date.now()};v(C)},S=(r,s,C)=>{if(r.recipe){let I=1;r.recipe.outputQuantity&&r.recipe.outputQuantity>0&&(I=s/r.recipe.outputQuantity),x(r.recipe,I,s,C),v(null)}},g=({item:r,theme:s})=>{const C=r.currentStock<=r.minStock,I=s==="prep"?w(r):void 0,M={market:{border:"border-green-200",bg:"bg-white",text:"text-green-800",icon:"shopping-cart"},prep:{border:"border-red-200",bg:"bg-white",text:"text-red-800",icon:"thermometer"},pantry:{border:"border-blue-200",bg:"bg-white",text:"text-blue-800",icon:"archive"}}[s];return e.jsxs("div",{className:`p-3 rounded-lg border shadow-sm flex flex-col gap-2 ${M.bg} ${M.border} ${C?"ring-2 ring-red-400":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:`font-bold text-sm ${M.text}`,children:r.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[r.currentStock.toFixed(2)," ",r.unit," ",e.jsx("span",{className:"text-gray-400 mx-1",children:"/"})," min: ",r.minStock]})]}),C&&e.jsx(d,{name:"alert-triangle",className:"text-red-500",size:16})]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[s==="market"&&C&&e.jsxs("button",{onClick:()=>N({item:r,isAdding:!0}),className:"flex-1 bg-green-100 text-green-700 text-xs font-bold py-1.5 px-2 rounded hover:bg-green-200 flex items-center justify-center gap-1",children:[e.jsx(d,{name:"shopping-cart",size:12})," Comprar"]}),s==="prep"&&I&&e.jsxs("button",{onClick:()=>k(r),className:"flex-1 bg-red-100 text-red-700 text-xs font-bold py-1.5 px-2 rounded hover:bg-red-200 flex items-center justify-center gap-1",children:[e.jsx(d,{name:"play-circle",size:12})," Producir"]}),s==="pantry"&&e.jsxs("button",{onClick:()=>N({item:r,isAdding:!1}),className:"flex-1 bg-blue-100 text-blue-700 text-xs font-bold py-1.5 px-2 rounded hover:bg-blue-200 flex items-center justify-center gap-1",children:[e.jsx(d,{name:"minus",size:12})," Usar"]})]})]})};return e.jsxs("div",{className:"h-full flex flex-col bg-gray-50 overflow-hidden",children:[e.jsx("div",{className:"flex-grow overflow-x-auto",children:e.jsxs("div",{className:"flex h-full min-w-[900px] p-4 gap-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col bg-green-50/50 rounded-xl border border-green-100 overflow-hidden",children:[e.jsxs("div",{className:"p-3 bg-green-100/50 border-b border-green-200 flex items-center gap-2",children:[e.jsx(d,{name:"store",className:"text-green-600",size:20}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-green-900",children:"1. Mercado (Frescos)"}),e.jsx("p",{className:"text-[10px] text-green-700",children:"Compra Diaria / Semanal"})]}),e.jsx("span",{className:"ml-auto bg-white text-green-700 text-xs font-bold px-2 py-0.5 rounded-full",children:y.length})]}),e.jsxs("div",{className:"p-3 overflow-y-auto flex-grow space-y-2",children:[y.map(r=>e.jsx(g,{item:r,theme:"market"},r.id)),y.length===0&&e.jsx("p",{className:"text-center text-sm text-green-400 italic mt-4",children:"Sin items asignados a Mercado"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col bg-red-50/50 rounded-xl border border-red-100 overflow-hidden",children:[e.jsxs("div",{className:"p-3 bg-red-100/50 border-b border-red-200 flex items-center gap-2",children:[e.jsx(d,{name:"thermometer",className:"text-red-600",size:20}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-red-900",children:"2. Prep / Mise en Place"}),e.jsx("p",{className:"text-[10px] text-red-700",children:"Salsas, Rellenos, Cocciones"})]}),e.jsx("span",{className:"ml-auto bg-white text-red-700 text-xs font-bold px-2 py-0.5 rounded-full",children:n.length})]}),e.jsxs("div",{className:"p-3 overflow-y-auto flex-grow space-y-2",children:[n.map(r=>e.jsx(g,{item:r,theme:"prep"},r.id)),n.length===0&&e.jsx("p",{className:"text-center text-sm text-red-400 italic mt-4",children:"Sin items asignados a Prep"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col bg-blue-50/50 rounded-xl border border-blue-100 overflow-hidden",children:[e.jsxs("div",{className:"p-3 bg-blue-100/50 border-b border-blue-200 flex items-center gap-2",children:[e.jsx(d,{name:"archive",className:"text-blue-600",size:20}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-blue-900",children:"3. Almacén / Secos"}),e.jsx("p",{className:"text-[10px] text-blue-700",children:"Stock de seguridad"})]}),e.jsx("span",{className:"ml-auto bg-white text-blue-700 text-xs font-bold px-2 py-0.5 rounded-full",children:a.length})]}),e.jsxs("div",{className:"p-3 overflow-y-auto flex-grow space-y-2",children:[a.map(r=>e.jsx(g,{item:r,theme:"pantry"},r.id)),a.length===0&&e.jsx("p",{className:"text-center text-sm text-blue-400 italic mt-4",children:"Sin items asignados a Almacén"})]})]})]})}),j&&e.jsx(K,{isOpen:!!j,onClose:()=>v(null),process:j,users:p,onConfirm:S}),b&&e.jsx(U,{isOpen:!!b,onClose:()=>N(null),item:b.item,isAdding:b.isAdding,onUpdate:i,providers:[]})]})},ee=({inventoryHook:l,onToggleSidebar:u,recipesHook:m,usersHook:h})=>{const[i,x]=c.useState("pos");return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("header",{className:"flex-shrink-0 bg-white border-b border-gray-200 p-2 flex items-center gap-2",children:[u&&e.jsx("button",{onClick:u,className:"p-2 mr-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Abrir Menú",children:e.jsx(d,{name:"menu",size:24})}),e.jsx("div",{className:"flex-grow overflow-x-auto flex justify-center custom-scrollbar",children:e.jsxs("div",{className:"flex gap-2 min-w-max px-2",children:[e.jsxs("button",{onClick:()=>x("pos"),className:`flex items-center gap-2 px-3 py-2 rounded-full font-bold transition-all text-sm whitespace-nowrap ${i==="pos"?"bg-gray-800 text-white shadow-md":"text-gray-500 hover:bg-gray-100"}`,children:[e.jsx(d,{name:"plus-circle",size:16}),"POS"]}),e.jsx("div",{className:"w-px bg-gray-300 mx-1 h-6 self-center hidden sm:block"}),e.jsxs("button",{onClick:()=>x("kds-bar"),className:`flex items-center gap-2 px-3 py-2 rounded-full font-bold transition-all text-sm whitespace-nowrap ${i==="kds-bar"?"bg-blue-600 text-white shadow-md":"text-gray-500 hover:bg-gray-100"}`,children:[e.jsx(d,{name:"star",size:16}),"KDS Barra"]}),e.jsxs("button",{onClick:()=>x("kds-kitchen"),className:`flex items-center gap-2 px-3 py-2 rounded-full font-bold transition-all text-sm whitespace-nowrap ${i==="kds-kitchen"?"bg-orange-500 text-white shadow-md":"text-gray-500 hover:bg-gray-100"}`,children:[e.jsx(d,{name:"cake-slice",size:16}),"KDS Cocina"]}),e.jsxs("button",{onClick:()=>x("stock-kitchen"),className:`flex items-center gap-2 px-3 py-2 rounded-full font-bold transition-all text-sm whitespace-nowrap ${i==="stock-kitchen"?"bg-emerald-600 text-white shadow-md":"text-gray-500 hover:bg-gray-100"}`,children:[e.jsx(d,{name:"archive",size:16}),"Stock Cocina"]})]})})]}),e.jsxs("div",{className:"flex-grow overflow-hidden relative",children:[i==="pos"&&e.jsx(Q,{}),i==="kds-bar"&&e.jsx(D,{type:"beverage",inventoryHook:l}),i==="kds-kitchen"&&e.jsx(D,{type:"food",inventoryHook:l}),i==="stock-kitchen"&&m&&h?e.jsx(_,{inventoryHook:l,recipesHook:m,usersHook:h}):i==="stock-kitchen"&&e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Cargando módulos..."})]})]})};export{ee as default};
